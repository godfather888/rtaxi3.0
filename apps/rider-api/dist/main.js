/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ([
/* 0 */,
/* 1 */
/***/ ((module) => {

module.exports = require("@nestjs/common");

/***/ }),
/* 2 */
/***/ ((module) => {

module.exports = require("@nestjs/core");

/***/ }),
/* 3 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderAPIModule", ({
    enumerable: true,
    get: function() {
        return RiderAPIModule;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _apollo = __webpack_require__(6);
const _common = __webpack_require__(1);
const _config = __webpack_require__(7);
const _graphql = __webpack_require__(8);
const _typeorm = __webpack_require__(9);
const _database = __webpack_require__(10);
const _nestjsredis = __webpack_require__(15);
const _path = __webpack_require__(19);
const _addressmodule = __webpack_require__(20);
const _announcementmodule = __webpack_require__(27);
const _authmodule = __webpack_require__(32);
const _jwtstrategy = __webpack_require__(65);
const _chatmodule = __webpack_require__(68);
const _complaintmodule = __webpack_require__(95);
const _couponmodule = __webpack_require__(83);
const _driver_tendencymodule = __webpack_require__(99);
const _ordermodule = __webpack_require__(69);
const _riderapisetupnotfoundcontroller = __webpack_require__(102);
const _riderapicontroller = __webpack_require__(104);
const _ridermodule = __webpack_require__(34);
const _servicemodule = __webpack_require__(70);
const _sosmodule = __webpack_require__(108);
const _uploadmodule = __webpack_require__(71);
const _walletmodule = __webpack_require__(112);
const _setup = __webpack_require__(117);
const _core = __webpack_require__(2);
const _licenseverify = __webpack_require__(17);
let RiderAPIModule = class RiderAPIModule {
    constructor(licenseService){
        this.licenseService = licenseService;
    }
    async onModuleInit() {
        const license = await this.licenseService.verifyLicense();
        _common.Logger.log(license, 'RiderAPIModule.onModuleInit.license');
    }
    static async register() {
        if (await (0, _licenseverify.getConfig)(process.env.NODE_ENV ?? 'production')) {
            return {
                module: RiderAPIModule,
                imports: [
                    _database.DatabaseModule,
                    _licenseverify.LicenseVerifyModule,
                    _database.SharedCustomerWalletModule,
                    _setup.SentryModule.forRoot(),
                    _graphql.GraphQLModule.forRoot({
                        driver: _apollo.ApolloDriver,
                        installSubscriptionHandlers: true,
                        autoSchemaFile: (0, _path.join)(process.cwd(), 'apps/taxi-rider-frontend/lib/core/graphql/schema.gql'),
                        subscriptions: {
                            'graphql-ws': {
                                connectionInitWaitTimeout: 5000,
                                onDisconnect: (ctx)=>{
                                    _common.Logger.log('Socket disconnected without user', 'RiderAPIModule');
                                },
                                onConnect: async (ctx)=>{
                                    const token = ctx.connectionParams?.['authToken'] || undefined;
                                    _common.Logger.log(token, 'RiderAPIModule.onConnect.token');
                                    if (!token) {
                                        throw new Error('Missing auth token!');
                                    }
                                    const user = await (0, _jwtstrategy.validateToken)(token);
                                    _common.Logger.log(user, 'RiderAPIModule.onConnect.user');
                                    ctx.extra = {
                                        user
                                    };
                                    return {
                                        user
                                    };
                                }
                            }
                        }
                    }),
                    _typeorm.TypeOrmModule.forFeature(_database.entities),
                    _authmodule.AuthModule.register(),
                    _uploadmodule.UploadModule,
                    _ridermodule.RiderModule,
                    _servicemodule.ServiceModule,
                    _ordermodule.OrderModule,
                    _driver_tendencymodule.DriverTendencyModule,
                    _addressmodule.AddressModule,
                    _announcementmodule.AnnouncementModule,
                    _database.GeoModule,
                    _database.SharedOrderModule,
                    _database.RedisHelpersModule,
                    _complaintmodule.ComplaintModule,
                    _sosmodule.SOSModule,
                    _walletmodule.WalletModule,
                    _couponmodule.CouponModule,
                    _config.ConfigModule.forRoot({
                        cache: true,
                        isGlobal: true
                    }),
                    _nestjsredis.RedisModule.forRoot({
                        closeClient: true,
                        commonOptions: {
                            db: 2
                        },
                        config: {
                            host: process.env.REDIS_HOST ?? 'localhost'
                        }
                    }),
                    _chatmodule.ChatModule
                ],
                providers: [
                    _database.CryptoService,
                    _database.RedisPubSubProvider.provider(),
                    {
                        provide: _core.APP_FILTER,
                        useClass: _setup.SentryGlobalFilter
                    }
                ],
                controllers: [
                    _riderapicontroller.RiderAPIController
                ]
            };
        }
        return {
            module: RiderAPIModule,
            imports: [
                _licenseverify.LicenseVerifyModule
            ],
            controllers: [
                _riderapisetupnotfoundcontroller.RiderApiSetupNotFoundController
            ]
        };
    }
};
RiderAPIModule = _ts_decorate._([
    (0, _common.Module)({}),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _licenseverify.LicenseVerifyService === "undefined" ? Object : _licenseverify.LicenseVerifyService
    ])
], RiderAPIModule);


/***/ }),
/* 4 */
/***/ ((module) => {

module.exports = require("@swc/helpers/_/_ts_decorate");

/***/ }),
/* 5 */
/***/ ((module) => {

module.exports = require("@swc/helpers/_/_ts_metadata");

/***/ }),
/* 6 */
/***/ ((module) => {

module.exports = require("@nestjs/apollo");

/***/ }),
/* 7 */
/***/ ((module) => {

module.exports = require("@nestjs/config");

/***/ }),
/* 8 */
/***/ ((module) => {

module.exports = require("@nestjs/graphql");

/***/ }),
/* 9 */
/***/ ((module) => {

module.exports = require("@nestjs/typeorm");

/***/ }),
/* 10 */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  AdminNotificationEntity: () => (/* reexport */ AdminNotificationEntity),
  AdminNotificationType: () => (/* reexport */ AdminNotificationType),
  AnnouncementEntity: () => (/* reexport */ AnnouncementEntity),
  AnnouncementUserType: () => (/* reexport */ AnnouncementUserType),
  AppConfigInfoDTO: () => (/* reexport */ AppConfigInfoDTO),
  AppType: () => (/* reexport */ AppType),
  AuthRedisService: () => (/* reexport */ AuthRedisService),
  AvaialbeUpgrade: () => (/* reexport */ AvaialbeUpgrade),
  BroadnetService: () => (/* reexport */ BroadnetService),
  CampaignCodeEntity: () => (/* reexport */ CampaignCodeEntity),
  CampaignEntity: () => (/* reexport */ CampaignEntity),
  CarColorEntity: () => (/* reexport */ CarColorEntity),
  CarModelEntity: () => (/* reexport */ CarModelEntity),
  CartEntity: () => (/* reexport */ CartEntity),
  CartGroupEntity: () => (/* reexport */ CartGroupEntity),
  CartProductEntity: () => (/* reexport */ CartProductEntity),
  CartStatus: () => (/* reexport */ CartStatus),
  ChargeSavedPaymentMethodBody: () => (/* reexport */ ChargeSavedPaymentMethodBody),
  ChartInterval: () => (/* reexport */ ChartInterval),
  CommonCouponModule: () => (/* reexport */ CommonCouponModule),
  CommonCouponService: () => (/* reexport */ CommonCouponService),
  CommonGiftCardService: () => (/* reexport */ CommonGiftCardService),
  ComplaintActivityType: () => (/* reexport */ ComplaintActivityType),
  ComplaintStatus: () => (/* reexport */ ComplaintStatus),
  ConfigInformation: () => (/* reexport */ ConfigInformation),
  ConfigRedisService: () => (/* reexport */ ConfigRedisService),
  Country: () => (/* reexport */ Country),
  CouponEntity: () => (/* reexport */ CouponEntity),
  CryptoModule: () => (/* reexport */ CryptoModule),
  CryptoService: () => (/* reexport */ CryptoService),
  CurrentConfiguration: () => (/* reexport */ CurrentConfiguration),
  CustomerEntity: () => (/* reexport */ CustomerEntity),
  CustomerFavoriteProductEntity: () => (/* reexport */ CustomerFavoriteProductEntity),
  CustomerNoteEntity: () => (/* reexport */ CustomerNoteEntity),
  CustomerSessionEntity: () => (/* reexport */ CustomerSessionEntity),
  DatabaseModule: () => (/* reexport */ DatabaseModule),
  DateRangeMultiplier: () => (/* reexport */ DateRangeMultiplier),
  DeliveryContact: () => (/* reexport */ DeliveryContact),
  DeliveryFeeService: () => (/* reexport */ DeliveryFeeService),
  DeliveryMethod: () => (/* reexport */ DeliveryMethod),
  DeliveryPackageSize: () => (/* reexport */ DeliveryPackageSize),
  DevicePlatform: () => (/* reexport */ DevicePlatform),
  DeviceType: () => (/* reexport */ DeviceType),
  Dimensions: () => (/* reexport */ Dimensions),
  DistanceMultiplier: () => (/* reexport */ DistanceMultiplier),
  DriverDeductTransactionType: () => (/* reexport */ DriverDeductTransactionType),
  DriverDocumentEntity: () => (/* reexport */ DriverDocumentEntity),
  DriverDocumentRetentionPolicyEntity: () => (/* reexport */ DriverDocumentRetentionPolicyEntity),
  DriverEntity: () => (/* reexport */ DriverEntity),
  DriverNoteEntity: () => (/* reexport */ DriverNoteEntity),
  DriverNotificationService: () => (/* reexport */ DriverNotificationService),
  DriverRechargeTransactionType: () => (/* reexport */ DriverRechargeTransactionType),
  DriverRedisService: () => (/* reexport */ DriverRedisService),
  DriverServicesServiceEntity: () => (/* reexport */ DriverServicesServiceEntity),
  DriverSessionEntity: () => (/* reexport */ DriverSessionEntity),
  DriverShiftRuleEntity: () => (/* reexport */ DriverShiftRuleEntity),
  DriverStatus: () => (/* reexport */ DriverStatus),
  DriverToDriverDocumentEntity: () => (/* reexport */ DriverToDriverDocumentEntity),
  DriverTransactionEntity: () => (/* reexport */ DriverTransactionEntity),
  DriverWalletEntity: () => (/* reexport */ DriverWalletEntity),
  EnabledNotification: () => (/* reexport */ EnabledNotification),
  FeedbackEntity: () => (/* reexport */ FeedbackEntity),
  FeedbackParameterEntity: () => (/* reexport */ FeedbackParameterEntity),
  FirebaseNotificationModule: () => (/* reexport */ FirebaseNotificationModule),
  FleetEntity: () => (/* reexport */ FleetEntity),
  FleetStaffEntity: () => (/* reexport */ FleetStaffEntity),
  FleetStaffPermissionFinancial: () => (/* reexport */ FleetStaffPermissionFinancial),
  FleetStaffPermissionOrder: () => (/* reexport */ FleetStaffPermissionOrder),
  FleetStaffSessionEntity: () => (/* reexport */ FleetStaffSessionEntity),
  FleetTransactionEntity: () => (/* reexport */ FleetTransactionEntity),
  FleetWalletEntity: () => (/* reexport */ FleetWalletEntity),
  GatewayLinkMethod: () => (/* reexport */ GatewayLinkMethod),
  GatewayToUserEntity: () => (/* reexport */ GatewayToUserEntity),
  Gender: () => (/* reexport */ Gender),
  GeoModule: () => (/* reexport */ GeoModule),
  GeoProvider: () => (/* reexport */ GeoProvider),
  GeoResolver: () => (/* reexport */ GeoResolver),
  GiftBatchEntity: () => (/* reexport */ GiftBatchEntity),
  GiftCodeEntity: () => (/* reexport */ GiftCodeEntity),
  GoogleGeoService: () => (/* reexport */ GoogleGeoService),
  GoogleServicesModule: () => (/* reexport */ GoogleServicesModule),
  GoogleServicesService: () => (/* reexport */ GoogleServicesService),
  LegacyTransactionType: () => (/* reexport */ LegacyTransactionType),
  License: () => (/* reexport */ License),
  LicenseInformationDTO: () => (/* reexport */ LicenseInformationDTO),
  LicenseType: () => (/* reexport */ LicenseType),
  LicenseVerifyRemoteResponse: () => (/* reexport */ LicenseVerifyRemoteResponse),
  MediaEntity: () => (/* reexport */ MediaEntity),
  MessageStatus: () => (/* reexport */ MessageStatus),
  NominitamGeoService: () => (/* reexport */ NominitamGeoService),
  Note: () => (/* reexport */ Note),
  OperatorEntity: () => (/* reexport */ OperatorEntity),
  OperatorPermission: () => (/* reexport */ OperatorPermission),
  OperatorRoleEntity: () => (/* reexport */ OperatorRoleEntity),
  OperatorSessionEntity: () => (/* reexport */ OperatorSessionEntity),
  OrderCancelReasonEntity: () => (/* reexport */ OrderCancelReasonEntity),
  OrderFulfillmentMethod: () => (/* reexport */ OrderFulfillmentMethod),
  OrderMessageEntity: () => (/* reexport */ OrderMessageEntity),
  OrderPaymentStatus: () => (/* reexport */ OrderPaymentStatus),
  OrderQueueLevel: () => (/* reexport */ OrderQueueLevel),
  OrderRedisService: () => (/* reexport */ OrderRedisService),
  OrderStatus: () => (/* reexport */ OrderStatus),
  PahappaService: () => (/* reexport */ PahappaService),
  ParkOrderActivityEntity: () => (/* reexport */ ParkOrderActivityEntity),
  ParkOrderEntity: () => (/* reexport */ ParkOrderEntity),
  ParkOrderNoteEntity: () => (/* reexport */ ParkOrderNoteEntity),
  ParkOrderStatus: () => (/* reexport */ ParkOrderStatus),
  ParkSpotCarSize: () => (/* reexport */ ParkSpotCarSize),
  ParkSpotEntity: () => (/* reexport */ ParkSpotEntity),
  ParkSpotFacility: () => (/* reexport */ ParkSpotFacility),
  ParkSpotNoteEntity: () => (/* reexport */ ParkSpotNoteEntity),
  ParkSpotStatus: () => (/* reexport */ ParkSpotStatus),
  ParkSpotType: () => (/* reexport */ ParkSpotType),
  ParkSpotVehicleType: () => (/* reexport */ ParkSpotVehicleType),
  ParkingCustomerNotificationEntity: () => (/* reexport */ ParkingCustomerNotificationEntity),
  ParkingCustomerNotificationType: () => (/* reexport */ ParkingCustomerNotificationType),
  ParkingFeedbackEntity: () => (/* reexport */ ParkingFeedbackEntity),
  ParkingFeedbackParameterEntity: () => (/* reexport */ ParkingFeedbackParameterEntity),
  ParkingLoginSessionEntity: () => (/* reexport */ ParkingLoginSessionEntity),
  ParkingPayoutSessionEntity: () => (/* reexport */ ParkingPayoutSessionEntity),
  ParkingPayoutSessionPayoutMethodDetailEntity: () => (/* reexport */ ParkingPayoutSessionPayoutMethodDetailEntity),
  ParkingPermission: () => (/* reexport */ ParkingPermission),
  ParkingProviderNotificationEntity: () => (/* reexport */ ParkingProviderNotificationEntity),
  ParkingProviderNotificationType: () => (/* reexport */ ParkingProviderNotificationType),
  ParkingSupportRequestActivityEntity: () => (/* reexport */ ParkingSupportRequestActivityEntity),
  ParkingSupportRequestEntity: () => (/* reexport */ ParkingSupportRequestEntity),
  ParkingTransactionCreditType: () => (/* reexport */ ParkingTransactionCreditType),
  ParkingTransactionDebitType: () => (/* reexport */ ParkingTransactionDebitType),
  ParkingTransactionEntity: () => (/* reexport */ ParkingTransactionEntity),
  ParkingWalletEntity: () => (/* reexport */ ParkingWalletEntity),
  PaymentEntity: () => (/* reexport */ PaymentEntity),
  PaymentGatewayEntity: () => (/* reexport */ PaymentGatewayEntity),
  PaymentGatewayType: () => (/* reexport */ PaymentGatewayType),
  PaymentMode: () => (/* reexport */ PaymentMode),
  PaymentStatus: () => (/* reexport */ PaymentStatus),
  PayoutAccountEntity: () => (/* reexport */ PayoutAccountEntity),
  PayoutMethodEntity: () => (/* reexport */ PayoutMethodEntity),
  PayoutMethodType: () => (/* reexport */ PayoutMethodType),
  PayoutSessionStatus: () => (/* reexport */ PayoutSessionStatus),
  PersonalInfo: () => (/* reexport */ PersonalInfo),
  PhoneNumber: () => (/* reexport */ PhoneNumber),
  PlaceDTO: () => (/* reexport */ PlaceDTO),
  PlivoService: () => (/* reexport */ PlivoService),
  Point: () => (/* reexport */ Point),
  ProductCategoryEntity: () => (/* reexport */ ProductCategoryEntity),
  ProductEntity: () => (/* reexport */ ProductEntity),
  ProductOptionEntity: () => (/* reexport */ ProductOptionEntity),
  ProductVariantEntity: () => (/* reexport */ ProductVariantEntity),
  ProviderBrand: () => (/* reexport */ ProviderBrand),
  ProviderDeductTransactionType: () => (/* reexport */ ProviderDeductTransactionType),
  ProviderExpenseType: () => (/* reexport */ ProviderExpenseType),
  ProviderRechargeTransactionType: () => (/* reexport */ ProviderRechargeTransactionType),
  ProviderTransactionEntity: () => (/* reexport */ ProviderTransactionEntity),
  ProviderWalletEntity: () => (/* reexport */ ProviderWalletEntity),
  RatingAggregate: () => (/* reexport */ RatingAggregate),
  RedisHelpersModule: () => (/* reexport */ RedisHelpersModule),
  RedisPubSubProvider: () => (/* reexport */ RedisPubSubProvider),
  RegionCategoryEntity: () => (/* reexport */ RegionCategoryEntity),
  RegionEntity: () => (/* reexport */ RegionEntity),
  RegionModule: () => (/* reexport */ RegionModule),
  RegionService: () => (/* reexport */ RegionService),
  RequestActivityEntity: () => (/* reexport */ RequestActivityEntity),
  RequestActivityType: () => (/* reexport */ RequestActivityType),
  ReviewStatus: () => (/* reexport */ ReviewStatus),
  RewardAppType: () => (/* reexport */ RewardAppType),
  RewardBeneficiary: () => (/* reexport */ RewardBeneficiary),
  RewardEntity: () => (/* reexport */ RewardEntity),
  RewardEvent: () => (/* reexport */ RewardEvent),
  RiderAddressEntity: () => (/* reexport */ RiderAddressEntity),
  RiderAddressType: () => (/* reexport */ RiderAddressType),
  RiderDeductTransactionType: () => (/* reexport */ RiderDeductTransactionType),
  RiderDocumentType: () => (/* reexport */ RiderDocumentType),
  RiderNotificationService: () => (/* reexport */ RiderNotificationService),
  RiderRechargeTransactionType: () => (/* reexport */ RiderRechargeTransactionType),
  RiderReviewEntity: () => (/* reexport */ RiderReviewEntity),
  RiderStatus: () => (/* reexport */ RiderStatus),
  RiderTransactionEntity: () => (/* reexport */ RiderTransactionEntity),
  RiderWalletEntity: () => (/* reexport */ RiderWalletEntity),
  SMSEntity: () => (/* reexport */ SMSEntity),
  SMSModule: () => (/* reexport */ SMSModule),
  SMSProviderEntity: () => (/* reexport */ SMSProviderEntity),
  SMSProviderInterface: () => (/* reexport */ SMSProviderInterface),
  SMSProviderService: () => (/* reexport */ SMSProviderService),
  SMSProviderType: () => (/* reexport */ SMSProviderType),
  SMSService: () => (/* reexport */ SMSService),
  SMSStatus: () => (/* reexport */ SMSStatus),
  SMSType: () => (/* reexport */ SMSType),
  SOSActivityAction: () => (/* reexport */ SOSActivityAction),
  SOSActivityEntity: () => (/* reexport */ SOSActivityEntity),
  SOSEntity: () => (/* reexport */ SOSEntity),
  SOSReasonEntity: () => (/* reexport */ SOSReasonEntity),
  SOSStatus: () => (/* reexport */ SOSStatus),
  SavedPaymentMethodEntity: () => (/* reexport */ SavedPaymentMethodEntity),
  SavedPaymentMethodType: () => (/* reexport */ SavedPaymentMethodType),
  ServiceCategoryEntity: () => (/* reexport */ ServiceCategoryEntity),
  ServiceDistanceFeeMode: () => (/* reexport */ ServiceDistanceFeeMode),
  ServiceEntity: () => (/* reexport */ ServiceEntity),
  ServiceOptionEntity: () => (/* reexport */ ServiceOptionEntity),
  ServiceOptionIcon: () => (/* reexport */ ServiceOptionIcon),
  ServiceOptionType: () => (/* reexport */ ServiceOptionType),
  ServicePaymentMethod: () => (/* reexport */ ServicePaymentMethod),
  ServiceService: () => (/* reexport */ ServiceService),
  SessionInfo: () => (/* reexport */ SessionInfo),
  SharedConfigurationService: () => (/* reexport */ SharedConfigurationService),
  SharedCustomerModule: () => (/* reexport */ SharedCustomerModule),
  SharedCustomerService: () => (/* reexport */ SharedCustomerService),
  SharedCustomerWalletModule: () => (/* reexport */ SharedCustomerWalletModule),
  SharedCustomerWalletService: () => (/* reexport */ SharedCustomerWalletService),
  SharedDriverService: () => (/* reexport */ SharedDriverService),
  SharedFleetService: () => (/* reexport */ SharedFleetService),
  SharedOrderModule: () => (/* reexport */ SharedOrderModule),
  SharedOrderService: () => (/* reexport */ SharedOrderService),
  SharedProviderService: () => (/* reexport */ SharedProviderService),
  SharedRiderService: () => (/* reexport */ SharedRiderService),
  SharedShopModule: () => (/* reexport */ SharedShopModule),
  SharedShopService: () => (/* reexport */ SharedShopService),
  ShopCategoryEntity: () => (/* reexport */ ShopCategoryEntity),
  ShopCategoryStatus: () => (/* reexport */ ShopCategoryStatus),
  ShopCustomerNotificationEntity: () => (/* reexport */ ShopCustomerNotificationEntity),
  ShopCustomerNotificationType: () => (/* reexport */ ShopCustomerNotificationType),
  ShopCustomerSupportRequestActivityEntity: () => (/* reexport */ ShopCustomerSupportRequestActivityEntity),
  ShopCustomerSupportRequestEntity: () => (/* reexport */ ShopCustomerSupportRequestEntity),
  ShopCustomerSupportRequestType: () => (/* reexport */ ShopCustomerSupportRequestType),
  ShopDeliveryZoneEntity: () => (/* reexport */ ShopDeliveryZoneEntity),
  ShopDocumentEntity: () => (/* reexport */ ShopDocumentEntity),
  ShopDocumentRetentionPolicyEntity: () => (/* reexport */ ShopDocumentRetentionPolicyEntity),
  ShopEntity: () => (/* reexport */ ShopEntity),
  ShopFeedbackEntity: () => (/* reexport */ ShopFeedbackEntity),
  ShopFeedbackParameterEntity: () => (/* reexport */ ShopFeedbackParameterEntity),
  ShopLoginSessionEntity: () => (/* reexport */ ShopLoginSessionEntity),
  ShopNoteEntity: () => (/* reexport */ ShopNoteEntity),
  ShopNotificationEntity: () => (/* reexport */ ShopNotificationEntity),
  ShopNotificationType: () => (/* reexport */ ShopNotificationType),
  ShopOrderCartEntity: () => (/* reexport */ ShopOrderCartEntity),
  ShopOrderCartProductEntity: () => (/* reexport */ ShopOrderCartProductEntity),
  ShopOrderEntity: () => (/* reexport */ ShopOrderEntity),
  ShopOrderNoteEntity: () => (/* reexport */ ShopOrderNoteEntity),
  ShopOrderStatus: () => (/* reexport */ ShopOrderStatus),
  ShopOrderStatusHistoryEntity: () => (/* reexport */ ShopOrderStatusHistoryEntity),
  ShopPayoutSessionEntity: () => (/* reexport */ ShopPayoutSessionEntity),
  ShopPayoutSessionPayoutMethodDetailEntity: () => (/* reexport */ ShopPayoutSessionPayoutMethodDetailEntity),
  ShopPermission: () => (/* reexport */ ShopPermission),
  ShopProductPresetEntity: () => (/* reexport */ ShopProductPresetEntity),
  ShopSessionEntity: () => (/* reexport */ ShopSessionEntity),
  ShopStatus: () => (/* reexport */ ShopStatus),
  ShopSubcategoryEntity: () => (/* reexport */ ShopSubcategoryEntity),
  ShopSupportRequestActivityEntity: () => (/* reexport */ ShopSupportRequestActivityEntity),
  ShopSupportRequestEntity: () => (/* reexport */ ShopSupportRequestEntity),
  ShopSupportRequestType: () => (/* reexport */ ShopSupportRequestType),
  ShopToShopDocumentEntity: () => (/* reexport */ ShopToShopDocumentEntity),
  ShopTransactionCreditType: () => (/* reexport */ ShopTransactionCreditType),
  ShopTransactionDebitType: () => (/* reexport */ ShopTransactionDebitType),
  ShopTransactionEntity: () => (/* reexport */ ShopTransactionEntity),
  ShopWalletEntity: () => (/* reexport */ ShopWalletEntity),
  TaxiOrderEntity: () => (/* reexport */ TaxiOrderEntity),
  TaxiOrderNoteEntity: () => (/* reexport */ TaxiOrderNoteEntity),
  TaxiOrderShopEntity: () => (/* reexport */ TaxiOrderShopEntity),
  TaxiOrderType: () => (/* reexport */ TaxiOrderType),
  TaxiPayoutSessionEntity: () => (/* reexport */ TaxiPayoutSessionEntity),
  TaxiPayoutSessionPayoutMethodDetailEntity: () => (/* reexport */ TaxiPayoutSessionPayoutMethodDetailEntity),
  TaxiPermission: () => (/* reexport */ TaxiPermission),
  TaxiSupportRequestActivityEntity: () => (/* reexport */ TaxiSupportRequestActivityEntity),
  TaxiSupportRequestEntity: () => (/* reexport */ TaxiSupportRequestEntity),
  Time: () => (/* reexport */ Time),
  TimeFrequency: () => (/* reexport */ TimeFrequency),
  TimeMultiplier: () => (/* reexport */ TimeMultiplier),
  TimeRangeDTO: () => (/* reexport */ TimeRangeDTO),
  TransactionAction: () => (/* reexport */ TransactionAction),
  TransactionStatus: () => (/* reexport */ TransactionStatus),
  TransactionType: () => (/* reexport */ TransactionType),
  TwilioService: () => (/* reexport */ TwilioService),
  UpdateConfigResult: () => (/* reexport */ UpdateConfigResult),
  UpdateConfigStatus: () => (/* reexport */ UpdateConfigStatus),
  UpdatePurchaseCodeClient: () => (/* reexport */ UpdatePurchaseCodeClient),
  UpdatePurchaseCodeResult: () => (/* reexport */ UpdatePurchaseCodeResult),
  UpdatePurchaseCodeStatus: () => (/* reexport */ UpdatePurchaseCodeStatus),
  UploadResult: () => (/* reexport */ UploadResult),
  VentisService: () => (/* reexport */ VentisService),
  VerifyHash: () => (/* reexport */ VerifyHash),
  VersionStatus: () => (/* reexport */ VersionStatus),
  VonageService: () => (/* reexport */ VonageService),
  Weekday: () => (/* reexport */ Weekday),
  WeekdayMultiplier: () => (/* reexport */ WeekdayMultiplier),
  WeekdayScheduleDTO: () => (/* reexport */ WeekdayScheduleDTO),
  ZonePriceCategoryEntity: () => (/* reexport */ ZonePriceCategoryEntity),
  ZonePriceEntity: () => (/* reexport */ ZonePriceEntity),
  entities: () => (/* reexport */ entities)
});

// EXTERNAL MODULE: external "@nestjs/common"
var common_ = __webpack_require__(1);
// EXTERNAL MODULE: external "@nestjs/typeorm"
var typeorm_ = __webpack_require__(9);
// EXTERNAL MODULE: external "typeorm"
var external_typeorm_ = __webpack_require__(11);
;// ../../libs/database/src/lib/entities/taxi/car-model.entity.ts
function _ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function _ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var CarModelEntity = function CarModelEntity() {
    "use strict";
};
_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    _ts_metadata("design:type", Number)
], CarModelEntity.prototype, "id", void 0);
_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'title'
    }),
    _ts_metadata("design:type", String)
], CarModelEntity.prototype, "name", void 0);
_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.car;
    }),
    _ts_metadata("design:type", Array)
], CarModelEntity.prototype, "drivers", void 0);
CarModelEntity = _ts_decorate([
    (0,external_typeorm_.Entity)('car')
], CarModelEntity);

// EXTERNAL MODULE: external "@nestjs/graphql"
var graphql_ = __webpack_require__(8);
;// ../../libs/database/src/lib/entities/enums/driver-deduct-transaction-type.enum.ts

var DriverDeductTransactionType;
(function(DriverDeductTransactionType) {
    DriverDeductTransactionType["Withdraw"] = "Withdraw";
    DriverDeductTransactionType["Commission"] = "Commission";
    DriverDeductTransactionType["Correction"] = "Correction";
})(DriverDeductTransactionType || (DriverDeductTransactionType = {}));
(0,graphql_.registerEnumType)(DriverDeductTransactionType, {
    name: 'DriverDeductTransactionType'
});

;// ../../libs/database/src/lib/entities/enums/driver-recharge-transaction-type.enum.ts

var DriverRechargeTransactionType;
(function(DriverRechargeTransactionType) {
    DriverRechargeTransactionType["OrderFee"] = "OrderFee";
    DriverRechargeTransactionType["BankTransfer"] = "BankTransfer";
    DriverRechargeTransactionType["InAppPayment"] = "InAppPayment";
    DriverRechargeTransactionType["Gift"] = "Gift";
})(DriverRechargeTransactionType || (DriverRechargeTransactionType = {}));
(0,graphql_.registerEnumType)(DriverRechargeTransactionType, {
    name: 'DriverRechargeTransactionType'
});

;// ../../libs/database/src/lib/entities/enums/transaction-action.enum.ts

var TransactionAction;
(function(TransactionAction) {
    TransactionAction["Recharge"] = "Recharge";
    TransactionAction["Deduct"] = "Deduct";
})(TransactionAction || (TransactionAction = {}));
(0,graphql_.registerEnumType)(TransactionAction, {
    name: 'TransactionAction'
});

;// ../../libs/database/src/lib/entities/enums/transaction-status.enum.ts

var TransactionStatus;
(function(TransactionStatus) {
    TransactionStatus["Processing"] = "Processing";
    TransactionStatus["Done"] = "Done";
    TransactionStatus["Canceled"] = "Canceled";
    TransactionStatus["Rejected"] = "Rejected";
})(TransactionStatus || (TransactionStatus = {}));
(0,graphql_.registerEnumType)(TransactionStatus, {
    name: 'TransactionStatus'
});

;// ../../libs/database/src/lib/entities/enums/complaint-status.enum.ts

var ComplaintStatus;
(function(ComplaintStatus) {
    ComplaintStatus["Submitted"] = "Submitted";
    ComplaintStatus["UnderInvestigation"] = "UnderInvestigation";
    ComplaintStatus["Resolved"] = "Resolved";
})(ComplaintStatus || (ComplaintStatus = {}));
(0,graphql_.registerEnumType)(ComplaintStatus, {
    name: 'ComplaintStatus'
});

;// ../../libs/database/src/lib/transformers/multipoint.transformer.ts
var MultipointTransformer = /*#__PURE__*/ function() {
    "use strict";
    function MultipointTransformer() {}
    var _proto = MultipointTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null || value.length < 1) return null;
        return "MULTIPOINT(" + value.map(function(x) {
            return x.lng + " " + x.lat;
        }).join(',') + ")";
    };
    _proto.from = function from(value) {
        if (value == null) return [];
        var i = value.substring(11, value.length - 1).split(',').map(function(x) {
            var s = x.substring(1, x.length - 1).split(' ');
            return {
                lng: parseFloat(s[0]),
                lat: parseFloat(s[1])
            };
        });
        return i;
    };
    return MultipointTransformer;
}();

;// ../../libs/database/src/lib/entities/enums/gender.enum.ts

var Gender;
(function(Gender) {
    Gender["Male"] = "male";
    Gender["Female"] = "female";
    Gender["Unknown"] = "unknown";
})(Gender || (Gender = {}));
(0,graphql_.registerEnumType)(Gender, {
    name: 'Gender'
});

;// ../../libs/database/src/lib/entities/enums/rider-status.enum.ts

var RiderStatus;
(function(RiderStatus) {
    RiderStatus["Enabled"] = "enabled";
    RiderStatus["Disabled"] = "blocked";
})(RiderStatus || (RiderStatus = {}));
(0,graphql_.registerEnumType)(RiderStatus, {
    name: 'RiderStatus'
});

;// ../../libs/database/src/lib/entities/enums/anouncement-user-type.enum.ts

var AnnouncementUserType;
(function(AnnouncementUserType) {
    AnnouncementUserType["Driver"] = "Driver";
    AnnouncementUserType["Rider"] = "Rider";
    AnnouncementUserType["Operator"] = "Operator";
})(AnnouncementUserType || (AnnouncementUserType = {}));
(0,graphql_.registerEnumType)(AnnouncementUserType, {
    name: 'AnnouncementUserType'
});

;// ../../libs/database/src/lib/entities/enums/app-type.enum.ts

var AppType;
(function(AppType) {
    AppType["Taxi"] = "Taxi";
    AppType["Shop"] = "Shop";
    AppType["Parking"] = "Parking";
})(AppType || (AppType = {}));
(0,graphql_.registerEnumType)(AppType, {
    name: 'AppType'
});

;// ../../libs/database/src/lib/entities/announcement.entity.ts
function announcement_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function announcement_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var AnnouncementEntity = function AnnouncementEntity() {
    "use strict";
};
announcement_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    announcement_entity_ts_metadata("design:type", Number)
], AnnouncementEntity.prototype, "id", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: AnnouncementUserType,
        default: [
            AnnouncementUserType.Rider
        ]
    }),
    announcement_entity_ts_metadata("design:type", Array)
], AnnouncementEntity.prototype, "userType", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: AppType,
        nullable: true
    }),
    announcement_entity_ts_metadata("design:type", typeof AppType === "undefined" ? Object : AppType)
], AnnouncementEntity.prototype, "appType", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'startTimestamp'
    }),
    announcement_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], AnnouncementEntity.prototype, "startAt", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'expirationTimestamp'
    }),
    announcement_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], AnnouncementEntity.prototype, "expireAt", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    announcement_entity_ts_metadata("design:type", String)
], AnnouncementEntity.prototype, "title", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    announcement_entity_ts_metadata("design:type", String)
], AnnouncementEntity.prototype, "url", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    announcement_entity_ts_metadata("design:type", String)
], AnnouncementEntity.prototype, "description", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, function(media) {
        return media.announcement;
    }),
    (0,external_typeorm_.JoinColumn)(),
    announcement_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], AnnouncementEntity.prototype, "media", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    announcement_entity_ts_metadata("design:type", Number)
], AnnouncementEntity.prototype, "mediaId", void 0);
AnnouncementEntity = announcement_entity_ts_decorate([
    (0,external_typeorm_.Entity)('promotion')
], AnnouncementEntity);

;// ../../libs/database/src/lib/entities/enums/rider-deduct-transaction-type.enum.ts

var RiderDeductTransactionType;
(function(RiderDeductTransactionType) {
    RiderDeductTransactionType["OrderFee"] = "OrderFee";
    RiderDeductTransactionType["ParkingFee"] = "ParkingFee";
    RiderDeductTransactionType["CancellationFee"] = "CancellationFee";
    RiderDeductTransactionType["Withdraw"] = "Withdraw";
    RiderDeductTransactionType["Correction"] = "Correction";
})(RiderDeductTransactionType || (RiderDeductTransactionType = {}));
(0,graphql_.registerEnumType)(RiderDeductTransactionType, {
    name: 'RiderDeductTransactionType'
});

;// ../../libs/database/src/lib/entities/enums/rider-recharge-transaction-type.enum.ts

var RiderRechargeTransactionType;
(function(RiderRechargeTransactionType) {
    RiderRechargeTransactionType["BankTransfer"] = "BankTransfer";
    RiderRechargeTransactionType["Gift"] = "Gift";
    RiderRechargeTransactionType["Correction"] = "Correction";
    RiderRechargeTransactionType["InAppPayment"] = "InAppPayment";
})(RiderRechargeTransactionType || (RiderRechargeTransactionType = {}));
(0,graphql_.registerEnumType)(RiderRechargeTransactionType, {
    name: 'RiderRechargeTransactionType'
});

;// ../../libs/database/src/lib/entities/gift-batch.entity.ts
function gift_batch_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function gift_batch_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var GiftBatchEntity = function GiftBatchEntity() {
    "use strict";
};
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    gift_batch_entity_ts_metadata("design:type", Number)
], GiftBatchEntity.prototype, "id", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    gift_batch_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], GiftBatchEntity.prototype, "createdAt", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    gift_batch_entity_ts_metadata("design:type", String)
], GiftBatchEntity.prototype, "name", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.Column)('varchar', {
        length: 3
    }),
    gift_batch_entity_ts_metadata("design:type", String)
], GiftBatchEntity.prototype, "currency", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    gift_batch_entity_ts_metadata("design:type", Number)
], GiftBatchEntity.prototype, "amount", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    gift_batch_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], GiftBatchEntity.prototype, "availableFrom", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    gift_batch_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], GiftBatchEntity.prototype, "expireAt", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.giftBatchesCreated;
    }),
    gift_batch_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], GiftBatchEntity.prototype, "createdByOperator", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    gift_batch_entity_ts_metadata("design:type", Number)
], GiftBatchEntity.prototype, "createdByOperatorId", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return GiftCodeEntity;
    }, function(giftCode) {
        return giftCode.gift;
    }),
    gift_batch_entity_ts_metadata("design:type", Array)
], GiftBatchEntity.prototype, "giftCodes", void 0);
GiftBatchEntity = gift_batch_entity_ts_decorate([
    (0,external_typeorm_.Entity)('gift')
], GiftBatchEntity);

;// ../../libs/database/src/lib/entities/gift-code.entity.ts
function gift_code_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function gift_code_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var GiftCodeEntity = function GiftCodeEntity() {
    "use strict";
};
gift_code_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    gift_code_entity_ts_metadata("design:type", Number)
], GiftCodeEntity.prototype, "id", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    gift_code_entity_ts_metadata("design:type", String)
], GiftCodeEntity.prototype, "code", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    gift_code_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], GiftCodeEntity.prototype, "usedAt", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return DriverTransactionEntity;
    }, function(driverTransaction) {
        return driverTransaction.giftCard;
    }),
    gift_code_entity_ts_metadata("design:type", typeof DriverTransactionEntity === "undefined" ? Object : DriverTransactionEntity)
], GiftCodeEntity.prototype, "driverTransaction", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    gift_code_entity_ts_metadata("design:type", Number)
], GiftCodeEntity.prototype, "driverTransactionId", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return RiderTransactionEntity;
    }, function(riderTransaction) {
        return riderTransaction.giftCard;
    }),
    gift_code_entity_ts_metadata("design:type", typeof RiderTransactionEntity === "undefined" ? Object : RiderTransactionEntity)
], GiftCodeEntity.prototype, "riderTransaction", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    gift_code_entity_ts_metadata("design:type", Number)
], GiftCodeEntity.prototype, "riderTransactionId", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return GiftBatchEntity;
    }, function(gift) {
        return gift.giftCodes;
    }),
    gift_code_entity_ts_metadata("design:type", typeof GiftBatchEntity === "undefined" ? Object : GiftBatchEntity)
], GiftCodeEntity.prototype, "gift", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    gift_code_entity_ts_metadata("design:type", Number)
], GiftCodeEntity.prototype, "giftId", void 0);
GiftCodeEntity = gift_code_entity_ts_decorate([
    (0,external_typeorm_.Entity)('gift_code')
], GiftCodeEntity);

;// ../../libs/database/src/lib/entities/enums/saved-payment-method-type.ts

var SavedPaymentMethodType;
(function(SavedPaymentMethodType) {
    SavedPaymentMethodType["CARD"] = "CARD";
    SavedPaymentMethodType["BANK_ACCOUNT"] = "BANK_ACCOUNT";
})(SavedPaymentMethodType || (SavedPaymentMethodType = {}));
(0,graphql_.registerEnumType)(SavedPaymentMethodType, {
    name: 'SavedPaymentMethodType',
    description: 'Saved payment method type'
});

;// ../../libs/database/src/lib/entities/enums/card-type.enum.ts

var ProviderBrand;
(function(ProviderBrand) {
    ProviderBrand["Visa"] = "visa";
    ProviderBrand["Mastercard"] = "mastercard";
    ProviderBrand["Amex"] = "amex";
    ProviderBrand["Discover"] = "discover";
    ProviderBrand["Diners"] = "diners";
    ProviderBrand["EftPosAu"] = "eftpos_au";
    ProviderBrand["JCB"] = "jcb";
    ProviderBrand["UnionPay"] = "unionpay";
    ProviderBrand["Unknown"] = "unknown";
})(ProviderBrand || (ProviderBrand = {}));
(0,graphql_.registerEnumType)(ProviderBrand, {
    name: 'ProviderBrand',
    description: 'Brand of the provider wether bank name or card provider'
});

;// ../../libs/database/src/lib/entities/parking/enums/park-spot-type.enum.ts

var ParkSpotType;
(function(ParkSpotType) {
    ParkSpotType["PERSONAL"] = "personal";
    ParkSpotType["PUBLIC"] = "public";
})(ParkSpotType || (ParkSpotType = {}));
(0,graphql_.registerEnumType)(ParkSpotType, {
    name: 'ParkSpotType',
    description: 'The type of the park spot, If personal then show the location as name, If public then show the name as location'
});

;// ../../libs/database/src/lib/transformers/point.transformer.ts
var PointTransformer = /*#__PURE__*/ function() {
    "use strict";
    function PointTransformer() {}
    var _proto = PointTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null) return null;
        return "POINT(" + value.lng + " " + value.lat + ")";
    };
    _proto.from = function from(value) {
        if (value == null || value == '') {
            return null;
        }
        var a = value.substring(6, value.length - 1).split(' ');
        return {
            lng: parseFloat(a[0]),
            lat: parseFloat(a[1])
        };
    };
    return PointTransformer;
}();

;// ../../libs/database/src/lib/entities/parking/enums/park-spot-car-size.enum.ts

var ParkSpotCarSize;
(function(ParkSpotCarSize) {
    ParkSpotCarSize["SMALL"] = "small";
    ParkSpotCarSize["MEDIUM"] = "medium";
    ParkSpotCarSize["LARGE"] = "large";
    ParkSpotCarSize["VERY_LARGE"] = "very_large";
})(ParkSpotCarSize || (ParkSpotCarSize = {}));
(0,graphql_.registerEnumType)(ParkSpotCarSize, {
    name: 'ParkSpotCarSize'
});

;// ../../libs/database/src/lib/entities/parking/enums/park-spot-facility.enum.ts

var ParkSpotFacility;
(function(ParkSpotFacility) {
    ParkSpotFacility["GUARDED"] = "guarded";
    ParkSpotFacility["COVERED"] = "covered";
    ParkSpotFacility["CCTV"] = "cctv";
    ParkSpotFacility["ELECTRIC_CHARGING"] = "electric_charging";
    ParkSpotFacility["CAR_WASH"] = "car_wash";
    ParkSpotFacility["TOILET"] = "toilet";
})(ParkSpotFacility || (ParkSpotFacility = {}));
(0,graphql_.registerEnumType)(ParkSpotFacility, {
    name: 'ParkSpotFacility',
    description: 'List of possible park spot facilities. This enum is used in ParkSpot.'
});

;// ../../libs/database/src/lib/entities/parking/parking-feedback-parameter.entity.ts
function parking_feedback_parameter_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_feedback_parameter_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ParkingFeedbackParameterEntity = function ParkingFeedbackParameterEntity() {
    "use strict";
};
parking_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_feedback_parameter_entity_ts_metadata("design:type", Number)
], ParkingFeedbackParameterEntity.prototype, "id", void 0);
parking_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_feedback_parameter_entity_ts_metadata("design:type", String)
], ParkingFeedbackParameterEntity.prototype, "name", void 0);
parking_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_feedback_parameter_entity_ts_metadata("design:type", Boolean)
], ParkingFeedbackParameterEntity.prototype, "isGood", void 0);
parking_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ParkingFeedbackEntity;
    }, function(feedback) {
        return feedback.parameters;
    }),
    parking_feedback_parameter_entity_ts_metadata("design:type", Array)
], ParkingFeedbackParameterEntity.prototype, "feedbacks", void 0);
ParkingFeedbackParameterEntity = parking_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_feedback_parameter')
], ParkingFeedbackParameterEntity);

;// ../../libs/database/src/lib/entities/enums/review.status.enum.ts

var ReviewStatus;
(function(ReviewStatus) {
    ReviewStatus["Pending"] = "pending";
    ReviewStatus["Approved"] = "approved";
    ReviewStatus["ApprovedUnpublished"] = "approved_unpublished";
    ReviewStatus["Rejected"] = "rejected";
    ReviewStatus["Overridden"] = "overridden";
})(ReviewStatus || (ReviewStatus = {}));
(0,graphql_.registerEnumType)(ReviewStatus, {
    name: 'ReviewStatus',
    description: undefined
});

;// ../../libs/database/src/lib/entities/parking/parking-feedback.entity.ts
function parking_feedback_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_feedback_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






var ParkingFeedbackEntity = function ParkingFeedbackEntity() {
    "use strict";
};
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_feedback_entity_ts_metadata("design:type", Number)
], ParkingFeedbackEntity.prototype, "id", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    parking_feedback_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingFeedbackEntity.prototype, "createdAt", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)('float'),
    parking_feedback_entity_ts_metadata("design:type", Number)
], ParkingFeedbackEntity.prototype, "score", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_feedback_entity_ts_metadata("design:type", String)
], ParkingFeedbackEntity.prototype, "comment", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ReviewStatus,
        default: ReviewStatus.Pending
    }),
    parking_feedback_entity_ts_metadata("design:type", typeof ReviewStatus === "undefined" ? Object : ReviewStatus)
], ParkingFeedbackEntity.prototype, "status", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkSpotEntity;
    }, function(parkSpot) {
        return parkSpot.feedbacks;
    }),
    parking_feedback_entity_ts_metadata("design:type", typeof ParkSpotEntity === "undefined" ? Object : ParkSpotEntity)
], ParkingFeedbackEntity.prototype, "parkSpot", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_feedback_entity_ts_metadata("design:type", Number)
], ParkingFeedbackEntity.prototype, "parkSpotId", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }),
    parking_feedback_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkingFeedbackEntity.prototype, "customer", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_feedback_entity_ts_metadata("design:type", Number)
], ParkingFeedbackEntity.prototype, "customerId", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.feedbacks;
    }),
    (0,external_typeorm_.JoinColumn)(),
    parking_feedback_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ParkingFeedbackEntity.prototype, "order", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_feedback_entity_ts_metadata("design:type", Number)
], ParkingFeedbackEntity.prototype, "orderId", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ParkingFeedbackParameterEntity;
    }, function(parameter) {
        return parameter.feedbacks;
    }),
    (0,external_typeorm_.JoinTable)(),
    parking_feedback_entity_ts_metadata("design:type", Array)
], ParkingFeedbackEntity.prototype, "parameters", void 0);
ParkingFeedbackEntity = parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_feedback')
], ParkingFeedbackEntity);

;// ../../libs/database/src/lib/interfaces/point.ts
function point_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function point_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var Point = function Point() {
    "use strict";
};
point_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }),
    point_ts_metadata("design:type", Number)
], Point.prototype, "lat", void 0);
point_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }),
    point_ts_metadata("design:type", Number)
], Point.prototype, "lng", void 0);
point_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Int;
    }, {
        nullable: true
    }),
    point_ts_metadata("design:type", Number)
], Point.prototype, "heading", void 0);
Point = point_ts_decorate([
    (0,graphql_.ObjectType)(),
    (0,graphql_.InputType)('PointInput')
], Point);

;// ../../libs/database/src/lib/entities/parking/park-spot-note.entity.ts
function park_spot_note_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function park_spot_note_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ParkSpotNoteEntity = function ParkSpotNoteEntity() {
    "use strict";
};
park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    park_spot_note_entity_ts_metadata("design:type", Number)
], ParkSpotNoteEntity.prototype, "id", void 0);
park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    park_spot_note_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkSpotNoteEntity.prototype, "createdAt", void 0);
park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_spot_note_entity_ts_metadata("design:type", Number)
], ParkSpotNoteEntity.prototype, "parkSpotId", void 0);
park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkSpotEntity;
    }, function(parkSpot) {
        return parkSpot.notes;
    }),
    park_spot_note_entity_ts_metadata("design:type", typeof ParkSpotEntity === "undefined" ? Object : ParkSpotEntity)
], ParkSpotNoteEntity.prototype, "parkSpot", void 0);
park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.Column)('text'),
    park_spot_note_entity_ts_metadata("design:type", String)
], ParkSpotNoteEntity.prototype, "note", void 0);
park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    park_spot_note_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ParkSpotNoteEntity.prototype, "staff", void 0);
park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_spot_note_entity_ts_metadata("design:type", Number)
], ParkSpotNoteEntity.prototype, "staffId", void 0);
ParkSpotNoteEntity = park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.Entity)('park_spot_note')
], ParkSpotNoteEntity);

;// ../../libs/database/src/lib/entities/parking/enums/park-spot-status.enum.ts

var ParkSpotStatus;
(function(ParkSpotStatus) {
    ParkSpotStatus["Pending"] = "pending";
    ParkSpotStatus["Active"] = "active";
    ParkSpotStatus["Blocked"] = "blocked";
    ParkSpotStatus["Inactive"] = "inactive";
})(ParkSpotStatus || (ParkSpotStatus = {}));
(0,graphql_.registerEnumType)(ParkSpotStatus, {
    name: 'ParkSpotStatus',
    description: 'The status of the park spot'
});

;// ../../libs/database/src/lib/transformers/weekly-schedule.transformer.ts
var WeeklyScheduleTransformer = /*#__PURE__*/ function() {
    "use strict";
    function WeeklyScheduleTransformer() {}
    var _proto = WeeklyScheduleTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null || value.length == 0) return null;
        return JSON.stringify(value);
    };
    _proto.from = function from(value) {
        if (value == null || value == '') {
            return [];
        }
        return JSON.parse(value);
    };
    return WeeklyScheduleTransformer;
}();

;// ../../libs/database/src/lib/entities/enums/transaction-type.enum.ts

var TransactionType;
(function(TransactionType) {
    TransactionType["Debit"] = "Debit";
    TransactionType["Credit"] = "Credit";
})(TransactionType || (TransactionType = {}));
(0,graphql_.registerEnumType)(TransactionType, {
    name: 'TransactionType'
});

;// ../../libs/database/src/lib/entities/parking/enums/parking-transaction-debit-type.enum.ts

var ParkingTransactionDebitType;
(function(ParkingTransactionDebitType) {
    ParkingTransactionDebitType["Commission"] = "Commission";
    ParkingTransactionDebitType["Correction"] = "Correction";
    ParkingTransactionDebitType["Payout"] = "Payout";
    ParkingTransactionDebitType["Refund"] = "Refund";
    ParkingTransactionDebitType["ParkingFee"] = "ParkingFee";
    ParkingTransactionDebitType["CancelFee"] = "CancelFee";
})(ParkingTransactionDebitType || (ParkingTransactionDebitType = {}));
(0,graphql_.registerEnumType)(ParkingTransactionDebitType, {
    name: 'ParkingTransactionDebitType'
});

;// ../../libs/database/src/lib/entities/parking/enums/parking-transaction-credit-type.enum.ts

var ParkingTransactionCreditType;
(function(ParkingTransactionCreditType) {
    ParkingTransactionCreditType["WalletTopUp"] = "WalletTopUp";
    ParkingTransactionCreditType["GiftCardTopUp"] = "GiftCardTopUp";
    ParkingTransactionCreditType["BankTransfer"] = "BankTransfer";
    ParkingTransactionCreditType["ParkingRentalIncome"] = "ParkingRentalIncome";
    ParkingTransactionCreditType["Correction"] = "Correction";
})(ParkingTransactionCreditType || (ParkingTransactionCreditType = {}));
(0,graphql_.registerEnumType)(ParkingTransactionCreditType, {
    name: 'ParkingTransactionCreditType'
});

;// ../../libs/database/src/lib/entities/enums/payout-method-type.enum.ts

var PayoutMethodType;
(function(PayoutMethodType) {
    PayoutMethodType["Stripe"] = "stripe";
    PayoutMethodType["BankTransfer"] = "bank_transfer";
})(PayoutMethodType || (PayoutMethodType = {}));
(0,graphql_.registerEnumType)(PayoutMethodType, {
    name: 'PayoutMethodType',
    description: 'The type of payout method'
});

;// ../../libs/database/src/lib/entities/fragments/personal-info.ts
function personal_info_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function personal_info_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var PersonalInfo = function PersonalInfo() {
    "use strict";
};
personal_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    personal_info_ts_metadata("design:type", String)
], PersonalInfo.prototype, "firstName", void 0);
personal_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    personal_info_ts_metadata("design:type", String)
], PersonalInfo.prototype, "lastName", void 0);
personal_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    personal_info_ts_metadata("design:type", String)
], PersonalInfo.prototype, "email", void 0);
personal_info_ts_decorate([
    (0,external_typeorm_.Column)(),
    personal_info_ts_metadata("design:type", String)
], PersonalInfo.prototype, "mobileNumber", void 0);
personal_info_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: Gender
    }),
    personal_info_ts_metadata("design:type", typeof Gender === "undefined" ? Object : Gender)
], PersonalInfo.prototype, "gender", void 0);
personal_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    personal_info_ts_metadata("design:type", String)
], PersonalInfo.prototype, "address", void 0);

;// ../../libs/database/src/lib/entities/fragments/rating-aggregate.ts
function rating_aggregate_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function rating_aggregate_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var RatingAggregate = function RatingAggregate() {
    "use strict";
};
rating_aggregate_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        nullable: true
    }),
    rating_aggregate_ts_metadata("design:type", Number)
], RatingAggregate.prototype, "rating", void 0);
rating_aggregate_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    rating_aggregate_ts_metadata("design:type", Number)
], RatingAggregate.prototype, "reviewCount", void 0);

;// ../../libs/database/src/lib/entities/shop/enums/order-queue-level.enum.ts

var OrderQueueLevel;
(function(OrderQueueLevel) {
    OrderQueueLevel["LOW"] = "LOW";
    OrderQueueLevel["MEDIUM"] = "MEDIUM";
    OrderQueueLevel["HIGH"] = "HIGH";
})(OrderQueueLevel || (OrderQueueLevel = {}));
(0,graphql_.registerEnumType)(OrderQueueLevel, {
    name: 'OrderQueueLevel'
});

;// ../../libs/database/src/lib/entities/shop/enums/shop-status.enum.ts

var ShopStatus;
(function(ShopStatus) {
    ShopStatus["PendingSubmission"] = "pending_submission";
    ShopStatus["PendingApproval"] = "pending_approval";
    ShopStatus["Active"] = "active";
    ShopStatus["Inactive"] = "inactive";
    ShopStatus["Deleted"] = "deleted";
    ShopStatus["Blocked"] = "blocked";
})(ShopStatus || (ShopStatus = {}));
(0,graphql_.registerEnumType)(ShopStatus, {
    name: 'ShopStatus',
    description: 'The status of the shop'
});

;// ../../libs/database/src/lib/entities/enums/rider-address-type.enum.ts

var RiderAddressType;
(function(RiderAddressType) {
    RiderAddressType["Home"] = "Home";
    RiderAddressType["Work"] = "Work";
    RiderAddressType["Partner"] = "Partner";
    RiderAddressType["Gym"] = "Gym";
    RiderAddressType["Parent"] = "Parent";
    RiderAddressType["Cafe"] = "Cafe";
    RiderAddressType["Park"] = "Park";
    RiderAddressType["Other"] = "Other";
})(RiderAddressType || (RiderAddressType = {}));
(0,graphql_.registerEnumType)(RiderAddressType, {
    name: 'RiderAddressType'
});

;// ../../libs/database/src/lib/entities/fragments/phone-number.ts
function phone_number_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function phone_number_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var PhoneNumber = function PhoneNumber() {
    "use strict";
};
phone_number_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    phone_number_ts_metadata("design:type", String)
], PhoneNumber.prototype, "countryCode", void 0);
phone_number_ts_decorate([
    (0,external_typeorm_.Column)('bigint', {
        unique: true
    }),
    phone_number_ts_metadata("design:type", String)
], PhoneNumber.prototype, "number", void 0);

;// ../../libs/database/src/lib/entities/rider-address.entity.ts
function rider_address_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function rider_address_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






var RiderAddressEntity = function RiderAddressEntity() {
    "use strict";
};
rider_address_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    rider_address_entity_ts_metadata("design:type", Number)
], RiderAddressEntity.prototype, "id", void 0);
rider_address_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RiderAddressType,
        default: RiderAddressType.Other
    }),
    rider_address_entity_ts_metadata("design:type", typeof RiderAddressType === "undefined" ? Object : RiderAddressType)
], RiderAddressEntity.prototype, "type", void 0);
rider_address_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    rider_address_entity_ts_metadata("design:type", String)
], RiderAddressEntity.prototype, "title", void 0);
rider_address_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'address'
    }),
    rider_address_entity_ts_metadata("design:type", String)
], RiderAddressEntity.prototype, "details", void 0);
rider_address_entity_ts_decorate([
    (0,external_typeorm_.Column)('point', {
        transformer: new PointTransformer()
    }),
    rider_address_entity_ts_metadata("design:type", typeof Point === "undefined" ? Object : Point)
], RiderAddressEntity.prototype, "location", void 0);
rider_address_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.addresses;
    }),
    rider_address_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], RiderAddressEntity.prototype, "rider", void 0);
rider_address_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return PhoneNumber;
    }),
    rider_address_entity_ts_metadata("design:type", typeof PhoneNumber === "undefined" ? Object : PhoneNumber)
], RiderAddressEntity.prototype, "phoneNumber", void 0);
rider_address_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    rider_address_entity_ts_metadata("design:type", Number)
], RiderAddressEntity.prototype, "riderId", void 0);
RiderAddressEntity = rider_address_entity_ts_decorate([
    (0,external_typeorm_.Entity)('rider_address')
], RiderAddressEntity);

;// ../../libs/database/src/lib/entities/shop/enums/delivery-method.enum.ts

var DeliveryMethod;
(function(DeliveryMethod) {
    DeliveryMethod["BATCH"] = "BATCH";
    DeliveryMethod["SPLIT"] = "SPLIT";
    DeliveryMethod["SCHEDULED"] = "SCHEDULED";
})(DeliveryMethod || (DeliveryMethod = {}));
(0,graphql_.registerEnumType)(DeliveryMethod, {
    name: 'DeliveryMethod'
});

;// ../../libs/database/src/lib/entities/enums/payment-mode.enum.ts

var PaymentMode;
(function(PaymentMode) {
    PaymentMode["Cash"] = "cash";
    PaymentMode["SavedPaymentMethod"] = "savedPaymentMethod";
    PaymentMode["PaymentGateway"] = "paymentGateway";
    PaymentMode["Wallet"] = "wallet";
})(PaymentMode || (PaymentMode = {}));
(0,graphql_.registerEnumType)(PaymentMode, {
    name: 'PaymentMode',
    description: 'The means of payment for an order.'
});

;// ../../libs/database/src/lib/entities/shop/enums/shop-order-status.enum.ts

var ShopOrderStatus;
(function(ShopOrderStatus) {
    ShopOrderStatus["New"] = "new";
    ShopOrderStatus["Processing"] = "processing";
    ShopOrderStatus["PaymentPending"] = "payment-pending";
    ShopOrderStatus["PaymentFailed"] = "payment-failed";
    ShopOrderStatus["OnHold"] = "on-hold";
    ShopOrderStatus["ReadyForPickup"] = "ready-for-pickup";
    ShopOrderStatus["OutForDelivery"] = "out-for-delivery";
    ShopOrderStatus["Completed"] = "completed";
    ShopOrderStatus["Cancelled"] = "cancelled";
    ShopOrderStatus["Returned"] = "returned";
    ShopOrderStatus["Refunded"] = "refunded";
})(ShopOrderStatus || (ShopOrderStatus = {}));
(0,graphql_.registerEnumType)(ShopOrderStatus, {
    name: 'ShopOrderStatus',
    description: 'The status of the shop order'
});

;// ../../libs/database/src/lib/entities/enums/complaint-activity-type.enum.ts

var ComplaintActivityType;
(function(ComplaintActivityType) {
    ComplaintActivityType["Create"] = "Create";
    ComplaintActivityType["AssignToOperator"] = "AssignedToOperator";
    ComplaintActivityType["UnassignFromOperators"] = "UnassignedFromOperators";
    ComplaintActivityType["Update"] = "Update";
    ComplaintActivityType["Resolved"] = "Resolved";
    ComplaintActivityType["StatusChange"] = "StatusChange";
    ComplaintActivityType["Comment"] = "Comment";
})(ComplaintActivityType || (ComplaintActivityType = {}));
(0,graphql_.registerEnumType)(ComplaintActivityType, {
    name: 'ComplaintActivityType'
});

;// ../../libs/database/src/lib/entities/shop/shop-support-request-activity.entity.ts
function shop_support_request_activity_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_support_request_activity_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ShopSupportRequestActivityEntity = function ShopSupportRequestActivityEntity() {
    "use strict";
};
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_support_request_activity_entity_ts_metadata("design:type", Number)
], ShopSupportRequestActivityEntity.prototype, "id", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_support_request_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopSupportRequestActivityEntity.prototype, "createdAt", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintActivityType
    }),
    shop_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintActivityType === "undefined" ? Object : ComplaintActivityType)
], ShopSupportRequestActivityEntity.prototype, "type", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.complaintActivities;
    }),
    shop_support_request_activity_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ShopSupportRequestActivityEntity.prototype, "actor", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_support_request_activity_entity_ts_metadata("design:type", Array)
], ShopSupportRequestActivityEntity.prototype, "assignedToStaffs", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_support_request_activity_entity_ts_metadata("design:type", Array)
], ShopSupportRequestActivityEntity.prototype, "unassignedFromStaffs", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_support_request_activity_entity_ts_metadata("design:type", String)
], ShopSupportRequestActivityEntity.prototype, "comment", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    shop_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ShopSupportRequestActivityEntity.prototype, "statusFrom", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    shop_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ShopSupportRequestActivityEntity.prototype, "statusTo", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopSupportRequestEntity;
    }, function(supportRequest) {
        return supportRequest.activities;
    }),
    shop_support_request_activity_entity_ts_metadata("design:type", typeof ShopSupportRequestEntity === "undefined" ? Object : ShopSupportRequestEntity)
], ShopSupportRequestActivityEntity.prototype, "supportRequest", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_support_request_activity_entity_ts_metadata("design:type", Number)
], ShopSupportRequestActivityEntity.prototype, "supportRequestId", void 0);
ShopSupportRequestActivityEntity = shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_support_request_activity')
], ShopSupportRequestActivityEntity);

;// ../../libs/database/src/lib/entities/enums/shop-support-request-type.enum.ts

var ShopSupportRequestType;
(function(ShopSupportRequestType) {
    ShopSupportRequestType["UnavailableProduct"] = "UnavailableProduct";
    ShopSupportRequestType["CancelOrder"] = "CancelOrder";
    ShopSupportRequestType["UpdateShopCategories"] = "UpdateShopCategories";
    ShopSupportRequestType["UpdateItem"] = "UpdateItem";
    ShopSupportRequestType["ExpressDelivery"] = "ExpressDelivery";
    ShopSupportRequestType["Other"] = "Other";
})(ShopSupportRequestType || (ShopSupportRequestType = {}));
(0,graphql_.registerEnumType)(ShopSupportRequestType, {
    name: 'ShopSupportRequestType',
    description: 'The type of support request for a shop'
});

;// ../../libs/database/src/lib/entities/shop/shop-support-request.entity.ts
function shop_support_request_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_support_request_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}








var ShopSupportRequestEntity = function ShopSupportRequestEntity() {
    "use strict";
};
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_support_request_entity_ts_metadata("design:type", Number)
], ShopSupportRequestEntity.prototype, "id", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_support_request_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopSupportRequestEntity.prototype, "createdAt", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopSupportRequestType
    }),
    shop_support_request_entity_ts_metadata("design:type", typeof ShopSupportRequestType === "undefined" ? Object : ShopSupportRequestType)
], ShopSupportRequestEntity.prototype, "type", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }, function(order) {
        return order.supportRequests;
    }),
    shop_support_request_entity_ts_metadata("design:type", typeof ShopOrderEntity === "undefined" ? Object : ShopOrderEntity)
], ShopSupportRequestEntity.prototype, "order", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_support_request_entity_ts_metadata("design:type", Number)
], ShopSupportRequestEntity.prototype, "orderId", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }, function(cart) {
        return cart.supportRequests;
    }),
    shop_support_request_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ShopSupportRequestEntity.prototype, "cart", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_support_request_entity_ts_metadata("design:type", Number)
], ShopSupportRequestEntity.prototype, "cartId", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.supportRequests;
    }),
    shop_support_request_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopSupportRequestEntity.prototype, "shop", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)({}),
    shop_support_request_entity_ts_metadata("design:type", Number)
], ShopSupportRequestEntity.prototype, "shopId", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }, function(staff) {
        return staff.assignedShopSupportRequests;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_support_request_entity_ts_metadata("design:type", Array)
], ShopSupportRequestEntity.prototype, "assignedToStaffs", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_support_request_entity_ts_metadata("design:type", Boolean)
], ShopSupportRequestEntity.prototype, "requestedByShop", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_support_request_entity_ts_metadata("design:type", String)
], ShopSupportRequestEntity.prototype, "subject", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_support_request_entity_ts_metadata("design:type", String)
], ShopSupportRequestEntity.prototype, "content", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        default: ComplaintStatus.Submitted
    }),
    shop_support_request_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ShopSupportRequestEntity.prototype, "status", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopSupportRequestActivityEntity;
    }, function(activity) {
        return activity.supportRequest;
    }),
    shop_support_request_entity_ts_metadata("design:type", Array)
], ShopSupportRequestEntity.prototype, "activities", void 0);
ShopSupportRequestEntity = shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_support_request')
], ShopSupportRequestEntity);

;// ../../libs/database/src/lib/entities/fragments/note.ts
function note_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function note_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var Note = function Note() {
    "use strict";
};
note_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)(),
    note_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], Note.prototype, "createdAt", void 0);
note_ts_decorate([
    (0,external_typeorm_.Column)(),
    note_ts_metadata("design:type", String)
], Note.prototype, "note", void 0);

;// ../../libs/database/src/lib/entities/shop/shop-order-note.entity.ts
function shop_order_note_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_order_note_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var ShopOrderNoteEntity = function ShopOrderNoteEntity() {
    "use strict";
};
shop_order_note_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_order_note_entity_ts_metadata("design:type", Number)
], ShopOrderNoteEntity.prototype, "id", void 0);
shop_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return Note;
    }),
    shop_order_note_entity_ts_metadata("design:type", typeof Note === "undefined" ? Object : Note)
], ShopOrderNoteEntity.prototype, "note", void 0);
shop_order_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }, function(order) {
        return order.notes;
    }),
    shop_order_note_entity_ts_metadata("design:type", typeof ShopOrderEntity === "undefined" ? Object : ShopOrderEntity)
], ShopOrderNoteEntity.prototype, "order", void 0);
shop_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_note_entity_ts_metadata("design:type", Number)
], ShopOrderNoteEntity.prototype, "orderId", void 0);
shop_order_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    shop_order_note_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ShopOrderNoteEntity.prototype, "staff", void 0);
shop_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_note_entity_ts_metadata("design:type", Number)
], ShopOrderNoteEntity.prototype, "staffId", void 0);
ShopOrderNoteEntity = shop_order_note_entity_ts_decorate([
    (0,external_typeorm_.Entity)()
], ShopOrderNoteEntity);

;// ../../libs/database/src/lib/entities/shop/shop-order-status-history.entity.ts
function shop_order_status_history_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_order_status_history_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var ShopOrderStatusHistoryEntity = function ShopOrderStatusHistoryEntity() {
    "use strict";
};
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_order_status_history_entity_ts_metadata("design:type", Number)
], ShopOrderStatusHistoryEntity.prototype, "id", void 0);
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopOrderStatus
    }),
    shop_order_status_history_entity_ts_metadata("design:type", typeof ShopOrderStatus === "undefined" ? Object : ShopOrderStatus)
], ShopOrderStatusHistoryEntity.prototype, "status", void 0);
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }, function(order) {
        return order.statusHistories;
    }),
    shop_order_status_history_entity_ts_metadata("design:type", typeof ShopOrderEntity === "undefined" ? Object : ShopOrderEntity)
], ShopOrderStatusHistoryEntity.prototype, "order", void 0);
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_status_history_entity_ts_metadata("design:type", Number)
], ShopOrderStatusHistoryEntity.prototype, "orderId", void 0);
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }, function(order) {
        return order.statusHistories;
    }),
    shop_order_status_history_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ShopOrderStatusHistoryEntity.prototype, "orderCart", void 0);
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_status_history_entity_ts_metadata("design:type", Number)
], ShopOrderStatusHistoryEntity.prototype, "orderCartId", void 0);
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_status_history_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderStatusHistoryEntity.prototype, "expectedBy", void 0);
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_status_history_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderStatusHistoryEntity.prototype, "updatedAt", void 0);
ShopOrderStatusHistoryEntity = shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_order_status_history')
], ShopOrderStatusHistoryEntity);

;// ../../libs/database/src/lib/entities/enums/order-payment-status.enum.ts

var OrderPaymentStatus;
(function(OrderPaymentStatus) {
    OrderPaymentStatus["Unpaid"] = "unpaid";
    OrderPaymentStatus["Paid"] = "paid";
    OrderPaymentStatus["Refunded"] = "refunded";
    OrderPaymentStatus["PartiallyRefunded"] = "partially_refunded";
    OrderPaymentStatus["Pending"] = "pending";
    OrderPaymentStatus["Cancelled"] = "cancelled";
    OrderPaymentStatus["Failed"] = "failed";
})(OrderPaymentStatus || (OrderPaymentStatus = {}));
(0,graphql_.registerEnumType)(OrderPaymentStatus, {
    name: 'OrderPaymentStatus'
});

;// ../../libs/database/src/lib/entities/enums/shop-customer-support-request-type.enum.ts

var ShopCustomerSupportRequestType;
(function(ShopCustomerSupportRequestType) {
    ShopCustomerSupportRequestType["NonDelivery"] = "non_delivery";
    ShopCustomerSupportRequestType["WrongItem"] = "wrong_item";
    ShopCustomerSupportRequestType["MissingItem"] = "missing_item";
    ShopCustomerSupportRequestType["DamagedItem"] = "damaged_item";
    ShopCustomerSupportRequestType["CancelOrder"] = "cancel_order";
    ShopCustomerSupportRequestType["Other"] = "other";
})(ShopCustomerSupportRequestType || (ShopCustomerSupportRequestType = {}));
(0,graphql_.registerEnumType)(ShopCustomerSupportRequestType, {
    name: 'ShopCustomerSupportRequestType',
    description: 'The type of support request for a shop customer'
});

;// ../../libs/database/src/lib/entities/shop/shop-customer-support-request-activity.entity.ts
function shop_customer_support_request_activity_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_customer_support_request_activity_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ShopCustomerSupportRequestActivityEntity = function ShopCustomerSupportRequestActivityEntity() {
    "use strict";
};
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", Number)
], ShopCustomerSupportRequestActivityEntity.prototype, "id", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopCustomerSupportRequestActivityEntity.prototype, "createdAt", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintActivityType
    }),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintActivityType === "undefined" ? Object : ComplaintActivityType)
], ShopCustomerSupportRequestActivityEntity.prototype, "type", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ShopCustomerSupportRequestActivityEntity.prototype, "actor", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", Array)
], ShopCustomerSupportRequestActivityEntity.prototype, "assignedToStaffs", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", Array)
], ShopCustomerSupportRequestActivityEntity.prototype, "unassignedFromStaffs", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", String)
], ShopCustomerSupportRequestActivityEntity.prototype, "comment", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ShopCustomerSupportRequestActivityEntity.prototype, "statusFrom", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ShopCustomerSupportRequestActivityEntity.prototype, "statusTo", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopCustomerSupportRequestEntity;
    }, function(supportRequest) {
        return supportRequest.activities;
    }),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", typeof ShopCustomerSupportRequestEntity === "undefined" ? Object : ShopCustomerSupportRequestEntity)
], ShopCustomerSupportRequestActivityEntity.prototype, "supportRequest", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", Number)
], ShopCustomerSupportRequestActivityEntity.prototype, "supportRequestId", void 0);
ShopCustomerSupportRequestActivityEntity = shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_customer_support_request_activity')
], ShopCustomerSupportRequestActivityEntity);

;// ../../libs/database/src/lib/entities/shop/shop-customer-support-request.entity.ts
function shop_customer_support_request_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_customer_support_request_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}








var ShopCustomerSupportRequestEntity = function ShopCustomerSupportRequestEntity() {
    "use strict";
};
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_customer_support_request_entity_ts_metadata("design:type", Number)
], ShopCustomerSupportRequestEntity.prototype, "id", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopCustomerSupportRequestEntity.prototype, "createdAt", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopCustomerSupportRequestType
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", typeof ShopCustomerSupportRequestType === "undefined" ? Object : ShopCustomerSupportRequestType)
], ShopCustomerSupportRequestEntity.prototype, "type", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }, function(order) {
        return order.customerSupportRequests;
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", typeof ShopOrderEntity === "undefined" ? Object : ShopOrderEntity)
], ShopCustomerSupportRequestEntity.prototype, "order", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_customer_support_request_entity_ts_metadata("design:type", Number)
], ShopCustomerSupportRequestEntity.prototype, "orderId", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }, function(cart) {
        return cart.customerSupportRequests;
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ShopCustomerSupportRequestEntity.prototype, "cart", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", Number)
], ShopCustomerSupportRequestEntity.prototype, "cartId", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ShopCustomerSupportRequestEntity.prototype, "customer", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_customer_support_request_entity_ts_metadata("design:type", Number)
], ShopCustomerSupportRequestEntity.prototype, "customerId", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }, function(staff) {
        return staff.assignedShopCustomerSupportRequests;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_customer_support_request_entity_ts_metadata("design:type", Array)
], ShopCustomerSupportRequestEntity.prototype, "assignedToStaffs", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_customer_support_request_entity_ts_metadata("design:type", String)
], ShopCustomerSupportRequestEntity.prototype, "subject", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", String)
], ShopCustomerSupportRequestEntity.prototype, "content", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        default: ComplaintStatus.Submitted
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ShopCustomerSupportRequestEntity.prototype, "status", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopCustomerSupportRequestActivityEntity;
    }, function(activity) {
        return activity.supportRequest;
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", Array)
], ShopCustomerSupportRequestEntity.prototype, "activities", void 0);
ShopCustomerSupportRequestEntity = shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_customer_support_request')
], ShopCustomerSupportRequestEntity);

;// ../../libs/database/src/lib/entities/shop/shop-order.entity.ts
function shop_order_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_order_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



















var ShopOrderEntity = function ShopOrderEntity() {
    "use strict";
};
shop_order_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "id", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderEntity.prototype, "createdAt", void 0);
shop_order_entity_ts_decorate([
    (0,graphql_.Field)(function() {
        return ShopOrderStatus;
    }),
    shop_order_entity_ts_metadata("design:type", typeof ShopOrderStatus === "undefined" ? Object : ShopOrderStatus)
], ShopOrderEntity.prototype, "status", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_entity_ts_metadata("design:type", String)
], ShopOrderEntity.prototype, "currency", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return RiderAddressEntity;
    }),
    shop_order_entity_ts_metadata("design:type", typeof RiderAddressEntity === "undefined" ? Object : RiderAddressEntity)
], ShopOrderEntity.prototype, "deliveryAddress", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "deliveryAddressId", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.shopOrders;
    }),
    shop_order_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ShopOrderEntity.prototype, "customer", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "customerId", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DeliveryMethod
    }),
    shop_order_entity_ts_metadata("design:type", typeof DeliveryMethod === "undefined" ? Object : DeliveryMethod)
], ShopOrderEntity.prototype, "deliveryMethod", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        nullable: true,
        enum: PaymentMode
    }),
    shop_order_entity_ts_metadata("design:type", typeof PaymentMode === "undefined" ? Object : PaymentMode)
], ShopOrderEntity.prototype, "paymentMethod", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: OrderPaymentStatus,
        default: OrderPaymentStatus.Pending
    }),
    shop_order_entity_ts_metadata("design:type", typeof OrderPaymentStatus === "undefined" ? Object : OrderPaymentStatus)
], ShopOrderEntity.prototype, "paymentStatus", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "subTotal", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "deliveryFee", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "tax", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "discount", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "serviceFee", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('multipoint', {
        transformer: new MultipointTransformer(),
        nullable: true
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "deliveryDirections", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "total", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "paymentGatewayId", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderEntity.prototype, "estimatedDeliveryTime", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderEntity.prototype, "fullfillmentTime", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }),
    shop_order_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], ShopOrderEntity.prototype, "expressDelivery", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "expressDeliveryOrderId", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }),
    shop_order_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], ShopOrderEntity.prototype, "paymentGateway", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "savedPaymentMethodId", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SavedPaymentMethodEntity;
    }),
    shop_order_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], ShopOrderEntity.prototype, "savedPaymentMethod", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderCartEntity;
    }, function(cart) {
        return cart.order;
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "carts", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopSupportRequestEntity;
    }, function(activity) {
        return activity.order;
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "supportRequests", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderNoteEntity;
    }, function(note) {
        return note.order;
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "notes", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(transaction) {
        return transaction.shopOrder;
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "driverTransactions", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(transaction) {
        return transaction.shopOrder;
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "riderTransactions", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderStatusHistoryEntity;
    }, function(statusHistory) {
        return statusHistory.order;
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "statusHistories", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopCustomerSupportRequestEntity;
    }, function(supportRequest) {
        return supportRequest.order;
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "customerSupportRequests", void 0);
ShopOrderEntity = shop_order_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_order')
], ShopOrderEntity);

;// ../../libs/database/src/lib/entities/shop/shop-feedback-parameter.entity.ts
function shop_feedback_parameter_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_feedback_parameter_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ShopFeedbackParameterEntity = function ShopFeedbackParameterEntity() {
    "use strict";
};
shop_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_feedback_parameter_entity_ts_metadata("design:type", Number)
], ShopFeedbackParameterEntity.prototype, "id", void 0);
shop_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_feedback_parameter_entity_ts_metadata("design:type", Boolean)
], ShopFeedbackParameterEntity.prototype, "isGood", void 0);
shop_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_feedback_parameter_entity_ts_metadata("design:type", String)
], ShopFeedbackParameterEntity.prototype, "name", void 0);
shop_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopFeedbackEntity;
    }, function(shopFeedback) {
        return shopFeedback.parameters;
    }),
    shop_feedback_parameter_entity_ts_metadata("design:type", Number)
], ShopFeedbackParameterEntity.prototype, "shopFeedback", void 0);
shop_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_feedback_parameter_entity_ts_metadata("design:type", Number)
], ShopFeedbackParameterEntity.prototype, "shopFeedbackId", void 0);
ShopFeedbackParameterEntity = shop_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_feedback_parameter')
], ShopFeedbackParameterEntity);

;// ../../libs/database/src/lib/entities/shop/shop-feedback.entity.ts
function shop_feedback_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_feedback_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}







var ShopFeedbackEntity = function ShopFeedbackEntity() {
    "use strict";
};
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_feedback_entity_ts_metadata("design:type", Number)
], ShopFeedbackEntity.prototype, "id", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_feedback_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopFeedbackEntity.prototype, "createdAt", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint'),
    shop_feedback_entity_ts_metadata("design:type", Number)
], ShopFeedbackEntity.prototype, "score", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_feedback_entity_ts_metadata("design:type", String)
], ShopFeedbackEntity.prototype, "comment", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ReviewStatus,
        default: ReviewStatus.Pending
    }),
    shop_feedback_entity_ts_metadata("design:type", typeof ReviewStatus === "undefined" ? Object : ReviewStatus)
], ShopFeedbackEntity.prototype, "status", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_feedback_entity_ts_metadata("design:type", String)
], ShopFeedbackEntity.prototype, "reply", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_feedback_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopFeedbackEntity.prototype, "replyAt", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderCartEntity;
    }, function(order) {
        return order.feedbacks;
    }),
    shop_feedback_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ShopFeedbackEntity.prototype, "orderCart", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_feedback_entity_ts_metadata("design:type", Number)
], ShopFeedbackEntity.prototype, "orderCartId", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductEntity;
    }, function(product) {
        return product.feedbacks;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_feedback_entity_ts_metadata("design:type", Array)
], ShopFeedbackEntity.prototype, "products", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.feedbacks;
    }),
    shop_feedback_entity_ts_metadata("design:type", Number)
], ShopFeedbackEntity.prototype, "shop", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_feedback_entity_ts_metadata("design:type", Number)
], ShopFeedbackEntity.prototype, "shopId", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.reviews;
    }),
    shop_feedback_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ShopFeedbackEntity.prototype, "customer", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_feedback_entity_ts_metadata("design:type", Number)
], ShopFeedbackEntity.prototype, "customerId", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopFeedbackParameterEntity;
    }, function(reviewParameter) {
        return reviewParameter.shopFeedback;
    }),
    shop_feedback_entity_ts_metadata("design:type", Array)
], ShopFeedbackEntity.prototype, "parameters", void 0);
ShopFeedbackEntity = shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_feedback')
], ShopFeedbackEntity);

;// ../../libs/database/src/lib/entities/shop/enums/shop-transaction-debit-type.enum.ts

var ShopTransactionDebitType;
(function(ShopTransactionDebitType) {
    ShopTransactionDebitType["Commission"] = "Commission";
    ShopTransactionDebitType["Correction"] = "Correction";
    ShopTransactionDebitType["Payout"] = "Payout";
    ShopTransactionDebitType["Refund"] = "Refund";
})(ShopTransactionDebitType || (ShopTransactionDebitType = {}));
(0,graphql_.registerEnumType)(ShopTransactionDebitType, {
    name: 'ShopTransactionDebitType'
});

;// ../../libs/database/src/lib/entities/shop/enums/shop-transaction-credit-type.enum.ts

var ShopTransactionCreditType;
(function(ShopTransactionCreditType) {
    ShopTransactionCreditType["SaleRevenue"] = "SaleRevenue";
    ShopTransactionCreditType["Correction"] = "Correction";
})(ShopTransactionCreditType || (ShopTransactionCreditType = {}));
(0,graphql_.registerEnumType)(ShopTransactionCreditType, {
    name: 'ShopTransactionCreditType'
});

;// ../../libs/database/src/lib/entities/enums/payout-session-status.enum.ts

var PayoutSessionStatus;
(function(PayoutSessionStatus) {
    PayoutSessionStatus["PENDING"] = "pending";
    PayoutSessionStatus["IN_PROGRESS"] = "in_progress";
    PayoutSessionStatus["PAID"] = "paid";
    PayoutSessionStatus["FAILED"] = "failed";
    PayoutSessionStatus["CANCELLED"] = "cancelled";
})(PayoutSessionStatus || (PayoutSessionStatus = {}));
(0,graphql_.registerEnumType)(PayoutSessionStatus, {
    name: 'PayoutSessionStatus',
    description: undefined
});

;// ../../libs/database/src/lib/entities/shop/shop-payout-session-payout-method-detail.entity.ts
function shop_payout_session_payout_method_detail_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_payout_session_payout_method_detail_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ShopPayoutSessionPayoutMethodDetailEntity = function ShopPayoutSessionPayoutMethodDetailEntity() {
    "use strict";
};
shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], ShopPayoutSessionPayoutMethodDetailEntity.prototype, "id", void 0);
shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopPayoutSessionEntity;
    }, function(payoutSession) {
        return payoutSession.payoutMethodDetails;
    }),
    shop_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof ShopPayoutSessionEntity === "undefined" ? Object : ShopPayoutSessionEntity)
], ShopPayoutSessionPayoutMethodDetailEntity.prototype, "payoutSession", void 0);
shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], ShopPayoutSessionPayoutMethodDetailEntity.prototype, "payoutSessionId", void 0);
shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.sessions;
    }),
    shop_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], ShopPayoutSessionPayoutMethodDetailEntity.prototype, "payoutMethod", void 0);
shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], ShopPayoutSessionPayoutMethodDetailEntity.prototype, "payoutMethodId", void 0);
shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PayoutSessionStatus,
        default: PayoutSessionStatus.PENDING
    }),
    shop_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof PayoutSessionStatus === "undefined" ? Object : PayoutSessionStatus)
], ShopPayoutSessionPayoutMethodDetailEntity.prototype, "status", void 0);
shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopTransactionEntity;
    }, function(shopTransaction) {
        return shopTransaction.payoutSessionMethod;
    }),
    shop_payout_session_payout_method_detail_entity_ts_metadata("design:type", Array)
], ShopPayoutSessionPayoutMethodDetailEntity.prototype, "shopTransactions", void 0);
ShopPayoutSessionPayoutMethodDetailEntity = shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_payout_session_payout_method_detail')
], ShopPayoutSessionPayoutMethodDetailEntity);

;// ../../libs/database/src/lib/entities/shop/shop-payout-session.entity.ts
function shop_payout_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_payout_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






var ShopPayoutSessionEntity = function ShopPayoutSessionEntity() {
    "use strict";
};
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_payout_session_entity_ts_metadata("design:type", Number)
], ShopPayoutSessionEntity.prototype, "id", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_payout_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopPayoutSessionEntity.prototype, "createdAt", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_payout_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopPayoutSessionEntity.prototype, "processedAt", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_payout_session_entity_ts_metadata("design:type", String)
], ShopPayoutSessionEntity.prototype, "description", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: PayoutSessionStatus.PENDING,
        type: 'enum',
        enum: PayoutSessionStatus
    }),
    shop_payout_session_entity_ts_metadata("design:type", typeof PayoutSessionStatus === "undefined" ? Object : PayoutSessionStatus)
], ShopPayoutSessionEntity.prototype, "status", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.payoutSessions;
    }, {
        onDelete: 'CASCADE'
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_payout_session_entity_ts_metadata("design:type", Array)
], ShopPayoutSessionEntity.prototype, "payoutMethods", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopTransactionEntity;
    }, function(shopTransaction) {
        return shopTransaction.payoutSession;
    }),
    shop_payout_session_entity_ts_metadata("design:type", Array)
], ShopPayoutSessionEntity.prototype, "shopTransactions", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    shop_payout_session_entity_ts_metadata("design:type", Number)
], ShopPayoutSessionEntity.prototype, "totalAmount", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_payout_session_entity_ts_metadata("design:type", String)
], ShopPayoutSessionEntity.prototype, "currency", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    shop_payout_session_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ShopPayoutSessionEntity.prototype, "createdByOperator", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_payout_session_entity_ts_metadata("design:type", Number)
], ShopPayoutSessionEntity.prototype, "createdByOperatorId", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopPayoutSessionPayoutMethodDetailEntity;
    }, function(payoutMethodDetail) {
        return payoutMethodDetail.payoutSession;
    }),
    shop_payout_session_entity_ts_metadata("design:type", Array)
], ShopPayoutSessionEntity.prototype, "payoutMethodDetails", void 0);
ShopPayoutSessionEntity = shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_payout_session')
], ShopPayoutSessionEntity);

;// ../../libs/database/src/lib/entities/shop/shop-transaction.entity.ts
function shop_transaction_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_transaction_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}














var ShopTransactionEntity = function ShopTransactionEntity() {
    "use strict";
};
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "id", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopTransactionEntity.prototype, "createdAt", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopTransactionEntity.prototype, "transactionDate", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionStatus,
        default: TransactionStatus.Processing
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof TransactionStatus === "undefined" ? Object : TransactionStatus)
], ShopTransactionEntity.prototype, "status", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionType
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof TransactionType === "undefined" ? Object : TransactionType)
], ShopTransactionEntity.prototype, "type", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopTransactionDebitType,
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof ShopTransactionDebitType === "undefined" ? Object : ShopTransactionDebitType)
], ShopTransactionEntity.prototype, "debitType", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopTransactionCreditType,
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof ShopTransactionCreditType === "undefined" ? Object : ShopTransactionCreditType)
], ShopTransactionEntity.prototype, "creditType", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: '3'
    }),
    shop_transaction_entity_ts_metadata("design:type", String)
], ShopTransactionEntity.prototype, "currency", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "amount", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", String)
], ShopTransactionEntity.prototype, "documentNumber", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", String)
], ShopTransactionEntity.prototype, "description", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopTransactionEntity.prototype, "shop", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "shopId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SavedPaymentMethodEntity;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], ShopTransactionEntity.prototype, "paymentMethod", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "paymentMethodId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], ShopTransactionEntity.prototype, "paymentGateway", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "paymentGatewayId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ShopTransactionEntity.prototype, "staff", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "staffId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }, function(orderCart) {
        return orderCart.shopTransactions;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ShopTransactionEntity.prototype, "shopOrderCart", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "shopOrderCartId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopPayoutSessionEntity;
    }, function(session) {
        return session.shopTransactions;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof ShopPayoutSessionEntity === "undefined" ? Object : ShopPayoutSessionEntity)
], ShopTransactionEntity.prototype, "payoutSession", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "payoutSessionId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutAccountEntity;
    }, function(payoutAccount) {
        return payoutAccount.shopTransactions;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof PayoutAccountEntity === "undefined" ? Object : PayoutAccountEntity)
], ShopTransactionEntity.prototype, "payoutAccount", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "payoutAccountId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.shopTransactions;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], ShopTransactionEntity.prototype, "payoutMethod", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "payoutMethodId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopPayoutSessionPayoutMethodDetailEntity;
    }, function(payoutSessionMethod) {
        return payoutSessionMethod.shopTransactions;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof ShopPayoutSessionPayoutMethodDetailEntity === "undefined" ? Object : ShopPayoutSessionPayoutMethodDetailEntity)
], ShopTransactionEntity.prototype, "payoutSessionMethod", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "payoutSessionMethodId", void 0);
ShopTransactionEntity = shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_transaction')
], ShopTransactionEntity);

;// ../../libs/database/src/lib/entities/enums/provider-deduct-transaction-type.enum.ts

var ProviderDeductTransactionType;
(function(ProviderDeductTransactionType) {
    ProviderDeductTransactionType["Withdraw"] = "Withdraw";
    ProviderDeductTransactionType["Expense"] = "Expense";
    ProviderDeductTransactionType["Refund"] = "Refund";
})(ProviderDeductTransactionType || (ProviderDeductTransactionType = {}));
(0,graphql_.registerEnumType)(ProviderDeductTransactionType, {
    name: 'ProviderDeductTransactionType'
});

;// ../../libs/database/src/lib/entities/enums/provider-recharge-transaction-type.enum.ts

var ProviderRechargeTransactionType;
(function(ProviderRechargeTransactionType) {
    ProviderRechargeTransactionType["Commission"] = "Commission";
})(ProviderRechargeTransactionType || (ProviderRechargeTransactionType = {}));
(0,graphql_.registerEnumType)(ProviderRechargeTransactionType, {
    name: 'ProviderRechargeTransactionType'
});

;// ../../libs/database/src/lib/entities/enums/provider-expense-type.enum.ts

var ProviderExpenseType;
(function(ProviderExpenseType) {
    ProviderExpenseType["TechnologyDevelopment"] = "TechnologyDevelopment";
    ProviderExpenseType["PlatformMaintenance"] = "PlatformMaintenance";
    ProviderExpenseType["SoftwareLicense"] = "SoftwareLicense";
    ProviderExpenseType["Hosting"] = "Hosting";
    ProviderExpenseType["CloudServices"] = "CloudServices";
    ProviderExpenseType["Marketing"] = "Marketing";
})(ProviderExpenseType || (ProviderExpenseType = {}));
(0,graphql_.registerEnumType)(ProviderExpenseType, {
    name: 'ProviderExpenseType'
});

;// ../../libs/database/src/lib/entities/provider-transaction.entity.ts
function provider_transaction_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function provider_transaction_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}











var ProviderTransactionEntity = function ProviderTransactionEntity() {
    "use strict";
};
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    provider_transaction_entity_ts_metadata("design:type", Number)
], ProviderTransactionEntity.prototype, "id", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        name: 'transactionTime'
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ProviderTransactionEntity.prototype, "createdAt", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionAction
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof TransactionAction === "undefined" ? Object : TransactionAction)
], ProviderTransactionEntity.prototype, "action", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: AppType,
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof AppType === "undefined" ? Object : AppType)
], ProviderTransactionEntity.prototype, "appType", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ProviderDeductTransactionType,
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof ProviderDeductTransactionType === "undefined" ? Object : ProviderDeductTransactionType)
], ProviderTransactionEntity.prototype, "deductType", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ProviderRechargeTransactionType,
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof ProviderRechargeTransactionType === "undefined" ? Object : ProviderRechargeTransactionType)
], ProviderTransactionEntity.prototype, "rechargeType", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ProviderExpenseType,
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof ProviderExpenseType === "undefined" ? Object : ProviderExpenseType)
], ProviderTransactionEntity.prototype, "expenseType", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    provider_transaction_entity_ts_metadata("design:type", Number)
], ProviderTransactionEntity.prototype, "amount", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    provider_transaction_entity_ts_metadata("design:type", String)
], ProviderTransactionEntity.prototype, "currency", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'documentNumber'
    }),
    provider_transaction_entity_ts_metadata("design:type", String)
], ProviderTransactionEntity.prototype, "refrenceNumber", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'details'
    }),
    provider_transaction_entity_ts_metadata("design:type", String)
], ProviderTransactionEntity.prototype, "description", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.providerTransactions;
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ProviderTransactionEntity.prototype, "operator", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", Number)
], ProviderTransactionEntity.prototype, "operatorId", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.providerTransactions;
    }, {
        onDelete: 'CASCADE'
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], ProviderTransactionEntity.prototype, "request", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", Number)
], ProviderTransactionEntity.prototype, "requestId", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }, function(cart) {
        return cart.providerTransactions;
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ProviderTransactionEntity.prototype, "shopOrderCart", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", Number)
], ProviderTransactionEntity.prototype, "shopOrderCartId", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.adminTransactions;
    }, {
        onDelete: 'CASCADE'
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], ProviderTransactionEntity.prototype, "paymentGateway", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", Number)
], ProviderTransactionEntity.prototype, "paymentGatewayId", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.providerTransactions;
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ProviderTransactionEntity.prototype, "parkOrder", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", Number)
], ProviderTransactionEntity.prototype, "parkOrderId", void 0);
ProviderTransactionEntity = provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Entity)('admin_transaction')
], ProviderTransactionEntity);

;// ../../libs/database/src/lib/entities/shop/enums/shop-order-cart-status.enum.ts

var CartStatus;
(function(CartStatus) {
    CartStatus["New"] = "New";
    CartStatus["Preparing"] = "Preparing";
    CartStatus["ReadyForPickup"] = "ReadyForPickup";
    CartStatus["OutForDelivery"] = "OutForDelivery";
    CartStatus["Completed"] = "Completed";
    CartStatus["CancelRequestedByShop"] = "CancelRequestedByShop";
    CartStatus["CanceledRequestedByCustomer"] = "CanceledRequestedByCustomer";
    CartStatus["CanceledByShop"] = "CanceledByShop";
    CartStatus["CanceledByCustomer"] = "CanceledByCustomer";
    CartStatus["Returned"] = "Returned";
    CartStatus["Failed"] = "Failed";
})(CartStatus || (CartStatus = {}));
(0,graphql_.registerEnumType)(CartStatus, {
    name: 'CartStatus'
});

;// ../../libs/database/src/lib/entities/shop/enums/order-fulfillment-method.ts

var OrderFulfillmentMethod;
(function(OrderFulfillmentMethod) {
    OrderFulfillmentMethod["ShopDelivery"] = "shop_delivery";
    OrderFulfillmentMethod["ExpressDelivery"] = "express_delivery";
    OrderFulfillmentMethod["CustomerPickup"] = "customer_pickup";
})(OrderFulfillmentMethod || (OrderFulfillmentMethod = {}));
(0,graphql_.registerEnumType)(OrderFulfillmentMethod, {
    name: 'OrderFulfillmentMethod',
    description: 'The method of order fulfillment including shop delivery, express delivery, and customer pickup'
});

;// ../../libs/database/src/lib/entities/shop/shop-order-cart.entity.ts
function shop_order_cart_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_order_cart_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}












var ShopOrderCartEntity = function ShopOrderCartEntity() {
    "use strict";
};
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "id", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }, function(order) {
        return order.carts;
    }),
    shop_order_cart_entity_ts_metadata("design:type", typeof ShopOrderEntity === "undefined" ? Object : ShopOrderEntity)
], ShopOrderCartEntity.prototype, "order", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "orderId", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: CartStatus,
        default: CartStatus.New
    }),
    shop_order_cart_entity_ts_metadata("design:type", typeof CartStatus === "undefined" ? Object : CartStatus)
], ShopOrderCartEntity.prototype, "status", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(order) {
        return order.carts;
    }),
    shop_order_cart_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopOrderCartEntity.prototype, "shop", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "shopId", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "subtotal", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "shopDeliveryFee", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "tax", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "discount", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "total", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_cart_entity_ts_metadata("design:type", String)
], ShopOrderCartEntity.prototype, "customerDescription", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_cart_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderCartEntity.prototype, "estimatedPreparationTime", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: OrderFulfillmentMethod,
        default: OrderFulfillmentMethod.ShopDelivery
    }),
    shop_order_cart_entity_ts_metadata("design:type", typeof OrderFulfillmentMethod === "undefined" ? Object : OrderFulfillmentMethod)
], ShopOrderCartEntity.prototype, "fullfillmentMethod", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderCartProductEntity;
    }, function(product) {
        return product.cart;
    }),
    shop_order_cart_entity_ts_metadata("design:type", Array)
], ShopOrderCartEntity.prototype, "products", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopFeedbackEntity;
    }, function(feedback) {
        return feedback.orderCart;
    }),
    shop_order_cart_entity_ts_metadata("design:type", Array)
], ShopOrderCartEntity.prototype, "feedbacks", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopTransactionEntity;
    }, function(transaction) {
        return transaction.shopOrderCart;
    }),
    shop_order_cart_entity_ts_metadata("design:type", Array)
], ShopOrderCartEntity.prototype, "shopTransactions", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProviderTransactionEntity;
    }, function(transaction) {
        return transaction.shopOrderCart;
    }),
    shop_order_cart_entity_ts_metadata("design:type", Array)
], ShopOrderCartEntity.prototype, "providerTransactions", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopSupportRequestEntity;
    }, function(supportRequest) {
        return supportRequest.cart;
    }),
    shop_order_cart_entity_ts_metadata("design:type", Array)
], ShopOrderCartEntity.prototype, "supportRequests", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderStatusHistoryEntity;
    }, function(statusHistory) {
        return statusHistory.orderCart;
    }),
    shop_order_cart_entity_ts_metadata("design:type", Array)
], ShopOrderCartEntity.prototype, "statusHistories", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopCustomerSupportRequestEntity;
    }, function(request) {
        return request.cart;
    }),
    shop_order_cart_entity_ts_metadata("design:type", Array)
], ShopOrderCartEntity.prototype, "customerSupportRequests", void 0);
ShopOrderCartEntity = shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_order_cart')
], ShopOrderCartEntity);

;// ../../libs/database/src/lib/entities/shop/product-option.entity.ts
function product_option_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function product_option_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ProductOptionEntity = function ProductOptionEntity() {
    "use strict";
};
product_option_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    product_option_entity_ts_metadata("design:type", Number)
], ProductOptionEntity.prototype, "id", void 0);
product_option_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_option_entity_ts_metadata("design:type", String)
], ProductOptionEntity.prototype, "name", void 0);
product_option_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    product_option_entity_ts_metadata("design:type", String)
], ProductOptionEntity.prototype, "description", void 0);
product_option_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    product_option_entity_ts_metadata("design:type", Number)
], ProductOptionEntity.prototype, "price", void 0);
product_option_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductEntity;
    }, function(product) {
        return product.options;
    }),
    product_option_entity_ts_metadata("design:type", typeof ProductEntity === "undefined" ? Object : ProductEntity)
], ProductOptionEntity.prototype, "products", void 0);
product_option_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_option_entity_ts_metadata("design:type", Number)
], ProductOptionEntity.prototype, "productId", void 0);
product_option_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopOrderCartProductEntity;
    }, function(orderProduct) {
        return orderProduct.options;
    }),
    product_option_entity_ts_metadata("design:type", Array)
], ProductOptionEntity.prototype, "orderProducts", void 0);
ProductOptionEntity = product_option_entity_ts_decorate([
    (0,external_typeorm_.Entity)()
], ProductOptionEntity);

;// ../../libs/database/src/lib/entities/shop/shop-order-cart-product.entity.ts
function shop_order_cart_product_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_order_cart_product_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ShopOrderCartProductEntity = function ShopOrderCartProductEntity() {
    "use strict";
};
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "id", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }, function(cart) {
        return cart.products;
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ShopOrderCartProductEntity.prototype, "cart", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "cartId", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ProductEntity;
    }, function(product) {
        return product.orderProducts;
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", typeof ProductEntity === "undefined" ? Object : ProductEntity)
], ShopOrderCartProductEntity.prototype, "product", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "productId", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ProductVariantEntity;
    }, function(product) {
        return product.orderProducts;
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", typeof ProductVariantEntity === "undefined" ? Object : ProductVariantEntity)
], ShopOrderCartProductEntity.prototype, "productVariant", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "productVariantId", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductOptionEntity;
    }, function(option) {
        return option.orderProducts;
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", Array)
], ShopOrderCartProductEntity.prototype, "options", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "priceEach", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 1
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "quantity", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "unavailableQuantity", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "canceledQuantity", void 0);
ShopOrderCartProductEntity = shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_order_cart_product')
], ShopOrderCartProductEntity);

;// ../../libs/database/src/lib/entities/shop/product-variant.entity.ts
function product_variant_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function product_variant_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ProductVariantEntity = function ProductVariantEntity() {
    "use strict";
};
product_variant_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    product_variant_entity_ts_metadata("design:type", Number)
], ProductVariantEntity.prototype, "id", void 0);
product_variant_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ProductEntity;
    }, function(product) {
        return product.variants;
    }),
    product_variant_entity_ts_metadata("design:type", typeof ProductEntity === "undefined" ? Object : ProductEntity)
], ProductVariantEntity.prototype, "product", void 0);
product_variant_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_variant_entity_ts_metadata("design:type", Number)
], ProductVariantEntity.prototype, "productId", void 0);
product_variant_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_variant_entity_ts_metadata("design:type", String)
], ProductVariantEntity.prototype, "name", void 0);
product_variant_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    product_variant_entity_ts_metadata("design:type", String)
], ProductVariantEntity.prototype, "description", void 0);
product_variant_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_variant_entity_ts_metadata("design:type", Number)
], ProductVariantEntity.prototype, "basePrice", void 0);
product_variant_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderCartProductEntity;
    }, function(orderProduct) {
        return orderProduct.productVariant;
    }),
    product_variant_entity_ts_metadata("design:type", Array)
], ProductVariantEntity.prototype, "orderProducts", void 0);
ProductVariantEntity = product_variant_entity_ts_decorate([
    (0,external_typeorm_.Entity)('product_variant')
], ProductVariantEntity);

;// ../../libs/database/src/lib/entities/shop/customer-favorite-product.entity.ts
function customer_favorite_product_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function customer_favorite_product_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var CustomerFavoriteProductEntity = function CustomerFavoriteProductEntity() {
    "use strict";
};
customer_favorite_product_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    customer_favorite_product_entity_ts_metadata("design:type", Number)
], CustomerFavoriteProductEntity.prototype, "id", void 0);
customer_favorite_product_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    customer_favorite_product_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CustomerFavoriteProductEntity.prototype, "createdAt", void 0);
customer_favorite_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.favoriteProducts;
    }),
    customer_favorite_product_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], CustomerFavoriteProductEntity.prototype, "customer", void 0);
customer_favorite_product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    customer_favorite_product_entity_ts_metadata("design:type", Number)
], CustomerFavoriteProductEntity.prototype, "customerId", void 0);
customer_favorite_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ProductEntity;
    }, function(product) {
        return product.customersFavorited;
    }),
    customer_favorite_product_entity_ts_metadata("design:type", typeof ProductEntity === "undefined" ? Object : ProductEntity)
], CustomerFavoriteProductEntity.prototype, "product", void 0);
customer_favorite_product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    customer_favorite_product_entity_ts_metadata("design:type", Number)
], CustomerFavoriteProductEntity.prototype, "productId", void 0);
CustomerFavoriteProductEntity = customer_favorite_product_entity_ts_decorate([
    (0,external_typeorm_.Entity)('customer_favorite_product')
], CustomerFavoriteProductEntity);

;// ../../libs/database/src/lib/interfaces/dimensions.ts
var Dimensions = function Dimensions() {
    "use strict";
};

;// ../../libs/database/src/lib/entities/shop/product.entity.ts
function product_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function product_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}












var ProductEntity = function ProductEntity() {
    "use strict";
};
product_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "id", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_entity_ts_metadata("design:type", String)
], ProductEntity.prototype, "name", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    product_entity_ts_metadata("design:type", String)
], ProductEntity.prototype, "description", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'int',
        nullable: true
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "weight", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'json',
        nullable: true
    }),
    product_entity_ts_metadata("design:type", typeof Dimensions === "undefined" ? Object : Dimensions)
], ProductEntity.prototype, "dimensions", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('text', {
        transformer: new WeeklyScheduleTransformer(),
        nullable: true
    }),
    product_entity_ts_metadata("design:type", Array)
], ProductEntity.prototype, "availabilitySchedule", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return RatingAggregate;
    }),
    product_entity_ts_metadata("design:type", typeof RatingAggregate === "undefined" ? Object : RatingAggregate)
], ProductEntity.prototype, "ratingAggregate", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.products;
    }),
    product_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ProductEntity.prototype, "shop", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "shopId", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }),
    product_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], ProductEntity.prototype, "image", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "imageId", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        comment: 'in minutes'
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "minimumPreparationTime", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        comment: 'in minutes'
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "maximumPreparationTime", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "discountPercentage", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "discountedQuantity", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ProductEntity.prototype, "discountUntil", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "usedDiscountedQuantity", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "stockQuantity", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "basePrice", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProductVariantEntity;
    }, function(variant) {
        return variant.product;
    }),
    product_entity_ts_metadata("design:type", Array)
], ProductEntity.prototype, "variants", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductOptionEntity;
    }, function(option) {
        return option.products;
    }),
    (0,external_typeorm_.JoinTable)(),
    product_entity_ts_metadata("design:type", Array)
], ProductEntity.prototype, "options", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductCategoryEntity;
    }, function(category) {
        return category.products;
    }),
    (0,external_typeorm_.JoinTable)(),
    product_entity_ts_metadata("design:type", Array)
], ProductEntity.prototype, "categories", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CustomerFavoriteProductEntity;
    }, function(customerFavoriteProduct) {
        return customerFavoriteProduct.product;
    }),
    product_entity_ts_metadata("design:type", Array)
], ProductEntity.prototype, "customersFavorited", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderCartProductEntity;
    }, function(orderProduct) {
        return orderProduct.product;
    }),
    product_entity_ts_metadata("design:type", Array)
], ProductEntity.prototype, "orderProducts", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopFeedbackEntity;
    }, function(feedback) {
        return feedback.products;
    }),
    product_entity_ts_metadata("design:type", typeof ShopFeedbackEntity === "undefined" ? Object : ShopFeedbackEntity)
], ProductEntity.prototype, "feedbacks", void 0);
ProductEntity = product_entity_ts_decorate([
    (0,external_typeorm_.Entity)('product')
], ProductEntity);

;// ../../libs/database/src/lib/entities/shop/shop-product-preset.entity.ts
function shop_product_preset_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_product_preset_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var ShopProductPresetEntity = function ShopProductPresetEntity() {
    "use strict";
};
shop_product_preset_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_product_preset_entity_ts_metadata("design:type", Number)
], ShopProductPresetEntity.prototype, "id", void 0);
shop_product_preset_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_product_preset_entity_ts_metadata("design:type", String)
], ShopProductPresetEntity.prototype, "name", void 0);
shop_product_preset_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.productPresets;
    }),
    shop_product_preset_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopProductPresetEntity.prototype, "shop", void 0);
shop_product_preset_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_product_preset_entity_ts_metadata("design:type", Number)
], ShopProductPresetEntity.prototype, "shopId", void 0);
shop_product_preset_entity_ts_decorate([
    (0,external_typeorm_.Column)('text', {
        transformer: new WeeklyScheduleTransformer(),
        nullable: true
    }),
    shop_product_preset_entity_ts_metadata("design:type", Array)
], ShopProductPresetEntity.prototype, "weeklySchedule", void 0);
shop_product_preset_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductCategoryEntity;
    }, function(product) {
        return product.presets;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_product_preset_entity_ts_metadata("design:type", Array)
], ShopProductPresetEntity.prototype, "productCategories", void 0);
ShopProductPresetEntity = shop_product_preset_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_product_preset')
], ShopProductPresetEntity);

;// ../../libs/database/src/lib/entities/shop/product.category.entity.ts
function product_category_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function product_category_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var ProductCategoryEntity = function ProductCategoryEntity() {
    "use strict";
};
product_category_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    product_category_entity_ts_metadata("design:type", Number)
], ProductCategoryEntity.prototype, "id", void 0);
product_category_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_category_entity_ts_metadata("design:type", String)
], ProductCategoryEntity.prototype, "name", void 0);
product_category_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.productCategories;
    }),
    product_category_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ProductCategoryEntity.prototype, "shop", void 0);
product_category_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_category_entity_ts_metadata("design:type", Number)
], ProductCategoryEntity.prototype, "shopId", void 0);
product_category_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductEntity;
    }, function(product) {
        return product.categories;
    }),
    product_category_entity_ts_metadata("design:type", Array)
], ProductCategoryEntity.prototype, "products", void 0);
product_category_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopProductPresetEntity;
    }, function(preset) {
        return preset.productCategories;
    }),
    product_category_entity_ts_metadata("design:type", Array)
], ProductCategoryEntity.prototype, "presets", void 0);
ProductCategoryEntity = product_category_entity_ts_decorate([
    (0,external_typeorm_.Entity)('product_category')
], ProductCategoryEntity);

;// ../../libs/database/src/lib/entities/shop/enums/shop-category-status.enum.ts

var ShopCategoryStatus;
(function(ShopCategoryStatus) {
    ShopCategoryStatus["Enabled"] = "enabled";
    ShopCategoryStatus["Disabled"] = "disabled";
})(ShopCategoryStatus || (ShopCategoryStatus = {}));
(0,graphql_.registerEnumType)(ShopCategoryStatus, {
    name: 'ShopCategoryStatus'
});

;// ../../libs/database/src/lib/entities/shop/shop-category.entity.ts
function shop_category_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_category_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var ShopCategoryEntity = function ShopCategoryEntity() {
    "use strict";
};
shop_category_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_category_entity_ts_metadata("design:type", Number)
], ShopCategoryEntity.prototype, "id", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_category_entity_ts_metadata("design:type", String)
], ShopCategoryEntity.prototype, "name", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    shop_category_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], ShopCategoryEntity.prototype, "image", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_category_entity_ts_metadata("design:type", Number)
], ShopCategoryEntity.prototype, "imageId", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_category_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopCategoryEntity.prototype, "createdAt", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.UpdateDateColumn)({
        nullable: true
    }),
    shop_category_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopCategoryEntity.prototype, "updatedAt", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)({
        nullable: true
    }),
    shop_category_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopCategoryEntity.prototype, "deletedAt", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopCategoryStatus,
        default: ShopCategoryStatus.Enabled
    }),
    shop_category_entity_ts_metadata("design:type", typeof ShopCategoryStatus === "undefined" ? Object : ShopCategoryStatus)
], ShopCategoryEntity.prototype, "status", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.categories;
    }),
    shop_category_entity_ts_metadata("design:type", Array)
], ShopCategoryEntity.prototype, "shops", void 0);
ShopCategoryEntity = shop_category_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_category')
], ShopCategoryEntity);

;// ../../libs/database/src/lib/transformers/polygon.transformer.ts
var PolygonTransformer = /*#__PURE__*/ function() {
    "use strict";
    function PolygonTransformer() {}
    var _proto = PolygonTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null) return null;
        var str = value.map(function(x) {
            var ar = x.map(function(y) {
                return y.lng + " " + y.lat;
            });
            return ar.join(',');
        }).join('),(');
        return "POLYGON((" + str + "))";
    };
    _proto.from = function from(value) {
        if (value == null || value == undefined) {
            return [];
        }
        return value.substring(8, value.length - 1).split('),(').map(function(x) {
            var res = x.substring(1, x.length - 1).split(',').map(function(y) {
                var s = y.split(' ');
                return {
                    lng: parseFloat(s[0]),
                    lat: parseFloat(s[1])
                };
            });
            return res;
        });
    };
    return PolygonTransformer;
}();

;// ../../libs/database/src/lib/entities/shop/shop-delivery-zone.entity.ts
function shop_delivery_zone_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_delivery_zone_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ShopDeliveryZoneEntity = function ShopDeliveryZoneEntity() {
    "use strict";
};
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_delivery_zone_entity_ts_metadata("design:type", Number)
], ShopDeliveryZoneEntity.prototype, "id", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.deliveryZones;
    }),
    shop_delivery_zone_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopDeliveryZoneEntity.prototype, "shop", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_delivery_zone_entity_ts_metadata("design:type", Number)
], ShopDeliveryZoneEntity.prototype, "shopId", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_delivery_zone_entity_ts_metadata("design:type", String)
], ShopDeliveryZoneEntity.prototype, "name", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: false,
        default: 0,
        precision: 10,
        scale: 2
    }),
    shop_delivery_zone_entity_ts_metadata("design:type", Number)
], ShopDeliveryZoneEntity.prototype, "deliveryFee", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        nullable: false,
        default: 1
    }),
    shop_delivery_zone_entity_ts_metadata("design:type", Number)
], ShopDeliveryZoneEntity.prototype, "minimumOrderAmount", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        nullable: false
    }),
    shop_delivery_zone_entity_ts_metadata("design:type", Number)
], ShopDeliveryZoneEntity.prototype, "minDeliveryTimeMinutes", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        nullable: false
    }),
    shop_delivery_zone_entity_ts_metadata("design:type", Number)
], ShopDeliveryZoneEntity.prototype, "maxDeliveryTimeMinutes", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        nullable: false,
        default: 1
    }),
    shop_delivery_zone_entity_ts_metadata("design:type", Boolean)
], ShopDeliveryZoneEntity.prototype, "enabled", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)('polygon', {
        transformer: new PolygonTransformer()
    }),
    shop_delivery_zone_entity_ts_metadata("design:type", Array)
], ShopDeliveryZoneEntity.prototype, "location", void 0);
ShopDeliveryZoneEntity = shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_delivery_zone')
], ShopDeliveryZoneEntity);

;// ../../libs/database/src/lib/entities/enums/device-type.enum.ts

var DeviceType;
(function(DeviceType) {
    DeviceType["DESKTOP"] = "DESKTOP";
    DeviceType["MOBILE"] = "MOBILE";
})(DeviceType || (DeviceType = {}));
(0,graphql_.registerEnumType)(DeviceType, {
    name: 'DeviceType'
});

;// ../../libs/database/src/lib/entities/enums/device-platform.enum.ts

var DevicePlatform;
(function(DevicePlatform) {
    DevicePlatform["Android"] = "ANDROID";
    DevicePlatform["Ios"] = "IOS";
    DevicePlatform["Web"] = "WEB";
    DevicePlatform["MacOS"] = "MACOS";
    DevicePlatform["Windows"] = "WINDOWS";
    DevicePlatform["Linux"] = "LINUX";
})(DevicePlatform || (DevicePlatform = {}));
(0,graphql_.registerEnumType)(DevicePlatform, {
    name: 'DevicePlatform'
});

;// ../../libs/database/src/lib/entities/fragments/session-info.ts
function session_info_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function session_info_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var SessionInfo = function SessionInfo() {
    "use strict";
};
session_info_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)(),
    session_info_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], SessionInfo.prototype, "createdAt", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    session_info_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], SessionInfo.prototype, "lastActivityAt", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    session_info_ts_metadata("design:type", String)
], SessionInfo.prototype, "ip", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    session_info_ts_metadata("design:type", String)
], SessionInfo.prototype, "ipLocation", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    session_info_ts_metadata("design:type", String)
], SessionInfo.prototype, "deviceName", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: AppType
    }),
    session_info_ts_metadata("design:type", typeof AppType === "undefined" ? Object : AppType)
], SessionInfo.prototype, "appType", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DevicePlatform
    }),
    session_info_ts_metadata("design:type", typeof DevicePlatform === "undefined" ? Object : DevicePlatform)
], SessionInfo.prototype, "devicePlatform", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DeviceType
    }),
    session_info_ts_metadata("design:type", typeof DeviceType === "undefined" ? Object : DeviceType)
], SessionInfo.prototype, "deviceType", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Index)(),
    (0,external_typeorm_.Column)(),
    session_info_ts_metadata("design:type", String)
], SessionInfo.prototype, "token", void 0);

;// ../../libs/database/src/lib/entities/shop/shop-login-session.entity.ts
function shop_login_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_login_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ShopLoginSessionEntity = function ShopLoginSessionEntity() {
    "use strict";
};
shop_login_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_login_session_entity_ts_metadata("design:type", Number)
], ShopLoginSessionEntity.prototype, "id", void 0);
shop_login_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return SessionInfo;
    }),
    shop_login_session_entity_ts_metadata("design:type", typeof SessionInfo === "undefined" ? Object : SessionInfo)
], ShopLoginSessionEntity.prototype, "sessionInfo", void 0);
shop_login_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.loginSessions;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    shop_login_session_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopLoginSessionEntity.prototype, "shop", void 0);
shop_login_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_login_session_entity_ts_metadata("design:type", Number)
], ShopLoginSessionEntity.prototype, "shopId", void 0);
ShopLoginSessionEntity = shop_login_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_login_session')
], ShopLoginSessionEntity);

;// ../../libs/database/src/lib/entities/shop/shop-note.entity.ts
function shop_note_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_note_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var ShopNoteEntity = function ShopNoteEntity() {
    "use strict";
};
shop_note_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_note_entity_ts_metadata("design:type", Number)
], ShopNoteEntity.prototype, "id", void 0);
shop_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return Note;
    }),
    shop_note_entity_ts_metadata("design:type", typeof Note === "undefined" ? Object : Note)
], ShopNoteEntity.prototype, "note", void 0);
shop_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.notes;
    }),
    shop_note_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopNoteEntity.prototype, "shop", void 0);
shop_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_note_entity_ts_metadata("design:type", Number)
], ShopNoteEntity.prototype, "shopId", void 0);
shop_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    shop_note_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ShopNoteEntity.prototype, "staff", void 0);
shop_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_note_entity_ts_metadata("design:type", Number)
], ShopNoteEntity.prototype, "staffId", void 0);
ShopNoteEntity = shop_note_entity_ts_decorate([
    (0,external_typeorm_.Entity)()
], ShopNoteEntity);

;// ../../libs/database/src/lib/entities/shop/shop-session.entity.ts
function shop_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ShopSessionEntity = function ShopSessionEntity() {
    "use strict";
};
shop_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_session_entity_ts_metadata("design:type", Number)
], ShopSessionEntity.prototype, "id", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopSessionEntity.prototype, "createdAt", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopSessionEntity.prototype, "lastActivityAt", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_session_entity_ts_metadata("design:type", String)
], ShopSessionEntity.prototype, "ip", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_session_entity_ts_metadata("design:type", String)
], ShopSessionEntity.prototype, "ipLocation", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_session_entity_ts_metadata("design:type", String)
], ShopSessionEntity.prototype, "deviceName", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: AppType
    }),
    shop_session_entity_ts_metadata("design:type", typeof AppType === "undefined" ? Object : AppType)
], ShopSessionEntity.prototype, "appType", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DevicePlatform
    }),
    shop_session_entity_ts_metadata("design:type", typeof DevicePlatform === "undefined" ? Object : DevicePlatform)
], ShopSessionEntity.prototype, "devicePlatform", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DeviceType
    }),
    shop_session_entity_ts_metadata("design:type", typeof DeviceType === "undefined" ? Object : DeviceType)
], ShopSessionEntity.prototype, "deviceType", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Index)(),
    (0,external_typeorm_.Column)(),
    shop_session_entity_ts_metadata("design:type", String)
], ShopSessionEntity.prototype, "token", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.sessions;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    shop_session_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopSessionEntity.prototype, "shop", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_session_entity_ts_metadata("design:type", Number)
], ShopSessionEntity.prototype, "shopId", void 0);
ShopSessionEntity = shop_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_session')
], ShopSessionEntity);

;// ../../libs/database/src/lib/entities/shop/shop-document-retention-policy.entity.ts
function shop_document_retention_policy_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_document_retention_policy_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ShopDocumentRetentionPolicyEntity = function ShopDocumentRetentionPolicyEntity() {
    "use strict";
};
shop_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_document_retention_policy_entity_ts_metadata("design:type", Number)
], ShopDocumentRetentionPolicyEntity.prototype, "id", void 0);
shop_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_document_retention_policy_entity_ts_metadata("design:type", Number)
], ShopDocumentRetentionPolicyEntity.prototype, "title", void 0);
shop_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    shop_document_retention_policy_entity_ts_metadata("design:type", Number)
], ShopDocumentRetentionPolicyEntity.prototype, "deleteAfterDays", void 0);
shop_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopDocumentEntity;
    }, function(shopDocument) {
        return shopDocument.retentionPolicies;
    }),
    shop_document_retention_policy_entity_ts_metadata("design:type", typeof ShopDocumentEntity === "undefined" ? Object : ShopDocumentEntity)
], ShopDocumentRetentionPolicyEntity.prototype, "shopDocument", void 0);
shop_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_document_retention_policy_entity_ts_metadata("design:type", Number)
], ShopDocumentRetentionPolicyEntity.prototype, "shopDocumentId", void 0);
ShopDocumentRetentionPolicyEntity = shop_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_document_retention_policy')
], ShopDocumentRetentionPolicyEntity);

;// ../../libs/database/src/lib/entities/shop/shop-document.entity.ts
function shop_document_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_document_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ShopDocumentEntity = function ShopDocumentEntity() {
    "use strict";
};
shop_document_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_document_entity_ts_metadata("design:type", Number)
], ShopDocumentEntity.prototype, "id", void 0);
shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_document_entity_ts_metadata("design:type", String)
], ShopDocumentEntity.prototype, "title", void 0);
shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_document_entity_ts_metadata("design:type", Boolean)
], ShopDocumentEntity.prototype, "isEnabled", void 0);
shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_document_entity_ts_metadata("design:type", Boolean)
], ShopDocumentEntity.prototype, "isRequired", void 0);
shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_document_entity_ts_metadata("design:type", Boolean)
], ShopDocumentEntity.prototype, "hasExpiryDate", void 0);
shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)('int'),
    shop_document_entity_ts_metadata("design:type", Number)
], ShopDocumentEntity.prototype, "notificationDaysBeforeExpiry", void 0);
shop_document_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopDocumentRetentionPolicyEntity;
    }, function(retentionPolicy) {
        return retentionPolicy.shopDocument;
    }),
    shop_document_entity_ts_metadata("design:type", Array)
], ShopDocumentEntity.prototype, "retentionPolicies", void 0);
shop_document_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopToShopDocumentEntity;
    }, function(shopToShopDocument) {
        return shopToShopDocument.shopDocument;
    }),
    shop_document_entity_ts_metadata("design:type", Array)
], ShopDocumentEntity.prototype, "shopToShopDocuments", void 0);
ShopDocumentEntity = shop_document_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_document')
], ShopDocumentEntity);

;// ../../libs/database/src/lib/entities/shop/shop-to-shop-document.entity.ts
function shop_to_shop_document_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_to_shop_document_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ShopToShopDocumentEntity = function ShopToShopDocumentEntity() {
    "use strict";
};
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_to_shop_document_entity_ts_metadata("design:type", Number)
], ShopToShopDocumentEntity.prototype, "id", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopDocumentEntity;
    }, function(shopDocument) {
        return shopDocument.shopToShopDocuments;
    }, {
        onDelete: 'CASCADE'
    }),
    shop_to_shop_document_entity_ts_metadata("design:type", typeof ShopDocumentEntity === "undefined" ? Object : ShopDocumentEntity)
], ShopToShopDocumentEntity.prototype, "shopDocument", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_to_shop_document_entity_ts_metadata("design:type", Number)
], ShopToShopDocumentEntity.prototype, "shopDocumentId", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.shopToShopDocuments;
    }, {
        onDelete: 'CASCADE'
    }),
    shop_to_shop_document_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopToShopDocumentEntity.prototype, "shop", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_to_shop_document_entity_ts_metadata("design:type", Number)
], ShopToShopDocumentEntity.prototype, "shopId", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return MediaEntity;
    }, {
        onDelete: 'CASCADE'
    }),
    shop_to_shop_document_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], ShopToShopDocumentEntity.prototype, "media", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_to_shop_document_entity_ts_metadata("design:type", Number)
], ShopToShopDocumentEntity.prototype, "mediaId", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopDocumentRetentionPolicyEntity;
    }, {
        onDelete: 'CASCADE'
    }),
    shop_to_shop_document_entity_ts_metadata("design:type", typeof ShopDocumentRetentionPolicyEntity === "undefined" ? Object : ShopDocumentRetentionPolicyEntity)
], ShopToShopDocumentEntity.prototype, "retentionPolicy", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_to_shop_document_entity_ts_metadata("design:type", Number)
], ShopToShopDocumentEntity.prototype, "retentionPolicyId", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_to_shop_document_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopToShopDocumentEntity.prototype, "expiresAt", void 0);
ShopToShopDocumentEntity = shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_to_shop_document')
], ShopToShopDocumentEntity);

;// ../../libs/database/src/lib/entities/shop/shop-wallet.entity.ts
function shop_wallet_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_wallet_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ShopWalletEntity = function ShopWalletEntity() {
    "use strict";
};
shop_wallet_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_wallet_entity_ts_metadata("design:type", Number)
], ShopWalletEntity.prototype, "id", void 0);
shop_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0.0
    }),
    shop_wallet_entity_ts_metadata("design:type", Number)
], ShopWalletEntity.prototype, "balance", void 0);
shop_wallet_entity_ts_decorate([
    (0,external_typeorm_.Index)(),
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    shop_wallet_entity_ts_metadata("design:type", String)
], ShopWalletEntity.prototype, "currency", void 0);
shop_wallet_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.wallet;
    }, {
        onDelete: 'CASCADE'
    }),
    shop_wallet_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopWalletEntity.prototype, "shop", void 0);
shop_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_wallet_entity_ts_metadata("design:type", Number)
], ShopWalletEntity.prototype, "shopId", void 0);
ShopWalletEntity = shop_wallet_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_wallet')
], ShopWalletEntity);

;// ../../libs/database/src/lib/entities/shop/shop-subcategory.entity.ts
function shop_subcategory_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_subcategory_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ShopSubcategoryEntity = function ShopSubcategoryEntity() {
    "use strict";
};
shop_subcategory_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_subcategory_entity_ts_metadata("design:type", Number)
], ShopSubcategoryEntity.prototype, "id", void 0);
shop_subcategory_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_subcategory_entity_ts_metadata("design:type", String)
], ShopSubcategoryEntity.prototype, "name", void 0);
shop_subcategory_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.subcategories;
    }),
    shop_subcategory_entity_ts_metadata("design:type", Array)
], ShopSubcategoryEntity.prototype, "shops", void 0);
ShopSubcategoryEntity = shop_subcategory_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_subcategory')
], ShopSubcategoryEntity);

;// ../../libs/database/src/lib/entities/shop/enums/shop-notification-type.enum.ts

var ShopNotificationType;
(function(ShopNotificationType) {
    ShopNotificationType["NewOrder"] = "new_order";
    ShopNotificationType["OrderStatus"] = "order_status";
    ShopNotificationType["Announcement"] = "announcement";
    ShopNotificationType["PayoutCalculation"] = "payout_calculation";
    ShopNotificationType["PayoutProcessing"] = "payout_processing";
    ShopNotificationType["PayoutCompleted"] = "payout_completed";
    ShopNotificationType["PayoutFailed"] = "payout_failed";
    ShopNotificationType["UpdateAvailable"] = "update_available";
    ShopNotificationType["MandatoryUpdate"] = "mandatory_update";
    ShopNotificationType["Maintenance"] = "maintenance";
    ShopNotificationType["PaymentReceived"] = "payment_received";
    ShopNotificationType["RefundInitiated"] = "refund_initiated";
    ShopNotificationType["RefundCompleted"] = "refund_completed";
    ShopNotificationType["StockRunningLow"] = "stock_running_low";
    ShopNotificationType["ReturnRequested"] = "return_requested";
    ShopNotificationType["ShippingDelayed"] = "shipping_delayed";
    ShopNotificationType["SupportRequestCreated"] = "support_request_created";
    ShopNotificationType["SupportRequestReply"] = "support_request_reply";
    ShopNotificationType["SupportRequestClose"] = "support_request_close";
    ShopNotificationType["ShopFeedback"] = "shop_feedback";
})(ShopNotificationType || (ShopNotificationType = {}));
(0,graphql_.registerEnumType)(ShopNotificationType, {
    name: 'ShopNotificationType',
    description: 'The type of shop notification'
});

;// ../../libs/database/src/lib/entities/shop/shop-notification.entity.ts
function shop_notification_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_notification_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}








var ShopNotificationEntity = function ShopNotificationEntity() {
    "use strict";
};
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_notification_entity_ts_metadata("design:type", Number)
], ShopNotificationEntity.prototype, "id", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopNotificationType
    }),
    shop_notification_entity_ts_metadata("design:type", typeof ShopNotificationType === "undefined" ? Object : ShopNotificationType)
], ShopNotificationEntity.prototype, "type", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopNotificationEntity.prototype, "readAt", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopNotificationEntity.prototype, "createdAt", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", String)
], ShopNotificationEntity.prototype, "title", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", String)
], ShopNotificationEntity.prototype, "message", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.notifications;
    }),
    shop_notification_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopNotificationEntity.prototype, "shop", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_notification_entity_ts_metadata("design:type", Number)
], ShopNotificationEntity.prototype, "shopId", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return AnnouncementEntity;
    }),
    shop_notification_entity_ts_metadata("design:type", typeof AnnouncementEntity === "undefined" ? Object : AnnouncementEntity)
], ShopNotificationEntity.prototype, "announcement", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", Number)
], ShopNotificationEntity.prototype, "announcementId", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", Number)
], ShopNotificationEntity.prototype, "shopOrderCartId", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }),
    shop_notification_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ShopNotificationEntity.prototype, "shopOrderCart", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", Number)
], ShopNotificationEntity.prototype, "shopSupportRequestId", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopSupportRequestEntity;
    }),
    shop_notification_entity_ts_metadata("design:type", typeof ShopSupportRequestEntity === "undefined" ? Object : ShopSupportRequestEntity)
], ShopNotificationEntity.prototype, "shopSupportRequest", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", Number)
], ShopNotificationEntity.prototype, "payoutShopTransactionId", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopTransactionEntity;
    }),
    shop_notification_entity_ts_metadata("design:type", typeof ShopTransactionEntity === "undefined" ? Object : ShopTransactionEntity)
], ShopNotificationEntity.prototype, "payoutShopTransaction", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", Number)
], ShopNotificationEntity.prototype, "shopFeedbackId", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopFeedbackEntity;
    }),
    shop_notification_entity_ts_metadata("design:type", typeof ShopFeedbackEntity === "undefined" ? Object : ShopFeedbackEntity)
], ShopNotificationEntity.prototype, "shopFeedback", void 0);
ShopNotificationEntity = shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_notification')
], ShopNotificationEntity);

;// ../../libs/database/src/lib/entities/shop/shop.entity.ts
function shop_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



























var ShopEntity = function ShopEntity() {
    "use strict";
};
shop_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_entity_ts_metadata("design:type", Number)
], ShopEntity.prototype, "id", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_entity_ts_metadata("design:type", String)
], ShopEntity.prototype, "name", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return PhoneNumber;
    }),
    shop_entity_ts_metadata("design:type", typeof PhoneNumber === "undefined" ? Object : PhoneNumber)
], ShopEntity.prototype, "mobileNumber", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", String)
], ShopEntity.prototype, "email", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", String)
], ShopEntity.prototype, "description", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_entity_ts_metadata("design:type", String)
], ShopEntity.prototype, "address", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'enum',
        enum: ShopStatus,
        default: ShopStatus.PendingSubmission
    }),
    shop_entity_ts_metadata("design:type", typeof ShopStatus === "undefined" ? Object : ShopStatus)
], ShopEntity.prototype, "status", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return PersonalInfo;
    }),
    shop_entity_ts_metadata("design:type", typeof PersonalInfo === "undefined" ? Object : PersonalInfo)
], ShopEntity.prototype, "ownerInformation", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopEntity.prototype, "onlineUntil", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return RatingAggregate;
    }),
    shop_entity_ts_metadata("design:type", typeof RatingAggregate === "undefined" ? Object : RatingAggregate)
], ShopEntity.prototype, "ratingAggregate", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", String)
], ShopEntity.prototype, "password", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)('text', {
        transformer: new WeeklyScheduleTransformer(),
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "weeklySchedule", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    shop_entity_ts_metadata("design:type", Number)
], ShopEntity.prototype, "minimumOrderAmount", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "isExpressDeliveryAvailable", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        nullable: false,
        default: 0
    }),
    shop_entity_ts_metadata("design:type", Number)
], ShopEntity.prototype, "expressDeliveryShopCommission", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "isOnlinePaymentAvailable", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "isCashOnDeliveryAvailable", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "isShopDeliveryAvailable", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopEntity.prototype, "lastActivityAt", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'enum',
        enum: OrderQueueLevel,
        default: OrderQueueLevel.LOW
    }),
    shop_entity_ts_metadata("design:type", typeof OrderQueueLevel === "undefined" ? Object : OrderQueueLevel)
], ShopEntity.prototype, "orderQueueLevel", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)('point', {
        transformer: new PointTransformer()
    }),
    shop_entity_ts_metadata("design:type", typeof Point === "undefined" ? Object : Point)
], ShopEntity.prototype, "location", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_entity_ts_metadata("design:type", String)
], ShopEntity.prototype, "currency", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    shop_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], ShopEntity.prototype, "image", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", Number)
], ShopEntity.prototype, "imageId", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopEntity.prototype, "createdAt", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.UpdateDateColumn)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopEntity.prototype, "updatedAt", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopEntity.prototype, "deletedAt", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return PayoutAccountEntity;
    }, function(payoutAccount) {
        return payoutAccount.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "payoutAccounts", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return PayoutAccountEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    shop_entity_ts_metadata("design:type", typeof PayoutAccountEntity === "undefined" ? Object : PayoutAccountEntity)
], ShopEntity.prototype, "defaultPayoutAccount", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", Number)
], ShopEntity.prototype, "defaultPayoutAccountId", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopCategoryEntity;
    }, function(category) {
        return category.shops;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "categories", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopSubcategoryEntity;
    }, function(subcategory) {
        return subcategory.shops;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "subcategories", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopDeliveryZoneEntity;
    }, function(region) {
        return region.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "deliveryZones", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopFeedbackEntity;
    }, function(feedback) {
        return feedback.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "feedbacks", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopProductPresetEntity;
    }, function(preset) {
        return preset.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "productPresets", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderCartEntity;
    }, function(cart) {
        return cart.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "carts", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopSessionEntity;
    }, function(session) {
        return session.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "sessions", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopWalletEntity;
    }, function(wallet) {
        return wallet.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "wallet", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopNoteEntity;
    }, function(note) {
        return note.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "notes", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopLoginSessionEntity;
    }, function(loginSession) {
        return loginSession.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "loginSessions", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProductEntity;
    }, function(product) {
        return product.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "products", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProductCategoryEntity;
    }, function(productCategory) {
        return productCategory.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "productCategories", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SavedPaymentMethodEntity;
    }, function(savedPaymentMethod) {
        return savedPaymentMethod.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "savedPaymentMethods", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return SavedPaymentMethodEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    shop_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], ShopEntity.prototype, "defaultSavedPaymentMethod", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", Number)
], ShopEntity.prototype, "defaultSavedPaymentMethodId", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopToShopDocumentEntity;
    }, function(shopToShopDocument) {
        return shopToShopDocument.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "shopToShopDocuments", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopSupportRequestEntity;
    }, function(supportRequest) {
        return supportRequest.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "supportRequests", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopNotificationEntity;
    }, function(notification) {
        return notification.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "notifications", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "pushNotificationNewOrder", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "pushNotificationOrderStatus", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "pushNotificationNewFeedback", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "pushNotificationSupportRequest", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "pushNotificationAnnouncements", void 0);
ShopEntity = shop_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop')
], ShopEntity);

;// ../../libs/database/src/lib/entities/payout-account.entity.ts
function payout_account_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function payout_account_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}










var PayoutAccountEntity = function PayoutAccountEntity() {
    "use strict";
};
payout_account_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    payout_account_entity_ts_metadata("design:type", Number)
], PayoutAccountEntity.prototype, "id", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "name", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.payoutAccounts;
    }),
    payout_account_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], PayoutAccountEntity.prototype, "driver", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", Number)
], PayoutAccountEntity.prototype, "driverId", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.payoutAccounts;
    }),
    payout_account_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], PayoutAccountEntity.prototype, "shop", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", Number)
], PayoutAccountEntity.prototype, "shopId", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.payoutAccounts;
    }),
    payout_account_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], PayoutAccountEntity.prototype, "customer", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", Number)
], PayoutAccountEntity.prototype, "customerId", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.payoutAccounts;
    }),
    payout_account_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], PayoutAccountEntity.prototype, "paymentGateway", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", Number)
], PayoutAccountEntity.prototype, "paymentGatewayId", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: SavedPaymentMethodType
    }),
    payout_account_entity_ts_metadata("design:type", typeof SavedPaymentMethodType === "undefined" ? Object : SavedPaymentMethodType)
], PayoutAccountEntity.prototype, "type", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "last4", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "currency", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.payoutAccounts;
    }),
    payout_account_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], PayoutAccountEntity.prototype, "payoutMethod", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payout_account_entity_ts_metadata("design:type", Number)
], PayoutAccountEntity.prototype, "payoutMethodId", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "token", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountNumber", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "routingNumber", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountHolderName", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "bankName", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "branchName", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountHolderAddress", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountHolderCity", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountHolderState", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountHolderZip", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountHolderCountry", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountHolderPhone", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], PayoutAccountEntity.prototype, "accountHolderDateOfBirth", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    payout_account_entity_ts_metadata("design:type", Boolean)
], PayoutAccountEntity.prototype, "isVerified", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    payout_account_entity_ts_metadata("design:type", Boolean)
], PayoutAccountEntity.prototype, "isDefault", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], PayoutAccountEntity.prototype, "createdAt", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.UpdateDateColumn)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], PayoutAccountEntity.prototype, "updatedAt", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    payout_account_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], PayoutAccountEntity.prototype, "deletedAt", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(driverTransaction) {
        return driverTransaction.payoutAccount;
    }),
    payout_account_entity_ts_metadata("design:type", Array)
], PayoutAccountEntity.prototype, "driverTransactions", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingTransactionEntity;
    }, function(parkingTransaction) {
        return parkingTransaction.payoutAccount;
    }),
    payout_account_entity_ts_metadata("design:type", Array)
], PayoutAccountEntity.prototype, "parkingTransactions", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopTransactionEntity;
    }, function(shopTransaction) {
        return shopTransaction.payoutAccount;
    }),
    payout_account_entity_ts_metadata("design:type", Array)
], PayoutAccountEntity.prototype, "shopTransactions", void 0);
PayoutAccountEntity = payout_account_entity_ts_decorate([
    (0,external_typeorm_.Entity)('payout_account')
], PayoutAccountEntity);

;// ../../libs/database/src/lib/entities/taxi/taxi-payout-session-payout-method-detail.entity.ts
function taxi_payout_session_payout_method_detail_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function taxi_payout_session_payout_method_detail_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var TaxiPayoutSessionPayoutMethodDetailEntity = function TaxiPayoutSessionPayoutMethodDetailEntity() {
    "use strict";
};
taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    taxi_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], TaxiPayoutSessionPayoutMethodDetailEntity.prototype, "id", void 0);
taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiPayoutSessionEntity;
    }, function(payoutSession) {
        return payoutSession.payoutMethodDetails;
    }),
    taxi_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof TaxiPayoutSessionEntity === "undefined" ? Object : TaxiPayoutSessionEntity)
], TaxiPayoutSessionPayoutMethodDetailEntity.prototype, "payoutSession", void 0);
taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], TaxiPayoutSessionPayoutMethodDetailEntity.prototype, "payoutSessionId", void 0);
taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.sessions;
    }),
    taxi_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], TaxiPayoutSessionPayoutMethodDetailEntity.prototype, "payoutMethod", void 0);
taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], TaxiPayoutSessionPayoutMethodDetailEntity.prototype, "payoutMethodId", void 0);
taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PayoutSessionStatus,
        default: PayoutSessionStatus.PENDING
    }),
    taxi_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof PayoutSessionStatus === "undefined" ? Object : PayoutSessionStatus)
], TaxiPayoutSessionPayoutMethodDetailEntity.prototype, "status", void 0);
taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(driverTransaction) {
        return driverTransaction.payoutSessionMethod;
    }),
    taxi_payout_session_payout_method_detail_entity_ts_metadata("design:type", Array)
], TaxiPayoutSessionPayoutMethodDetailEntity.prototype, "driverTransactions", void 0);
TaxiPayoutSessionPayoutMethodDetailEntity = taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Entity)('payout_session_payout_method_detail')
], TaxiPayoutSessionPayoutMethodDetailEntity);

;// ../../libs/database/src/lib/entities/taxi/taxi-payout-session.entity.ts
function taxi_payout_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function taxi_payout_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






var TaxiPayoutSessionEntity = function TaxiPayoutSessionEntity() {
    "use strict";
};
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    taxi_payout_session_entity_ts_metadata("design:type", Number)
], TaxiPayoutSessionEntity.prototype, "id", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    taxi_payout_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiPayoutSessionEntity.prototype, "createdAt", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_payout_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiPayoutSessionEntity.prototype, "processedAt", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_payout_session_entity_ts_metadata("design:type", String)
], TaxiPayoutSessionEntity.prototype, "description", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: PayoutSessionStatus.PENDING,
        type: 'enum',
        enum: PayoutSessionStatus
    }),
    taxi_payout_session_entity_ts_metadata("design:type", typeof PayoutSessionStatus === "undefined" ? Object : PayoutSessionStatus)
], TaxiPayoutSessionEntity.prototype, "status", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.payoutSessions;
    }, {
        onDelete: 'CASCADE'
    }),
    (0,external_typeorm_.JoinTable)(),
    taxi_payout_session_entity_ts_metadata("design:type", Array)
], TaxiPayoutSessionEntity.prototype, "payoutMethods", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(driverTransaction) {
        return driverTransaction.payoutSession;
    }),
    taxi_payout_session_entity_ts_metadata("design:type", Array)
], TaxiPayoutSessionEntity.prototype, "driverTransactions", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    taxi_payout_session_entity_ts_metadata("design:type", Number)
], TaxiPayoutSessionEntity.prototype, "totalAmount", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_payout_session_entity_ts_metadata("design:type", String)
], TaxiPayoutSessionEntity.prototype, "currency", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.taxiPayoutSessionsCreated;
    }),
    taxi_payout_session_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], TaxiPayoutSessionEntity.prototype, "createdByOperator", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_payout_session_entity_ts_metadata("design:type", Number)
], TaxiPayoutSessionEntity.prototype, "createdByOperatorId", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiPayoutSessionPayoutMethodDetailEntity;
    }, function(payoutMethodDetail) {
        return payoutMethodDetail.payoutSession;
    }),
    taxi_payout_session_entity_ts_metadata("design:type", Array)
], TaxiPayoutSessionEntity.prototype, "payoutMethodDetails", void 0);
TaxiPayoutSessionEntity = taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('payout_session')
], TaxiPayoutSessionEntity);

;// ../../libs/database/src/lib/entities/payout-method.entity.ts
function payout_method_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function payout_method_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}









var PayoutMethodEntity = function PayoutMethodEntity() {
    "use strict";
};
payout_method_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    payout_method_entity_ts_metadata("design:type", Number)
], PayoutMethodEntity.prototype, "id", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    payout_method_entity_ts_metadata("design:type", Boolean)
], PayoutMethodEntity.prototype, "enabled", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payout_method_entity_ts_metadata("design:type", String)
], PayoutMethodEntity.prototype, "name", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payout_method_entity_ts_metadata("design:type", String)
], PayoutMethodEntity.prototype, "currency", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_method_entity_ts_metadata("design:type", String)
], PayoutMethodEntity.prototype, "description", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PayoutMethodType
    }),
    payout_method_entity_ts_metadata("design:type", typeof PayoutMethodType === "undefined" ? Object : PayoutMethodType)
], PayoutMethodEntity.prototype, "type", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'text'
    }),
    payout_method_entity_ts_metadata("design:type", String)
], PayoutMethodEntity.prototype, "publicKey", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'text'
    }),
    payout_method_entity_ts_metadata("design:type", String)
], PayoutMethodEntity.prototype, "privateKey", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'text'
    }),
    payout_method_entity_ts_metadata("design:type", String)
], PayoutMethodEntity.prototype, "saltKey", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'text'
    }),
    payout_method_entity_ts_metadata("design:type", String)
], PayoutMethodEntity.prototype, "merchantId", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    payout_method_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], PayoutMethodEntity.prototype, "deletedAt", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, function(media) {
        return media.payoutMethod;
    }, {
        nullable: true
    }),
    (0,external_typeorm_.JoinColumn)(),
    payout_method_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], PayoutMethodEntity.prototype, "media", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_method_entity_ts_metadata("design:type", Number)
], PayoutMethodEntity.prototype, "mediaId", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return PayoutAccountEntity;
    }, function(payoutAccount) {
        return payoutAccount.payoutMethod;
    }),
    payout_method_entity_ts_metadata("design:type", Array)
], PayoutMethodEntity.prototype, "payoutAccounts", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return TaxiPayoutSessionEntity;
    }, function(payoutSession) {
        return payoutSession.payoutMethods;
    }),
    payout_method_entity_ts_metadata("design:type", Array)
], PayoutMethodEntity.prototype, "payoutSessions", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(driverTransaction) {
        return driverTransaction.payoutMethod;
    }),
    payout_method_entity_ts_metadata("design:type", Array)
], PayoutMethodEntity.prototype, "driverTransactions", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingTransactionEntity;
    }, function(parkingTransaction) {
        return parkingTransaction.payoutMethod;
    }),
    payout_method_entity_ts_metadata("design:type", Array)
], PayoutMethodEntity.prototype, "parkingTransactions", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopTransactionEntity;
    }, function(shopTransaction) {
        return shopTransaction.payoutMethod;
    }),
    payout_method_entity_ts_metadata("design:type", Array)
], PayoutMethodEntity.prototype, "shopTransactions", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiPayoutSessionPayoutMethodDetailEntity;
    }, function(payoutSessionPayoutMethodDetail) {
        return payoutSessionPayoutMethodDetail.payoutMethod;
    }),
    payout_method_entity_ts_metadata("design:type", typeof TaxiPayoutSessionPayoutMethodDetailEntity === "undefined" ? Object : TaxiPayoutSessionPayoutMethodDetailEntity)
], PayoutMethodEntity.prototype, "sessions", void 0);
PayoutMethodEntity = payout_method_entity_ts_decorate([
    (0,external_typeorm_.Entity)('payout_method')
], PayoutMethodEntity);

;// ../../libs/database/src/lib/entities/parking/parking-payout-session.entity.ts
function parking_payout_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_payout_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






var ParkingPayoutSessionEntity = function ParkingPayoutSessionEntity() {
    "use strict";
};
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_payout_session_entity_ts_metadata("design:type", Number)
], ParkingPayoutSessionEntity.prototype, "id", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    parking_payout_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingPayoutSessionEntity.prototype, "createdAt", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_payout_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingPayoutSessionEntity.prototype, "processedAt", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_payout_session_entity_ts_metadata("design:type", String)
], ParkingPayoutSessionEntity.prototype, "description", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: PayoutSessionStatus.PENDING,
        type: 'enum',
        enum: PayoutSessionStatus
    }),
    parking_payout_session_entity_ts_metadata("design:type", typeof PayoutSessionStatus === "undefined" ? Object : PayoutSessionStatus)
], ParkingPayoutSessionEntity.prototype, "status", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.payoutSessions;
    }, {
        onDelete: 'CASCADE'
    }),
    (0,external_typeorm_.JoinTable)(),
    parking_payout_session_entity_ts_metadata("design:type", Array)
], ParkingPayoutSessionEntity.prototype, "payoutMethods", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingTransactionEntity;
    }, function(parkingTransaction) {
        return parkingTransaction.payoutSession;
    }),
    parking_payout_session_entity_ts_metadata("design:type", Array)
], ParkingPayoutSessionEntity.prototype, "parkingTransactions", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    parking_payout_session_entity_ts_metadata("design:type", Number)
], ParkingPayoutSessionEntity.prototype, "totalAmount", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_payout_session_entity_ts_metadata("design:type", String)
], ParkingPayoutSessionEntity.prototype, "currency", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    parking_payout_session_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ParkingPayoutSessionEntity.prototype, "createdByOperator", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_payout_session_entity_ts_metadata("design:type", Number)
], ParkingPayoutSessionEntity.prototype, "createdByOperatorId", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingPayoutSessionPayoutMethodDetailEntity;
    }, function(payoutMethodDetail) {
        return payoutMethodDetail.payoutSession;
    }),
    parking_payout_session_entity_ts_metadata("design:type", Array)
], ParkingPayoutSessionEntity.prototype, "payoutMethodDetails", void 0);
ParkingPayoutSessionEntity = parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_payout_session')
], ParkingPayoutSessionEntity);

;// ../../libs/database/src/lib/entities/parking/parking-payout-session-payout-method-detail.entity.ts
function parking_payout_session_payout_method_detail_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_payout_session_payout_method_detail_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ParkingPayoutSessionPayoutMethodDetailEntity = function ParkingPayoutSessionPayoutMethodDetailEntity() {
    "use strict";
};
parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], ParkingPayoutSessionPayoutMethodDetailEntity.prototype, "id", void 0);
parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkingPayoutSessionEntity;
    }, function(payoutSession) {
        return payoutSession.payoutMethodDetails;
    }),
    parking_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof ParkingPayoutSessionEntity === "undefined" ? Object : ParkingPayoutSessionEntity)
], ParkingPayoutSessionPayoutMethodDetailEntity.prototype, "payoutSession", void 0);
parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], ParkingPayoutSessionPayoutMethodDetailEntity.prototype, "payoutSessionId", void 0);
parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.sessions;
    }),
    parking_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], ParkingPayoutSessionPayoutMethodDetailEntity.prototype, "payoutMethod", void 0);
parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], ParkingPayoutSessionPayoutMethodDetailEntity.prototype, "payoutMethodId", void 0);
parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PayoutSessionStatus,
        default: PayoutSessionStatus.PENDING
    }),
    parking_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof PayoutSessionStatus === "undefined" ? Object : PayoutSessionStatus)
], ParkingPayoutSessionPayoutMethodDetailEntity.prototype, "status", void 0);
parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingTransactionEntity;
    }, function(parkingTransaction) {
        return parkingTransaction.payoutSessionMethod;
    }),
    parking_payout_session_payout_method_detail_entity_ts_metadata("design:type", Array)
], ParkingPayoutSessionPayoutMethodDetailEntity.prototype, "parkingTransactions", void 0);
ParkingPayoutSessionPayoutMethodDetailEntity = parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_payout_session_payout_method_detail')
], ParkingPayoutSessionPayoutMethodDetailEntity);

;// ../../libs/database/src/lib/entities/parking/parking-transaction.entity.ts
function parking_transaction_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_transaction_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}















var ParkingTransactionEntity = function ParkingTransactionEntity() {
    "use strict";
};
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "id", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingTransactionEntity.prototype, "createdAt", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingTransactionEntity.prototype, "transactionDate", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionStatus,
        default: TransactionStatus.Processing
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof TransactionStatus === "undefined" ? Object : TransactionStatus)
], ParkingTransactionEntity.prototype, "status", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionType
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof TransactionType === "undefined" ? Object : TransactionType)
], ParkingTransactionEntity.prototype, "type", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkingTransactionDebitType,
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof ParkingTransactionDebitType === "undefined" ? Object : ParkingTransactionDebitType)
], ParkingTransactionEntity.prototype, "debitType", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkingTransactionCreditType,
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof ParkingTransactionCreditType === "undefined" ? Object : ParkingTransactionCreditType)
], ParkingTransactionEntity.prototype, "creditType", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: '3'
    }),
    (0,external_typeorm_.Index)(),
    parking_transaction_entity_ts_metadata("design:type", String)
], ParkingTransactionEntity.prototype, "currency", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "amount", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", String)
], ParkingTransactionEntity.prototype, "documentNumber", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", String)
], ParkingTransactionEntity.prototype, "description", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkingTransactionEntity.prototype, "customer", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "customerId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SavedPaymentMethodEntity;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], ParkingTransactionEntity.prototype, "paymentMethod", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "paymentMethodId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], ParkingTransactionEntity.prototype, "paymentGateway", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "paymentGatewayId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ParkingTransactionEntity.prototype, "staff", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "staffId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.parkingTransactions;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ParkingTransactionEntity.prototype, "parkOrder", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "parkOrderId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkingPayoutSessionEntity;
    }, function(session) {
        return session.parkingTransactions;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof ParkingPayoutSessionEntity === "undefined" ? Object : ParkingPayoutSessionEntity)
], ParkingTransactionEntity.prototype, "payoutSession", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "payoutSessionId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutAccountEntity;
    }, function(payoutAccount) {
        return payoutAccount.parkingTransactions;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof PayoutAccountEntity === "undefined" ? Object : PayoutAccountEntity)
], ParkingTransactionEntity.prototype, "payoutAccount", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "payoutAccountId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.parkingTransactions;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], ParkingTransactionEntity.prototype, "payoutMethod", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "payoutMethodId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkingPayoutSessionPayoutMethodDetailEntity;
    }, function(payoutSessionMethod) {
        return payoutSessionMethod.parkingTransactions;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof ParkingPayoutSessionPayoutMethodDetailEntity === "undefined" ? Object : ParkingPayoutSessionPayoutMethodDetailEntity)
], ParkingTransactionEntity.prototype, "payoutSessionMethod", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "payoutSessionMethodId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkSpotEntity;
    }, function(parkSpot) {
        return parkSpot.transactions;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof ParkSpotEntity === "undefined" ? Object : ParkSpotEntity)
], ParkingTransactionEntity.prototype, "parkSpot", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "parkSpotId", void 0);
ParkingTransactionEntity = parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_transaction')
], ParkingTransactionEntity);

;// ../../libs/database/src/lib/entities/parking/park-spot.entity.ts
function park_spot_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function park_spot_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}















var ParkSpotEntity = function ParkSpotEntity() {
    "use strict";
};
park_spot_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "id", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkSpotEntity.prototype, "createdAt", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkSpotStatus,
        default: ParkSpotStatus.Pending,
        nullable: false
    }),
    park_spot_entity_ts_metadata("design:type", typeof ParkSpotStatus === "undefined" ? Object : ParkSpotStatus)
], ParkSpotEntity.prototype, "status", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkSpotType,
        default: ParkSpotType.PERSONAL,
        nullable: false
    }),
    park_spot_entity_ts_metadata("design:type", typeof ParkSpotType === "undefined" ? Object : ParkSpotType)
], ParkSpotEntity.prototype, "type", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.parkSpots;
    }),
    park_spot_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkSpotEntity.prototype, "owner", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "ownerId", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "phoneNumber", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "email", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "name", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, {
        nullable: true
    }),
    (0,external_typeorm_.JoinColumn)(),
    park_spot_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], ParkSpotEntity.prototype, "mainImage", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "mainImageId", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkSpotEntity.prototype, "lastActivityAt", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('point', {
        transformer: new PointTransformer()
    }),
    park_spot_entity_ts_metadata("design:type", typeof Point === "undefined" ? Object : Point)
], ParkSpotEntity.prototype, "location", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "address", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return RatingAggregate;
    }),
    park_spot_entity_ts_metadata("design:type", typeof RatingAggregate === "undefined" ? Object : RatingAggregate)
], ParkSpotEntity.prototype, "ratingAggregate", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('text', {
        transformer: new WeeklyScheduleTransformer(),
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", Array)
], ParkSpotEntity.prototype, "weeklySchedule", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "openHour", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "closeHour", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    park_spot_entity_ts_metadata("design:type", Boolean)
], ParkSpotEntity.prototype, "acceptNewRequest", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    park_spot_entity_ts_metadata("design:type", Boolean)
], ParkSpotEntity.prototype, "acceptExtendRequest", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        nullable: true,
        enum: ParkSpotCarSize
    }),
    park_spot_entity_ts_metadata("design:type", typeof ParkSpotCarSize === "undefined" ? Object : ParkSpotCarSize)
], ParkSpotEntity.prototype, "carSize", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "carPrice", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "carSpaces", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "bikePrice", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "bikeSpaces", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "truckPrice", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "truckSpaces", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 'USD'
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "currency", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "description", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "operatorName", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "operatorPhoneCountryCode", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "operatorPhoneNumber", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return MediaEntity;
    }, function(media) {
        return media.parkSpot;
    }),
    park_spot_entity_ts_metadata("design:type", Array)
], ParkSpotEntity.prototype, "images", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: ParkSpotFacility,
        default: []
    }),
    park_spot_entity_ts_metadata("design:type", Array)
], ParkSpotEntity.prototype, "facilities", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.parkSpot;
    }),
    park_spot_entity_ts_metadata("design:type", Array)
], ParkSpotEntity.prototype, "parkOrders", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingFeedbackEntity;
    }, function(review) {
        return review.parkSpot;
    }),
    park_spot_entity_ts_metadata("design:type", Array)
], ParkSpotEntity.prototype, "feedbacks", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkSpotNoteEntity;
    }, function(note) {
        return note.parkSpot;
    }),
    park_spot_entity_ts_metadata("design:type", typeof ParkSpotNoteEntity === "undefined" ? Object : ParkSpotNoteEntity)
], ParkSpotEntity.prototype, "notes", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingTransactionEntity;
    }, function(transaction) {
        return transaction.parkSpot;
    }),
    park_spot_entity_ts_metadata("design:type", Array)
], ParkSpotEntity.prototype, "transactions", void 0);
ParkSpotEntity = park_spot_entity_ts_decorate([
    (0,external_typeorm_.Entity)('park_spot')
], ParkSpotEntity);

;// ../../libs/database/src/lib/entities/parking/enums/park-order-status.enum.ts

var ParkOrderStatus;
(function(ParkOrderStatus) {
    ParkOrderStatus["PENDING"] = "pending";
    ParkOrderStatus["PAID"] = "paid";
    ParkOrderStatus["CANCELLED"] = "cancelled";
    ParkOrderStatus["ACCEPTED"] = "accepted";
    ParkOrderStatus["REJECTED"] = "rejected";
    ParkOrderStatus["COMPLETED"] = "completed";
})(ParkOrderStatus || (ParkOrderStatus = {}));
(0,graphql_.registerEnumType)(ParkOrderStatus, {
    name: 'ParkOrderStatus',
    description: 'park order status, Pending is the default status prior to payment'
});

;// ../../libs/database/src/lib/entities/parking/enums/park-spot-vehicle-type.enum.ts

var ParkSpotVehicleType;
(function(ParkSpotVehicleType) {
    ParkSpotVehicleType["Car"] = "car";
    ParkSpotVehicleType["Bike"] = "bike";
    ParkSpotVehicleType["Truck"] = "truck";
})(ParkSpotVehicleType || (ParkSpotVehicleType = {}));
(0,graphql_.registerEnumType)(ParkSpotVehicleType, {
    name: 'ParkSpotVehicleType',
    description: 'The type of ride that can be parked in a park spot'
});

;// ../../libs/database/src/lib/entities/parking/enums/parking-customer-notification-type.enum.ts

var ParkingCustomerNotificationType;
(function(ParkingCustomerNotificationType) {
    ParkingCustomerNotificationType["booked"] = "booked";
    ParkingCustomerNotificationType["cancelled"] = "cancelled";
    ParkingCustomerNotificationType["expiring"] = "expiring";
    ParkingCustomerNotificationType["rate"] = "rate";
})(ParkingCustomerNotificationType || (ParkingCustomerNotificationType = {}));
(0,graphql_.registerEnumType)(ParkingCustomerNotificationType, {
    name: 'ParkingCustomerNotificationType',
    description: 'The type of notification that a customer can receive'
});

;// ../../libs/database/src/lib/entities/parking/parking-customer-notification.entity.ts
function parking_customer_notification_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_customer_notification_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var ParkingCustomerNotificationEntity = function ParkingCustomerNotificationEntity() {
    "use strict";
};
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_customer_notification_entity_ts_metadata("design:type", Number)
], ParkingCustomerNotificationEntity.prototype, "id", void 0);
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkingCustomerNotificationType
    }),
    parking_customer_notification_entity_ts_metadata("design:type", typeof ParkingCustomerNotificationType === "undefined" ? Object : ParkingCustomerNotificationType)
], ParkingCustomerNotificationEntity.prototype, "type", void 0);
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    parking_customer_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingCustomerNotificationEntity.prototype, "createdAt", void 0);
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_customer_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingCustomerNotificationEntity.prototype, "expireAt", void 0);
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.customerNotifications;
    }),
    parking_customer_notification_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ParkingCustomerNotificationEntity.prototype, "parkOrder", void 0);
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_customer_notification_entity_ts_metadata("design:type", Number)
], ParkingCustomerNotificationEntity.prototype, "parkOrderId", void 0);
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }),
    parking_customer_notification_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkingCustomerNotificationEntity.prototype, "customer", void 0);
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_customer_notification_entity_ts_metadata("design:type", Number)
], ParkingCustomerNotificationEntity.prototype, "customerId", void 0);
ParkingCustomerNotificationEntity = parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_customer_notification')
], ParkingCustomerNotificationEntity);

;// ../../libs/database/src/lib/entities/parking/enums/parking-provider-notification-type.enum.ts

var ParkingProviderNotificationType;
(function(ParkingProviderNotificationType) {
    ParkingProviderNotificationType["booked"] = "booked";
    ParkingProviderNotificationType["cancelled"] = "cancelled";
    ParkingProviderNotificationType["expiring"] = "expiring";
})(ParkingProviderNotificationType || (ParkingProviderNotificationType = {}));
(0,graphql_.registerEnumType)(ParkingProviderNotificationType, {
    name: 'ParkingProviderNotificationType',
    description: 'The type of notification that a provider can receive'
});

;// ../../libs/database/src/lib/entities/parking/parking-provider-notification.entity.ts
function parking_provider_notification_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_provider_notification_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ParkingProviderNotificationEntity = function ParkingProviderNotificationEntity() {
    "use strict";
};
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_provider_notification_entity_ts_metadata("design:type", Number)
], ParkingProviderNotificationEntity.prototype, "id", void 0);
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkingCustomerNotificationType
    }),
    parking_provider_notification_entity_ts_metadata("design:type", typeof ParkingProviderNotificationType === "undefined" ? Object : ParkingProviderNotificationType)
], ParkingProviderNotificationEntity.prototype, "type", void 0);
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    parking_provider_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingProviderNotificationEntity.prototype, "createdAt", void 0);
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_provider_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingProviderNotificationEntity.prototype, "expireAt", void 0);
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.providerNotifications;
    }),
    parking_provider_notification_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ParkingProviderNotificationEntity.prototype, "parkOrder", void 0);
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_provider_notification_entity_ts_metadata("design:type", Number)
], ParkingProviderNotificationEntity.prototype, "parkOrderId", void 0);
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }),
    parking_provider_notification_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkingProviderNotificationEntity.prototype, "provider", void 0);
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_provider_notification_entity_ts_metadata("design:type", Number)
], ParkingProviderNotificationEntity.prototype, "providerId", void 0);
ParkingProviderNotificationEntity = parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_provider_notification')
], ParkingProviderNotificationEntity);

;// ../../libs/database/src/lib/entities/parking/park-order-note.entity.ts
function park_order_note_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function park_order_note_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ParkOrderNoteEntity = function ParkOrderNoteEntity() {
    "use strict";
};
park_order_note_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    park_order_note_entity_ts_metadata("design:type", Number)
], ParkOrderNoteEntity.prototype, "id", void 0);
park_order_note_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    park_order_note_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderNoteEntity.prototype, "createdAt", void 0);
park_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_note_entity_ts_metadata("design:type", Number)
], ParkOrderNoteEntity.prototype, "parkOrderId", void 0);
park_order_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.notes;
    }),
    park_order_note_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ParkOrderNoteEntity.prototype, "parkOrder", void 0);
park_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)('text'),
    park_order_note_entity_ts_metadata("design:type", String)
], ParkOrderNoteEntity.prototype, "note", void 0);
park_order_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    park_order_note_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ParkOrderNoteEntity.prototype, "staff", void 0);
park_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_note_entity_ts_metadata("design:type", Number)
], ParkOrderNoteEntity.prototype, "staffId", void 0);
ParkOrderNoteEntity = park_order_note_entity_ts_decorate([
    (0,external_typeorm_.Entity)('park_order_note')
], ParkOrderNoteEntity);

;// ../../libs/database/src/lib/entities/parking/parking-support-request-activity.entity.ts
function parking_support_request_activity_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_support_request_activity_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ParkingSupportRequestActivityEntity = function ParkingSupportRequestActivityEntity() {
    "use strict";
};
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_support_request_activity_entity_ts_metadata("design:type", Number)
], ParkingSupportRequestActivityEntity.prototype, "id", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    parking_support_request_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingSupportRequestActivityEntity.prototype, "createdAt", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintActivityType
    }),
    parking_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintActivityType === "undefined" ? Object : ComplaintActivityType)
], ParkingSupportRequestActivityEntity.prototype, "type", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.complaintActivities;
    }),
    parking_support_request_activity_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ParkingSupportRequestActivityEntity.prototype, "actor", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    parking_support_request_activity_entity_ts_metadata("design:type", Array)
], ParkingSupportRequestActivityEntity.prototype, "assignedToStaffs", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    parking_support_request_activity_entity_ts_metadata("design:type", Array)
], ParkingSupportRequestActivityEntity.prototype, "unassignedFromStaffs", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_support_request_activity_entity_ts_metadata("design:type", String)
], ParkingSupportRequestActivityEntity.prototype, "comment", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    parking_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ParkingSupportRequestActivityEntity.prototype, "statusFrom", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    parking_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ParkingSupportRequestActivityEntity.prototype, "statusTo", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkingSupportRequestEntity;
    }, function(supportRequest) {
        return supportRequest.activities;
    }),
    parking_support_request_activity_entity_ts_metadata("design:type", typeof ParkingSupportRequestEntity === "undefined" ? Object : ParkingSupportRequestEntity)
], ParkingSupportRequestActivityEntity.prototype, "supportRequest", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_support_request_activity_entity_ts_metadata("design:type", Number)
], ParkingSupportRequestActivityEntity.prototype, "supportRequestId", void 0);
ParkingSupportRequestActivityEntity = parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_support_request_activity')
], ParkingSupportRequestActivityEntity);

;// ../../libs/database/src/lib/entities/parking/parking-support-request.entity.ts
function parking_support_request_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_support_request_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ParkingSupportRequestEntity = function ParkingSupportRequestEntity() {
    "use strict";
};
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_support_request_entity_ts_metadata("design:type", Number)
], ParkingSupportRequestEntity.prototype, "id", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    parking_support_request_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingSupportRequestEntity.prototype, "createdAt", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.supportRequests;
    }),
    parking_support_request_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ParkingSupportRequestEntity.prototype, "parkOrder", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_support_request_entity_ts_metadata("design:type", Number)
], ParkingSupportRequestEntity.prototype, "parkOrderId", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }, function(staff) {
        return staff.assignedParkingSupportRequests;
    }),
    (0,external_typeorm_.JoinTable)(),
    parking_support_request_entity_ts_metadata("design:type", Array)
], ParkingSupportRequestEntity.prototype, "assignedToStaffs", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_support_request_entity_ts_metadata("design:type", Boolean)
], ParkingSupportRequestEntity.prototype, "requestedByOwner", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_support_request_entity_ts_metadata("design:type", String)
], ParkingSupportRequestEntity.prototype, "subject", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)('text', {
        nullable: true
    }),
    parking_support_request_entity_ts_metadata("design:type", String)
], ParkingSupportRequestEntity.prototype, "content", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        default: ComplaintStatus.Submitted
    }),
    parking_support_request_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ParkingSupportRequestEntity.prototype, "status", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingSupportRequestActivityEntity;
    }, function(activity) {
        return activity.supportRequest;
    }),
    parking_support_request_entity_ts_metadata("design:type", Array)
], ParkingSupportRequestEntity.prototype, "activities", void 0);
ParkingSupportRequestEntity = parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_support_request')
], ParkingSupportRequestEntity);

;// ../../libs/database/src/lib/entities/parking/park-order-activity.entity.ts
function park_order_activity_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function park_order_activity_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ParkOrderActivityEntity = function ParkOrderActivityEntity() {
    "use strict";
};
park_order_activity_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    park_order_activity_entity_ts_metadata("design:type", Number)
], ParkOrderActivityEntity.prototype, "id", void 0);
park_order_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_order_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderActivityEntity.prototype, "updatedAt", void 0);
park_order_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkOrderStatus
    }),
    park_order_activity_entity_ts_metadata("design:type", typeof ParkOrderStatus === "undefined" ? Object : ParkOrderStatus)
], ParkOrderActivityEntity.prototype, "status", void 0);
park_order_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.activities;
    }),
    park_order_activity_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ParkOrderActivityEntity.prototype, "parkOrder", void 0);
park_order_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_order_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderActivityEntity.prototype, "expectedBy", void 0);
park_order_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_activity_entity_ts_metadata("design:type", Number)
], ParkOrderActivityEntity.prototype, "parkOrderId", void 0);
ParkOrderActivityEntity = park_order_activity_entity_ts_decorate([
    (0,external_typeorm_.Entity)('park_order_activity')
], ParkOrderActivityEntity);

;// ../../libs/database/src/lib/entities/parking/park-order.entity.ts
function park_order_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function park_order_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


















var ParkOrderEntity = function ParkOrderEntity() {
    "use strict";
};
park_order_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    park_order_entity_ts_metadata("design:type", Number)
], ParkOrderEntity.prototype, "id", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.ownedParkOrders;
    }),
    park_order_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkOrderEntity.prototype, "spotOwner", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_entity_ts_metadata("design:type", Number)
], ParkOrderEntity.prototype, "spotOwnerId", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkSpotVehicleType,
        default: ParkSpotVehicleType.Car
    }),
    park_order_entity_ts_metadata("design:type", typeof ParkSpotVehicleType === "undefined" ? Object : ParkSpotVehicleType)
], ParkOrderEntity.prototype, "vehicleType", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkSpotCarSize,
        nullable: true
    }),
    park_order_entity_ts_metadata("design:type", typeof ParkSpotCarSize === "undefined" ? Object : ParkSpotCarSize)
], ParkOrderEntity.prototype, "carSize", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 'USD'
    }),
    park_order_entity_ts_metadata("design:type", String)
], ParkOrderEntity.prototype, "currency", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.ownedParkOrders;
    }),
    park_order_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkOrderEntity.prototype, "carOwner", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_entity_ts_metadata("design:type", Number)
], ParkOrderEntity.prototype, "carOwnerId", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkSpotEntity;
    }, function(parkSpot) {
        return parkSpot.parkOrders;
    }),
    park_order_entity_ts_metadata("design:type", typeof ParkSpotEntity === "undefined" ? Object : ParkSpotEntity)
], ParkOrderEntity.prototype, "parkSpot", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_entity_ts_metadata("design:type", Number)
], ParkOrderEntity.prototype, "parkSpotId", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    park_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderEntity.prototype, "createdAt", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PaymentMode
    }),
    park_order_entity_ts_metadata("design:type", typeof PaymentMode === "undefined" ? Object : PaymentMode)
], ParkOrderEntity.prototype, "paymentMode", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderEntity.prototype, "enterTime", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderEntity.prototype, "exitTime", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    park_order_entity_ts_metadata("design:type", Number)
], ParkOrderEntity.prototype, "price", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderEntity.prototype, "extendedExitTime", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SavedPaymentMethodEntity;
    }, function(paymentMethod) {
        return paymentMethod.parkOrders;
    }),
    park_order_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], ParkOrderEntity.prototype, "savedPaymentMethod", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_order_entity_ts_metadata("design:type", Number)
], ParkOrderEntity.prototype, "savedPaymentMethodId", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.parkOrders;
    }),
    park_order_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], ParkOrderEntity.prototype, "paymentGateway", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_order_entity_ts_metadata("design:type", Number)
], ParkOrderEntity.prototype, "paymentGatewayId", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PaymentMode
    }),
    park_order_entity_ts_metadata("design:type", typeof PaymentMode === "undefined" ? Object : PaymentMode)
], ParkOrderEntity.prototype, "paymentMethod", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkOrderStatus,
        default: ParkOrderStatus.PENDING
    }),
    park_order_entity_ts_metadata("design:type", typeof ParkOrderStatus === "undefined" ? Object : ParkOrderStatus)
], ParkOrderEntity.prototype, "status", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingCustomerNotificationEntity;
    }, function(notification) {
        return notification.parkOrder;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "customerNotifications", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingProviderNotificationEntity;
    }, function(notification) {
        return notification.parkOrder;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "providerNotifications", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingFeedbackEntity;
    }, function(feedback) {
        return feedback.order;
    }),
    park_order_entity_ts_metadata("design:type", typeof ParkingFeedbackEntity === "undefined" ? Object : ParkingFeedbackEntity)
], ParkOrderEntity.prototype, "feedbacks", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderNoteEntity;
    }, function(parkOrderNote) {
        return parkOrderNote.parkOrder;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "notes", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderActivityEntity;
    }, function(activity) {
        return activity.parkOrder;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "activities", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(riderTransaction) {
        return riderTransaction.parkOrderCustomer;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "customerTransactions", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(riderTransaction) {
        return riderTransaction.parkOrderParkOwner;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "parkOwnerTransactions", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProviderTransactionEntity;
    }, function(ProviderTransactionEntity) {
        return ProviderTransactionEntity.parkOrder;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "providerTransactions", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingSupportRequestEntity;
    }, function(supportRequest) {
        return supportRequest.activities;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "supportRequests", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingTransactionEntity;
    }, function(parkTransaction) {
        return parkTransaction.parkOrder;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "parkingTransactions", void 0);
ParkOrderEntity = park_order_entity_ts_decorate([
    (0,external_typeorm_.Entity)('park_order')
], ParkOrderEntity);

;// ../../libs/database/src/lib/entities/enums/country.enum.ts

var Country;
(function(Country) {
    Country["AFGHANISTAN"] = "Afghanistan";
    Country["ALBANIA"] = "Albania";
    Country["ALGERIA"] = "Algeria";
    Country["ANDORRA"] = "Andorra";
    Country["ANGOLA"] = "Angola";
    Country["ANTIGUA_AND_BARBUDA"] = "Antigua and Barbuda";
    Country["ARGENTINA"] = "Argentina";
    Country["ARMENIA"] = "Armenia";
    Country["AUSTRALIA"] = "Australia";
    Country["AUSTRIA"] = "Austria";
    Country["AZERBAIJAN"] = "Azerbaijan";
    Country["BAHAMAS"] = "Bahamas";
    Country["BAHRAIN"] = "Bahrain";
    Country["BANGLADESH"] = "Bangladesh";
    Country["BARBADOS"] = "Barbados";
    Country["BELARUS"] = "Belarus";
    Country["BELGIUM"] = "Belgium";
    Country["BELIZE"] = "Belize";
    Country["BENIN"] = "Benin";
    Country["BHUTAN"] = "Bhutan";
    Country["BOLIVIA"] = "Bolivia";
    Country["BOSNIA_AND_HERZEGOVINA"] = "Bosnia and Herzegovina";
    Country["BOTSWANA"] = "Botswana";
    Country["BRAZIL"] = "Brazil";
    Country["BRUNEI"] = "Brunei";
    Country["BULGARIA"] = "Bulgaria";
    Country["BURKINA_FASO"] = "Burkina Faso";
    Country["BURUNDI"] = "Burundi";
    Country["CABO_VERDE"] = "Cabo Verde";
    Country["CAMBODIA"] = "Cambodia";
    Country["CAMEROON"] = "Cameroon";
    Country["CANADA"] = "Canada";
    Country["CENTRAL_AFRICAN_REPUBLIC"] = "Central African Republic";
    Country["CHAD"] = "Chad";
    Country["CHILE"] = "Chile";
    Country["CHINA"] = "China";
    Country["COLOMBIA"] = "Colombia";
    Country["COMOROS"] = "Comoros";
    Country["CONGO_DEMOCRATIC_REPUBLIC"] = "Congo (Democratic Republic)";
    Country["CONGO_REPUBLIC"] = "Congo (Republic)";
    Country["COSTA_RICA"] = "Costa Rica";
    Country["CROATIA"] = "Croatia";
    Country["CUBA"] = "Cuba";
    Country["CYPRUS"] = "Cyprus";
    Country["CZECH_REPUBLIC"] = "Czech Republic";
    Country["DENMARK"] = "Denmark";
    Country["DJIBOUTI"] = "Djibouti";
    Country["DOMINICA"] = "Dominica";
    Country["DOMINICAN_REPUBLIC"] = "Dominican Republic";
    Country["ECUADOR"] = "Ecuador";
    Country["EGYPT"] = "Egypt";
    Country["EL_SALVADOR"] = "El Salvador";
    Country["EQUATORIAL_GUINEA"] = "Equatorial Guinea";
    Country["ERITREA"] = "Eritrea";
    Country["ESTONIA"] = "Estonia";
    Country["ESWATINI"] = "Eswatini";
    Country["ETHIOPIA"] = "Ethiopia";
    Country["FIJI"] = "Fiji";
    Country["FINLAND"] = "Finland";
    Country["FRANCE"] = "France";
    Country["GABON"] = "Gabon";
    Country["GAMBIA"] = "Gambia";
    Country["GEORGIA"] = "Georgia";
    Country["GERMANY"] = "Germany";
    Country["GHANA"] = "Ghana";
    Country["GREECE"] = "Greece";
    Country["GRENADA"] = "Grenada";
    Country["GUATEMALA"] = "Guatemala";
    Country["GUINEA"] = "Guinea";
    Country["GUINEA_BISSAU"] = "Guinea-Bissau";
    Country["GUYANA"] = "Guyana";
    Country["HAITI"] = "Haiti";
    Country["HONDURAS"] = "Honduras";
    Country["HUNGARY"] = "Hungary";
    Country["ICELAND"] = "Iceland";
    Country["INDIA"] = "India";
    Country["INDONESIA"] = "Indonesia";
    Country["IRAN"] = "Iran";
    Country["IRAQ"] = "Iraq";
    Country["IRELAND"] = "Ireland";
    Country["ISRAEL"] = "Israel";
    Country["ITALY"] = "Italy";
    Country["JAMAICA"] = "Jamaica";
    Country["JAPAN"] = "Japan";
    Country["JORDAN"] = "Jordan";
    Country["KAZAKHSTAN"] = "Kazakhstan";
    Country["KENYA"] = "Kenya";
    Country["KIRIBATI"] = "Kiribati";
    Country["KOREA_NORTH"] = "Korea (North)";
    Country["KOREA_SOUTH"] = "Korea (South)";
    Country["KOSOVO"] = "Kosovo";
    Country["KUWAIT"] = "Kuwait";
    Country["KYRGYZSTAN"] = "Kyrgyzstan";
    Country["LAOS"] = "Laos";
    Country["LATVIA"] = "Latvia";
    Country["LEBANON"] = "Lebanon";
    Country["LESOTHO"] = "Lesotho";
    Country["LIBERIA"] = "Liberia";
    Country["LIBYA"] = "Libya";
    Country["LIECHTENSTEIN"] = "Liechtenstein";
    Country["LITHUANIA"] = "Lithuania";
    Country["LUXEMBOURG"] = "Luxembourg";
    Country["MADAGASCAR"] = "Madagascar";
    Country["MALAWI"] = "Malawi";
    Country["MALAYSIA"] = "Malaysia";
    Country["MALDIVES"] = "Maldives";
    Country["MALI"] = "Mali";
    Country["MALTA"] = "Malta";
    Country["MARSHALL_ISLANDS"] = "Marshall Islands";
    Country["MAURITANIA"] = "Mauritania";
    Country["MAURITIUS"] = "Mauritius";
    Country["MEXICO"] = "Mexico";
    Country["MICRONESIA"] = "Micronesia";
    Country["MOLDOVA"] = "Moldova";
    Country["MONACO"] = "Monaco";
    Country["MONGOLIA"] = "Mongolia";
    Country["MONTENEGRO"] = "Montenegro";
    Country["MOROCCO"] = "Morocco";
    Country["MOZAMBIQUE"] = "Mozambique";
    Country["MYANMAR"] = "Myanmar";
    Country["NAMIBIA"] = "Namibia";
    Country["NAURU"] = "Nauru";
    Country["NEPAL"] = "Nepal";
    Country["NETHERLANDS"] = "Netherlands";
    Country["NEW_ZEALAND"] = "New Zealand";
    Country["NICARAGUA"] = "Nicaragua";
    Country["NIGER"] = "Niger";
    Country["NIGERIA"] = "Nigeria";
    Country["NORTH_MACEDONIA"] = "North Macedonia";
    Country["NORWAY"] = "Norway";
    Country["OMAN"] = "Oman";
    Country["PAKISTAN"] = "Pakistan";
    Country["PALAU"] = "Palau";
    Country["PALESTINE"] = "Palestine";
    Country["PANAMA"] = "Panama";
    Country["PAPUA_NEW_GUINEA"] = "Papua New Guinea";
    Country["PARAGUAY"] = "Paraguay";
    Country["PERU"] = "Peru";
    Country["PHILIPPINES"] = "Philippines";
    Country["POLAND"] = "Poland";
    Country["PORTUGAL"] = "Portugal";
    Country["QATAR"] = "Qatar";
    Country["ROMANIA"] = "Romania";
    Country["RUSSIA"] = "Russia";
    Country["RWANDA"] = "Rwanda";
    Country["SAINT_KITTS_AND_NEVIS"] = "Saint Kitts and Nevis";
    Country["SAINT_LUCIA"] = "Saint Lucia";
    Country["SAINT_VINCENT_AND_THE_GRENADINES"] = "Saint Vincent and the Grenadines";
    Country["SAMOA"] = "Samoa";
    Country["SAN_MARINO"] = "San Marino";
    Country["SAO_TOME_AND_PRINCIPE"] = "Sao Tome and Principe";
    Country["SAUDI_ARABIA"] = "Saudi Arabia";
    Country["SENEGAL"] = "Senegal";
    Country["SERBIA"] = "Serbia";
    Country["SEYCHELLES"] = "Seychelles";
    Country["SIERRA_LEONE"] = "Sierra Leone";
    Country["SINGAPORE"] = "Singapore";
    Country["SLOVAKIA"] = "Slovakia";
    Country["SLOVENIA"] = "Slovenia";
    Country["SOLOMON_ISLANDS"] = "Solomon Islands";
    Country["SOMALIA"] = "Somalia";
    Country["SOUTH_AFRICA"] = "South Africa";
    Country["SOUTH_SUDAN"] = "South Sudan";
    Country["SPAIN"] = "Spain";
    Country["SRI_LANKA"] = "Sri Lanka";
    Country["SUDAN"] = "Sudan";
    Country["SURINAME"] = "Suriname";
    Country["SWEDEN"] = "Sweden";
    Country["SWITZERLAND"] = "Switzerland";
    Country["SYRIA"] = "Syria";
    Country["TAIWAN"] = "Taiwan";
    Country["TAJIKISTAN"] = "Tajikistan";
    Country["TANZANIA"] = "Tanzania";
    Country["THAILAND"] = "Thailand";
    Country["TIMOR_LESTE"] = "Timor-Leste";
    Country["TOGO"] = "Togo";
    Country["TONGA"] = "Tonga";
    Country["TRINIDAD_AND_TOBAGO"] = "Trinidad and Tobago";
    Country["TUNISIA"] = "Tunisia";
    Country["TURKEY"] = "Turkey";
    Country["TURKMENISTAN"] = "Turkmenistan";
    Country["TUVALU"] = "Tuvalu";
    Country["UGANDA"] = "Uganda";
    Country["UKRAINE"] = "Ukraine";
    Country["UNITED_ARAB_EMIRATES"] = "United Arab Emirates";
    Country["UNITED_KINGDOM"] = "United Kingdom";
    Country["UNITED_STATES"] = "United States";
    Country["URUGUAY"] = "Uruguay";
    Country["UZBEKISTAN"] = "Uzbekistan";
    Country["VANUATU"] = "Vanuatu";
    Country["VATICAN_CITY"] = "Vatican City";
    Country["VENEZUELA"] = "Venezuela";
    Country["VIETNAM"] = "Vietnam";
    Country["YEMEN"] = "Yemen";
    Country["ZAMBIA"] = "Zambia";
    Country["ZIMBABWE"] = "Zimbabwe";
})(Country || (Country = {}));
(0,graphql_.registerEnumType)(Country, {
    name: 'Country',
    description: 'Country'
});

;// ../../libs/database/src/lib/entities/saved-payment-method.entity.ts
function saved_payment_method_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function saved_payment_method_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}











var SavedPaymentMethodEntity = function SavedPaymentMethodEntity() {
    "use strict";
};
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    saved_payment_method_entity_ts_metadata("design:type", Number)
], SavedPaymentMethodEntity.prototype, "id", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    saved_payment_method_entity_ts_metadata("design:type", String)
], SavedPaymentMethodEntity.prototype, "title", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", String)
], SavedPaymentMethodEntity.prototype, "lastFour", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", Boolean)
], SavedPaymentMethodEntity.prototype, "isEnabled", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    saved_payment_method_entity_ts_metadata("design:type", Boolean)
], SavedPaymentMethodEntity.prototype, "isDefault", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: SavedPaymentMethodType
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof SavedPaymentMethodType === "undefined" ? Object : SavedPaymentMethodType)
], SavedPaymentMethodEntity.prototype, "type", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: Country
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof Country === "undefined" ? Object : Country)
], SavedPaymentMethodEntity.prototype, "country", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ProviderBrand,
        nullable: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof ProviderBrand === "undefined" ? Object : ProviderBrand)
], SavedPaymentMethodEntity.prototype, "providerBrand", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], SavedPaymentMethodEntity.prototype, "expiryDate", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", String)
], SavedPaymentMethodEntity.prototype, "holderName", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.savedPaymentMethods;
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], SavedPaymentMethodEntity.prototype, "rider", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", Number)
], SavedPaymentMethodEntity.prototype, "riderId", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.savedPaymentMethods;
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], SavedPaymentMethodEntity.prototype, "driver", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", Number)
], SavedPaymentMethodEntity.prototype, "driverId", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.savedPaymentMethods;
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], SavedPaymentMethodEntity.prototype, "shop", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", Number)
], SavedPaymentMethodEntity.prototype, "shopId", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.savedPaymentMethod;
    }),
    saved_payment_method_entity_ts_metadata("design:type", Array)
], SavedPaymentMethodEntity.prototype, "parkOrders", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    saved_payment_method_entity_ts_metadata("design:type", String)
], SavedPaymentMethodEntity.prototype, "token", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.savedPaymentMethods;
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], SavedPaymentMethodEntity.prototype, "paymentGateway", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    saved_payment_method_entity_ts_metadata("design:type", Number)
], SavedPaymentMethodEntity.prototype, "paymentGatewayId", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.savedPaymentMethod;
    }),
    saved_payment_method_entity_ts_metadata("design:type", Array)
], SavedPaymentMethodEntity.prototype, "orders", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(transaction) {
        return transaction.savedPaymentMethod;
    }),
    saved_payment_method_entity_ts_metadata("design:type", Array)
], SavedPaymentMethodEntity.prototype, "transactions", void 0);
SavedPaymentMethodEntity = saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Entity)('saved_payment_method')
], SavedPaymentMethodEntity);

;// ../../libs/database/src/lib/entities/rider-transaction.entity.ts
function rider_transaction_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function rider_transaction_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}













var RiderTransactionEntity = function RiderTransactionEntity() {
    "use strict";
};
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "id", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        name: 'transactionTime'
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], RiderTransactionEntity.prototype, "createdAt", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionStatus,
        default: TransactionStatus.Processing
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof TransactionStatus === "undefined" ? Object : TransactionStatus)
], RiderTransactionEntity.prototype, "status", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionAction
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof TransactionAction === "undefined" ? Object : TransactionAction)
], RiderTransactionEntity.prototype, "action", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RiderDeductTransactionType,
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof RiderDeductTransactionType === "undefined" ? Object : RiderDeductTransactionType)
], RiderTransactionEntity.prototype, "deductType", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RiderRechargeTransactionType,
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof RiderRechargeTransactionType === "undefined" ? Object : RiderRechargeTransactionType)
], RiderTransactionEntity.prototype, "rechargeType", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "amount", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: '3'
    }),
    rider_transaction_entity_ts_metadata("design:type", String)
], RiderTransactionEntity.prototype, "currency", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'documentNumber'
    }),
    rider_transaction_entity_ts_metadata("design:type", String)
], RiderTransactionEntity.prototype, "refrenceNumber", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'details'
    }),
    rider_transaction_entity_ts_metadata("design:type", String)
], RiderTransactionEntity.prototype, "description", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.transactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], RiderTransactionEntity.prototype, "rider", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "riderId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.riderTransactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], RiderTransactionEntity.prototype, "paymentGateway", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "paymentGatewayId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SavedPaymentMethodEntity;
    }, function(savedPaymentMethod) {
        return savedPaymentMethod.transactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], RiderTransactionEntity.prototype, "savedPaymentMethod", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "savedPaymentMethodId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.riderTransactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], RiderTransactionEntity.prototype, "operator", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'operatorId'
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "operatorId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return GiftCodeEntity;
    }, function(giftCard) {
        return giftCard.riderTransaction;
    }),
    (0,external_typeorm_.JoinColumn)(),
    rider_transaction_entity_ts_metadata("design:type", typeof GiftCodeEntity === "undefined" ? Object : GiftCodeEntity)
], RiderTransactionEntity.prototype, "giftCard", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "giftCardId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.riderTransactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], RiderTransactionEntity.prototype, "request", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "requestId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }, function(order) {
        return order.riderTransactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "shopOrder", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "shopOrderId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.parkOwnerTransactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], RiderTransactionEntity.prototype, "parkOrderParkOwner", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "parkOrderParkOwnerId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.customerTransactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], RiderTransactionEntity.prototype, "parkOrderCustomer", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "parkOrderCustomerId", void 0);
RiderTransactionEntity = rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Entity)('rider_transaction')
], RiderTransactionEntity);

;// ../../libs/database/src/lib/entities/enums/payment-gateway-type.enum.ts

var PaymentGatewayType;
(function(PaymentGatewayType) {
    PaymentGatewayType["Stripe"] = "stripe";
    PaymentGatewayType["BrainTree"] = "braintree";
    PaymentGatewayType["PayPal"] = "paypal";
    PaymentGatewayType["Paytm"] = "paytm";
    PaymentGatewayType["Razorpay"] = "razorpay";
    PaymentGatewayType["Paystack"] = "paystack";
    PaymentGatewayType["PayU"] = "payu";
    PaymentGatewayType["Instamojo"] = "instamojo";
    PaymentGatewayType["Flutterwave"] = "flutterwave";
    PaymentGatewayType["PayGate"] = "paygate";
    PaymentGatewayType["MIPS"] = "mips";
    PaymentGatewayType["MercadoPago"] = "mercadopago";
    PaymentGatewayType["AmazonPaymentServices"] = "amazon";
    PaymentGatewayType["MyTMoney"] = "mytmoney";
    PaymentGatewayType["WayForPay"] = "wayforpay";
    PaymentGatewayType["MyFatoorah"] = "MyFatoorah";
    PaymentGatewayType["SberBank"] = "SberBank";
    PaymentGatewayType["BinancePay"] = "BinancePay";
    PaymentGatewayType["OpenPix"] = "OpenPix";
    PaymentGatewayType["PayTR"] = "PayTR";
    PaymentGatewayType["CustomLink"] = "link";
})(PaymentGatewayType || (PaymentGatewayType = {}));
(0,graphql_.registerEnumType)(PaymentGatewayType, {
    name: 'PaymentGatewayType'
});

;// ../../libs/database/src/lib/entities/gateway-to-user.entity.ts
function gateway_to_user_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function gateway_to_user_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var GatewayToUserEntity = function GatewayToUserEntity() {
    "use strict";
};
gateway_to_user_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    gateway_to_user_entity_ts_metadata("design:type", Number)
], GatewayToUserEntity.prototype, "id", void 0);
gateway_to_user_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.userIds;
    }),
    gateway_to_user_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], GatewayToUserEntity.prototype, "gateway", void 0);
gateway_to_user_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    gateway_to_user_entity_ts_metadata("design:type", Number)
], GatewayToUserEntity.prototype, "gatewayId", void 0);
gateway_to_user_entity_ts_decorate([
    (0,external_typeorm_.Index)(),
    (0,external_typeorm_.Column)(),
    gateway_to_user_entity_ts_metadata("design:type", String)
], GatewayToUserEntity.prototype, "internalUserId", void 0);
gateway_to_user_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    gateway_to_user_entity_ts_metadata("design:type", String)
], GatewayToUserEntity.prototype, "externalReferenceNumber", void 0);
GatewayToUserEntity = gateway_to_user_entity_ts_decorate([
    (0,external_typeorm_.Entity)('gateway_to_user')
], GatewayToUserEntity);

;// ../../libs/database/src/lib/entities/payment-gateway.entity.ts
function payment_gateway_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function payment_gateway_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}










var PaymentGatewayEntity = function PaymentGatewayEntity() {
    "use strict";
};
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    payment_gateway_entity_ts_metadata("design:type", Number)
], PaymentGatewayEntity.prototype, "id", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    payment_gateway_entity_ts_metadata("design:type", Boolean)
], PaymentGatewayEntity.prototype, "enabled", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payment_gateway_entity_ts_metadata("design:type", String)
], PaymentGatewayEntity.prototype, "title", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PaymentGatewayType
    }),
    payment_gateway_entity_ts_metadata("design:type", typeof PaymentGatewayType === "undefined" ? Object : PaymentGatewayType)
], PaymentGatewayEntity.prototype, "type", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'text'
    }),
    payment_gateway_entity_ts_metadata("design:type", String)
], PaymentGatewayEntity.prototype, "publicKey", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'text'
    }),
    payment_gateway_entity_ts_metadata("design:type", String)
], PaymentGatewayEntity.prototype, "privateKey", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'text'
    }),
    payment_gateway_entity_ts_metadata("design:type", String)
], PaymentGatewayEntity.prototype, "saltKey", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'text'
    }),
    payment_gateway_entity_ts_metadata("design:type", String)
], PaymentGatewayEntity.prototype, "merchantId", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    payment_gateway_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], PaymentGatewayEntity.prototype, "deletedAt", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, function(media) {
        return media.paymentGateway;
    }, {
        nullable: true
    }),
    (0,external_typeorm_.JoinColumn)(),
    payment_gateway_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], PaymentGatewayEntity.prototype, "media", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payment_gateway_entity_ts_metadata("design:type", Number)
], PaymentGatewayEntity.prototype, "mediaId", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.paymentGateway;
    }),
    payment_gateway_entity_ts_metadata("design:type", Array)
], PaymentGatewayEntity.prototype, "orders", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(userTransaction) {
        return userTransaction.paymentGateway;
    }),
    payment_gateway_entity_ts_metadata("design:type", Array)
], PaymentGatewayEntity.prototype, "riderTransactions", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProviderTransactionEntity;
    }, function(adminTransaction) {
        return adminTransaction.paymentGateway;
    }),
    payment_gateway_entity_ts_metadata("design:type", Array)
], PaymentGatewayEntity.prototype, "adminTransactions", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.paymentGateway;
    }),
    payment_gateway_entity_ts_metadata("design:type", Array)
], PaymentGatewayEntity.prototype, "parkOrders", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return GatewayToUserEntity;
    }, function(gatewayToUser) {
        return gatewayToUser.gateway;
    }),
    payment_gateway_entity_ts_metadata("design:type", Array)
], PaymentGatewayEntity.prototype, "userIds", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SavedPaymentMethodEntity;
    }, function(savedPaymentMethod) {
        return savedPaymentMethod.paymentGateway;
    }),
    payment_gateway_entity_ts_metadata("design:type", Array)
], PaymentGatewayEntity.prototype, "savedPaymentMethods", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return PayoutAccountEntity;
    }, function(payout) {
        return payout.paymentGateway;
    }),
    payment_gateway_entity_ts_metadata("design:type", Array)
], PaymentGatewayEntity.prototype, "payoutAccounts", void 0);
PaymentGatewayEntity = payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Entity)('payment_gateway')
], PaymentGatewayEntity);

;// ../../libs/database/src/lib/transformers/distance-multiplier.transformer.ts
var DistanceMultiplierTransformer = /*#__PURE__*/ function() {
    "use strict";
    function DistanceMultiplierTransformer() {}
    var _proto = DistanceMultiplierTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(row) {
            return row.distanceFrom + "-" + row.distanceTo + "|" + row.multiply;
        });
    };
    _proto.from = function from(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(str) {
            return {
                distanceFrom: parseInt(str.split('|')[0].split('-')[0]),
                distanceTo: parseInt(str.split('|')[0].split('-')[1]),
                multiply: parseFloat(str.split('|')[1])
            };
        });
    };
    return DistanceMultiplierTransformer;
}();

;// ../../libs/database/src/lib/transformers/time-multiplier.transformer.ts
var TimeMultiplierTransformer = /*#__PURE__*/ function() {
    "use strict";
    function TimeMultiplierTransformer() {}
    var _proto = TimeMultiplierTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(row) {
            return row.startTime + "-" + row.endTime + "|" + row.multiply;
        });
    };
    _proto.from = function from(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(str) {
            return {
                startTime: str.split('|')[0].split('-')[0],
                endTime: str.split('|')[0].split('-')[1],
                multiply: parseFloat(str.split('|')[1])
            };
        });
    };
    return TimeMultiplierTransformer;
}();

;// ../../libs/database/src/lib/entities/enums/service-distance-fee-mode.enum.ts

var ServiceDistanceFeeMode;
(function(ServiceDistanceFeeMode) {
    ServiceDistanceFeeMode["None"] = "None";
    ServiceDistanceFeeMode["PickupToDestination"] = "PickupToDestination";
    ServiceDistanceFeeMode["Radial"] = "Radial";
})(ServiceDistanceFeeMode || (ServiceDistanceFeeMode = {}));
(0,graphql_.registerEnumType)(ServiceDistanceFeeMode, {
    name: 'ServiceDistanceFeeMode'
});

;// ../../libs/database/src/lib/entities/enums/service-payment-method.enum.ts

var ServicePaymentMethod;
(function(ServicePaymentMethod) {
    ServicePaymentMethod["CashCredit"] = "CashCredit";
    ServicePaymentMethod["OnlyCredit"] = "OnlyCredit";
    ServicePaymentMethod["OnlyCash"] = "OnlyCash";
})(ServicePaymentMethod || (ServicePaymentMethod = {}));
(0,graphql_.registerEnumType)(ServicePaymentMethod, {
    name: 'ServicePaymentMethod'
});

;// ../../libs/database/src/lib/entities/taxi/region-category.entity.ts
function region_category_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function region_category_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var RegionCategoryEntity = function RegionCategoryEntity() {
    "use strict";
};
region_category_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    region_category_entity_ts_metadata("design:type", Number)
], RegionCategoryEntity.prototype, "id", void 0);
region_category_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    region_category_entity_ts_metadata("design:type", String)
], RegionCategoryEntity.prototype, "name", void 0);
region_category_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    region_category_entity_ts_metadata("design:type", String)
], RegionCategoryEntity.prototype, "currency", void 0);
region_category_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RegionEntity;
    }, function(region) {
        return region.category;
    }),
    region_category_entity_ts_metadata("design:type", Array)
], RegionCategoryEntity.prototype, "regions", void 0);
RegionCategoryEntity = region_category_entity_ts_decorate([
    (0,external_typeorm_.Entity)('region_category')
], RegionCategoryEntity);

;// ../../libs/database/src/lib/entities/taxi/region.entity.ts
function region_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function region_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var RegionEntity = function RegionEntity() {
    "use strict";
};
region_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    region_entity_ts_metadata("design:type", Number)
], RegionEntity.prototype, "id", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    region_entity_ts_metadata("design:type", String)
], RegionEntity.prototype, "name", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    region_entity_ts_metadata("design:type", String)
], RegionEntity.prototype, "currency", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    region_entity_ts_metadata("design:type", Boolean)
], RegionEntity.prototype, "enabled", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.Column)('polygon', {
        transformer: new PolygonTransformer()
    }),
    region_entity_ts_metadata("design:type", Array)
], RegionEntity.prototype, "location", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.regions;
    }),
    region_entity_ts_metadata("design:type", Array)
], RegionEntity.prototype, "services", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return RegionCategoryEntity;
    }, function(category) {
        return category.regions;
    }),
    region_entity_ts_metadata("design:type", typeof RegionCategoryEntity === "undefined" ? Object : RegionCategoryEntity)
], RegionEntity.prototype, "category", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    region_entity_ts_metadata("design:type", Number)
], RegionEntity.prototype, "categoryId", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(taxiOrder) {
        return taxiOrder.region;
    }),
    region_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], RegionEntity.prototype, "taxiOrders", void 0);
RegionEntity = region_entity_ts_decorate([
    (0,external_typeorm_.Entity)('region')
], RegionEntity);

;// ../../libs/database/src/lib/entities/taxi/service-category.entity.ts
function service_category_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function service_category_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ServiceCategoryEntity = function ServiceCategoryEntity() {
    "use strict";
};
service_category_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    service_category_entity_ts_metadata("design:type", Number)
], ServiceCategoryEntity.prototype, "id", void 0);
service_category_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'title'
    }),
    service_category_entity_ts_metadata("design:type", String)
], ServiceCategoryEntity.prototype, "name", void 0);
service_category_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.category;
    }),
    service_category_entity_ts_metadata("design:type", Array)
], ServiceCategoryEntity.prototype, "services", void 0);
service_category_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    service_category_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ServiceCategoryEntity.prototype, "deletedAt", void 0);
ServiceCategoryEntity = service_category_entity_ts_decorate([
    (0,external_typeorm_.Entity)('service_category')
], ServiceCategoryEntity);

;// ../../libs/database/src/lib/entities/enums/service-option-icon.enum.ts

var ServiceOptionIcon;
(function(ServiceOptionIcon) {
    ServiceOptionIcon["Pet"] = "Pet";
    ServiceOptionIcon["TwoWay"] = "TwoWay";
    ServiceOptionIcon["Luggage"] = "Luggage";
    ServiceOptionIcon["PackageDelivery"] = "PackageDelivery";
    ServiceOptionIcon["Shopping"] = "Shopping";
    ServiceOptionIcon["Custom1"] = "Custom1";
    ServiceOptionIcon["Custom2"] = "Custom2";
    ServiceOptionIcon["Custom3"] = "Custom3";
    ServiceOptionIcon["Custom4"] = "Custom4";
    ServiceOptionIcon["Custom5"] = "Custom5";
})(ServiceOptionIcon || (ServiceOptionIcon = {}));
(0,graphql_.registerEnumType)(ServiceOptionIcon, {
    name: 'ServiceOptionIcon'
});

;// ../../libs/database/src/lib/entities/enums/service-option-type.enum.ts

var ServiceOptionType;
(function(ServiceOptionType) {
    ServiceOptionType["Free"] = "Free";
    ServiceOptionType["Paid"] = "Paid";
    ServiceOptionType["TwoWay"] = "TwoWay";
})(ServiceOptionType || (ServiceOptionType = {}));
(0,graphql_.registerEnumType)(ServiceOptionType, {
    name: 'ServiceOptionType'
});

;// ../../libs/database/src/lib/entities/taxi/service-option.entity.ts
function service_option_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function service_option_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ServiceOptionEntity = function ServiceOptionEntity() {
    "use strict";
};
service_option_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    service_option_entity_ts_metadata("design:type", Number)
], ServiceOptionEntity.prototype, "id", void 0);
service_option_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    service_option_entity_ts_metadata("design:type", String)
], ServiceOptionEntity.prototype, "name", void 0);
service_option_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    service_option_entity_ts_metadata("design:type", String)
], ServiceOptionEntity.prototype, "description", void 0);
service_option_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ServiceOptionType
    }),
    service_option_entity_ts_metadata("design:type", typeof ServiceOptionType === "undefined" ? Object : ServiceOptionType)
], ServiceOptionEntity.prototype, "type", void 0);
service_option_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 12,
        scale: 2,
        nullable: true
    }),
    service_option_entity_ts_metadata("design:type", Number)
], ServiceOptionEntity.prototype, "additionalFee", void 0);
service_option_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ServiceOptionIcon
    }),
    service_option_entity_ts_metadata("design:type", typeof ServiceOptionIcon === "undefined" ? Object : ServiceOptionIcon)
], ServiceOptionEntity.prototype, "icon", void 0);
service_option_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.options;
    }),
    service_option_entity_ts_metadata("design:type", typeof ServiceEntity === "undefined" ? Object : ServiceEntity)
], ServiceOptionEntity.prototype, "services", void 0);
service_option_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return TaxiOrderEntity;
    }, function(request) {
        return request.options;
    }),
    service_option_entity_ts_metadata("design:type", Array)
], ServiceOptionEntity.prototype, "requests", void 0);
ServiceOptionEntity = service_option_entity_ts_decorate([
    (0,external_typeorm_.Entity)('service_option')
], ServiceOptionEntity);

;// ../../libs/database/src/lib/entities/taxi/fleet-transaction.entity.ts
function fleet_transaction_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function fleet_transaction_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}









var FleetTransactionEntity = function FleetTransactionEntity() {
    "use strict";
};
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    fleet_transaction_entity_ts_metadata("design:type", Number)
], FleetTransactionEntity.prototype, "id", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        name: 'transactionTime'
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], FleetTransactionEntity.prototype, "transactionTimestamp", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionStatus,
        default: TransactionStatus.Processing
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof TransactionStatus === "undefined" ? Object : TransactionStatus)
], FleetTransactionEntity.prototype, "status", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionAction
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof TransactionAction === "undefined" ? Object : TransactionAction)
], FleetTransactionEntity.prototype, "action", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ProviderDeductTransactionType,
        nullable: true
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof ProviderDeductTransactionType === "undefined" ? Object : ProviderDeductTransactionType)
], FleetTransactionEntity.prototype, "deductType", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ProviderRechargeTransactionType,
        nullable: true
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof ProviderRechargeTransactionType === "undefined" ? Object : ProviderRechargeTransactionType)
], FleetTransactionEntity.prototype, "rechargeType", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    fleet_transaction_entity_ts_metadata("design:type", Number)
], FleetTransactionEntity.prototype, "amount", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: '3'
    }),
    fleet_transaction_entity_ts_metadata("design:type", String)
], FleetTransactionEntity.prototype, "currency", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'documentNumber'
    }),
    fleet_transaction_entity_ts_metadata("design:type", String)
], FleetTransactionEntity.prototype, "refrenceNumber", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'details'
    }),
    fleet_transaction_entity_ts_metadata("design:type", String)
], FleetTransactionEntity.prototype, "description", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.fleetTransactions;
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], FleetTransactionEntity.prototype, "request", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_transaction_entity_ts_metadata("design:type", Number)
], FleetTransactionEntity.prototype, "requestId", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.fleetTransactions;
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], FleetTransactionEntity.prototype, "driver", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_transaction_entity_ts_metadata("design:type", Number)
], FleetTransactionEntity.prototype, "driverId", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return FleetEntity;
    }, function(fleet) {
        return fleet.transactions;
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof FleetEntity === "undefined" ? Object : FleetEntity)
], FleetTransactionEntity.prototype, "fleet", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_transaction_entity_ts_metadata("design:type", Number)
], FleetTransactionEntity.prototype, "fleetId", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.fleetTransactions;
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], FleetTransactionEntity.prototype, "operator", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'operatorId'
    }),
    fleet_transaction_entity_ts_metadata("design:type", Number)
], FleetTransactionEntity.prototype, "operatorId", void 0);
FleetTransactionEntity = fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Entity)('fleet_transaction')
], FleetTransactionEntity);

;// ../../libs/database/src/lib/entities/taxi/fleet-wallet.entity.ts
function fleet_wallet_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function fleet_wallet_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var FleetWalletEntity = function FleetWalletEntity() {
    "use strict";
};
fleet_wallet_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    fleet_wallet_entity_ts_metadata("design:type", Number)
], FleetWalletEntity.prototype, "id", void 0);
fleet_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0.0,
        name: 'amount'
    }),
    fleet_wallet_entity_ts_metadata("design:type", Number)
], FleetWalletEntity.prototype, "balance", void 0);
fleet_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_wallet_entity_ts_metadata("design:type", String)
], FleetWalletEntity.prototype, "currency", void 0);
fleet_wallet_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return FleetEntity;
    }, function(fleet) {
        return fleet.wallet;
    }),
    fleet_wallet_entity_ts_metadata("design:type", typeof FleetEntity === "undefined" ? Object : FleetEntity)
], FleetWalletEntity.prototype, "fleet", void 0);
fleet_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_wallet_entity_ts_metadata("design:type", Number)
], FleetWalletEntity.prototype, "fleetId", void 0);
FleetWalletEntity = fleet_wallet_entity_ts_decorate([
    (0,external_typeorm_.Entity)('fleet_wallet')
], FleetWalletEntity);

;// ../../libs/database/src/lib/entities/enums/fleet-staff.permissions.enum.ts

var FleetStaffPermissionOrder;
(function(FleetStaffPermissionOrder) {
    FleetStaffPermissionOrder["CAN_VIEW"] = "CAN_VIEW";
    FleetStaffPermissionOrder["CAN_EDIT"] = "CAN_EDIT";
})(FleetStaffPermissionOrder || (FleetStaffPermissionOrder = {}));
(0,graphql_.registerEnumType)(FleetStaffPermissionOrder, {
    name: 'FleetStaffPermissionOrder'
});
var FleetStaffPermissionFinancial;
(function(FleetStaffPermissionFinancial) {
    FleetStaffPermissionFinancial["CAN_VIEW"] = "CAN_VIEW";
    FleetStaffPermissionFinancial["CAN_EDIT"] = "CAN_EDIT";
})(FleetStaffPermissionFinancial || (FleetStaffPermissionFinancial = {}));
(0,graphql_.registerEnumType)(FleetStaffPermissionFinancial, {
    name: 'FleetStaffPermissionFinancial'
});

;// ../../libs/database/src/lib/entities/taxi/fleet-staff-session.entity.ts
function fleet_staff_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function fleet_staff_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var FleetStaffSessionEntity = function FleetStaffSessionEntity() {
    "use strict";
};
fleet_staff_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    fleet_staff_session_entity_ts_metadata("design:type", Number)
], FleetStaffSessionEntity.prototype, "id", void 0);
fleet_staff_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return SessionInfo;
    }),
    fleet_staff_session_entity_ts_metadata("design:type", typeof SessionInfo === "undefined" ? Object : SessionInfo)
], FleetStaffSessionEntity.prototype, "sessionInfo", void 0);
fleet_staff_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return FleetStaffEntity;
    }, function(fleet) {
        return fleet.sessions;
    }),
    fleet_staff_session_entity_ts_metadata("design:type", typeof FleetStaffEntity === "undefined" ? Object : FleetStaffEntity)
], FleetStaffSessionEntity.prototype, "fleetStaff", void 0);
fleet_staff_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_staff_session_entity_ts_metadata("design:type", Number)
], FleetStaffSessionEntity.prototype, "fleetStaffId", void 0);
FleetStaffSessionEntity = fleet_staff_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('fleet_staff_session')
], FleetStaffSessionEntity);

;// ../../libs/database/src/lib/entities/taxi/fleet-staff.entity.ts
function fleet_staff_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function fleet_staff_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var FleetStaffEntity = function FleetStaffEntity() {
    "use strict";
};
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    fleet_staff_entity_ts_metadata("design:type", Number)
], FleetStaffEntity.prototype, "id", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    fleet_staff_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], FleetStaffEntity.prototype, "registeredAt", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "firstName", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "lastName", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)('bigint'),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "phoneNumber", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)('bigint'),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "mobileNumber", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    fleet_staff_entity_ts_metadata("design:type", Boolean)
], FleetStaffEntity.prototype, "isBlocked", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "email", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_staff_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], FleetStaffEntity.prototype, "lastActivityAt", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)('varchar', {
        nullable: true
    }),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "address", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "userName", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "password", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: FleetStaffPermissionOrder
    }),
    fleet_staff_entity_ts_metadata("design:type", typeof FleetStaffPermissionOrder === "undefined" ? Object : FleetStaffPermissionOrder)
], FleetStaffEntity.prototype, "permissionOrder", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: FleetStaffPermissionFinancial
    }),
    fleet_staff_entity_ts_metadata("design:type", typeof FleetStaffPermissionFinancial === "undefined" ? Object : FleetStaffPermissionFinancial)
], FleetStaffEntity.prototype, "permissionFinancial", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FleetStaffSessionEntity;
    }, function(device) {
        return device.fleetStaff;
    }),
    fleet_staff_entity_ts_metadata("design:type", Array)
], FleetStaffEntity.prototype, "sessions", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return FleetEntity;
    }, function(fleet) {
        return fleet.staffs;
    }),
    fleet_staff_entity_ts_metadata("design:type", typeof FleetEntity === "undefined" ? Object : FleetEntity)
], FleetStaffEntity.prototype, "fleet", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_staff_entity_ts_metadata("design:type", Number)
], FleetStaffEntity.prototype, "fleetId", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    fleet_staff_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], FleetStaffEntity.prototype, "profileImage", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_staff_entity_ts_metadata("design:type", Number)
], FleetStaffEntity.prototype, "profileImageId", void 0);
FleetStaffEntity = fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Entity)('fleet_staff')
], FleetStaffEntity);

;// ../../libs/database/src/lib/entities/taxi/fleet.entity.ts
function fleet_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function fleet_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}










var FleetEntity = function FleetEntity() {
    "use strict";
};
fleet_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    fleet_entity_ts_metadata("design:type", Number)
], FleetEntity.prototype, "id", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_entity_ts_metadata("design:type", String)
], FleetEntity.prototype, "name", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)('bigint'),
    fleet_entity_ts_metadata("design:type", String)
], FleetEntity.prototype, "phoneNumber", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], FleetEntity.prototype, "createdAt", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.UpdateDateColumn)({
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], FleetEntity.prototype, "updatedAt", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)({
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], FleetEntity.prototype, "deletedAt", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_entity_ts_metadata("design:type", String)
], FleetEntity.prototype, "accountNumber", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)('bigint'),
    fleet_entity_ts_metadata("design:type", String)
], FleetEntity.prototype, "mobileNumber", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    fleet_entity_ts_metadata("design:type", Boolean)
], FleetEntity.prototype, "isBlocked", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        default: 0
    }),
    fleet_entity_ts_metadata("design:type", Number)
], FleetEntity.prototype, "commissionSharePercent", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0
    }),
    fleet_entity_ts_metadata("design:type", Number)
], FleetEntity.prototype, "commissionShareFlat", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)('varchar', {
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", String)
], FleetEntity.prototype, "address", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", String)
], FleetEntity.prototype, "userName", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", String)
], FleetEntity.prototype, "password", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, {
        nullable: true
    }),
    (0,external_typeorm_.JoinColumn)(),
    fleet_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], FleetEntity.prototype, "profilePicture", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", Number)
], FleetEntity.prototype, "profilePictureId", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", Number)
], FleetEntity.prototype, "feeMultiplier", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)('polygon', {
        transformer: new PolygonTransformer(),
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", Array)
], FleetEntity.prototype, "exclusivityAreas", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.fleet;
    }),
    fleet_entity_ts_metadata("design:type", Array)
], FleetEntity.prototype, "drivers", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FleetWalletEntity;
    }, function(wallet) {
        return wallet.fleet;
    }),
    fleet_entity_ts_metadata("design:type", Array)
], FleetEntity.prototype, "wallet", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FleetTransactionEntity;
    }, function(fleetTransaction) {
        return fleetTransaction.fleet;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'RESTRICT'
    }),
    fleet_entity_ts_metadata("design:type", Array)
], FleetEntity.prototype, "transactions", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.fleet;
    }),
    fleet_entity_ts_metadata("design:type", Array)
], FleetEntity.prototype, "operators", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ZonePriceEntity;
    }, function(zonePrice) {
        return zonePrice.fleets;
    }),
    fleet_entity_ts_metadata("design:type", typeof ZonePriceEntity === "undefined" ? Object : ZonePriceEntity)
], FleetEntity.prototype, "zonePrices", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FleetStaffEntity;
    }, function(fleetStaff) {
        return fleetStaff.fleet;
    }),
    fleet_entity_ts_metadata("design:type", Array)
], FleetEntity.prototype, "staffs", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(request) {
        return request.fleet;
    }),
    fleet_entity_ts_metadata("design:type", Array)
], FleetEntity.prototype, "requests", void 0);
FleetEntity = fleet_entity_ts_decorate([
    (0,external_typeorm_.Entity)('fleet')
], FleetEntity);

;// ../../libs/database/src/lib/entities/taxi/zone-price-category.entity.ts
function zone_price_category_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function zone_price_category_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ZonePriceCategoryEntity = function ZonePriceCategoryEntity() {
    "use strict";
};
zone_price_category_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    zone_price_category_entity_ts_metadata("design:type", Number)
], ZonePriceCategoryEntity.prototype, "id", void 0);
zone_price_category_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    zone_price_category_entity_ts_metadata("design:type", String)
], ZonePriceCategoryEntity.prototype, "name", void 0);
zone_price_category_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ZonePriceEntity;
    }, function(zonePrice) {
        return zonePrice.zonePriceCategory;
    }),
    zone_price_category_entity_ts_metadata("design:type", Array)
], ZonePriceCategoryEntity.prototype, "zonePrices", void 0);
ZonePriceCategoryEntity = zone_price_category_entity_ts_decorate([
    (0,external_typeorm_.Entity)('zone_price_category')
], ZonePriceCategoryEntity);

;// ../../libs/database/src/lib/entities/taxi/zone-price.entity.ts
function zone_price_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function zone_price_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






var ZonePriceEntity = function ZonePriceEntity() {
    "use strict";
};
zone_price_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    zone_price_entity_ts_metadata("design:type", Number)
], ZonePriceEntity.prototype, "id", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    zone_price_entity_ts_metadata("design:type", String)
], ZonePriceEntity.prototype, "name", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.Column)('polygon', {
        transformer: new PolygonTransformer()
    }),
    zone_price_entity_ts_metadata("design:type", Array)
], ZonePriceEntity.prototype, "from", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.Column)('polygon', {
        transformer: new PolygonTransformer()
    }),
    zone_price_entity_ts_metadata("design:type", Array)
], ZonePriceEntity.prototype, "to", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    zone_price_entity_ts_metadata("design:type", Number)
], ZonePriceEntity.prototype, "cost", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.Column)('simple-array', {
        nullable: true,
        transformer: new TimeMultiplierTransformer()
    }),
    zone_price_entity_ts_metadata("design:type", Array)
], ZonePriceEntity.prototype, "timeMultipliers", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return FleetEntity;
    }, function(fleet) {
        return fleet.zonePrices;
    }),
    (0,external_typeorm_.JoinTable)(),
    zone_price_entity_ts_metadata("design:type", Array)
], ZonePriceEntity.prototype, "fleets", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.zonePrices;
    }),
    (0,external_typeorm_.JoinTable)(),
    zone_price_entity_ts_metadata("design:type", Array)
], ZonePriceEntity.prototype, "services", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ZonePriceCategoryEntity;
    }, function(zonePriceCategory) {
        return zonePriceCategory.zonePrices;
    }),
    zone_price_entity_ts_metadata("design:type", typeof ZonePriceCategoryEntity === "undefined" ? Object : ZonePriceCategoryEntity)
], ZonePriceEntity.prototype, "zonePriceCategory", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    zone_price_entity_ts_metadata("design:type", Number)
], ZonePriceEntity.prototype, "zonePriceCategoryId", void 0);
ZonePriceEntity = zone_price_entity_ts_decorate([
    (0,external_typeorm_.Entity)('zone_price')
], ZonePriceEntity);

;// ../../libs/database/src/lib/transformers/weekday-multiplier.transformer.ts
var WeekdayMultiplierTransformer = /*#__PURE__*/ function() {
    "use strict";
    function WeekdayMultiplierTransformer() {}
    var _proto = WeekdayMultiplierTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(row) {
            return row.weekday + "|" + row.multiply;
        });
    };
    _proto.from = function from(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(str) {
            return {
                weekday: str.split('|')[0],
                multiply: parseFloat(str.split('|')[1])
            };
        });
    };
    return WeekdayMultiplierTransformer;
}();

;// ../../libs/database/src/lib/transformers/date-range-multiplier.transformer.ts
var DateRangeMultiplierTransformer = /*#__PURE__*/ function() {
    "use strict";
    function DateRangeMultiplierTransformer() {}
    var _proto = DateRangeMultiplierTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(row) {
            return row.startDate + "-" + row.endDate + "|" + row.multiply;
        });
    };
    _proto.from = function from(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(str) {
            return {
                startDate: parseInt(str.split('|')[0].split('-')[0]),
                endDate: parseInt(str.split('|')[0].split('-')[1]),
                multiply: parseFloat(str.split('|')[1])
            };
        });
    };
    return DateRangeMultiplierTransformer;
}();

;// ../../libs/database/src/lib/entities/enums/package-size.enum.ts

var DeliveryPackageSize;
(function(DeliveryPackageSize) {
    DeliveryPackageSize["Small"] = "SMALL";
    DeliveryPackageSize["Medium"] = "MEDIUM";
    DeliveryPackageSize["Large"] = "LARGE";
})(DeliveryPackageSize || (DeliveryPackageSize = {}));
(0,graphql_.registerEnumType)(DeliveryPackageSize, {
    name: 'DeliveryPackageSize'
});

;// ../../libs/database/src/lib/entities/taxi/driver-services-service.entity.ts
function driver_services_service_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_services_service_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var DriverServicesServiceEntity = function DriverServicesServiceEntity() {
    "use strict";
};
driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        primary: true
    }),
    driver_services_service_entity_ts_metadata("design:type", Number)
], DriverServicesServiceEntity.prototype, "driverId", void 0);
driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.enabledServices;
    }, {
        onDelete: 'CASCADE'
    }),
    driver_services_service_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], DriverServicesServiceEntity.prototype, "driver", void 0);
driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        primary: true
    }),
    driver_services_service_entity_ts_metadata("design:type", Number)
], DriverServicesServiceEntity.prototype, "serviceId", void 0);
driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.driversWithService;
    }, {
        onDelete: 'CASCADE'
    }),
    driver_services_service_entity_ts_metadata("design:type", typeof ServiceEntity === "undefined" ? Object : ServiceEntity)
], DriverServicesServiceEntity.prototype, "service", void 0);
driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    driver_services_service_entity_ts_metadata("design:type", Boolean)
], DriverServicesServiceEntity.prototype, "driverEnabled", void 0);
driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    driver_services_service_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverServicesServiceEntity.prototype, "createdAt", void 0);
driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_services_service_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverServicesServiceEntity.prototype, "updatedAt", void 0);
DriverServicesServiceEntity = driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_services_service')
], DriverServicesServiceEntity);

;// ../../libs/database/src/lib/entities/taxi/enums/taxi-order-type.enum.ts

var TaxiOrderType;
(function(TaxiOrderType) {
    TaxiOrderType["Ride"] = "ride";
    TaxiOrderType["Rideshare"] = "rideshare";
    TaxiOrderType["ParcelDelivery"] = "parcelDelivery";
    TaxiOrderType["FoodDelivery"] = "foodDelivery";
    TaxiOrderType["ShopDelivery"] = "shopDelivery";
})(TaxiOrderType || (TaxiOrderType = {}));
(0,graphql_.registerEnumType)(TaxiOrderType, {
    name: 'TaxiOrderType',
    description: 'Different types of taxi orders, including ride, rideshare, parcel delivery, food delivery, and shop delivery.'
});

;// ../../libs/database/src/lib/entities/taxi/service.entity.ts
function service_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function service_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

















var ServiceEntity = function ServiceEntity() {
    "use strict";
};
service_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "id", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ServiceCategoryEntity;
    }, function(category) {
        return category.services;
    }, {
        onDelete: 'CASCADE'
    }),
    service_entity_ts_metadata("design:type", typeof ServiceCategoryEntity === "undefined" ? Object : ServiceCategoryEntity)
], ServiceEntity.prototype, "category", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "categoryId", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: TaxiOrderType,
        default: [
            TaxiOrderType.Ride
        ]
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "orderTypes", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'title'
    }),
    service_entity_ts_metadata("design:type", String)
], ServiceEntity.prototype, "name", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    service_entity_ts_metadata("design:type", String)
], ServiceEntity.prototype, "description", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('smallint', {
        nullable: true
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "personCapacity", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "baseFare", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "perHundredMeters", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "perMinuteDrive", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "perMinuteWait", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "minimumFee", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 10000
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "searchRadius", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'enum',
        enum: ServicePaymentMethod,
        default: ServicePaymentMethod.CashCredit
    }),
    service_entity_ts_metadata("design:type", typeof ServicePaymentMethod === "undefined" ? Object : ServicePaymentMethod)
], ServiceEntity.prototype, "paymentMethod", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DeliveryPackageSize,
        nullable: true
    }),
    service_entity_ts_metadata("design:type", typeof DeliveryPackageSize === "undefined" ? Object : DeliveryPackageSize)
], ServiceEntity.prototype, "maximumCarryPackageSize", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "deliveryFeePerPickup", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ServiceDistanceFeeMode,
        default: ServiceDistanceFeeMode.PickupToDestination
    }),
    service_entity_ts_metadata("design:type", typeof ServiceDistanceFeeMode === "undefined" ? Object : ServiceDistanceFeeMode)
], ServiceEntity.prototype, "distanceFeeMode", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('time', {
        default: '00:00'
    }),
    service_entity_ts_metadata("design:type", String)
], ServiceEntity.prototype, "availableTimeFrom", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('time', {
        default: '23:59'
    }),
    service_entity_ts_metadata("design:type", String)
], ServiceEntity.prototype, "availableTimeTo", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0,
        name: 'maxDestinationDistance'
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "maximumDestinationDistance", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        default: 0
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "prepayPercent", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    service_entity_ts_metadata("design:type", Boolean)
], ServiceEntity.prototype, "twoWayAvailable", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "cancellationTotalFee", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "cancellationDriverShare", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        default: 0
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "providerSharePercent", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "providerShareFlat", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        precision: 10,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "roundingFactor", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, function(media) {
        return media.service;
    }),
    (0,external_typeorm_.JoinColumn)(),
    service_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], ServiceEntity.prototype, "media", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "mediaId", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('simple-array', {
        nullable: true,
        transformer: new TimeMultiplierTransformer()
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "timeMultipliers", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('simple-array', {
        nullable: true,
        transformer: new DistanceMultiplierTransformer()
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "distanceMultipliers", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('simple-array', {
        nullable: true,
        transformer: new DateRangeMultiplierTransformer()
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "dateRangeMultipliers", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('simple-array', {
        nullable: true,
        transformer: new WeekdayMultiplierTransformer()
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "weekdayMultipliers", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    service_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ServiceEntity.prototype, "deletedAt", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 1.0
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "touristMultiplier", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverServicesServiceEntity;
    }, function(driver) {
        return driver.service;
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "driversWithService", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return CouponEntity;
    }, function(coupon) {
        return coupon.allowedServices;
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "allowedCoupons", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return RegionEntity;
    }, function(region) {
        return region.services;
    }),
    (0,external_typeorm_.JoinTable)(),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "regions", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.service;
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "requests", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ServiceOptionEntity;
    }, function(serviceOption) {
        return serviceOption.services;
    }),
    (0,external_typeorm_.JoinTable)(),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "options", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ZonePriceEntity;
    }, function(zonePrice) {
        return zonePrice.fleets;
    }),
    service_entity_ts_metadata("design:type", typeof ZonePriceEntity === "undefined" ? Object : ZonePriceEntity)
], ServiceEntity.prototype, "zonePrices", void 0);
ServiceEntity = service_entity_ts_decorate([
    (0,external_typeorm_.Entity)('service')
], ServiceEntity);

;// ../../libs/database/src/lib/entities/media.entity.ts
function media_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function media_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}









var MediaEntity = function MediaEntity() {
    "use strict";
};
media_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    media_entity_ts_metadata("design:type", Number)
], MediaEntity.prototype, "id", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.Column)('varchar'),
    media_entity_ts_metadata("design:type", String)
], MediaEntity.prototype, "address", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.Column)('longtext', {
        nullable: true
    }),
    media_entity_ts_metadata("design:type", String)
], MediaEntity.prototype, "base64", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.media;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], MediaEntity.prototype, "driver", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.documents;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], MediaEntity.prototype, "driverDocument", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    media_entity_ts_metadata("design:type", Number)
], MediaEntity.prototype, "driverDocumentId", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.media;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], MediaEntity.prototype, "operator", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return AnnouncementEntity;
    }, function(announcement) {
        return announcement.media;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof AnnouncementEntity === "undefined" ? Object : AnnouncementEntity)
], MediaEntity.prototype, "announcement", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.media;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", Array)
], MediaEntity.prototype, "rider", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.media;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", Array)
], MediaEntity.prototype, "service", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.media;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], MediaEntity.prototype, "paymentGateway", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.media;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], MediaEntity.prototype, "payoutMethod", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkSpotEntity;
    }, function(parkSpot) {
        return parkSpot.images;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof ParkSpotEntity === "undefined" ? Object : ParkSpotEntity)
], MediaEntity.prototype, "parkSpot", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    media_entity_ts_metadata("design:type", Number)
], MediaEntity.prototype, "parkSpotId", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.uploads;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], MediaEntity.prototype, "uploadedByDriver", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    media_entity_ts_metadata("design:type", Number)
], MediaEntity.prototype, "uploadedByDriverId", void 0);
MediaEntity = media_entity_ts_decorate([
    (0,external_typeorm_.Entity)('media')
], MediaEntity);

;// ../../libs/database/src/lib/entities/rider-wallet.entity.ts
function rider_wallet_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function rider_wallet_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var RiderWalletEntity = function RiderWalletEntity() {
    "use strict";
};
rider_wallet_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    rider_wallet_entity_ts_metadata("design:type", Number)
], RiderWalletEntity.prototype, "id", void 0);
rider_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0.0,
        name: 'amount'
    }),
    rider_wallet_entity_ts_metadata("design:type", Number)
], RiderWalletEntity.prototype, "balance", void 0);
rider_wallet_entity_ts_decorate([
    (0,external_typeorm_.Index)(),
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    rider_wallet_entity_ts_metadata("design:type", String)
], RiderWalletEntity.prototype, "currency", void 0);
rider_wallet_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.wallets;
    }),
    rider_wallet_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], RiderWalletEntity.prototype, "rider", void 0);
rider_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    rider_wallet_entity_ts_metadata("design:type", Number)
], RiderWalletEntity.prototype, "riderId", void 0);
RiderWalletEntity = rider_wallet_entity_ts_decorate([
    (0,external_typeorm_.Entity)('rider_wallet')
], RiderWalletEntity);

;// ../../libs/database/src/lib/entities/taxi/rider-review.entity.ts
function rider_review_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function rider_review_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var RiderReviewEntity = function RiderReviewEntity() {
    "use strict";
};
rider_review_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    rider_review_entity_ts_metadata("design:type", Number)
], RiderReviewEntity.prototype, "id", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint'),
    rider_review_entity_ts_metadata("design:type", Number)
], RiderReviewEntity.prototype, "score", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'review',
        nullable: true
    }),
    rider_review_entity_ts_metadata("design:type", String)
], RiderReviewEntity.prototype, "description", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.reviewsForRider;
    }),
    rider_review_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], RiderReviewEntity.prototype, "rider", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    rider_review_entity_ts_metadata("design:type", Number)
], RiderReviewEntity.prototype, "riderId", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.reviewsByDriver;
    }),
    rider_review_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], RiderReviewEntity.prototype, "driver", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    rider_review_entity_ts_metadata("design:type", Number)
], RiderReviewEntity.prototype, "driverId", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    rider_review_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], RiderReviewEntity.prototype, "reviewTimestamp", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.driverReviewForRider;
    }),
    (0,external_typeorm_.JoinColumn)(),
    rider_review_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], RiderReviewEntity.prototype, "request", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    rider_review_entity_ts_metadata("design:type", Number)
], RiderReviewEntity.prototype, "orderId", void 0);
RiderReviewEntity = rider_review_entity_ts_decorate([
    (0,external_typeorm_.Entity)('rider_review')
], RiderReviewEntity);

;// ../../libs/database/src/lib/entities/customer-session.entity.ts
function customer_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function customer_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var CustomerSessionEntity = function CustomerSessionEntity() {
    "use strict";
};
customer_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    customer_session_entity_ts_metadata("design:type", Number)
], CustomerSessionEntity.prototype, "id", void 0);
customer_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return SessionInfo;
    }),
    customer_session_entity_ts_metadata("design:type", typeof SessionInfo === "undefined" ? Object : SessionInfo)
], CustomerSessionEntity.prototype, "sessionInfo", void 0);
customer_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.sessions;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    customer_session_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], CustomerSessionEntity.prototype, "customer", void 0);
customer_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    customer_session_entity_ts_metadata("design:type", Number)
], CustomerSessionEntity.prototype, "customerId", void 0);
CustomerSessionEntity = customer_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('customer_session')
], CustomerSessionEntity);

;// ../../libs/database/src/lib/entities/customer-note.entity.ts
function customer_note_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function customer_note_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var CustomerNoteEntity = function CustomerNoteEntity() {
    "use strict";
};
customer_note_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    customer_note_entity_ts_metadata("design:type", Number)
], CustomerNoteEntity.prototype, "id", void 0);
customer_note_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    customer_note_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CustomerNoteEntity.prototype, "createdAt", void 0);
customer_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.notes;
    }),
    customer_note_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], CustomerNoteEntity.prototype, "customer", void 0);
customer_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    customer_note_entity_ts_metadata("design:type", Number)
], CustomerNoteEntity.prototype, "customerId", void 0);
customer_note_entity_ts_decorate([
    (0,external_typeorm_.Column)('text'),
    customer_note_entity_ts_metadata("design:type", String)
], CustomerNoteEntity.prototype, "note", void 0);
customer_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.customerNotes;
    }),
    customer_note_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], CustomerNoteEntity.prototype, "createdBy", void 0);
customer_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    customer_note_entity_ts_metadata("design:type", Number)
], CustomerNoteEntity.prototype, "createdById", void 0);
CustomerNoteEntity = customer_note_entity_ts_decorate([
    (0,external_typeorm_.Entity)('customer_note')
], CustomerNoteEntity);

;// ../../libs/database/src/lib/entities/campaign.entity.ts
function campaign_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function campaign_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var CampaignEntity = function CampaignEntity() {
    "use strict";
};
campaign_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    campaign_entity_ts_metadata("design:type", Number)
], CampaignEntity.prototype, "id", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    campaign_entity_ts_metadata("design:type", String)
], CampaignEntity.prototype, "name", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    campaign_entity_ts_metadata("design:type", String)
], CampaignEntity.prototype, "description", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: AppType,
        default: [
            AppType.Taxi
        ]
    }),
    campaign_entity_ts_metadata("design:type", Array)
], CampaignEntity.prototype, "appType", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 0
    }),
    campaign_entity_ts_metadata("design:type", Number)
], CampaignEntity.prototype, "manyUsersCanUse", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 1
    }),
    campaign_entity_ts_metadata("design:type", Number)
], CampaignEntity.prototype, "manyTimesUserCanUse", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    campaign_entity_ts_metadata("design:type", Number)
], CampaignEntity.prototype, "minimumCost", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    campaign_entity_ts_metadata("design:type", Number)
], CampaignEntity.prototype, "maximumCost", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'startTimestamp'
    }),
    campaign_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CampaignEntity.prototype, "startAt", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'expirationTimestamp',
        nullable: true
    }),
    campaign_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CampaignEntity.prototype, "expireAt", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        default: 0
    }),
    campaign_entity_ts_metadata("design:type", Number)
], CampaignEntity.prototype, "discountPercent", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    campaign_entity_ts_metadata("design:type", Number)
], CampaignEntity.prototype, "discountFlat", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    campaign_entity_ts_metadata("design:type", Boolean)
], CampaignEntity.prototype, "isEnabled", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 'USD'
    }),
    campaign_entity_ts_metadata("design:type", String)
], CampaignEntity.prototype, "currency", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    campaign_entity_ts_metadata("design:type", Boolean)
], CampaignEntity.prototype, "isFirstTravelOnly", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.allowedCoupons;
    }),
    (0,external_typeorm_.JoinTable)({
        name: 'campaign_services_service'
    }),
    campaign_entity_ts_metadata("design:type", Array)
], CampaignEntity.prototype, "allowedServices", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CampaignCodeEntity;
    }, function(code) {
        return code.campaign;
    }),
    campaign_entity_ts_metadata("design:type", Array)
], CampaignEntity.prototype, "codes", void 0);
CampaignEntity = campaign_entity_ts_decorate([
    (0,external_typeorm_.Entity)('campaign')
], CampaignEntity);

;// ../../libs/database/src/lib/entities/campaign-code.entity.ts
function campaign_code_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function campaign_code_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var CampaignCodeEntity = function CampaignCodeEntity() {
    "use strict";
};
campaign_code_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    campaign_code_entity_ts_metadata("design:type", Number)
], CampaignCodeEntity.prototype, "id", void 0);
campaign_code_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    campaign_code_entity_ts_metadata("design:type", String)
], CampaignCodeEntity.prototype, "code", void 0);
campaign_code_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.campaignCodes;
    }),
    campaign_code_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], CampaignCodeEntity.prototype, "customer", void 0);
campaign_code_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    campaign_code_entity_ts_metadata("design:type", Number)
], CampaignCodeEntity.prototype, "customerId", void 0);
campaign_code_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.campaignCode;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    campaign_code_entity_ts_metadata("design:type", Array)
], CampaignCodeEntity.prototype, "orders", void 0);
campaign_code_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CampaignEntity;
    }, function(campaign) {
        return campaign.codes;
    }),
    campaign_code_entity_ts_metadata("design:type", typeof CampaignEntity === "undefined" ? Object : CampaignEntity)
], CampaignCodeEntity.prototype, "campaign", void 0);
campaign_code_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    campaign_code_entity_ts_metadata("design:type", Number)
], CampaignCodeEntity.prototype, "campaignId", void 0);
CampaignCodeEntity = campaign_code_entity_ts_decorate([
    (0,external_typeorm_.Entity)('campaign_code')
], CampaignCodeEntity);

;// ../../libs/database/src/lib/entities/parking/parking-wallet.entity.ts
function parking_wallet_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_wallet_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ParkingWalletEntity = function ParkingWalletEntity() {
    "use strict";
};
parking_wallet_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_wallet_entity_ts_metadata("design:type", Number)
], ParkingWalletEntity.prototype, "id", void 0);
parking_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0
    }),
    parking_wallet_entity_ts_metadata("design:type", Number)
], ParkingWalletEntity.prototype, "balance", void 0);
parking_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    (0,external_typeorm_.Index)(),
    parking_wallet_entity_ts_metadata("design:type", String)
], ParkingWalletEntity.prototype, "currency", void 0);
parking_wallet_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.parkingWallets;
    }),
    parking_wallet_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkingWalletEntity.prototype, "customer", void 0);
parking_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_wallet_entity_ts_metadata("design:type", Number)
], ParkingWalletEntity.prototype, "customerId", void 0);
ParkingWalletEntity = parking_wallet_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_wallet')
], ParkingWalletEntity);

;// ../../libs/database/src/lib/entities/parking/parking-login-session.entity.ts
function parking_login_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_login_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ParkingLoginSessionEntity = function ParkingLoginSessionEntity() {
    "use strict";
};
parking_login_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_login_session_entity_ts_metadata("design:type", Number)
], ParkingLoginSessionEntity.prototype, "id", void 0);
parking_login_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return SessionInfo;
    }),
    parking_login_session_entity_ts_metadata("design:type", typeof SessionInfo === "undefined" ? Object : SessionInfo)
], ParkingLoginSessionEntity.prototype, "sessionInfo", void 0);
parking_login_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.parkingLoginSessions;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    parking_login_session_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkingLoginSessionEntity.prototype, "customer", void 0);
parking_login_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_login_session_entity_ts_metadata("design:type", Number)
], ParkingLoginSessionEntity.prototype, "customerId", void 0);
ParkingLoginSessionEntity = parking_login_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_login_session')
], ParkingLoginSessionEntity);

;// ../../libs/database/src/lib/entities/customer.entity.ts
function customer_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function customer_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
























var CustomerEntity = function CustomerEntity() {
    "use strict";
};
customer_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    customer_entity_ts_metadata("design:type", Number)
], CustomerEntity.prototype, "id", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RiderStatus,
        default: RiderStatus.Enabled
    }),
    customer_entity_ts_metadata("design:type", typeof RiderStatus === "undefined" ? Object : RiderStatus)
], CustomerEntity.prototype, "status", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "firstName", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "lastName", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'varchar',
        length: 5
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "countryIso", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)('bigint', {
        unique: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "mobileNumber", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CustomerEntity.prototype, "registrationTimestamp", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CustomerEntity.prototype, "lastActivityAt", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "email", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: Gender,
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", typeof Gender === "undefined" ? Object : Gender)
], CustomerEntity.prototype, "gender", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)('varchar', {
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "address", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", Boolean)
], CustomerEntity.prototype, "isResident", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "idNumber", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "password", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "notificationPlayerId", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    customer_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CustomerEntity.prototype, "deletedAt", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return PayoutAccountEntity;
    }, function(payoutAccount) {
        return payoutAccount.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "payoutAccounts", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return PayoutAccountEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    customer_entity_ts_metadata("design:type", typeof PayoutAccountEntity === "undefined" ? Object : PayoutAccountEntity)
], CustomerEntity.prototype, "defaultPayoutAccount", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", Number)
], CustomerEntity.prototype, "defaultPayoutAccountId", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderAddressEntity;
    }, function(address) {
        return address.rider;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "addresses", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, function(media) {
        return media.rider;
    }),
    (0,external_typeorm_.JoinColumn)(),
    customer_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], CustomerEntity.prototype, "media", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", Number)
], CustomerEntity.prototype, "mediaId", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", Number)
], CustomerEntity.prototype, "presetAvatarNumber", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.rider;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "orders", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderWalletEntity;
    }, function(wallet) {
        return wallet.rider;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "wallets", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.ridersFavorited;
    }),
    (0,external_typeorm_.JoinTable)(),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "favoriteDrivers", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.ridersBlocked;
    }),
    (0,external_typeorm_.JoinTable)(),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "blockedDrivers", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(riderTransaction) {
        return riderTransaction.rider;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'RESTRICT'
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "transactions", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingTransactionEntity;
    }, function(transaction) {
        return transaction.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "parkingTransactions", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return CouponEntity;
    }, function(coupon) {
        return coupon.riders;
    }),
    (0,external_typeorm_.JoinTable)(),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "coupons", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SavedPaymentMethodEntity;
    }, function(savedPaymentMethod) {
        return savedPaymentMethod.rider;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "savedPaymentMethods", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return SavedPaymentMethodEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    customer_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], CustomerEntity.prototype, "defaultSavedPaymentMethod", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", Number)
], CustomerEntity.prototype, "defaultSavedPaymentMethodId", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderReviewEntity;
    }, function(review) {
        return review.rider;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "reviewsForRider", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.carOwner;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "orderedParkOrders", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.spotOwner;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "ownedParkOrders", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CustomerSessionEntity;
    }, function(session) {
        return session.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "sessions", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingLoginSessionEntity;
    }, function(session) {
        return session.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "parkingLoginSessions", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CustomerNoteEntity;
    }, function(note) {
        return note.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "notes", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderEntity;
    }, function(shopOrder) {
        return shopOrder.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "shopOrders", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopFeedbackEntity;
    }, function(feedback) {
        return feedback.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "reviews", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkSpotEntity;
    }, function(parkSpot) {
        return parkSpot.owner;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "parkSpots", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CampaignCodeEntity;
    }, function(campaignCode) {
        return campaignCode.customer;
    }),
    customer_entity_ts_metadata("design:type", typeof CampaignCodeEntity === "undefined" ? Object : CampaignCodeEntity)
], CustomerEntity.prototype, "campaignCodes", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingWalletEntity;
    }, function(parkingWallet) {
        return parkingWallet.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "parkingWallets", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CustomerFavoriteProductEntity;
    }, function(favoriteItem) {
        return favoriteItem.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "favoriteProducts", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    customer_entity_ts_metadata("design:type", Boolean)
], CustomerEntity.prototype, "pushNotificationShopOrderStatus", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    customer_entity_ts_metadata("design:type", Boolean)
], CustomerEntity.prototype, "pushNotificationShopSupportRequest", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    customer_entity_ts_metadata("design:type", Boolean)
], CustomerEntity.prototype, "pushNotificationShopAnnouncements", void 0);
CustomerEntity = customer_entity_ts_decorate([
    (0,external_typeorm_.Entity)('rider')
], CustomerEntity);

;// ../../libs/database/src/lib/entities/coupon.entity.ts
function coupon_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function coupon_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var CouponEntity = function CouponEntity() {
    "use strict";
};
coupon_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "id", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        unique: true
    }),
    coupon_entity_ts_metadata("design:type", String)
], CouponEntity.prototype, "code", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    coupon_entity_ts_metadata("design:type", String)
], CouponEntity.prototype, "title", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    coupon_entity_ts_metadata("design:type", String)
], CouponEntity.prototype, "description", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 0
    }),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "manyUsersCanUse", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 1
    }),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "manyTimesUserCanUse", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "minimumCost", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "maximumCost", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'startTimestamp'
    }),
    coupon_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CouponEntity.prototype, "startAt", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'expirationTimestamp',
        nullable: true
    }),
    coupon_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CouponEntity.prototype, "expireAt", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        default: 0
    }),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "discountPercent", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "discountFlat", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "creditGift", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    coupon_entity_ts_metadata("design:type", Boolean)
], CouponEntity.prototype, "isEnabled", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    coupon_entity_ts_metadata("design:type", Boolean)
], CouponEntity.prototype, "isFirstTravelOnly", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.allowedCoupons;
    }),
    (0,external_typeorm_.JoinTable)({
        name: 'coupon_services_service'
    }),
    coupon_entity_ts_metadata("design:type", Array)
], CouponEntity.prototype, "allowedServices", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.coupons;
    }),
    coupon_entity_ts_metadata("design:type", Array)
], CouponEntity.prototype, "riders", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.coupon;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    coupon_entity_ts_metadata("design:type", Array)
], CouponEntity.prototype, "orders", void 0);
CouponEntity = coupon_entity_ts_decorate([
    (0,external_typeorm_.Entity)('coupon')
], CouponEntity);

;// ../../libs/database/src/lib/entities/enums/order-status.enum.ts

var OrderStatus;
(function(OrderStatus) {
    OrderStatus["Requested"] = "Requested";
    OrderStatus["NotFound"] = "NotFound";
    OrderStatus["NoCloseFound"] = "NoCloseFound";
    OrderStatus["Found"] = "Found";
    OrderStatus["DriverAccepted"] = "DriverAccepted";
    OrderStatus["Arrived"] = "Arrived";
    OrderStatus["WaitingForPrePay"] = "WaitingForPrePay";
    OrderStatus["DriverCanceled"] = "DriverCanceled";
    OrderStatus["RiderCanceled"] = "RiderCanceled";
    OrderStatus["Started"] = "Started";
    OrderStatus["WaitingForPostPay"] = "WaitingForPostPay";
    OrderStatus["WaitingForReview"] = "WaitingForReview";
    OrderStatus["Finished"] = "Finished";
    OrderStatus["Booked"] = "Booked";
    OrderStatus["Expired"] = "Expired";
})(OrderStatus || (OrderStatus = {}));
(0,graphql_.registerEnumType)(OrderStatus, {
    name: 'OrderStatus'
});

;// ../../libs/database/src/lib/entities/taxi/feedback-parameter.entity.ts
function feedback_parameter_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function feedback_parameter_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var FeedbackParameterEntity = function FeedbackParameterEntity() {
    "use strict";
};
feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    feedback_parameter_entity_ts_metadata("design:type", Number)
], FeedbackParameterEntity.prototype, "id", void 0);
feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    feedback_parameter_entity_ts_metadata("design:type", String)
], FeedbackParameterEntity.prototype, "title", void 0);
feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    feedback_parameter_entity_ts_metadata("design:type", Boolean)
], FeedbackParameterEntity.prototype, "isGood", void 0);
feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return FeedbackEntity;
    }, function(feedback) {
        return feedback.parameters;
    }),
    (0,external_typeorm_.JoinTable)(),
    feedback_parameter_entity_ts_metadata("design:type", Array)
], FeedbackParameterEntity.prototype, "feedbacks", void 0);
FeedbackParameterEntity = feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Entity)('review_parameter')
], FeedbackParameterEntity);

;// ../../libs/database/src/lib/entities/taxi/feedback.entity.ts
function feedback_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function feedback_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var FeedbackEntity = function FeedbackEntity() {
    "use strict";
};
feedback_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    feedback_entity_ts_metadata("design:type", Number)
], FeedbackEntity.prototype, "id", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    feedback_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], FeedbackEntity.prototype, "reviewTimestamp", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint'),
    feedback_entity_ts_metadata("design:type", Number)
], FeedbackEntity.prototype, "score", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'review',
        nullable: true
    }),
    feedback_entity_ts_metadata("design:type", String)
], FeedbackEntity.prototype, "description", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.feedbacks;
    }),
    feedback_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], FeedbackEntity.prototype, "driver", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    feedback_entity_ts_metadata("design:type", Number)
], FeedbackEntity.prototype, "driverId", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.review;
    }),
    (0,external_typeorm_.JoinColumn)(),
    feedback_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], FeedbackEntity.prototype, "request", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    feedback_entity_ts_metadata("design:type", Number)
], FeedbackEntity.prototype, "requestId", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return FeedbackParameterEntity;
    }, function(feedbackParameter) {
        return feedbackParameter.feedbacks;
    }),
    feedback_entity_ts_metadata("design:type", Array)
], FeedbackEntity.prototype, "parameters", void 0);
FeedbackEntity = feedback_entity_ts_decorate([
    (0,external_typeorm_.Entity)('request_review')
], FeedbackEntity);

;// ../../libs/database/src/lib/entities/enums/message-status.enum.ts

var MessageStatus;
(function(MessageStatus) {
    MessageStatus["Sent"] = "sent";
    MessageStatus["Delivered"] = "delivered";
    MessageStatus["Seen"] = "seen";
})(MessageStatus || (MessageStatus = {}));
(0,graphql_.registerEnumType)(MessageStatus, {
    name: 'MessageStatus'
});

;// ../../libs/database/src/lib/entities/taxi/request-message.entity.ts
function request_message_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function request_message_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var OrderMessageEntity = function OrderMessageEntity() {
    "use strict";
};
request_message_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    request_message_entity_ts_metadata("design:type", Number)
], OrderMessageEntity.prototype, "id", void 0);
request_message_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    request_message_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], OrderMessageEntity.prototype, "sentAt", void 0);
request_message_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    request_message_entity_ts_metadata("design:type", Boolean)
], OrderMessageEntity.prototype, "sentByDriver", void 0);
request_message_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        name: 'state',
        enum: MessageStatus,
        default: MessageStatus.Sent
    }),
    request_message_entity_ts_metadata("design:type", typeof MessageStatus === "undefined" ? Object : MessageStatus)
], OrderMessageEntity.prototype, "status", void 0);
request_message_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    request_message_entity_ts_metadata("design:type", String)
], OrderMessageEntity.prototype, "content", void 0);
request_message_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.conversation;
    }),
    request_message_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], OrderMessageEntity.prototype, "request", void 0);
request_message_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    request_message_entity_ts_metadata("design:type", Number)
], OrderMessageEntity.prototype, "requestId", void 0);
OrderMessageEntity = request_message_entity_ts_decorate([
    (0,external_typeorm_.Entity)('request_chat')
], OrderMessageEntity);

;// ../../libs/database/src/lib/entities/enums/request-activity-type.enum.ts

var RequestActivityType;
(function(RequestActivityType) {
    RequestActivityType["RequestedByOperator"] = "RequestedByOperator";
    RequestActivityType["BookedByOperator"] = "BookedByOperator";
    RequestActivityType["RequestedByRider"] = "RequestedByRider";
    RequestActivityType["BookedByRider"] = "BookedByRider";
    RequestActivityType["DriverAccepted"] = "DriverAccepted";
    RequestActivityType["ArrivedToPickupPoint"] = "ArrivedToPickupPoint";
    RequestActivityType["CanceledByDriver"] = "CanceledByDriver";
    RequestActivityType["CanceledByRider"] = "CanceledByRider";
    RequestActivityType["CanceledByOperator"] = "CanceledByOperator";
    RequestActivityType["Started"] = "Started";
    RequestActivityType["ArrivedToDestination"] = "ArrivedToDestination";
    RequestActivityType["Paid"] = "Paid";
    RequestActivityType["Reviewed"] = "Reviewed";
    RequestActivityType["Expired"] = "Expired";
    RequestActivityType["StartedByQr"] = "StartedByQr";
})(RequestActivityType || (RequestActivityType = {}));
(0,graphql_.registerEnumType)(RequestActivityType, {
    name: "RequestActivityType"
});

;// ../../libs/database/src/lib/entities/taxi/request-activity.entity.ts
function request_activity_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function request_activity_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var RequestActivityEntity = function RequestActivityEntity() {
    "use strict";
};
request_activity_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    request_activity_entity_ts_metadata("design:type", Number)
], RequestActivityEntity.prototype, "id", void 0);
request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RequestActivityType
    }),
    request_activity_entity_ts_metadata("design:type", typeof RequestActivityType === "undefined" ? Object : RequestActivityType)
], RequestActivityEntity.prototype, "type", void 0);
request_activity_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    request_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], RequestActivityEntity.prototype, "createdAt", void 0);
request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(request) {
        return request.activities;
    }),
    request_activity_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], RequestActivityEntity.prototype, "request", void 0);
request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    request_activity_entity_ts_metadata("design:type", Number)
], RequestActivityEntity.prototype, "requestId", void 0);
RequestActivityEntity = request_activity_entity_ts_decorate([
    (0,external_typeorm_.Entity)('request_activity')
], RequestActivityEntity);

;// ../../libs/database/src/lib/entities/enums/sos-status.enum.ts

var SOSStatus;
(function(SOSStatus) {
    SOSStatus["Submitted"] = "Submitted";
    SOSStatus["UnderReview"] = "UnderReview";
    SOSStatus["FalseAlarm"] = "FalseAlarm";
    SOSStatus["Resolved"] = "Resolved";
})(SOSStatus || (SOSStatus = {}));
(0,graphql_.registerEnumType)(SOSStatus, {
    name: 'SOSStatus'
});

;// ../../libs/database/src/lib/entities/enums/sos-activity-action.enum.ts

var SOSActivityAction;
(function(SOSActivityAction) {
    SOSActivityAction["Submitted"] = "Submitted";
    SOSActivityAction["Seen"] = "Seen";
    SOSActivityAction["ContactDriver"] = "ContactDriver";
    SOSActivityAction["ContactAuthorities"] = "ContactAuthorities";
    SOSActivityAction["MarkedAsResolved"] = "MarkedAsResolved";
    SOSActivityAction["MarkedAsFalseAlarm"] = "MarkedAsFalseAlarm";
})(SOSActivityAction || (SOSActivityAction = {}));
(0,graphql_.registerEnumType)(SOSActivityAction, {
    name: 'SOSActivityAction'
});

;// ../../libs/database/src/lib/entities/taxi/sos-activity.entity.ts
function sos_activity_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function sos_activity_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var SOSActivityEntity = function SOSActivityEntity() {
    "use strict";
};
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    sos_activity_entity_ts_metadata("design:type", Number)
], SOSActivityEntity.prototype, "id", void 0);
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    sos_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], SOSActivityEntity.prototype, "createdAt", void 0);
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: SOSActivityAction
    }),
    sos_activity_entity_ts_metadata("design:type", typeof SOSActivityAction === "undefined" ? Object : SOSActivityAction)
], SOSActivityEntity.prototype, "action", void 0);
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        length: 2000
    }),
    sos_activity_entity_ts_metadata("design:type", String)
], SOSActivityEntity.prototype, "note", void 0);
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.sosActivities;
    }),
    sos_activity_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], SOSActivityEntity.prototype, "operator", void 0);
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    sos_activity_entity_ts_metadata("design:type", Number)
], SOSActivityEntity.prototype, "operatorId", void 0);
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SOSEntity;
    }, function(sos) {
        return sos.activities;
    }),
    sos_activity_entity_ts_metadata("design:type", typeof SOSEntity === "undefined" ? Object : SOSEntity)
], SOSActivityEntity.prototype, "sos", void 0);
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sos_activity_entity_ts_metadata("design:type", Number)
], SOSActivityEntity.prototype, "sosId", void 0);
SOSActivityEntity = sos_activity_entity_ts_decorate([
    (0,external_typeorm_.Entity)('sos_activity')
], SOSActivityEntity);

;// ../../libs/database/src/lib/entities/taxi/sos-reason.entity.ts
function sos_reason_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function sos_reason_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var SOSReasonEntity = function SOSReasonEntity() {
    "use strict";
};
sos_reason_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    sos_reason_entity_ts_metadata("design:type", Number)
], SOSReasonEntity.prototype, "id", void 0);
sos_reason_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sos_reason_entity_ts_metadata("design:type", String)
], SOSReasonEntity.prototype, "name", void 0);
sos_reason_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    sos_reason_entity_ts_metadata("design:type", Boolean)
], SOSReasonEntity.prototype, "isActive", void 0);
sos_reason_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SOSEntity;
    }, function(sos) {
        return sos.reason;
    }),
    sos_reason_entity_ts_metadata("design:type", Array)
], SOSReasonEntity.prototype, "sos", void 0);
SOSReasonEntity = sos_reason_entity_ts_decorate([
    (0,external_typeorm_.Entity)('sos_reason')
], SOSReasonEntity);

;// ../../libs/database/src/lib/entities/taxi/sos.entity.ts
function sos_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function sos_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}







var SOSEntity = function SOSEntity() {
    "use strict";
};
sos_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    sos_entity_ts_metadata("design:type", Number)
], SOSEntity.prototype, "id", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    sos_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], SOSEntity.prototype, "createdAt", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: SOSStatus,
        default: SOSStatus.Submitted
    }),
    sos_entity_ts_metadata("design:type", typeof SOSStatus === "undefined" ? Object : SOSStatus)
], SOSEntity.prototype, "status", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    sos_entity_ts_metadata("design:type", String)
], SOSEntity.prototype, "comment", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SOSReasonEntity;
    }, {
        nullable: true
    }),
    sos_entity_ts_metadata("design:type", typeof SOSReasonEntity === "undefined" ? Object : SOSReasonEntity)
], SOSEntity.prototype, "reason", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    sos_entity_ts_metadata("design:type", Number)
], SOSEntity.prototype, "reasonId", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.Column)('point', {
        transformer: new PointTransformer(),
        nullable: true
    }),
    sos_entity_ts_metadata("design:type", typeof Point === "undefined" ? Object : Point)
], SOSEntity.prototype, "location", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(request) {
        return request.sosCalls;
    }),
    sos_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], SOSEntity.prototype, "request", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sos_entity_ts_metadata("design:type", Number)
], SOSEntity.prototype, "requestId", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sos_entity_ts_metadata("design:type", Boolean)
], SOSEntity.prototype, "submittedByRider", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SOSActivityEntity;
    }, function(activity) {
        return activity.sos;
    }),
    sos_entity_ts_metadata("design:type", Array)
], SOSEntity.prototype, "activities", void 0);
SOSEntity = sos_entity_ts_decorate([
    (0,external_typeorm_.Entity)('sos')
], SOSEntity);

;// ../../libs/database/src/lib/entities/taxi/order-cancel-reason.entity.ts
function order_cancel_reason_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function order_cancel_reason_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var OrderCancelReasonEntity = function OrderCancelReasonEntity() {
    "use strict";
};
order_cancel_reason_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    order_cancel_reason_entity_ts_metadata("design:type", Number)
], OrderCancelReasonEntity.prototype, "id", void 0);
order_cancel_reason_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    order_cancel_reason_entity_ts_metadata("design:type", String)
], OrderCancelReasonEntity.prototype, "title", void 0);
order_cancel_reason_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(request) {
        return request.cancelReason;
    }),
    order_cancel_reason_entity_ts_metadata("design:type", Array)
], OrderCancelReasonEntity.prototype, "orders", void 0);
order_cancel_reason_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    order_cancel_reason_entity_ts_metadata("design:type", Boolean)
], OrderCancelReasonEntity.prototype, "isEnabled", void 0);
order_cancel_reason_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: AnnouncementUserType,
        default: AnnouncementUserType.Rider
    }),
    order_cancel_reason_entity_ts_metadata("design:type", typeof AnnouncementUserType === "undefined" ? Object : AnnouncementUserType)
], OrderCancelReasonEntity.prototype, "userType", void 0);
OrderCancelReasonEntity = order_cancel_reason_entity_ts_decorate([
    (0,external_typeorm_.Entity)('order_cancel_reason')
], OrderCancelReasonEntity);

;// ../../libs/database/src/lib/entities/taxi/taxi-order-note.entity.ts
function taxi_order_note_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function taxi_order_note_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var TaxiOrderNoteEntity = function TaxiOrderNoteEntity() {
    "use strict";
};
taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    taxi_order_note_entity_ts_metadata("design:type", Number)
], TaxiOrderNoteEntity.prototype, "id", void 0);
taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    taxi_order_note_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderNoteEntity.prototype, "createdAt", void 0);
taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.notes;
    }),
    taxi_order_note_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], TaxiOrderNoteEntity.prototype, "order", void 0);
taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_note_entity_ts_metadata("design:type", Number)
], TaxiOrderNoteEntity.prototype, "orderId", void 0);
taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_note_entity_ts_metadata("design:type", String)
], TaxiOrderNoteEntity.prototype, "note", void 0);
taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    taxi_order_note_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], TaxiOrderNoteEntity.prototype, "staff", void 0);
taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_note_entity_ts_metadata("design:type", Number)
], TaxiOrderNoteEntity.prototype, "staffId", void 0);
TaxiOrderNoteEntity = taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.Entity)('taxi_order_note')
], TaxiOrderNoteEntity);

;// ../../libs/database/src/lib/entities/fragments/delivery-contact.ts
var DeliveryContact = function DeliveryContact() {
    "use strict";
};

;// ../../libs/database/src/lib/entities/taxi/taxi-order-shop.entity.ts
function taxi_order_shop_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function taxi_order_shop_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var TaxiOrderShopEntity = function TaxiOrderShopEntity() {
    "use strict";
};
taxi_order_shop_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    taxi_order_shop_entity_ts_metadata("design:type", Number)
], TaxiOrderShopEntity.prototype, "id", void 0);
taxi_order_shop_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.shopCarts;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    taxi_order_shop_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], TaxiOrderShopEntity.prototype, "taxiOrder", void 0);
taxi_order_shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_shop_entity_ts_metadata("design:type", Number)
], TaxiOrderShopEntity.prototype, "taxiOrderId", void 0);
taxi_order_shop_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    taxi_order_shop_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], TaxiOrderShopEntity.prototype, "shopOrderCart", void 0);
taxi_order_shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_shop_entity_ts_metadata("design:type", Number)
], TaxiOrderShopEntity.prototype, "shopOrderCartId", void 0);
TaxiOrderShopEntity = taxi_order_shop_entity_ts_decorate([
    (0,external_typeorm_.Entity)('taxi_order_shop')
], TaxiOrderShopEntity);

;// ../../libs/database/src/lib/entities/taxi/taxi-order.entity.ts
function taxi_order_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function taxi_order_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






























var TaxiOrderEntity = function TaxiOrderEntity() {
    "use strict";
};
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "id", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        name: 'requestTimestamp'
    }),
    taxi_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderEntity.prototype, "createdOn", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TaxiOrderType,
        default: TaxiOrderType.Ride
    }),
    taxi_order_entity_ts_metadata("design:type", typeof TaxiOrderType === "undefined" ? Object : TaxiOrderType)
], TaxiOrderEntity.prototype, "type", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderEntity.prototype, "startTimestamp", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderEntity.prototype, "finishTimestamp", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: OrderStatus,
        default: OrderStatus.Requested
    }),
    taxi_order_entity_ts_metadata("design:type", typeof OrderStatus === "undefined" ? Object : OrderStatus)
], TaxiOrderEntity.prototype, "status", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "distanceBest", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "durationBest", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "waitMinutes", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "waitCost", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "rideOptionsCost", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "taxCost", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "serviceCost", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderEntity.prototype, "expectedTimestamp", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderEntity.prototype, "etaPickup", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "costBest", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: '0.00'
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "costAfterCoupon", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: '0.00'
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "tipAmount", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "paidAmount", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        default: 0,
        scale: 2
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "providerShare", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        default: -1
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "destinationArrivedTo", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return RegionEntity;
    }, function(region) {
        return region.taxiOrders;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof RegionEntity === "undefined" ? Object : RegionEntity)
], TaxiOrderEntity.prototype, "region", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "regionId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RequestActivityEntity;
    }, function(activity) {
        return activity.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "activities", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'text',
        transformer: {
            to: function to(value) {
                return value.join('|');
            },
            from: function from(value) {
                if (value == null) return [];
                return value.split('|');
            }
        }
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "addresses", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('multipoint', {
        transformer: new MultipointTransformer()
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "points", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('multipoint', {
        transformer: new MultipointTransformer(),
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "directions", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('multipoint', {
        transformer: new MultipointTransformer(),
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "driverDirections", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: function() {
            return 'CURRENT_TIMESTAMP';
        }
    }),
    taxi_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderEntity.prototype, "driverLastSeenMessagesAt", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: function() {
            return 'CURRENT_TIMESTAMP';
        }
    }),
    taxi_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderEntity.prototype, "riderLastSeenMessagesAt", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return DeliveryContact;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof DeliveryContact === "undefined" ? Object : DeliveryContact)
], TaxiOrderEntity.prototype, "senderContact", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return DeliveryContact;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof DeliveryContact === "undefined" ? Object : DeliveryContact)
], TaxiOrderEntity.prototype, "receiverContact", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.orders;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], TaxiOrderEntity.prototype, "driver", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "driverId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.orders;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], TaxiOrderEntity.prototype, "rider", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "riderId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CouponEntity;
    }, function(coupon) {
        return coupon.orders;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof CouponEntity === "undefined" ? Object : CouponEntity)
], TaxiOrderEntity.prototype, "coupon", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "couponId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    taxi_order_entity_ts_metadata("design:type", String)
], TaxiOrderEntity.prototype, "currency", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return OrderMessageEntity;
    }, function(message) {
        return message.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "conversation", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PaymentMode,
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", typeof PaymentMode === "undefined" ? Object : PaymentMode)
], TaxiOrderEntity.prototype, "paymentMode", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.orders;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], TaxiOrderEntity.prototype, "paymentGateway", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "paymentGatewayId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SavedPaymentMethodEntity;
    }, function(method) {
        return method.orders;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], TaxiOrderEntity.prototype, "savedPaymentMethod", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "savedPaymentMethodId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiSupportRequestEntity;
    }, function(complaint) {
        return complaint.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "complaints", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.requests;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof ServiceEntity === "undefined" ? Object : ServiceEntity)
], TaxiOrderEntity.prototype, "service", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "serviceId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.requests;
    }, {
        onDelete: 'CASCADE'
    }),
    taxi_order_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], TaxiOrderEntity.prototype, "operator", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "operatorId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return FleetEntity;
    }, function(fleet) {
        return fleet.requests;
    }, {
        onDelete: 'SET NULL'
    }),
    taxi_order_entity_ts_metadata("design:type", typeof FleetEntity === "undefined" ? Object : FleetEntity)
], TaxiOrderEntity.prototype, "fleet", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "fleetId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(riderTransaction) {
        return riderTransaction.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "riderTransactions", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FleetTransactionEntity;
    }, function(fleetTransaction) {
        return fleetTransaction.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "fleetTransactions", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return FeedbackEntity;
    }, function(feedback) {
        return feedback.request;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof FeedbackEntity === "undefined" ? Object : FeedbackEntity)
], TaxiOrderEntity.prototype, "review", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(transaction) {
        return transaction.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "driverTransactions", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProviderTransactionEntity;
    }, function(transaction) {
        return transaction.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "providerTransactions", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ServiceOptionEntity;
    }, function(option) {
        return option.requests;
    }, {
        onDelete: 'CASCADE'
    }),
    (0,external_typeorm_.JoinTable)(),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "options", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SOSEntity;
    }, function(sos) {
        return sos.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "sosCalls", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OrderCancelReasonEntity;
    }, function(order) {
        return order.orders;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof OrderCancelReasonEntity === "undefined" ? Object : OrderCancelReasonEntity)
], TaxiOrderEntity.prototype, "cancelReason", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "cancelReasonId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", String)
], TaxiOrderEntity.prototype, "cancelReasonNote", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return RiderReviewEntity;
    }, function(review) {
        return review.request;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof RiderReviewEntity === "undefined" ? Object : RiderReviewEntity)
], TaxiOrderEntity.prototype, "driverReviewForRider", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return RiderReviewEntity;
    }, function(review) {
        return review.request;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof CampaignCodeEntity === "undefined" ? Object : CampaignCodeEntity)
], TaxiOrderEntity.prototype, "campaignCode", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "campaignCodeId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderNoteEntity;
    }, function(note) {
        return note.order;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "notes", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderShopEntity;
    }, function(shop) {
        return shop.taxiOrder;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "shopCarts", void 0);
TaxiOrderEntity = taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Entity)('request')
], TaxiOrderEntity);

;// ../../libs/database/src/lib/entities/taxi/taxi-support-request.entity.ts
function taxi_support_request_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function taxi_support_request_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var TaxiSupportRequestEntity = function TaxiSupportRequestEntity() {
    "use strict";
};
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    taxi_support_request_entity_ts_metadata("design:type", Number)
], TaxiSupportRequestEntity.prototype, "id", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    taxi_support_request_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiSupportRequestEntity.prototype, "inscriptionTimestamp", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.complaints;
    }),
    taxi_support_request_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], TaxiSupportRequestEntity.prototype, "request", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.assignedTaxiSupportRequests;
    }),
    (0,external_typeorm_.JoinTable)(),
    taxi_support_request_entity_ts_metadata("design:type", Array)
], TaxiSupportRequestEntity.prototype, "assignedToStaffs", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_support_request_entity_ts_metadata("design:type", Number)
], TaxiSupportRequestEntity.prototype, "requestId", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_support_request_entity_ts_metadata("design:type", Boolean)
], TaxiSupportRequestEntity.prototype, "requestedByDriver", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_support_request_entity_ts_metadata("design:type", String)
], TaxiSupportRequestEntity.prototype, "subject", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_support_request_entity_ts_metadata("design:type", String)
], TaxiSupportRequestEntity.prototype, "content", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        default: ComplaintStatus.Submitted
    }),
    taxi_support_request_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], TaxiSupportRequestEntity.prototype, "status", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiSupportRequestActivityEntity;
    }, function(activity) {
        return activity.complaint;
    }),
    taxi_support_request_entity_ts_metadata("design:type", Array)
], TaxiSupportRequestEntity.prototype, "activities", void 0);
TaxiSupportRequestEntity = taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.Entity)('complaint')
], TaxiSupportRequestEntity);

;// ../../libs/database/src/lib/entities/taxi/taxi-support-request-activity.entity.ts
function taxi_support_request_activity_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function taxi_support_request_activity_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var TaxiSupportRequestActivityEntity = function TaxiSupportRequestActivityEntity() {
    "use strict";
};
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    taxi_support_request_activity_entity_ts_metadata("design:type", Number)
], TaxiSupportRequestActivityEntity.prototype, "id", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintActivityType
    }),
    taxi_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintActivityType === "undefined" ? Object : ComplaintActivityType)
], TaxiSupportRequestActivityEntity.prototype, "type", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    taxi_support_request_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiSupportRequestActivityEntity.prototype, "createdAt", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.complaintActivities;
    }),
    taxi_support_request_activity_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], TaxiSupportRequestActivityEntity.prototype, "actor", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    taxi_support_request_activity_entity_ts_metadata("design:type", Array)
], TaxiSupportRequestActivityEntity.prototype, "assignedToStaffs", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    taxi_support_request_activity_entity_ts_metadata("design:type", Array)
], TaxiSupportRequestActivityEntity.prototype, "unassignedFromStaffs", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_support_request_activity_entity_ts_metadata("design:type", String)
], TaxiSupportRequestActivityEntity.prototype, "comment", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    taxi_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], TaxiSupportRequestActivityEntity.prototype, "statusFrom", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    taxi_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], TaxiSupportRequestActivityEntity.prototype, "statusTo", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiSupportRequestEntity;
    }, function(complaint) {
        return complaint.activities;
    }),
    taxi_support_request_activity_entity_ts_metadata("design:type", typeof TaxiSupportRequestEntity === "undefined" ? Object : TaxiSupportRequestEntity)
], TaxiSupportRequestActivityEntity.prototype, "complaint", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_support_request_activity_entity_ts_metadata("design:type", Number)
], TaxiSupportRequestActivityEntity.prototype, "complaintId", void 0);
TaxiSupportRequestActivityEntity = taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Entity)('complaint_activity')
], TaxiSupportRequestActivityEntity);

;// ../../libs/database/src/lib/entities/enums/enabled-notification.enum.ts

var EnabledNotification;
(function(EnabledNotification) {
    EnabledNotification["SOS"] = "sos";
    EnabledNotification["SupportRequest"] = "support_request";
    EnabledNotification["NewOrder"] = "new_order";
    EnabledNotification["UserPendingVerification"] = "user_pending_verification";
})(EnabledNotification || (EnabledNotification = {}));
(0,graphql_.registerEnumType)(EnabledNotification, {
    name: 'EnabledNotification'
});

;// ../../libs/database/src/lib/entities/enums/operator-permission.enum.ts

var OperatorPermission;
(function(OperatorPermission) {
    OperatorPermission["Drivers_View"] = "Drivers_View";
    OperatorPermission["Drivers_Edit"] = "Drivers_Edit";
    OperatorPermission["Riders_View"] = "Riders_View";
    OperatorPermission["Riders_Edit"] = "Riders_Edit";
    OperatorPermission["Regions_View"] = "Regions_View";
    OperatorPermission["Regions_Edit"] = "Regions_Edit";
    OperatorPermission["Services_View"] = "Services_View";
    OperatorPermission["Services_Edit"] = "Services_Edit";
    OperatorPermission["Complaints_View"] = "Complaints_View";
    OperatorPermission["Complaints_Edit"] = "Complaints_Edit";
    OperatorPermission["Coupons_View"] = "Coupons_View";
    OperatorPermission["Coupons_Edit"] = "Coupons_Edit";
    OperatorPermission["Announcements_View"] = "Announcements_View";
    OperatorPermission["Announcements_Edit"] = "Announcements_Edit";
    OperatorPermission["Requests_View"] = "Requests_View";
    OperatorPermission["Fleets_View"] = "Fleets_View";
    OperatorPermission["Fleets_Edit"] = "Fleets_Edit";
    OperatorPermission["Gateways_View"] = "Gateways_View";
    OperatorPermission["Gateways_Edit"] = "Gateways_Edit";
    OperatorPermission["Users_View"] = "Users_View";
    OperatorPermission["Users_Edit"] = "Users_Edit";
    OperatorPermission["Cars_View"] = "Cars_View";
    OperatorPermission["Cars_Edit"] = "Cars_Edit";
    OperatorPermission["FleetWallet_View"] = "FleetWallet_View";
    OperatorPermission["FleetWallet_Edit"] = "FleetWallet_Edit";
    OperatorPermission["ProviderWallet_View"] = "ProviderWallet_View";
    OperatorPermission["ProviderWallet_Edit"] = "ProviderWallet_Edit";
    OperatorPermission["DriverWallet_View"] = "DriverWallet_View";
    OperatorPermission["DriverWallet_Edit"] = "DriverWallet_Edit";
    OperatorPermission["RiderWallet_View"] = "RiderWallet_View";
    OperatorPermission["RiderWallet_Edit"] = "RiderWallet_Edit";
    OperatorPermission["ReviewParameter_Edit"] = "ReviewParameter_Edit";
    OperatorPermission["Payouts_View"] = "Payouts_View";
    OperatorPermission["Payouts_Edit"] = "Payouts_Edit";
    OperatorPermission["GiftBatch_View"] = "GiftBatch_View";
    OperatorPermission["GiftBatch_Create"] = "GiftBatch_Create";
    OperatorPermission["GiftBatch_ViewCodes"] = "GiftBatch_ViewCodes";
    OperatorPermission["SMSProviders_View"] = "SMSProviders_View";
    OperatorPermission["SMSProviders_Edit"] = "SMSProviders_Edit";
})(OperatorPermission || (OperatorPermission = {}));
(0,graphql_.registerEnumType)(OperatorPermission, {
    name: 'OperatorPermission'
});

;// ../../libs/database/src/lib/entities/enums/shop-permission.enum.ts

var ShopPermission;
(function(ShopPermission) {
    ShopPermission["SHOP_VIEW"] = "SHOP_VIEW";
    ShopPermission["SHOP_EDIT"] = "SHOP_EDIT";
    ShopPermission["ORDER_VIEW"] = "ORDER_VIEW";
    ShopPermission["ORDER_EDIT"] = "ORDER_EDIT";
})(ShopPermission || (ShopPermission = {}));
(0,graphql_.registerEnumType)(ShopPermission, {
    name: 'ShopPermission'
});

;// ../../libs/database/src/lib/entities/enums/parking-permission.enum.ts

var ParkingPermission;
(function(ParkingPermission) {
    ParkingPermission["PARKING_VIEW"] = "PARKING_VIEW";
    ParkingPermission["PARKING_EDIT"] = "PARKING_EDIT";
    ParkingPermission["ORDER_VIEW"] = "ORDER_VIEW";
    ParkingPermission["ORDER_EDIT"] = "ORDER_EDIT";
})(ParkingPermission || (ParkingPermission = {}));
(0,graphql_.registerEnumType)(ParkingPermission, {
    name: 'ParkingPermission'
});

;// ../../libs/database/src/lib/entities/enums/taxi-permissions.enum.ts

var TaxiPermission;
(function(TaxiPermission) {
    TaxiPermission["DRIVER_VIEW"] = "DRIVER_VIEW";
    TaxiPermission["DRIVER_EDIT"] = "DRIVER_EDIT";
    TaxiPermission["ORDER_VIEW"] = "ORDER_VIEW";
    TaxiPermission["ORDER_EDIT"] = "ORDER_EDIT";
    TaxiPermission["REGION_VIEW"] = "REGIONS_VIEW";
    TaxiPermission["REGION_EDIT"] = "REGIONS_EDIT";
    TaxiPermission["VEHICLE_VIEW"] = "VEHICLES_VIEW";
    TaxiPermission["VEHICLE_EDIT"] = "VEHICLES_EDIT";
    TaxiPermission["FLEET_VIEW"] = "FLEETS_VIEW";
    TaxiPermission["FLEET_EDIT"] = "FLEETS_EDIT";
    TaxiPermission["PRICING_VIEW"] = "PRICING_VIEW";
    TaxiPermission["PRICING_EDIT"] = "PRICING_EDIT";
})(TaxiPermission || (TaxiPermission = {}));
(0,graphql_.registerEnumType)(TaxiPermission, {
    name: 'TaxiPermission'
});

;// ../../libs/database/src/lib/entities/operator-role.entity.ts
function operator_role_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function operator_role_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}







var OperatorRoleEntity = function OperatorRoleEntity() {
    "use strict";
};
operator_role_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    operator_role_entity_ts_metadata("design:type", Number)
], OperatorRoleEntity.prototype, "id", void 0);
operator_role_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    operator_role_entity_ts_metadata("design:type", String)
], OperatorRoleEntity.prototype, "title", void 0);
operator_role_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: OperatorPermission
    }),
    operator_role_entity_ts_metadata("design:type", Array)
], OperatorRoleEntity.prototype, "permissions", void 0);
operator_role_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: TaxiPermission,
        default: []
    }),
    operator_role_entity_ts_metadata("design:type", Array)
], OperatorRoleEntity.prototype, "taxiPermissions", void 0);
operator_role_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: ShopPermission,
        default: []
    }),
    operator_role_entity_ts_metadata("design:type", Array)
], OperatorRoleEntity.prototype, "shopPermissions", void 0);
operator_role_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: ParkingPermission,
        default: []
    }),
    operator_role_entity_ts_metadata("design:type", Array)
], OperatorRoleEntity.prototype, "parkingPermissions", void 0);
operator_role_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: AppType,
        default: []
    }),
    operator_role_entity_ts_metadata("design:type", Array)
], OperatorRoleEntity.prototype, "allowedApps", void 0);
operator_role_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.role;
    }),
    operator_role_entity_ts_metadata("design:type", Array)
], OperatorRoleEntity.prototype, "operators", void 0);
OperatorRoleEntity = operator_role_entity_ts_decorate([
    (0,external_typeorm_.Entity)('operator_role')
], OperatorRoleEntity);

;// ../../libs/database/src/lib/entities/operator-session.entity.ts
function operator_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function operator_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var OperatorSessionEntity = function OperatorSessionEntity() {
    "use strict";
};
operator_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    operator_session_entity_ts_metadata("design:type", Number)
], OperatorSessionEntity.prototype, "id", void 0);
operator_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return SessionInfo;
    }),
    operator_session_entity_ts_metadata("design:type", typeof SessionInfo === "undefined" ? Object : SessionInfo)
], OperatorSessionEntity.prototype, "sessionInfo", void 0);
operator_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.sessions;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    operator_session_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], OperatorSessionEntity.prototype, "operator", void 0);
operator_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    operator_session_entity_ts_metadata("design:type", Number)
], OperatorSessionEntity.prototype, "operatorId", void 0);
OperatorSessionEntity = operator_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('operator_session')
], OperatorSessionEntity);

;// ../../libs/database/src/lib/entities/operator.entity.ts
function operator_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function operator_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



















var OperatorEntity = function OperatorEntity() {
    "use strict";
};
operator_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    operator_entity_ts_metadata("design:type", Number)
], OperatorEntity.prototype, "id", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], OperatorEntity.prototype, "createdAt", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.UpdateDateColumn)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], OperatorEntity.prototype, "updatedAt", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], OperatorEntity.prototype, "deletedAt", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", String)
], OperatorEntity.prototype, "firstName", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", String)
], OperatorEntity.prototype, "lastName", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        unique: true
    }),
    operator_entity_ts_metadata("design:type", String)
], OperatorEntity.prototype, "userName", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 'admin'
    }),
    operator_entity_ts_metadata("design:type", String)
], OperatorEntity.prototype, "password", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)('bigint', {
        nullable: true,
        unique: true
    }),
    operator_entity_ts_metadata("design:type", String)
], OperatorEntity.prototype, "mobileNumber", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: EnabledNotification,
        default: [
            EnabledNotification.SupportRequest,
            EnabledNotification.SOS,
            EnabledNotification.UserPendingVerification
        ]
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "enabledNotifications", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], OperatorEntity.prototype, "lastActivity", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    operator_entity_ts_metadata("design:type", Boolean)
], OperatorEntity.prototype, "isBlocked", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", String)
], OperatorEntity.prototype, "email", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", String)
], OperatorEntity.prototype, "address", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, function(media) {
        return media.operator;
    }),
    (0,external_typeorm_.JoinColumn)(),
    operator_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], OperatorEntity.prototype, "media", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", Number)
], OperatorEntity.prototype, "mediaId", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorRoleEntity;
    }, function(role) {
        return role.operators;
    }),
    operator_entity_ts_metadata("design:type", typeof OperatorRoleEntity === "undefined" ? Object : OperatorRoleEntity)
], OperatorEntity.prototype, "role", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", Number)
], OperatorEntity.prototype, "roleId", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return FleetEntity;
    }, function(fleet) {
        return fleet.operators;
    }),
    operator_entity_ts_metadata("design:type", typeof FleetEntity === "undefined" ? Object : FleetEntity)
], OperatorEntity.prototype, "fleet", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(request) {
        return request.operator;
    }, {
        onDelete: 'RESTRICT',
        onUpdate: 'RESTRICT'
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "requests", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiSupportRequestActivityEntity;
    }, function(activity) {
        return activity.actor;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "complaintActivities", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(riderTransaction) {
        return riderTransaction.operator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "riderTransactions", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(driverTransaction) {
        return driverTransaction.operator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "driverTransactions", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FleetTransactionEntity;
    }, function(fleetTransaction) {
        return fleetTransaction.operator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "fleetTransactions", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProviderTransactionEntity;
    }, function(providerTransaction) {
        return providerTransaction.operator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "providerTransactions", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SOSActivityEntity;
    }, function(sosActivity) {
        return sosActivity.operator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "sosActivities", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiPayoutSessionEntity;
    }, function(payoutSession) {
        return payoutSession.createdByOperator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "taxiPayoutSessionsCreated", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return GiftBatchEntity;
    }, function(gift) {
        return gift.createdByOperator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "giftBatchesCreated", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CustomerNoteEntity;
    }, function(note) {
        return note.createdBy;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "customerNotes", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return OperatorSessionEntity;
    }, function(session) {
        return session.operator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "sessions", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return TaxiSupportRequestEntity;
    }, function(complaint) {
        return complaint.assignedToStaffs;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "assignedTaxiSupportRequests", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopSupportRequestEntity;
    }, function(complaint) {
        return complaint.assignedToStaffs;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "assignedShopSupportRequests", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopSupportRequestEntity;
    }, function(complaint) {
        return complaint.assignedToStaffs;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "assignedParkingSupportRequests", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopCustomerSupportRequestEntity;
    }, function(complaint) {
        return complaint.assignedToStaffs;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "assignedShopCustomerSupportRequests", void 0);
OperatorEntity = operator_entity_ts_decorate([
    (0,external_typeorm_.Entity)('operator')
], OperatorEntity);

;// ../../libs/database/src/lib/entities/taxi/driver-transaction.entity.ts
function driver_transaction_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_transaction_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}















var DriverTransactionEntity = function DriverTransactionEntity() {
    "use strict";
};
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "id", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        name: 'transactionTime'
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverTransactionEntity.prototype, "createdAt", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionStatus,
        default: TransactionStatus.Processing
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof TransactionStatus === "undefined" ? Object : TransactionStatus)
], DriverTransactionEntity.prototype, "status", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionAction
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof TransactionAction === "undefined" ? Object : TransactionAction)
], DriverTransactionEntity.prototype, "action", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DriverDeductTransactionType,
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof DriverDeductTransactionType === "undefined" ? Object : DriverDeductTransactionType)
], DriverTransactionEntity.prototype, "deductType", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DriverRechargeTransactionType,
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof DriverRechargeTransactionType === "undefined" ? Object : DriverRechargeTransactionType)
], DriverTransactionEntity.prototype, "rechargeType", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "amount", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: '3'
    }),
    driver_transaction_entity_ts_metadata("design:type", String)
], DriverTransactionEntity.prototype, "currency", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'documentNumber'
    }),
    driver_transaction_entity_ts_metadata("design:type", String)
], DriverTransactionEntity.prototype, "refrenceNumber", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'details'
    }),
    driver_transaction_entity_ts_metadata("design:type", String)
], DriverTransactionEntity.prototype, "description", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.transactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], DriverTransactionEntity.prototype, "driver", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "driverId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.riderTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], DriverTransactionEntity.prototype, "paymentGateway", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "paymentGatewayId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.driverTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], DriverTransactionEntity.prototype, "operator", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "operatorId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.driverTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], DriverTransactionEntity.prototype, "request", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "requestId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return GiftCodeEntity;
    }, function(giftCard) {
        return giftCard.riderTransaction;
    }),
    (0,external_typeorm_.JoinColumn)(),
    driver_transaction_entity_ts_metadata("design:type", typeof GiftCodeEntity === "undefined" ? Object : GiftCodeEntity)
], DriverTransactionEntity.prototype, "giftCard", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "giftCardId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiPayoutSessionEntity;
    }, function(session) {
        return session.driverTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof TaxiPayoutSessionEntity === "undefined" ? Object : TaxiPayoutSessionEntity)
], DriverTransactionEntity.prototype, "payoutSession", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "payoutSessionId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutAccountEntity;
    }, function(payoutAccount) {
        return payoutAccount.driverTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof PayoutAccountEntity === "undefined" ? Object : PayoutAccountEntity)
], DriverTransactionEntity.prototype, "payoutAccount", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "payoutAccountId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.driverTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], DriverTransactionEntity.prototype, "payoutMethod", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "payoutMethodId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiPayoutSessionPayoutMethodDetailEntity;
    }, function(payoutSessionMethod) {
        return payoutSessionMethod.driverTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof TaxiPayoutSessionPayoutMethodDetailEntity === "undefined" ? Object : TaxiPayoutSessionPayoutMethodDetailEntity)
], DriverTransactionEntity.prototype, "payoutSessionMethod", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "payoutSessionMethodId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }, function(order) {
        return order.driverTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "shopOrder", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "shopOrderId", void 0);
DriverTransactionEntity = driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_transaction')
], DriverTransactionEntity);

;// ../../libs/database/src/lib/entities/taxi/driver-wallet.entity.ts
function driver_wallet_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_wallet_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var DriverWalletEntity = function DriverWalletEntity() {
    "use strict";
};
driver_wallet_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_wallet_entity_ts_metadata("design:type", Number)
], DriverWalletEntity.prototype, "id", void 0);
driver_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0.0,
        name: 'amount'
    }),
    driver_wallet_entity_ts_metadata("design:type", Number)
], DriverWalletEntity.prototype, "balance", void 0);
driver_wallet_entity_ts_decorate([
    (0,external_typeorm_.Index)(),
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    driver_wallet_entity_ts_metadata("design:type", String)
], DriverWalletEntity.prototype, "currency", void 0);
driver_wallet_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.wallet;
    }, {
        onDelete: 'CASCADE'
    }),
    driver_wallet_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], DriverWalletEntity.prototype, "driver", void 0);
driver_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_wallet_entity_ts_metadata("design:type", Number)
], DriverWalletEntity.prototype, "driverId", void 0);
DriverWalletEntity = driver_wallet_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_wallet')
], DriverWalletEntity);

;// ../../libs/database/src/lib/entities/enums/driver-status.enum.ts

var DriverStatus;
(function(DriverStatus) {
    DriverStatus["Online"] = "online";
    DriverStatus["Offline"] = "offline";
    DriverStatus["Blocked"] = "blocked";
    DriverStatus["InService"] = "in service";
    DriverStatus["WaitingDocuments"] = "waiting documents";
    DriverStatus["PendingApproval"] = "pending approval";
    DriverStatus["SoftReject"] = "soft reject";
    DriverStatus["HardReject"] = "hard reject";
})(DriverStatus || (DriverStatus = {}));
(0,graphql_.registerEnumType)(DriverStatus, {
    name: 'DriverStatus'
});

;// ../../libs/database/src/lib/entities/taxi/driver-session.entity.ts
function driver_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var DriverSessionEntity = function DriverSessionEntity() {
    "use strict";
};
driver_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_session_entity_ts_metadata("design:type", Number)
], DriverSessionEntity.prototype, "id", void 0);
driver_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return SessionInfo;
    }),
    driver_session_entity_ts_metadata("design:type", typeof SessionInfo === "undefined" ? Object : SessionInfo)
], DriverSessionEntity.prototype, "sessionInfo", void 0);
driver_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.sessions;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    driver_session_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], DriverSessionEntity.prototype, "driver", void 0);
driver_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_session_entity_ts_metadata("design:type", Number)
], DriverSessionEntity.prototype, "driverId", void 0);
DriverSessionEntity = driver_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_session')
], DriverSessionEntity);

;// ../../libs/database/src/lib/entities/taxi/driver-document-retention-policy.entity.ts
function driver_document_retention_policy_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_document_retention_policy_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var DriverDocumentRetentionPolicyEntity = function DriverDocumentRetentionPolicyEntity() {
    "use strict";
};
driver_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_document_retention_policy_entity_ts_metadata("design:type", Number)
], DriverDocumentRetentionPolicyEntity.prototype, "id", void 0);
driver_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_document_retention_policy_entity_ts_metadata("design:type", Number)
], DriverDocumentRetentionPolicyEntity.prototype, "title", void 0);
driver_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    driver_document_retention_policy_entity_ts_metadata("design:type", Number)
], DriverDocumentRetentionPolicyEntity.prototype, "deleteAfterDays", void 0);
driver_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverDocumentEntity;
    }, function(driverDocument) {
        return driverDocument.retentionPolicies;
    }),
    driver_document_retention_policy_entity_ts_metadata("design:type", typeof DriverDocumentEntity === "undefined" ? Object : DriverDocumentEntity)
], DriverDocumentRetentionPolicyEntity.prototype, "driverDocument", void 0);
driver_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_document_retention_policy_entity_ts_metadata("design:type", Number)
], DriverDocumentRetentionPolicyEntity.prototype, "driverDocumentId", void 0);
DriverDocumentRetentionPolicyEntity = driver_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_document_retention_policy')
], DriverDocumentRetentionPolicyEntity);

;// ../../libs/database/src/lib/entities/taxi/driver-document.entity.ts
function driver_document_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_document_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var DriverDocumentEntity = function DriverDocumentEntity() {
    "use strict";
};
driver_document_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_document_entity_ts_metadata("design:type", Number)
], DriverDocumentEntity.prototype, "id", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_document_entity_ts_metadata("design:type", String)
], DriverDocumentEntity.prototype, "title", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_document_entity_ts_metadata("design:type", String)
], DriverDocumentEntity.prototype, "description", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_document_entity_ts_metadata("design:type", Boolean)
], DriverDocumentEntity.prototype, "isEnabled", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_document_entity_ts_metadata("design:type", Boolean)
], DriverDocumentEntity.prototype, "isRequired", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_document_entity_ts_metadata("design:type", Boolean)
], DriverDocumentEntity.prototype, "hasExpiryDate", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)('int'),
    driver_document_entity_ts_metadata("design:type", Number)
], DriverDocumentEntity.prototype, "notificationDaysBeforeExpiry", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)('int'),
    driver_document_entity_ts_metadata("design:type", Number)
], DriverDocumentEntity.prototype, "numberOfImages", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverDocumentRetentionPolicyEntity;
    }, function(retentionPolicy) {
        return retentionPolicy.driverDocument;
    }),
    driver_document_entity_ts_metadata("design:type", Array)
], DriverDocumentEntity.prototype, "retentionPolicies", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverToDriverDocumentEntity;
    }, function(driverToDriverDocument) {
        return driverToDriverDocument.driverDocument;
    }),
    driver_document_entity_ts_metadata("design:type", Array)
], DriverDocumentEntity.prototype, "driverToDriverDocuments", void 0);
DriverDocumentEntity = driver_document_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_document')
], DriverDocumentEntity);

;// ../../libs/database/src/lib/entities/taxi/driver-to-driver-document.entity.ts
function driver_to_driver_document_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_to_driver_document_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var DriverToDriverDocumentEntity = function DriverToDriverDocumentEntity() {
    "use strict";
};
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_to_driver_document_entity_ts_metadata("design:type", Number)
], DriverToDriverDocumentEntity.prototype, "id", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverDocumentEntity;
    }, function(driverDocument) {
        return driverDocument.driverToDriverDocuments;
    }, {
        onDelete: 'CASCADE'
    }),
    driver_to_driver_document_entity_ts_metadata("design:type", typeof DriverDocumentEntity === "undefined" ? Object : DriverDocumentEntity)
], DriverToDriverDocumentEntity.prototype, "driverDocument", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_to_driver_document_entity_ts_metadata("design:type", Number)
], DriverToDriverDocumentEntity.prototype, "driverDocumentId", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.driverToDriverDocuments;
    }, {
        onDelete: 'CASCADE'
    }),
    driver_to_driver_document_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], DriverToDriverDocumentEntity.prototype, "driver", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_to_driver_document_entity_ts_metadata("design:type", Number)
], DriverToDriverDocumentEntity.prototype, "driverId", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return MediaEntity;
    }, {
        onDelete: 'CASCADE'
    }),
    driver_to_driver_document_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], DriverToDriverDocumentEntity.prototype, "media", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_to_driver_document_entity_ts_metadata("design:type", Number)
], DriverToDriverDocumentEntity.prototype, "mediaId", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverDocumentRetentionPolicyEntity;
    }, {
        onDelete: 'CASCADE'
    }),
    driver_to_driver_document_entity_ts_metadata("design:type", typeof DriverDocumentRetentionPolicyEntity === "undefined" ? Object : DriverDocumentRetentionPolicyEntity)
], DriverToDriverDocumentEntity.prototype, "retentionPolicy", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_to_driver_document_entity_ts_metadata("design:type", Number)
], DriverToDriverDocumentEntity.prototype, "retentionPolicyId", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_to_driver_document_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverToDriverDocumentEntity.prototype, "expiresAt", void 0);
DriverToDriverDocumentEntity = driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_to_driver_document')
], DriverToDriverDocumentEntity);

;// ../../libs/database/src/lib/entities/taxi/driver-note.entity.ts
function driver_note_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_note_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var DriverNoteEntity = function DriverNoteEntity() {
    "use strict";
};
driver_note_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_note_entity_ts_metadata("design:type", Number)
], DriverNoteEntity.prototype, "id", void 0);
driver_note_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    driver_note_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverNoteEntity.prototype, "createdAt", void 0);
driver_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.notes;
    }),
    driver_note_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], DriverNoteEntity.prototype, "driver", void 0);
driver_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_note_entity_ts_metadata("design:type", Number)
], DriverNoteEntity.prototype, "driverId", void 0);
driver_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_note_entity_ts_metadata("design:type", String)
], DriverNoteEntity.prototype, "note", void 0);
driver_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    driver_note_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], DriverNoteEntity.prototype, "staff", void 0);
driver_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_note_entity_ts_metadata("design:type", Number)
], DriverNoteEntity.prototype, "staffId", void 0);
DriverNoteEntity = driver_note_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_note')
], DriverNoteEntity);

;// ../../libs/database/src/lib/entities/taxi/driver.entity.ts
function driver_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






















var DriverEntity = function DriverEntity() {
    "use strict";
};
driver_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "id", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "firstName", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "lastName", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'varchar',
        length: 5
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "countryIso", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    driver_entity_ts_metadata("design:type", Boolean)
], DriverEntity.prototype, "canDeliver", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DeliveryPackageSize,
        default: DeliveryPackageSize.Medium
    }),
    driver_entity_ts_metadata("design:type", typeof DeliveryPackageSize === "undefined" ? Object : DeliveryPackageSize)
], DriverEntity.prototype, "maxDeliveryPackageSize", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('bigint', {
        unique: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "mobileNumber", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "certificateNumber", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "email", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "password", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CarModelEntity;
    }, function(car) {
        return car.drivers;
    }, {
        onDelete: 'SET NULL'
    }),
    driver_entity_ts_metadata("design:type", typeof CarModelEntity === "undefined" ? Object : CarModelEntity)
], DriverEntity.prototype, "car", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "carId", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('varchar', {
        nullable: true,
        name: 'carColor'
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "carColorLegacy", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return SavedPaymentMethodEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    driver_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], DriverEntity.prototype, "defaultSavedPaymentMethod", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "defaultSavedPaymentMethodId", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CarColorEntity;
    }, function(carColor) {
        return carColor.drivers;
    }),
    driver_entity_ts_metadata("design:type", typeof CarColorEntity === "undefined" ? Object : CarColorEntity)
], DriverEntity.prototype, "carColor", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "carColorId", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "carProductionYear", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "carPlate", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "searchDistance", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        default: DriverStatus.WaitingDocuments,
        enum: DriverStatus
    }),
    driver_entity_ts_metadata("design:type", typeof DriverStatus === "undefined" ? Object : DriverStatus)
], DriverEntity.prototype, "status", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        nullable: true,
        enum: Gender
    }),
    driver_entity_ts_metadata("design:type", typeof Gender === "undefined" ? Object : Gender)
], DriverEntity.prototype, "gender", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverEntity.prototype, "registrationTimestamp", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "rating", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('smallint', {
        default: 0
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "reviewCount", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverEntity.prototype, "lastSeenTimestamp", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.favoriteDrivers;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "ridersFavorited", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.blockedDrivers;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "ridersBlocked", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return MediaEntity;
    }, function(media) {
        return media.uploadedByDriver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "uploads", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverServicesServiceEntity;
    }, function(service) {
        return service.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "enabledServices", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return MediaEntity;
    }, function(media) {
        return media.driverDocument;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "documents", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "accountNumber", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "bankName", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "bankRoutingNumber", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "bankSwift", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "address", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "notificationPlayerId", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'documentsNote'
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "softRejectionNote", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    driver_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverEntity.prototype, "deletedAt", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, function(media) {
        return media.driver;
    }),
    (0,external_typeorm_.JoinColumn)(),
    driver_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], DriverEntity.prototype, "media", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "mediaId", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "presetAvatarNumber", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return PayoutAccountEntity;
    }, function(payoutAccount) {
        return payoutAccount.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "payoutAccounts", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FeedbackEntity;
    }, function(feedback) {
        return feedback.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "feedbacks", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return FleetEntity;
    }, function(fleet) {
        return fleet.drivers;
    }),
    driver_entity_ts_metadata("design:type", typeof FleetEntity === "undefined" ? Object : FleetEntity)
], DriverEntity.prototype, "fleet", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "fleetId", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverWalletEntity;
    }, function(wallet) {
        return wallet.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "wallet", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(driverTransaction) {
        return driverTransaction.driver;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'RESTRICT'
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "transactions", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.driver;
    }, {
        onDelete: 'SET NULL',
        onUpdate: 'CASCADE'
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "orders", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FleetTransactionEntity;
    }, function(fleetTransaction) {
        return fleetTransaction.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "fleetTransactions", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.spotOwner;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "parkOrders", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SavedPaymentMethodEntity;
    }, function(savedPaymentMethod) {
        return savedPaymentMethod.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "savedPaymentMethods", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderReviewEntity;
    }, function(review) {
        return review.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "reviewsByDriver", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverSessionEntity;
    }, function(session) {
        return session.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "sessions", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverToDriverDocumentEntity;
    }, function(driverToDriverDocument) {
        return driverToDriverDocument.driverDocument;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "driverToDriverDocuments", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverNoteEntity;
    }, function(note) {
        return note.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "notes", void 0);
DriverEntity = driver_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver')
], DriverEntity);

;// ../../libs/database/src/lib/entities/taxi/car-color.entity.ts
function car_color_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function car_color_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var CarColorEntity = function CarColorEntity() {
    "use strict";
};
car_color_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    car_color_entity_ts_metadata("design:type", Number)
], CarColorEntity.prototype, "id", void 0);
car_color_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    car_color_entity_ts_metadata("design:type", String)
], CarColorEntity.prototype, "name", void 0);
car_color_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.carColor;
    }),
    car_color_entity_ts_metadata("design:type", Array)
], CarColorEntity.prototype, "drivers", void 0);
CarColorEntity = car_color_entity_ts_decorate([
    (0,external_typeorm_.Entity)('car_color')
], CarColorEntity);

;// ../../libs/database/src/lib/entities/provider-wallet.entity.ts
function provider_wallet_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function provider_wallet_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var ProviderWalletEntity = function ProviderWalletEntity() {
    "use strict";
};
provider_wallet_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    provider_wallet_entity_ts_metadata("design:type", Number)
], ProviderWalletEntity.prototype, "id", void 0);
provider_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0.0,
        name: 'amount'
    }),
    provider_wallet_entity_ts_metadata("design:type", Number)
], ProviderWalletEntity.prototype, "balance", void 0);
provider_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    provider_wallet_entity_ts_metadata("design:type", String)
], ProviderWalletEntity.prototype, "currency", void 0);
ProviderWalletEntity = provider_wallet_entity_ts_decorate([
    (0,external_typeorm_.Entity)('admin_wallet')
], ProviderWalletEntity);

;// external "typeorm/decorator/entity/Entity"
const Entity_namespaceObject = require("typeorm/decorator/entity/Entity");
;// ../../libs/database/src/lib/entities/enums/payment-status.enum.ts
var PaymentStatus;
(function(PaymentStatus) {
    PaymentStatus["Processing"] = "processing";
    PaymentStatus["Authorized"] = "authorized";
    PaymentStatus["Success"] = "success";
    PaymentStatus["Canceled"] = "canceled";
    PaymentStatus["Failed"] = "failed";
})(PaymentStatus || (PaymentStatus = {}));

;// ../../libs/database/src/lib/entities/payment.entity.ts
function payment_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function payment_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var PaymentEntity = function PaymentEntity() {
    "use strict";
};
payment_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    payment_entity_ts_metadata("design:type", Number)
], PaymentEntity.prototype, "id", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PaymentStatus,
        default: PaymentStatus.Processing
    }),
    payment_entity_ts_metadata("design:type", typeof PaymentStatus === "undefined" ? Object : PaymentStatus)
], PaymentEntity.prototype, "status", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    payment_entity_ts_metadata("design:type", Number)
], PaymentEntity.prototype, "amount", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payment_entity_ts_metadata("design:type", String)
], PaymentEntity.prototype, "currency", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payment_entity_ts_metadata("design:type", String)
], PaymentEntity.prototype, "transactionNumber", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)('text', {
        nullable: true
    }),
    payment_entity_ts_metadata("design:type", String)
], PaymentEntity.prototype, "externalReferenceNumber", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    (0,external_typeorm_.Index)('INDEX_ORDER_NUMBER'),
    payment_entity_ts_metadata("design:type", String)
], PaymentEntity.prototype, "orderNumber", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payment_entity_ts_metadata("design:type", String)
], PaymentEntity.prototype, "userType", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payment_entity_ts_metadata("design:type", String)
], PaymentEntity.prototype, "userId", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    payment_entity_ts_metadata("design:type", Number)
], PaymentEntity.prototype, "gatewayId", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    payment_entity_ts_metadata("design:type", Number)
], PaymentEntity.prototype, "savedPaymentMethodId", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payment_entity_ts_metadata("design:type", String)
], PaymentEntity.prototype, "returnUrl", void 0);
PaymentEntity = payment_entity_ts_decorate([
    (0,Entity_namespaceObject.Entity)('payment')
], PaymentEntity);

;// ../../libs/database/src/lib/entities/enums/sms-status.enum.ts

var SMSStatus;
(function(SMSStatus) {
    SMSStatus["PENDING"] = "PENDING";
    SMSStatus["SENT"] = "SENT";
    SMSStatus["FAILED"] = "FAILED";
    SMSStatus["DELIVERED"] = "DELIVERED";
    SMSStatus["UNDELIVERED"] = "UNDELIVERED";
    SMSStatus["REJECTED"] = "REJECTED";
    SMSStatus["EXPIRED"] = "EXPIRED";
})(SMSStatus || (SMSStatus = {}));
(0,graphql_.registerEnumType)(SMSStatus, {
    name: 'SMSStatus'
});

;// ../../libs/database/src/lib/entities/enums/sms-type.enum.ts

var SMSType;
(function(SMSType) {
    SMSType["OTP"] = "OTP";
    SMSType["NOTIFICATION"] = "NOTIFICATION";
    SMSType["PROMOTIONAL"] = "PROMOTIONAL";
    SMSType["TRANSACTIONAL"] = "TRANSACTIONAL";
})(SMSType || (SMSType = {}));
(0,graphql_.registerEnumType)(SMSType, {
    name: 'SMSType'
});

;// ../../libs/database/src/lib/entities/enums/sms-provider-type.enum.ts

var SMSProviderType;
(function(SMSProviderType) {
    SMSProviderType["Firebase"] = "Firebase";
    SMSProviderType["Twilio"] = "Twilio";
    SMSProviderType["Plivo"] = "Plivo";
    SMSProviderType["Pahappa"] = "Pahappa";
    SMSProviderType["BroadNet"] = "BroadNet";
    SMSProviderType["Vonage"] = "Vonage";
    SMSProviderType["ClickSend"] = "ClickSend";
    SMSProviderType["Infobip"] = "Infobip";
    SMSProviderType["MessageBird"] = "MessageBird";
    SMSProviderType["VentisSMS"] = "VentisSMS";
    SMSProviderType["SMSC"] = "SMSC";
})(SMSProviderType || (SMSProviderType = {}));
(0,graphql_.registerEnumType)(SMSProviderType, {
    name: 'SMSProviderType',
    description: 'The type of the SMS provider'
});

;// ../../libs/database/src/lib/entities/sms-provider.entity.ts
function sms_provider_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function sms_provider_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var SMSProviderEntity = function SMSProviderEntity() {
    "use strict";
};
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    sms_provider_entity_ts_metadata("design:type", Number)
], SMSProviderEntity.prototype, "id", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'enum',
        enum: SMSProviderType
    }),
    sms_provider_entity_ts_metadata("design:type", typeof SMSProviderType === "undefined" ? Object : SMSProviderType)
], SMSProviderEntity.prototype, "type", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    sms_provider_entity_ts_metadata("design:type", Boolean)
], SMSProviderEntity.prototype, "isDefault", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sms_provider_entity_ts_metadata("design:type", String)
], SMSProviderEntity.prototype, "name", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    sms_provider_entity_ts_metadata("design:type", String)
], SMSProviderEntity.prototype, "accountId", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    sms_provider_entity_ts_metadata("design:type", String)
], SMSProviderEntity.prototype, "authToken", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    sms_provider_entity_ts_metadata("design:type", String)
], SMSProviderEntity.prototype, "fromNumber", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)('text', {
        nullable: true
    }),
    sms_provider_entity_ts_metadata("design:type", String)
], SMSProviderEntity.prototype, "verificationTemplate", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    sms_provider_entity_ts_metadata("design:type", String)
], SMSProviderEntity.prototype, "smsType", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    sms_provider_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], SMSProviderEntity.prototype, "createdAt", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    sms_provider_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], SMSProviderEntity.prototype, "deletedAt", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SMSEntity;
    }, function(message) {
        return message.provider;
    }),
    sms_provider_entity_ts_metadata("design:type", Array)
], SMSProviderEntity.prototype, "messages", void 0);
SMSProviderEntity = sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Entity)('sms_provider')
], SMSProviderEntity);

;// ../../libs/database/src/lib/entities/sms.entity.ts
function sms_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function sms_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var SMSEntity = function SMSEntity() {
    "use strict";
};
sms_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    sms_entity_ts_metadata("design:type", Number)
], SMSEntity.prototype, "id", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sms_entity_ts_metadata("design:type", String)
], SMSEntity.prototype, "countryIsoCode", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sms_entity_ts_metadata("design:type", String)
], SMSEntity.prototype, "to", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sms_entity_ts_metadata("design:type", String)
], SMSEntity.prototype, "from", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sms_entity_ts_metadata("design:type", String)
], SMSEntity.prototype, "message", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: SMSStatus,
        default: SMSStatus.PENDING
    }),
    sms_entity_ts_metadata("design:type", typeof SMSStatus === "undefined" ? Object : SMSStatus)
], SMSEntity.prototype, "status", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: SMSType
    }),
    sms_entity_ts_metadata("design:type", typeof SMSType === "undefined" ? Object : SMSType)
], SMSEntity.prototype, "type", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SMSProviderEntity;
    }, function(provider) {
        return provider.messages;
    }),
    sms_entity_ts_metadata("design:type", typeof SMSProviderEntity === "undefined" ? Object : SMSProviderEntity)
], SMSEntity.prototype, "provider", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sms_entity_ts_metadata("design:type", Number)
], SMSEntity.prototype, "providerId", void 0);
SMSEntity = sms_entity_ts_decorate([
    (0,external_typeorm_.Entity)('sms')
], SMSEntity);

;// ../../libs/database/src/lib/entities/shop/cart-product.entity.ts
function cart_product_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function cart_product_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var CartProductEntity = function CartProductEntity() {
    "use strict";
};
cart_product_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    cart_product_entity_ts_metadata("design:type", Number)
], CartProductEntity.prototype, "id", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CartEntity;
    }, function(cart) {
        return cart.products;
    }),
    cart_product_entity_ts_metadata("design:type", typeof CartEntity === "undefined" ? Object : CartEntity)
], CartProductEntity.prototype, "cart", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    cart_product_entity_ts_metadata("design:type", Number)
], CartProductEntity.prototype, "cartId", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ProductEntity;
    }),
    cart_product_entity_ts_metadata("design:type", typeof ProductEntity === "undefined" ? Object : ProductEntity)
], CartProductEntity.prototype, "product", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    cart_product_entity_ts_metadata("design:type", Number)
], CartProductEntity.prototype, "productId", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'int',
        default: 1
    }),
    cart_product_entity_ts_metadata("design:type", Number)
], CartProductEntity.prototype, "quantity", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ProductVariantEntity;
    }),
    cart_product_entity_ts_metadata("design:type", typeof ProductVariantEntity === "undefined" ? Object : ProductVariantEntity)
], CartProductEntity.prototype, "productVariant", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    cart_product_entity_ts_metadata("design:type", Number)
], CartProductEntity.prototype, "productVariantId", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductOptionEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    cart_product_entity_ts_metadata("design:type", Array)
], CartProductEntity.prototype, "productOptions", void 0);
CartProductEntity = cart_product_entity_ts_decorate([
    (0,external_typeorm_.Entity)('cart_product')
], CartProductEntity);

;// ../../libs/database/src/lib/entities/shop/cart-group.entity.ts
function cart_group_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function cart_group_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var CartGroupEntity = function CartGroupEntity() {
    "use strict";
};
cart_group_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "id", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    cart_group_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CartGroupEntity.prototype, "createdAt", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }),
    cart_group_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], CartGroupEntity.prototype, "customer", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "customerId", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return RiderAddressEntity;
    }),
    cart_group_entity_ts_metadata("design:type", typeof RiderAddressEntity === "undefined" ? Object : RiderAddressEntity)
], CartGroupEntity.prototype, "deliveryAddress", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "deliveryAddressId", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DeliveryMethod
    }),
    cart_group_entity_ts_metadata("design:type", typeof DeliveryMethod === "undefined" ? Object : DeliveryMethod)
], CartGroupEntity.prototype, "deliveryMethod", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "bathDeliveryMethodDeliveryFee", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "splitDeliveryMethodDeliveryFee", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "batchDeliveryDuration", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "subtotal", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "deliveryFee", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "tax", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "discount", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "serviceFee", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "total", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CartEntity;
    }, function(cart) {
        return cart.cartGroup;
    }),
    cart_group_entity_ts_metadata("design:type", Array)
], CartGroupEntity.prototype, "carts", void 0);
CartGroupEntity = cart_group_entity_ts_decorate([
    (0,external_typeorm_.Entity)('cart_group')
], CartGroupEntity);

;// ../../libs/database/src/lib/entities/shop/cart.entity.ts
function cart_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function cart_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var CartEntity = function CartEntity() {
    "use strict";
};
cart_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    cart_entity_ts_metadata("design:type", Number)
], CartEntity.prototype, "id", void 0);
cart_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    cart_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CartEntity.prototype, "createdAt", void 0);
cart_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.carts;
    }),
    cart_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], CartEntity.prototype, "shop", void 0);
cart_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    cart_entity_ts_metadata("design:type", Number)
], CartEntity.prototype, "shopId", void 0);
cart_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CartProductEntity;
    }, function(cartProduct) {
        return cartProduct.cart;
    }),
    cart_entity_ts_metadata("design:type", Array)
], CartEntity.prototype, "products", void 0);
cart_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CartGroupEntity;
    }, function(cartGroup) {
        return cartGroup.carts;
    }),
    cart_entity_ts_metadata("design:type", typeof CartGroupEntity === "undefined" ? Object : CartGroupEntity)
], CartEntity.prototype, "cartGroup", void 0);
cart_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    cart_entity_ts_metadata("design:type", Number)
], CartEntity.prototype, "cartGroupId", void 0);
CartEntity = cart_entity_ts_decorate([
    (0,external_typeorm_.Entity)('cart')
], CartEntity);

// EXTERNAL MODULE: external "@nestjs/config"
var config_ = __webpack_require__(7);
;// ../../libs/database/src/lib/entities/enums/admin-notification-type.enum.ts

var AdminNotificationType;
(function(AdminNotificationType) {
    AdminNotificationType["UserPendingVerification"] = "user_pending_verification";
    AdminNotificationType["SupportRequestSubmitted"] = "support_request_submitted";
    AdminNotificationType["SupportRequestAssigned"] = "support_request_assigned";
    AdminNotificationType["ReviewPendingApproval"] = "review_pending_approval";
})(AdminNotificationType || (AdminNotificationType = {}));
(0,graphql_.registerEnumType)(AdminNotificationType, {
    name: 'AdminNotificationType',
    description: 'The type of admin notification.'
});

;// ../../libs/database/src/lib/entities/admin-notification.entity.ts
function admin_notification_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function admin_notification_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}












var AdminNotificationEntity = function AdminNotificationEntity() {
    "use strict";
};
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "id", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: AdminNotificationType
    }),
    admin_notification_entity_ts_metadata("design:type", typeof AdminNotificationType === "undefined" ? Object : AdminNotificationType)
], AdminNotificationEntity.prototype, "type", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], AdminNotificationEntity.prototype, "operator", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "operatorId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: AppType
    }),
    admin_notification_entity_ts_metadata("design:type", typeof AppType === "undefined" ? Object : AppType)
], AdminNotificationEntity.prototype, "appType", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], AdminNotificationEntity.prototype, "readAt", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], AdminNotificationEntity.prototype, "createdAt", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiSupportRequestEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof TaxiSupportRequestEntity === "undefined" ? Object : TaxiSupportRequestEntity)
], AdminNotificationEntity.prototype, "taxiSupportRequest", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "taxiSupportRequestId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopSupportRequestEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof ShopSupportRequestEntity === "undefined" ? Object : ShopSupportRequestEntity)
], AdminNotificationEntity.prototype, "shopSupportRequest", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "shopSupportRequestId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkingSupportRequestEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof ParkingSupportRequestEntity === "undefined" ? Object : ParkingSupportRequestEntity)
], AdminNotificationEntity.prototype, "parkingSupportRequest", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "parkingSupportRequestId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], AdminNotificationEntity.prototype, "driverPendingVerification", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "driverPendingVerificationId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], AdminNotificationEntity.prototype, "shopPendingVerification", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "shopPendingVerificationId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkSpotEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof ParkSpotEntity === "undefined" ? Object : ParkSpotEntity)
], AdminNotificationEntity.prototype, "parkSpotPendingVerification", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "parkSpotPendingVerificationId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopFeedbackEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof ShopFeedbackEntity === "undefined" ? Object : ShopFeedbackEntity)
], AdminNotificationEntity.prototype, "shopReviewPendingApproval", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "shopReviewPendingApprovalId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkingFeedbackEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof ParkingFeedbackEntity === "undefined" ? Object : ParkingFeedbackEntity)
], AdminNotificationEntity.prototype, "parkingReviewPendingApproval", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "parkingReviewPendingApprovalId", void 0);
AdminNotificationEntity = admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Entity)('admin_notification')
], AdminNotificationEntity);

;// ../../libs/database/src/lib/entities/enums/chart-interval.enum.ts

var ChartInterval;
(function(ChartInterval) {
    ChartInterval["Daily"] = "Daily";
    ChartInterval["Monthly"] = "Monthly";
    ChartInterval["Quarterly"] = "Quarterly";
    ChartInterval["Yearly"] = "Yearly";
})(ChartInterval || (ChartInterval = {}));
(0,graphql_.registerEnumType)(ChartInterval, {
    name: 'ChartInterval'
});

;// ../../libs/database/src/lib/entities/enums/gateway-link-method.ts

var GatewayLinkMethod;
(function(GatewayLinkMethod) {
    GatewayLinkMethod["none"] = "none";
    GatewayLinkMethod["redirect"] = "redirect";
    GatewayLinkMethod["manual"] = "manual";
})(GatewayLinkMethod || (GatewayLinkMethod = {}));
(0,graphql_.registerEnumType)(GatewayLinkMethod, {
    name: 'GatewayLinkMethod',
    description: 'Method of connecting to a payout or saved payment method.'
});

;// ../../libs/database/src/lib/entities/enums/legacy-transaction-type.ts

var LegacyTransactionType;
(function(LegacyTransactionType) {
    LegacyTransactionType["Cash"] = "Cash";
    LegacyTransactionType["Bank"] = "Bank";
    LegacyTransactionType["Gift"] = "Gift";
    LegacyTransactionType["Commission"] = "Commission";
    LegacyTransactionType["Travel"] = "Travel";
    LegacyTransactionType["InApp"] = "InApp";
    LegacyTransactionType["TransferToBank"] = "TransferToBank";
})(LegacyTransactionType || (LegacyTransactionType = {}));
(0,graphql_.registerEnumType)(LegacyTransactionType, {
    name: 'LegacyTransactionType'
});

;// ../../libs/database/src/lib/entities/enums/reward-app-type.ts

var RewardAppType;
(function(RewardAppType) {
    RewardAppType["Driver"] = "Driver";
    RewardAppType["Rider"] = "Rider";
})(RewardAppType || (RewardAppType = {}));
(0,graphql_.registerEnumType)(RewardAppType, {
    name: 'RewardAppType'
});

;// ../../libs/database/src/lib/entities/enums/reward-beneficiary.ts

var RewardBeneficiary;
(function(RewardBeneficiary) {
    RewardBeneficiary["Self"] = "Self";
    RewardBeneficiary["Referrer"] = "Referrer";
})(RewardBeneficiary || (RewardBeneficiary = {}));
(0,graphql_.registerEnumType)(RewardBeneficiary, {
    name: 'RewardBeneficiary'
});

;// ../../libs/database/src/lib/entities/enums/reward-event.ts

var RewardEvent;
(function(RewardEvent) {
    RewardEvent["Register"] = "Register";
    RewardEvent["ServiceCompleted"] = "ServiceCompleted";
})(RewardEvent || (RewardEvent = {}));
(0,graphql_.registerEnumType)(RewardEvent, {
    name: 'RewardEvent'
});

;// ../../libs/database/src/lib/entities/enums/rider-document-type.ts

var RiderDocumentType;
(function(RiderDocumentType) {
    RiderDocumentType["ID"] = "ID";
    RiderDocumentType["Passport"] = "Passport";
    RiderDocumentType["DriverLicense"] = "DriverLicense";
    RiderDocumentType["ResidentPermitID"] = "ResidentPermitID";
})(RiderDocumentType || (RiderDocumentType = {}));
(0,graphql_.registerEnumType)(RiderDocumentType, {
    name: 'RiderDocumentType'
});

;// ../../libs/database/src/lib/entities/enums/time-frequency.enum.ts

var TimeFrequency;
(function(TimeFrequency) {
    TimeFrequency["Daily"] = "daily";
    TimeFrequency["Weekly"] = "weekly";
    TimeFrequency["Monthly"] = "monthly";
    TimeFrequency["Quarterly"] = "quarterly";
    TimeFrequency["Yearly"] = "yearly";
})(TimeFrequency || (TimeFrequency = {}));
(0,graphql_.registerEnumType)(TimeFrequency, {
    name: 'TimeFrequency'
});

;// ../../libs/database/src/lib/entities/enums/version-status.enum.ts

var VersionStatus;
(function(VersionStatus) {
    VersionStatus["Latest"] = "Latest";
    VersionStatus["MandatoryUpdate"] = "MandatoryUpdate";
    VersionStatus["OptionalUpdate"] = "OptionalUpdate";
})(VersionStatus || (VersionStatus = {}));
(0,graphql_.registerEnumType)(VersionStatus, {
    name: 'VersionStatus'
});

;// ../../libs/database/src/lib/entities/reward.entity.ts
function reward_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function reward_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var RewardEntity = function RewardEntity() {
    "use strict";
};
reward_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    reward_entity_ts_metadata("design:type", Number)
], RewardEntity.prototype, "id", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    reward_entity_ts_metadata("design:type", String)
], RewardEntity.prototype, "title", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    reward_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], RewardEntity.prototype, "startDate", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    reward_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], RewardEntity.prototype, "endDate", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RewardAppType
    }),
    reward_entity_ts_metadata("design:type", typeof RewardAppType === "undefined" ? Object : RewardAppType)
], RewardEntity.prototype, "appType", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RewardBeneficiary
    }),
    reward_entity_ts_metadata("design:type", typeof RewardBeneficiary === "undefined" ? Object : RewardBeneficiary)
], RewardEntity.prototype, "beneficiary", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RewardEvent
    }),
    reward_entity_ts_metadata("design:type", typeof RewardEvent === "undefined" ? Object : RewardEvent)
], RewardEntity.prototype, "event", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    reward_entity_ts_metadata("design:type", Number)
], RewardEntity.prototype, "creditGift", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    reward_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], RewardEntity.prototype, "deletedAt", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    reward_entity_ts_metadata("design:type", Number)
], RewardEntity.prototype, "tripFeePercentGift", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: 3,
        nullable: true
    }),
    reward_entity_ts_metadata("design:type", String)
], RewardEntity.prototype, "creditCurrency", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    reward_entity_ts_metadata("design:type", Number)
], RewardEntity.prototype, "conditionTripCountsLessThan", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('simple-array', {
        nullable: true
    }),
    reward_entity_ts_metadata("design:type", Array)
], RewardEntity.prototype, "conditionUserNumberFirstDigits", void 0);
RewardEntity = reward_entity_ts_decorate([
    (0,external_typeorm_.Entity)('reward')
], RewardEntity);

;// ../../libs/database/src/lib/entities/shop/enums/shop-customer-notification-type.enum.ts

var ShopCustomerNotificationType;
(function(ShopCustomerNotificationType) {
    ShopCustomerNotificationType["OrderCancelled"] = "order_cancelled";
    ShopCustomerNotificationType["OrderShipped"] = "order_shipped";
    ShopCustomerNotificationType["RateYourOrder"] = "rate_your_order";
    ShopCustomerNotificationType["OrderDelays"] = "order_delays";
    ShopCustomerNotificationType["OrderRefund"] = "order_refund";
    ShopCustomerNotificationType["SupportRequestUpdate"] = "support_request_update";
    ShopCustomerNotificationType["Announcement"] = "announcement";
})(ShopCustomerNotificationType || (ShopCustomerNotificationType = {}));
(0,graphql_.registerEnumType)(ShopCustomerNotificationType, {
    name: 'ShopCustomerNotificationType',
    description: "The type of customer's shop notification"
});

;// ../../libs/database/src/lib/entities/shop/shop-customer-notification.entity.ts
function shop_customer_notification_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_customer_notification_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






var ShopCustomerNotificationEntity = function ShopCustomerNotificationEntity() {
    "use strict";
};
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_customer_notification_entity_ts_metadata("design:type", Number)
], ShopCustomerNotificationEntity.prototype, "id", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopCustomerNotificationType
    }),
    shop_customer_notification_entity_ts_metadata("design:type", typeof ShopCustomerNotificationType === "undefined" ? Object : ShopCustomerNotificationType)
], ShopCustomerNotificationEntity.prototype, "type", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopCustomerNotificationEntity.prototype, "readAt", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_customer_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopCustomerNotificationEntity.prototype, "createdAt", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_notification_entity_ts_metadata("design:type", String)
], ShopCustomerNotificationEntity.prototype, "title", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_notification_entity_ts_metadata("design:type", String)
], ShopCustomerNotificationEntity.prototype, "message", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }),
    shop_customer_notification_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ShopCustomerNotificationEntity.prototype, "customer", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_customer_notification_entity_ts_metadata("design:type", Number)
], ShopCustomerNotificationEntity.prototype, "customerId", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return AnnouncementEntity;
    }),
    shop_customer_notification_entity_ts_metadata("design:type", typeof AnnouncementEntity === "undefined" ? Object : AnnouncementEntity)
], ShopCustomerNotificationEntity.prototype, "announcement", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_notification_entity_ts_metadata("design:type", Number)
], ShopCustomerNotificationEntity.prototype, "announcementId", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_notification_entity_ts_metadata("design:type", Number)
], ShopCustomerNotificationEntity.prototype, "shopOrderId", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }),
    shop_customer_notification_entity_ts_metadata("design:type", typeof ShopOrderEntity === "undefined" ? Object : ShopOrderEntity)
], ShopCustomerNotificationEntity.prototype, "shopOrder", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_notification_entity_ts_metadata("design:type", Number)
], ShopCustomerNotificationEntity.prototype, "shopCustomerSupportRequestId", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopCustomerSupportRequestEntity;
    }),
    shop_customer_notification_entity_ts_metadata("design:type", typeof ShopCustomerSupportRequestEntity === "undefined" ? Object : ShopCustomerSupportRequestEntity)
], ShopCustomerNotificationEntity.prototype, "shopCustomerSupportRequest", void 0);
ShopCustomerNotificationEntity = shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_customer_notification')
], ShopCustomerNotificationEntity);

;// ../../libs/database/src/lib/entities/taxi/driver-shift-rule.entity.ts
function driver_shift_rule_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_shift_rule_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var DriverShiftRuleEntity = function DriverShiftRuleEntity() {
    "use strict";
};
driver_shift_rule_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_shift_rule_entity_ts_metadata("design:type", Number)
], DriverShiftRuleEntity.prototype, "id", void 0);
driver_shift_rule_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TimeFrequency
    }),
    driver_shift_rule_entity_ts_metadata("design:type", typeof TimeFrequency === "undefined" ? Object : TimeFrequency)
], DriverShiftRuleEntity.prototype, "timeFrequency", void 0);
driver_shift_rule_entity_ts_decorate([
    (0,external_typeorm_.Column)('int'),
    driver_shift_rule_entity_ts_metadata("design:type", Number)
], DriverShiftRuleEntity.prototype, "maxHoursPerFrequency", void 0);
driver_shift_rule_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    driver_shift_rule_entity_ts_metadata("design:type", Number)
], DriverShiftRuleEntity.prototype, "mandatoryBreakMinutes", void 0);
DriverShiftRuleEntity = driver_shift_rule_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_shift_rule')
], DriverShiftRuleEntity);

;// ../../libs/database/src/lib/entities/index.ts























































//export * from './enums/service-type.enum';



























































































































































;// ../../libs/database/src/lib/database.module.ts
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function _async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function database_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function _ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function database_module_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

























































































































var DatabaseModule = /*#__PURE__*/ function() {
    "use strict";
    function DatabaseModule(dataSource) {
        this.dataSource = dataSource;
        this.logger = new common_.Logger(DatabaseModule.name);
    }
    var _proto = DatabaseModule.prototype;
    _proto.onModuleInit = function onModuleInit() {
        var _this = this;
        return _async_to_generator(function() {
            var migrations;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        _this.logger.log('Running database migrations...');
                        return [
                            4,
                            _this.dataSource.runMigrations()
                        ];
                    case 1:
                        migrations = _state.sent();
                        _this.logger.log("Completed " + migrations.length + " migrations");
                        return [
                            2
                        ];
                }
            });
        })();
    };
    DatabaseModule.ensureDatabaseExists = function ensureDatabaseExists(configService) {
        return _async_to_generator(function() {
            var dbName, tempConnection, error;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        dbName = configService.get('MYSQL_DB', 'ridy');
                        tempConnection = new external_typeorm_.DataSource({
                            type: 'mysql',
                            host: configService.get('MYSQL_HOST', 'localhost'),
                            port: 3306,
                            username: configService.get('MYSQL_USER', 'root'),
                            password: configService.get('MYSQL_PASS', 'defaultpassword')
                        });
                        _state.label = 1;
                    case 1:
                        _state.trys.push([
                            1,
                            4,
                            5,
                            8
                        ]);
                        return [
                            4,
                            tempConnection.initialize()
                        ];
                    case 2:
                        _state.sent();
                        return [
                            4,
                            tempConnection.query("CREATE DATABASE IF NOT EXISTS `" + dbName + "`")
                        ];
                    case 3:
                        _state.sent();
                        common_.Logger.log("Database '" + dbName + "' ensured to exist");
                        return [
                            3,
                            8
                        ];
                    case 4:
                        error = _state.sent();
                        common_.Logger.error('Failed to create database:', error);
                        throw error;
                    case 5:
                        if (!tempConnection.isInitialized) return [
                            3,
                            7
                        ];
                        return [
                            4,
                            tempConnection.destroy()
                        ];
                    case 6:
                        _state.sent();
                        _state.label = 7;
                    case 7:
                        return [
                            7
                        ];
                    case 8:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return DatabaseModule;
}();
DatabaseModule = database_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            config_.ConfigModule,
            typeorm_.TypeOrmModule.forRootAsync({
                imports: [
                    config_.ConfigModule
                ],
                useFactory: /*#__PURE__*/ _async_to_generator(function(configService) {
                    var logger, dataSource, currentTables, config;
                    return _ts_generator(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                logger = new common_.Logger(DatabaseModule.name);
                                logger.log('Initializing database connection...');
                                // Ensure database exists
                                return [
                                    4,
                                    DatabaseModule.ensureDatabaseExists(configService)
                                ];
                            case 1:
                                _state.sent();
                                // Get current tables count
                                dataSource = new external_typeorm_.DataSource({
                                    type: 'mysql',
                                    host: configService.get('MYSQL_HOST', 'localhost'),
                                    port: 3306,
                                    username: configService.get('MYSQL_USER', 'root'),
                                    password: configService.get('MYSQL_PASS', 'defaultpassword'),
                                    database: configService.get('MYSQL_DB', 'ridy')
                                });
                                if (!!dataSource.isInitialized) return [
                                    3,
                                    3
                                ];
                                return [
                                    4,
                                    dataSource.initialize()
                                ];
                            case 2:
                                _state.sent();
                                _state.label = 3;
                            case 3:
                                return [
                                    4,
                                    dataSource.query("SELECT COUNT(*) as count FROM information_schema.tables WHERE table_schema = ?", [
                                        configService.get('MYSQL_DB', 'ridy')
                                    ])
                                ];
                            case 4:
                                currentTables = _state.sent();
                                logger.log("Current tables count: " + currentTables[0].count);
                                return [
                                    4,
                                    dataSource.destroy()
                                ];
                            case 5:
                                _state.sent();
                                config = {
                                    type: 'mysql',
                                    host: configService.get('MYSQL_HOST', 'localhost'),
                                    port: 3306,
                                    username: configService.get('MYSQL_USER', 'root'),
                                    password: configService.get('MYSQL_PASS', 'defaultpassword'),
                                    database: configService.get('MYSQL_DB', 'ridy'),
                                    entities: entities,
                                    legacySpatialSupport: false,
                                    migrations: [
                                        "" + __dirname + "/migrations/*.js"
                                    ],
                                    migrationsRun: true,
                                    synchronize: configService.get('NODE_ENV') === 'dev' || configService.get('FORCE_SYNC_DB', false) || currentTables[0].count < 10,
                                    // logging: configService.get('NODE_ENV') === 'dev',
                                    logging: true
                                };
                                logger.log('Database connection configured');
                                return [
                                    2,
                                    config
                                ];
                        }
                    });
                }),
                inject: [
                    config_.ConfigService
                ]
            })
        ]
    }),
    database_module_ts_metadata("design:type", Function),
    database_module_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.DataSource === "undefined" ? Object : external_typeorm_.DataSource
    ])
], DatabaseModule);
var entities = [
    MediaEntity,
    OperatorEntity,
    OperatorRoleEntity,
    OperatorSessionEntity,
    DriverEntity,
    DriverSessionEntity,
    ProviderTransactionEntity,
    ProviderWalletEntity,
    TaxiSupportRequestActivityEntity,
    TaxiSupportRequestEntity,
    CarModelEntity,
    CarColorEntity,
    DriverTransactionEntity,
    DriverWalletEntity,
    FeedbackParameterEntity,
    FeedbackEntity,
    FleetEntity,
    FleetWalletEntity,
    FleetTransactionEntity,
    FleetStaffEntity,
    FleetStaffSessionEntity,
    TaxiOrderEntity,
    OrderMessageEntity,
    OrderCancelReasonEntity,
    PaymentGatewayEntity,
    PaymentEntity,
    ServiceEntity,
    ServiceCategoryEntity,
    CouponEntity,
    RegionEntity,
    RegionCategoryEntity,
    CustomerEntity,
    RiderWalletEntity,
    RiderTransactionEntity,
    RiderAddressEntity,
    ServiceOptionEntity,
    GiftBatchEntity,
    GiftCodeEntity,
    SOSEntity,
    SOSActivityEntity,
    AnnouncementEntity,
    ZonePriceEntity,
    GatewayToUserEntity,
    SavedPaymentMethodEntity,
    RiderReviewEntity,
    PayoutMethodEntity,
    PayoutAccountEntity,
    TaxiPayoutSessionEntity,
    ShopPayoutSessionEntity,
    ShopDocumentEntity,
    ShopToShopDocumentEntity,
    ShopDocumentRetentionPolicyEntity,
    ParkingPayoutSessionEntity,
    ParkSpotEntity,
    ParkOrderEntity,
    ParkingFeedbackEntity,
    ParkingFeedbackParameterEntity,
    ParkingCustomerNotificationEntity,
    ParkingProviderNotificationEntity,
    ShopOrderEntity,
    ShopNoteEntity,
    ShopOrderCartEntity,
    ShopOrderCartProductEntity,
    ShopProductPresetEntity,
    ProductVariantEntity,
    ProductEntity,
    ProductOptionEntity,
    ProductCategoryEntity,
    ShopEntity,
    ShopCategoryEntity,
    ShopDeliveryZoneEntity,
    ShopFeedbackEntity,
    ShopFeedbackParameterEntity,
    ShopSessionEntity,
    CustomerSessionEntity,
    RequestActivityEntity,
    ZonePriceCategoryEntity,
    ShopSupportRequestEntity,
    ShopSupportRequestActivityEntity,
    TaxiOrderNoteEntity,
    ParkingLoginSessionEntity,
    ShopLoginSessionEntity,
    ShopOrderNoteEntity,
    ShopOrderStatusHistoryEntity,
    ShopTransactionEntity,
    ShopWalletEntity,
    ParkingWalletEntity,
    ParkingTransactionEntity,
    ParkSpotNoteEntity,
    ParkOrderNoteEntity,
    ParkOrderActivityEntity,
    ParkingSupportRequestEntity,
    ParkingSupportRequestActivityEntity,
    ShopSupportRequestEntity,
    ShopSupportRequestActivityEntity,
    CustomerNoteEntity,
    CampaignEntity,
    CampaignCodeEntity,
    SOSReasonEntity,
    DriverToDriverDocumentEntity,
    DriverDocumentEntity,
    DriverDocumentRetentionPolicyEntity,
    DriverNoteEntity,
    SMSEntity,
    SMSProviderEntity,
    TaxiPayoutSessionPayoutMethodDetailEntity,
    ShopPayoutSessionPayoutMethodDetailEntity,
    ShopSubcategoryEntity,
    ShopNotificationEntity,
    ParkingPayoutSessionPayoutMethodDetailEntity,
    CustomerFavoriteProductEntity,
    ShopCustomerSupportRequestEntity,
    ShopCustomerSupportRequestActivityEntity,
    CartEntity,
    CartProductEntity,
    CartGroupEntity,
    TaxiOrderShopEntity,
    DriverServicesServiceEntity,
    DriverShiftRuleEntity,
    RewardEntity
];

// EXTERNAL MODULE: external "@ptc-org/nestjs-query-graphql"
var nestjs_query_graphql_ = __webpack_require__(12);
// EXTERNAL MODULE: external "graphql-redis-subscriptions"
var external_graphql_redis_subscriptions_ = __webpack_require__(13);
;// external "ioredis"
const external_ioredis_namespaceObject = require("ioredis");
var external_ioredis_default = /*#__PURE__*/__webpack_require__.n(external_ioredis_namespaceObject);
;// ../../libs/database/src/lib/redis-pub-sub.provider.ts



var RedisPubSubProvider = /*#__PURE__*/ function() {
    "use strict";
    function RedisPubSubProvider() {}
    RedisPubSubProvider.provider = function provider() {
        return {
            provide: (0,nestjs_query_graphql_.pubSubToken)(),
            useFactory: function() {
                var options = {
                    host: process.env.REDIS_HOST || 'localhost',
                    port: 6379
                };
                return new external_graphql_redis_subscriptions_.RedisPubSub({
                    publisher: new (external_ioredis_default())(options),
                    subscriber: new (external_ioredis_default())(options)
                });
            }
        };
    };
    return RedisPubSubProvider;
}();

;// external "crypto"
const external_crypto_namespaceObject = require("crypto");
;// ../../libs/database/src/lib/crypto/crypto.service.ts
function crypto_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function crypto_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                crypto_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                crypto_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function crypto_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function crypto_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}


var CryptoService = /*#__PURE__*/ function() {
    "use strict";
    function CryptoService() {
        this.ENCRYPTION_KEY = process.env.ENCRYPTION_KEY // Must be 256 bits (32 characters)
        ;
        this.IV_LENGTH = 16 // For AES, this is always 16
        ;
    }
    var _proto = CryptoService.prototype;
    _proto.encrypt = function encrypt(text) {
        var _this = this;
        return crypto_service_async_to_generator(function() {
            var iv, cipher, encrypted;
            return crypto_service_ts_generator(this, function(_state) {
                iv = (0,external_crypto_namespaceObject.randomBytes)(_this.IV_LENGTH);
                cipher = (0,external_crypto_namespaceObject.createCipheriv)('aes-256-cbc', Buffer.from(_this.ENCRYPTION_KEY), iv);
                encrypted = cipher.update(text);
                encrypted = Buffer.concat([
                    encrypted,
                    cipher.final()
                ]);
                return [
                    2,
                    iv.toString('hex') + ':' + encrypted.toString('hex')
                ];
            });
        })();
    };
    _proto.decrypt = function decrypt(text) {
        var _this = this;
        return crypto_service_async_to_generator(function() {
            var textParts, iv, encryptedText, decipher, decrypted;
            return crypto_service_ts_generator(this, function(_state) {
                textParts = text.split(':');
                iv = Buffer.from(textParts.shift(), 'hex');
                encryptedText = Buffer.from(textParts.join(':'), 'hex');
                decipher = (0,external_crypto_namespaceObject.createDecipheriv)('aes-256-cbc', Buffer.from(_this.ENCRYPTION_KEY), iv);
                decrypted = decipher.update(encryptedText);
                decrypted = Buffer.concat([
                    decrypted,
                    decipher.final()
                ]);
                return [
                    2,
                    JSON.parse(decrypted.toString())
                ];
            });
        })();
    };
    return CryptoService;
}();
CryptoService = crypto_service_ts_decorate([
    (0,common_.Injectable)()
], CryptoService);

;// external "fs"
const external_fs_namespaceObject = require("fs");
;// ../../libs/database/src/lib/shared-configuration.service.ts
function shared_configuration_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_configuration_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_configuration_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_configuration_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_configuration_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_configuration_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}


var SharedConfigurationService = /*#__PURE__*/ function() {
    "use strict";
    function SharedConfigurationService() {}
    var _proto = SharedConfigurationService.prototype;
    _proto.getConfiguration = function getConfiguration() {
        return shared_configuration_service_async_to_generator(function() {
            var _process_env_NODE_ENV, configAddress, file, config, firebaseKeyFileAddress;
            return shared_configuration_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        console.log(process.env.NODE_ENV);
                        configAddress = process.cwd() + "/config/config." + ((_process_env_NODE_ENV = process.env.NODE_ENV) != null ? _process_env_NODE_ENV : 'production') + ".json";
                        if (!external_fs_namespaceObject.existsSync(configAddress)) return [
                            3,
                            2
                        ];
                        return [
                            4,
                            external_fs_namespaceObject.promises.readFile(configAddress, {
                                encoding: 'utf-8'
                            })
                        ];
                    case 1:
                        file = _state.sent();
                        config = JSON.parse(file);
                        firebaseKeyFileAddress = process.cwd() + "/config/" + config.firebaseProjectPrivateKey;
                        if (config.firebaseProjectPrivateKey != null && external_fs_namespaceObject.existsSync(firebaseKeyFileAddress)) {
                            config.purchaseCode = 'RESTRICTED';
                            config.firebaseProjectPrivateKey = 'RESTRICTED';
                            return [
                                2,
                                config
                            ];
                        }
                        return [
                            2,
                            config
                        ];
                    case 2:
                        return [
                            2,
                            {}
                        ];
                    case 3:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return SharedConfigurationService;
}();
SharedConfigurationService = shared_configuration_service_ts_decorate([
    (0,common_.Injectable)()
], SharedConfigurationService);

;// ../../libs/database/src/lib/shop/shared-shop.service.ts
function shared_shop_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_shop_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_shop_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_shop_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_shop_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_shop_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_shop_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function _ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}




var SharedShopService = /*#__PURE__*/ function() {
    "use strict";
    function SharedShopService(shopRepository) {
        this.shopRepository = shopRepository;
    }
    var _proto = SharedShopService.prototype;
    _proto.findById = function findById(id) {
        var _this = this;
        return shared_shop_service_async_to_generator(function() {
            return shared_shop_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.shopRepository.findOneOrFail({
                        where: {
                            id: id
                        },
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.findWithDeleted = function findWithDeleted(filter) {
        var _this = this;
        return shared_shop_service_async_to_generator(function() {
            return shared_shop_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.shopRepository.findOne({
                        where: filter,
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.findUserByMobileNumber = function findUserByMobileNumber(mobileNumber) {
        var _this = this;
        return shared_shop_service_async_to_generator(function() {
            return shared_shop_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.shopRepository.findOne({
                        where: {
                            mobileNumber: {
                                number: mobileNumber
                            }
                        },
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.createUserWithMobileNumber = function createUserWithMobileNumber(input) {
        var _this = this;
        return shared_shop_service_async_to_generator(function() {
            var shop;
            return shared_shop_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log('creating rider with ');
                        shop = _this.shopRepository.create({
                            mobileNumber: {
                                number: input.mobileNumber,
                                countryCode: input.countryIso
                            }
                        });
                        return [
                            4,
                            _this.shopRepository.save(shop)
                        ];
                    case 1:
                        shop = _state.sent();
                        return [
                            2,
                            shop
                        ];
                }
            });
        })();
    };
    _proto.updateLastActivity = function updateLastActivity(riderId) {
        return this.shopRepository.update(riderId, {
            lastActivityAt: new Date()
        });
    };
    _proto.findOrCreateUserWithMobileNumber = function findOrCreateUserWithMobileNumber(input) {
        var _this = this;
        return shared_shop_service_async_to_generator(function() {
            var findResult;
            return shared_shop_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.findUserByMobileNumber(input.mobileNumber)
                        ];
                    case 1:
                        findResult = _state.sent();
                        if (!((findResult == null ? void 0 : findResult.deletedAt) != null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.shopRepository.restore(findResult == null ? void 0 : findResult.id)
                        ];
                    case 2:
                        _state.sent();
                        _state.label = 3;
                    case 3:
                        if (!(findResult == null)) return [
                            3,
                            5
                        ];
                        return [
                            4,
                            _this.createUserWithMobileNumber(input)
                        ];
                    case 4:
                        return [
                            2,
                            _state.sent()
                        ];
                    case 5:
                        return [
                            2,
                            findResult
                        ];
                    case 6:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.deleteById = function deleteById(id) {
        var _this = this;
        return shared_shop_service_async_to_generator(function() {
            var user;
            return shared_shop_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.findById(id)
                        ];
                    case 1:
                        user = _state.sent();
                        return [
                            4,
                            _this.shopRepository.softDelete(id)
                        ];
                    case 2:
                        _state.sent();
                        return [
                            2,
                            user
                        ];
                }
            });
        })();
    };
    return SharedShopService;
}();
SharedShopService = shared_shop_service_ts_decorate([
    (0,common_.Injectable)(),
    _ts_param(0, (0,typeorm_.InjectRepository)(ShopEntity)),
    shared_shop_service_ts_metadata("design:type", Function),
    shared_shop_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SharedShopService);

;// external "@googlemaps/routing"
const routing_namespaceObject = require("@googlemaps/routing");
// EXTERNAL MODULE: external "@nestjs/apollo"
var apollo_ = __webpack_require__(6);
;// ../../libs/database/src/lib/order/google-services/google-services.service.ts
function google_services_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function google_services_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                google_services_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                google_services_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function google_services_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function google_services_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function google_services_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var GoogleServicesService = /*#__PURE__*/ function() {
    "use strict";
    function GoogleServicesService(configurationService) {
        this.configurationService = configurationService;
    }
    var _proto = GoogleServicesService.prototype;
    _proto.getSumDistanceAndDuration = function getSumDistanceAndDuration(points) {
        var _this = this;
        return google_services_service_async_to_generator(function() {
            var config, client, waypoints, _routesResponse__routes, _route_duration_seconds, _route_duration, _route_polyline_encodedPolyline, _route_polyline, routesResponse, route, distance, duration, directions, exception;
            return google_services_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.configurationService.getConfiguration()
                        ];
                    case 1:
                        config = _state.sent();
                        client = new routing_namespaceObject.RoutesClient({
                            apiKey: config == null ? void 0 : config.backendMapsAPIKey,
                            retryOptions: {
                                maxRetries: 3,
                                initialRetryDelayMillis: 1000,
                                retryDelayMultiplier: 2,
                                maxRetryDelayMillis: 10000
                            }
                        });
                        waypoints = points.map(function(point) {
                            return {
                                location: {
                                    latLng: {
                                        latitude: point.lat,
                                        longitude: point.lng
                                    }
                                }
                            };
                        });
                        _state.label = 2;
                    case 2:
                        _state.trys.push([
                            2,
                            4,
                            ,
                            5
                        ]);
                        return [
                            4,
                            client.computeRoutes({
                                origin: waypoints[0],
                                destination: waypoints[waypoints.length - 1],
                                intermediates: waypoints.length > 2 ? waypoints.slice(1, -1) : [],
                                travelMode: 'DRIVE',
                                routingPreference: 'TRAFFIC_AWARE_OPTIMAL',
                                computeAlternativeRoutes: false,
                                routeModifiers: {
                                    avoidTolls: false,
                                    avoidHighways: false,
                                    avoidFerries: false
                                },
                                languageCode: 'en-US',
                                units: 'METRIC'
                            }, {
                                otherArgs: {
                                    headers: {
                                        'X-Goog-FieldMask': 'routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline'
                                    }
                                }
                            })
                        ];
                    case 3:
                        routesResponse = _state.sent();
                        if (((_routesResponse__routes = routesResponse[0].routes) == null ? void 0 : _routesResponse__routes.length) === 0 || !routesResponse[0].routes) {
                            throw new apollo_.ForbiddenError(routesResponse.toString());
                        }
                        route = routesResponse[0].routes[0];
                        distance = route.distanceMeters || 0;
                        duration = parseInt(((_route_duration = route.duration) == null ? void 0 : (_route_duration_seconds = _route_duration.seconds) == null ? void 0 : _route_duration_seconds.toString().replace('s', '')) || '0', 10);
                        directions = _this.decode(((_route_polyline = route.polyline) == null ? void 0 : (_route_polyline_encodedPolyline = _route_polyline.encodedPolyline) == null ? void 0 : _route_polyline_encodedPolyline.toString()) || '');
                        return [
                            2,
                            {
                                distance: distance,
                                duration: duration,
                                directions: directions
                            }
                        ];
                    case 4:
                        exception = _state.sent();
                        common_.Logger.error(exception);
                        throw new apollo_.ForbiddenError('NO_ROUTE_FOUND');
                    case 5:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.findTheBestRoute = function findTheBestRoute(shops, deliveryAddress) {
        var _this = this;
        return google_services_service_async_to_generator(function() {
            var _route__routes, config, client, farthestShop, route;
            return google_services_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.configurationService.getConfiguration()
                        ];
                    case 1:
                        config = _state.sent();
                        client = new routing_namespaceObject.RoutesClient({
                            apiKey: config == null ? void 0 : config.backendMapsAPIKey,
                            retryOptions: {
                                maxRetries: 3,
                                initialRetryDelayMillis: 1000,
                                retryDelayMultiplier: 2,
                                maxRetryDelayMillis: 10000
                            }
                        });
                        // find the farthest shop from the delivery address based on the distance
                        // between the delivery address and the shop locations
                        farthestShop = shops.reduce(function(a, b) {
                            return _this.distancePoints(a.location, deliveryAddress.location) > _this.distancePoints(b.location, deliveryAddress.location) ? a : b;
                        });
                        return [
                            4,
                            client.computeRoutes({
                                origin: {
                                    location: {
                                        latLng: {
                                            latitude: farthestShop.location.lat,
                                            longitude: farthestShop.location.lng
                                        }
                                    }
                                },
                                destination: {
                                    location: {
                                        latLng: {
                                            latitude: deliveryAddress.location.lat,
                                            longitude: deliveryAddress.location.lng
                                        }
                                    }
                                },
                                intermediates: shops.filter(function(shop) {
                                    return shop.id !== farthestShop.id;
                                }).map(function(shop) {
                                    return {
                                        location: {
                                            latLng: {
                                                latitude: shop.location.lat,
                                                longitude: shop.location.lng
                                            }
                                        }
                                    };
                                }),
                                travelMode: 'DRIVE',
                                routingPreference: 'TRAFFIC_AWARE_OPTIMAL',
                                computeAlternativeRoutes: true,
                                routeModifiers: {
                                    avoidTolls: false,
                                    avoidHighways: false,
                                    avoidFerries: false
                                },
                                languageCode: 'en-US',
                                units: 'METRIC'
                            }, {
                                otherArgs: {
                                    headers: {
                                        'X-Goog-FieldMask': 'routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline'
                                    }
                                }
                            })
                        ];
                    case 2:
                        route = _state.sent();
                        console.log(JSON.stringify(route));
                        common_.Logger.log(route, 'Route');
                        if (((_route__routes = route[0].routes) == null ? void 0 : _route__routes.length) === 0 || !route[0].routes) {
                            throw new apollo_.ForbiddenError('NO_ROUTE_FOUND');
                        }
                        return [
                            2,
                            {
                                shops: [].concat([
                                    farthestShop
                                ], shops.filter(function(shop) {
                                    return shop.id !== farthestShop.id;
                                })),
                                legs: route[0].routes[0].legs
                            }
                        ];
                }
            });
        })();
    };
    _proto.distancePoints = function distancePoints(point1, point2) {
        return Math.sqrt(Math.pow(point1.lat - point2.lat, 2) + Math.pow(point1.lng - point2.lng, 2));
    };
    _proto.decode = function decode(encoded) {
        // array that holds the points
        var points = [];
        var index = 0;
        var len = encoded.length;
        var lat = 0, lng = 0;
        while(index < len){
            var b = void 0, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++).charCodeAt(0) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            }while (b >= 0x20);
            var dlat = (result & 1) != 0 ? ~(result >> 1) : result >> 1;
            lat += dlat;
            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++).charCodeAt(0) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            }while (b >= 0x20);
            var dlng = (result & 1) != 0 ? ~(result >> 1) : result >> 1;
            lng += dlng;
            points.push({
                lat: lat / 1e5,
                lng: lng / 1e5
            });
        }
        return points;
    };
    return GoogleServicesService;
}();
GoogleServicesService = google_services_service_ts_decorate([
    (0,common_.Injectable)(),
    google_services_service_ts_metadata("design:type", Function),
    google_services_service_ts_metadata("design:paramtypes", [
        typeof SharedConfigurationService === "undefined" ? Object : SharedConfigurationService
    ])
], GoogleServicesService);

;// ../../libs/database/src/lib/order/service.service.ts
function _array_like_to_array(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _unsupported_iterable_to_array(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _array_like_to_array(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _array_like_to_array(o, minLen);
}
function _create_for_of_iterator_helper_loose(o, allowArrayLike) {
    var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
    if (it) return (it = it.call(o)).next.bind(it);
    if (Array.isArray(o) || (it = _unsupported_iterable_to_array(o)) || allowArrayLike && o && typeof o.length === "number") {
        if (it) o = it;
        var i = 0;
        return function() {
            if (i >= o.length) {
                return {
                    done: true
                };
            }
            return {
                done: false,
                value: o[i++]
            };
        };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function service_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function service_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function service_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}




var weekdays = [
    'Sunday',
    'Monday',
    'Tuesday',
    'Wednesday',
    'Thursday',
    'Friday',
    'Saturday'
];
var ServiceService = /*#__PURE__*/ function() {
    "use strict";
    function ServiceService(service) {
        this.service = service;
    }
    var _proto = ServiceService.prototype;
    _proto.calculateCost = function calculateCost(service, distance, duration, eta, fleetMultiplier, isResident) {
        if (fleetMultiplier === void 0) fleetMultiplier = 1;
        if (isResident === void 0) isResident = true;
        var i = service.baseFare;
        var multiplier = 1;
        console.log("Calculating Trip fee with base fare " + i + " distance of " + distance + " meters and duration of " + duration);
        i += service.perHundredMeters * distance / 100 + service.perMinuteDrive * duration / 60;
        console.log("Initial calculation without multiplier: " + i);
        var ratioCost = 0;
        var newRatioCost = 0;
        var ratioDistance = 0;
        var endDistance = 0;
        for(var _iterator = _create_for_of_iterator_helper_loose(service.distanceMultipliers), _step; !(_step = _iterator()).done;){
            var _multiplier = _step.value;
            if (distance > _multiplier.distanceFrom) {
                endDistance = distance > _multiplier.distanceTo ? _multiplier.distanceTo : distance;
                ratioDistance = endDistance - _multiplier.distanceFrom;
                ratioCost = ratioDistance / distance * i;
                newRatioCost = ratioCost * _multiplier.multiply;
                i = i - ratioCost + newRatioCost;
                console.log("After distance multiplier: " + i);
            }
        }
        for(var _iterator1 = _create_for_of_iterator_helper_loose(service.timeMultipliers), _step1; !(_step1 = _iterator1()).done;){
            var _multiplier1 = _step1.value;
            var startMinutes = parseInt(_multiplier1.startTime.split(':')[0]) * 60 + parseInt(_multiplier1.startTime.split(':')[1]);
            var nowMinutes = eta.getHours() * 60 + eta.getMinutes();
            var endMinutes = parseInt(_multiplier1.endTime.split(':')[0]) * 60 + parseInt(_multiplier1.endTime.split(':')[1]);
            if (nowMinutes >= startMinutes && nowMinutes <= endMinutes) {
                i *= _multiplier1.multiply;
                multiplier *= _multiplier1.multiply;
                console.log("After time multiplier: " + i);
            }
        }
        for(var _iterator2 = _create_for_of_iterator_helper_loose(service.weekdayMultipliers), _step2; !(_step2 = _iterator2()).done;){
            var _multiplier2 = _step2.value;
            if (_multiplier2.weekday === weekdays[eta.getDay()]) {
                i *= _multiplier2.multiply;
                multiplier *= _multiplier2.multiply;
                console.log("After weekday multiplier: " + i);
            }
        }
        for(var _iterator3 = _create_for_of_iterator_helper_loose(service.dateRangeMultipliers), _step3; !(_step3 = _iterator3()).done;){
            var _multiplier3 = _step3.value;
            var startDate = new Date(_multiplier3.startDate);
            var endDate = new Date(_multiplier3.endDate);
            if (eta >= startDate && eta <= endDate) {
                i *= _multiplier3.multiply;
                multiplier *= _multiplier3.multiply;
                console.log("After date range multiplier: " + i);
            }
        }
        i *= fleetMultiplier;
        multiplier *= fleetMultiplier;
        console.log("After fleet multiplier: " + i);
        if (i < service.minimumFee * multiplier) {
            i = service.minimumFee * multiplier;
            console.log("After Minimum fee applied: " + i);
        }
        if (isResident === false) {
            i *= service.touristMultiplier;
        }
        common_.Logger.log("Final calculation with base fare " + service.baseFare + " distance of " + distance + " meters and duration of " + duration + " is " + i, 'ServiceService');
        if (service.roundingFactor != null && service.roundingFactor > 0) {
            console.log("Rounding factor: " + service.roundingFactor);
            console.log("Before Rounding factor applied: " + i);
            i = Math.round(i / service.roundingFactor) * service.roundingFactor;
            console.log("After Rounding factor applied: " + i);
        }
        return i != null ? i : 0;
    };
    _proto.getWithId = function getWithId(id) {
        return this.service.findOneBy({
            id: id
        });
    };
    return ServiceService;
}();
ServiceService = service_service_ts_decorate([
    (0,common_.Injectable)(),
    service_service_ts_param(0, (0,typeorm_.InjectRepository)(ServiceEntity)),
    service_service_ts_metadata("design:type", Function),
    service_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], ServiceService);

;// ../../libs/database/src/lib/shop/delivery-fee.service.ts
function delivery_fee_service_array_like_to_array(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function delivery_fee_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function delivery_fee_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                delivery_fee_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                delivery_fee_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function delivery_fee_service_unsupported_iterable_to_array(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return delivery_fee_service_array_like_to_array(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return delivery_fee_service_array_like_to_array(o, minLen);
}
function delivery_fee_service_create_for_of_iterator_helper_loose(o, allowArrayLike) {
    var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
    if (it) return (it = it.call(o)).next.bind(it);
    if (Array.isArray(o) || (it = delivery_fee_service_unsupported_iterable_to_array(o)) || allowArrayLike && o && typeof o.length === "number") {
        if (it) o = it;
        var i = 0;
        return function() {
            if (i >= o.length) {
                return {
                    done: true
                };
            }
            return {
                done: false,
                value: o[i++]
            };
        };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function delivery_fee_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function delivery_fee_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function delivery_fee_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function delivery_fee_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}
function _ts_values(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
}











var DeliveryFeeService = /*#__PURE__*/ function() {
    "use strict";
    function DeliveryFeeService(shopRepository, riderAddressRepository, serviceRepository, googleService, serviceService, productEntity) {
        this.shopRepository = shopRepository;
        this.riderAddressRepository = riderAddressRepository;
        this.serviceRepository = serviceRepository;
        this.googleService = googleService;
        this.serviceService = serviceService;
        this.productEntity = productEntity;
    }
    var _proto = DeliveryFeeService.prototype;
    _proto.calculateDeliveryFee = function calculateDeliveryFee(input) {
        var _this = this;
        return delivery_fee_service_async_to_generator(function() {
            var _loop, _Math, _Math1, shops, address, bestShopOrderByDistance, totalDistance, totalDuration, deliveryMode, services, costs, minCostBatch, maxCostBatch, maxPreparationTime, splitDeliveryMinFee, splitDeliveryMaxFee, _iterator, _step;
            return delivery_fee_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        _loop = function() {
                            var shopId, _Math, _Math1, shop, metrics, distance, duration, costs, queueLevel, queueLevelValue, preparationTime, _iterator, _step1, productId, product, itemPreparationTime;
                            return delivery_fee_service_ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        shopId = _step.value;
                                        return [
                                            4,
                                            _this.shopRepository.findOneByOrFail({
                                                id: shopId
                                            })
                                        ];
                                    case 1:
                                        shop = _state.sent();
                                        return [
                                            4,
                                            _this.googleService.getSumDistanceAndDuration([
                                                address.location,
                                                shop.location
                                            ])
                                        ];
                                    case 2:
                                        metrics = _state.sent();
                                        distance = metrics.distance;
                                        duration = metrics.duration;
                                        costs = services.map(function(service) {
                                            return _this.serviceService.calculateCost(service, distance, duration, new Date());
                                        });
                                        splitDeliveryMinFee += (_Math = Math).min.apply(_Math, [].concat(costs));
                                        splitDeliveryMaxFee += (_Math1 = Math).max.apply(_Math1, [].concat(costs));
                                        queueLevel = shop.orderQueueLevel;
                                        // Convert the queue level from low, medium, high to 0, 0.5, 1
                                        queueLevelValue = 0;
                                        if (queueLevel === OrderQueueLevel.MEDIUM) {
                                            queueLevelValue = 0.5;
                                        } else if (queueLevel === OrderQueueLevel.HIGH) {
                                            queueLevelValue = 1;
                                        }
                                        preparationTime = 0;
                                        _iterator = delivery_fee_service_create_for_of_iterator_helper_loose(input.produtIds);
                                        _state.label = 3;
                                    case 3:
                                        if (!!(_step1 = _iterator()).done) return [
                                            3,
                                            6
                                        ];
                                        productId = _step1.value;
                                        return [
                                            4,
                                            _this.productEntity.findOneByOrFail({
                                                id: productId
                                            })
                                        ];
                                    case 4:
                                        product = _state.sent();
                                        itemPreparationTime = product.minimumPreparationTime + (product.maximumPreparationTime - product.minimumPreparationTime) * queueLevelValue;
                                        preparationTime = Math.max(preparationTime, itemPreparationTime);
                                        _state.label = 5;
                                    case 5:
                                        return [
                                            3,
                                            3
                                        ];
                                    case 6:
                                        maxPreparationTime = Math.max(maxPreparationTime, preparationTime);
                                        return [
                                            2
                                        ];
                                }
                            });
                        };
                        return [
                            4,
                            _this.shopRepository.find({
                                where: {
                                    id: (0,external_typeorm_.In)(input.shopIds)
                                }
                            })
                        ];
                    case 1:
                        shops = _state.sent();
                        return [
                            4,
                            _this.riderAddressRepository.findOneByOrFail({
                                id: input.deliveryAddressId
                            })
                        ];
                    case 2:
                        address = _state.sent();
                        return [
                            4,
                            _this.googleService.findTheBestRoute(shops, address)
                        ];
                    case 3:
                        bestShopOrderByDistance = _state.sent();
                        totalDistance = bestShopOrderByDistance.legs.reduce(function(acc, leg) {
                            return acc + leg.distance.value;
                        }, 0);
                        totalDuration = bestShopOrderByDistance.legs.reduce(function(acc, leg) {
                            return acc + leg.duration.value;
                        }, 0);
                        // determine the delivery mode based on the number of items
                        deliveryMode = [
                            DeliveryPackageSize.Small,
                            DeliveryPackageSize.Medium
                        ];
                        if (input.totalItems > 5) {
                            deliveryMode = [
                                DeliveryPackageSize.Medium,
                                DeliveryPackageSize.Large
                            ];
                        } else if (input.totalItems > 10) {
                            deliveryMode = [
                                DeliveryPackageSize.Large
                            ];
                        }
                        return [
                            4,
                            _this.serviceRepository.find({
                                where: {
                                    maximumCarryPackageSize: (0,external_typeorm_.In)(deliveryMode)
                                }
                            })
                        ];
                    case 4:
                        services = _state.sent();
                        costs = services.map(function(service) {
                            return _this.serviceService.calculateCost(service, totalDistance, totalDuration, new Date());
                        });
                        minCostBatch = (_Math = Math).min.apply(_Math, [].concat(costs));
                        maxCostBatch = (_Math1 = Math).max.apply(_Math1, [].concat(costs));
                        // START: Calculate the preparation time
                        maxPreparationTime = 0;
                        splitDeliveryMinFee = 0;
                        splitDeliveryMaxFee = 0;
                        _iterator = delivery_fee_service_create_for_of_iterator_helper_loose(input.shopIds);
                        _state.label = 5;
                    case 5:
                        if (!!(_step = _iterator()).done) return [
                            3,
                            8
                        ];
                        return [
                            5,
                            _ts_values(_loop())
                        ];
                    case 6:
                        _state.sent();
                        _state.label = 7;
                    case 7:
                        return [
                            3,
                            5
                        ];
                    case 8:
                        // return averages of the costs
                        return [
                            2,
                            {
                                batchDeliveryFee: (minCostBatch + maxCostBatch) / 2,
                                splitDeliveryFee: (splitDeliveryMinFee + splitDeliveryMaxFee) / 2,
                                batchDeliveryDuration: maxPreparationTime + totalDuration
                            }
                        ];
                }
            });
        })();
    };
    return DeliveryFeeService;
}();
DeliveryFeeService = delivery_fee_service_ts_decorate([
    (0,common_.Injectable)(),
    delivery_fee_service_ts_param(0, (0,typeorm_.InjectRepository)(ShopEntity)),
    delivery_fee_service_ts_param(1, (0,typeorm_.InjectRepository)(RiderAddressEntity)),
    delivery_fee_service_ts_param(2, (0,typeorm_.InjectRepository)(ServiceEntity)),
    delivery_fee_service_ts_param(5, (0,typeorm_.InjectRepository)(ProductEntity)),
    delivery_fee_service_ts_metadata("design:type", Function),
    delivery_fee_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof GoogleServicesService === "undefined" ? Object : GoogleServicesService,
        typeof ServiceService === "undefined" ? Object : ServiceService,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], DeliveryFeeService);

;// ../../libs/database/src/lib/order/google-services/google-services.module.ts
function google_services_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}



var GoogleServicesModule = function GoogleServicesModule() {
    "use strict";
};
GoogleServicesModule = google_services_module_ts_decorate([
    (0,common_.Module)({
        providers: [
            GoogleServicesService,
            SharedConfigurationService
        ],
        exports: [
            GoogleServicesService
        ]
    })
], GoogleServicesModule);

// EXTERNAL MODULE: external "@nestjs/axios"
var axios_ = __webpack_require__(14);
;// ../../libs/database/src/lib/coupon/common-coupon.service.ts
function common_coupon_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function common_coupon_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                common_coupon_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                common_coupon_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function common_coupon_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function common_coupon_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function common_coupon_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function common_coupon_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}






var CommonCouponService = /*#__PURE__*/ function() {
    "use strict";
    function CommonCouponService(couponRepo, requestRepo) {
        this.couponRepo = couponRepo;
        this.requestRepo = requestRepo;
    }
    var _proto = CommonCouponService.prototype;
    _proto.applyCouponOnPrice = function applyCouponOnPrice(coupon, price) {
        if (coupon == null) return price;
        price *= (100.0 - coupon.discountPercent) / 100.0;
        price -= coupon.discountFlat;
        return price;
    };
    _proto.getCouponInfo = function getCouponInfo(input) {
        var _this = this;
        return common_coupon_service_async_to_generator(function() {
            var coupon, requestsWithCoupon, timesCouponUsed;
            return common_coupon_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.couponRepo.findOneBy({
                                code: input.code
                            })
                        ];
                    case 1:
                        coupon = _state.sent();
                        if (coupon == null) {
                            throw new apollo_.ForbiddenError('Incorrect code');
                        }
                        if (coupon.expireAt == null || coupon.expireAt < new Date()) {
                            throw new apollo_.ForbiddenError('Coupon expired');
                        }
                        if (!(input.riderId != null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.requestRepo.count({
                                where: {
                                    riderId: input.riderId,
                                    couponId: coupon.id
                                }
                            })
                        ];
                    case 2:
                        requestsWithCoupon = _state.sent();
                        if (requestsWithCoupon >= coupon.manyTimesUserCanUse) {
                            throw new apollo_.ForbiddenError('Coupon already used.');
                        }
                        _state.label = 3;
                    case 3:
                        if (!coupon.isEnabled) {
                            throw new apollo_.ForbiddenError('Coupon is disabled.');
                        }
                        return [
                            4,
                            _this.requestRepo.count({
                                where: {
                                    couponId: coupon.id
                                }
                            })
                        ];
                    case 4:
                        timesCouponUsed = _state.sent();
                        if (timesCouponUsed >= coupon.manyUsersCanUse) {
                            throw new apollo_.ForbiddenError('Coupon usage limit exceeded.');
                        }
                        return [
                            2,
                            coupon
                        ];
                }
            });
        })();
    };
    _proto.checkCoupon = function checkCoupon(code, riderId) {
        var _this = this;
        return common_coupon_service_async_to_generator(function() {
            var coupon, requestsWithCoupon, timesCouponUsed;
            return common_coupon_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.couponRepo.findOneBy({
                                code: code
                            })
                        ];
                    case 1:
                        coupon = _state.sent();
                        if (coupon == null) {
                            throw new apollo_.ForbiddenError('Incorrect code');
                        }
                        if (coupon.expireAt == null || coupon.expireAt < new Date()) {
                            throw new apollo_.ForbiddenError('Coupon expired');
                        }
                        if (!(riderId != null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.requestRepo.count({
                                where: {
                                    riderId: riderId,
                                    couponId: coupon.id
                                }
                            })
                        ];
                    case 2:
                        requestsWithCoupon = _state.sent();
                        if (requestsWithCoupon >= coupon.manyTimesUserCanUse) {
                            throw new apollo_.ForbiddenError('Coupon already used.');
                        }
                        _state.label = 3;
                    case 3:
                        if (!coupon.isEnabled) {
                            throw new apollo_.ForbiddenError('Coupon is disabled.');
                        }
                        return [
                            4,
                            _this.requestRepo.count({
                                where: {
                                    couponId: coupon.id
                                }
                            })
                        ];
                    case 4:
                        timesCouponUsed = _state.sent();
                        if (timesCouponUsed >= coupon.manyUsersCanUse) {
                            throw new apollo_.ForbiddenError('Coupon usage limit exceeded.');
                        }
                        return [
                            2,
                            coupon
                        ];
                }
            });
        })();
    };
    _proto.applyCoupon = function applyCoupon(code, orderId, riderId) {
        var _this = this;
        return common_coupon_service_async_to_generator(function() {
            var coupon, request, finalCost;
            return common_coupon_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.checkCoupon(code, riderId)
                        ];
                    case 1:
                        coupon = _state.sent();
                        return [
                            4,
                            _this.requestRepo.findOneOrFail({
                                where: {
                                    id: orderId
                                },
                                relations: {
                                    service: true
                                }
                            })
                        ];
                    case 2:
                        request = _state.sent();
                        finalCost = _this.applyCouponOnPrice(coupon, request.costBest + request.waitMinutes * request.service.perMinuteWait);
                        return [
                            4,
                            _this.requestRepo.update(request.id, {
                                couponId: coupon.id,
                                costAfterCoupon: finalCost
                            })
                        ];
                    case 3:
                        _state.sent();
                        return [
                            4,
                            _this.requestRepo.findOneOrFail({
                                where: {
                                    id: orderId
                                },
                                relations: {
                                    service: true
                                }
                            })
                        ];
                    case 4:
                        request = _state.sent();
                        return [
                            2,
                            request
                        ];
                }
            });
        })();
    };
    return CommonCouponService;
}();
CommonCouponService = common_coupon_service_ts_decorate([
    (0,common_.Injectable)(),
    common_coupon_service_ts_param(0, (0,typeorm_.InjectRepository)(CouponEntity)),
    common_coupon_service_ts_param(1, (0,typeorm_.InjectRepository)(TaxiOrderEntity)),
    common_coupon_service_ts_metadata("design:type", Function),
    common_coupon_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], CommonCouponService);

;// ../../libs/database/src/lib/order/shared-driver.service.ts
function shared_driver_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_driver_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_driver_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_driver_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_driver_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_driver_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_driver_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function shared_driver_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}







var SharedDriverService = /*#__PURE__*/ function() {
    "use strict";
    function SharedDriverService(driverRepo, driverWalletRepo, driverTransactionRepo) {
        this.driverRepo = driverRepo;
        this.driverWalletRepo = driverWalletRepo;
        this.driverTransactionRepo = driverTransactionRepo;
    }
    var _proto = SharedDriverService.prototype;
    _proto.findById = function findById(id) {
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            return shared_driver_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.driverRepo.findOneOrFail({
                        where: {
                            id: id
                        },
                        relations: {
                            enabledServices: {
                                service: true
                            }
                        },
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.updateDriverStatus = function updateDriverStatus(driverId, status) {
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            return shared_driver_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.driverRepo.update(driverId, {
                        status: status
                    })
                ];
            });
        })();
    };
    _proto.getMaxRadiusForDriverServices = function getMaxRadiusForDriverServices(driverId) {
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            var _Math, driver, radiuses, max;
            return shared_driver_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.driverRepo.findOneOrFail({
                                where: {
                                    id: driverId
                                },
                                relations: {
                                    enabledServices: {
                                        service: true
                                    }
                                }
                            })
                        ];
                    case 1:
                        driver = _state.sent();
                        radiuses = driver.enabledServices.map(function(service) {
                            return service.service.searchRadius;
                        });
                        max = (_Math = Math).max.apply(_Math, [].concat(radiuses));
                        return [
                            2,
                            max > 0 ? max : 0
                        ];
                }
            });
        })();
    };
    _proto.getOnlineDriversWithServiceId = function getOnlineDriversWithServiceId(driverIds, serviceId, fleetIds) {
        if (fleetIds === void 0) fleetIds = [];
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            var driversWithService;
            return shared_driver_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log(serviceId, 'SharedDriverService.serviceId');
                        common_.Logger.log(driverIds, 'SharedDriverService.driverIds');
                        common_.Logger.log(fleetIds, 'SharedDriverService.fleetIds');
                        if (!(fleetIds.length > 0)) return [
                            3,
                            2
                        ];
                        return [
                            4,
                            _this.driverRepo.find({
                                where: {
                                    id: (0,external_typeorm_.In)(driverIds),
                                    status: DriverStatus.Online,
                                    fleetId: (0,external_typeorm_.In)(fleetIds)
                                },
                                relations: {
                                    enabledServices: {
                                        service: true
                                    }
                                }
                            })
                        ];
                    case 1:
                        driversWithService = _state.sent();
                        return [
                            3,
                            4
                        ];
                    case 2:
                        return [
                            4,
                            _this.driverRepo.find({
                                where: {
                                    id: (0,external_typeorm_.In)(driverIds),
                                    status: DriverStatus.Online
                                },
                                relations: {
                                    enabledServices: {
                                        service: true
                                    }
                                }
                            })
                        ];
                    case 3:
                        driversWithService = _state.sent();
                        _state.label = 4;
                    case 4:
                        return [
                            2,
                            driversWithService.filter(function(x) {
                                return x.enabledServices.map(function(y) {
                                    var _y_service;
                                    return (_y_service = y.service) == null ? void 0 : _y_service.id;
                                }).includes(serviceId);
                            })
                        ];
                }
            });
        })();
    };
    _proto.canDriverDoServiceAndFleet = function canDriverDoServiceAndFleet(driverId, serviceId, fleetIds) {
        if (fleetIds === void 0) fleetIds = [];
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            return shared_driver_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.getOnlineDriversWithServiceId([
                                driverId
                            ], serviceId, fleetIds)
                        ];
                    case 1:
                        return [
                            2,
                            _state.sent().length > 0
                        ];
                }
            });
        })();
    };
    _proto.rechargeWallet = function rechargeWallet(transaction) {
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            var wallet;
            return shared_driver_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.driverWalletRepo.findOneBy({
                                driverId: transaction.driverId,
                                currency: transaction.currency
                            })
                        ];
                    case 1:
                        wallet = _state.sent();
                        transaction.amount = parseFloat(transaction.amount.toString());
                        if (!(wallet == null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.driverWalletRepo.save({
                                balance: transaction.amount,
                                currency: transaction.currency,
                                driverId: transaction.driverId
                            })
                        ];
                    case 2:
                        wallet = _state.sent();
                        return [
                            3,
                            5
                        ];
                    case 3:
                        return [
                            4,
                            _this.driverWalletRepo.update(wallet.id, {
                                balance: parseFloat(transaction.amount.toString()) + parseFloat(wallet.balance.toString())
                            })
                        ];
                    case 4:
                        _state.sent();
                        wallet.balance += transaction.amount;
                        _state.label = 5;
                    case 5:
                        if (transaction.amount != 0) {
                            common_.Logger.log("Saving transaction " + JSON.stringify(transaction));
                            _this.driverTransactionRepo.save(transaction);
                        }
                        return [
                            2,
                            wallet
                        ];
                }
            });
        })();
    };
    _proto.setRating = function setRating(driverId, rating, totalRatingCount) {
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            return shared_driver_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.driverRepo.update(driverId, {
                        rating: rating,
                        reviewCount: totalRatingCount
                    })
                ];
            });
        })();
    };
    _proto.deleteById = function deleteById(id) {
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            var user;
            return shared_driver_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.findById(id)
                        ];
                    case 1:
                        user = _state.sent();
                        return [
                            4,
                            _this.driverRepo.softDelete(id)
                        ];
                    case 2:
                        _state.sent();
                        return [
                            2,
                            user
                        ];
                }
            });
        })();
    };
    return SharedDriverService;
}();
SharedDriverService = shared_driver_service_ts_decorate([
    (0,common_.Injectable)(),
    shared_driver_service_ts_param(0, (0,typeorm_.InjectRepository)(DriverEntity)),
    shared_driver_service_ts_param(1, (0,typeorm_.InjectRepository)(DriverWalletEntity)),
    shared_driver_service_ts_param(2, (0,typeorm_.InjectRepository)(DriverTransactionEntity)),
    shared_driver_service_ts_metadata("design:type", Function),
    shared_driver_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SharedDriverService);

;// ../../libs/database/src/lib/customer-wallet/shared-customer-wallet.service.ts
function shared_customer_wallet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_customer_wallet_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_customer_wallet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_customer_wallet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_customer_wallet_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_customer_wallet_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_customer_wallet_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function shared_customer_wallet_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}





var SharedCustomerWalletService = /*#__PURE__*/ function() {
    "use strict";
    function SharedCustomerWalletService(customerWalletRepo, customerTransactionRepo) {
        this.customerWalletRepo = customerWalletRepo;
        this.customerTransactionRepo = customerTransactionRepo;
    }
    var _proto = SharedCustomerWalletService.prototype;
    _proto.getRiderCreditInCurrency = function getRiderCreditInCurrency(riderId, currency) {
        var _this = this;
        return shared_customer_wallet_service_async_to_generator(function() {
            var wallet, _wallet_balance;
            return shared_customer_wallet_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.customerWalletRepo.findOneBy({
                                riderId: riderId,
                                currency: currency
                            })
                        ];
                    case 1:
                        wallet = _state.sent();
                        return [
                            2,
                            (_wallet_balance = wallet == null ? void 0 : wallet.balance) != null ? _wallet_balance : 0
                        ];
                }
            });
        })();
    };
    _proto.rechargeWallet = function rechargeWallet(input) {
        var _this = this;
        return shared_customer_wallet_service_async_to_generator(function() {
            var wallet, transaction;
            return shared_customer_wallet_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.customerWalletRepo.findOneBy({
                                riderId: input.riderId,
                                currency: input.currency
                            })
                        ];
                    case 1:
                        wallet = _state.sent();
                        if (!(wallet == null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.customerWalletRepo.save({
                                balance: input.amount,
                                currency: input.currency,
                                riderId: input.riderId
                            })
                        ];
                    case 2:
                        wallet = _state.sent();
                        return [
                            3,
                            5
                        ];
                    case 3:
                        return [
                            4,
                            _this.customerWalletRepo.update(wallet.id, {
                                balance: input.amount + wallet.balance
                            })
                        ];
                    case 4:
                        _state.sent();
                        wallet.balance += input.amount;
                        _state.label = 5;
                    case 5:
                        return [
                            4,
                            _this.customerTransactionRepo.save(input)
                        ];
                    case 6:
                        transaction = _state.sent();
                        return [
                            2,
                            {
                                wallet: wallet,
                                transaction: transaction
                            }
                        ];
                }
            });
        })();
    };
    return SharedCustomerWalletService;
}();
SharedCustomerWalletService = shared_customer_wallet_service_ts_decorate([
    (0,common_.Injectable)(),
    shared_customer_wallet_service_ts_param(0, (0,typeorm_.InjectRepository)(RiderWalletEntity)),
    shared_customer_wallet_service_ts_param(1, (0,typeorm_.InjectRepository)(RiderTransactionEntity)),
    shared_customer_wallet_service_ts_metadata("design:type", Function),
    shared_customer_wallet_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SharedCustomerWalletService);

;// ../../libs/database/src/lib/coupon/common-gift-card.service.ts
function common_gift_card_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function common_gift_card_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                common_gift_card_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                common_gift_card_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function common_gift_card_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function common_gift_card_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function common_gift_card_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function common_gift_card_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}










var CommonGiftCardService = /*#__PURE__*/ function() {
    "use strict";
    function CommonGiftCardService(giftCardRepo, sharedDriverService, sharedCustomerWalletService) {
        this.giftCardRepo = giftCardRepo;
        this.sharedDriverService = sharedDriverService;
        this.sharedCustomerWalletService = sharedCustomerWalletService;
    }
    var _proto = CommonGiftCardService.prototype;
    _proto.redeemGiftCard = function redeemGiftCard(input) {
        var _this = this;
        return common_gift_card_service_async_to_generator(function() {
            var giftCode;
            return common_gift_card_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.giftCardRepo.findOne({
                                where: {
                                    code: input.code
                                },
                                relations: {
                                    gift: true
                                }
                            })
                        ];
                    case 1:
                        giftCode = _state.sent();
                        if (!giftCode) {
                            throw new Error('Invalid gift code');
                        }
                        if (giftCode.usedAt != null) {
                            throw new Error('Gift code already used');
                        }
                        if (giftCode.gift.expireAt != null && giftCode.gift.expireAt < new Date()) {
                            throw new Error('Gift code expired');
                        }
                        giftCode.usedAt = new Date();
                        if (!(input.userType === 'rider')) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.sharedCustomerWalletService.rechargeWallet({
                                action: TransactionAction.Recharge,
                                status: TransactionStatus.Done,
                                riderId: input.userId,
                                amount: giftCode.gift.amount,
                                currency: giftCode.gift.currency,
                                giftCardId: giftCode.id,
                                rechargeType: RiderRechargeTransactionType.Gift
                            })
                        ];
                    case 2:
                        _state.sent();
                        return [
                            3,
                            5
                        ];
                    case 3:
                        return [
                            4,
                            _this.sharedDriverService.rechargeWallet({
                                action: TransactionAction.Recharge,
                                status: TransactionStatus.Done,
                                driverId: input.userId,
                                amount: giftCode.gift.amount,
                                currency: giftCode.gift.currency,
                                giftCardId: giftCode.id,
                                rechargeType: DriverRechargeTransactionType.Gift
                            })
                        ];
                    case 4:
                        _state.sent();
                        _state.label = 5;
                    case 5:
                        return [
                            4,
                            _this.giftCardRepo.save(giftCode)
                        ];
                    case 6:
                        _state.sent();
                        return [
                            2,
                            giftCode.gift
                        ];
                }
            });
        })();
    };
    return CommonGiftCardService;
}();
CommonGiftCardService = common_gift_card_service_ts_decorate([
    (0,common_.Injectable)(),
    common_gift_card_service_ts_param(0, (0,typeorm_.InjectRepository)(GiftCodeEntity)),
    common_gift_card_service_ts_metadata("design:type", Function),
    common_gift_card_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof SharedDriverService === "undefined" ? Object : SharedDriverService,
        typeof SharedCustomerWalletService === "undefined" ? Object : SharedCustomerWalletService
    ])
], CommonGiftCardService);

;// ../../libs/database/src/lib/order/shared-rider.service.ts
function shared_rider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_rider_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_rider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_rider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_rider_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_rider_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_rider_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function shared_rider_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}







var SharedRiderService = /*#__PURE__*/ function() {
    "use strict";
    function SharedRiderService(repo, driverRepo, riderWalletRepo, riderTransactionRepo) {
        this.repo = repo;
        this.driverRepo = driverRepo;
        this.riderWalletRepo = riderWalletRepo;
        this.riderTransactionRepo = riderTransactionRepo;
    }
    var _proto = SharedRiderService.prototype;
    _proto.findOrCreateUserWithMobileNumber = function findOrCreateUserWithMobileNumber(input) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            var user;
            return shared_rider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.repo.findOne({
                                where: {
                                    mobileNumber: input.mobileNumber
                                },
                                withDeleted: true
                            })
                        ];
                    case 1:
                        user = _state.sent();
                        if (!!user) return [
                            3,
                            3
                        ];
                        user = _this.repo.create({
                            mobileNumber: input.mobileNumber
                        });
                        return [
                            4,
                            _this.repo.save(user)
                        ];
                    case 2:
                        _state.sent();
                        _state.label = 3;
                    case 3:
                        if (!(user.deletedAt != null)) return [
                            3,
                            5
                        ];
                        return [
                            4,
                            _this.repo.restore({
                                id: user.id
                            })
                        ];
                    case 4:
                        _state.sent();
                        _state.label = 5;
                    case 5:
                        return [
                            2,
                            user
                        ];
                }
            });
        })();
    };
    _proto.addDriverToFavoriteList = function addDriverToFavoriteList(input) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            var rider, favoriteDrivers, _;
            return shared_rider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.repo.findOneOrFail({
                                where: {
                                    id: input.riderId
                                },
                                relations: {
                                    favoriteDrivers: true
                                }
                            })
                        ];
                    case 1:
                        rider = _state.sent();
                        favoriteDrivers = rider.favoriteDrivers;
                        if (favoriteDrivers.some(function(driver) {
                            return driver.id === input.driverId;
                        })) {
                            return [
                                2,
                                false
                            ];
                        }
                        _ = favoriteDrivers.push;
                        return [
                            4,
                            _this.driverRepo.createQueryBuilder('driver').where('driver.id = :id', {
                                id: input.driverId
                            }).getOneOrFail()
                        ];
                    case 2:
                        _.apply(favoriteDrivers, [
                            _state.sent()
                        ]);
                        return [
                            4,
                            _this.repo.save(rider)
                        ];
                    case 3:
                        _state.sent();
                        return [
                            2,
                            true
                        ];
                }
            });
        })();
    };
    _proto.findWithDeleted = function findWithDeleted(filter) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            return shared_rider_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.repo.findOne({
                        where: filter,
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.deleteById = function deleteById(id) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            var user;
            return shared_rider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.findById(id)
                        ];
                    case 1:
                        user = _state.sent();
                        return [
                            4,
                            _this.repo.softDelete(id)
                        ];
                    case 2:
                        _state.sent();
                        return [
                            2,
                            user
                        ];
                }
            });
        })();
    };
    _proto.getRiderCreditInCurrency = function getRiderCreditInCurrency(riderId, currency) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            var wallet, _wallet_balance;
            return shared_rider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.riderWalletRepo.findOneBy({
                                riderId: riderId,
                                currency: currency
                            })
                        ];
                    case 1:
                        wallet = _state.sent();
                        return [
                            2,
                            (_wallet_balance = wallet == null ? void 0 : wallet.balance) != null ? _wallet_balance : 0
                        ];
                }
            });
        })();
    };
    _proto.rechargeWallet = function rechargeWallet(transaction) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            var wallet;
            return shared_rider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.riderWalletRepo.findOneBy({
                                riderId: transaction.riderId,
                                currency: transaction.currency
                            })
                        ];
                    case 1:
                        wallet = _state.sent();
                        if (!(wallet == null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.riderWalletRepo.save({
                                balance: transaction.amount,
                                currency: transaction.currency,
                                riderId: transaction.riderId
                            })
                        ];
                    case 2:
                        wallet = _state.sent();
                        return [
                            3,
                            5
                        ];
                    case 3:
                        return [
                            4,
                            _this.riderWalletRepo.update(wallet.id, {
                                balance: transaction.amount + wallet.balance
                            })
                        ];
                    case 4:
                        _state.sent();
                        wallet.balance += transaction.amount;
                        _state.label = 5;
                    case 5:
                        _this.riderTransactionRepo.save(transaction);
                        return [
                            2,
                            wallet
                        ];
                }
            });
        })();
    };
    _proto.restore = function restore(id) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            return shared_rider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.repo.restore(id)
                        ];
                    case 1:
                        _state.sent();
                        return [
                            2,
                            _this.findById(id)
                        ];
                }
            });
        })();
    };
    _proto.findById = function findById(id) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            return shared_rider_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.repo.findOneOrFail({
                        where: {
                            id: id
                        }
                    })
                ];
            });
        })();
    };
    return SharedRiderService;
}();
SharedRiderService = shared_rider_service_ts_decorate([
    (0,common_.Injectable)(),
    shared_rider_service_ts_param(0, (0,typeorm_.InjectRepository)(CustomerEntity)),
    shared_rider_service_ts_param(1, (0,typeorm_.InjectRepository)(DriverEntity)),
    shared_rider_service_ts_param(2, (0,typeorm_.InjectRepository)(RiderWalletEntity)),
    shared_rider_service_ts_param(3, (0,typeorm_.InjectRepository)(RiderTransactionEntity)),
    shared_rider_service_ts_metadata("design:type", Function),
    shared_rider_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SharedRiderService);

;// ../../libs/database/src/lib/customer-wallet/shared-customer-wallet.module.ts
function shared_customer_wallet_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}





var SharedCustomerWalletModule = function SharedCustomerWalletModule() {
    "use strict";
};
SharedCustomerWalletModule = shared_customer_wallet_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            typeorm_.TypeOrmModule.forFeature([
                RiderWalletEntity,
                RiderTransactionEntity
            ])
        ],
        providers: [
            SharedCustomerWalletService
        ],
        exports: [
            SharedCustomerWalletService
        ]
    })
], SharedCustomerWalletModule);

;// ../../libs/database/src/lib/customer-wallet/index.ts



;// ../../libs/database/src/lib/coupon/common-coupon.module.ts
function common_coupon_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
















var CommonCouponModule = function CommonCouponModule() {
    "use strict";
};
CommonCouponModule = common_coupon_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            SharedCustomerWalletModule,
            typeorm_.TypeOrmModule.forFeature([
                TaxiOrderEntity,
                CustomerEntity,
                DriverEntity,
                CouponEntity,
                RiderWalletEntity,
                DriverWalletEntity,
                RiderTransactionEntity,
                DriverTransactionEntity,
                GiftCodeEntity
            ])
        ],
        providers: [
            CommonCouponService,
            CommonGiftCardService,
            SharedRiderService,
            SharedDriverService
        ],
        exports: [
            CommonCouponService,
            CommonGiftCardService
        ]
    })
], CommonCouponModule);

// EXTERNAL MODULE: external "@liaoliaots/nestjs-redis"
var nestjs_redis_ = __webpack_require__(15);
;// ../../libs/database/src/lib/redis/driver-redis.service.ts
function driver_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function driver_redis_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                driver_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                driver_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function driver_redis_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_redis_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function driver_redis_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var DriverRedisService = /*#__PURE__*/ function() {
    "use strict";
    function DriverRedisService(redisService) {
        this.redisService = redisService;
    }
    var _proto = DriverRedisService.prototype;
    _proto.setLocation = function setLocation(driverId, point) {
        var _this = this;
        return driver_redis_service_async_to_generator(function() {
            return driver_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            Promise.all([
                                _this.redisService.getOrThrow().geoadd("driver", point.lng, point.lat, driverId.toString()),
                                _this.redisService.getOrThrow().zadd("driver-location-time", Date.now(), driverId)
                            ])
                        ];
                    case 1:
                        _state.sent();
                        if (point.heading) {
                            _this.redisService.getOrThrow().hset("driver-heading", driverId.toString(), point.heading);
                        }
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.getDriverCoordinate = function getDriverCoordinate(driverId) {
        var _this = this;
        return driver_redis_service_async_to_generator(function() {
            var pos, heading;
            return driver_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().geopos("driver", driverId.toString())
                        ];
                    case 1:
                        pos = _state.sent();
                        return [
                            4,
                            _this.redisService.getOrThrow().hget("driver-heading", driverId.toString())
                        ];
                    case 2:
                        heading = _state.sent();
                        return [
                            2,
                            pos[0] ? {
                                lat: parseFloat(pos[0][1]),
                                lng: parseFloat(pos[0][0]),
                                heading: heading ? parseInt(heading) : undefined
                            } : null
                        ];
                }
            });
        })();
    };
    _proto.getClose = function getClose(point, distance) {
        var _this = this;
        return driver_redis_service_async_to_generator(function() {
            var bare, result;
            return driver_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().call("GEORADIUS", "driver", point.lng, point.lat, distance, "m", "WITHCOORD")
                        ];
                    case 1:
                        bare = _state.sent();
                        result = bare.map(/*#__PURE__*/ driver_redis_service_async_to_generator(function(item) {
                            var heading;
                            return driver_redis_service_ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        return [
                                            4,
                                            _this.redisService.getOrThrow().hget("driver-heading", item[0])
                                        ];
                                    case 1:
                                        heading = _state.sent();
                                        return [
                                            2,
                                            {
                                                driverId: parseInt(item[0]),
                                                location: {
                                                    lat: parseFloat(item[1][1]),
                                                    lng: parseFloat(item[1][0]),
                                                    heading: heading ? parseInt(heading) : undefined
                                                }
                                            }
                                        ];
                                }
                            });
                        }));
                        return [
                            2,
                            Promise.all(result)
                        ];
                }
            });
        })();
    };
    _proto.getAllOnline = function getAllOnline(center, count) {
        var _this = this;
        return driver_redis_service_async_to_generator(function() {
            var bare, times, result;
            return driver_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().call("GEORADIUS", "driver", center.lng.toString(), center.lat.toString(), "22000", "km", "WITHCOORD", "COUNT", count.toString(), "ASC")
                        ];
                    case 1:
                        bare = _state.sent();
                        return [
                            4,
                            _this.redisService.getOrThrow().zrangebyscore("driver-location-time", 0, new Date().getTime(), "WITHSCORES")
                        ];
                    case 2:
                        times = _state.sent();
                        result = bare.map(/*#__PURE__*/ driver_redis_service_async_to_generator(function(x) {
                            var heading;
                            return driver_redis_service_ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        return [
                                            4,
                                            _this.redisService.getOrThrow().hget("driver-heading", x[0])
                                        ];
                                    case 1:
                                        heading = _state.sent();
                                        return [
                                            2,
                                            {
                                                driverId: parseInt(x[0]),
                                                location: {
                                                    lat: parseFloat(x[1][1]),
                                                    lng: parseFloat(x[1][0]),
                                                    heading: heading ? parseInt(heading) : undefined
                                                },
                                                lastUpdatedAt: new Date(parseInt(times[times.indexOf(x[0]) + 1]))
                                            }
                                        ];
                                }
                            });
                        }));
                        return [
                            2,
                            Promise.all(result)
                        ];
                }
            });
        })();
    };
    _proto.expire = function expire(userId) {
        var _this = this;
        return driver_redis_service_async_to_generator(function() {
            return driver_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().zrem("driver", userId)
                        ];
                    case 1:
                        _state.sent();
                        return [
                            4,
                            _this.redisService.getOrThrow().zrem("driver-location-time", userId)
                        ];
                    case 2:
                        _state.sent();
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.setQrCodeToken = function setQrCodeToken(driverId, token, ttlSeconds) {
        var _this = this;
        return driver_redis_service_async_to_generator(function() {
            var key;
            return driver_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        key = "qr:token:" + token;
                        console.log("key :", key);
                        return [
                            4,
                            _this.redisService.getOrThrow().set(key, driverId.toString(), "EX", ttlSeconds)
                        ];
                    case 1:
                        _state.sent();
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.getDriverIdByToken = function getDriverIdByToken(token) {
        var _this = this;
        return driver_redis_service_async_to_generator(function() {
            var key, value;
            return driver_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        key = "qr:token:" + token;
                        return [
                            4,
                            _this.redisService.getOrThrow().get(key)
                        ];
                    case 1:
                        value = _state.sent();
                        console.log("key :", key, "value :", value);
                        return [
                            2,
                            value ? parseInt(value, 10) : null
                        ];
                }
            });
        })();
    };
    return DriverRedisService;
}();
DriverRedisService = driver_redis_service_ts_decorate([
    (0,common_.Injectable)(),
    driver_redis_service_ts_metadata("design:type", Function),
    driver_redis_service_ts_metadata("design:paramtypes", [
        typeof nestjs_redis_.RedisService === "undefined" ? Object : nestjs_redis_.RedisService
    ])
], DriverRedisService);
var RedisKeys;
(function(RedisKeys) {
    RedisKeys["Driver"] = "driver";
    RedisKeys["DriverHeading"] = "driver-heading";
    RedisKeys["DriverLocationTime"] = "driver-location-time";
})(RedisKeys || (RedisKeys = {}));

;// ../../libs/database/src/lib/redis/order-redis.service.ts
function order_redis_service_array_like_to_array(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function order_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function order_redis_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                order_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                order_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function order_redis_service_unsupported_iterable_to_array(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return order_redis_service_array_like_to_array(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return order_redis_service_array_like_to_array(o, minLen);
}
function order_redis_service_create_for_of_iterator_helper_loose(o, allowArrayLike) {
    var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
    if (it) return (it = it.call(o)).next.bind(it);
    if (Array.isArray(o) || (it = order_redis_service_unsupported_iterable_to_array(o)) || allowArrayLike && o && typeof o.length === "number") {
        if (it) o = it;
        var i = 0;
        return function() {
            if (i >= o.length) {
                return {
                    done: true
                };
            }
            return {
                done: false,
                value: o[i++]
            };
        };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function order_redis_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function order_redis_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function order_redis_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var OrderRedisService = /*#__PURE__*/ function() {
    "use strict";
    function OrderRedisService(redisService, sharedDriverService) {
        this.redisService = redisService;
        this.sharedDriverService = sharedDriverService;
    }
    var _proto = OrderRedisService.prototype;
    _proto.add = function add(request, minutesfromNow) {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            var date, pickupTime;
            return order_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        date = new Date();
                        pickupTime = date.setMinutes(date.getMinutes() + minutesfromNow);
                        return [
                            4,
                            _this.redisService.getOrThrow().geoadd("request", request.points[0].lng, request.points[0].lat, request.id.toString())
                        ];
                    case 1:
                        _state.sent();
                        return [
                            4,
                            _this.redisService.getOrThrow().zadd("request-time", pickupTime, request.id)
                        ];
                    case 2:
                        _state.sent();
                        // await this.redisService.set(`${RedisKeys.Request}:${request.id}`, JSON.stringify(request));
                        return [
                            2,
                            request
                        ];
                }
            });
        })();
    };
    _proto.getForDriver = function getForDriver(driverId, distance) {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            var driverLocation, searchArea, _tmp, requestIds, ts, min, max, _requests, intersection;
            return order_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().geopos("driver", driverId.toString())
                        ];
                    case 1:
                        driverLocation = _state.sent();
                        if (driverLocation[0] == null) {
                            return [
                                2,
                                []
                            ];
                        }
                        if (!(distance != null)) return [
                            3,
                            2
                        ];
                        _tmp = distance;
                        return [
                            3,
                            4
                        ];
                    case 2:
                        return [
                            4,
                            _this.sharedDriverService.getMaxRadiusForDriverServices(driverId)
                        ];
                    case 3:
                        _tmp = _state.sent();
                        _state.label = 4;
                    case 4:
                        searchArea = _tmp;
                        return [
                            4,
                            _this.redisService.getOrThrow().georadius("request", parseFloat(driverLocation[0][0]), parseFloat(driverLocation[0][1]), searchArea, 'm')
                        ];
                    case 5:
                        requestIds = _state.sent();
                        // const requests = [];
                        ts = Math.round(new Date().getTime());
                        min = ts - 20 * 60000;
                        max = ts + 30 * 60000;
                        return [
                            4,
                            _this.redisService.getOrThrow().zrangebyscore("request-time", min, max)
                        ];
                    case 6:
                        _requests = _state.sent();
                        intersection = requestIds.filter(function(x) {
                            return _requests.includes(x);
                        });
                        return [
                            2,
                            intersection.map(function(x) {
                                return x.toString();
                            })
                        ];
                }
            });
        // for (const requestId of intersection) {
        //     const requestString = await this.redisService.get(`${RedisKeys.Request}:${requestId}`);
        //     const request: RequestRedisDTO = JSON.parse(requestString!);
        //     if (request) {
        //         const canDo = await this.sharedDriverService.canDriverDoServiceAndFleet(driverId, request.serviceId, request.fleetIds);
        //         if(canDo) {
        //             requests.push(request);
        //         }
        //     }
        // }
        // return requests;
        })();
    };
    _proto.driverNotified = function driverNotified(requestId, driverIds) {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            var ids, _iterator, _step, id;
            return order_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        ids = driverIds.map(function(driverId) {
                            return driverId.id;
                        });
                        _iterator = order_redis_service_create_for_of_iterator_helper_loose(ids);
                        _state.label = 1;
                    case 1:
                        if (!!(_step = _iterator()).done) return [
                            3,
                            4
                        ];
                        id = _step.value;
                        return [
                            4,
                            _this.redisService.getOrThrow().sadd("request-drivers:" + requestId, id)
                        ];
                    case 2:
                        _state.sent();
                        _state.label = 3;
                    case 3:
                        return [
                            3,
                            1
                        ];
                    case 4:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.getDriversNotified = function getDriversNotified(requestId) {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            var driverIds;
            return order_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().smembers("request-drivers:" + requestId)
                        ];
                    case 1:
                        driverIds = _state.sent();
                        return [
                            2,
                            driverIds.map(function(x) {
                                return parseInt(x);
                            })
                        ];
                }
            });
        })();
    };
    _proto.expire = function expire(requestIds) {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            var _iterator, _step, requestId, zremRequest, zremRequestTime, driversNotified, _iterator1, _step1, driver, delRequestObject;
            return order_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log('Expire', 'OrderRedisService');
                        _iterator = order_redis_service_create_for_of_iterator_helper_loose(requestIds);
                        _state.label = 1;
                    case 1:
                        if (!!(_step = _iterator()).done) return [
                            3,
                            11
                        ];
                        requestId = _step.value;
                        return [
                            4,
                            _this.redisService.getOrThrow().zrem("request", requestId)
                        ];
                    case 2:
                        zremRequest = _state.sent();
                        return [
                            4,
                            _this.redisService.getOrThrow().zrem("request-time", requestId)
                        ];
                    case 3:
                        zremRequestTime = _state.sent();
                        return [
                            4,
                            _this.getDriversNotified(requestId)
                        ];
                    case 4:
                        driversNotified = _state.sent();
                        _iterator1 = order_redis_service_create_for_of_iterator_helper_loose(driversNotified);
                        _state.label = 5;
                    case 5:
                        if (!!(_step1 = _iterator1()).done) return [
                            3,
                            8
                        ];
                        driver = _step1.value;
                        return [
                            4,
                            _this.redisService.getOrThrow().srem("request-drivers:" + requestId, driver)
                        ];
                    case 6:
                        _state.sent();
                        _state.label = 7;
                    case 7:
                        return [
                            3,
                            5
                        ];
                    case 8:
                        return [
                            4,
                            _this.redisService.getOrThrow().del([
                                "request:" + requestId
                            ])
                        ];
                    case 9:
                        delRequestObject = _state.sent();
                        common_.Logger.log("zremRequest: " + zremRequest + " zremRequestTime: " + zremRequestTime + " delRequestObject: " + delRequestObject, 'OrderRedisService');
                        _state.label = 10;
                    case 10:
                        return [
                            3,
                            1
                        ];
                    case 11:
                        common_.Logger.log('Expire done', 'OrderRedisService');
                        return [
                            2
                        ];
                }
            });
        // this.redisService.del(
        //   requestIds.map((id) => `${RedisKeys.Request}:${id}`).join(' '),
        // ); // # This doesn't works for some reason. expire works
        })();
    };
    _proto.getAll = function getAll() {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            return order_redis_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.getRequestsInTimeRange(0, -1)
                ];
            });
        })();
    };
    _proto.getRequestIdsInTimeRage = function getRequestIdsInTimeRage(min, max) {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            return order_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().zrange("request-time", min, max)
                        ];
                    case 1:
                        return [
                            2,
                            _state.sent()
                        ];
                }
            });
        })();
    };
    _proto.getRequestsInTimeRange = function getRequestsInTimeRange(min, max) {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            var _requestIds;
            return order_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.getRequestIdsInTimeRage(min, max)
                        ];
                    case 1:
                        _requestIds = _state.sent();
                        return [
                            2,
                            _requestIds
                        ];
                }
            });
        // const result: RequestRedisDTO[] = []
        // for(const requestId of _requestIds) {
        //     const request = await this.getOne(requestId);
        //     if(request != null) {
        //         result.push(request);
        //     }
        // }
        // return result;
        })();
    };
    return OrderRedisService;
}();
OrderRedisService = order_redis_service_ts_decorate([
    (0,common_.Injectable)(),
    order_redis_service_ts_metadata("design:type", Function),
    order_redis_service_ts_metadata("design:paramtypes", [
        typeof nestjs_redis_.RedisService === "undefined" ? Object : nestjs_redis_.RedisService,
        typeof SharedDriverService === "undefined" ? Object : SharedDriverService
    ])
], OrderRedisService);
var order_redis_service_RedisKeys;
(function(RedisKeys) {
    RedisKeys["Driver"] = "driver";
    RedisKeys["Request"] = "request";
    RedisKeys["RequestDrivers"] = "request-drivers";
    RedisKeys["RequestTime"] = "request-time";
})(order_redis_service_RedisKeys || (order_redis_service_RedisKeys = {}));

;// ../../libs/database/src/lib/sms/auth-redis.service.ts
function auth_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function auth_redis_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                auth_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                auth_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function auth_redis_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function auth_redis_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function auth_redis_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var AuthRedisService = /*#__PURE__*/ function() {
    "use strict";
    function AuthRedisService(redisService) {
        this.redisService = redisService;
    }
    var _proto = AuthRedisService.prototype;
    _proto.createVerificationCode = function createVerificationCode(input) {
        var _this = this;
        return auth_redis_service_async_to_generator(function() {
            var hash, verifyHash;
            return auth_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        hash = Math.random().toString(36).substring(7);
                        verifyHash = {
                            mobileNumber: input.mobileNumber,
                            countryIso: input.countryIso,
                            code: input.code
                        };
                        return [
                            4,
                            _this.redisService.getOrThrow().hset("verify:" + hash, verifyHash)
                        ];
                    case 1:
                        _state.sent();
                        return [
                            4,
                            _this.redisService.getOrThrow().expire("verify:" + hash, 60 * 3)
                        ];
                    case 2:
                        _state.sent();
                        return [
                            2,
                            {
                                hash: hash
                            }
                        ];
                }
            });
        })();
    };
    _proto.isVerificationCodeValid = function isVerificationCodeValid(hash, code) {
        var _this = this;
        return auth_redis_service_async_to_generator(function() {
            var verifyHash;
            return auth_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().hgetall("verify:" + hash)
                        ];
                    case 1:
                        verifyHash = _state.sent();
                        common_.Logger.log(verifyHash, 'verifyHash');
                        if (!verifyHash) throw new apollo_.ForbiddenError('EXPIRED');
                        if (process.env.DEMO_MODE != null || verifyHash.code == code) {
                            return [
                                2,
                                verifyHash
                            ];
                        } else {
                            throw new apollo_.ForbiddenError('INVALID');
                        }
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.deleteVerificationCode = function deleteVerificationCode(hash) {
        var _this = this;
        return auth_redis_service_async_to_generator(function() {
            return auth_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().del("verify:" + hash)
                        ];
                    case 1:
                        _state.sent();
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return AuthRedisService;
}();
AuthRedisService = auth_redis_service_ts_decorate([
    (0,common_.Injectable)(),
    auth_redis_service_ts_metadata("design:type", Function),
    auth_redis_service_ts_metadata("design:paramtypes", [
        typeof nestjs_redis_.RedisService === "undefined" ? Object : nestjs_redis_.RedisService
    ])
], AuthRedisService);
var VerifyHash = function VerifyHash() {
    "use strict";
};

;// ../../libs/database/src/lib/redis/redis-helper.module.ts
function redis_helper_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}









var RedisHelpersModule = function RedisHelpersModule() {
    "use strict";
};
RedisHelpersModule = redis_helper_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            typeorm_.TypeOrmModule.forFeature([
                DriverEntity,
                DriverWalletEntity,
                DriverTransactionEntity
            ])
        ],
        providers: [
            DriverRedisService,
            OrderRedisService,
            SharedDriverService,
            AuthRedisService
        ],
        exports: [
            DriverRedisService,
            OrderRedisService,
            AuthRedisService
        ]
    })
], RedisHelpersModule);

// EXTERNAL MODULE: external "firebase-admin"
var external_firebase_admin_ = __webpack_require__(16);
;// ../../libs/database/src/lib/order/firebase-notification-service/driver-notification.service.ts
function driver_notification_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function driver_notification_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                driver_notification_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                driver_notification_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function driver_notification_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_notification_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}


var DriverNotificationService = /*#__PURE__*/ function() {
    "use strict";
    function DriverNotificationService() {}
    var _proto = DriverNotificationService.prototype;
    _proto.requests = function requests(driver) {
        return driver_notification_service_async_to_generator(function() {
            var tokens, _process_env_REQUEST_SOUND, notificationResult, error;
            return driver_notification_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        tokens = driver.filter(function(_driver) {
                            var _driver_notificationPlayerId;
                            var _driver_notificationPlayerId_length;
                            return ((_driver_notificationPlayerId_length = (_driver_notificationPlayerId = _driver.notificationPlayerId) == null ? void 0 : _driver_notificationPlayerId.length) != null ? _driver_notificationPlayerId_length : 0) > 0;
                        }).map(function(x) {
                            return x.notificationPlayerId;
                        });
                        if (tokens.length < 1) return [
                            2
                        ];
                        common_.Logger.log(tokens, 'DriverNotificationService.requests.tokens');
                        _state.label = 1;
                    case 1:
                        _state.trys.push([
                            1,
                            3,
                            ,
                            4
                        ]);
                        return [
                            4,
                            (0,external_firebase_admin_.messaging)().sendEachForMulticast({
                                tokens: tokens,
                                android: {
                                    notification: {
                                        sound: 'default',
                                        titleLocKey: 'notification_new_request_title',
                                        bodyLocKey: 'notification_new_request_body',
                                        channelId: 'orders',
                                        icon: 'notification_icon',
                                        priority: 'high'
                                    }
                                },
                                apns: {
                                    payload: {
                                        aps: {
                                            sound: {
                                                critical: true,
                                                name: (_process_env_REQUEST_SOUND = process.env.REQUEST_SOUND) != null ? _process_env_REQUEST_SOUND : 'default',
                                                volume: 1.0
                                            },
                                            badge: 1,
                                            contentAvailable: true,
                                            alert: {
                                                titleLocKey: 'notification_new_request_title',
                                                subtitleLocKey: 'notification_new_request_body'
                                            }
                                        }
                                    }
                                }
                            })
                        ];
                    case 2:
                        notificationResult = _state.sent();
                        common_.Logger.log(notificationResult);
                        return [
                            3,
                            4
                        ];
                    case 3:
                        error = _state.sent();
                        common_.Logger.error(error);
                        return [
                            3,
                            4
                        ];
                    case 4:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.canceled = function canceled(driver) {
        this.sendNotification(driver, 'notification_cancel_title', 'notification_cancel_body');
    };
    _proto.message = function message(driver, message) {
        if (driver.notificationPlayerId == null) return;
        try {
            (0,external_firebase_admin_.messaging)().send({
                token: driver.notificationPlayerId,
                android: {
                    notification: {
                        sound: 'default',
                        titleLocKey: 'notification_new_message_title',
                        body: message.content,
                        channelId: 'message',
                        icon: 'notification_icon'
                    }
                },
                apns: {
                    payload: {
                        aps: {
                            sound: 'default',
                            badge: 1,
                            contentAvailable: true,
                            alert: {
                                titleLocKey: 'notification_new_message_title',
                                subtitle: message.content
                            }
                        }
                    }
                }
            });
        } catch (error) {
            common_.Logger.log(JSON.stringify(error));
        }
    };
    _proto.paid = function paid(driver) {
        this.sendNotification(driver, 'notification_paid_title', 'notification_paid_body');
    };
    _proto.assigned = function assigned(driver, time, from, to) {
        this.sendNotification(driver, 'notification_assigned_title', 'notification_assigned_body', [
            time,
            from,
            to
        ]);
    };
    _proto.upcomingBooking = function upcomingBooking(driver) {
        this.sendNotification(driver, 'notification_upcoming_ride_title', 'notification_upcoming_ride_body');
    };
    _proto.sendNotification = function sendNotification(driver, titleLocKey, bodyLocKey, bodyLocArgs, sound, channelId) {
        if (bodyLocArgs === void 0) bodyLocArgs = [];
        if (sound === void 0) sound = 'default';
        if (channelId === void 0) channelId = 'tripEvents';
        if (driver.notificationPlayerId == null || process.env['NODE_ENV'] === 'dev') return;
        try {
            (0,external_firebase_admin_.messaging)().send({
                token: driver.notificationPlayerId,
                android: {
                    notification: {
                        sound: sound,
                        titleLocKey: titleLocKey,
                        bodyLocKey: bodyLocKey,
                        bodyLocArgs: bodyLocArgs,
                        channelId: channelId,
                        icon: 'notification_icon'
                    }
                },
                apns: {
                    payload: {
                        aps: {
                            sound: sound,
                            alert: {
                                titleLocKey: titleLocKey,
                                subtitleLocKey: bodyLocKey,
                                subtitleLocArgs: bodyLocArgs
                            }
                        }
                    }
                }
            });
        } catch (error) {
            common_.Logger.log(JSON.stringify(error));
        }
    };
    return DriverNotificationService;
}();
DriverNotificationService = driver_notification_service_ts_decorate([
    (0,common_.Injectable)()
], DriverNotificationService);

;// ../../libs/database/src/lib/order/firebase-notification-service/rider-notification.service.ts
function rider_notification_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}


var RiderNotificationService = /*#__PURE__*/ function() {
    "use strict";
    function RiderNotificationService() {}
    var _proto = RiderNotificationService.prototype;
    _proto.message = function message(rider, message) {
        if (rider.notificationPlayerId == null) return;
        try {
            (0,external_firebase_admin_.messaging)().send({
                token: rider.notificationPlayerId,
                android: {
                    notification: {
                        sound: 'default',
                        titleLocKey: 'notification_new_message_title',
                        body: message.content,
                        channelId: 'message',
                        icon: 'notification_icon'
                    }
                },
                apns: {
                    payload: {
                        aps: {
                            sound: 'default',
                            badge: 1,
                            alert: {
                                titleLocKey: 'notification_new_message_title',
                                subtitle: message.content
                            }
                        }
                    }
                }
            });
        } catch (error) {
            common_.Logger.log(JSON.stringify(error));
        }
    };
    _proto.canceled = function canceled(rider) {
        this.sendNotification(rider, 'notification_cancel_title', 'notification_cancel_body', 'Canceled', 'Your trip has been canceled');
    };
    _proto.accepted = function accepted(rider) {
        this.sendNotification(rider, 'notification_found_title', 'notification_found_body', 'Accepted', 'A driver has accepted your requet');
    };
    _proto.bookingAssigned = function bookingAssigned(rider, time) {
        this.sendNotification(rider, 'notification_booking_assigned_title', 'notification_booking_assigned_body', 'Assigned', 'A driver has been assigned to your trip', [
            time
        ]);
    };
    _proto.arrived = function arrived(rider) {
        this.sendNotification(rider, 'notification_arrived_title', 'notification_arrived_body', 'Arrived', 'Driver has arrived to your location');
    };
    _proto.started = function started(rider) {
        this.sendNotification(rider, 'notification_started_title', 'notification_started_body', 'Started', 'Trip has been started');
    };
    _proto.waitingForPostPay = function waitingForPostPay(rider) {
        this.sendNotification(rider, 'notification_waiting_for_pay_title', 'notification_waiting_for_pay_body', 'Finished', 'Waiting for post-pay');
    };
    _proto.finished = function finished(rider) {
        this.sendNotification(rider, 'notification_finished_title', 'notification_finished_body', 'Finished', 'Trip has been finished.');
    };
    _proto.sendNotification = function sendNotification(rider, titleLocKey, bodyLocKey, titleDefault, bodyDefault, bodyLocArgs, sound, channelId) {
        if (bodyLocArgs === void 0) bodyLocArgs = [];
        if (sound === void 0) sound = 'default';
        if (channelId === void 0) channelId = 'tripEvents';
        if (rider.notificationPlayerId == null || rider.notificationPlayerId.length < 5) {
            return;
        }
        try {
            (0,external_firebase_admin_.messaging)().send({
                token: rider.notificationPlayerId,
                android: {
                    notification: {
                        sound: sound,
                        titleLocKey: titleLocKey,
                        bodyLocKey: bodyLocKey,
                        bodyLocArgs: bodyLocArgs,
                        channelId: channelId,
                        icon: 'notification_icon'
                    }
                },
                apns: {
                    payload: {
                        aps: {
                            sound: sound,
                            alert: {
                                titleLocKey: titleLocKey,
                                subtitleLocKey: bodyLocKey,
                                subtitleLocArgs: bodyLocArgs
                            }
                        }
                    }
                },
                webpush: {
                    notification: {
                        title: titleDefault,
                        body: bodyDefault
                    }
                }
            });
        } catch (error) {
            common_.Logger.log(JSON.stringify(error));
        }
    };
    return RiderNotificationService;
}();
RiderNotificationService = rider_notification_service_ts_decorate([
    (0,common_.Injectable)()
], RiderNotificationService);

// EXTERNAL MODULE: external "license-verify"
var external_license_verify_ = __webpack_require__(17);
;// ../../libs/database/src/lib/order/firebase-notification-service/firebase-notification-service.module.ts
function firebase_notification_service_module_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function firebase_notification_service_module_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                firebase_notification_service_module_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                firebase_notification_service_module_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function firebase_notification_service_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function firebase_notification_service_module_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}




var FirebaseNotificationModule = /*#__PURE__*/ function() {
    "use strict";
    function FirebaseNotificationModule() {}
    FirebaseNotificationModule.register = function register() {
        return firebase_notification_service_module_async_to_generator(function() {
            var providers, _process_env_NODE_ENV;
            return firebase_notification_service_module_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        providers = [];
                        return [
                            4,
                            (0,external_license_verify_.getConfig)((_process_env_NODE_ENV = process.env.NODE_ENV) != null ? _process_env_NODE_ENV : 'production')
                        ];
                    case 1:
                        if (_state.sent()) {
                            providers = [
                                DriverNotificationService,
                                RiderNotificationService
                            ];
                        }
                        return [
                            2,
                            {
                                module: FirebaseNotificationModule,
                                imports: [],
                                providers: providers,
                                exports: providers
                            }
                        ];
                }
            });
        })();
    };
    return FirebaseNotificationModule;
}();
FirebaseNotificationModule = firebase_notification_service_module_ts_decorate([
    (0,common_.Module)({})
], FirebaseNotificationModule);

;// ../../libs/database/src/lib/order/region/region.service.ts
function region_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function region_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                region_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                region_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function region_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function region_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function region_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function region_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}




var RegionService = /*#__PURE__*/ function() {
    "use strict";
    function RegionService(regionRepository) {
        this.regionRepository = regionRepository;
    }
    var _proto = RegionService.prototype;
    _proto.getRegionWithPoint = function getRegionWithPoint(point) {
        var _this = this;
        return region_service_async_to_generator(function() {
            var regions;
            return region_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.regionRepository.query("SELECT * FROM region WHERE enabled=TRUE AND ST_Within(st_geomfromtext('POINT(? ?)'), region.location)", [
                                point.lng,
                                point.lat
                            ])
                        ];
                    case 1:
                        regions = _state.sent();
                        return [
                            2,
                            regions
                        ];
                }
            });
        })();
    };
    _proto.getRegionServices = function getRegionServices(regionId) {
        var _this = this;
        return region_service_async_to_generator(function() {
            var _this1, _services;
            return region_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.regionRepository.findOne({
                                where: {
                                    id: regionId
                                },
                                relations: [
                                    'services'
                                ]
                            })
                        ];
                    case 1:
                        return [
                            2,
                            (_services = (_this1 = _state.sent()) == null ? void 0 : _this1.services) != null ? _services : []
                        ];
                }
            });
        })();
    };
    return RegionService;
}();
RegionService = region_service_ts_decorate([
    (0,common_.Injectable)(),
    region_service_ts_param(0, (0,typeorm_.InjectRepository)(RegionEntity)),
    region_service_ts_metadata("design:type", Function),
    region_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], RegionService);

;// ../../libs/database/src/lib/order/region/region.module.ts
function region_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}




var RegionModule = function RegionModule() {
    "use strict";
};
RegionModule = region_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            typeorm_.TypeOrmModule.forFeature([
                RegionEntity
            ])
        ],
        providers: [
            RegionService
        ],
        exports: [
            RegionService
        ]
    })
], RegionModule);

;// ../../libs/database/src/lib/order/shared-fleet.service.ts
function shared_fleet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_fleet_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_fleet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_fleet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_fleet_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_fleet_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_fleet_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function shared_fleet_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}






var SharedFleetService = /*#__PURE__*/ function() {
    "use strict";
    function SharedFleetService(fleetRepository, fleetWalletRepository, fleetTransactionEntity) {
        this.fleetRepository = fleetRepository;
        this.fleetWalletRepository = fleetWalletRepository;
        this.fleetTransactionEntity = fleetTransactionEntity;
    }
    var _proto = SharedFleetService.prototype;
    _proto.rechargeWallet = function rechargeWallet(transaction) {
        var _this = this;
        return shared_fleet_service_async_to_generator(function() {
            var wallet;
            return shared_fleet_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.fleetWalletRepository.findOneBy({
                                fleetId: transaction.fleetId,
                                currency: transaction.currency
                            })
                        ];
                    case 1:
                        wallet = _state.sent();
                        if (!(wallet == null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.fleetWalletRepository.save({
                                fleetId: transaction.fleetId,
                                balance: transaction.amount,
                                currency: transaction.currency
                            })
                        ];
                    case 2:
                        wallet = _state.sent();
                        return [
                            3,
                            5
                        ];
                    case 3:
                        return [
                            4,
                            _this.fleetWalletRepository.update(wallet.id, {
                                balance: transaction.amount + wallet.balance
                            })
                        ];
                    case 4:
                        _state.sent();
                        wallet.balance += transaction.amount;
                        _state.label = 5;
                    case 5:
                        _this.fleetTransactionEntity.save(transaction);
                        return [
                            2,
                            wallet
                        ];
                }
            });
        })();
    };
    _proto.getFleetIdsInPoint = function getFleetIdsInPoint(point) {
        var _this = this;
        return shared_fleet_service_async_to_generator(function() {
            var fleets;
            return shared_fleet_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.fleetRepository.query("SELECT id FROM fleet WHERE ST_Within(st_geomfromtext('POINT(? ?)'), fleet.exclusivityAreas)", [
                                point.lng,
                                point.lat
                            ])
                        ];
                    case 1:
                        fleets = _state.sent();
                        return [
                            2,
                            fleets.map(function(fleet) {
                                return fleet.id;
                            })
                        ];
                }
            });
        })();
    };
    _proto.getFleetById = function getFleetById(id) {
        var _this = this;
        return shared_fleet_service_async_to_generator(function() {
            return shared_fleet_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.fleetRepository.findOneBy({
                        id: id
                    })
                ];
            });
        })();
    };
    _proto.getFleetMultiplierInPoint = function getFleetMultiplierInPoint(point) {
        var _this = this;
        return shared_fleet_service_async_to_generator(function() {
            var fleetIds, fleet, _fleet_feeMultiplier;
            return shared_fleet_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.getFleetIdsInPoint(point)
                        ];
                    case 1:
                        fleetIds = _state.sent();
                        if (fleetIds.length === 0) {
                            return [
                                2,
                                1
                            ];
                        }
                        return [
                            4,
                            _this.getFleetById(fleetIds[0])
                        ];
                    case 2:
                        fleet = _state.sent();
                        return [
                            2,
                            (_fleet_feeMultiplier = fleet == null ? void 0 : fleet.feeMultiplier) != null ? _fleet_feeMultiplier : 1
                        ];
                }
            });
        })();
    };
    return SharedFleetService;
}();
SharedFleetService = shared_fleet_service_ts_decorate([
    (0,common_.Injectable)(),
    shared_fleet_service_ts_param(0, (0,typeorm_.InjectRepository)(FleetEntity)),
    shared_fleet_service_ts_param(1, (0,typeorm_.InjectRepository)(FleetWalletEntity)),
    shared_fleet_service_ts_param(2, (0,typeorm_.InjectRepository)(FleetTransactionEntity)),
    shared_fleet_service_ts_metadata("design:type", Function),
    shared_fleet_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SharedFleetService);

;// ../../libs/database/src/lib/order/shared-provider.service.ts
function shared_provider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_provider_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_provider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_provider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_provider_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_provider_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_provider_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function shared_provider_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}





var SharedProviderService = /*#__PURE__*/ function() {
    "use strict";
    function SharedProviderService(providerWalletRepo, providerTransactionRepo) {
        this.providerWalletRepo = providerWalletRepo;
        this.providerTransactionRepo = providerTransactionRepo;
    }
    var _proto = SharedProviderService.prototype;
    _proto.rechargeWallet = function rechargeWallet(transaction) {
        var _this = this;
        return shared_provider_service_async_to_generator(function() {
            var wallet;
            return shared_provider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.providerWalletRepo.findOneBy({
                                currency: transaction.currency
                            })
                        ];
                    case 1:
                        wallet = _state.sent();
                        if (!(wallet == null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.providerWalletRepo.save({
                                balance: transaction.amount,
                                currency: transaction.currency
                            })
                        ];
                    case 2:
                        wallet = _state.sent();
                        return [
                            3,
                            5
                        ];
                    case 3:
                        return [
                            4,
                            _this.providerWalletRepo.update(wallet.id, {
                                balance: transaction.amount + wallet.balance
                            })
                        ];
                    case 4:
                        _state.sent();
                        wallet.balance += transaction.amount;
                        _state.label = 5;
                    case 5:
                        if (transaction.amount != 0) {
                            common_.Logger.log("Saving transaction " + JSON.stringify(transaction));
                            _this.providerTransactionRepo.save(transaction);
                        }
                        return [
                            2,
                            wallet
                        ];
                }
            });
        })();
    };
    return SharedProviderService;
}();
SharedProviderService = shared_provider_service_ts_decorate([
    (0,common_.Injectable)(),
    shared_provider_service_ts_param(0, (0,typeorm_.InjectRepository)(ProviderWalletEntity)),
    shared_provider_service_ts_param(1, (0,typeorm_.InjectRepository)(ProviderTransactionEntity)),
    shared_provider_service_ts_metadata("design:type", Function),
    shared_provider_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SharedProviderService);

// EXTERNAL MODULE: external "rxjs"
var external_rxjs_ = __webpack_require__(18);
;// ../../libs/database/src/lib/order/shared-order.service.ts
function shared_order_service_array_like_to_array(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function shared_order_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_order_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_order_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_order_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function _extends() {
    _extends = Object.assign || function(target) {
        for(var i = 1; i < arguments.length; i++){
            var source = arguments[i];
            for(var key in source){
                if (Object.prototype.hasOwnProperty.call(source, key)) {
                    target[key] = source[key];
                }
            }
        }
        return target;
    };
    return _extends.apply(this, arguments);
}
function _object_without_properties_loose(source, excluded) {
    if (source == null) return {};
    var target = {};
    var sourceKeys = Object.keys(source);
    var key, i;
    for(i = 0; i < sourceKeys.length; i++){
        key = sourceKeys[i];
        if (excluded.indexOf(key) >= 0) continue;
        target[key] = source[key];
    }
    return target;
}
function shared_order_service_unsupported_iterable_to_array(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return shared_order_service_array_like_to_array(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return shared_order_service_array_like_to_array(o, minLen);
}
function shared_order_service_create_for_of_iterator_helper_loose(o, allowArrayLike) {
    var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
    if (it) return (it = it.call(o)).next.bind(it);
    if (Array.isArray(o) || (it = shared_order_service_unsupported_iterable_to_array(o)) || allowArrayLike && o && typeof o.length === "number") {
        if (it) o = it;
        var i = 0;
        return function() {
            if (i >= o.length) {
                return {
                    done: true
                };
            }
            return {
                done: false,
                value: o[i++]
            };
        };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function shared_order_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_order_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_order_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function shared_order_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}








































var SharedOrderService = /*#__PURE__*/ function() {
    "use strict";
    function SharedOrderService(orderRepository, activityRepository, regionService, serviceCategoryRepository, serviceOptionRepository, zonePriceRepository, paymentRepository, googleServices, servicesService, riderService, sharedRiderWalletService, driverRedisService, orderRedisService, driverService, sharedProviderService, sharedFleetService, commonCouponService, pubSub, driverNotificationService, riderNotificationService, httpService) {
        this.orderRepository = orderRepository;
        this.activityRepository = activityRepository;
        this.regionService = regionService;
        this.serviceCategoryRepository = serviceCategoryRepository;
        this.serviceOptionRepository = serviceOptionRepository;
        this.zonePriceRepository = zonePriceRepository;
        this.paymentRepository = paymentRepository;
        this.googleServices = googleServices;
        this.servicesService = servicesService;
        this.riderService = riderService;
        this.sharedRiderWalletService = sharedRiderWalletService;
        this.driverRedisService = driverRedisService;
        this.orderRedisService = orderRedisService;
        this.driverService = driverService;
        this.sharedProviderService = sharedProviderService;
        this.sharedFleetService = sharedFleetService;
        this.commonCouponService = commonCouponService;
        this.pubSub = pubSub;
        this.driverNotificationService = driverNotificationService;
        this.riderNotificationService = riderNotificationService;
        this.httpService = httpService;
    }
    var _proto = SharedOrderService.prototype;
    _proto.getZonePricingsForPoints = function getZonePricingsForPoints(from, to) {
        var _this = this;
        return shared_order_service_async_to_generator(function() {
            var pricings;
            return shared_order_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.zonePriceRepository.query("SELECT * FROM zone_price WHERE ST_Within(st_geomfromtext('POINT(? ?)'), `from`) AND ST_Within(st_geomfromtext('POINT(? ?)'), `to`)", [
                                from.lng,
                                from.lat,
                                to.lng,
                                to.lat
                            ])
                        ];
                    case 1:
                        pricings = _state.sent();
                        return [
                            4,
                            _this.zonePriceRepository.find({
                                where: {
                                    id: (0,external_typeorm_.In)(pricings.map(function(p) {
                                        return p.id;
                                    }))
                                },
                                relations: {
                                    services: true,
                                    fleets: true
                                }
                            })
                        ];
                    case 2:
                        pricings = _state.sent();
                        return [
                            2,
                            pricings
                        ];
                }
            });
        })();
    };
    _proto.calculateFare = function calculateFare(input) {
        var _this = this;
        return shared_order_service_async_to_generator(function() {
            var zonePricings, regions, servicesInRegion, _input_twoWay, metrics, _tmp, cats, feeMultiplier, _cats;
            return shared_order_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log(input, "SharedOrderService.calculateFare.input");
                        zonePricings = [];
                        if (!(input.points.length == 2)) return [
                            3,
                            2
                        ];
                        return [
                            4,
                            _this.getZonePricingsForPoints(input.points[0], input.points[1])
                        ];
                    case 1:
                        zonePricings = _state.sent();
                        _state.label = 2;
                    case 2:
                        return [
                            4,
                            _this.regionService.getRegionWithPoint(input.points[0])
                        ];
                    case 3:
                        regions = _state.sent();
                        if (regions.length < 1) {
                            throw new apollo_.ForbiddenError("REGION_UNSUPPORTED");
                        }
                        return [
                            4,
                            _this.regionService.getRegionServices(regions[0].id)
                        ];
                    case 4:
                        servicesInRegion = _state.sent();
                        if (servicesInRegion.length < 1) {
                            throw new apollo_.ForbiddenError("NO_SERVICE_IN_REGION");
                        }
                        if (((_input_twoWay = input.twoWay) != null ? _input_twoWay : false) && input.points.length > 1) {
                            input.points.push(input.points[0]);
                        }
                        if (!(servicesInRegion.findIndex(function(x) {
                            return x.perHundredMeters > 0;
                        }) > -1)) return [
                            3,
                            6
                        ];
                        return [
                            4,
                            _this.googleServices.getSumDistanceAndDuration(input.points)
                        ];
                    case 5:
                        _tmp = _state.sent();
                        return [
                            3,
                            7
                        ];
                    case 6:
                        _tmp = {
                            distance: 0,
                            duration: 0,
                            directions: []
                        };
                        _state.label = 7;
                    case 7:
                        metrics = _tmp;
                        return [
                            4,
                            _this.serviceCategoryRepository.find({
                                relations: {
                                    services: {
                                        media: true,
                                        options: true
                                    }
                                }
                            })
                        ];
                    case 8:
                        cats = _state.sent();
                        return [
                            4,
                            _this.sharedFleetService.getFleetMultiplierInPoint(input.points[0])
                        ];
                    case 9:
                        feeMultiplier = _state.sent();
                        _cats = cats.map(function(cat) {
                            var services = cat.services, _cat = _object_without_properties_loose(cat, [
                                "services"
                            ]);
                            var _services = services.filter(function(x) {
                                return servicesInRegion.filter(function(y) {
                                    return y.id == x.id;
                                }).length > 0;
                            }).filter(function(x) {
                                return x.orderTypes.includes(input.orderType);
                            }).map(function(service) {
                                var cost = 0;
                                var zonePricesWithService = zonePricings.filter(function(zone) {
                                    return zone.services.find(function(_service) {
                                        return _service.id == service.id;
                                    });
                                });
                                if (zonePricesWithService.length > 0) {
                                    cost = zonePricesWithService[0].cost;
                                    var eta = new Date();
                                    for(var _iterator = shared_order_service_create_for_of_iterator_helper_loose(zonePricesWithService[0].timeMultipliers), _step; !(_step = _iterator()).done;){
                                        var _multiplier = _step.value;
                                        var startMinutes = parseInt(_multiplier.startTime.split(":")[0]) * 60 + parseInt(_multiplier.startTime.split(":")[1]);
                                        var nowMinutes = eta.getHours() * 60 + eta.getMinutes();
                                        var endMinutes = parseInt(_multiplier.endTime.split(":")[0]) * 60 + parseInt(_multiplier.endTime.split(":")[1]);
                                        if (nowMinutes >= startMinutes && nowMinutes <= endMinutes) {
                                            cost *= _multiplier.multiply;
                                        }
                                    }
                                } else {
                                    cost = _this.servicesService.calculateCost(service, metrics.distance, metrics.duration, new Date(), feeMultiplier, false);
                                }
                                var _input_waitTime;
                                var waitFee = service.perMinuteWait * ((_input_waitTime = input.waitTime) != null ? _input_waitTime : 0);
                                if (input.coupon == null) {
                                    return _extends({}, service, {
                                        cost: cost + waitFee
                                    });
                                } else {
                                    var costAfterCoupon = _this.commonCouponService.applyCouponOnPrice(input.coupon, cost + waitFee);
                                    return _extends({}, service, {
                                        cost: cost + waitFee,
                                        costAfterCoupon: costAfterCoupon
                                    });
                                }
                            });
                            return _extends({}, _cat, {
                                services: _services
                            });
                        }).filter(function(x) {
                            return x.services.length > 0;
                        });
                        common_.Logger.log(_cats, "SharedOrderService.calculateFare.cats");
                        common_.Logger.log(metrics, "SharedOrderService.calculateFare.metrics");
                        if (_cats.length == 0) {
                            throw new apollo_.ForbiddenError("NO_SERVICE_IN_REGION");
                        }
                        return [
                            2,
                            _extends({}, metrics, {
                                currency: regions[0].currency,
                                services: _cats
                            })
                        ];
                }
            });
        })();
    };
    _proto.createOrder = function createOrder(input) {
        var _this = this;
        return shared_order_service_async_to_generator(function() {
            var _this1, zonePricings, service, closeDrivers, driverIds, fleetIdsInPoint, driversWithService, optionFee, options, _input_twoWay, paidOptions, metrics, _tmp, eta, rider, _tmp1, _rider_isResident, isResident, _feeMultiplier, feeMultiplier, _tmp2, cost, _input_waitMinutes, zonePricing, eta1, _iterator, _step, _multiplier, startMinutes, nowMinutes, endMinutes, regions, shouldPrePay, paidAmount, balance, amountNeedsToBePrePaid, _input_waitMinutes1, _input_waitMinutes2, orderObject, order, activityType, _input_intervalMinutes;
            return shared_order_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log(input, "SharedOrderService.createOrder.input");
                        zonePricings = [];
                        if (!(input.points.length == 2)) return [
                            3,
                            2
                        ];
                        return [
                            4,
                            _this.getZonePricingsForPoints(input.points[0], input.points[1])
                        ];
                    case 1:
                        zonePricings = _state.sent();
                        _state.label = 2;
                    case 2:
                        return [
                            4,
                            _this.servicesService.getWithId(input.serviceId)
                        ];
                    case 3:
                        service = _state.sent();
                        if (service == undefined) {
                            throw new apollo_.ForbiddenError("SERVICE_NOT_FOUND");
                        }
                        return [
                            4,
                            _this.driverRedisService.getClose(input.points[0], service.searchRadius)
                        ];
                    case 4:
                        closeDrivers = _state.sent();
                        common_.Logger.log(closeDrivers, "SharedOrderService.createOrder.closeDrivers");
                        driverIds = closeDrivers.map(function(x) {
                            return x.driverId;
                        });
                        return [
                            4,
                            _this.sharedFleetService.getFleetIdsInPoint(input.points[0])
                        ];
                    case 5:
                        fleetIdsInPoint = _state.sent();
                        return [
                            4,
                            _this.driverService.getOnlineDriversWithServiceId(driverIds, input.serviceId, fleetIdsInPoint)
                        ];
                    case 6:
                        driversWithService = _state.sent();
                        optionFee = 0;
                        options = [];
                        if (!(input.optionIds != null)) return [
                            3,
                            8
                        ];
                        return [
                            4,
                            _this.serviceOptionRepository.findByIds(input.optionIds)
                        ];
                    case 7:
                        options = _state.sent();
                        if (((_input_twoWay = input.twoWay) != null ? _input_twoWay : false) && input.points.length > 1) {
                            input.points.push(input.points[0]);
                            input.addresses.push(input.addresses[0]);
                        }
                        paidOptions = options.filter(function(option) {
                            return option.type == ServiceOptionType.Paid;
                        });
                        optionFee = paidOptions.length == 0 ? 0 : paidOptions.map(function(option) {
                            var _option_additionalFee;
                            return (_option_additionalFee = option.additionalFee) != null ? _option_additionalFee : 0;
                        }).reduce(function(previous, current) {
                            return current += previous;
                        });
                        _state.label = 8;
                    case 8:
                        if (!(service.perHundredMeters > 0)) return [
                            3,
                            10
                        ];
                        return [
                            4,
                            _this.googleServices.getSumDistanceAndDuration(input.points)
                        ];
                    case 9:
                        _tmp = _state.sent();
                        return [
                            3,
                            11
                        ];
                    case 10:
                        _tmp = {
                            distance: 0,
                            duration: 0,
                            directions: []
                        };
                        _state.label = 11;
                    case 11:
                        metrics = _tmp;
                        eta = new Date(new Date().getTime() + (input.intervalMinutes | 0) * 60 * 1000);
                        if (!(input.riderId == null)) return [
                            3,
                            12
                        ];
                        _tmp1 = null;
                        return [
                            3,
                            14
                        ];
                    case 12:
                        return [
                            4,
                            _this.riderService.repo.findOneBy({
                                id: input.riderId
                            })
                        ];
                    case 13:
                        _tmp1 = _state.sent();
                        _state.label = 14;
                    case 14:
                        rider = _tmp1;
                        isResident = (_rider_isResident = rider == null ? void 0 : rider.isResident) != null ? _rider_isResident : process.env.MOTAXI == null;
                        if (!(fleetIdsInPoint.length == 0)) return [
                            3,
                            15
                        ];
                        _tmp2 = 1;
                        return [
                            3,
                            17
                        ];
                    case 15:
                        return [
                            4,
                            _this.sharedFleetService.getFleetById(fleetIdsInPoint[0])
                        ];
                    case 16:
                        _tmp2 = (_feeMultiplier = (_this1 = _state.sent()) == null ? void 0 : _this1.feeMultiplier) != null ? _feeMultiplier : 1;
                        _state.label = 17;
                    case 17:
                        feeMultiplier = _tmp2;
                        cost = _this.servicesService.calculateCost(service, metrics.distance, metrics.duration, eta, feeMultiplier, isResident);
                        optionFee + service.perMinuteWait * ((_input_waitMinutes = input.waitMinutes) != null ? _input_waitMinutes : 0);
                        zonePricing = zonePricings.filter(function(price) {
                            return price.services.filter(function(service) {
                                return service.id == input.serviceId;
                            }).length > 0;
                        });
                        common_.Logger.log(zonePricing, "SharedOrderService.createOrder.zonePricing");
                        if (zonePricing.length > 0) {
                            cost = zonePricing[0].cost;
                            eta1 = new Date();
                            for(_iterator = shared_order_service_create_for_of_iterator_helper_loose(zonePricings[0].timeMultipliers); !(_step = _iterator()).done;){
                                _multiplier = _step.value;
                                startMinutes = parseInt(_multiplier.startTime.split(":")[0]) * 60 + parseInt(_multiplier.startTime.split(":")[1]);
                                nowMinutes = eta1.getHours() * 60 + eta1.getMinutes();
                                endMinutes = parseInt(_multiplier.endTime.split(":")[0]) * 60 + parseInt(_multiplier.endTime.split(":")[1]);
                                if (nowMinutes >= startMinutes && nowMinutes <= endMinutes) {
                                    cost *= _multiplier.multiply;
                                }
                            }
                        }
                        return [
                            4,
                            _this.regionService.getRegionWithPoint(input.points[0])
                        ];
                    case 18:
                        regions = _state.sent();
                        common_.Logger.log(regions, "SharedOrderService.createOrder.regions");
                        if (service.maximumDestinationDistance != 0 && metrics.distance > service.maximumDestinationDistance) {
                            throw new apollo_.ForbiddenError("DISTANCE_TOO_FAR");
                        }
                        shouldPrePay = false;
                        paidAmount = 0;
                        if (!(service.prepayPercent > 0 && input.riderId != null)) return [
                            3,
                            20
                        ];
                        return [
                            4,
                            _this.sharedRiderWalletService.getRiderCreditInCurrency(input.riderId, regions[0].currency)
                        ];
                    case 19:
                        balance = _state.sent();
                        amountNeedsToBePrePaid = cost * service.prepayPercent / 100;
                        if (balance < amountNeedsToBePrePaid) {
                            shouldPrePay = true;
                        } else {
                        // await this.riderService.rechargeWallet({
                        //     amount: -amountNeedsToBePrePaid,
                        //     currency: regions[0].currency,
                        //     action: TransactionAction.Deduct,
                        //     deductType: RiderDeductTransactionType.OrderFee,
                        //     status: TransactionStatus.Done,
                        //     riderId: input.riderId
                        // });
                        // paidAmount = amountNeedsToBePrePaid;
                        }
                        _state.label = 20;
                    case 20:
                        common_.Logger.log("shouldPrePay: " + shouldPrePay, "createOrder");
                        common_.Logger.log("cost: " + cost, "createOrder");
                        common_.Logger.log("paidAmount: " + paidAmount, "createOrder");
                        common_.Logger.log("optionFee: " + optionFee, "createOrder");
                        common_.Logger.log("eta: " + eta, "createOrder");
                        orderObject = _this.orderRepository.create({
                            serviceId: input.serviceId,
                            currency: regions[0].currency,
                            riderId: input.riderId,
                            points: input.points,
                            addresses: input.addresses.map(function(address) {
                                return address.replace(", ", "-");
                            }),
                            distanceBest: metrics.distance,
                            durationBest: metrics.duration,
                            directions: metrics.directions,
                            paymentMode: input.paymentMode,
                            driverId: input.driverId,
                            savedPaymentMethodId: input.paymentMode == PaymentMode.SavedPaymentMethod ? input.paymentMethodId : undefined,
                            paymentGatewayId: input.paymentMode == PaymentMode.PaymentGateway ? input.paymentMethodId : undefined,
                            status: shouldPrePay ? OrderStatus.WaitingForPrePay : input.intervalMinutes > 30 ? OrderStatus.Booked : driversWithService.length < 1 ? OrderStatus.NoCloseFound : OrderStatus.Requested,
                            paidAmount: paidAmount,
                            costBest: cost,
                            costAfterCoupon: cost,
                            expectedTimestamp: eta,
                            operatorId: input.operatorId,
                            waitMinutes: (_input_waitMinutes1 = input.waitMinutes) != null ? _input_waitMinutes1 : 0,
                            waitCost: service.perMinuteWait * ((_input_waitMinutes2 = input.waitMinutes) != null ? _input_waitMinutes2 : 0),
                            rideOptionsCost: optionFee,
                            fleetId: input.fleetId,
                            providerShare: service.providerShareFlat + service.providerSharePercent * cost / 100,
                            options: options
                        });
                        common_.Logger.log(orderObject, "SharedOrderService.createOrder.orderObject");
                        return [
                            4,
                            _this.orderRepository.save(orderObject)
                        ];
                    case 21:
                        order = _state.sent();
                        if (!(input.couponCode != null && input.couponCode != "" && rider != null)) return [
                            3,
                            23
                        ];
                        return [
                            4,
                            _this.commonCouponService.applyCoupon(input.couponCode, order.id, rider.id)
                        ];
                    case 22:
                        order = _state.sent();
                        _state.label = 23;
                    case 23:
                        activityType = RequestActivityType.RequestedByRider;
                        if (input.intervalMinutes > 0) {
                            activityType = input.operatorId == null ? activityType = RequestActivityType.BookedByRider : RequestActivityType.BookedByOperator;
                        } else {
                            activityType = input.operatorId == null ? activityType = RequestActivityType.RequestedByRider : RequestActivityType.RequestedByOperator;
                        }
                        _this.activityRepository.insert({
                            requestId: order.id,
                            type: activityType
                        });
                        _this.riderService.repo.update(order.riderId, {
                            lastActivityAt: new Date()
                        });
                        if (!(input.driverId != null)) return [
                            3,
                            24
                        ];
                        _this.assignOrderToDriver(order.id, input.driverId);
                        return [
                            2,
                            order
                        ];
                    case 24:
                        return [
                            4,
                            _this.orderRedisService.add(_extends({}, order, {
                                fleetIds: fleetIdsInPoint
                            }), input.intervalMinutes | 0)
                        ];
                    case 25:
                        _state.sent();
                        common_.Logger.log(order.id, "SharedOrderService.createOrder.publishingOrder");
                        common_.Logger.log(driversWithService, "SharedOrderService.createOrder.driversWithService");
                        if (((_input_intervalMinutes = input.intervalMinutes) != null ? _input_intervalMinutes : 0) < 30 && !shouldPrePay) {
                            _this.orderRedisService.driverNotified(order.id, driversWithService);
                            _this.pubSub.publish("orderCreated", {
                                orderCreated: order,
                                driverIds: driversWithService.map(function(driver) {
                                    return driver.id;
                                })
                            });
                            _this.driverNotificationService.requests(driversWithService);
                        }
                        _state.label = 26;
                    case 26:
                        return [
                            2,
                            order
                        ];
                }
            });
        })();
    };
    _proto.createOrderByQr = function createOrderByQr(input) {
        var _this = this;
        return shared_order_service_async_to_generator(function() {
            var _this1, zonePricings, service, optionFee, options, _input_twoWay, paidOptions, metrics, _tmp, eta, rider, _tmp1, _rider_isResident, isResident, fleetIdsInPoint, _feeMultiplier, feeMultiplier, _tmp2, _input_waitMinutes, cost, zonePricing, now, _iterator, _step, multiplier, startMinutes, nowMinutes, endMinutes, regions, shouldPrePay, paidAmount, balance, amountNeedsToBePrePaid, _input_waitMinutes1, _input_waitMinutes2, orderObject, order;
            return shared_order_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log(input, "SharedOrderService.createOrderByQr:  ");
                        //   ,    2
                        zonePricings = [];
                        if (!(input.points.length === 2)) return [
                            3,
                            2
                        ];
                        common_.Logger.log("    ", "createOrderByQr");
                        return [
                            4,
                            _this.getZonePricingsForPoints(input.points[0], input.points[1])
                        ];
                    case 1:
                        zonePricings = _state.sent();
                        common_.Logger.log("  : " + zonePricings.length, "createOrderByQr");
                        return [
                            3,
                            3
                        ];
                    case 2:
                        common_.Logger.log("   , ..   != 2", "createOrderByQr");
                        _state.label = 3;
                    case 3:
                        return [
                            4,
                            _this.servicesService.getWithId(input.serviceId)
                        ];
                    case 4:
                        service = _state.sent();
                        if (!service) {
                            common_.Logger.error("  ", "createOrderByQr");
                            throw new apollo_.ForbiddenError("SERVICE_NOT_FOUND");
                        }
                        common_.Logger.log(" : ID=" + service.id, "createOrderByQr");
                        // ---  ---         
                        // const closeDrivers = ...
                        // const driverIds = ...
                        // const fleetIdsInPoint = ...
                        // const driversWithService = ...
                        //        
                        optionFee = 0;
                        options = [];
                        if (!(input.optionIds != null)) return [
                            3,
                            6
                        ];
                        return [
                            4,
                            _this.serviceOptionRepository.findByIds(input.optionIds)
                        ];
                    case 5:
                        options = _state.sent();
                        common_.Logger.log(" : " + options.length, "createOrderByQr");
                        if (((_input_twoWay = input.twoWay) != null ? _input_twoWay : false) && input.points.length > 1) {
                            input.points.push(input.points[0]);
                            input.addresses.push(input.addresses[0]);
                            common_.Logger.log("  ''      ", "createOrderByQr");
                        }
                        paidOptions = options.filter(function(opt) {
                            return opt.type === ServiceOptionType.Paid;
                        });
                        optionFee = paidOptions.reduce(function(sum, opt) {
                            var _opt_additionalFee;
                            return sum + ((_opt_additionalFee = opt.additionalFee) != null ? _opt_additionalFee : 0);
                        }, 0);
                        common_.Logger.log("   : " + optionFee, "createOrderByQr");
                        return [
                            3,
                            7
                        ];
                    case 6:
                        common_.Logger.log("  ", "createOrderByQr");
                        _state.label = 7;
                    case 7:
                        if (!(service.perHundredMeters > 0)) return [
                            3,
                            9
                        ];
                        return [
                            4,
                            _this.googleServices.getSumDistanceAndDuration(input.points)
                        ];
                    case 8:
                        _tmp = _state.sent();
                        return [
                            3,
                            10
                        ];
                    case 9:
                        _tmp = {
                            distance: 0,
                            duration: 0,
                            directions: []
                        };
                        _state.label = 10;
                    case 10:
                        metrics = _tmp;
                        common_.Logger.log(" : =" + metrics.distance + ", =" + metrics.duration, "createOrderByQr");
                        //  ETA (  )
                        eta = new Date(new Date().getTime() + (input.intervalMinutes | 0) * 60 * 1000);
                        common_.Logger.log(" ETA: " + eta.toISOString(), "createOrderByQr");
                        if (!(input.riderId == null)) return [
                            3,
                            11
                        ];
                        _tmp1 = null;
                        return [
                            3,
                            13
                        ];
                    case 11:
                        return [
                            4,
                            _this.riderService.repo.findOneBy({
                                id: input.riderId
                            })
                        ];
                    case 12:
                        _tmp1 = _state.sent();
                        _state.label = 13;
                    case 13:
                        rider = _tmp1;
                        common_.Logger.log(" : " + (rider ? rider.id : ""), "createOrderByQr");
                        isResident = (_rider_isResident = rider == null ? void 0 : rider.isResident) != null ? _rider_isResident : process.env.MOTAXI == null;
                        common_.Logger.log("  : " + isResident, "createOrderByQr");
                        return [
                            4,
                            _this.sharedFleetService.getFleetIdsInPoint(input.points[0])
                        ];
                    case 14:
                        fleetIdsInPoint = _state.sent();
                        common_.Logger.log("  : " + fleetIdsInPoint, "createOrderByQr");
                        if (!(fleetIdsInPoint.length === 0)) return [
                            3,
                            15
                        ];
                        _tmp2 = 1;
                        return [
                            3,
                            17
                        ];
                    case 15:
                        return [
                            4,
                            _this.sharedFleetService.getFleetById(fleetIdsInPoint[0])
                        ];
                    case 16:
                        _tmp2 = (_feeMultiplier = (_this1 = _state.sent()) == null ? void 0 : _this1.feeMultiplier) != null ? _feeMultiplier : 1;
                        _state.label = 17;
                    case 17:
                        feeMultiplier = _tmp2;
                        common_.Logger.log("  : " + feeMultiplier, "createOrderByQr");
                        //   
                        cost = _this.servicesService.calculateCost(service, metrics.distance, metrics.duration, eta, feeMultiplier, isResident) + optionFee + service.perMinuteWait * ((_input_waitMinutes = input.waitMinutes) != null ? _input_waitMinutes : 0);
                        common_.Logger.log("  : " + cost, "createOrderByQr");
                        //   ,  
                        zonePricing = zonePricings.filter(function(price) {
                            return price.services.some(function(s) {
                                return s.id === input.serviceId;
                            });
                        });
                        if (zonePricing.length > 0) {
                            cost = zonePricing[0].cost;
                            common_.Logger.log("   : " + cost, "createOrderByQr");
                            now = new Date();
                            for(_iterator = shared_order_service_create_for_of_iterator_helper_loose(zonePricings[0].timeMultipliers); !(_step = _iterator()).done;){
                                multiplier = _step.value;
                                startMinutes = parseInt(multiplier.startTime.split(":")[0]) * 60 + parseInt(multiplier.startTime.split(":")[1]);
                                nowMinutes = now.getHours() * 60 + now.getMinutes();
                                endMinutes = parseInt(multiplier.endTime.split(":")[0]) * 60 + parseInt(multiplier.endTime.split(":")[1]);
                                if (nowMinutes >= startMinutes && nowMinutes <= endMinutes) {
                                    cost *= multiplier.multiply;
                                    common_.Logger.log("   " + multiplier.multiply + ",  : " + cost, "createOrderByQr");
                                }
                            }
                        }
                        return [
                            4,
                            _this.regionService.getRegionWithPoint(input.points[0])
                        ];
                    case 18:
                        regions = _state.sent();
                        common_.Logger.log(" : " + regions.length, "createOrderByQr");
                        //   
                        if (service.maximumDestinationDistance !== 0 && metrics.distance > service.maximumDestinationDistance) {
                            common_.Logger.error("     ", "createOrderByQr");
                            throw new apollo_.ForbiddenError("DISTANCE_TOO_FAR");
                        }
                        //   
                        shouldPrePay = false;
                        paidAmount = 0;
                        if (!(service.prepayPercent > 0 && input.riderId != null)) return [
                            3,
                            20
                        ];
                        return [
                            4,
                            _this.sharedRiderWalletService.getRiderCreditInCurrency(input.riderId, regions[0].currency)
                        ];
                    case 19:
                        balance = _state.sent();
                        amountNeedsToBePrePaid = cost * service.prepayPercent / 100;
                        if (balance < amountNeedsToBePrePaid) {
                            shouldPrePay = true;
                            common_.Logger.log(" : " + amountNeedsToBePrePaid, "createOrderByQr");
                        } else {
                            common_.Logger.log("  ", "createOrderByQr");
                        }
                        _state.label = 20;
                    case 20:
                        common_.Logger.log(" : " + shouldPrePay, "createOrderByQr");
                        common_.Logger.log(" : " + cost, "createOrderByQr");
                        common_.Logger.log("  : " + paidAmount, "createOrderByQr");
                        common_.Logger.log(" : " + optionFee, "createOrderByQr");
                        common_.Logger.log("ETA: " + eta.toISOString(), "createOrderByQr");
                        //   
                        orderObject = _this.orderRepository.create({
                            serviceId: input.serviceId,
                            currency: regions[0].currency,
                            riderId: input.riderId,
                            points: input.points,
                            addresses: input.addresses.map(function(address) {
                                return address.replace(", ", "-");
                            }),
                            distanceBest: metrics.distance,
                            durationBest: metrics.duration,
                            directions: metrics.directions,
                            paymentMode: input.paymentMode,
                            driverId: input.driverId,
                            savedPaymentMethodId: input.paymentMode === PaymentMode.SavedPaymentMethod ? input.paymentMethodId : undefined,
                            paymentGatewayId: input.paymentMode === PaymentMode.PaymentGateway ? input.paymentMethodId : undefined,
                            status: shouldPrePay ? OrderStatus.WaitingForPrePay : OrderStatus.Started,
                            paidAmount: paidAmount,
                            costBest: cost,
                            costAfterCoupon: cost,
                            expectedTimestamp: eta,
                            operatorId: input.operatorId,
                            waitMinutes: (_input_waitMinutes1 = input.waitMinutes) != null ? _input_waitMinutes1 : 0,
                            waitCost: service.perMinuteWait * ((_input_waitMinutes2 = input.waitMinutes) != null ? _input_waitMinutes2 : 0),
                            rideOptionsCost: optionFee,
                            fleetId: input.fleetId,
                            providerShare: service.providerShareFlat + service.providerSharePercent * cost / 100,
                            options: options
                        });
                        common_.Logger.log(orderObject, "SharedOrderService.createOrderByQr:   ");
                        return [
                            4,
                            _this.orderRepository.save(orderObject)
                        ];
                    case 21:
                        order = _state.sent();
                        common_.Logger.log("   ID: " + order.id, "createOrderByQr");
                        if (!(input.couponCode && rider)) return [
                            3,
                            23
                        ];
                        common_.Logger.log(" : " + input.couponCode, "createOrderByQr");
                        return [
                            4,
                            _this.commonCouponService.applyCoupon(input.couponCode, order.id, rider.id)
                        ];
                    case 22:
                        order = _state.sent();
                        common_.Logger.log(" ,   : " + order.costAfterCoupon, "createOrderByQr");
                        _state.label = 23;
                    case 23:
                        //     StartedByQr
                        return [
                            4,
                            _this.activityRepository.insert({
                                requestId: order.id,
                                type: RequestActivityType.StartedByQr
                            })
                        ];
                    case 24:
                        _state.sent();
                        common_.Logger.log(" 'StartedByQr'    " + order.id, "createOrderByQr");
                        //    
                        return [
                            4,
                            _this.riderService.repo.update(order.riderId, {
                                lastActivityAt: new Date()
                            })
                        ];
                    case 25:
                        _state.sent();
                        common_.Logger.log("      ID: " + order.riderId, "createOrderByQr");
                        //      
                        _this.assignOrderToDriver(order.id, input.driverId);
                        common_.Logger.log("  ID " + input.driverId + "    " + order.id, "createOrderByQr");
                        return [
                            2,
                            order
                        ];
                }
            });
        })();
    };
    _proto.processPrePay = function processPrePay(orderId, authorizedAmount) {
        if (authorizedAmount === void 0) authorizedAmount = 0;
        var _this = this;
        return shared_order_service_async_to_generator(function() {
            var order, riderCredit, minimumRequired, closeDriverIds, fleetIdsInPoint, driversWithService;
            return shared_order_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.orderRepository.findOneOrFail({
                                where: {
                                    id: orderId
                                },
                                relations: [
                                    "service",
                                    "driver",
                                    "driver.fleet",
                                    "rider"
                                ]
                            })
                        ];
                    case 1:
                        order = _state.sent();
                        return [
                            4,
                            _this.sharedRiderWalletService.getRiderCreditInCurrency(order.riderId, order.currency)
                        ];
                    case 2:
                        riderCredit = _state.sent();
                        minimumRequired = order.costAfterCoupon * (order.service.prepayPercent / 100.0);
                        common_.Logger.log("riderCredit: " + riderCredit, "processPrePay");
                        common_.Logger.log("authorizedAmount: " + authorizedAmount, "processPrePay");
                        common_.Logger.log("serviceFee: " + order.costAfterCoupon, "processPrePay");
                        common_.Logger.log("Minmum required authorizedAmount: " + minimumRequired, "processPrePay");
                        if (riderCredit + authorizedAmount - minimumRequired < 1) {
                            throw new apollo_.ForbiddenError("Credit is not enough");
                        }
                        return [
                            4,
                            _this.orderRepository.update(order.id, {
                                status: OrderStatus.Requested
                            })
                        ];
                    case 3:
                        _state.sent();
                        return [
                            4,
                            _this.driverRedisService.getClose(order.points[0], order.service.searchRadius)
                        ];
                    case 4:
                        closeDriverIds = _state.sent().map(function(x) {
                            return x.driverId;
                        });
                        return [
                            4,
                            _this.sharedFleetService.getFleetIdsInPoint(order.points[0])
                        ];
                    case 5:
                        fleetIdsInPoint = _state.sent();
                        return [
                            4,
                            _this.driverService.getOnlineDriversWithServiceId(closeDriverIds, order.serviceId, fleetIdsInPoint)
                        ];
                    case 6:
                        driversWithService = _state.sent();
                        _this.orderRedisService.driverNotified(order.id, driversWithService);
                        _this.pubSub.publish("orderCreated", {
                            orderCreated: order,
                            driverIds: driversWithService.map(function(driver) {
                                return driver.id;
                            })
                        });
                        _this.driverNotificationService.requests(driversWithService);
                        return [
                            2,
                            _this.orderRepository.findOneOrFail({
                                where: {
                                    id: orderId
                                },
                                relations: [
                                    "service",
                                    "driver",
                                    "driver.fleet",
                                    "rider"
                                ]
                            })
                        ];
                }
            });
        })();
    };
    _proto.finish = function finish(orderId, cashAmount) {
        if (cashAmount === void 0) cashAmount = 0.0;
        var _this = this;
        return shared_order_service_async_to_generator(function() {
            var _order_driver, order, riderCredit, providerPercent, commission, unPaidAmount, payment, status, captureResult, fleetShare;
            return shared_order_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.orderRepository.findOneOrFail({
                                where: {
                                    id: orderId
                                },
                                relations: [
                                    "service",
                                    "driver",
                                    "driver.fleet",
                                    "rider"
                                ]
                            })
                        ];
                    case 1:
                        order = _state.sent();
                        if (order.service.paymentMethod == ServicePaymentMethod.OnlyCredit && cashAmount > 0) {
                            throw new apollo_.ForbiddenError("Cash payment is not available for this service.");
                        }
                        return [
                            4,
                            _this.sharedRiderWalletService.getRiderCreditInCurrency(order.riderId, order.currency)
                        ];
                    case 2:
                        riderCredit = _state.sent();
                        providerPercent = order.rider.isResident === false ? order.service.providerSharePercent * order.service.touristMultiplier : order.service.providerSharePercent;
                        commission = providerPercent * order.costAfterCoupon / 100 + order.service.providerShareFlat;
                        unPaidAmount = order.costAfterCoupon - order.paidAmount + order.tipAmount;
                        if (!(riderCredit + cashAmount < unPaidAmount)) return [
                            3,
                            13
                        ];
                        return [
                            4,
                            _this.paymentRepository.find({
                                where: {
                                    userType: "client",
                                    userId: order.riderId.toString(),
                                    status: PaymentStatus.Authorized,
                                    orderNumber: order.id.toString()
                                },
                                order: {
                                    id: "DESC"
                                }
                            })
                        ];
                    case 3:
                        payment = _state.sent();
                        status = OrderStatus.WaitingForPostPay;
                        if (!(payment.length > 0)) return [
                            3,
                            11
                        ];
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.get(process.env.GATEWAY_SERVER_URL + "/capture?id=" + payment[0].transactionNumber + "&amount=" + (unPaidAmount - riderCredit)))
                        ];
                    case 4:
                        captureResult = _state.sent();
                        if (!(captureResult.data.status == "OK")) return [
                            3,
                            8
                        ];
                        return [
                            4,
                            _this.sharedRiderWalletService.getRiderCreditInCurrency(order.riderId, order.currency)
                        ];
                    case 5:
                        riderCredit = _state.sent();
                        unPaidAmount = order.costAfterCoupon - order.paidAmount + order.tipAmount;
                        if (!(riderCredit + cashAmount < unPaidAmount)) return [
                            3,
                            7
                        ];
                        return [
                            4,
                            _this.orderRepository.update(order.id, {
                                status: status
                            })
                        ];
                    case 6:
                        _state.sent();
                        return [
                            2
                        ];
                    case 7:
                        return [
                            3,
                            10
                        ];
                    case 8:
                        return [
                            4,
                            _this.orderRepository.update(order.id, {
                                status: status
                            })
                        ];
                    case 9:
                        _state.sent();
                        return [
                            2
                        ];
                    case 10:
                        return [
                            3,
                            13
                        ];
                    case 11:
                        return [
                            4,
                            _this.orderRepository.update(order.id, {
                                status: status
                            })
                        ];
                    case 12:
                        _state.sent();
                        return [
                            2
                        ];
                    case 13:
                        return [
                            4,
                            _this.driverService.rechargeWallet({
                                status: TransactionStatus.Done,
                                driverId: order.driverId,
                                currency: order.currency,
                                action: TransactionAction.Deduct,
                                deductType: DriverDeductTransactionType.Commission,
                                amount: -1 * commission,
                                requestId: order.id
                            })
                        ];
                    case 14:
                        _state.sent();
                        fleetShare = 0;
                        if (((_order_driver = order.driver) == null ? void 0 : _order_driver.fleetId) != null) {
                            fleetShare = commission * order.driver.fleet.commissionSharePercent / 100 + order.driver.fleet.commissionShareFlat;
                            if (fleetShare > 0) {
                                _this.sharedFleetService.rechargeWallet({
                                    fleetId: order.driver.fleetId,
                                    action: TransactionAction.Recharge,
                                    rechargeType: ProviderRechargeTransactionType.Commission,
                                    amount: fleetShare,
                                    currency: order.currency,
                                    requestId: order.id,
                                    driverId: order.driverId
                                });
                            }
                        }
                        return [
                            4,
                            _this.sharedProviderService.rechargeWallet({
                                action: TransactionAction.Recharge,
                                rechargeType: ProviderRechargeTransactionType.Commission,
                                currency: order.currency,
                                amount: commission - fleetShare
                            })
                        ];
                    case 15:
                        _state.sent();
                        if (!(order.costAfterCoupon - cashAmount > 0)) return [
                            3,
                            17
                        ];
                        return [
                            4,
                            _this.driverService.rechargeWallet({
                                status: TransactionStatus.Done,
                                driverId: order.driverId,
                                currency: order.currency,
                                requestId: order.id,
                                action: TransactionAction.Recharge,
                                rechargeType: DriverRechargeTransactionType.OrderFee,
                                amount: order.costAfterCoupon - cashAmount + order.tipAmount
                            })
                        ];
                    case 16:
                        _state.sent();
                        _state.label = 17;
                    case 17:
                        if (!(riderCredit > 0 && cashAmount < unPaidAmount)) return [
                            3,
                            19
                        ];
                        return [
                            4,
                            _this.sharedRiderWalletService.rechargeWallet({
                                status: TransactionStatus.Done,
                                action: TransactionAction.Deduct,
                                deductType: RiderDeductTransactionType.OrderFee,
                                currency: order.currency,
                                requestId: order.id,
                                amount: -1 * (unPaidAmount - cashAmount),
                                riderId: order.riderId
                            })
                        ];
                    case 18:
                        _state.sent();
                        _state.label = 19;
                    case 19:
                        return [
                            4,
                            _this.orderRepository.update(order.id, {
                                paidAmount: order.costAfterCoupon,
                                status: OrderStatus.WaitingForReview,
                                finishTimestamp: new Date()
                            })
                        ];
                    case 20:
                        _state.sent();
                        return [
                            4,
                            _this.driverService.updateDriverStatus(order.driverId, DriverStatus.Online)
                        ];
                    case 21:
                        _state.sent();
                        _this.activityRepository.insert({
                            requestId: order.id,
                            type: RequestActivityType.Paid
                        });
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.assignOrderToDriver = function assignOrderToDriver(orderId, driverId) {
        var _this = this;
        return shared_order_service_async_to_generator(function() {
            var _ref, travel, driverLocation, metrics, _tmp, dt, etaPickup, result;
            return shared_order_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            Promise.all([
                                _this.orderRepository.findOneOrFail({
                                    where: {
                                        id: orderId
                                    },
                                    relations: [
                                        "driver",
                                        "driver.car",
                                        "driver.carColor",
                                        "service"
                                    ]
                                }),
                                _this.driverRedisService.getDriverCoordinate(driverId)
                            ])
                        ];
                    case 1:
                        _ref = _state.sent(), travel = _ref[0], driverLocation = _ref[1];
                        _this.activityRepository.insert({
                            requestId: orderId,
                            type: RequestActivityType.DriverAccepted
                        });
                        //  const allowedStatuses = [OrderStatus.Found, OrderStatus.NoCloseFound, OrderStatus.Requested, OrderStatus.Booked];
                        // if (travel == null || !allowedStatuses.includes(travel.status)) {
                        if (travel == null) {
                            throw new apollo_.ForbiddenError("Already Taken");
                        }
                        if (!(travel.driverId != null)) return [
                            3,
                            3
                        ];
                        _this.driverNotificationService.canceled(travel.driver);
                        return [
                            4,
                            _this.driverService.updateDriverStatus(travel.driverId, DriverStatus.Online)
                        ];
                    case 2:
                        _state.sent();
                        travel.status = OrderStatus.RiderCanceled;
                        _this.pubSub.publish("orderUpdated", {
                            orderUpdated: travel
                        });
                        _state.label = 3;
                    case 3:
                        if (!(driverLocation != null)) return [
                            3,
                            5
                        ];
                        return [
                            4,
                            _this.googleServices.getSumDistanceAndDuration([
                                travel.points[0],
                                driverLocation
                            ])
                        ];
                    case 4:
                        _tmp = _state.sent();
                        return [
                            3,
                            6
                        ];
                    case 5:
                        _tmp = {
                            distance: 0,
                            duration: 0
                        };
                        _state.label = 6;
                    case 6:
                        metrics = _tmp;
                        dt = new Date();
                        etaPickup = dt.setSeconds(dt.getSeconds() + metrics.duration);
                        _this.driverService.updateDriverStatus(driverId, DriverStatus.InService);
                        return [
                            4,
                            _this.orderRedisService.expire([
                                orderId
                            ])
                        ];
                    case 7:
                        _state.sent();
                        return [
                            4,
                            _this.orderRepository.update(orderId, {
                                status: OrderStatus.DriverAccepted,
                                etaPickup: new Date(etaPickup),
                                driverId: driverId
                            })
                        ];
                    case 8:
                        _state.sent();
                        return [
                            4,
                            _this.orderRepository.findOneOrFail({
                                where: {
                                    id: orderId
                                },
                                relations: [
                                    "driver",
                                    "driver.car",
                                    "driver.carColor",
                                    "service",
                                    "rider"
                                ]
                            })
                        ];
                    case 9:
                        result = _state.sent();
                        _this.pubSub.publish("orderUpdated", {
                            orderUpdated: result
                        });
                        _this.pubSub.publish("orderRemoved", {
                            orderRemoved: result
                        }); // This one has a filter to let know all except the one accepted.
                        _this.riderNotificationService.bookingAssigned(result.rider, result.expectedTimestamp.toISOString());
                        _this.driverNotificationService.assigned(result.driver, result.expectedTimestamp.toTimeString(), result.addresses[0], result.addresses[result.addresses.length - 1]);
                        return [
                            2,
                            result
                        ];
                }
            });
        })();
    };
    return SharedOrderService;
}();
SharedOrderService = shared_order_service_ts_decorate([
    (0,common_.Injectable)(),
    shared_order_service_ts_param(0, (0,typeorm_.InjectRepository)(TaxiOrderEntity)),
    shared_order_service_ts_param(1, (0,typeorm_.InjectRepository)(RequestActivityEntity)),
    shared_order_service_ts_param(3, (0,typeorm_.InjectRepository)(ServiceCategoryEntity)),
    shared_order_service_ts_param(4, (0,typeorm_.InjectRepository)(ServiceOptionEntity)),
    shared_order_service_ts_param(5, (0,typeorm_.InjectRepository)(ZonePriceEntity)),
    shared_order_service_ts_param(6, (0,typeorm_.InjectRepository)(PaymentEntity)),
    shared_order_service_ts_param(17, (0,nestjs_query_graphql_.InjectPubSub)()),
    shared_order_service_ts_metadata("design:type", Function),
    shared_order_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof RegionService === "undefined" ? Object : RegionService,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof GoogleServicesService === "undefined" ? Object : GoogleServicesService,
        typeof ServiceService === "undefined" ? Object : ServiceService,
        typeof SharedRiderService === "undefined" ? Object : SharedRiderService,
        typeof SharedCustomerWalletService === "undefined" ? Object : SharedCustomerWalletService,
        typeof DriverRedisService === "undefined" ? Object : DriverRedisService,
        typeof OrderRedisService === "undefined" ? Object : OrderRedisService,
        typeof SharedDriverService === "undefined" ? Object : SharedDriverService,
        typeof SharedProviderService === "undefined" ? Object : SharedProviderService,
        typeof SharedFleetService === "undefined" ? Object : SharedFleetService,
        typeof CommonCouponService === "undefined" ? Object : CommonCouponService,
        typeof external_graphql_redis_subscriptions_.RedisPubSub === "undefined" ? Object : external_graphql_redis_subscriptions_.RedisPubSub,
        typeof DriverNotificationService === "undefined" ? Object : DriverNotificationService,
        typeof RiderNotificationService === "undefined" ? Object : RiderNotificationService,
        typeof axios_.HttpService === "undefined" ? Object : axios_.HttpService
    ])
], SharedOrderService);
var CalculateFareError;
(function(CalculateFareError) {
    CalculateFareError["RegionUnsupported"] = "REGION_UNSUPPORTED";
    CalculateFareError["NoServiceInRegion"] = "NO_SERVICE_IN_REGION";
})(CalculateFareError || (CalculateFareError = {}));

;// ../../libs/database/src/lib/order/shared-order.module.ts
function shared_order_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}



































var SharedOrderModule = function SharedOrderModule() {
    "use strict";
};
SharedOrderModule = shared_order_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            RedisHelpersModule,
            CommonCouponModule,
            SharedCustomerWalletModule,
            typeorm_.TypeOrmModule.forFeature([
                ServiceCategoryEntity,
                ServiceOptionEntity,
                ServiceEntity,
                CustomerEntity,
                DriverEntity,
                DriverWalletEntity,
                DriverTransactionEntity,
                FleetEntity,
                FleetWalletEntity,
                FleetTransactionEntity,
                ProviderWalletEntity,
                ProviderTransactionEntity,
                RiderWalletEntity,
                RiderTransactionEntity,
                TaxiOrderEntity,
                RequestActivityEntity,
                ZonePriceEntity,
                PaymentEntity
            ]),
            axios_.HttpModule,
            RegionModule,
            GoogleServicesModule,
            FirebaseNotificationModule.register()
        ],
        providers: [
            RedisPubSubProvider.provider(),
            ServiceService,
            SharedDriverService,
            SharedFleetService,
            SharedOrderService,
            SharedProviderService,
            SharedRiderService,
            SharedConfigurationService
        ],
        exports: [
            SharedDriverService,
            SharedFleetService,
            SharedOrderService,
            SharedProviderService,
            SharedRiderService,
            ServiceService
        ]
    })
], SharedOrderModule);

;// ../../libs/database/src/lib/shop/shared-shop.module.ts
function shared_shop_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}










var SharedShopModule = function SharedShopModule() {
    "use strict";
};
SharedShopModule = shared_shop_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            GoogleServicesModule,
            SharedOrderModule,
            typeorm_.TypeOrmModule.forFeature([
                ShopEntity,
                RiderAddressEntity,
                ServiceEntity,
                ProductEntity
            ])
        ],
        providers: [
            SharedShopService,
            DeliveryFeeService
        ],
        exports: [
            SharedShopService,
            DeliveryFeeService
        ]
    })
], SharedShopModule);

;// ../../libs/database/src/lib/shop/index.ts




;// ../../libs/database/src/lib/customer/shared-customer.service.ts
function shared_customer_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_customer_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_customer_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_customer_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_customer_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_customer_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_customer_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function shared_customer_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}




var SharedCustomerService = /*#__PURE__*/ function() {
    "use strict";
    function SharedCustomerService(customerRepository) {
        this.customerRepository = customerRepository;
    }
    var _proto = SharedCustomerService.prototype;
    _proto.findById = function findById(id) {
        var _this = this;
        return shared_customer_service_async_to_generator(function() {
            return shared_customer_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.customerRepository.findOneOrFail({
                        where: {
                            id: id
                        },
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.findWithDeleted = function findWithDeleted(filter) {
        var _this = this;
        return shared_customer_service_async_to_generator(function() {
            return shared_customer_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.customerRepository.findOne({
                        where: filter,
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.findUserByMobileNumber = function findUserByMobileNumber(mobileNumber) {
        var _this = this;
        return shared_customer_service_async_to_generator(function() {
            return shared_customer_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.customerRepository.findOne({
                        where: {
                            mobileNumber: mobileNumber
                        },
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.createUserWithMobileNumber = function createUserWithMobileNumber(input) {
        var _this = this;
        return shared_customer_service_async_to_generator(function() {
            var rider, _$CustomerEntity;
            return shared_customer_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log('creating rider with ');
                        rider = _this.customerRepository.create({
                            mobileNumber: input.mobileNumber,
                            countryIso: input.countryIso
                        });
                        return [
                            4,
                            _this.customerRepository.save(rider)
                        ];
                    case 1:
                        _$CustomerEntity = _state.sent();
                        return [
                            2,
                            _$CustomerEntity
                        ];
                }
            });
        })();
    };
    _proto.updateLastActivity = function updateLastActivity(riderId) {
        return this.customerRepository.update(riderId, {
            lastActivityAt: new Date()
        });
    };
    _proto.findOrCreateUserWithMobileNumber = function findOrCreateUserWithMobileNumber(input) {
        var _this = this;
        return shared_customer_service_async_to_generator(function() {
            var findResult;
            return shared_customer_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.findUserByMobileNumber(input.mobileNumber)
                        ];
                    case 1:
                        findResult = _state.sent();
                        if (!((findResult == null ? void 0 : findResult.deletedAt) != null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.customerRepository.restore(findResult == null ? void 0 : findResult.id)
                        ];
                    case 2:
                        _state.sent();
                        _state.label = 3;
                    case 3:
                        if (!(findResult == null)) return [
                            3,
                            5
                        ];
                        return [
                            4,
                            _this.createUserWithMobileNumber(input)
                        ];
                    case 4:
                        return [
                            2,
                            _state.sent()
                        ];
                    case 5:
                        return [
                            2,
                            findResult
                        ];
                    case 6:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.deleteById = function deleteById(id) {
        var _this = this;
        return shared_customer_service_async_to_generator(function() {
            var user;
            return shared_customer_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.findById(id)
                        ];
                    case 1:
                        user = _state.sent();
                        return [
                            4,
                            _this.customerRepository.softDelete(id)
                        ];
                    case 2:
                        _state.sent();
                        return [
                            2,
                            user
                        ];
                }
            });
        })();
    };
    return SharedCustomerService;
}();
SharedCustomerService = shared_customer_service_ts_decorate([
    (0,common_.Injectable)(),
    shared_customer_service_ts_param(0, (0,typeorm_.InjectRepository)(CustomerEntity)),
    shared_customer_service_ts_metadata("design:type", Function),
    shared_customer_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SharedCustomerService);

;// ../../libs/database/src/lib/customer/shared-customer.module.ts
function shared_customer_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}




var SharedCustomerModule = function SharedCustomerModule() {
    "use strict";
};
SharedCustomerModule = shared_customer_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            typeorm_.TypeOrmModule.forFeature([
                CustomerEntity
            ])
        ],
        providers: [
            SharedCustomerService
        ],
        exports: [
            SharedCustomerService
        ]
    })
], SharedCustomerModule);

;// ../../libs/database/src/lib/customer/index.ts



;// ../../libs/database/src/lib/coupon/index.ts




;// ../../libs/database/src/lib/interfaces/app-config-info.dto.ts
function app_config_info_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function app_config_info_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var AppConfigInfoDTO = function AppConfigInfoDTO() {
    "use strict";
};
app_config_info_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    app_config_info_dto_ts_metadata("design:type", String)
], AppConfigInfoDTO.prototype, "logo", void 0);
app_config_info_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    app_config_info_dto_ts_metadata("design:type", String)
], AppConfigInfoDTO.prototype, "name", void 0);
app_config_info_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return external_license_verify_.AppColorScheme;
    }, {
        nullable: true
    }),
    app_config_info_dto_ts_metadata("design:type", typeof external_license_verify_.AppColorScheme === "undefined" ? Object : external_license_verify_.AppColorScheme)
], AppConfigInfoDTO.prototype, "color", void 0);
AppConfigInfoDTO = app_config_info_dto_ts_decorate([
    (0,graphql_.InputType)('AppConfigInfoInput'),
    (0,graphql_.ObjectType)('AppConfigInfo')
], AppConfigInfoDTO);
(0,graphql_.registerEnumType)(external_license_verify_.AppColorScheme, {
    name: 'AppColorScheme'
});

;// ../../libs/database/src/lib/interfaces/license.dto.ts
function license_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function license_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var License = function License() {
    "use strict";
};
license_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }),
    license_dto_ts_metadata("design:type", String)
], License.prototype, "buyerName", void 0);
license_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return LicenseType;
    }),
    license_dto_ts_metadata("design:type", typeof LicenseType === "undefined" ? Object : LicenseType)
], License.prototype, "licenseType", void 0);
license_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.GraphQLISODateTime;
    }),
    license_dto_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], License.prototype, "supportExpireDate", void 0);
license_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            AppType
        ];
    }),
    license_dto_ts_metadata("design:type", Array)
], License.prototype, "connectedApps", void 0);
license_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            external_license_verify_.PlatformAddOn
        ];
    }),
    license_dto_ts_metadata("design:type", Array)
], License.prototype, "platformAddons", void 0);
License = license_dto_ts_decorate([
    (0,graphql_.ObjectType)('License')
], License);
(0,graphql_.registerEnumType)(external_license_verify_.PlatformAddOn, {
    name: 'PlatformAddOn'
});

;// ../../libs/database/src/lib/interfaces/config.dto.ts
function config_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function config_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var CurrentConfiguration = function CurrentConfiguration() {
    "use strict";
};
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "purchaseCode", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "backendMapsAPIKey", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "adminPanelAPIKey", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "firebaseProjectPrivateKey", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Number)
], CurrentConfiguration.prototype, "versionNumber", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "companyLogo", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "companyName", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return AppConfigInfoDTO;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", typeof AppConfigInfoDTO === "undefined" ? Object : AppConfigInfoDTO)
], CurrentConfiguration.prototype, "taxi", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return AppConfigInfoDTO;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", typeof AppConfigInfoDTO === "undefined" ? Object : AppConfigInfoDTO)
], CurrentConfiguration.prototype, "shop", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return AppConfigInfoDTO;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", typeof AppConfigInfoDTO === "undefined" ? Object : AppConfigInfoDTO)
], CurrentConfiguration.prototype, "parking", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "mysqlHost", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Int;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Number)
], CurrentConfiguration.prototype, "mysqlPort", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "mysqlUser", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "mysqlPassword", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "mysqlDatabase", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "redisHost", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Int;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Number)
], CurrentConfiguration.prototype, "redisPort", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "redisPassword", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Int;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Number)
], CurrentConfiguration.prototype, "redisDb", void 0);
CurrentConfiguration = config_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], CurrentConfiguration);
var UploadResult = function UploadResult() {
    "use strict";
};
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", String)
], UploadResult.prototype, "url", void 0);
UploadResult = config_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], UploadResult);
var UpdatePurchaseCodeStatus;
(function(UpdatePurchaseCodeStatus) {
    UpdatePurchaseCodeStatus["OK"] = "OK";
    UpdatePurchaseCodeStatus["INVALID"] = "INVALID";
    UpdatePurchaseCodeStatus["OVERUSED"] = "OVERUSED";
    UpdatePurchaseCodeStatus["CLIENT_FOUND"] = "CLIENT_FOUND";
})(UpdatePurchaseCodeStatus || (UpdatePurchaseCodeStatus = {}));
(0,graphql_.registerEnumType)(UpdatePurchaseCodeStatus, {
    name: 'UpdatePurchaseCodeStatus'
});
var UpdatePurchaseCodeResult = function UpdatePurchaseCodeResult() {
    "use strict";
};
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return UpdatePurchaseCodeStatus;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", String)
], UpdatePurchaseCodeResult.prototype, "status", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], UpdatePurchaseCodeResult.prototype, "message", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return LicenseInformationDTO;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", typeof LicenseInformationDTO === "undefined" ? Object : LicenseInformationDTO)
], UpdatePurchaseCodeResult.prototype, "data", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            UpdatePurchaseCodeClient
        ];
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Array)
], UpdatePurchaseCodeResult.prototype, "clients", void 0);
UpdatePurchaseCodeResult = config_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], UpdatePurchaseCodeResult);
var UpdatePurchaseCodeClient = function UpdatePurchaseCodeClient() {
    "use strict";
};
config_dto_ts_decorate([
    (0,nestjs_query_graphql_.IDField)(function() {
        return graphql_.ID;
    }),
    config_dto_ts_metadata("design:type", Number)
], UpdatePurchaseCodeClient.prototype, "id", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return Boolean;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", Boolean)
], UpdatePurchaseCodeClient.prototype, "enabled", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", String)
], UpdatePurchaseCodeClient.prototype, "ip", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", Number)
], UpdatePurchaseCodeClient.prototype, "port", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", String)
], UpdatePurchaseCodeClient.prototype, "token", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.ID;
    }),
    config_dto_ts_metadata("design:type", Number)
], UpdatePurchaseCodeClient.prototype, "purchaseId", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.GraphQLISODateTime;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], UpdatePurchaseCodeClient.prototype, "firstVerifiedAt", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.GraphQLISODateTime;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], UpdatePurchaseCodeClient.prototype, "lastVerifiedAt", void 0);
UpdatePurchaseCodeClient = config_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], UpdatePurchaseCodeClient);
var LicenseInformationDTO = function LicenseInformationDTO() {
    "use strict";
};
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return License;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", typeof License === "undefined" ? Object : License)
], LicenseInformationDTO.prototype, "license", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            String
        ];
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Array)
], LicenseInformationDTO.prototype, "benefits", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            String
        ];
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Array)
], LicenseInformationDTO.prototype, "drawbacks", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            AvaialbeUpgrade
        ];
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Array)
], LicenseInformationDTO.prototype, "availableUpgrades", void 0);
LicenseInformationDTO = config_dto_ts_decorate([
    (0,graphql_.ObjectType)('LicenseInformation')
], LicenseInformationDTO);
var AvaialbeUpgrade = function AvaialbeUpgrade() {
    "use strict";
};
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }),
    config_dto_ts_metadata("design:type", String)
], AvaialbeUpgrade.prototype, "type", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }),
    config_dto_ts_metadata("design:type", Number)
], AvaialbeUpgrade.prototype, "price", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            String
        ];
    }),
    config_dto_ts_metadata("design:type", Array)
], AvaialbeUpgrade.prototype, "benefits", void 0);
AvaialbeUpgrade = config_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], AvaialbeUpgrade);
var UpdateConfigStatus;
(function(UpdateConfigStatus) {
    UpdateConfigStatus["OK"] = "OK";
    UpdateConfigStatus["INVALID"] = "INVALID";
})(UpdateConfigStatus || (UpdateConfigStatus = {}));
(0,graphql_.registerEnumType)(UpdateConfigStatus, {
    name: 'UpdateConfigStatus'
});
var LicenseType;
(function(LicenseType) {
    LicenseType["Regular"] = "Regular";
    LicenseType["Extended"] = "Extended";
    LicenseType["Bronze"] = "Bronze";
    LicenseType["Silver"] = "Silver";
    LicenseType["Gold"] = "Gold";
})(LicenseType || (LicenseType = {}));
(0,graphql_.registerEnumType)(LicenseType, {
    name: 'LicenseType'
});
var UpdateConfigResult = function UpdateConfigResult() {
    "use strict";
};
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return UpdateConfigStatus;
    }),
    config_dto_ts_metadata("design:type", String)
], UpdateConfigResult.prototype, "status", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], UpdateConfigResult.prototype, "message", void 0);
UpdateConfigResult = config_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], UpdateConfigResult);

;// ../../libs/database/src/lib/interfaces/config-information.dto.ts
function config_information_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function config_information_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ConfigInformation = function ConfigInformation() {
    "use strict";
};
config_information_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return Boolean;
    }),
    config_information_dto_ts_metadata("design:type", Boolean)
], ConfigInformation.prototype, "isValid", void 0);
config_information_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return CurrentConfiguration;
    }, {
        nullable: true
    }),
    config_information_dto_ts_metadata("design:type", typeof CurrentConfiguration === "undefined" ? Object : CurrentConfiguration)
], ConfigInformation.prototype, "config", void 0);
ConfigInformation = config_information_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], ConfigInformation);

;// ../../libs/database/src/lib/interfaces/date-range-multiplier.dto.ts
function date_range_multiplier_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function date_range_multiplier_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var DateRangeMultiplier = function DateRangeMultiplier() {
    "use strict";
};
date_range_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    date_range_multiplier_dto_ts_metadata("design:type", Number)
], DateRangeMultiplier.prototype, "startDate", void 0);
date_range_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    date_range_multiplier_dto_ts_metadata("design:type", Number)
], DateRangeMultiplier.prototype, "endDate", void 0);
date_range_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    date_range_multiplier_dto_ts_metadata("design:type", Number)
], DateRangeMultiplier.prototype, "multiply", void 0);
DateRangeMultiplier = date_range_multiplier_dto_ts_decorate([
    (0,graphql_.InputType)('DateRangeMultiplierInput'),
    (0,graphql_.ObjectType)()
], DateRangeMultiplier);

;// ../../libs/database/src/lib/interfaces/distance-multiplier.dto.ts
function distance_multiplier_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function distance_multiplier_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var DistanceMultiplier = function DistanceMultiplier() {
    "use strict";
};
distance_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    distance_multiplier_dto_ts_metadata("design:type", Number)
], DistanceMultiplier.prototype, "distanceFrom", void 0);
distance_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    distance_multiplier_dto_ts_metadata("design:type", Number)
], DistanceMultiplier.prototype, "distanceTo", void 0);
distance_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    distance_multiplier_dto_ts_metadata("design:type", Number)
], DistanceMultiplier.prototype, "multiply", void 0);
DistanceMultiplier = distance_multiplier_dto_ts_decorate([
    (0,graphql_.InputType)('DistanceMultiplierInput'),
    (0,graphql_.ObjectType)()
], DistanceMultiplier);

;// ../../libs/database/src/lib/interfaces/license-verify-remote-response.ts
/**
 * @deprecated
 */ var LicenseVerifyRemoteResponse = function LicenseVerifyRemoteResponse() {
    "use strict";
};

;// ../../libs/database/src/lib/interfaces/time-multiplier.dto.ts
function time_multiplier_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function time_multiplier_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var TimeMultiplier = function TimeMultiplier() {
    "use strict";
};
time_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: false
    }),
    time_multiplier_dto_ts_metadata("design:type", String)
], TimeMultiplier.prototype, "startTime", void 0);
time_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: false
    }),
    time_multiplier_dto_ts_metadata("design:type", String)
], TimeMultiplier.prototype, "endTime", void 0);
time_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    time_multiplier_dto_ts_metadata("design:type", Number)
], TimeMultiplier.prototype, "multiply", void 0);
TimeMultiplier = time_multiplier_dto_ts_decorate([
    (0,graphql_.InputType)('TimeMultiplierInput'),
    (0,graphql_.ObjectType)()
], TimeMultiplier);

;// ../../libs/database/src/lib/interfaces/time.dto.ts
function time_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function time_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var Time = function Time() {
    "use strict";
};
time_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Int;
    }),
    time_dto_ts_metadata("design:type", Number)
], Time.prototype, "hour", void 0);
time_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Int;
    }),
    time_dto_ts_metadata("design:type", Number)
], Time.prototype, "minute", void 0);
Time = time_dto_ts_decorate([
    (0,graphql_.ObjectType)(),
    (0,graphql_.InputType)('TimeInput')
], Time);

;// ../../libs/database/src/lib/interfaces/weekday-multiplier.dto.ts
function weekday_multiplier_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function weekday_multiplier_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var WeekdayMultiplier = function WeekdayMultiplier() {
    "use strict";
};
weekday_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return Weekday;
    }, {
        nullable: false
    }),
    weekday_multiplier_dto_ts_metadata("design:type", String)
], WeekdayMultiplier.prototype, "weekday", void 0);
weekday_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    weekday_multiplier_dto_ts_metadata("design:type", Number)
], WeekdayMultiplier.prototype, "multiply", void 0);
WeekdayMultiplier = weekday_multiplier_dto_ts_decorate([
    (0,graphql_.InputType)('WeekdayMultiplierInput'),
    (0,graphql_.ObjectType)()
], WeekdayMultiplier);
var Weekday;
(function(Weekday) {
    Weekday["Sunday"] = "Sunday";
    Weekday["Monday"] = "Monday";
    Weekday["Tuesday"] = "Tuesday";
    Weekday["Wednesday"] = "Wednesday";
    Weekday["Thursday"] = "Thursday";
    Weekday["Friday"] = "Friday";
    Weekday["Saturday"] = "Saturday";
})(Weekday || (Weekday = {}));
(0,graphql_.registerEnumType)(Weekday, {
    name: 'Weekday'
});

;// ../../libs/database/src/lib/interfaces/weekday-schedule.dto.ts
function weekday_schedule_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function weekday_schedule_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var WeekdayScheduleDTO = function WeekdayScheduleDTO() {
    "use strict";
};
weekday_schedule_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return Weekday;
    }, {
        nullable: false
    }),
    weekday_schedule_dto_ts_metadata("design:type", typeof Weekday === "undefined" ? Object : Weekday)
], WeekdayScheduleDTO.prototype, "weekday", void 0);
weekday_schedule_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            TimeRangeDTO
        ];
    }, {
        nullable: false
    }),
    weekday_schedule_dto_ts_metadata("design:type", Array)
], WeekdayScheduleDTO.prototype, "openingHours", void 0);
WeekdayScheduleDTO = weekday_schedule_dto_ts_decorate([
    (0,graphql_.ObjectType)('WeekdaySchedule'),
    (0,graphql_.InputType)('WeekdayScheduleInput')
], WeekdayScheduleDTO);
var TimeRangeDTO = function TimeRangeDTO() {
    "use strict";
};
weekday_schedule_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: false
    }),
    weekday_schedule_dto_ts_metadata("design:type", String)
], TimeRangeDTO.prototype, "open", void 0);
weekday_schedule_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: false
    }),
    weekday_schedule_dto_ts_metadata("design:type", String)
], TimeRangeDTO.prototype, "close", void 0);
TimeRangeDTO = weekday_schedule_dto_ts_decorate([
    (0,graphql_.ObjectType)('TimeRange'),
    (0,graphql_.InputType)('OpeningHoursInput')
], TimeRangeDTO);

;// ../../libs/database/src/lib/interfaces/index.ts














;// ../../libs/database/src/lib/geo/dto/geo-provider.enum.ts

var GeoProvider;
(function(GeoProvider) {
    GeoProvider["GOOGLE"] = "google";
    GeoProvider["MAPBOX"] = "mapbox";
    GeoProvider["NOMINATIM"] = "nominatim";
})(GeoProvider || (GeoProvider = {}));
(0,graphql_.registerEnumType)(GeoProvider, {
    name: 'GeoProvider'
});

;// ../../libs/database/src/lib/geo/dto/place.dto.ts
function place_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function place_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var PlaceDTO = function PlaceDTO() {
    "use strict";
};
place_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return Point;
    }),
    place_dto_ts_metadata("design:type", typeof Point === "undefined" ? Object : Point)
], PlaceDTO.prototype, "point", void 0);
place_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }),
    place_dto_ts_metadata("design:type", String)
], PlaceDTO.prototype, "title", void 0);
place_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }),
    place_dto_ts_metadata("design:type", String)
], PlaceDTO.prototype, "address", void 0);
PlaceDTO = place_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], PlaceDTO);

;// external "@googlemaps/google-maps-services-js"
const google_maps_services_js_namespaceObject = require("@googlemaps/google-maps-services-js");
;// ../../libs/database/src/lib/geo/google-geo.service.ts
function google_geo_service_array_like_to_array(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function google_geo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function google_geo_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                google_geo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                google_geo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function google_geo_service_unsupported_iterable_to_array(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return google_geo_service_array_like_to_array(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return google_geo_service_array_like_to_array(o, minLen);
}
function google_geo_service_create_for_of_iterator_helper_loose(o, allowArrayLike) {
    var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
    if (it) return (it = it.call(o)).next.bind(it);
    if (Array.isArray(o) || (it = google_geo_service_unsupported_iterable_to_array(o)) || allowArrayLike && o && typeof o.length === "number") {
        if (it) o = it;
        var i = 0;
        return function() {
            if (i >= o.length) {
                return {
                    done: true
                };
            }
            return {
                done: false,
                value: o[i++]
            };
        };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function google_geo_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function google_geo_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function google_geo_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var GoogleGeoService = /*#__PURE__*/ function() {
    "use strict";
    function GoogleGeoService(configurationService) {
        this.configurationService = configurationService;
        this.googleClient = new google_maps_services_js_namespaceObject.Client({});
    }
    var _proto = GoogleGeoService.prototype;
    _proto.getPlaces = function getPlaces(input) {
        var _this = this;
        return google_geo_service_async_to_generator(function() {
            var config, results, params, response, _iterator, _step, item, _placeDetails_data_result_geometry, _placeDetails_data_result_geometry1, placeDetails;
            return google_geo_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.configurationService.getConfiguration()
                        ];
                    case 1:
                        config = _state.sent();
                        results = [];
                        params = {
                            input: input.keyword,
                            language: input.language,
                            key: config.backendMapsAPIKey
                        };
                        if (input.location != null) {
                            params.location = {
                                lat: input.location.lat,
                                lng: input.location.lng
                            };
                        }
                        if (input.location != null && input.radius != null) {
                            params.radius = input.radius;
                        }
                        return [
                            4,
                            _this.googleClient.placeQueryAutocomplete({
                                params: params
                            })
                        ];
                    case 2:
                        response = _state.sent();
                        _iterator = google_geo_service_create_for_of_iterator_helper_loose(response.data.predictions);
                        _state.label = 3;
                    case 3:
                        if (!!(_step = _iterator()).done) return [
                            3,
                            6
                        ];
                        item = _step.value;
                        if (item.place_id == null) return [
                            3,
                            5
                        ];
                        return [
                            4,
                            _this.googleClient.placeDetails({
                                params: {
                                    place_id: item.place_id,
                                    key: config.backendMapsAPIKey
                                }
                            })
                        ];
                    case 4:
                        placeDetails = _state.sent();
                        if (((_placeDetails_data_result_geometry = placeDetails.data.result.geometry) == null ? void 0 : _placeDetails_data_result_geometry.location.lat) == null || ((_placeDetails_data_result_geometry1 = placeDetails.data.result.geometry) == null ? void 0 : _placeDetails_data_result_geometry1.location.lng) == null || placeDetails.data.result.formatted_address == null) return [
                            3,
                            5
                        ];
                        results.push({
                            point: {
                                lat: placeDetails.data.result.geometry.location.lat,
                                lng: placeDetails.data.result.geometry.location.lng
                            },
                            title: placeDetails.data.result.name,
                            address: placeDetails.data.result.formatted_address
                        });
                        _state.label = 5;
                    case 5:
                        return [
                            3,
                            3
                        ];
                    case 6:
                        // Sort by distance
                        results.sort(function(a, b) {
                            if (input.location == null) return 0;
                            var aDistance = Math.pow(a.point.lat - input.location.lat, 2) + Math.pow(a.point.lng - input.location.lng, 2);
                            var bDistance = Math.pow(b.point.lat - input.location.lat, 2) + Math.pow(b.point.lng - input.location.lng, 2);
                            return aDistance - bDistance;
                        });
                        // const response = await this.googleClient.textSearch({
                        //   params: {
                        //     query: input.keyword,
                        //     key: config!.backendMapsAPIKey!,
                        //   },
                        // });
                        // if (response.data.results.length == 0) return [];
                        // for (let i = 0; i < response.data.results.length; i++) {
                        //   results.push({
                        //     point: {
                        //       lat: response.data.results[i].geometry?.location.lat,
                        //       lng: response.data.results[i].geometry?.location.lng,
                        //     },
                        //     title: response.data.results[i].name,
                        //     address: response.data.results[i].formatted_address,
                        //   });
                        // }
                        // const response = await this.googleClient.placeAutocomplete({
                        //   params: {
                        //     input: input.keyword,
                        //     location: input.location,
                        //     radius: input.radius,
                        //     language: input.language as any,
                        //     key: config!.backendMapsAPIKey!,
                        //   },
                        // });
                        // if (response.data.predictions.length == 0) return [];
                        // for (let i = 0; i < response.data.predictions.length; i++) {
                        //   const geocoding = await this.googleClient.reverseGeocode({
                        //     params: {
                        //       place_id: response.data.predictions[i].place_id,
                        //       key: config!.backendMapsAPIKey!,
                        //     },
                        //   });
                        //   results.push({
                        //     point: {
                        //       lat: geocoding.data.results[0].geometry.location.lat,
                        //       lng: geocoding.data.results[0].geometry.location.lng,
                        //     },
                        //     title: response.data.predictions[i].structured_formatting.main_text,
                        //     address:
                        //       response.data.predictions[i].structured_formatting.secondary_text ??
                        //       '',
                        //   });
                        // }
                        return [
                            2,
                            results
                        ];
                }
            });
        })();
    };
    _proto.reverseGeocode = function reverseGeocode(input) {
        var _this = this;
        return google_geo_service_async_to_generator(function() {
            var config, response;
            return google_geo_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.configurationService.getConfiguration()
                        ];
                    case 1:
                        config = _state.sent();
                        return [
                            4,
                            _this.googleClient.reverseGeocode({
                                params: {
                                    latlng: {
                                        lat: input.lat,
                                        lng: input.lng
                                    },
                                    language: input.language,
                                    key: config.backendMapsAPIKey
                                }
                            })
                        ];
                    case 2:
                        response = _state.sent();
                        return [
                            2,
                            {
                                point: {
                                    lat: input.lat,
                                    lng: input.lng
                                },
                                address: response.data.results[0].formatted_address
                            }
                        ];
                }
            });
        })();
    };
    return GoogleGeoService;
}();
GoogleGeoService = google_geo_service_ts_decorate([
    (0,common_.Injectable)(),
    google_geo_service_ts_metadata("design:type", Function),
    google_geo_service_ts_metadata("design:paramtypes", [
        typeof SharedConfigurationService === "undefined" ? Object : SharedConfigurationService
    ])
], GoogleGeoService);

;// ../../libs/database/src/lib/geo/nominitam-geo.service.ts
function nominitam_geo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function nominitam_geo_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                nominitam_geo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                nominitam_geo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function nominitam_geo_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function nominitam_geo_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function nominitam_geo_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var NominitamGeoService = /*#__PURE__*/ function() {
    "use strict";
    function NominitamGeoService(httpService) {
        this.httpService = httpService;
    }
    var _proto = NominitamGeoService.prototype;
    _proto.getPlaces = function getPlaces(input) {
        var _this = this;
        return nominitam_geo_service_async_to_generator(function() {
            var result, mapped;
            return nominitam_geo_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.get('https://nominatim.openstreetmap.org/search', {
                                params: {
                                    q: input.keyword,
                                    format: 'json',
                                    addressdetails: '1',
                                    viewbox: input.location == null ? null : input.location.lng - 1 + "," + (input.location.lat - 1) + "," + (input.location.lng + 1) + "," + (input.location.lat + 1)
                                }
                            }))
                        ];
                    case 1:
                        result = _state.sent();
                        mapped = result.data.map(function(prediction) {
                            var placeDTO = {
                                point: {
                                    lat: prediction.lat,
                                    lng: prediction.lon
                                },
                                title: prediction.name,
                                address: prediction.display_name
                            };
                            return placeDTO;
                        });
                        return [
                            2,
                            mapped
                        ];
                }
            });
        })();
    };
    _proto.reverseGeocode = function reverseGeocode(input) {
        var _this = this;
        return nominitam_geo_service_async_to_generator(function() {
            var result;
            return nominitam_geo_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.get('https://nominatim.openstreetmap.org/reverse', {
                                params: {
                                    lat: input.lat,
                                    lon: input.lng,
                                    format: 'json'
                                }
                            }))
                        ];
                    case 1:
                        result = _state.sent();
                        return [
                            2,
                            {
                                point: {
                                    lat: input.lat,
                                    lng: input.lng
                                },
                                title: result.data.name,
                                address: result.data.display_name
                            }
                        ];
                }
            });
        })();
    };
    return NominitamGeoService;
}();
NominitamGeoService = nominitam_geo_service_ts_decorate([
    (0,common_.Injectable)(),
    nominitam_geo_service_ts_metadata("design:type", Function),
    nominitam_geo_service_ts_metadata("design:paramtypes", [
        typeof axios_.HttpService === "undefined" ? Object : axios_.HttpService
    ])
], NominitamGeoService);

;// ../../libs/database/src/lib/geo/geo.resolver.ts
function geo_resolver_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function geo_resolver_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                geo_resolver_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                geo_resolver_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function geo_resolver_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function geo_resolver_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function geo_resolver_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function geo_resolver_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}







var GeoResolver = /*#__PURE__*/ function() {
    "use strict";
    function GeoResolver(googleGeoService, nominitamGeoService, configService) {
        this.googleGeoService = googleGeoService;
        this.nominitamGeoService = nominitamGeoService;
        this.configService = configService;
    }
    var _proto = GeoResolver.prototype;
    _proto.getPlaces = function getPlaces(keyword, location, radius, language, provider, apiKey) {
        var _this = this;
        return geo_resolver_async_to_generator(function() {
            var serverProvider, configs, serverApiKey;
            return geo_resolver_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        serverProvider = process.env.GEO_PROVIDER;
                        return [
                            4,
                            _this.configService.getConfiguration()
                        ];
                    case 1:
                        configs = _state.sent();
                        serverApiKey = configs == null ? void 0 : configs.backendMapsAPIKey;
                        if (serverApiKey == null && (apiKey == null ? void 0 : apiKey.length) == 0) {
                            throw new Error('Invalid API Key');
                        }
                        if (serverProvider != null) {
                            if (serverProvider == 'google') {
                                provider = GeoProvider.GOOGLE;
                            }
                            if (serverProvider == 'nominitam') {
                                provider = GeoProvider.NOMINATIM;
                            }
                        }
                        if (provider === GeoProvider.GOOGLE) {
                            return [
                                2,
                                _this.googleGeoService.getPlaces({
                                    keyword: keyword,
                                    location: location,
                                    radius: radius,
                                    language: language
                                })
                            ];
                        } else {
                            return [
                                2,
                                _this.nominitamGeoService.getPlaces({
                                    keyword: keyword,
                                    location: location,
                                    radius: radius,
                                    language: language
                                })
                            ];
                        }
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.reverseGeocode = function reverseGeocode(location, language, provider, apiKey) {
        var _this = this;
        return geo_resolver_async_to_generator(function() {
            var serverProvider, configs, serverApiKey;
            return geo_resolver_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        serverProvider = process.env.GEO_PROVIDER;
                        return [
                            4,
                            _this.configService.getConfiguration()
                        ];
                    case 1:
                        configs = _state.sent();
                        serverApiKey = configs == null ? void 0 : configs.backendMapsAPIKey;
                        if (serverApiKey == null && (apiKey == null ? void 0 : apiKey.length) == 0) {
                            throw new Error('Invalid API Key');
                        }
                        if (serverProvider != null) {
                            if (serverProvider == 'google') {
                                provider = GeoProvider.GOOGLE;
                            }
                            if (serverProvider == 'nominitam') {
                                provider = GeoProvider.NOMINATIM;
                            }
                        }
                        if (provider === GeoProvider.GOOGLE) {
                            return [
                                2,
                                _this.googleGeoService.reverseGeocode({
                                    lat: location.lat,
                                    lng: location.lng,
                                    language: language
                                })
                            ];
                        } else {
                            return [
                                2,
                                _this.nominitamGeoService.reverseGeocode({
                                    lat: location.lat,
                                    lng: location.lng,
                                    language: language
                                })
                            ];
                        }
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return GeoResolver;
}();
geo_resolver_ts_decorate([
    (0,graphql_.Query)(function() {
        return [
            PlaceDTO
        ];
    }),
    geo_resolver_ts_param(0, (0,graphql_.Args)('keyword')),
    geo_resolver_ts_param(1, (0,graphql_.Args)('location', {
        nullable: true
    })),
    geo_resolver_ts_param(2, (0,graphql_.Args)('radius', {
        nullable: true,
        type: function() {
            return graphql_.Int;
        },
        description: 'Search radius from location argument in meters'
    })),
    geo_resolver_ts_param(3, (0,graphql_.Args)('language', {
        nullable: true
    })),
    geo_resolver_ts_param(4, (0,graphql_.Args)('provider', {
        nullable: true,
        type: function() {
            return GeoProvider;
        }
    })),
    geo_resolver_ts_param(5, (0,graphql_.Args)('apiKey', {
        nullable: true
    })),
    geo_resolver_ts_metadata("design:type", Function),
    geo_resolver_ts_metadata("design:paramtypes", [
        String,
        typeof Point === "undefined" ? Object : Point,
        Number,
        String,
        typeof GeoProvider === "undefined" ? Object : GeoProvider,
        String
    ]),
    geo_resolver_ts_metadata("design:returntype", Promise)
], GeoResolver.prototype, "getPlaces", null);
geo_resolver_ts_decorate([
    (0,graphql_.Query)(function() {
        return PlaceDTO;
    }),
    geo_resolver_ts_param(0, (0,graphql_.Args)('location')),
    geo_resolver_ts_param(1, (0,graphql_.Args)('language', {
        nullable: true
    })),
    geo_resolver_ts_param(2, (0,graphql_.Args)('provider', {
        nullable: true,
        type: function() {
            return GeoProvider;
        }
    })),
    geo_resolver_ts_param(3, (0,graphql_.Args)('apiKey', {
        nullable: true
    })),
    geo_resolver_ts_metadata("design:type", Function),
    geo_resolver_ts_metadata("design:paramtypes", [
        typeof Point === "undefined" ? Object : Point,
        String,
        typeof GeoProvider === "undefined" ? Object : GeoProvider,
        String
    ]),
    geo_resolver_ts_metadata("design:returntype", Promise)
], GeoResolver.prototype, "reverseGeocode", null);
GeoResolver = geo_resolver_ts_decorate([
    (0,graphql_.Resolver)(),
    geo_resolver_ts_metadata("design:type", Function),
    geo_resolver_ts_metadata("design:paramtypes", [
        typeof GoogleGeoService === "undefined" ? Object : GoogleGeoService,
        typeof NominitamGeoService === "undefined" ? Object : NominitamGeoService,
        typeof SharedConfigurationService === "undefined" ? Object : SharedConfigurationService
    ])
], GeoResolver);

;// ../../libs/database/src/lib/geo/geo.module.ts
function geo_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}






var GeoModule = function GeoModule() {
    "use strict";
};
GeoModule = geo_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            axios_.HttpModule
        ],
        providers: [
            GeoResolver,
            GoogleGeoService,
            NominitamGeoService,
            SharedConfigurationService
        ]
    })
], GeoModule);

;// ../../libs/database/src/lib/geo/index.ts







;// ../../libs/database/src/lib/order/index.ts















;// ../../libs/database/src/lib/redis/config-redis.service.ts
function config_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function config_redis_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                config_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                config_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function config_redis_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function config_redis_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function config_redis_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ConfigRedisService = /*#__PURE__*/ function() {
    "use strict";
    function ConfigRedisService(redisService) {
        this.redisService = redisService;
    }
    var _proto = ConfigRedisService.prototype;
    _proto.getConfig = function getConfig(key) {
        var _this = this;
        return config_redis_service_async_to_generator(function() {
            var result;
            return config_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().get("config:" + key)
                        ];
                    case 1:
                        result = _state.sent();
                        if (result == null) return [
                            2,
                            _this.getDefault(key)
                        ];
                        return [
                            2,
                            result
                        ];
                }
            });
        })();
    };
    _proto.setConfig = function setConfig(key, value) {
        var _this = this;
        return config_redis_service_async_to_generator(function() {
            return config_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().set("config:" + key, value)
                        ];
                    case 1:
                        _state.sent();
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.getDefault = function getDefault(key) {
        if (key == 'twilio:verificationCodeSMSTemplate') {
            return 'Your verification code is {code}';
        }
        return null;
    };
    return ConfigRedisService;
}();
ConfigRedisService = config_redis_service_ts_decorate([
    (0,common_.Injectable)(),
    config_redis_service_ts_metadata("design:type", Function),
    config_redis_service_ts_metadata("design:paramtypes", [
        typeof nestjs_redis_.RedisService === "undefined" ? Object : nestjs_redis_.RedisService
    ])
], ConfigRedisService);

;// ../../libs/database/src/lib/redis/index.ts





;// ../../libs/database/src/lib/sms/providers/broadnet.service.ts
function broadnet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function broadnet_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                broadnet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                broadnet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function broadnet_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function broadnet_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function broadnet_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var BroadnetService = /*#__PURE__*/ function() {
    "use strict";
    function BroadnetService(httpService) {
        this.httpService = httpService;
    }
    var _proto = BroadnetService.prototype;
    _proto.sendOTP = function sendOTP(input) {
        var _this = this;
        return broadnet_service_async_to_generator(function() {
            var config, response;
            return broadnet_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        config = input.providerEntity;
                        if (config == null) {
                            throw new Error('Broadnet config not found');
                        }
                        common_.Logger.log('Sending sms to ' + input.phoneNumber + ' using Broadnet');
                        common_.Logger.log('Message: ' + input.message);
                        common_.Logger.log('Config: ' + JSON.stringify(config));
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.get('https://gw5s.broadnet.me:8443/websmpp/websms', {
                                params: {
                                    user: config.accountId,
                                    pass: config.authToken,
                                    sid: config.fromNumber,
                                    type: config.smsType,
                                    mno: input.phoneNumber,
                                    text: input.message
                                }
                            }))
                        ];
                    case 1:
                        response = _state.sent();
                        if (response.status !== 200) {
                            throw new apollo_.ForbiddenError('Broadnet failed to send sms, status: ' + response.statusText);
                        }
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return BroadnetService;
}();
BroadnetService = broadnet_service_ts_decorate([
    (0,common_.Injectable)(),
    broadnet_service_ts_metadata("design:type", Function),
    broadnet_service_ts_metadata("design:paramtypes", [
        typeof axios_.HttpService === "undefined" ? Object : axios_.HttpService
    ])
], BroadnetService);

;// ../../libs/database/src/lib/sms/providers/pahappa.service.ts
function pahappa_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function pahappa_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                pahappa_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                pahappa_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function pahappa_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function pahappa_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function pahappa_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var PahappaService = /*#__PURE__*/ function() {
    "use strict";
    function PahappaService(httpService) {
        this.httpService = httpService;
    }
    var _proto = PahappaService.prototype;
    _proto.sendOTP = function sendOTP(input) {
        var _this = this;
        return pahappa_service_async_to_generator(function() {
            var providerEntity, phoneNumber, message, response, error;
            return pahappa_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        providerEntity = input.providerEntity, phoneNumber = input.phoneNumber, message = input.message;
                        _state.label = 1;
                    case 1:
                        _state.trys.push([
                            1,
                            3,
                            ,
                            4
                        ]);
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.get('https://www.egosms.co/api/v1/plain/', {
                                params: {
                                    username: providerEntity.accountId,
                                    password: providerEntity.authToken,
                                    number: phoneNumber,
                                    message: message,
                                    sender: providerEntity.fromNumber,
                                    priority: 0
                                }
                            }))
                        ];
                    case 2:
                        response = _state.sent();
                        // Handle any errors from the API response
                        if (response.status !== 200) {
                            throw new apollo_.ForbiddenError('Failed to send Pahappa OTP');
                        }
                        return [
                            3,
                            4
                        ];
                    case 3:
                        error = _state.sent();
                        // Handle any errors that occurred during the OTP sending process
                        // You can log the error or perform any necessary error handling
                        console.error('Failed to send Pahappa OTP:', error);
                        throw new apollo_.ForbiddenError("Failed to send Pahappa OTP: " + error.message);
                    case 4:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return PahappaService;
}();
PahappaService = pahappa_service_ts_decorate([
    (0,common_.Injectable)(),
    pahappa_service_ts_metadata("design:type", Function),
    pahappa_service_ts_metadata("design:paramtypes", [
        typeof axios_.HttpService === "undefined" ? Object : axios_.HttpService
    ])
], PahappaService);

;// external "plivo"
const external_plivo_namespaceObject = require("plivo");
;// ../../libs/database/src/lib/sms/providers/plivo.service.ts
function plivo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function plivo_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                plivo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                plivo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function plivo_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function plivo_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}


var PlivoService = /*#__PURE__*/ function() {
    "use strict";
    function PlivoService() {}
    var _proto = PlivoService.prototype;
    _proto.sendOTP = function sendOTP(input) {
        return plivo_service_async_to_generator(function() {
            var client, result;
            return plivo_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        client = new external_plivo_namespaceObject.Client(input.providerEntity.accountId, input.providerEntity.authToken);
                        return [
                            4,
                            client.messages.create(input.providerEntity.fromNumber, input.phoneNumber, input.message)
                        ];
                    case 1:
                        result = _state.sent();
                        common_.Logger.log(JSON.stringify(result), 'PlivoService');
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return PlivoService;
}();
PlivoService = plivo_service_ts_decorate([
    (0,common_.Injectable)()
], PlivoService);

;// ../../libs/database/src/lib/sms/providers/sms-provider.interface.ts
var SMSProviderInterface = function SMSProviderInterface() {
    "use strict";
};

;// external "twilio"
const external_twilio_namespaceObject = require("twilio");
;// ../../libs/database/src/lib/sms/providers/twilio.service.ts
function twilio_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function twilio_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                twilio_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                twilio_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function twilio_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function twilio_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}



var TwilioService = /*#__PURE__*/ function() {
    "use strict";
    function TwilioService() {}
    var _proto = TwilioService.prototype;
    _proto.sendOTP = function sendOTP(input) {
        return twilio_service_async_to_generator(function() {
            var client, error;
            return twilio_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        _state.trys.push([
                            0,
                            2,
                            ,
                            3
                        ]);
                        client = new external_twilio_namespaceObject.Twilio(input.providerEntity.accountId, input.providerEntity.authToken);
                        return [
                            4,
                            client.messages.create({
                                body: input.message,
                                from: input.providerEntity.fromNumber,
                                to: "+" + input.phoneNumber
                            })
                        ];
                    case 1:
                        _state.sent();
                        return [
                            3,
                            3
                        ];
                    case 2:
                        error = _state.sent();
                        throw new apollo_.ForbiddenError(error.message);
                    case 3:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return TwilioService;
}();
TwilioService = twilio_service_ts_decorate([
    (0,common_.Injectable)()
], TwilioService);

;// ../../libs/database/src/lib/sms/providers/ventis.service.ts
function ventis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function ventis_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                ventis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                ventis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function ventis_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function ventis_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function ventis_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var VentisService = /*#__PURE__*/ function() {
    "use strict";
    function VentisService(httpService) {
        this.httpService = httpService;
    }
    var _proto = VentisService.prototype;
    _proto.getAccessToken = function getAccessToken(providerEntity) {
        var _this = this;
        return ventis_service_async_to_generator(function() {
            var _response_data, response, error;
            return ventis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        _state.trys.push([
                            0,
                            2,
                            ,
                            3
                        ]);
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.post('https://signin.ventis.group/realms/Messaging/protocol/openid-connect/token', new URLSearchParams({
                                username: providerEntity.accountId,
                                password: providerEntity.smsType,
                                client_id: 'api-messaging',
                                grant_type: 'password',
                                client_secret: providerEntity.authToken
                            }), {
                                headers: {
                                    'Content-Type': 'application/x-www-form-urlencoded'
                                }
                            }))
                        ];
                    case 1:
                        response = _state.sent();
                        if (!((_response_data = response.data) == null ? void 0 : _response_data.access_token)) {
                            throw new Error('Failed to retrieve access token');
                        }
                        return [
                            2,
                            response.data.access_token
                        ];
                    case 2:
                        error = _state.sent();
                        common_.Logger.error(error, 'VentisService.getAccessToken');
                        throw new apollo_.ForbiddenError("Failed to authenticate with Ventis: " + error.message);
                    case 3:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.sendOTP = function sendOTP(input) {
        var _this = this;
        return ventis_service_async_to_generator(function() {
            var providerEntity, phoneNumber, message, accessToken, response, error;
            return ventis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        providerEntity = input.providerEntity, phoneNumber = input.phoneNumber, message = input.message;
                        _state.label = 1;
                    case 1:
                        _state.trys.push([
                            1,
                            4,
                            ,
                            5
                        ]);
                        return [
                            4,
                            _this.getAccessToken(providerEntity)
                        ];
                    case 2:
                        accessToken = _state.sent();
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.post('https://messaging.ventis.group/messaging/api/v1/message', {
                                to: phoneNumber.replace(/\D/g, ''),
                                sender: providerEntity.fromNumber,
                                isOTP: 'false',
                                message: message
                            }, {
                                headers: {
                                    'Content-Type': 'application/json; charset=UTF-8',
                                    Connection: 'keep-alive',
                                    Authorization: "Bearer " + accessToken
                                }
                            }))
                        ];
                    case 3:
                        response = _state.sent();
                        // Handle any errors from the API response
                        if (response.status !== 200) {
                            throw new apollo_.ForbiddenError('Failed to send Ventis OTP');
                        }
                        return [
                            3,
                            5
                        ];
                    case 4:
                        error = _state.sent();
                        // Handle any errors that occurred during the OTP sending process
                        common_.Logger.error(error, 'VentisService.sendOTP');
                        throw new apollo_.ForbiddenError("Failed to send Ventis OTP: " + error.message);
                    case 5:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return VentisService;
}();
VentisService = ventis_service_ts_decorate([
    (0,common_.Injectable)(),
    ventis_service_ts_metadata("design:type", Function),
    ventis_service_ts_metadata("design:paramtypes", [
        typeof axios_.HttpService === "undefined" ? Object : axios_.HttpService
    ])
], VentisService);

;// ../../libs/database/src/lib/sms/providers/vonage.service.ts
function vonage_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function vonage_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                vonage_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                vonage_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function vonage_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function vonage_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function vonage_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var VonageService = /*#__PURE__*/ function() {
    "use strict";
    function VonageService(httpService) {
        this.httpService = httpService;
    }
    var _proto = VonageService.prototype;
    _proto.sendOTP = function sendOTP(input) {
        var _this = this;
        return vonage_service_async_to_generator(function() {
            var config, response;
            return vonage_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        config = input.providerEntity;
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.post("https://rest.nexmo.com/sms/json", {
                                api_key: config.accountId,
                                api_secret: config.authToken,
                                from: config.fromNumber,
                                to: input.phoneNumber,
                                text: input.message
                            }, {
                                headers: {
                                    'Content-Type': 'application/json'
                                }
                            }))
                        ];
                    case 1:
                        response = _state.sent();
                        common_.Logger.log(JSON.stringify(response.data), 'VonageService');
                        if (response.status !== 200) {
                            throw new apollo_.ForbiddenError('Vonage failed to send sms, status: ' + response.statusText);
                        }
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return VonageService;
}();
VonageService = vonage_service_ts_decorate([
    (0,common_.Injectable)(),
    vonage_service_ts_metadata("design:type", Function),
    vonage_service_ts_metadata("design:paramtypes", [
        typeof axios_.HttpService === "undefined" ? Object : axios_.HttpService
    ])
], VonageService);

;// ../../libs/database/src/lib/sms/sms-provider.service.ts
function sms_provider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function sms_provider_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                sms_provider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                sms_provider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function sms_provider_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function sms_provider_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function sms_provider_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function sms_provider_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}





var SMSProviderService = /*#__PURE__*/ function() {
    "use strict";
    function SMSProviderService(smsProviderRepository) {
        this.smsProviderRepository = smsProviderRepository;
    }
    var _proto = SMSProviderService.prototype;
    _proto.getDefaultProvider = function getDefaultProvider() {
        var _this = this;
        return sms_provider_service_async_to_generator(function() {
            var defaultProvider;
            return sms_provider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.smsProviderRepository.findOne({
                                where: {
                                    isDefault: true
                                }
                            })
                        ];
                    case 1:
                        defaultProvider = _state.sent();
                        common_.Logger.log("defaultProvider SMSProviderService :", defaultProvider);
                        if (defaultProvider == null) {
                            throw new apollo_.ForbiddenError("Default SMS provider not found");
                        }
                        return [
                            2,
                            defaultProvider
                        ];
                }
            });
        })();
    };
    return SMSProviderService;
}();
SMSProviderService = sms_provider_service_ts_decorate([
    (0,common_.Injectable)(),
    sms_provider_service_ts_param(0, (0,typeorm_.InjectRepository)(SMSProviderEntity)),
    sms_provider_service_ts_metadata("design:type", Function),
    sms_provider_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SMSProviderService);

;// external "axios"
const external_axios_namespaceObject = require("axios");
var external_axios_default = /*#__PURE__*/__webpack_require__.n(external_axios_namespaceObject);
;// external "qs"
const external_qs_namespaceObject = require("qs");
;// ../../libs/database/src/lib/sms/providers/smsc.service.ts
function smsc_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function smsc_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                smsc_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                smsc_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function smsc_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function smsc_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}




var SMSCService = /*#__PURE__*/ function() {
    "use strict";
    function SMSCService() {}
    var _proto = SMSCService.prototype;
    _proto.sendOTP = function sendOTP(input) {
        return smsc_service_async_to_generator(function() {
            var login, password, sender, params, url, response, error;
            return smsc_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        _state.trys.push([
                            0,
                            2,
                            ,
                            3
                        ]);
                        console.log("HIT SMSC");
                        login = input.providerEntity.accountId;
                        password = input.providerEntity.authToken;
                        sender = input.providerEntity.fromNumber;
                        params = {
                            login: login,
                            psw: password,
                            phones: input.phoneNumber,
                            mes: input.message,
                            sender: sender,
                            fmt: 3
                        };
                        url = "https://smsc.kz/sys/send.php?" + external_qs_namespaceObject.stringify(params);
                        return [
                            4,
                            external_axios_default().get(url)
                        ];
                    case 1:
                        response = _state.sent();
                        if (response.data.error) {
                            throw new Error(response.data.error);
                        }
                        return [
                            3,
                            3
                        ];
                    case 2:
                        error = _state.sent();
                        throw new apollo_.ForbiddenError(error.message);
                    case 3:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return SMSCService;
}();
SMSCService = smsc_service_ts_decorate([
    (0,common_.Injectable)()
], SMSCService);

;// ../../libs/database/src/lib/sms/sms.service.ts
function sms_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function sms_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                sms_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                sms_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function sms_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function sms_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function sms_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}













var SMSService = /*#__PURE__*/ function() {
    "use strict";
    function SMSService(smsProviderService, sharedConfigService, twilioService, broadnetService, plivoService, vonageService, pahappaService, ventisService, smscService) {
        this.smsProviderService = smsProviderService;
        this.sharedConfigService = sharedConfigService;
        this.twilioService = twilioService;
        this.broadnetService = broadnetService;
        this.plivoService = plivoService;
        this.vonageService = vonageService;
        this.pahappaService = pahappaService;
        this.ventisService = ventisService;
        this.smscService = smscService;
    }
    var _proto = SMSService.prototype;
    _proto.sendVerificationCodeSms = function sendVerificationCodeSms(phoneNumber) {
        var _this = this;
        return sms_service_async_to_generator(function() {
            var _defaultProvider_verificationTemplate, defaultProvider, random6Digit, _defaultProvider_verificationTemplate_replace, message, _;
            return sms_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log(">>> known types = " + JSON.stringify(Object.values(SMSProviderType)));
                        return [
                            4,
                            _this.smsProviderService.getDefaultProvider()
                        ];
                    case 1:
                        defaultProvider = _state.sent();
                        random6Digit = Math.floor(100000 + Math.random() * 900000).toString();
                        common_.Logger.log("random6Digit: " + random6Digit);
                        message = (_defaultProvider_verificationTemplate_replace = (_defaultProvider_verificationTemplate = defaultProvider.verificationTemplate) == null ? void 0 : _defaultProvider_verificationTemplate.replace("{code}", random6Digit)) != null ? _defaultProvider_verificationTemplate_replace : "OTP is {code}";
                        common_.Logger.log("defaultProvider: " + JSON.stringify(defaultProvider));
                        _ = defaultProvider == null ? void 0 : defaultProvider.type;
                        switch(_){
                            case SMSProviderType.Twilio:
                                return [
                                    3,
                                    2
                                ];
                            case SMSProviderType.BroadNet:
                                return [
                                    3,
                                    4
                                ];
                            case SMSProviderType.Vonage:
                                return [
                                    3,
                                    6
                                ];
                            case SMSProviderType.Plivo:
                                return [
                                    3,
                                    8
                                ];
                            case SMSProviderType.Pahappa:
                                return [
                                    3,
                                    10
                                ];
                            case SMSProviderType.VentisSMS:
                                return [
                                    3,
                                    12
                                ];
                            case SMSProviderType.SMSC:
                                return [
                                    3,
                                    14
                                ];
                            case SMSProviderType.Firebase:
                                return [
                                    3,
                                    16
                                ];
                        }
                        return [
                            3,
                            17
                        ];
                    case 2:
                        return [
                            4,
                            _this.twilioService.sendOTP({
                                providerEntity: defaultProvider,
                                phoneNumber: phoneNumber,
                                message: message
                            })
                        ];
                    case 3:
                        _state.sent();
                        return [
                            3,
                            18
                        ];
                    case 4:
                        return [
                            4,
                            _this.broadnetService.sendOTP({
                                providerEntity: defaultProvider,
                                phoneNumber: phoneNumber,
                                message: message
                            })
                        ];
                    case 5:
                        _state.sent();
                        return [
                            3,
                            18
                        ];
                    case 6:
                        return [
                            4,
                            _this.vonageService.sendOTP({
                                providerEntity: defaultProvider,
                                phoneNumber: phoneNumber,
                                message: message
                            })
                        ];
                    case 7:
                        _state.sent();
                        return [
                            3,
                            18
                        ];
                    case 8:
                        return [
                            4,
                            _this.plivoService.sendOTP({
                                providerEntity: defaultProvider,
                                phoneNumber: phoneNumber,
                                message: message
                            })
                        ];
                    case 9:
                        _state.sent();
                        return [
                            3,
                            18
                        ];
                    case 10:
                        return [
                            4,
                            _this.pahappaService.sendOTP({
                                providerEntity: defaultProvider,
                                phoneNumber: phoneNumber,
                                message: message
                            })
                        ];
                    case 11:
                        _state.sent();
                        return [
                            3,
                            18
                        ];
                    case 12:
                        return [
                            4,
                            _this.ventisService.sendOTP({
                                providerEntity: defaultProvider,
                                phoneNumber: phoneNumber,
                                message: message
                            })
                        ];
                    case 13:
                        _state.sent();
                        return [
                            3,
                            18
                        ];
                    case 14:
                        return [
                            4,
                            _this.smscService.sendOTP({
                                providerEntity: defaultProvider,
                                phoneNumber: phoneNumber,
                                message: message
                            })
                        ];
                    case 15:
                        _state.sent();
                        return [
                            3,
                            18
                        ];
                    case 16:
                        return [
                            2,
                            random6Digit
                        ];
                    case 17:
                        throw new apollo_.ForbiddenError("The default SMS provider is not supported");
                    case 18:
                        return [
                            2,
                            random6Digit
                        ];
                }
            });
        })();
    };
    _proto.sendVerificationCodeWhatsapp = function sendVerificationCodeWhatsapp(phoneNumber) {
        var _this = this;
        return sms_service_async_to_generator(function() {
            var config, client, random6Digit;
            return sms_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.sharedConfigService.getConfiguration()
                        ];
                    case 1:
                        config = _state.sent();
                        if ((config == null ? void 0 : config.twilioAccountSid) == null || (config == null ? void 0 : config.twilioAuthToken) == null || (config == null ? void 0 : config.twilioFromNumber) == null || config.twilioVerificationCodeSMSTemplate == null) throw new Error("twilio config not found");
                        client = new external_twilio_namespaceObject.Twilio(config.twilioAccountSid, config.twilioAuthToken);
                        random6Digit = Math.floor(100000 + Math.random() * 900000).toString();
                        return [
                            4,
                            client.messages.create({
                                body: config.twilioVerificationCodeSMSTemplate.replace("{code}", random6Digit),
                                from: config.twilioFromNumber,
                                to: "whatsapp:+" + phoneNumber
                            })
                        ];
                    case 2:
                        _state.sent();
                        return [
                            2,
                            random6Digit
                        ];
                }
            });
        })();
    };
    return SMSService;
}();
SMSService = sms_service_ts_decorate([
    (0,common_.Injectable)(),
    sms_service_ts_metadata("design:type", Function),
    sms_service_ts_metadata("design:paramtypes", [
        typeof SMSProviderService === "undefined" ? Object : SMSProviderService,
        typeof SharedConfigurationService === "undefined" ? Object : SharedConfigurationService,
        typeof TwilioService === "undefined" ? Object : TwilioService,
        typeof BroadnetService === "undefined" ? Object : BroadnetService,
        typeof PlivoService === "undefined" ? Object : PlivoService,
        typeof VonageService === "undefined" ? Object : VonageService,
        typeof PahappaService === "undefined" ? Object : PahappaService,
        typeof VentisService === "undefined" ? Object : VentisService,
        typeof SMSCService === "undefined" ? Object : SMSCService
    ])
], SMSService);

;// ../../libs/database/src/lib/sms/sms.module.ts
function sms_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}















var SMSModule = function SMSModule() {
    "use strict";
};
SMSModule = sms_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            typeorm_.TypeOrmModule.forFeature([
                SMSProviderEntity
            ]),
            axios_.HttpModule
        ],
        providers: [
            SMSService,
            SMSProviderService,
            TwilioService,
            PlivoService,
            BroadnetService,
            PahappaService,
            VonageService,
            VentisService,
            SharedConfigurationService,
            AuthRedisService,
            SMSCService
        ],
        exports: [
            SMSService,
            AuthRedisService
        ]
    })
], SMSModule);

;// ../../libs/database/src/lib/sms/index.ts












;// ../../libs/database/src/lib/crypto/crypto.module.ts
function crypto_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}


var CryptoModule = function CryptoModule() {
    "use strict";
};
CryptoModule = crypto_module_ts_decorate([
    (0,common_.Module)({
        imports: [],
        providers: [
            CryptoService
        ],
        exports: [
            CryptoService
        ]
    })
], CryptoModule);

;// ../../libs/database/src/lib/crypto/index.ts



;// ../../libs/database/src/lib/payment/payment-interfaces.ts
var ChargeSavedPaymentMethodBody = function ChargeSavedPaymentMethodBody() {
    "use strict";
};

;// ../../libs/database/src/lib/payment/index.ts


;// ../../libs/database/src/index.ts





















/***/ }),
/* 11 */
/***/ ((module) => {

module.exports = require("typeorm");

/***/ }),
/* 12 */
/***/ ((module) => {

module.exports = require("@ptc-org/nestjs-query-graphql");

/***/ }),
/* 13 */
/***/ ((module) => {

module.exports = require("graphql-redis-subscriptions");

/***/ }),
/* 14 */
/***/ ((module) => {

module.exports = require("@nestjs/axios");

/***/ }),
/* 15 */
/***/ ((module) => {

module.exports = require("@liaoliaots/nestjs-redis");

/***/ }),
/* 16 */
/***/ ((module) => {

module.exports = require("firebase-admin");

/***/ }),
/* 17 */
/***/ ((module) => {

module.exports = require("license-verify");

/***/ }),
/* 18 */
/***/ ((module) => {

module.exports = require("rxjs");

/***/ }),
/* 19 */
/***/ ((module) => {

module.exports = require("path");

/***/ }),
/* 20 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AddressModule", ({
    enumerable: true,
    get: function() {
        return AddressModule;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _nestjsquerygraphql = __webpack_require__(12);
const _nestjsquerytypeorm = __webpack_require__(21);
const _common = __webpack_require__(1);
const _database = __webpack_require__(10);
const _accesstokenguard = __webpack_require__(22);
const _createrideraddressinput = __webpack_require__(24);
const _rideraddressdto = __webpack_require__(26);
let AddressModule = class AddressModule {
};
AddressModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.RiderAddressEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.RiderAddressEntity,
                        DTOClass: _rideraddressdto.RiderAddressDTO,
                        CreateDTOClass: _createrideraddressinput.CreateRiderAddressInput,
                        UpdateDTOClass: _createrideraddressinput.CreateRiderAddressInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        guards: [
                            _accesstokenguard.GqlAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE
                    }
                ]
            })
        ]
    })
], AddressModule);


/***/ }),
/* 21 */
/***/ ((module) => {

module.exports = require("@ptc-org/nestjs-query-typeorm");

/***/ }),
/* 22 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "GqlAuthGuard", ({
    enumerable: true,
    get: function() {
        return GqlAuthGuard;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _common = __webpack_require__(1);
const _graphql = __webpack_require__(8);
const _apollo = __webpack_require__(6);
const _passport = __webpack_require__(23);
let GqlAuthGuard = class GqlAuthGuard extends (0, _passport.AuthGuard)('jwt') {
    getRequest(context) {
        const ctx = _graphql.GqlExecutionContext.create(context).getContext();
        //const { req, connection } = ctx.getContext();
        return ctx.req ? ctx.req : {
            user: ctx
        };
    }
    canActivate(context) {
        if (context.getArgs()[2].id != null) {
            return true;
        }
        /*const ctx = GqlExecutionContext.create(context);
    const { req } = ctx.getContext();*/ //const req = this.getRequest(context);
        return super.canActivate(context);
    }
    // canActivate(context: ExecutionContext) {
    //   const ctx = GqlExecutionContext.create(context);
    //   const { req } = ctx.getContext();
    //   return super.canActivate(
    //     new ExecutionContextHost([req]),
    //   );
    // }
    handleRequest(err, user) {
        if (err || !user) {
            throw err || new _apollo.AuthenticationError('GqlAuthGuard');
        }
        return user;
    }
};
GqlAuthGuard = _ts_decorate._([
    (0, _common.Injectable)()
], GqlAuthGuard);


/***/ }),
/* 23 */
/***/ ((module) => {

module.exports = require("@nestjs/passport");

/***/ }),
/* 24 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateRiderAddressInput", ({
    enumerable: true,
    get: function() {
        return CreateRiderAddressInput;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
const _phonenumberdto = __webpack_require__(25);
let CreateRiderAddressInput = class CreateRiderAddressInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateRiderAddressInput.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateRiderAddressInput.prototype, "details", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], CreateRiderAddressInput.prototype, "location", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RiderAddressType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.RiderAddressType === "undefined" ? Object : _database.RiderAddressType)
], CreateRiderAddressInput.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_phonenumberdto.PhoneNumberDTO, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _phonenumberdto.PhoneNumberDTO === "undefined" ? Object : _phonenumberdto.PhoneNumberDTO)
], CreateRiderAddressInput.prototype, "phoneNumber", void 0);
CreateRiderAddressInput = _ts_decorate._([
    (0, _graphql.InputType)(),
    (0, _nestjsquerygraphql.BeforeCreateOne)((input, context)=>{
        return {
            input: {
                ...input.input,
                riderId: context.req.user.id
            }
        };
    })
], CreateRiderAddressInput);


/***/ }),
/* 25 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PhoneNumberDTO", ({
    enumerable: true,
    get: function() {
        return PhoneNumberDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
let PhoneNumberDTO = class PhoneNumberDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], PhoneNumberDTO.prototype, "countryCode", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], PhoneNumberDTO.prototype, "number", void 0);
PhoneNumberDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('PhoneNumber'),
    (0, _graphql.InputType)('PhoneNumberInput')
], PhoneNumberDTO);


/***/ }),
/* 26 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderAddressDTO", ({
    enumerable: true,
    get: function() {
        return RiderAddressDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
const _phonenumberdto = __webpack_require__(25);
let RiderAddressDTO = class RiderAddressDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RiderAddressDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RiderAddressType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.RiderAddressType === "undefined" ? Object : _database.RiderAddressType)
], RiderAddressDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], RiderAddressDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], RiderAddressDTO.prototype, "details", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], RiderAddressDTO.prototype, "location", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        filterOnly: true
    }),
    _ts_metadata._("design:type", Number)
], RiderAddressDTO.prototype, "riderId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_phonenumberdto.PhoneNumberDTO, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _phonenumberdto.PhoneNumberDTO === "undefined" ? Object : _phonenumberdto.PhoneNumberDTO)
], RiderAddressDTO.prototype, "phoneNumber", void 0);
RiderAddressDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('RiderAddress'),
    (0, _nestjsquerygraphql.Authorize)({
        authorize: (context)=>({
                riderId: {
                    eq: context.req.user.id
                }
            })
    })
], RiderAddressDTO);


/***/ }),
/* 27 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AnnouncementModule", ({
    enumerable: true,
    get: function() {
        return AnnouncementModule;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _common = __webpack_require__(1);
const _announcementservice = __webpack_require__(28);
const _announcementresolver = __webpack_require__(30);
const _typeorm = __webpack_require__(9);
const _database = __webpack_require__(10);
let AnnouncementModule = class AnnouncementModule {
};
AnnouncementModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.AnnouncementEntity
            ])
        ],
        providers: [
            _announcementservice.AnnouncementService,
            _announcementresolver.AnnouncementResolver
        ]
    })
], AnnouncementModule);


/***/ }),
/* 28 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AnnouncementService", ({
    enumerable: true,
    get: function() {
        return AnnouncementService;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _common = __webpack_require__(1);
const _typeorm = __webpack_require__(9);
const _database = __webpack_require__(10);
const _typeorm1 = __webpack_require__(11);
let AnnouncementService = class AnnouncementService {
    constructor(announcementRepository){
        this.announcementRepository = announcementRepository;
    }
    // Define your service methods here
    async getAnnouncements() {
        return this.announcementRepository.createQueryBuilder('announcement').where('announcement.startAt <= :currentDate', {
            currentDate: new Date()
        }).andWhere('announcement.expireAt >= :currentDate', {
            currentDate: new Date()
        }).andWhere('FIND_IN_SET(announcement.userType, :userTypes)', {
            userTypes: [
                _database.AnnouncementUserType.Rider
            ]
        }).getMany();
    }
};
AnnouncementService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.AnnouncementEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], AnnouncementService);


/***/ }),
/* 29 */
/***/ ((module) => {

module.exports = require("@swc/helpers/_/_ts_param");

/***/ }),
/* 30 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AnnouncementResolver", ({
    enumerable: true,
    get: function() {
        return AnnouncementResolver;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _announcementdto = __webpack_require__(31);
const _announcementservice = __webpack_require__(28);
let AnnouncementResolver = class AnnouncementResolver {
    constructor(announcementService){
        this.announcementService = announcementService;
    }
    async announcements() {
        return this.announcementService.getAnnouncements();
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _announcementdto.AnnouncementDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], AnnouncementResolver.prototype, "announcements", null);
AnnouncementResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _announcementservice.AnnouncementService === "undefined" ? Object : _announcementservice.AnnouncementService
    ])
], AnnouncementResolver);


/***/ }),
/* 31 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AnnouncementDTO", ({
    enumerable: true,
    get: function() {
        return AnnouncementDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
let AnnouncementDTO = class AnnouncementDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], AnnouncementDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], AnnouncementDTO.prototype, "startAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], AnnouncementDTO.prototype, "expireAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], AnnouncementDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], AnnouncementDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], AnnouncementDTO.prototype, "url", void 0);
AnnouncementDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Announcement')
], AnnouncementDTO);


/***/ }),
/* 32 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AuthModule", ({
    enumerable: true,
    get: function() {
        return AuthModule;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _common = __webpack_require__(1);
const _jwt = __webpack_require__(33);
const _passport = __webpack_require__(23);
const _database = __webpack_require__(10);
const _ridermodule = __webpack_require__(34);
const _authresolver = __webpack_require__(58);
const _authservice = __webpack_require__(62);
const _jwtstrategy = __webpack_require__(65);
const _typeorm = __webpack_require__(9);
const _licenseverify = __webpack_require__(17);
let AuthModule = class AuthModule {
    static async register() {
        const modules = [
            _database.SharedCustomerWalletModule,
            _ridermodule.RiderModule,
            _passport.PassportModule,
            _database.SMSModule,
            _database.SharedShopModule,
            _database.RedisHelpersModule,
            _typeorm.TypeOrmModule.forFeature([
                _database.CustomerSessionEntity
            ]),
            _jwt.JwtModule.register({
                secret: 'secret_rider'
            })
        ];
        let providers = [];
        const config = await (0, _licenseverify.getConfig)(process.env.NODE_ENV ?? 'production');
        _common.Logger.log(config, 'AuthModule.register.config');
        if (config) {
            providers = [
                _authservice.AuthService,
                _jwtstrategy.JwtStrategy,
                _authresolver.AuthResolver
            ];
        }
        return {
            module: AuthModule,
            imports: modules,
            providers: providers
        };
    }
};
AuthModule = _ts_decorate._([
    (0, _common.Module)({})
], AuthModule);


/***/ }),
/* 33 */
/***/ ((module) => {

module.exports = require("@nestjs/jwt");

/***/ }),
/* 34 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderModule", ({
    enumerable: true,
    get: function() {
        return RiderModule;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _nestjsquerygraphql = __webpack_require__(12);
const _common = __webpack_require__(1);
const _nestjsquerytypeorm = __webpack_require__(21);
const _database = __webpack_require__(10);
const _riderdto = __webpack_require__(35);
const _updateriderinput = __webpack_require__(57);
const _accesstokenguard = __webpack_require__(22);
const _typeorm = __webpack_require__(9);
let RiderModule = class RiderModule {
};
RiderModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.CustomerEntity,
                _database.DriverEntity,
                _database.RiderWalletEntity,
                _database.RiderTransactionEntity
            ]),
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.CustomerEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.CustomerEntity,
                        DTOClass: _riderdto.RiderDTO,
                        UpdateDTOClass: _updateriderinput.UpdateRiderInput,
                        read: {
                            many: {
                                disabled: true
                            }
                        },
                        create: {
                            disabled: true
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _accesstokenguard.GqlAuthGuard
                        ]
                    }
                ]
            })
        ],
        providers: [
            _database.SharedRiderService
        ],
        exports: [
            _database.SharedRiderService
        ]
    })
], RiderModule);


/***/ }),
/* 35 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderDTO", ({
    enumerable: true,
    get: function() {
        return RiderDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _nestjsquerygraphql = __webpack_require__(12);
const _database = __webpack_require__(10);
const _mediadto = __webpack_require__(36);
const _coupondto = __webpack_require__(39);
const _orderdto = __webpack_require__(40);
const _nestjsquerycore = __webpack_require__(54);
const _riderwalletdto = __webpack_require__(55);
const _ridertransactiondto = __webpack_require__(56);
const _savedpaymentmethoddto = __webpack_require__(49);
const _driverdto = __webpack_require__(45);
let RiderDTO = class RiderDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RiderDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderDTO.prototype, "countryIso", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], RiderDTO.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderDTO.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderDTO.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderDTO.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Gender, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.Gender === "undefined" ? Object : _database.Gender)
], RiderDTO.prototype, "gender", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderDTO.prototype, "password", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], RiderDTO.prototype, "isResident", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderDTO.prototype, "idNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], RiderDTO.prototype, "presetAvatarNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RiderDocumentType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.RiderDocumentType === "undefined" ? Object : _database.RiderDocumentType)
], RiderDTO.prototype, "documentType", void 0);
RiderDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Rider'),
    (0, _nestjsquerygraphql.Authorize)({
        authorize: (context)=>({
                id: {
                    eq: context.req.user.id
                }
            })
    }),
    (0, _nestjsquerygraphql.BeforeFindOne)((input, context)=>{
        return {
            id: context.req.user.id
        };
    }),
    (0, _nestjsquerygraphql.Relation)('media', ()=>_mediadto.MediaDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('coupons', ()=>_coupondto.CouponDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('wallets', ()=>_riderwalletdto.RiderWalletDTO),
    (0, _nestjsquerygraphql.OffsetConnection)('transactions', ()=>_ridertransactiondto.RiderTransactionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('savedPaymentMethods', ()=>_savedpaymentmethoddto.SavedPaymentMethodDto),
    (0, _nestjsquerygraphql.UnPagedRelation)('favoriteDrivers', ()=>_driverdto.DriverDTO, {
        enableAggregate: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('orders', ()=>_orderdto.OrderDTO, {
        maxResultsSize: 10,
        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
        defaultFilter: {
            status: {
                in: [
                    _database.OrderStatus.Requested,
                    _database.OrderStatus.Booked,
                    _database.OrderStatus.Found,
                    _database.OrderStatus.NotFound,
                    _database.OrderStatus.NoCloseFound,
                    _database.OrderStatus.DriverAccepted,
                    _database.OrderStatus.Arrived,
                    _database.OrderStatus.Started,
                    _database.OrderStatus.WaitingForReview,
                    _database.OrderStatus.WaitingForPostPay,
                    _database.OrderStatus.WaitingForPrePay
                ]
            }
        },
        defaultSort: [
            {
                field: 'id',
                direction: _nestjsquerycore.SortDirection.DESC
            }
        ],
        defaultResultSize: 1,
        enableAggregate: true
    })
], RiderDTO);


/***/ }),
/* 36 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "MediaDTO", ({
    enumerable: true,
    get: function() {
        return MediaDTO;
    }
}));
const _interop_require_default = __webpack_require__(37);
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
const _properurljoin = /*#__PURE__*/ _interop_require_default._(__webpack_require__(38));
let MediaDTO = class MediaDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], MediaDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        middleware: [
            async (ctx, next)=>{
                let value = await next();
                value = (0, _properurljoin.default)(process.env.CDN_URL, value);
                return value;
            }
        ]
    }),
    _ts_metadata._("design:type", String)
], MediaDTO.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], MediaDTO.prototype, "base64", void 0);
MediaDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Media')
], MediaDTO);


/***/ }),
/* 37 */
/***/ ((module) => {

module.exports = require("@swc/helpers/_/_interop_require_default");

/***/ }),
/* 38 */
/***/ ((module) => {

module.exports = require("proper-url-join");

/***/ }),
/* 39 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CouponDTO", ({
    enumerable: true,
    get: function() {
        return CouponDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
let CouponDTO = class CouponDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CouponDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CouponDTO.prototype, "code", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CouponDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CouponDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CouponDTO.prototype, "expireAt", void 0);
CouponDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Coupon')
], CouponDTO);


/***/ }),
/* 40 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderDTO", ({
    enumerable: true,
    get: function() {
        return OrderDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
const _ordermessagedto = __webpack_require__(41);
const _riderdto = __webpack_require__(35);
const _serviceoptiondto = __webpack_require__(42);
const _servicedto = __webpack_require__(43);
const _paymentgatewaydto = __webpack_require__(44);
const _driverdto = __webpack_require__(45);
const _savedpaymentmethoddto = __webpack_require__(49);
const _deliverycontactdto = __webpack_require__(50);
const _taxiordershopdto = __webpack_require__(51);
let OrderDTO = class OrderDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.OrderStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.OrderStatus === "undefined" ? Object : _database.OrderStatus)
], OrderDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.TaxiOrderType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.TaxiOrderType === "undefined" ? Object : _database.TaxiOrderType)
], OrderDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OrderDTO.prototype, "createdOn", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "distanceBest", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "durationBest", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "waitMinutes", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "waitCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "rideOptionsCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_deliverycontactdto.DeliveryContactDTO, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _deliverycontactdto.DeliveryContactDTO === "undefined" ? Object : _deliverycontactdto.DeliveryContactDTO)
], OrderDTO.prototype, "senderContact", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_deliverycontactdto.DeliveryContactDTO, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _deliverycontactdto.DeliveryContactDTO === "undefined" ? Object : _deliverycontactdto.DeliveryContactDTO)
], OrderDTO.prototype, "receiverContact", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "taxCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "serviceCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.Point
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], OrderDTO.prototype, "points", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            String
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], OrderDTO.prototype, "addresses", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OrderDTO.prototype, "expectedTimestamp", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OrderDTO.prototype, "driverLastSeenMessagesAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OrderDTO.prototype, "riderLastSeenMessagesAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "destinationArrivedTo", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OrderDTO.prototype, "startTimestamp", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OrderDTO.prototype, "finishTimestamp", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "riderId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "costAfterCoupon", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.PaymentMode, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.PaymentMode === "undefined" ? Object : _database.PaymentMode)
], OrderDTO.prototype, "paymentMode", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "paymentGatewayId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "paymentMethodId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OrderDTO.prototype, "etaPickup", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "costBest", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "paidAmount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "tipAmount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "providerShare", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], OrderDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.Point
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], OrderDTO.prototype, "directions", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.Point
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], OrderDTO.prototype, "driverDirections", void 0);
OrderDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Order'),
    (0, _nestjsquerygraphql.Authorize)({
        authorize: (context)=>({
                riderId: {
                    eq: context.req.user.id
                }
            })
    }),
    (0, _nestjsquerygraphql.Relation)('driver', ()=>_driverdto.DriverDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('rider', ()=>_riderdto.RiderDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('service', ()=>_servicedto.ServiceDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('options', ()=>_serviceoptiondto.ServiceOptionDTO),
    (0, _nestjsquerygraphql.Relation)('paymentGateway', ()=>_paymentgatewaydto.PaymentGatewayDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('savedPaymentMethod', ()=>_savedpaymentmethoddto.SavedPaymentMethodDto, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('conversation', ()=>_ordermessagedto.OrderMessageDTO, {
        relationName: 'conversation'
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('shopCarts', ()=>_taxiordershopdto.TaxiOrderShopDTO)
], OrderDTO);


/***/ }),
/* 41 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderMessageDTO", ({
    enumerable: true,
    get: function() {
        return OrderMessageDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
const _orderdto = __webpack_require__(40);
let OrderMessageDTO = class OrderMessageDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OrderMessageDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OrderMessageDTO.prototype, "sentAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.MessageStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.MessageStatus === "undefined" ? Object : _database.MessageStatus)
], OrderMessageDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], OrderMessageDTO.prototype, "content", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], OrderMessageDTO.prototype, "sentByDriver", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OrderMessageDTO.prototype, "requestId", void 0);
OrderMessageDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('OrderMessage'),
    (0, _nestjsquerygraphql.Relation)('request', ()=>_orderdto.OrderDTO)
], OrderMessageDTO);


/***/ }),
/* 42 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceOptionDTO", ({
    enumerable: true,
    get: function() {
        return ServiceOptionDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
let ServiceOptionDTO = class ServiceOptionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ServiceOptionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ServiceOptionDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ServiceOptionDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ServiceOptionType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ServiceOptionType === "undefined" ? Object : _database.ServiceOptionType)
], ServiceOptionDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ServiceOptionDTO.prototype, "additionalFee", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ServiceOptionIcon, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ServiceOptionIcon === "undefined" ? Object : _database.ServiceOptionIcon)
], ServiceOptionDTO.prototype, "icon", void 0);
ServiceOptionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ServiceOption')
], ServiceOptionDTO);


/***/ }),
/* 43 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceDTO", ({
    enumerable: true,
    get: function() {
        return ServiceDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
const _mediadto = __webpack_require__(36);
const _serviceoptiondto = __webpack_require__(42);
let ServiceDTO = class ServiceDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ServiceDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ServiceDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "personCapacity", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ServicePaymentMethod, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ServicePaymentMethod === "undefined" ? Object : _database.ServicePaymentMethod)
], ServiceDTO.prototype, "paymentMethod", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "cost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "costAfterCoupon", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "cancellationTotalFee", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "prepayPercent", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], ServiceDTO.prototype, "twoWayAvailable", void 0);
ServiceDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Service'),
    (0, _nestjsquerygraphql.Relation)('media', ()=>_mediadto.MediaDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('options', ()=>_serviceoptiondto.ServiceOptionDTO)
], ServiceDTO);


/***/ }),
/* 44 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PaymentGatewayDTO", ({
    enumerable: true,
    get: function() {
        return PaymentGatewayDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
const _mediadto = __webpack_require__(36);
let PaymentGatewayDTO = class PaymentGatewayDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], PaymentGatewayDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], PaymentGatewayDTO.prototype, "enabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], PaymentGatewayDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.PaymentGatewayType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.PaymentGatewayType === "undefined" ? Object : _database.PaymentGatewayType)
], PaymentGatewayDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PaymentGatewayDTO.prototype, "publicKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.GatewayLinkMethod, {
        middleware: [
            async (ctx, next)=>{
                const type = ctx.source.type;
                return type === _database.PaymentGatewayType.Stripe ? _database.GatewayLinkMethod.redirect : _database.GatewayLinkMethod.none;
            }
        ]
    }),
    _ts_metadata._("design:type", typeof _database.GatewayLinkMethod === "undefined" ? Object : _database.GatewayLinkMethod)
], PaymentGatewayDTO.prototype, "linkMethod", void 0);
PaymentGatewayDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('PaymentGateway'),
    (0, _nestjsquerygraphql.Authorize)({
        authorize: (context)=>({
                enabled: true
            })
    }),
    (0, _nestjsquerygraphql.Relation)('media', ()=>_mediadto.MediaDTO, {
        nullable: true
    })
], PaymentGatewayDTO);


/***/ }),
/* 45 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverDTO", ({
    enumerable: true,
    get: function() {
        return DriverDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
const _mediadto = __webpack_require__(36);
const _carcolordto = __webpack_require__(46);
const _carmodeldto = __webpack_require__(47);
const _driverservicesservicedto = __webpack_require__(48);
let DriverDTO = class DriverDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], DriverDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "carPlate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverDTO.prototype, "rating", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], DriverDTO.prototype, "reviewCount", void 0);
DriverDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Driver'),
    (0, _nestjsquerygraphql.Relation)('car', ()=>_carmodeldto.CarModelDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('carColor', ()=>_carcolordto.CarColorDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('media', ()=>_mediadto.MediaDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('enabledServices', ()=>_driverservicesservicedto.DriverServicesServiceDTO)
], DriverDTO);


/***/ }),
/* 46 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CarColorDTO", ({
    enumerable: true,
    get: function() {
        return CarColorDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
let CarColorDTO = class CarColorDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CarColorDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CarColorDTO.prototype, "name", void 0);
CarColorDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('CarColor')
], CarColorDTO);


/***/ }),
/* 47 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CarModelDTO", ({
    enumerable: true,
    get: function() {
        return CarModelDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
let CarModelDTO = class CarModelDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CarModelDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CarModelDTO.prototype, "name", void 0);
CarModelDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('CarModel')
], CarModelDTO);


/***/ }),
/* 48 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverServicesServiceDTO", ({
    enumerable: true,
    get: function() {
        return DriverServicesServiceDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _nestjsquerygraphql = __webpack_require__(12);
const _servicedto = __webpack_require__(43);
let DriverServicesServiceDTO = class DriverServicesServiceDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], DriverServicesServiceDTO.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], DriverServicesServiceDTO.prototype, "serviceId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], DriverServicesServiceDTO.prototype, "driverEnabled", void 0);
DriverServicesServiceDTO = _ts_decorate._([
    (0, _graphql.ObjectType)(),
    (0, _nestjsquerygraphql.Relation)('service', ()=>_servicedto.ServiceDTO)
], DriverServicesServiceDTO);


/***/ }),
/* 49 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SavedPaymentMethodDto", ({
    enumerable: true,
    get: function() {
        return SavedPaymentMethodDto;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(12);
let SavedPaymentMethodDto = class SavedPaymentMethodDto {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], SavedPaymentMethodDto.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.SavedPaymentMethodType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.SavedPaymentMethodType === "undefined" ? Object : _database.SavedPaymentMethodType)
], SavedPaymentMethodDto.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SavedPaymentMethodDto.prototype, "lastFour", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], SavedPaymentMethodDto.prototype, "isEnabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], SavedPaymentMethodDto.prototype, "isDefault", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ProviderBrand, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ProviderBrand === "undefined" ? Object : _database.ProviderBrand)
], SavedPaymentMethodDto.prototype, "providerBrand", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], SavedPaymentMethodDto.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], SavedPaymentMethodDto.prototype, "expiryDate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SavedPaymentMethodDto.prototype, "holderName", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        filterOnly: true
    }),
    _ts_metadata._("design:type", Number)
], SavedPaymentMethodDto.prototype, "riderId", void 0);
SavedPaymentMethodDto = _ts_decorate._([
    (0, _graphql.ObjectType)('SavedPaymentMethod')
], SavedPaymentMethodDto);


/***/ }),
/* 50 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DeliveryContactDTO", ({
    enumerable: true,
    get: function() {
        return DeliveryContactDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _phonenumberdto = __webpack_require__(25);
let DeliveryContactDTO = class DeliveryContactDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], DeliveryContactDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_phonenumberdto.PhoneNumberDTO, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _phonenumberdto.PhoneNumberDTO === "undefined" ? Object : _phonenumberdto.PhoneNumberDTO)
], DeliveryContactDTO.prototype, "phoneNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DeliveryContactDTO.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], DeliveryContactDTO.prototype, "addressLine1", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DeliveryContactDTO.prototype, "addressLine2", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DeliveryContactDTO.prototype, "zone", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DeliveryContactDTO.prototype, "buildingNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DeliveryContactDTO.prototype, "apartmentNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DeliveryContactDTO.prototype, "city", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DeliveryContactDTO.prototype, "state", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DeliveryContactDTO.prototype, "instructions", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DeliveryContactDTO.prototype, "postalCode", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DeliveryContactDTO.prototype, "companyName", void 0);
DeliveryContactDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('DeliveryContact'),
    (0, _graphql.InputType)('DeliveryContactInput')
], DeliveryContactDTO);


/***/ }),
/* 51 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiOrderShopDTO", ({
    enumerable: true,
    get: function() {
        return TaxiOrderShopDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _nestjsquerygraphql = __webpack_require__(12);
const _shopordercartdto = __webpack_require__(52);
let TaxiOrderShopDTO = class TaxiOrderShopDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], TaxiOrderShopDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderShopDTO.prototype, "pickedAt", void 0);
TaxiOrderShopDTO = _ts_decorate._([
    (0, _graphql.ObjectType)(),
    (0, _nestjsquerygraphql.Relation)('shopOrderCart', ()=>_shopordercartdto.ShopOrderCartDTO)
], TaxiOrderShopDTO);


/***/ }),
/* 52 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopOrderCartDTO", ({
    enumerable: true,
    get: function() {
        return ShopOrderCartDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _nestjsquerygraphql = __webpack_require__(12);
const _database = __webpack_require__(10);
const _shopdto = __webpack_require__(53);
let ShopOrderCartDTO = class ShopOrderCartDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopOrderCartDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.CartStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.CartStatus === "undefined" ? Object : _database.CartStatus)
], ShopOrderCartDTO.prototype, "status", void 0);
ShopOrderCartDTO = _ts_decorate._([
    (0, _graphql.ObjectType)(),
    (0, _nestjsquerygraphql.Relation)('shop', ()=>_shopdto.ShopDTO)
], ShopOrderCartDTO);


/***/ }),
/* 53 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopDTO", ({
    enumerable: true,
    get: function() {
        return ShopDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _phonenumberdto = __webpack_require__(25);
const _mediadto = __webpack_require__(36);
const _nestjsquerygraphql = __webpack_require__(12);
let ShopDTO = class ShopDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ShopDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_phonenumberdto.PhoneNumberDTO, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _phonenumberdto.PhoneNumberDTO === "undefined" ? Object : _phonenumberdto.PhoneNumberDTO)
], ShopDTO.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ShopDTO.prototype, "address", void 0);
ShopDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Shop'),
    (0, _nestjsquerygraphql.Relation)('image', ()=>_mediadto.MediaDTO)
], ShopDTO);


/***/ }),
/* 54 */
/***/ ((module) => {

module.exports = require("@ptc-org/nestjs-query-core");

/***/ }),
/* 55 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderWalletDTO", ({
    enumerable: true,
    get: function() {
        return RiderWalletDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
let RiderWalletDTO = class RiderWalletDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RiderWalletDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], RiderWalletDTO.prototype, "balance", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], RiderWalletDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        filterOnly: true
    }),
    _ts_metadata._("design:type", Number)
], RiderWalletDTO.prototype, "riderId", void 0);
RiderWalletDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('RiderWallet'),
    (0, _nestjsquerygraphql.Authorize)({
        authorize: (context)=>({
                riderId: {
                    eq: context.req.user.id
                }
            })
    })
], RiderWalletDTO);


/***/ }),
/* 56 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderTransactionDTO", ({
    enumerable: true,
    get: function() {
        return RiderTransactionDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
let RiderTransactionDTO = class RiderTransactionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLTimestamp),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.TransactionAction, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.TransactionAction === "undefined" ? Object : _database.TransactionAction)
], RiderTransactionDTO.prototype, "action", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RiderDeductTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.RiderDeductTransactionType === "undefined" ? Object : _database.RiderDeductTransactionType)
], RiderTransactionDTO.prototype, "deductType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RiderRechargeTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.RiderRechargeTransactionType === "undefined" ? Object : _database.RiderRechargeTransactionType)
], RiderTransactionDTO.prototype, "rechargeType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], RiderTransactionDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderTransactionDTO.prototype, "refrenceNumber", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        filterOnly: true
    }),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "riderId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        filterOnly: true,
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "shopOrderId", void 0);
RiderTransactionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('RiderTransacion'),
    (0, _nestjsquerygraphql.Authorize)({
        authorize: (context)=>({
                riderId: {
                    eq: context.req.user.id
                }
            })
    })
], RiderTransactionDTO);


/***/ }),
/* 57 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateRiderInput", ({
    enumerable: true,
    get: function() {
        return UpdateRiderInput;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
let UpdateRiderInput = class UpdateRiderInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateRiderInput.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateRiderInput.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Gender, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.Gender === "undefined" ? Object : _database.Gender)
], UpdateRiderInput.prototype, "gender", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateRiderInput.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateRiderInput.prototype, "notificationPlayerId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateRiderInput.prototype, "password", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], UpdateRiderInput.prototype, "isResident", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateRiderInput.prototype, "idNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateRiderInput.prototype, "mediaId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateRiderInput.prototype, "presetAvatarNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RiderDocumentType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.RiderDocumentType === "undefined" ? Object : _database.RiderDocumentType)
], UpdateRiderInput.prototype, "documentType", void 0);
UpdateRiderInput = _ts_decorate._([
    (0, _graphql.InputType)(),
    (0, _nestjsquerygraphql.BeforeUpdateOne)((input, context)=>{
        input.id = context.req.user.id;
        return input;
    })
], UpdateRiderInput);


/***/ }),
/* 58 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AuthResolver", ({
    enumerable: true,
    get: function() {
        return AuthResolver;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _common = __webpack_require__(1);
const _graphql = __webpack_require__(8);
const _jwt = __webpack_require__(33);
const _database = __webpack_require__(10);
const _riderdto = __webpack_require__(35);
const _authenticateduser = __webpack_require__(59);
const _logindto = __webpack_require__(60);
const _logininput = __webpack_require__(61);
const _accesstokenguard = __webpack_require__(22);
const _apollo = __webpack_require__(6);
const _firebaseadmin = __webpack_require__(16);
const _authservice = __webpack_require__(62);
const _verifynumberdto = __webpack_require__(63);
const _verificationdto = __webpack_require__(64);
let AuthResolver = class AuthResolver {
    constructor(sharedRiderService, jwtService, authService, userContext){
        this.sharedRiderService = sharedRiderService;
        this.jwtService = jwtService;
        this.authService = authService;
        this.userContext = userContext;
    }
    async login(input) {
        const decodedToken = await (0, _firebaseadmin.auth)().verifyIdToken(input.firebaseToken);
        const number = decodedToken.firebase.identities.phone[0].substring(1);
        const user = await this.sharedRiderService.findOrCreateUserWithMobileNumber({
            mobileNumber: number
        });
        const payload = {
            id: user.id
        };
        return {
            accessToken: this.jwtService.sign(payload, {
                expiresIn: '15m'
            }),
            refreshToken: this.jwtService.sign(payload)
        };
    }
    async requireUpdate(versionCode) {
        if (process.env.MANDATORY_VERSION_CODE != null && versionCode < parseInt(process.env.MANDATORY_VERSION_CODE)) {
            return _database.VersionStatus.MandatoryUpdate;
        }
        if (process.env.OPTIONAL_VERSION_CODE != null && versionCode < parseInt(process.env.OPTIONAL_VERSION_CODE)) {
            return _database.VersionStatus.OptionalUpdate;
        }
        return _database.VersionStatus.Latest;
    }
    async deleteUser() {
        const rider = await this.sharedRiderService.repo.findOneByOrFail({
            id: this.userContext.req.user.id
        });
        this.sharedRiderService.repo.softDelete({
            id: this.userContext.req.user.id
        });
        return rider;
    }
    async skipVerification(mobileNumber) {
        if (process.env.DEMO_MODE !== 'true') {
            throw new _apollo.ForbiddenError('Not in demo mode');
        }
        if (mobileNumber.startsWith('+')) {
            mobileNumber = mobileNumber.substring(1);
        }
        const user = await this.sharedRiderService.findOrCreateUserWithMobileNumber({
            mobileNumber
        });
        const payload = {
            id: user.id
        };
        return {
            accessToken: this.jwtService.sign(payload, {}),
            refreshToken: this.jwtService.sign(payload, {})
        };
    }
    async verifyNumber(mobileNumber, countryIso, forceSendOtp) {
        if (mobileNumber.startsWith('+')) {
            mobileNumber = mobileNumber.substring(1);
        }
        const rider = await this.sharedRiderService.findWithDeleted({
            mobileNumber
        });
        if (rider != null && rider.password != null && forceSendOtp !== true) {
            return {
                isExistingUser: true
            };
        }
        const { hash } = await this.authService.sendVerificationCode({
            phoneNumber: mobileNumber,
            countryIso: countryIso
        });
        _common.Logger.log(`Verification code sent to ${mobileNumber} with hash ${hash}`, 'AuthResolver.verifyNumber');
        return {
            isExistingUser: false,
            hash
        };
    }
    async verifyOtp(hash, code) {
        const verifyHash = await this.authService.verifyCode(hash, code);
        const user = await this.sharedRiderService.findOrCreateUserWithMobileNumber(verifyHash);
        const payload = {
            id: user.id
        };
        return {
            jwtToken: this.jwtService.sign(payload),
            user,
            hasName: user.firstName != null && user.lastName != null,
            hasPassword: user.password != null
        };
    }
    async verifyPassword(mobileNumber, password) {
        const user = await this.sharedRiderService.findWithDeleted({
            mobileNumber: mobileNumber
        });
        if (user == null) {
            throw new _apollo.ForbiddenError('User not found');
        }
        if (user.password !== password) {
            throw new _apollo.ForbiddenError('Wrong password');
        }
        if (user?.deletedAt != null) {
            await this.sharedRiderService.restore(user?.id);
        }
        const payload = {
            id: user.id
        };
        return {
            jwtToken: this.jwtService.sign(payload),
            user: user,
            hasName: user.firstName != null && user.lastName != null,
            hasPassword: user.password != null
        };
    }
    async setPassword(password) {
        const user = await this.authService.setPassword({
            riderId: this.userContext.req.user.id,
            password
        });
        const payload = {
            id: user.id
        };
        return {
            jwtToken: this.jwtService.sign(payload),
            user: user,
            hasName: user.firstName != null && user.lastName != null,
            hasPassword: user.password != null
        };
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_logindto.LoginDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_logininput.LoginInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _logininput.LoginInput === "undefined" ? Object : _logininput.LoginInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], AuthResolver.prototype, "login", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_database.VersionStatus),
    _ts_param._(0, (0, _graphql.Args)('versionCode', {
        type: ()=>_graphql.Int
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], AuthResolver.prototype, "requireUpdate", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_riderdto.RiderDTO),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], AuthResolver.prototype, "deleteUser", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_logindto.LoginDTO),
    _ts_param._(0, (0, _graphql.Args)('mobileNumber')),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], AuthResolver.prototype, "skipVerification", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_verifynumberdto.VerifyNumberDto, {
        description: 'Returns a hash that will need to be passed in subsequent verify code call in order for match and verifcation to happen. Real sms is not sent in demo mode. It is 123456 by default.'
    }),
    _ts_param._(0, (0, _graphql.Args)('mobileNumber')),
    _ts_param._(1, (0, _graphql.Args)('countryIso', {
        nullable: true
    })),
    _ts_param._(2, (0, _graphql.Args)('forceSendOtp', {
        nullable: true
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String,
        String,
        Boolean
    ]),
    _ts_metadata._("design:returntype", Promise)
], AuthResolver.prototype, "verifyNumber", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_verificationdto.VerificationDto, {
        description: 'Returns a JWT token if the code matches the hash. In demo mode the OTP is not sent. It is 123456 by default.'
    }),
    _ts_param._(0, (0, _graphql.Args)('hash')),
    _ts_param._(1, (0, _graphql.Args)('code')),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String,
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], AuthResolver.prototype, "verifyOtp", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_verificationdto.VerificationDto),
    _ts_param._(0, (0, _graphql.Args)('mobileNumber')),
    _ts_param._(1, (0, _graphql.Args)('password')),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String,
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], AuthResolver.prototype, "verifyPassword", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_verificationdto.VerificationDto),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_param._(0, (0, _graphql.Args)('password')),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], AuthResolver.prototype, "setPassword", null);
AuthResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_param._(3, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _database.SharedRiderService === "undefined" ? Object : _database.SharedRiderService,
        typeof _jwt.JwtService === "undefined" ? Object : _jwt.JwtService,
        typeof _authservice.AuthService === "undefined" ? Object : _authservice.AuthService,
        typeof _authenticateduser.UserContext === "undefined" ? Object : _authenticateduser.UserContext
    ])
], AuthResolver);


/***/ }),
/* 59 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AuthenticatedRiderDTO", ({
    enumerable: true,
    get: function() {
        return AuthenticatedRiderDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _graphql = __webpack_require__(8);
let AuthenticatedRiderDTO = class AuthenticatedRiderDTO {
};
AuthenticatedRiderDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('AuthenticatedRider')
], AuthenticatedRiderDTO);


/***/ }),
/* 60 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "LoginDTO", ({
    enumerable: true,
    get: function() {
        return LoginDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
let LoginDTO = class LoginDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], LoginDTO.prototype, "accessToken", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], LoginDTO.prototype, "refreshToken", void 0);
LoginDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Login')
], LoginDTO);


/***/ }),
/* 61 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "LoginInput", ({
    enumerable: true,
    get: function() {
        return LoginInput;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
let LoginInput = class LoginInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], LoginInput.prototype, "firebaseToken", void 0);
LoginInput = _ts_decorate._([
    (0, _graphql.InputType)()
], LoginInput);


/***/ }),
/* 62 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AuthService", ({
    enumerable: true,
    get: function() {
        return AuthService;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _common = __webpack_require__(1);
const _jwt = __webpack_require__(33);
const _database = __webpack_require__(10);
const _firebaseadmin = __webpack_require__(16);
let AuthService = class AuthService {
    constructor(riderService, jwtService, smsService, authRedisService){
        this.riderService = riderService;
        this.jwtService = jwtService;
        this.smsService = smsService;
        this.authRedisService = authRedisService;
    }
    async validateUser(firebaseToken) {
        const decodedToken = await (0, _firebaseadmin.auth)().verifyIdToken(firebaseToken);
        const number = decodedToken.firebase.identities.phone[0].substring(1);
        const user = await this.riderService.findOrCreateUserWithMobileNumber({
            mobileNumber: number
        });
        return user;
    }
    async loginUser(user) {
        const payload = {
            id: user.id
        };
        return {
            token: this.jwtService.sign(payload)
        };
    }
    async sendVerificationCode(input) {
        const code = process.env.DEMO_MODE ? '123456' : await this.smsService.sendVerificationCodeSms(input.phoneNumber);
        const hash = await this.authRedisService.createVerificationCode({
            mobileNumber: input.phoneNumber,
            countryIso: input.countryIso,
            code
        });
        return hash;
    }
    async verifyCode(hash, code) {
        const verifyHash = await this.authRedisService.isVerificationCodeValid(hash, code);
        await this.authRedisService.deleteVerificationCode(hash);
        return verifyHash;
    }
    async setPassword(input) {
        await this.riderService.repo.update(input.riderId, {
            password: input.password
        });
        return this.riderService.repo.findOneBy({
            id: input.riderId
        });
    }
};
AuthService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _database.SharedRiderService === "undefined" ? Object : _database.SharedRiderService,
        typeof _jwt.JwtService === "undefined" ? Object : _jwt.JwtService,
        typeof _database.SMSService === "undefined" ? Object : _database.SMSService,
        typeof _database.AuthRedisService === "undefined" ? Object : _database.AuthRedisService
    ])
], AuthService);


/***/ }),
/* 63 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "VerifyNumberDto", ({
    enumerable: true,
    get: function() {
        return VerifyNumberDto;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
let VerifyNumberDto = class VerifyNumberDto {
};
_ts_decorate._([
    (0, _graphql.Field)({
        description: 'If an existing user then the hash will be null, so the user can be logged in using password instead of OTP.'
    }),
    _ts_metadata._("design:type", Boolean)
], VerifyNumberDto.prototype, "isExistingUser", void 0);
_ts_decorate._([
    (0, _graphql.Field)({
        nullable: true,
        description: 'Hash that will need to be passed in subsequent verify code call in order for match and verifcation to happen.'
    }),
    _ts_metadata._("design:type", String)
], VerifyNumberDto.prototype, "hash", void 0);
VerifyNumberDto = _ts_decorate._([
    (0, _graphql.ObjectType)()
], VerifyNumberDto);


/***/ }),
/* 64 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "VerificationDto", ({
    enumerable: true,
    get: function() {
        return VerificationDto;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _riderdto = __webpack_require__(35);
let VerificationDto = class VerificationDto {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], VerificationDto.prototype, "jwtToken", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_riderdto.RiderDTO, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _riderdto.RiderDTO === "undefined" ? Object : _riderdto.RiderDTO)
], VerificationDto.prototype, "user", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], VerificationDto.prototype, "hasPassword", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], VerificationDto.prototype, "hasName", void 0);
VerificationDto = _ts_decorate._([
    (0, _graphql.ObjectType)('VerifcationResult')
], VerificationDto);


/***/ }),
/* 65 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    JwtStrategy: function() {
        return JwtStrategy;
    },
    validateToken: function() {
        return validateToken;
    }
});
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _passportjwt = __webpack_require__(66);
const _passport = __webpack_require__(23);
const _common = __webpack_require__(1);
const _jwtdecode = __webpack_require__(67);
let JwtStrategy = class JwtStrategy extends (0, _passport.PassportStrategy)(_passportjwt.Strategy, 'jwt') {
    constructor(){
        super({
            jwtFromRequest: _passportjwt.ExtractJwt.fromAuthHeaderAsBearerToken(),
            ignoreExpiration: false,
            secretOrKey: 'secret_rider'
        });
    }
    async validate(payload) {
        return {
            id: payload.id
        };
    }
};
JwtStrategy = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [])
], JwtStrategy);
async function validateToken(token) {
    const res = (0, _jwtdecode.jwtDecode)(token);
    _common.Logger.log(`validated rider socket: ${res.id}`);
    return {
        id: res.id
    };
}


/***/ }),
/* 66 */
/***/ ((module) => {

module.exports = require("passport-jwt");

/***/ }),
/* 67 */
/***/ ((module) => {

module.exports = require("jwt-decode");

/***/ }),
/* 68 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ChatModule", ({
    enumerable: true,
    get: function() {
        return ChatModule;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _nestjsquerygraphql = __webpack_require__(12);
const _nestjsquerytypeorm = __webpack_require__(21);
const _common = __webpack_require__(1);
const _database = __webpack_require__(10);
const _accesstokenguard = __webpack_require__(22);
const _ordermodule = __webpack_require__(69);
const _chatservice = __webpack_require__(91);
const _chatsubscriptionservice = __webpack_require__(92);
const _ordermessagedto = __webpack_require__(41);
const _ordermessageinput = __webpack_require__(93);
const _chatresolver = __webpack_require__(94);
let ChatModule = class ChatModule {
};
ChatModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _ordermodule.OrderModule,
            _database.FirebaseNotificationModule.register(),
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.OrderMessageEntity,
                        _database.TaxiOrderEntity
                    ])
                ],
                services: [
                    _chatservice.ChatService,
                    _database.DriverNotificationService
                ],
                pubSub: _database.RedisPubSubProvider.provider(),
                resolvers: [
                    {
                        EntityClass: _database.OrderMessageEntity,
                        DTOClass: _ordermessagedto.OrderMessageDTO,
                        CreateDTOClass: _ordermessageinput.OrderMessageInput,
                        ServiceClass: _chatservice.ChatService,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _accesstokenguard.GqlAuthGuard
                        ]
                    }
                ]
            })
        ],
        providers: [
            _chatsubscriptionservice.ChatSubscriptionService,
            _chatresolver.ChatResolver,
            _database.RedisPubSubProvider.provider()
        ]
    })
], ChatModule);


/***/ }),
/* 69 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderModule", ({
    enumerable: true,
    get: function() {
        return OrderModule;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _nestjsquerygraphql = __webpack_require__(12);
const _nestjsquerytypeorm = __webpack_require__(21);
const _common = __webpack_require__(1);
const _typeorm = __webpack_require__(9);
const _database = __webpack_require__(10);
const _accesstokenguard = __webpack_require__(22);
const _ridermodule = __webpack_require__(34);
const _servicemodule = __webpack_require__(70);
const _carcolordto = __webpack_require__(46);
const _carmodeldto = __webpack_require__(47);
const _driverdto = __webpack_require__(45);
const _orderdto = __webpack_require__(40);
const _orderresolver = __webpack_require__(73);
const _riderorderservice = __webpack_require__(78);
const _ordersubscriptionservice = __webpack_require__(81);
const _couponmodule = __webpack_require__(83);
const _feedbackparameterdto = __webpack_require__(87);
const _updateorderinput = __webpack_require__(88);
const _riderorderqueryservice = __webpack_require__(89);
const _axios = __webpack_require__(14);
const _cancelreasondto = __webpack_require__(90);
const _shopordercartdto = __webpack_require__(52);
const _shopdto = __webpack_require__(53);
const _taxiordershopdto = __webpack_require__(51);
const _driverservicesservicedto = __webpack_require__(48);
let OrderModule = class OrderModule {
};
OrderModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _database.SharedCustomerWalletModule,
            _typeorm.TypeOrmModule.forFeature([
                _database.TaxiOrderEntity,
                _database.ProviderWalletEntity,
                _database.ProviderTransactionEntity,
                _database.DriverEntity,
                _database.DriverWalletEntity,
                _database.DriverTransactionEntity,
                _database.FeedbackEntity,
                _database.RequestActivityEntity,
                _database.FeedbackParameterEntity,
                _database.ServiceOptionEntity,
                _database.ZonePriceEntity,
                _database.PaymentEntity
            ]),
            _axios.HttpModule,
            _database.CommonCouponModule,
            _database.GoogleServicesModule,
            _servicemodule.ServiceModule,
            _ridermodule.RiderModule,
            _database.RegionModule,
            (0, _common.forwardRef)(()=>_couponmodule.CouponModule),
            _database.RedisHelpersModule,
            _database.SharedOrderModule,
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _database.SharedCustomerWalletModule,
                    _database.RedisHelpersModule,
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.TaxiOrderEntity,
                        _database.DriverEntity,
                        _database.CarColorEntity,
                        _database.CarModelEntity,
                        _database.RegionEntity,
                        _database.ServiceCategoryEntity,
                        _database.MediaEntity,
                        _database.FeedbackParameterEntity,
                        _database.RequestActivityEntity,
                        _database.FeedbackEntity,
                        _database.PaymentEntity,
                        _database.OrderCancelReasonEntity,
                        _database.ShopOrderCartEntity,
                        _database.ShopEntity,
                        _database.TaxiOrderShopEntity,
                        _database.DriverServicesServiceEntity
                    ]),
                    _database.CommonCouponModule,
                    _database.SharedOrderModule,
                    _axios.HttpModule
                ],
                pubSub: _database.RedisPubSubProvider.provider(),
                services: [
                    _riderorderqueryservice.RiderOrderQueryService,
                    _riderorderservice.RiderOrderService,
                    _database.OrderRedisService,
                    _database.DriverNotificationService
                ],
                resolvers: [
                    {
                        EntityClass: _database.TaxiOrderEntity,
                        DTOClass: _orderdto.OrderDTO,
                        UpdateDTOClass: _updateorderinput.UpdateOrderInput,
                        ServiceClass: _riderorderqueryservice.RiderOrderQueryService,
                        //Service: RiderOrderQueryService,
                        create: {
                            disabled: true
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _accesstokenguard.GqlAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.DriverEntity,
                        DTOClass: _driverdto.DriverDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.DriverServicesServiceEntity,
                        DTOClass: _driverservicesservicedto.DriverServicesServiceDTO,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        create: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _accesstokenguard.GqlAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.TaxiOrderShopEntity,
                        DTOClass: _taxiordershopdto.TaxiOrderShopDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.ShopOrderCartEntity,
                        DTOClass: _shopordercartdto.ShopOrderCartDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.ShopEntity,
                        DTOClass: _shopdto.ShopDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.CarModelEntity,
                        DTOClass: _carmodeldto.CarModelDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.CarColorEntity,
                        DTOClass: _carcolordto.CarColorDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.FeedbackParameterEntity,
                        DTOClass: _feedbackparameterdto.FeedbackParameterDTO,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        }
                    },
                    {
                        EntityClass: _database.OrderCancelReasonEntity,
                        DTOClass: _cancelreasondto.OrderCancelReasonDTO,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        }
                    }
                ]
            })
        ],
        providers: [
            _ordersubscriptionservice.OrderSubscriptionService,
            _database.SharedProviderService,
            _orderresolver.OrderResolver,
            _riderorderservice.RiderOrderService,
            _database.SharedDriverService,
            _database.DriverNotificationService,
            _database.RiderNotificationService,
            _database.RedisPubSubProvider.provider()
        ],
        exports: [
            _riderorderservice.RiderOrderService
        ]
    })
], OrderModule);


/***/ }),
/* 70 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceModule", ({
    enumerable: true,
    get: function() {
        return ServiceModule;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _nestjsquerygraphql = __webpack_require__(12);
const _nestjsquerytypeorm = __webpack_require__(21);
const _common = __webpack_require__(1);
const _database = __webpack_require__(10);
const _uploadmodule = __webpack_require__(71);
const _servicecategorydto = __webpack_require__(72);
const _servicedto = __webpack_require__(43);
let ServiceModule = class ServiceModule {
};
ServiceModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _uploadmodule.UploadModule,
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.ServiceEntity,
                        _database.ServiceCategoryEntity,
                        _database.MediaEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.ServiceEntity,
                        DTOClass: _servicedto.ServiceDTO,
                        create: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.ServiceCategoryEntity,
                        DTOClass: _servicecategorydto.ServiceCategoryDTO,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        create: {
                            disabled: true
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        }
                    }
                ]
            })
        ],
        providers: [
            _database.ServiceService
        ],
        exports: [
            _database.ServiceService
        ]
    })
], ServiceModule);


/***/ }),
/* 71 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UploadModule", ({
    enumerable: true,
    get: function() {
        return UploadModule;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _nestjsquerygraphql = __webpack_require__(12);
const _nestjsquerytypeorm = __webpack_require__(21);
const _common = __webpack_require__(1);
const _database = __webpack_require__(10);
const _mediadto = __webpack_require__(36);
let UploadModule = class UploadModule {
};
UploadModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.MediaEntity
                    ])
                ],
                resolvers: [
                    {
                        DTOClass: _mediadto.MediaDTO,
                        EntityClass: _database.MediaEntity,
                        create: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        }
                    }
                ]
            })
        ],
        providers: [],
        exports: []
    })
], UploadModule);


/***/ }),
/* 72 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceCategoryDTO", ({
    enumerable: true,
    get: function() {
        return ServiceCategoryDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
const _servicedto = __webpack_require__(43);
let ServiceCategoryDTO = class ServiceCategoryDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ServiceCategoryDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ServiceCategoryDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _servicedto.ServiceDTO
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ServiceCategoryDTO.prototype, "services", void 0);
ServiceCategoryDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ServiceCategory')
], ServiceCategoryDTO);


/***/ }),
/* 73 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderResolver", ({
    enumerable: true,
    get: function() {
        return OrderResolver;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _common = __webpack_require__(1);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
const _authenticateduser = __webpack_require__(59);
const _accesstokenguard = __webpack_require__(22);
const _calculatefaredto = __webpack_require__(74);
const _calculatefareinput = __webpack_require__(75);
const _createorderinput = __webpack_require__(76);
const _orderdto = __webpack_require__(40);
const _submitfeedbackinput = __webpack_require__(77);
const _riderorderservice = __webpack_require__(78);
const _currentorderdto = __webpack_require__(79);
const _startridebyqrdto = __webpack_require__(80);
let OrderResolver = class OrderResolver {
    constructor(context, orderService, riderOrderService, driverRedisService, commonCouponService){
        this.context = context;
        this.orderService = orderService;
        this.riderOrderService = riderOrderService;
        this.driverRedisService = driverRedisService;
        this.commonCouponService = commonCouponService;
    }
    async activeOrders() {
        return this.riderOrderService.getActiveOrders(this.context.req.user.id);
    }
    async currentOrder() {
        return this.riderOrderService.getCurrentOrder(this.context.req.user.id, [
            "driver",
            "driver.carColor",
            "driver.car",
            "conversation"
        ]);
    }
    async startRideByQr(input) {
        const driverId = await this.driverRedisService.getDriverIdByToken(input.token);
        console.log("driverID :", driverId);
        if (!driverId) {
            throw new Error("Invalid or expired QR token");
        }
        return this.orderService.createOrderByQr({
            riderId: this.context.req.user.id,
            driverId,
            serviceId: input.serviceId,
            intervalMinutes: 0,
            points: input.points,
            addresses: input.addresses,
            waitMinutes: input.waitTime ?? 0,
            twoWay: input.twoWay,
            optionIds: input.optionIds
        });
    }
    // @Mutation(() => CalculateFareDTO)
    // @UseGuards(GqlAuthGuard)
    // async calculateFare(
    //   @Args('input', { type: () => CalculateFareInput })
    //   input: CalculateFareInput,
    // ): Promise<CalculateFareDTO> {
    //   Logger.log(
    //     `Creating order for userId:${this.context.req.user
    //       ?.id} with input ${JSON.stringify(input)}`,
    //     'OrderResolver.calculateFareMutation',
    //   );
    //   const coupon = await this.commonCouponService.checkCoupon(
    //     input.couponCode,
    //     this.context.req.user?.id,
    //   );
    //   return this.orderService.calculateFare({
    //     points: input.points,
    //     coupon: coupon,
    //     riderId: this.context.req.user?.id,
    //     twoWay: input.twoWay,
    //     waitTime: input.waitTime,
    //     selectedOptionIds: input.selectedOptionIds,
    //     orderType: input.orderType,
    //   });
    // }
    async getFares(input) {
        let coupon;
        if (input.couponCode != null && this.context.req.user?.id != null && input.couponCode.length > 0) {
            coupon = await this.commonCouponService.checkCoupon(input.couponCode);
        }
        return this.orderService.calculateFare({
            points: input.points,
            coupon: coupon,
            riderId: this.context.req.user?.id,
            twoWay: input.twoWay,
            waitTime: input.waitTime,
            selectedOptionIds: input.selectedOptionIds,
            orderType: input.orderType
        });
    }
    async createOrder(input) {
        return this.orderService.createOrder({
            ...input,
            riderId: this.context.req.user.id,
            optionIds: input.optionIds,
            waitMinutes: input.waitTime,
            twoWay: input.twoWay
        });
    }
    async cancelOrder(orderId, cancelReasonId, cancelReasonNote) {
        if (orderId != null) {
            return this.riderOrderService.cancelOrder({
                orderId: orderId,
                reasonId: cancelReasonId,
                reason: cancelReasonNote
            });
        } else {
            return this.riderOrderService.cancelRiderLastOrder({
                riderId: this.context.req.user.id,
                reasonId: cancelReasonId,
                reason: cancelReasonNote
            });
        }
    }
    async cancelBooking(id, cancelReasonId, cancelReasonNote) {
        return this.riderOrderService.cancelOrder({
            orderId: id,
            reasonId: cancelReasonId,
            reason: cancelReasonNote
        });
    }
    async getCurrentOrderDriverLocation() {
        const order = await this.riderOrderService.getCurrentOrder(this.context.req.user.id);
        if (order?.driverId != null) {
            _common.Logger.log(`driver id: ${order.driverId}`);
            const coordinate = await this.driverRedisService.getDriverCoordinate(order.driverId);
            _common.Logger.log(JSON.stringify(coordinate));
            return coordinate;
        } else {
            return null;
        }
    }
    async getDriversLocation(center) {
        if (center == null) return [];
        const closeDrivers = await this.driverRedisService.getClose(center, 1000);
        return closeDrivers.map((item)=>item.location);
    }
    async submitReview(review) {
        return this.riderOrderService.submitReview(this.context.req.user.id, review);
    }
    async skipReview() {
        return this.riderOrderService.skipReview(this.context.req.user.id);
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _currentorderdto.CurrentOrder
        ]),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], OrderResolver.prototype, "activeOrders", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_orderdto.OrderDTO, {
        nullable: true
    }),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], OrderResolver.prototype, "currentOrder", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_orderdto.OrderDTO),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_param._(0, (0, _graphql.Args)("input", {
        type: ()=>_startridebyqrdto.StartRideByQrInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _startridebyqrdto.StartRideByQrInput === "undefined" ? Object : _startridebyqrdto.StartRideByQrInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], OrderResolver.prototype, "startRideByQr", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_calculatefaredto.CalculateFareDTO),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_param._(0, (0, _graphql.Args)("input", {
        type: ()=>_calculatefareinput.CalculateFareInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _calculatefareinput.CalculateFareInput === "undefined" ? Object : _calculatefareinput.CalculateFareInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], OrderResolver.prototype, "getFares", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_orderdto.OrderDTO),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_param._(0, (0, _graphql.Args)("input", {
        type: ()=>_createorderinput.CreateOrderInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _createorderinput.CreateOrderInput === "undefined" ? Object : _createorderinput.CreateOrderInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], OrderResolver.prototype, "createOrder", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_orderdto.OrderDTO),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_param._(0, (0, _graphql.Args)("orderId", {
        type: ()=>_graphql.ID,
        nullable: true
    })),
    _ts_param._(1, (0, _graphql.Args)("cancelReasonId", {
        type: ()=>_graphql.ID,
        nullable: true
    })),
    _ts_param._(2, (0, _graphql.Args)("cancelReasonNote", {
        type: ()=>String,
        nullable: true
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number,
        Number,
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], OrderResolver.prototype, "cancelOrder", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_orderdto.OrderDTO),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_param._(0, (0, _graphql.Args)("id", {
        type: ()=>_graphql.ID
    })),
    _ts_param._(1, (0, _graphql.Args)("cancelReasonId", {
        type: ()=>_graphql.ID,
        nullable: true
    })),
    _ts_param._(2, (0, _graphql.Args)("cancelReasonNote", {
        type: ()=>String,
        nullable: true
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number,
        Number,
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], OrderResolver.prototype, "cancelBooking", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_database.Point, {
        nullable: true
    }),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], OrderResolver.prototype, "getCurrentOrderDriverLocation", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _database.Point
        ], {}),
    _ts_param._(0, (0, _graphql.Args)("center", {
        type: ()=>_database.Point,
        nullable: true
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _database.Point === "undefined" ? Object : _database.Point
    ]),
    _ts_metadata._("design:returntype", Promise)
], OrderResolver.prototype, "getDriversLocation", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_orderdto.OrderDTO),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_param._(0, (0, _graphql.Args)("review", {
        type: ()=>_submitfeedbackinput.SubmitFeedbackInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _submitfeedbackinput.SubmitFeedbackInput === "undefined" ? Object : _submitfeedbackinput.SubmitFeedbackInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], OrderResolver.prototype, "submitReview", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_orderdto.OrderDTO),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], OrderResolver.prototype, "skipReview", null);
OrderResolver = _ts_decorate._([
    (0, _graphql.Resolver)(()=>_orderdto.OrderDTO),
    _ts_param._(0, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _authenticateduser.UserContextOptional === "undefined" ? Object : _authenticateduser.UserContextOptional,
        typeof _database.SharedOrderService === "undefined" ? Object : _database.SharedOrderService,
        typeof _riderorderservice.RiderOrderService === "undefined" ? Object : _riderorderservice.RiderOrderService,
        typeof _database.DriverRedisService === "undefined" ? Object : _database.DriverRedisService,
        typeof _database.CommonCouponService === "undefined" ? Object : _database.CommonCouponService
    ])
], OrderResolver);


/***/ }),
/* 74 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    CalculateFareDTO: function() {
        return CalculateFareDTO;
    },
    CalculateFareError: function() {
        return CalculateFareError;
    }
});
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
const _servicecategorydto = __webpack_require__(72);
var CalculateFareError;
(function(CalculateFareError) {
    CalculateFareError["RegionUnsupported"] = "REGION_UNSUPPORTED";
    CalculateFareError["NoServiceInRegion"] = "NO_SERVICE_IN_REGION";
})(CalculateFareError || (CalculateFareError = {}));
(0, _graphql.registerEnumType)(CalculateFareError, {
    name: 'CalculateFareError'
});
let CalculateFareDTO = class CalculateFareDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CalculateFareDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CalculateFareDTO.prototype, "distance", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CalculateFareDTO.prototype, "duration", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.Point
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], CalculateFareDTO.prototype, "directions", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _servicecategorydto.ServiceCategoryDTO
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], CalculateFareDTO.prototype, "services", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>CalculateFareError, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CalculateFareDTO.prototype, "error", void 0);
CalculateFareDTO = _ts_decorate._([
    (0, _graphql.ObjectType)()
], CalculateFareDTO);


/***/ }),
/* 75 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CalculateFareInput", ({
    enumerable: true,
    get: function() {
        return CalculateFareInput;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
let CalculateFareInput = class CalculateFareInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.Point
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], CalculateFareInput.prototype, "points", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.TaxiOrderType, {
        defaultValue: _database.TaxiOrderType.Ride
    }),
    _ts_metadata._("design:type", typeof _database.TaxiOrderType === "undefined" ? Object : _database.TaxiOrderType)
], CalculateFareInput.prototype, "orderType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], CalculateFareInput.prototype, "twoWay", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CalculateFareInput.prototype, "couponCode", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            String
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], CalculateFareInput.prototype, "selectedOptionIds", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CalculateFareInput.prototype, "waitTime", void 0);
CalculateFareInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CalculateFareInput);


/***/ }),
/* 76 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateOrderInput", ({
    enumerable: true,
    get: function() {
        return CreateOrderInput;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
let CreateOrderInput = class CreateOrderInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CreateOrderInput.prototype, "serviceId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.TaxiOrderType, {
        defaultValue: _database.TaxiOrderType.Ride
    }),
    _ts_metadata._("design:type", typeof _database.TaxiOrderType === "undefined" ? Object : _database.TaxiOrderType)
], CreateOrderInput.prototype, "orderType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.Point
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], CreateOrderInput.prototype, "points", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            String
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], CreateOrderInput.prototype, "addresses", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateOrderInput.prototype, "intervalMinutes", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], CreateOrderInput.prototype, "twoWay", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateOrderInput.prototype, "waitTime", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            String
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], CreateOrderInput.prototype, "optionIds", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateOrderInput.prototype, "couponCode", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.PaymentMode, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.PaymentMode === "undefined" ? Object : _database.PaymentMode)
], CreateOrderInput.prototype, "paymentMode", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateOrderInput.prototype, "paymentMethodId", void 0);
CreateOrderInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateOrderInput);


/***/ }),
/* 77 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SubmitFeedbackInput", ({
    enumerable: true,
    get: function() {
        return SubmitFeedbackInput;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
let SubmitFeedbackInput = class SubmitFeedbackInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        description: 'Score, a value between 0 to 100'
    }),
    _ts_metadata._("design:type", Number)
], SubmitFeedbackInput.prototype, "score", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SubmitFeedbackInput.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], SubmitFeedbackInput.prototype, "requestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _graphql.ID
        ], {
        defaultValue: []
    }),
    _ts_metadata._("design:type", Array)
], SubmitFeedbackInput.prototype, "parameterIds", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], SubmitFeedbackInput.prototype, "addToFavorite", void 0);
SubmitFeedbackInput = _ts_decorate._([
    (0, _graphql.InputType)()
], SubmitFeedbackInput);


/***/ }),
/* 78 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderOrderService", ({
    enumerable: true,
    get: function() {
        return RiderOrderService;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _nestjsquerygraphql = __webpack_require__(12);
const _axios = __webpack_require__(14);
const _common = __webpack_require__(1);
const _typeorm = __webpack_require__(9);
const _database = __webpack_require__(10);
const _apollo = __webpack_require__(6);
const _graphqlredissubscriptions = __webpack_require__(13);
const _rxjs = __webpack_require__(18);
const _typeorm1 = __webpack_require__(11);
const activeOrderStatuses = [
    _database.OrderStatus.Requested,
    _database.OrderStatus.Found,
    _database.OrderStatus.NotFound,
    _database.OrderStatus.NoCloseFound,
    _database.OrderStatus.DriverAccepted,
    _database.OrderStatus.Arrived,
    _database.OrderStatus.Started,
    _database.OrderStatus.WaitingForReview,
    _database.OrderStatus.WaitingForPrePay,
    _database.OrderStatus.WaitingForPostPay
];
let RiderOrderService = class RiderOrderService {
    constructor(orderRepository, activityRepository, feedbackRepository, paymentRepo, riderService, driverService, orderRedisService, driverRedisService, providerService, driverNotificationService, pubSub, httpService, customerWalletService){
        this.orderRepository = orderRepository;
        this.activityRepository = activityRepository;
        this.feedbackRepository = feedbackRepository;
        this.paymentRepo = paymentRepo;
        this.riderService = riderService;
        this.driverService = driverService;
        this.orderRedisService = orderRedisService;
        this.driverRedisService = driverRedisService;
        this.providerService = providerService;
        this.driverNotificationService = driverNotificationService;
        this.pubSub = pubSub;
        this.httpService = httpService;
        this.customerWalletService = customerWalletService;
    }
    async getCurrentOrder(riderId, relations = []) {
        return this.orderRepository.findOne({
            where: {
                riderId,
                status: (0, _typeorm1.In)(activeOrderStatuses)
            },
            order: {
                id: 'DESC'
            },
            relations
        });
    }
    async getLastOrder(riderId, relations = []) {
        return this.orderRepository.findOne({
            where: {
                riderId
            },
            order: {
                id: 'DESC'
            },
            relations
        });
    }
    async cancelRiderLastOrder(input) {
        const order = await this.getCurrentOrder(input.riderId);
        return this.cancelOrder({
            orderId: order.id,
            reasonId: input.reasonId,
            reason: input.reason
        });
    }
    async cancelOrder(input) {
        await this.orderRepository.update(input.orderId, {
            status: _database.OrderStatus.RiderCanceled,
            finishTimestamp: new Date(),
            costAfterCoupon: 0,
            cancelReasonId: input.reasonId,
            cancelReasonNote: input.reason
        });
        const order = await this.orderRepository.findOneOrFail({
            where: {
                id: input.orderId
            },
            relations: [
                'service',
                'driver',
                'rider'
            ]
        });
        const payments = await this.paymentRepo.find({
            where: {
                userType: 'client',
                userId: order.riderId.toString(),
                status: _database.PaymentStatus.Authorized,
                orderNumber: order.id.toString()
            },
            order: {
                amount: 'DESC'
            }
        });
        if (order.driverId != null && order.service.cancellationTotalFee > 0) {
            const riderCredit = await this.customerWalletService.getRiderCreditInCurrency(order.riderId, order.currency);
            if (riderCredit < order.service.cancellationTotalFee) {
                await (0, _rxjs.firstValueFrom)(this.httpService.get(`${process.env.GATEWAY_SERVER_URL}/capture?id=${payments[0].transactionNumber}&amount=${order.service.cancellationTotalFee}`));
            }
            await Promise.all([
                this.customerWalletService.rechargeWallet({
                    action: _database.TransactionAction.Deduct,
                    deductType: _database.RiderDeductTransactionType.OrderFee,
                    amount: -order.service.cancellationTotalFee,
                    currency: order.currency,
                    riderId: order.riderId,
                    status: _database.TransactionStatus.Done
                }),
                this.driverService.rechargeWallet({
                    action: _database.TransactionAction.Deduct,
                    deductType: _database.DriverDeductTransactionType.Commission,
                    amount: order.service.cancellationDriverShare,
                    currency: order.currency,
                    driverId: order.driverId,
                    status: _database.TransactionStatus.Done
                }),
                this.providerService.rechargeWallet({
                    action: _database.TransactionAction.Recharge,
                    rechargeType: _database.ProviderRechargeTransactionType.Commission,
                    amount: order.service.cancellationTotalFee - order.service.cancellationDriverShare,
                    currency: order.currency
                })
            ]);
        }
        for (const payment of payments){
            await (0, _rxjs.firstValueFrom)(this.httpService.get(`${process.env.GATEWAY_SERVER_URL}/cancel_preauth?id=${payment.transactionNumber}`));
        }
        if (order.driverId == null) {
            this.pubSub.publish('orderRemoved', {
                orderRemoved: order
            });
            this.orderRedisService.expire([
                order.id
            ]);
        } else {
            this.driverNotificationService.canceled(order.driver);
            await this.driverService.updateDriverStatus(order.driverId, _database.DriverStatus.Online);
            _common.Logger.log(`publishing orderUpdated`);
            this.pubSub.publish('orderUpdated', {
                orderUpdated: order
            });
        }
        this.activityRepository.insert({
            requestId: order.id,
            type: _database.RequestActivityType.CanceledByRider
        });
        return order;
    }
    async submitReview(riderId, review) {
        let order = await this.orderRepository.findOneByOrFail({
            id: review.requestId
        });
        if (order.riderId != riderId) {
            throw new _apollo.ForbiddenError('Not Allowed');
        }
        const previousReview = await this.feedbackRepository.findOne({
            where: {
                requestId: order.id
            }
        });
        if (previousReview != null) {
            await this.feedbackRepository.delete(previousReview.id);
        }
        // if (order.reviewId != null) {
        //   await this.feedbackRepository.delete(order.reviewId!);
        // }
        review.score = review.score > 5 ? review.score : review.score * 20;
        await this.feedbackRepository.save({
            ...review,
            driverId: order.driverId,
            requestId: order.id,
            parameters: (review.parameterIds ?? []).map((id)=>({
                    id
                }))
        });
        this.activityRepository.insert({
            requestId: order.id,
            type: _database.RequestActivityType.Reviewed
        });
        const reviews = await this.feedbackRepository.find({
            where: {
                driverId: order.driverId
            }
        });
        const averageRating = Math.round(reviews.reduce((total, next)=>total + next.score, 0) / reviews.length);
        await this.driverService.setRating(order.driverId, averageRating, reviews.length);
        if (review.addToFavorite == true) {
            await this.riderService.addDriverToFavoriteList({
                riderId,
                driverId: order.driverId
            });
        }
        await this.orderRepository.update(order.id, {
            status: _database.OrderStatus.Finished
        });
        order = await this.orderRepository.findOneByOrFail({
            id: review.requestId
        });
        return order;
    }
    async skipReview(userId) {
        const order = await this.getCurrentOrder(userId);
        if (order == null) {
            throw new _apollo.ForbiddenError('Not Allowed');
        }
        await this.orderRepository.update(order.id, {
            status: _database.OrderStatus.Finished
        });
        return order;
    }
    async getActiveOrders(id) {
        const orders = await this.orderRepository.find({
            where: {
                status: (0, _typeorm1.In)(activeOrderStatuses),
                riderId: id
            }
        });
        return Promise.all(orders.map(async (order)=>{
            const currentOrder = {
                order: order
            };
            if (order.driverId != null) {
                const driverLocation = await this.driverRedisService.getDriverCoordinate(order.driverId);
                if (driverLocation != null) {
                    currentOrder.driverLocation = driverLocation;
                }
            }
            return currentOrder;
        }));
    }
};
RiderOrderService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.TaxiOrderEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.RequestActivityEntity)),
    _ts_param._(2, (0, _typeorm.InjectRepository)(_database.FeedbackEntity)),
    _ts_param._(3, (0, _typeorm.InjectRepository)(_database.PaymentEntity)),
    _ts_param._(10, (0, _nestjsquerygraphql.InjectPubSub)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _database.SharedRiderService === "undefined" ? Object : _database.SharedRiderService,
        typeof _database.SharedDriverService === "undefined" ? Object : _database.SharedDriverService,
        typeof _database.OrderRedisService === "undefined" ? Object : _database.OrderRedisService,
        typeof _database.DriverRedisService === "undefined" ? Object : _database.DriverRedisService,
        typeof _database.SharedProviderService === "undefined" ? Object : _database.SharedProviderService,
        typeof _database.DriverNotificationService === "undefined" ? Object : _database.DriverNotificationService,
        typeof _graphqlredissubscriptions.RedisPubSub === "undefined" ? Object : _graphqlredissubscriptions.RedisPubSub,
        typeof _axios.HttpService === "undefined" ? Object : _axios.HttpService,
        typeof _database.SharedCustomerWalletService === "undefined" ? Object : _database.SharedCustomerWalletService
    ])
], RiderOrderService);


/***/ }),
/* 79 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CurrentOrder", ({
    enumerable: true,
    get: function() {
        return CurrentOrder;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
const _orderdto = __webpack_require__(40);
let CurrentOrder = class CurrentOrder {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_orderdto.OrderDTO, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _orderdto.OrderDTO === "undefined" ? Object : _orderdto.OrderDTO)
], CurrentOrder.prototype, "order", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], CurrentOrder.prototype, "driverLocation", void 0);
CurrentOrder = _ts_decorate._([
    (0, _graphql.ObjectType)()
], CurrentOrder);


/***/ }),
/* 80 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "StartRideByQrInput", ({
    enumerable: true,
    get: function() {
        return StartRideByQrInput;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
let StartRideByQrInput = class StartRideByQrInput {
};
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", String)
], StartRideByQrInput.prototype, "token", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            String
        ]),
    _ts_metadata._("design:type", Array)
], StartRideByQrInput.prototype, "addresses", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.Point
        ]),
    _ts_metadata._("design:type", Array)
], StartRideByQrInput.prototype, "points", void 0);
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", Number)
], StartRideByQrInput.prototype, "serviceId", void 0);
_ts_decorate._([
    (0, _graphql.Field)({
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], StartRideByQrInput.prototype, "waitTime", void 0);
_ts_decorate._([
    (0, _graphql.Field)({
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], StartRideByQrInput.prototype, "twoWay", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            String
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], StartRideByQrInput.prototype, "optionIds", void 0);
StartRideByQrInput = _ts_decorate._([
    (0, _graphql.InputType)()
], StartRideByQrInput);


/***/ }),
/* 81 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderSubscriptionService", ({
    enumerable: true,
    get: function() {
        return OrderSubscriptionService;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _nestjsquerygraphql = __webpack_require__(12);
const _common = __webpack_require__(1);
const _graphql = __webpack_require__(8);
const _graphqlredissubscriptions = __webpack_require__(13);
const _orderdto = __webpack_require__(40);
const _driverlocationupdatedto = __webpack_require__(82);
let OrderSubscriptionService = class OrderSubscriptionService {
    constructor(pubSub){
        this.pubSub = pubSub;
    }
    orderUpdated() {
        return this.pubSub.asyncIterator('orderUpdated');
    }
    driverLocationUpdated(_driverId) {
        return this.pubSub.asyncIterator('driverLocationUpdated');
    }
};
_ts_decorate._([
    (0, _graphql.Subscription)(()=>_orderdto.OrderDTO, {
        filter: (payload, variables, context)=>{
            _common.Logger.log(payload.orderUpdated, `orderUpdated payload`);
            _common.Logger.log(`validating order update on rider side: ${payload.orderUpdated.riderId == context.req.extra.user.id}`);
            return context.req.extra.user.id == payload.orderUpdated.riderId;
        },
        resolve: (payload)=>{
            payload.orderUpdated.riderLastSeenMessagesAt = new Date(payload.orderUpdated.riderLastSeenMessagesAt);
            payload.orderUpdated.createdOn = new Date(payload.orderUpdated.createdOn);
            if (payload.orderUpdated.startTimestamp != null) {
                payload.orderUpdated.startTimestamp = new Date(payload.orderUpdated.startTimestamp);
            }
            payload.orderUpdated.expectedTimestamp = new Date(payload.orderUpdated.expectedTimestamp);
            if (payload.orderUpdated.finishTimestamp != null) {
                payload.orderUpdated.finishTimestamp = new Date(payload.orderUpdated.finishTimestamp);
            }
            if (payload.orderUpdated.etaPickup != null) {
                payload.orderUpdated.etaPickup = new Date(payload.orderUpdated.etaPickup);
            }
            payload.orderUpdated.driverLastSeenMessagesAt = new Date(payload.orderUpdated.driverLastSeenMessagesAt);
            payload.orderUpdated.expectedTimestamp = new Date(payload.orderUpdated.expectedTimestamp);
            _common.Logger.log(JSON.stringify(payload), `orderUpdated payload`);
            return payload.orderUpdated;
        }
    }),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", void 0)
], OrderSubscriptionService.prototype, "orderUpdated", null);
_ts_decorate._([
    (0, _graphql.Subscription)(()=>_driverlocationupdatedto.DriverLocationUpdateDTO, {
        filter: (payload, variables, context)=>{
            return context.req.extra.user.id == payload.riderId;
        },
        resolve: (payload)=>{
            return payload.driverLocationUpdated;
        }
    }),
    _ts_param._(0, (0, _graphql.Args)('driverId', {
        type: ()=>_graphql.ID,
        nullable: true,
        description: "This is deprecated, just here so older versions won't break"
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", void 0)
], OrderSubscriptionService.prototype, "driverLocationUpdated", null);
OrderSubscriptionService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _nestjsquerygraphql.InjectPubSub)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _graphqlredissubscriptions.RedisPubSub === "undefined" ? Object : _graphqlredissubscriptions.RedisPubSub
    ])
], OrderSubscriptionService);


/***/ }),
/* 82 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverLocationUpdateDTO", ({
    enumerable: true,
    get: function() {
        return DriverLocationUpdateDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
let DriverLocationUpdateDTO = class DriverLocationUpdateDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], DriverLocationUpdateDTO.prototype, "point", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], DriverLocationUpdateDTO.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], DriverLocationUpdateDTO.prototype, "orderId", void 0);
DriverLocationUpdateDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('DriverLocationUpdate')
], DriverLocationUpdateDTO);


/***/ }),
/* 83 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CouponModule", ({
    enumerable: true,
    get: function() {
        return CouponModule;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _common = __webpack_require__(1);
const _typeorm = __webpack_require__(9);
const _database = __webpack_require__(10);
const _ordermodule = __webpack_require__(69);
const _couponresolver = __webpack_require__(84);
const _couponservice = __webpack_require__(86);
let CouponModule = class CouponModule {
};
CouponModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            (0, _common.forwardRef)(()=>_ordermodule.OrderModule),
            _database.SharedOrderModule,
            _database.CommonCouponModule,
            _typeorm.TypeOrmModule.forFeature([
                _database.TaxiOrderEntity,
                _database.CouponEntity,
                _database.PaymentEntity
            ])
        ],
        providers: [
            _couponservice.CouponService,
            _couponresolver.CouponResolver
        ],
        exports: [
            _couponservice.CouponService
        ]
    })
], CouponModule);


/***/ }),
/* 84 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CouponResolver", ({
    enumerable: true,
    get: function() {
        return CouponResolver;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _common = __webpack_require__(1);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
const _authenticateduser = __webpack_require__(59);
const _accesstokenguard = __webpack_require__(22);
const _orderdto = __webpack_require__(40);
const _coupondto = __webpack_require__(39);
const _giftcarddto = __webpack_require__(85);
let CouponResolver = class CouponResolver {
    constructor(commonCouponService, commonGiftCardService, context){
        this.commonCouponService = commonCouponService;
        this.commonGiftCardService = commonGiftCardService;
        this.context = context;
    }
    async applyCoupon(code, orderId) {
        return this.commonCouponService.applyCoupon(code, parseInt(orderId), this.context.req.user.id);
    }
    async couponInfo(code) {
        return this.commonCouponService.getCouponInfo({
            code,
            riderId: this.context.req.user.id
        });
    }
    async redeemGiftCard(code) {
        return this.commonGiftCardService.redeemGiftCard({
            code,
            userType: 'rider',
            userId: this.context.req.user.id
        });
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_orderdto.OrderDTO),
    _ts_param._(0, (0, _graphql.Args)('code', {
        type: ()=>String
    })),
    _ts_param._(1, (0, _graphql.Args)('orderId', {
        type: ()=>String
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String,
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], CouponResolver.prototype, "applyCoupon", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_coupondto.CouponDTO),
    _ts_param._(0, (0, _graphql.Args)('code', {
        type: ()=>String
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], CouponResolver.prototype, "couponInfo", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_giftcarddto.GiftCardDTO),
    _ts_param._(0, (0, _graphql.Args)('code', {
        type: ()=>String
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], CouponResolver.prototype, "redeemGiftCard", null);
CouponResolver = _ts_decorate._([
    (0, _graphql.Resolver)(()=>_orderdto.OrderDTO),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_param._(2, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _database.CommonCouponService === "undefined" ? Object : _database.CommonCouponService,
        typeof _database.CommonGiftCardService === "undefined" ? Object : _database.CommonGiftCardService,
        typeof _authenticateduser.UserContext === "undefined" ? Object : _authenticateduser.UserContext
    ])
], CouponResolver);


/***/ }),
/* 85 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "GiftCardDTO", ({
    enumerable: true,
    get: function() {
        return GiftCardDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _nestjsquerygraphql = __webpack_require__(12);
let GiftCardDTO = class GiftCardDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], GiftCardDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], GiftCardDTO.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], GiftCardDTO.prototype, "currency", void 0);
GiftCardDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('GiftCard')
], GiftCardDTO);


/***/ }),
/* 86 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CouponService", ({
    enumerable: true,
    get: function() {
        return CouponService;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _common = __webpack_require__(1);
const _database = __webpack_require__(10);
let CouponService = class CouponService {
    constructor(sharedRiderService){
        this.sharedRiderService = sharedRiderService;
    }
};
CouponService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _database.SharedRiderService === "undefined" ? Object : _database.SharedRiderService
    ])
], CouponService);


/***/ }),
/* 87 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FeedbackParameterDTO", ({
    enumerable: true,
    get: function() {
        return FeedbackParameterDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
let FeedbackParameterDTO = class FeedbackParameterDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FeedbackParameterDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], FeedbackParameterDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], FeedbackParameterDTO.prototype, "isGood", void 0);
FeedbackParameterDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('FeedbackParameter')
], FeedbackParameterDTO);


/***/ }),
/* 88 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateOrderInput", ({
    enumerable: true,
    get: function() {
        return UpdateOrderInput;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
let UpdateOrderInput = class UpdateOrderInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.OrderStatus, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.OrderStatus === "undefined" ? Object : _database.OrderStatus)
], UpdateOrderInput.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateOrderInput.prototype, "tipAmount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateOrderInput.prototype, "waitMinutes", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateOrderInput.prototype, "couponCode", void 0);
UpdateOrderInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateOrderInput);


/***/ }),
/* 89 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderOrderQueryService", ({
    enumerable: true,
    get: function() {
        return RiderOrderQueryService;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _nestjsquerycore = __webpack_require__(54);
const _nestjsquerygraphql = __webpack_require__(12);
const _nestjsquerytypeorm = __webpack_require__(21);
const _typeorm = __webpack_require__(9);
const _database = __webpack_require__(10);
const _apollo = __webpack_require__(6);
const _graphqlredissubscriptions = __webpack_require__(13);
const _typeorm1 = __webpack_require__(11);
const _riderorderservice = __webpack_require__(78);
let RiderOrderQueryService = class RiderOrderQueryService extends _nestjsquerytypeorm.TypeOrmQueryService {
    constructor(orderRepository, orderService, commonCouponService, pubSub){
        super(orderRepository);
        this.orderRepository = orderRepository;
        this.orderService = orderService;
        this.commonCouponService = commonCouponService;
        this.pubSub = pubSub;
    }
    async updateOne(id, update) {
        let order = await this.orderRepository.findOne({
            where: {
                id
            },
            relations: {
                service: true,
                coupon: true
            }
        });
        if (update.couponCode != null) {
            await this.commonCouponService.applyCoupon(update.couponCode, id, order.riderId);
        }
        delete update['couponCode'];
        order = await this.orderRepository.findOne({
            where: {
                id
            },
            relations: {
                service: true,
                coupon: true
            }
        });
        if (update.status != null && update.status != _database.OrderStatus.RiderCanceled) {
            throw new _apollo.ForbiddenError('Update status to this is not possible');
        }
        let costAfterCoupon = order.costAfterCoupon;
        if (update.waitMinutes != null) {
            costAfterCoupon = this.commonCouponService.applyCouponOnPrice(order.coupon, order.costBest + order.service.perMinuteWait * update.waitMinutes);
        }
        const result = await super.updateOne(id, {
            ...update,
            costAfterCoupon
        });
        if (update.status != null && update.status == _database.OrderStatus.RiderCanceled) {
            await this.orderService.cancelOrder({
                orderId: id
            });
        }
        this.pubSub.publish('orderUpdated', {
            orderUpdated: result
        });
        return result;
    }
};
RiderOrderQueryService = _ts_decorate._([
    (0, _nestjsquerycore.QueryService)(_database.TaxiOrderEntity),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.TaxiOrderEntity)),
    _ts_param._(3, (0, _nestjsquerygraphql.InjectPubSub)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _riderorderservice.RiderOrderService === "undefined" ? Object : _riderorderservice.RiderOrderService,
        typeof _database.CommonCouponService === "undefined" ? Object : _database.CommonCouponService,
        typeof _graphqlredissubscriptions.RedisPubSub === "undefined" ? Object : _graphqlredissubscriptions.RedisPubSub
    ])
], RiderOrderQueryService);


/***/ }),
/* 90 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderCancelReasonDTO", ({
    enumerable: true,
    get: function() {
        return OrderCancelReasonDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _nestjsquerygraphql = __webpack_require__(12);
const _database = __webpack_require__(10);
let OrderCancelReasonDTO = class OrderCancelReasonDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OrderCancelReasonDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", String)
], OrderCancelReasonDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)({
        filterOnly: true
    }),
    _ts_metadata._("design:type", Boolean)
], OrderCancelReasonDTO.prototype, "isEnabled", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.AnnouncementUserType, {
        filterOnly: true
    }),
    _ts_metadata._("design:type", typeof _database.AnnouncementUserType === "undefined" ? Object : _database.AnnouncementUserType)
], OrderCancelReasonDTO.prototype, "userType", void 0);
OrderCancelReasonDTO = _ts_decorate._([
    (0, _nestjsquerygraphql.Authorize)({
        authorize: (context)=>({
                userType: {
                    eq: _database.AnnouncementUserType.Rider
                },
                isEnabled: true
            })
    }),
    (0, _graphql.ObjectType)('OrderCancelReason')
], OrderCancelReasonDTO);


/***/ }),
/* 91 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ChatService", ({
    enumerable: true,
    get: function() {
        return ChatService;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _nestjsquerycore = __webpack_require__(54);
const _nestjsquerygraphql = __webpack_require__(12);
const _nestjsquerytypeorm = __webpack_require__(21);
const _typeorm = __webpack_require__(9);
const _database = __webpack_require__(10);
const _graphqlredissubscriptions = __webpack_require__(13);
const _typeorm1 = __webpack_require__(11);
const _common = __webpack_require__(1);
let ChatService = class ChatService extends _nestjsquerytypeorm.TypeOrmQueryService {
    constructor(repository, requestRepository, pubSub, driverNotificationService){
        super(repository);
        this.repository = repository;
        this.requestRepository = requestRepository;
        this.pubSub = pubSub;
        this.driverNotificationService = driverNotificationService;
    }
    async createOne(input) {
        let message = await super.createOne({
            ...input,
            sentByDriver: false
        });
        const order = await this.requestRepository.findOne({
            where: {
                id: message.requestId
            },
            relations: {
                rider: true,
                driver: true
            }
        });
        message = await this.getById(message.id);
        this.driverNotificationService.message(order.driver, message);
        _common.Logger.log('newMessageForDriverPublished', JSON.stringify(message));
        this.pubSub.publish('newMessageForDriver', {
            newMessageReceived: message,
            driverId: order.driverId
        });
        return message;
    }
    async updateLastSeenMessagesAt(orderId) {
        await this.requestRepository.update(orderId, {
            riderLastSeenMessagesAt: new Date()
        });
        return true;
    }
};
ChatService = _ts_decorate._([
    (0, _nestjsquerycore.QueryService)(_database.OrderMessageEntity),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.OrderMessageEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.TaxiOrderEntity)),
    _ts_param._(2, (0, _nestjsquerygraphql.InjectPubSub)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _graphqlredissubscriptions.RedisPubSub === "undefined" ? Object : _graphqlredissubscriptions.RedisPubSub,
        typeof _database.DriverNotificationService === "undefined" ? Object : _database.DriverNotificationService
    ])
], ChatService);


/***/ }),
/* 92 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ChatSubscriptionService", ({
    enumerable: true,
    get: function() {
        return ChatSubscriptionService;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _nestjsquerygraphql = __webpack_require__(12);
const _common = __webpack_require__(1);
const _graphql = __webpack_require__(8);
const _graphqlredissubscriptions = __webpack_require__(13);
const _ordermessagedto = __webpack_require__(41);
let ChatSubscriptionService = class ChatSubscriptionService {
    constructor(pubSub){
        this.pubSub = pubSub;
    }
    newMessageReceived() {
        return this.pubSub.asyncIterator('newMessageForRider');
    }
};
_ts_decorate._([
    (0, _graphql.Subscription)(()=>_ordermessagedto.OrderMessageDTO, {
        filter: (payload, variables, context)=>{
            return context.req.extra.user.id == payload.riderId;
        },
        resolve: (payload)=>{
            payload.newMessageReceived.sentAt = new Date(payload.newMessageReceived.sentAt);
            return payload.newMessageReceived;
        }
    }),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", void 0)
], ChatSubscriptionService.prototype, "newMessageReceived", null);
ChatSubscriptionService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _nestjsquerygraphql.InjectPubSub)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _graphqlredissubscriptions.RedisPubSub === "undefined" ? Object : _graphqlredissubscriptions.RedisPubSub
    ])
], ChatSubscriptionService);


/***/ }),
/* 93 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderMessageInput", ({
    enumerable: true,
    get: function() {
        return OrderMessageInput;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
let OrderMessageInput = class OrderMessageInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OrderMessageInput.prototype, "requestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], OrderMessageInput.prototype, "content", void 0);
OrderMessageInput = _ts_decorate._([
    (0, _graphql.InputType)()
], OrderMessageInput);


/***/ }),
/* 94 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ChatResolver", ({
    enumerable: true,
    get: function() {
        return ChatResolver;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _graphql = __webpack_require__(8);
const _chatservice = __webpack_require__(91);
let ChatResolver = class ChatResolver {
    constructor(chatService){
        this.chatService = chatService;
    }
    async updateLastSeenMessagesAt(orderId) {
        return await this.chatService.updateLastSeenMessagesAt(orderId);
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>Boolean),
    _ts_param._(0, (0, _graphql.Args)('orderId', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], ChatResolver.prototype, "updateLastSeenMessagesAt", null);
ChatResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _chatservice.ChatService === "undefined" ? Object : _chatservice.ChatService
    ])
], ChatResolver);


/***/ }),
/* 95 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ComplaintModule", ({
    enumerable: true,
    get: function() {
        return ComplaintModule;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _nestjsquerygraphql = __webpack_require__(12);
const _nestjsquerytypeorm = __webpack_require__(21);
const _common = __webpack_require__(1);
const _database = __webpack_require__(10);
const _accesstokenguard = __webpack_require__(22);
const _complaintqueryservice = __webpack_require__(96);
const _complaintdto = __webpack_require__(97);
const _complaintinput = __webpack_require__(98);
let ComplaintModule = class ComplaintModule {
};
ComplaintModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.TaxiSupportRequestEntity,
                        _database.OperatorEntity
                    ])
                ],
                services: [
                    _complaintqueryservice.ComplaintQueryService
                ],
                pubSub: _database.RedisPubSubProvider.provider(),
                resolvers: [
                    {
                        EntityClass: _database.TaxiSupportRequestEntity,
                        DTOClass: _complaintdto.ComplaintDTO,
                        CreateDTOClass: _complaintinput.ComplaintInput,
                        ServiceClass: _complaintqueryservice.ComplaintQueryService,
                        read: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        guards: [
                            _accesstokenguard.GqlAuthGuard
                        ]
                    }
                ]
            })
        ]
    })
], ComplaintModule);


/***/ }),
/* 96 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ComplaintQueryService", ({
    enumerable: true,
    get: function() {
        return ComplaintQueryService;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _nestjsquerycore = __webpack_require__(54);
const _nestjsquerygraphql = __webpack_require__(12);
const _nestjsquerytypeorm = __webpack_require__(21);
const _typeorm = __webpack_require__(9);
const _database = __webpack_require__(10);
const _graphqlredissubscriptions = __webpack_require__(13);
const _typeorm1 = __webpack_require__(11);
const _complaintdto = __webpack_require__(97);
let ComplaintQueryService = class ComplaintQueryService extends _nestjsquerytypeorm.TypeOrmQueryService {
    constructor(repo, operatorRepo, pubSub){
        super(repo);
        this.operatorRepo = operatorRepo;
        this.pubSub = pubSub;
    }
    async createOne(record) {
        const dto = await super.createOne(record);
        const savedRecord = await this.repo.findOneOrFail({
            where: {
                id: dto.id
            },
            relations: [
                'request',
                'activities'
            ]
        });
        const admins = await this.operatorRepo.find({
            where: {
                enabledNotifications: _database.EnabledNotification.SupportRequest
            }
        });
        this.pubSub.publish('complaintCreated', {
            complaintCreated: savedRecord,
            adminIds: admins.map((admin)=>admin.id)
        });
        return savedRecord;
    }
};
ComplaintQueryService = _ts_decorate._([
    (0, _nestjsquerycore.QueryService)(_complaintdto.ComplaintDTO),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.TaxiSupportRequestEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.OperatorEntity)),
    _ts_param._(2, (0, _nestjsquerygraphql.InjectPubSub)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _graphqlredissubscriptions.RedisPubSub === "undefined" ? Object : _graphqlredissubscriptions.RedisPubSub
    ])
], ComplaintQueryService);


/***/ }),
/* 97 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ComplaintDTO", ({
    enumerable: true,
    get: function() {
        return ComplaintDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
let ComplaintDTO = class ComplaintDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ComplaintDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ComplaintDTO.prototype, "subject", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ComplaintDTO.prototype, "content", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ComplaintStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ComplaintStatus === "undefined" ? Object : _database.ComplaintStatus)
], ComplaintDTO.prototype, "status", void 0);
ComplaintDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Complaint')
], ComplaintDTO);


/***/ }),
/* 98 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ComplaintInput", ({
    enumerable: true,
    get: function() {
        return ComplaintInput;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
let ComplaintInput = class ComplaintInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ComplaintInput.prototype, "requestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ComplaintInput.prototype, "subject", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ComplaintInput.prototype, "content", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], ComplaintInput.prototype, "requestedByDriver", void 0);
ComplaintInput = _ts_decorate._([
    (0, _graphql.InputType)(),
    (0, _nestjsquerygraphql.BeforeCreateOne)((input)=>{
        input.input.requestedByDriver = false;
        return input;
    })
], ComplaintInput);


/***/ }),
/* 99 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverTendencyModule", ({
    enumerable: true,
    get: function() {
        return DriverTendencyModule;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _common = __webpack_require__(1);
const _typeorm = __webpack_require__(9);
const _database = __webpack_require__(10);
const _driver_tendenyservice = __webpack_require__(100);
const _driver_tendencyresolver = __webpack_require__(101);
let DriverTendencyModule = class DriverTendencyModule {
};
DriverTendencyModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.CustomerEntity
            ])
        ],
        providers: [
            _driver_tendenyservice.DriverTendencyService,
            _driver_tendencyresolver.DriverTendencyResolver
        ]
    })
], DriverTendencyModule);


/***/ }),
/* 100 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverTendencyService", ({
    enumerable: true,
    get: function() {
        return DriverTendencyService;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _common = __webpack_require__(1);
const _typeorm = __webpack_require__(9);
const _database = __webpack_require__(10);
const _typeorm1 = __webpack_require__(11);
let DriverTendencyService = class DriverTendencyService {
    constructor(riderRepo){
        this.riderRepo = riderRepo;
    }
    async deleteFavoriteDriver(riderId, driverId) {
        await this.riderRepo.createQueryBuilder().relation(_database.CustomerEntity, 'favoriteDrivers').of(riderId).remove(driverId);
    }
};
DriverTendencyService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.CustomerEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], DriverTendencyService);


/***/ }),
/* 101 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverTendencyResolver", ({
    enumerable: true,
    get: function() {
        return DriverTendencyResolver;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _graphql = __webpack_require__(8);
const _driver_tendenyservice = __webpack_require__(100);
const _common = __webpack_require__(1);
const _authenticateduser = __webpack_require__(59);
const _accesstokenguard = __webpack_require__(22);
let DriverTendencyResolver = class DriverTendencyResolver {
    constructor(driverTendencyService, context){
        this.driverTendencyService = driverTendencyService;
        this.context = context;
    }
    async deleteFavoriteDriver(driverId) {
        await this.driverTendencyService.deleteFavoriteDriver(this.context.req.user.id, driverId);
        return true;
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>Boolean),
    _ts_param._(0, (0, _graphql.Args)('driverId', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], DriverTendencyResolver.prototype, "deleteFavoriteDriver", null);
DriverTendencyResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_param._(1, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _driver_tendenyservice.DriverTendencyService === "undefined" ? Object : _driver_tendenyservice.DriverTendencyService,
        typeof _authenticateduser.UserContext === "undefined" ? Object : _authenticateduser.UserContext
    ])
], DriverTendencyResolver);


/***/ }),
/* 102 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderApiSetupNotFoundController", ({
    enumerable: true,
    get: function() {
        return RiderApiSetupNotFoundController;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _common = __webpack_require__(1);
const _express = __webpack_require__(103);
let RiderApiSetupNotFoundController = class RiderApiSetupNotFoundController {
    main(res) {
        return res.redirect('/admin', 301);
    }
    restart(res) {
        res.send(' Restarting...');
        process.exit(1);
    }
};
_ts_decorate._([
    (0, _common.Get)('/'),
    _ts_param._(0, (0, _common.Res)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _express.Response === "undefined" ? Object : _express.Response
    ]),
    _ts_metadata._("design:returntype", void 0)
], RiderApiSetupNotFoundController.prototype, "main", null);
_ts_decorate._([
    (0, _common.Get)('/restart'),
    _ts_param._(0, (0, _common.Res)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _express.Response === "undefined" ? Object : _express.Response
    ]),
    _ts_metadata._("design:returntype", void 0)
], RiderApiSetupNotFoundController.prototype, "restart", null);
RiderApiSetupNotFoundController = _ts_decorate._([
    (0, _common.Controller)()
], RiderApiSetupNotFoundController);


/***/ }),
/* 103 */
/***/ ((module) => {

module.exports = require("express");

/***/ }),
/* 104 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderAPIController", ({
    enumerable: true,
    get: function() {
        return RiderAPIController;
    }
}));
const _interop_require_default = __webpack_require__(37);
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _common = __webpack_require__(1);
const _database = __webpack_require__(10);
const _express = __webpack_require__(103);
const _path = __webpack_require__(19);
const _platformexpress = __webpack_require__(105);
const _multer = __webpack_require__(106);
const _restjwtauthguard = __webpack_require__(107);
const _typeorm = __webpack_require__(9);
const _typeorm1 = __webpack_require__(11);
const _riderorderservice = __webpack_require__(78);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphqlredissubscriptions = __webpack_require__(13);
const _properurljoin = /*#__PURE__*/ _interop_require_default._(__webpack_require__(38));
let RiderAPIController = class RiderAPIController {
    constructor(sharedCustomerWalletService, sharedOrderService, riderOrderService, cryptoService, pubSub, riderRepository, paymentRepository, mediaRepository){
        this.sharedCustomerWalletService = sharedCustomerWalletService;
        this.sharedOrderService = sharedOrderService;
        this.riderOrderService = riderOrderService;
        this.cryptoService = cryptoService;
        this.pubSub = pubSub;
        this.riderRepository = riderRepository;
        this.paymentRepository = paymentRepository;
        this.mediaRepository = mediaRepository;
    }
    async defaultPath(res) {
        res.send(` Rider API microservice running.\nVersion: 4.0.0`);
    }
    async verifyPayment(query, res) {
        const token = query.token;
        const decrypted = await this.cryptoService.decrypt(token);
        _common.Logger.log('Payment:' + JSON.stringify(decrypted));
        if (decrypted.userType == 'client' || decrypted.userType == 'rider') {
            if (decrypted.status == 'success') {
                await this.sharedCustomerWalletService.rechargeWallet({
                    riderId: decrypted.userId,
                    amount: decrypted.amount,
                    currency: decrypted.currency,
                    refrenceNumber: decrypted.transactionNumber,
                    action: _database.TransactionAction.Recharge,
                    rechargeType: _database.RiderRechargeTransactionType.InAppPayment,
                    paymentGatewayId: decrypted.gatewayId,
                    status: _database.TransactionStatus.Done
                });
                await this.paymentRepository.delete({
                    transactionNumber: decrypted.transactionNumber
                });
                let order = await this.riderOrderService.getCurrentOrder(decrypted.userId);
                if (order?.status == _database.OrderStatus.WaitingForPostPay) {
                    await this.sharedOrderService.finish(order.id);
                    order = await this.riderOrderService.getCurrentOrder(decrypted.userId);
                    this.pubSub.publish('orderUpdated', {
                        orderUpdated: order
                    });
                } else if (order?.status == _database.OrderStatus.WaitingForPrePay) {
                    order = await this.sharedOrderService.processPrePay(order.id);
                    this.pubSub.publish('orderUpdated', {
                        orderUpdated: order
                    });
                }
                if (query.redirect == null || query.redirect == '1') res.redirect(301, `${process.env.RIDER_APPLICATION_ID ?? 'default.rider.redirection'}://`);
                res.send('Transaction successful. Close this page and go back to the app.');
            } else if (decrypted.status == 'authorized') {
                let order = await this.riderOrderService.getCurrentOrder(decrypted.userId);
                if (!order) {
                    res.status(404).send('Order not found');
                }
                order = await this.sharedOrderService.processPrePay(order.id, decrypted.amount);
                this.pubSub.publish('orderUpdated', {
                    orderUpdated: order
                });
                res.redirect(301, `${process.env.RIDER_APPLICATION_ID ?? 'default.rider.redirection'}://`);
                res.send('Transaction successful. Close this page and go back to the app.');
            } else {
                res.redirect(301, `${process.env.RIDER_APPLICATION_ID ?? 'default.rider.redirection'}://`);
                res.send("Transaction wasn't successful. You can go back to the app and redo this.");
            }
        }
    }
    async savedPaymentMethodCharged(body, res) {
        const token = body.token;
        const decrypted = await this.cryptoService.decrypt(token);
        _common.Logger.log('Payment:' + JSON.stringify(decrypted));
        const payment = await this.paymentRepository.findOneOrFail({
            where: {
                transactionNumber: decrypted.transactionNumber
            }
        });
        if (decrypted.status == 'success') {
            await this.sharedCustomerWalletService.rechargeWallet({
                riderId: parseInt(payment.userId),
                amount: payment.amount,
                currency: payment.currency,
                refrenceNumber: payment.transactionNumber,
                action: _database.TransactionAction.Recharge,
                rechargeType: _database.RiderRechargeTransactionType.InAppPayment,
                paymentGatewayId: payment.gatewayId,
                savedPaymentMethodId: payment.savedPaymentMethodId,
                status: _database.TransactionStatus.Done
            });
            await this.paymentRepository.delete({
                transactionNumber: decrypted.transactionNumber
            });
            let order = await this.riderOrderService.getCurrentOrder(parseInt(payment.userId));
            if (order?.status == _database.OrderStatus.WaitingForPostPay) {
                await this.sharedOrderService.finish(order.id);
                order = await this.riderOrderService.getCurrentOrder(parseInt(payment.userId));
                this.pubSub.publish('orderUpdated', {
                    orderUpdated: order
                });
            } else if (order?.status == _database.OrderStatus.WaitingForPrePay) {
                order = await this.sharedOrderService.processPrePay(order.id);
                this.pubSub.publish('orderUpdated', {
                    orderUpdated: order
                });
            }
        }
        res.send('OK');
    }
    async successAttach(req, res) {
        res.redirect(301, `${process.env.RIDER_APPLICATION_ID ?? 'default.rider.redirection'}://`);
    }
    async upload(file, req, res) {
        const insert = await this.mediaRepository.insert({
            address: file.filename
        });
        await this.riderRepository.update(req.user.id, {
            mediaId: insert.raw.insertId
        });
        res.send({
            id: insert.raw.insertId.toString(),
            address: (0, _properurljoin.default)(process.env.CDN_URL, file.filename)
        });
    }
    getError() {
        throw new Error('My first Sentry error!');
    }
};
_ts_decorate._([
    (0, _common.Get)(),
    _ts_param._(0, (0, _common.Res)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _express.Response === "undefined" ? Object : _express.Response
    ]),
    _ts_metadata._("design:returntype", Promise)
], RiderAPIController.prototype, "defaultPath", null);
_ts_decorate._([
    (0, _common.Get)('payment_result'),
    _ts_param._(0, (0, _common.Query)()),
    _ts_param._(1, (0, _common.Res)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Object,
        typeof _express.Response === "undefined" ? Object : _express.Response
    ]),
    _ts_metadata._("design:returntype", Promise)
], RiderAPIController.prototype, "verifyPayment", null);
_ts_decorate._([
    (0, _common.Post)('saved_payment_method_charged'),
    _ts_param._(0, (0, _common.Body)()),
    _ts_param._(1, (0, _common.Res)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Object,
        typeof _express.Response === "undefined" ? Object : _express.Response
    ]),
    _ts_metadata._("design:returntype", Promise)
], RiderAPIController.prototype, "savedPaymentMethodCharged", null);
_ts_decorate._([
    (0, _common.Get)('success_attach'),
    _ts_param._(0, (0, _common.Req)()),
    _ts_param._(1, (0, _common.Res)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _express.Request === "undefined" ? Object : _express.Request,
        typeof _express.Response === "undefined" ? Object : _express.Response
    ]),
    _ts_metadata._("design:returntype", Promise)
], RiderAPIController.prototype, "successAttach", null);
_ts_decorate._([
    (0, _common.Post)('upload_profile'),
    (0, _common.UseGuards)(_restjwtauthguard.RestJwtAuthGuard),
    (0, _common.UseInterceptors)((0, _platformexpress.FileInterceptor)('file', {
        storage: (0, _multer.diskStorage)({
            destination: './uploads',
            filename: (req, file, cb)=>{
                // Generating a unique filename
                const randomName = Array(32).fill(null).map(()=>Math.round(Math.random() * 16).toString(16)).join('');
                cb(null, `${randomName}${(0, _path.extname)(file.originalname)}`);
            }
        }),
        limits: {
            fileSize: 1024 * 1024 * 10
        },
        fileFilter: (req, file, cb)=>{
            // Only allow images
            if (!file.originalname.match(/\.(jpg|jpeg|png|gif)$/)) {
                return cb(new Error('Only image files are allowed!'), false);
            }
            cb(null, true);
        }
    })),
    _ts_param._(0, (0, _common.UploadedFile)()),
    _ts_param._(1, (0, _common.Req)()),
    _ts_param._(2, (0, _common.Res)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof Express === "undefined" || typeof Express.Multer === "undefined" || typeof Express.Multer.File === "undefined" ? Object : Express.Multer.File,
        typeof _express.Request === "undefined" ? Object : _express.Request,
        typeof _express.Response === "undefined" ? Object : _express.Response
    ]),
    _ts_metadata._("design:returntype", Promise)
], RiderAPIController.prototype, "upload", null);
_ts_decorate._([
    (0, _common.Get)('/debug-sentry'),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", void 0)
], RiderAPIController.prototype, "getError", null);
RiderAPIController = _ts_decorate._([
    (0, _common.Controller)(),
    _ts_param._(4, (0, _nestjsquerygraphql.InjectPubSub)()),
    _ts_param._(5, (0, _typeorm.InjectRepository)(_database.CustomerEntity)),
    _ts_param._(6, (0, _typeorm.InjectRepository)(_database.PaymentEntity)),
    _ts_param._(7, (0, _typeorm.InjectRepository)(_database.MediaEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _database.SharedCustomerWalletService === "undefined" ? Object : _database.SharedCustomerWalletService,
        typeof _database.SharedOrderService === "undefined" ? Object : _database.SharedOrderService,
        typeof _riderorderservice.RiderOrderService === "undefined" ? Object : _riderorderservice.RiderOrderService,
        typeof _database.CryptoService === "undefined" ? Object : _database.CryptoService,
        typeof _graphqlredissubscriptions.RedisPubSub === "undefined" ? Object : _graphqlredissubscriptions.RedisPubSub,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], RiderAPIController);


/***/ }),
/* 105 */
/***/ ((module) => {

module.exports = require("@nestjs/platform-express");

/***/ }),
/* 106 */
/***/ ((module) => {

module.exports = require("multer");

/***/ }),
/* 107 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RestJwtAuthGuard", ({
    enumerable: true,
    get: function() {
        return RestJwtAuthGuard;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _common = __webpack_require__(1);
const _passport = __webpack_require__(23);
let RestJwtAuthGuard = class RestJwtAuthGuard extends (0, _passport.AuthGuard)('jwt') {
    canActivate(context) {
        return super.canActivate(context);
    }
    handleRequest(err, user) {
        if (err || !user) {
            throw err || new _common.UnauthorizedException('REST API Auth blocked request.');
        }
        return user;
    }
};
RestJwtAuthGuard = _ts_decorate._([
    (0, _common.Injectable)()
], RestJwtAuthGuard);


/***/ }),
/* 108 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SOSModule", ({
    enumerable: true,
    get: function() {
        return SOSModule;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _common = __webpack_require__(1);
const _typeorm = __webpack_require__(9);
const _database = __webpack_require__(10);
const _sosresolver = __webpack_require__(109);
const _sosservice = __webpack_require__(111);
let SOSModule = class SOSModule {
};
SOSModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.SOSEntity,
                _database.OperatorEntity
            ])
        ],
        providers: [
            _sosservice.SOSService,
            _sosresolver.SOSResolver,
            _database.RedisPubSubProvider.provider()
        ]
    })
], SOSModule);


/***/ }),
/* 109 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SOSResolver", ({
    enumerable: true,
    get: function() {
        return SOSResolver;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _common = __webpack_require__(1);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
const _accesstokenguard = __webpack_require__(22);
const _sosdto = __webpack_require__(110);
const _sosservice = __webpack_require__(111);
let SOSResolver = class SOSResolver {
    constructor(sosService){
        this.sosService = sosService;
    }
    async sosSignal(requestId, location) {
        return this.sosService.submitSOS({
            location,
            requestId
        });
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_sosdto.SOSDTO),
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    _ts_param._(0, (0, _graphql.Args)('orderId', {
        type: ()=>_graphql.ID
    })),
    _ts_param._(1, (0, _graphql.Args)('location', {
        type: ()=>_database.Point,
        nullable: true
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number,
        typeof _database.Point === "undefined" ? Object : _database.Point
    ]),
    _ts_metadata._("design:returntype", Promise)
], SOSResolver.prototype, "sosSignal", null);
SOSResolver = _ts_decorate._([
    (0, _graphql.Resolver)(()=>_sosdto.SOSDTO),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _sosservice.SOSService === "undefined" ? Object : _sosservice.SOSService
    ])
], SOSResolver);


/***/ }),
/* 110 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SOSDTO", ({
    enumerable: true,
    get: function() {
        return SOSDTO;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _nestjsquerygraphql = __webpack_require__(12);
const _graphql = __webpack_require__(8);
let SOSDTO = class SOSDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], SOSDTO.prototype, "id", void 0);
SOSDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('SOS')
], SOSDTO);


/***/ }),
/* 111 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SOSService", ({
    enumerable: true,
    get: function() {
        return SOSService;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _nestjsquerygraphql = __webpack_require__(12);
const _common = __webpack_require__(1);
const _typeorm = __webpack_require__(9);
const _database = __webpack_require__(10);
const _graphqlredissubscriptions = __webpack_require__(13);
const _typeorm1 = __webpack_require__(11);
let SOSService = class SOSService {
    constructor(sosRepository, operatorRepo, pubSub){
        this.sosRepository = sosRepository;
        this.operatorRepo = operatorRepo;
        this.pubSub = pubSub;
    }
    async submitSOS(input) {
        const dto = await this.sosRepository.save({
            submittedByRider: true,
            ...input
        });
        const savedRecord = await this.sosRepository.findOneOrFail({
            where: {
                id: dto.id
            },
            relations: {
                request: true,
                activities: true
            }
        });
        const admins = await this.operatorRepo.find({
            where: {
                enabledNotifications: _database.EnabledNotification.SOS
            }
        });
        this.pubSub.publish('sosCreated', {
            sosCreated: savedRecord,
            adminIds: admins.map((admin)=>admin.id)
        });
        return savedRecord;
    }
};
SOSService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.SOSEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.OperatorEntity)),
    _ts_param._(2, (0, _nestjsquerygraphql.InjectPubSub)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _graphqlredissubscriptions.RedisPubSub === "undefined" ? Object : _graphqlredissubscriptions.RedisPubSub
    ])
], SOSService);


/***/ }),
/* 112 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "WalletModule", ({
    enumerable: true,
    get: function() {
        return WalletModule;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _nestjsquerygraphql = __webpack_require__(12);
const _nestjsquerytypeorm = __webpack_require__(21);
const _common = __webpack_require__(1);
const _database = __webpack_require__(10);
const _accesstokenguard = __webpack_require__(22);
const _paymentgatewaydto = __webpack_require__(44);
const _ridertransactiondto = __webpack_require__(56);
const _riderwalletdto = __webpack_require__(55);
const _walletresolver = __webpack_require__(113);
const _axios = __webpack_require__(14);
const _savedpaymentmethoddto = __webpack_require__(49);
const _walletservice = __webpack_require__(115);
let WalletModule = class WalletModule {
};
WalletModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _axios.HttpModule,
            _database.CommonCouponModule,
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.RiderTransactionEntity,
                        _database.RiderWalletEntity,
                        _database.PaymentGatewayEntity,
                        _database.SavedPaymentMethodEntity,
                        _database.CustomerEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.RiderTransactionEntity,
                        DTOClass: _ridertransactiondto.RiderTransactionDTO,
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _accesstokenguard.GqlAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.RiderWalletEntity,
                        DTOClass: _riderwalletdto.RiderWalletDTO,
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _accesstokenguard.GqlAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE
                    },
                    {
                        EntityClass: _database.PaymentGatewayEntity,
                        DTOClass: _paymentgatewaydto.PaymentGatewayDTO,
                        read: {
                            disabled: true
                        },
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE
                    },
                    {
                        EntityClass: _database.SavedPaymentMethodEntity,
                        DTOClass: _savedpaymentmethoddto.SavedPaymentMethodDto,
                        read: {
                            disabled: true
                        },
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        guards: [
                            _accesstokenguard.GqlAuthGuard
                        ]
                    }
                ]
            })
        ],
        providers: [
            _walletresolver.WalletResolver,
            _walletservice.WalletService,
            _database.CryptoService
        ]
    })
], WalletModule);


/***/ }),
/* 113 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "WalletResolver", ({
    enumerable: true,
    get: function() {
        return WalletResolver;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _common = __webpack_require__(1);
const _graphql = __webpack_require__(8);
const _typeorm = __webpack_require__(9);
const _typeorm1 = __webpack_require__(11);
const _authenticateduser = __webpack_require__(59);
const _accesstokenguard = __webpack_require__(22);
const _topupwalletinput = __webpack_require__(114);
const _database = __webpack_require__(10);
const _axios = __webpack_require__(14);
const _rxjs = __webpack_require__(18);
const _walletservice = __webpack_require__(115);
const _setup_payment_methoddto = __webpack_require__(116);
const _giftcarddto = __webpack_require__(85);
const _savedpaymentmethoddto = __webpack_require__(49);
const _paymentgatewaydto = __webpack_require__(44);
let WalletResolver = class WalletResolver {
    constructor(customerRepo, savedPaymentMethodRepo, gatewayRepo, cryptoService, commongGiftCardService, context, httpService, walletService){
        this.customerRepo = customerRepo;
        this.savedPaymentMethodRepo = savedPaymentMethodRepo;
        this.gatewayRepo = gatewayRepo;
        this.cryptoService = cryptoService;
        this.commongGiftCardService = commongGiftCardService;
        this.context = context;
        this.httpService = httpService;
        this.walletService = walletService;
    }
    async topUpWallet(input, shouldPreauth) {
        const paymentLink = await this.walletService.getPaymentLink({
            paymentMode: input.paymentMode,
            gatewayId: input.gatewayId,
            userId: this.context.req.user.id,
            amount: input.amount,
            currency: input.currency,
            orderNumber: input.orderNumber,
            shouldPreauth
        });
        _common.Logger.log(JSON.stringify(paymentLink), 'paymentLink');
        return {
            status: (0, _topupwalletinput.IntentResultToTopUpWalletStatus)(paymentLink.status),
            url: paymentLink.url
        };
    }
    async savedPaymentMethods() {
        _common.Logger.log(`Fetching saved payment methods for rider ID: ${this.context.req.user.id}`, 'WalletResolver');
        const savedMethods = await this.walletService.getSavedPaymentMethods({
            userId: this.context.req.user.id
        });
        return savedMethods.map((method)=>({
                ...method,
                riderId: method.riderId ?? this.context.req.user.id
            }));
    }
    // @Query(() => [PaymentGatewayDTO])
    // async savableGateways(): Promise<PaymentGatewayDTO[]> {
    //   const result = await this.gatewayRepo.find({
    //     where: { type: In([PaymentGatewayType.Stripe]) },
    //   });
    //   return result;
    // }
    async setupPaymentMethod(gatewayId) {
        const user = await this.customerRepo.findOneOrFail({
            where: {
                id: this.context.req.user.id
            },
            relations: {
                wallets: true
            }
        });
        const walletsLargestBalance = user.wallets.length > 0 ? user.wallets.reduce((prev, current)=>{
            return prev.balance > current.balance ? prev : current;
        }) : {
            balance: 0,
            currency: 'USD'
        };
        const obj = {
            gatewayId: gatewayId.toString(),
            userType: 'rider',
            currency: walletsLargestBalance.currency ?? 'USD',
            userId: this.context.req.user.id.toString(),
            returnUrl: `${process.env.RIDER_APPLICATION_ID ?? 'default.rider.redirection'}://`
        };
        const encrypted = await this.cryptoService.encrypt(JSON.stringify(obj));
        const result = await (0, _rxjs.firstValueFrom)(this.httpService.post(`${process.env.GATEWAY_SERVER_URL}/setup_saved_payment_method`, {
            token: encrypted
        }));
        _common.Logger.log(JSON.stringify(result.data), 'setupPaymentMethod');
        return result.data;
    }
    async redeemGiftCard(code) {
        return this.commongGiftCardService.redeemGiftCard({
            code,
            userId: this.context.req.user.id,
            userType: 'rider'
        });
    }
    async markPaymentMethodAsDefault(savedPaymentMethodId) {
        await this.walletService.markPaymentMethodAsDefault({
            userId: this.context.req.user.id,
            savedPaymentMethodId
        });
        return this.savedPaymentMethodRepo.find({
            where: {
                riderId: this.context.req.user.id
            }
        });
    }
    async deleteSavedPaymentMethod(savedPaymentMethodId) {
        await this.walletService.deletePaymentMethod({
            userId: this.context.req.user.id,
            savedPaymentMethodId
        });
        return this.savedPaymentMethodRepo.find({
            where: {
                riderId: this.context.req.user.id
            }
        });
    }
    async paymentGateways() {
        let result = await this.gatewayRepo.find({
            where: {
                enabled: true
            }
        });
        result = result.map((item)=>{
            item['linkMethod'] = item.type == _database.PaymentGatewayType.Stripe ? _database.GatewayLinkMethod.redirect : _database.GatewayLinkMethod.none;
            return item;
        });
        return result;
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_topupwalletinput.TopUpWalletResponse),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_topupwalletinput.TopUpWalletInput
    })),
    _ts_param._(1, (0, _graphql.Args)('shouldPreauth', {
        type: ()=>Boolean,
        nullable: true
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _topupwalletinput.TopUpWalletInput === "undefined" ? Object : _topupwalletinput.TopUpWalletInput,
        Boolean
    ]),
    _ts_metadata._("design:returntype", Promise)
], WalletResolver.prototype, "topUpWallet", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _savedpaymentmethoddto.SavedPaymentMethodDto
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], WalletResolver.prototype, "savedPaymentMethods", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_setup_payment_methoddto.SetupPaymentMethodDto),
    _ts_param._(0, (0, _graphql.Args)('gatewayId', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], WalletResolver.prototype, "setupPaymentMethod", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_giftcarddto.GiftCardDTO),
    _ts_param._(0, (0, _graphql.Args)('code', {
        type: ()=>String
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], WalletResolver.prototype, "redeemGiftCard", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>[
            _savedpaymentmethoddto.SavedPaymentMethodDto
        ]),
    _ts_param._(0, (0, _graphql.Args)('id', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], WalletResolver.prototype, "markPaymentMethodAsDefault", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>[
            _savedpaymentmethoddto.SavedPaymentMethodDto
        ]),
    _ts_param._(0, (0, _graphql.Args)('id', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], WalletResolver.prototype, "deleteSavedPaymentMethod", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _paymentgatewaydto.PaymentGatewayDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], WalletResolver.prototype, "paymentGateways", null);
WalletResolver = _ts_decorate._([
    (0, _common.UseGuards)(_accesstokenguard.GqlAuthGuard),
    (0, _graphql.Resolver)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.CustomerEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.SavedPaymentMethodEntity)),
    _ts_param._(2, (0, _typeorm.InjectRepository)(_database.PaymentGatewayEntity)),
    _ts_param._(5, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _database.CryptoService === "undefined" ? Object : _database.CryptoService,
        typeof _database.CommonGiftCardService === "undefined" ? Object : _database.CommonGiftCardService,
        typeof _authenticateduser.UserContext === "undefined" ? Object : _authenticateduser.UserContext,
        typeof _axios.HttpService === "undefined" ? Object : _axios.HttpService,
        typeof _walletservice.WalletService === "undefined" ? Object : _walletservice.WalletService
    ])
], WalletResolver);


/***/ }),
/* 114 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    IntentResultToTopUpWalletStatus: function() {
        return IntentResultToTopUpWalletStatus;
    },
    TopUpWalletInput: function() {
        return TopUpWalletInput;
    },
    TopUpWalletResponse: function() {
        return TopUpWalletResponse;
    },
    TopUpWalletStatus: function() {
        return TopUpWalletStatus;
    },
    TopUpWalletStatusToIntentResult: function() {
        return TopUpWalletStatusToIntentResult;
    }
});
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
const _database = __webpack_require__(10);
var TopUpWalletStatus;
(function(TopUpWalletStatus) {
    TopUpWalletStatus["OK"] = "ok";
    TopUpWalletStatus["Redirect"] = "redirect";
    TopUpWalletStatus["Failed"] = "failed";
})(TopUpWalletStatus || (TopUpWalletStatus = {}));
(0, _graphql.registerEnumType)(TopUpWalletStatus, {
    name: 'TopUpWalletStatus'
});
let TopUpWalletInput = class TopUpWalletInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], TopUpWalletInput.prototype, "gatewayId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], TopUpWalletInput.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], TopUpWalletInput.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], TopUpWalletInput.prototype, "token", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], TopUpWalletInput.prototype, "pin", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], TopUpWalletInput.prototype, "otp", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], TopUpWalletInput.prototype, "transactionId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], TopUpWalletInput.prototype, "orderNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.PaymentMode, {
        defaultValue: _database.PaymentMode.PaymentGateway
    }),
    _ts_metadata._("design:type", typeof _database.PaymentMode === "undefined" ? Object : _database.PaymentMode)
], TopUpWalletInput.prototype, "paymentMode", void 0);
TopUpWalletInput = _ts_decorate._([
    (0, _graphql.InputType)()
], TopUpWalletInput);
let TopUpWalletResponse = class TopUpWalletResponse {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>TopUpWalletStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], TopUpWalletResponse.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], TopUpWalletResponse.prototype, "error", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], TopUpWalletResponse.prototype, "url", void 0);
TopUpWalletResponse = _ts_decorate._([
    (0, _graphql.ObjectType)()
], TopUpWalletResponse);
const TopUpWalletStatusToIntentResultMap = new Map([
    [
        "ok",
        'success'
    ],
    [
        "redirect",
        'redirect'
    ],
    [
        "failed",
        'failed'
    ]
]);
const TopUpWalletStatusToIntentResult = (status)=>{
    return TopUpWalletStatusToIntentResultMap.get(status);
};
const IntentResultToTopUpWalletStatusMap = new Map([
    [
        'success',
        "ok"
    ],
    [
        'redirect',
        "redirect"
    ],
    [
        'failed',
        "failed"
    ]
]);
const IntentResultToTopUpWalletStatus = (status)=>{
    return IntentResultToTopUpWalletStatusMap.get(status);
};


/***/ }),
/* 115 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "WalletService", ({
    enumerable: true,
    get: function() {
        return WalletService;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _ts_param = __webpack_require__(29);
const _common = __webpack_require__(1);
const _typeorm = __webpack_require__(9);
const _database = __webpack_require__(10);
const _typeorm1 = __webpack_require__(11);
const _axios = __webpack_require__(14);
const _rxjs = __webpack_require__(18);
let WalletService = class WalletService {
    constructor(gatewayRepo, savedPaymentMethodRepo, customerRepository, httpService){
        this.gatewayRepo = gatewayRepo;
        this.savedPaymentMethodRepo = savedPaymentMethodRepo;
        this.customerRepository = customerRepository;
        this.httpService = httpService;
    }
    async getPaymentLink(input) {
        if (input.paymentMode === _database.PaymentMode.PaymentGateway) {
            const link = await this.getLinkForPaymentGateway(input);
            return link;
        } else if (input.paymentMode == _database.PaymentMode.SavedPaymentMethod) {
            const link = await this.chargeSavedPaymentMethod(input);
            return link;
        }
    }
    async getSavedPaymentMethods(input) {
        const defaultSavedPaymentMethod = await this.customerRepository.findOne({
            where: {
                id: input.userId
            }
        });
        const savedPaymentMethods = await this.savedPaymentMethodRepo.find({
            where: {
                riderId: input.userId,
                isEnabled: true
            },
            order: {
                isDefault: 'DESC'
            }
        });
        if (defaultSavedPaymentMethod?.defaultSavedPaymentMethodId) {
            const defaultPaymentMethod = savedPaymentMethods.findIndex((method)=>method.id === defaultSavedPaymentMethod.defaultSavedPaymentMethodId);
            // set all other payment methods to false
            savedPaymentMethods.forEach((method)=>{
                method.isDefault = false;
            });
            if (defaultPaymentMethod >= 0) {
                savedPaymentMethods[defaultPaymentMethod].isDefault = true;
            }
        }
        return savedPaymentMethods;
    }
    async getLinkForPaymentGateway(input) {
        await this.gatewayRepo.findOneByOrFail({
            id: input.gatewayId
        });
        const body = {
            userId: input.userId.toString(),
            userType: 'rider',
            paymentGatewayId: input.gatewayId,
            amount: input.amount.toString(),
            currency: input.currency,
            orderNumber: input.orderNumber,
            shouldPreauth: input.shouldPreauth == true ? '1' : '0',
            returnUrl: `${process.env.RIDER_SERVER_URL}/payment_result`
        };
        const result = await (0, _rxjs.firstValueFrom)(this.httpService.post(`${process.env.GATEWAY_SERVER_URL}/create_payment_link`, body));
        return {
            status: result.data.status,
            url: result.data.url
        };
    }
    async chargeSavedPaymentMethod(input) {
        const savedPaymentMethod = await this.savedPaymentMethodRepo.findOneByOrFail({
            id: input.gatewayId
        });
        const body = {
            userId: input.userId.toString(),
            userType: 'rider',
            savedPaymentMethodId: savedPaymentMethod.id.toString(),
            amount: input.amount,
            currency: input.currency,
            orderNumber: input.orderNumber,
            returnUrl: `${process.env.RIDER_SERVER_URL}/saved_payment_method_charged`
        };
        const result = await (0, _rxjs.firstValueFrom)(this.httpService.post(`${process.env.GATEWAY_SERVER_URL}/charge_saved_payment_method`, body));
        return result.data;
    }
    async markPaymentMethodAsDefault(input) {
        await this.savedPaymentMethodRepo.findOneByOrFail({
            id: input.savedPaymentMethodId,
            riderId: input.userId
        });
        await this.savedPaymentMethodRepo.update({
            riderId: input.userId
        }, {
            isDefault: false
        });
        await this.savedPaymentMethodRepo.update({
            id: input.savedPaymentMethodId
        }, {
            isDefault: true
        });
        await this.customerRepository.update({
            id: input.userId
        }, {
            defaultSavedPaymentMethodId: input.savedPaymentMethodId
        });
    }
    deletePaymentMethod(input) {
        return this.savedPaymentMethodRepo.delete({
            id: input.savedPaymentMethodId,
            riderId: input.userId
        });
    }
};
WalletService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.PaymentGatewayEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.SavedPaymentMethodEntity)),
    _ts_param._(2, (0, _typeorm.InjectRepository)(_database.CustomerEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _axios.HttpService === "undefined" ? Object : _axios.HttpService
    ])
], WalletService);


/***/ }),
/* 116 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SetupPaymentMethodDto", ({
    enumerable: true,
    get: function() {
        return SetupPaymentMethodDto;
    }
}));
const _ts_decorate = __webpack_require__(4);
const _ts_metadata = __webpack_require__(5);
const _graphql = __webpack_require__(8);
let SetupPaymentMethodDto = class SetupPaymentMethodDto {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SetupPaymentMethodDto.prototype, "url", void 0);
SetupPaymentMethodDto = _ts_decorate._([
    (0, _graphql.ObjectType)('SetupPaymentMethod')
], SetupPaymentMethodDto);


/***/ }),
/* 117 */
/***/ ((module) => {

module.exports = require("@sentry/nestjs/setup");

/***/ }),
/* 118 */
/***/ ((module) => {

module.exports = require("firebase-admin/app");

/***/ }),
/* 119 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

// Import with `const Sentry = require("@sentry/nestjs");` if you are using CJS

Object.defineProperty(exports, "__esModule", ({
    value: true
}));
const _interop_require_wildcard = __webpack_require__(120);
const _apollo = __webpack_require__(6);
const _nestjs = /*#__PURE__*/ _interop_require_wildcard._(__webpack_require__(121));
const _profilingnode = __webpack_require__(122);
const _dotenv = __webpack_require__(123);
(0, _dotenv.config)({
    path: __dirname + '/.env'
});
_nestjs.init({
    dsn: process.env.SENTRY_DSN_RIDER_API,
    integrations: [
        (0, _profilingnode.nodeProfilingIntegration)()
    ],
    tracesSampleRate: 1.0,
    sendDefaultPii: true,
    beforeSend (event, hint) {
        const error = hint.originalException;
        // Don't send ForbiddenError to Sentry
        if (error instanceof _apollo.ForbiddenError) {
            return null;
        }
        return event;
    }
});


/***/ }),
/* 120 */
/***/ ((module) => {

module.exports = require("@swc/helpers/_/_interop_require_wildcard");

/***/ }),
/* 121 */
/***/ ((module) => {

module.exports = require("@sentry/nestjs");

/***/ }),
/* 122 */
/***/ ((module) => {

module.exports = require("@sentry/profiling-node");

/***/ }),
/* 123 */
/***/ ((module) => {

module.exports = require("dotenv");

/***/ })
/******/ 	]);
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other modules in the chunk.
(() => {
var exports = __webpack_exports__;

Object.defineProperty(exports, "__esModule", ({
    value: true
}));
const _common = __webpack_require__(1);
const _core = __webpack_require__(2);
const _riderapimodule = __webpack_require__(3);
const _firebaseadmin = __webpack_require__(16);
const _app = __webpack_require__(118);
__webpack_require__(119);
const _licenseverify = __webpack_require__(17);
async function bootstrap() {
    const app = await _core.NestFactory.create(_riderapimodule.RiderAPIModule.register());
    const port = parseInt(process.env.RIDER_API_PORT || '3000', 10);
    app.enableShutdownHooks();
    app.enableCors();
    const config = await (0, _licenseverify.getConfig)(process.env.NODE_ENV ?? 'production');
    if (config) {
        (0, _app.initializeApp)({
            credential: _firebaseadmin.credential.cert(`${process.cwd()}/config/${config.firebaseProjectPrivateKey}`)
        });
    }
    await app.listen(port, ()=>{
        _common.Logger.log('Listening at http://localhost:' + port, 'Rider API');
    });
}
bootstrap();

})();

/******/ })()
;
//# sourceMappingURL=main.js.map