/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ([
/* 0 */,
/* 1 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
const _interop_require_wildcard = __webpack_require__(2);
const _apollo = __webpack_require__(3);
const _nestjs = /*#__PURE__*/ _interop_require_wildcard._(__webpack_require__(4));
const _profilingnode = __webpack_require__(5);
const _dotenv = __webpack_require__(6);
(0, _dotenv.config)({
    path: __dirname + '/.env'
});
_nestjs.init({
    dsn: process.env.SENTRY_DSN_ADMIN_API,
    integrations: [
        (0, _profilingnode.nodeProfilingIntegration)()
    ],
    tracesSampleRate: 1.0,
    sendDefaultPii: true,
    beforeSend (event, hint) {
        const error = hint.originalException;
        // Don't send ForbiddenError to Sentry
        if (error instanceof _apollo.ForbiddenError) {
            return null;
        }
        return event;
    }
});


/***/ }),
/* 2 */
/***/ ((module) => {

module.exports = require("@swc/helpers/_/_interop_require_wildcard");

/***/ }),
/* 3 */
/***/ ((module) => {

module.exports = require("@nestjs/apollo");

/***/ }),
/* 4 */
/***/ ((module) => {

module.exports = require("@sentry/nestjs");

/***/ }),
/* 5 */
/***/ ((module) => {

module.exports = require("@sentry/profiling-node");

/***/ }),
/* 6 */
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),
/* 7 */
/***/ ((module) => {

module.exports = require("@nestjs/common");

/***/ }),
/* 8 */
/***/ ((module) => {

module.exports = require("@nestjs/core");

/***/ }),
/* 9 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AdminAPIModule", ({
    enumerable: true,
    get: function() {
        return AdminAPIModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _apollo = __webpack_require__(3);
const _axios = __webpack_require__(12);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _nestjsredis = __webpack_require__(20);
const _path = __webpack_require__(24);
const _accountingmodule = __webpack_require__(25);
const _addressmodule = __webpack_require__(45);
const _adminapisetupnotfoundcontroller = __webpack_require__(47);
const _adminapicontroller = __webpack_require__(53);
const _announcementmodule = __webpack_require__(56);
const _authmodule = __webpack_require__(60);
const _jwtstrategy = __webpack_require__(79);
const _carmodule = __webpack_require__(82);
const _configurationmodule = __webpack_require__(88);
const _couponmodule = __webpack_require__(94);
const _drivermodule = __webpack_require__(143);
const _feedbackmodule = __webpack_require__(153);
const _fleetmodule = __webpack_require__(155);
const _operatormodule = __webpack_require__(62);
const _ordermodule = __webpack_require__(165);
const _paymentgatewaymodule = __webpack_require__(179);
const _payoutmodule = __webpack_require__(182);
const _regionmodule = __webpack_require__(227);
const _customermodule = __webpack_require__(231);
const _servicemodule = __webpack_require__(239);
const _uploadmodule = __webpack_require__(247);
const _sosmodule = __webpack_require__(248);
const _rewardmodule = __webpack_require__(258);
const _giftcardmodule = __webpack_require__(260);
const _smsprovidermodule = __webpack_require__(268);
const _shopmodule = __webpack_require__(276);
const _parkingmodule = __webpack_require__(317);
const _insightsmodule = __webpack_require__(348);
const _zonepricemodule = __webpack_require__(400);
const _driverdocumentmodule = __webpack_require__(404);
const _drivershiftrulemodule = __webpack_require__(408);
const _licenseverify = __webpack_require__(22);
const _taxisupportrequestmodule = __webpack_require__(411);
const _notificationmodule = __webpack_require__(418);
const _platformoverviewmodule = __webpack_require__(423);
const _setup = __webpack_require__(428);
const _core = __webpack_require__(8);
const _configmodule = __webpack_require__(429);
let AdminAPIModule = class AdminAPIModule {
    constructor(licenseVerifyService){
        this.licenseVerifyService = licenseVerifyService;
    }
    async onModuleInit() {
        const license = await this.licenseVerifyService.verifyLicense();
        _common.Logger.log(license, 'AdminAPIModule.onModuleInit.license');
        _common.Logger.log(process.env.NODE_ENV ?? 'prod', 'AdminAPIModule.onModuleInit.env');
    }
    static async register() {
        if (await (0, _licenseverify.getConfig)(process.env.NODE_ENV ?? 'production')) {
            return {
                module: AdminAPIModule,
                imports: [
                    _database.DatabaseModule,
                    _licenseverify.LicenseVerifyModule,
                    _platformoverviewmodule.PlatformOverviewModule,
                    _graphql.GraphQLModule.forRoot({
                        driver: _apollo.ApolloDriver,
                        context: ({ req, res, extra })=>{
                            return extra && extra.user ? {
                                req: req,
                                res: res,
                                user: extra.user
                            } : {
                                req: req,
                                res: res
                            };
                        },
                        subscriptions: {
                            'graphql-ws': {
                                onConnect: async (ctx)=>{
                                    const token = ctx.connectionParams?.['authToken'] || undefined;
                                    _common.Logger.log(token, 'RiderAPIModule.onConnect.token');
                                    if (!token) {
                                        throw new Error('Missing auth token!');
                                    }
                                    const user = await (0, _jwtstrategy.validateToken)(token);
                                    _common.Logger.log(user, 'RiderAPIModule.onConnect.user');
                                    ctx.extra = {
                                        user
                                    };
                                    return {
                                        user
                                    };
                                },
                                onDisconnect: ()=>{
                                    _common.Logger.log('connection disconnected', 'GraphQL');
                                },
                                onSubscribe: ()=>{
                                    _common.Logger.log(`subscription started`, 'GraphQL');
                                }
                            }
                        },
                        autoSchemaFile: (0, _path.join)(process.cwd(), 'apps/admin-frontend/lib/schema.graphql')
                    }),
                    _typeorm.TypeOrmModule.forFeature(_database.entities),
                    _servicemodule.ServiceModule,
                    _operatormodule.OperatorModule,
                    _customermodule.CustomerModule,
                    _insightsmodule.InsightsModule,
                    _drivermodule.DriverModule,
                    _driverdocumentmodule.DriverDocumentModule,
                    _drivershiftrulemodule.DriverShiftRuleModule,
                    _fleetmodule.FleetModule,
                    _ordermodule.OrderModule,
                    _announcementmodule.AnnouncementModule,
                    _couponmodule.CouponModule,
                    _giftcardmodule.GiftCardModule,
                    _accountingmodule.AccountingModule,
                    _regionmodule.RegionModule,
                    _paymentgatewaymodule.PaymentGatewayModule,
                    _carmodule.CarModule,
                    _feedbackmodule.FeedbackModule,
                    _addressmodule.AddressModule,
                    _authmodule.AuthModule,
                    _payoutmodule.PayoutModule,
                    _uploadmodule.UploadModule,
                    _sosmodule.SOSModule,
                    _setup.SentryModule.forRoot(),
                    _configmodule.ConfigModule.forRoot({
                        cache: true,
                        isGlobal: true
                    }),
                    _rewardmodule.RewardModule,
                    _taxisupportrequestmodule.ComplaintModule,
                    _database.GeoModule,
                    _shopmodule.ShopModule,
                    _parkingmodule.ParkingModule,
                    _configurationmodule.ConfigurationModule,
                    _axios.HttpModule,
                    _smsprovidermodule.SMSProviderModule,
                    _zonepricemodule.ZonePriceModule,
                    _notificationmodule.NotificationModule,
                    _nestjsredis.RedisModule.forRoot({
                        closeClient: true,
                        commonOptions: {
                            db: 2
                        },
                        config: {
                            host: process.env.REDIS_HOST ?? 'localhost'
                        }
                    })
                ],
                providers: [
                    {
                        provide: _core.APP_FILTER,
                        useClass: _setup.SentryGlobalFilter
                    }
                ],
                controllers: [
                    _adminapicontroller.AppController
                ]
            };
        }
        return {
            module: AdminAPIModule,
            imports: [
                _axios.HttpModule,
                _setup.SentryModule.forRoot(),
                _graphql.GraphQLModule.forRoot({
                    driver: _apollo.ApolloDriver,
                    autoSchemaFile: true
                }),
                _configurationmodule.ConfigurationModule,
                _licenseverify.LicenseVerifyModule
            ],
            controllers: [
                _adminapisetupnotfoundcontroller.AdminApiSetupNotFoundController
            ],
            providers: [
                {
                    provide: _core.APP_FILTER,
                    useClass: _setup.SentryGlobalFilter
                }
            ]
        };
    }
};
AdminAPIModule = _ts_decorate._([
    (0, _common.Module)({}),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _licenseverify.LicenseVerifyService === "undefined" ? Object : _licenseverify.LicenseVerifyService
    ])
], AdminAPIModule);


/***/ }),
/* 10 */
/***/ ((module) => {

module.exports = require("@swc/helpers/_/_ts_decorate");

/***/ }),
/* 11 */
/***/ ((module) => {

module.exports = require("@swc/helpers/_/_ts_metadata");

/***/ }),
/* 12 */
/***/ ((module) => {

module.exports = require("@nestjs/axios");

/***/ }),
/* 13 */
/***/ ((module) => {

module.exports = require("@nestjs/graphql");

/***/ }),
/* 14 */
/***/ ((module) => {

module.exports = require("@nestjs/typeorm");

/***/ }),
/* 15 */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  AdminNotificationEntity: () => (/* reexport */ AdminNotificationEntity),
  AdminNotificationType: () => (/* reexport */ AdminNotificationType),
  AnnouncementEntity: () => (/* reexport */ AnnouncementEntity),
  AnnouncementUserType: () => (/* reexport */ AnnouncementUserType),
  AppConfigInfoDTO: () => (/* reexport */ AppConfigInfoDTO),
  AppType: () => (/* reexport */ AppType),
  AuthRedisService: () => (/* reexport */ AuthRedisService),
  AvaialbeUpgrade: () => (/* reexport */ AvaialbeUpgrade),
  BroadnetService: () => (/* reexport */ BroadnetService),
  CampaignCodeEntity: () => (/* reexport */ CampaignCodeEntity),
  CampaignEntity: () => (/* reexport */ CampaignEntity),
  CarColorEntity: () => (/* reexport */ CarColorEntity),
  CarModelEntity: () => (/* reexport */ CarModelEntity),
  CartEntity: () => (/* reexport */ CartEntity),
  CartGroupEntity: () => (/* reexport */ CartGroupEntity),
  CartProductEntity: () => (/* reexport */ CartProductEntity),
  CartStatus: () => (/* reexport */ CartStatus),
  ChargeSavedPaymentMethodBody: () => (/* reexport */ ChargeSavedPaymentMethodBody),
  ChartInterval: () => (/* reexport */ ChartInterval),
  CommonCouponModule: () => (/* reexport */ CommonCouponModule),
  CommonCouponService: () => (/* reexport */ CommonCouponService),
  CommonGiftCardService: () => (/* reexport */ CommonGiftCardService),
  ComplaintActivityType: () => (/* reexport */ ComplaintActivityType),
  ComplaintStatus: () => (/* reexport */ ComplaintStatus),
  ConfigInformation: () => (/* reexport */ ConfigInformation),
  ConfigRedisService: () => (/* reexport */ ConfigRedisService),
  Country: () => (/* reexport */ Country),
  CouponEntity: () => (/* reexport */ CouponEntity),
  CryptoModule: () => (/* reexport */ CryptoModule),
  CryptoService: () => (/* reexport */ CryptoService),
  CurrentConfiguration: () => (/* reexport */ CurrentConfiguration),
  CustomerEntity: () => (/* reexport */ CustomerEntity),
  CustomerFavoriteProductEntity: () => (/* reexport */ CustomerFavoriteProductEntity),
  CustomerNoteEntity: () => (/* reexport */ CustomerNoteEntity),
  CustomerSessionEntity: () => (/* reexport */ CustomerSessionEntity),
  DatabaseModule: () => (/* reexport */ DatabaseModule),
  DateRangeMultiplier: () => (/* reexport */ DateRangeMultiplier),
  DeliveryContact: () => (/* reexport */ DeliveryContact),
  DeliveryFeeService: () => (/* reexport */ DeliveryFeeService),
  DeliveryMethod: () => (/* reexport */ DeliveryMethod),
  DeliveryPackageSize: () => (/* reexport */ DeliveryPackageSize),
  DevicePlatform: () => (/* reexport */ DevicePlatform),
  DeviceType: () => (/* reexport */ DeviceType),
  Dimensions: () => (/* reexport */ Dimensions),
  DistanceMultiplier: () => (/* reexport */ DistanceMultiplier),
  DriverDeductTransactionType: () => (/* reexport */ DriverDeductTransactionType),
  DriverDocumentEntity: () => (/* reexport */ DriverDocumentEntity),
  DriverDocumentRetentionPolicyEntity: () => (/* reexport */ DriverDocumentRetentionPolicyEntity),
  DriverEntity: () => (/* reexport */ DriverEntity),
  DriverNoteEntity: () => (/* reexport */ DriverNoteEntity),
  DriverNotificationService: () => (/* reexport */ DriverNotificationService),
  DriverRechargeTransactionType: () => (/* reexport */ DriverRechargeTransactionType),
  DriverRedisService: () => (/* reexport */ DriverRedisService),
  DriverServicesServiceEntity: () => (/* reexport */ DriverServicesServiceEntity),
  DriverSessionEntity: () => (/* reexport */ DriverSessionEntity),
  DriverShiftRuleEntity: () => (/* reexport */ DriverShiftRuleEntity),
  DriverStatus: () => (/* reexport */ DriverStatus),
  DriverToDriverDocumentEntity: () => (/* reexport */ DriverToDriverDocumentEntity),
  DriverTransactionEntity: () => (/* reexport */ DriverTransactionEntity),
  DriverWalletEntity: () => (/* reexport */ DriverWalletEntity),
  EnabledNotification: () => (/* reexport */ EnabledNotification),
  FeedbackEntity: () => (/* reexport */ FeedbackEntity),
  FeedbackParameterEntity: () => (/* reexport */ FeedbackParameterEntity),
  FirebaseNotificationModule: () => (/* reexport */ FirebaseNotificationModule),
  FleetEntity: () => (/* reexport */ FleetEntity),
  FleetStaffEntity: () => (/* reexport */ FleetStaffEntity),
  FleetStaffPermissionFinancial: () => (/* reexport */ FleetStaffPermissionFinancial),
  FleetStaffPermissionOrder: () => (/* reexport */ FleetStaffPermissionOrder),
  FleetStaffSessionEntity: () => (/* reexport */ FleetStaffSessionEntity),
  FleetTransactionEntity: () => (/* reexport */ FleetTransactionEntity),
  FleetWalletEntity: () => (/* reexport */ FleetWalletEntity),
  GatewayLinkMethod: () => (/* reexport */ GatewayLinkMethod),
  GatewayToUserEntity: () => (/* reexport */ GatewayToUserEntity),
  Gender: () => (/* reexport */ Gender),
  GeoModule: () => (/* reexport */ GeoModule),
  GeoProvider: () => (/* reexport */ GeoProvider),
  GeoResolver: () => (/* reexport */ GeoResolver),
  GiftBatchEntity: () => (/* reexport */ GiftBatchEntity),
  GiftCodeEntity: () => (/* reexport */ GiftCodeEntity),
  GoogleGeoService: () => (/* reexport */ GoogleGeoService),
  GoogleServicesModule: () => (/* reexport */ GoogleServicesModule),
  GoogleServicesService: () => (/* reexport */ GoogleServicesService),
  LegacyTransactionType: () => (/* reexport */ LegacyTransactionType),
  License: () => (/* reexport */ License),
  LicenseInformationDTO: () => (/* reexport */ LicenseInformationDTO),
  LicenseType: () => (/* reexport */ LicenseType),
  LicenseVerifyRemoteResponse: () => (/* reexport */ LicenseVerifyRemoteResponse),
  MediaEntity: () => (/* reexport */ MediaEntity),
  MessageStatus: () => (/* reexport */ MessageStatus),
  NominitamGeoService: () => (/* reexport */ NominitamGeoService),
  Note: () => (/* reexport */ Note),
  OperatorEntity: () => (/* reexport */ OperatorEntity),
  OperatorPermission: () => (/* reexport */ OperatorPermission),
  OperatorRoleEntity: () => (/* reexport */ OperatorRoleEntity),
  OperatorSessionEntity: () => (/* reexport */ OperatorSessionEntity),
  OrderCancelReasonEntity: () => (/* reexport */ OrderCancelReasonEntity),
  OrderFulfillmentMethod: () => (/* reexport */ OrderFulfillmentMethod),
  OrderMessageEntity: () => (/* reexport */ OrderMessageEntity),
  OrderPaymentStatus: () => (/* reexport */ OrderPaymentStatus),
  OrderQueueLevel: () => (/* reexport */ OrderQueueLevel),
  OrderRedisService: () => (/* reexport */ OrderRedisService),
  OrderStatus: () => (/* reexport */ OrderStatus),
  PahappaService: () => (/* reexport */ PahappaService),
  ParkOrderActivityEntity: () => (/* reexport */ ParkOrderActivityEntity),
  ParkOrderEntity: () => (/* reexport */ ParkOrderEntity),
  ParkOrderNoteEntity: () => (/* reexport */ ParkOrderNoteEntity),
  ParkOrderStatus: () => (/* reexport */ ParkOrderStatus),
  ParkSpotCarSize: () => (/* reexport */ ParkSpotCarSize),
  ParkSpotEntity: () => (/* reexport */ ParkSpotEntity),
  ParkSpotFacility: () => (/* reexport */ ParkSpotFacility),
  ParkSpotNoteEntity: () => (/* reexport */ ParkSpotNoteEntity),
  ParkSpotStatus: () => (/* reexport */ ParkSpotStatus),
  ParkSpotType: () => (/* reexport */ ParkSpotType),
  ParkSpotVehicleType: () => (/* reexport */ ParkSpotVehicleType),
  ParkingCustomerNotificationEntity: () => (/* reexport */ ParkingCustomerNotificationEntity),
  ParkingCustomerNotificationType: () => (/* reexport */ ParkingCustomerNotificationType),
  ParkingFeedbackEntity: () => (/* reexport */ ParkingFeedbackEntity),
  ParkingFeedbackParameterEntity: () => (/* reexport */ ParkingFeedbackParameterEntity),
  ParkingLoginSessionEntity: () => (/* reexport */ ParkingLoginSessionEntity),
  ParkingPayoutSessionEntity: () => (/* reexport */ ParkingPayoutSessionEntity),
  ParkingPayoutSessionPayoutMethodDetailEntity: () => (/* reexport */ ParkingPayoutSessionPayoutMethodDetailEntity),
  ParkingPermission: () => (/* reexport */ ParkingPermission),
  ParkingProviderNotificationEntity: () => (/* reexport */ ParkingProviderNotificationEntity),
  ParkingProviderNotificationType: () => (/* reexport */ ParkingProviderNotificationType),
  ParkingSupportRequestActivityEntity: () => (/* reexport */ ParkingSupportRequestActivityEntity),
  ParkingSupportRequestEntity: () => (/* reexport */ ParkingSupportRequestEntity),
  ParkingTransactionCreditType: () => (/* reexport */ ParkingTransactionCreditType),
  ParkingTransactionDebitType: () => (/* reexport */ ParkingTransactionDebitType),
  ParkingTransactionEntity: () => (/* reexport */ ParkingTransactionEntity),
  ParkingWalletEntity: () => (/* reexport */ ParkingWalletEntity),
  PaymentEntity: () => (/* reexport */ PaymentEntity),
  PaymentGatewayEntity: () => (/* reexport */ PaymentGatewayEntity),
  PaymentGatewayType: () => (/* reexport */ PaymentGatewayType),
  PaymentMode: () => (/* reexport */ PaymentMode),
  PaymentStatus: () => (/* reexport */ PaymentStatus),
  PayoutAccountEntity: () => (/* reexport */ PayoutAccountEntity),
  PayoutMethodEntity: () => (/* reexport */ PayoutMethodEntity),
  PayoutMethodType: () => (/* reexport */ PayoutMethodType),
  PayoutSessionStatus: () => (/* reexport */ PayoutSessionStatus),
  PersonalInfo: () => (/* reexport */ PersonalInfo),
  PhoneNumber: () => (/* reexport */ PhoneNumber),
  PlaceDTO: () => (/* reexport */ PlaceDTO),
  PlivoService: () => (/* reexport */ PlivoService),
  Point: () => (/* reexport */ Point),
  ProductCategoryEntity: () => (/* reexport */ ProductCategoryEntity),
  ProductEntity: () => (/* reexport */ ProductEntity),
  ProductOptionEntity: () => (/* reexport */ ProductOptionEntity),
  ProductVariantEntity: () => (/* reexport */ ProductVariantEntity),
  ProviderBrand: () => (/* reexport */ ProviderBrand),
  ProviderDeductTransactionType: () => (/* reexport */ ProviderDeductTransactionType),
  ProviderExpenseType: () => (/* reexport */ ProviderExpenseType),
  ProviderRechargeTransactionType: () => (/* reexport */ ProviderRechargeTransactionType),
  ProviderTransactionEntity: () => (/* reexport */ ProviderTransactionEntity),
  ProviderWalletEntity: () => (/* reexport */ ProviderWalletEntity),
  RatingAggregate: () => (/* reexport */ RatingAggregate),
  RedisHelpersModule: () => (/* reexport */ RedisHelpersModule),
  RedisPubSubProvider: () => (/* reexport */ RedisPubSubProvider),
  RegionCategoryEntity: () => (/* reexport */ RegionCategoryEntity),
  RegionEntity: () => (/* reexport */ RegionEntity),
  RegionModule: () => (/* reexport */ RegionModule),
  RegionService: () => (/* reexport */ RegionService),
  RequestActivityEntity: () => (/* reexport */ RequestActivityEntity),
  RequestActivityType: () => (/* reexport */ RequestActivityType),
  ReviewStatus: () => (/* reexport */ ReviewStatus),
  RewardAppType: () => (/* reexport */ RewardAppType),
  RewardBeneficiary: () => (/* reexport */ RewardBeneficiary),
  RewardEntity: () => (/* reexport */ RewardEntity),
  RewardEvent: () => (/* reexport */ RewardEvent),
  RiderAddressEntity: () => (/* reexport */ RiderAddressEntity),
  RiderAddressType: () => (/* reexport */ RiderAddressType),
  RiderDeductTransactionType: () => (/* reexport */ RiderDeductTransactionType),
  RiderDocumentType: () => (/* reexport */ RiderDocumentType),
  RiderNotificationService: () => (/* reexport */ RiderNotificationService),
  RiderRechargeTransactionType: () => (/* reexport */ RiderRechargeTransactionType),
  RiderReviewEntity: () => (/* reexport */ RiderReviewEntity),
  RiderStatus: () => (/* reexport */ RiderStatus),
  RiderTransactionEntity: () => (/* reexport */ RiderTransactionEntity),
  RiderWalletEntity: () => (/* reexport */ RiderWalletEntity),
  SMSEntity: () => (/* reexport */ SMSEntity),
  SMSModule: () => (/* reexport */ SMSModule),
  SMSProviderEntity: () => (/* reexport */ SMSProviderEntity),
  SMSProviderInterface: () => (/* reexport */ SMSProviderInterface),
  SMSProviderService: () => (/* reexport */ SMSProviderService),
  SMSProviderType: () => (/* reexport */ SMSProviderType),
  SMSService: () => (/* reexport */ SMSService),
  SMSStatus: () => (/* reexport */ SMSStatus),
  SMSType: () => (/* reexport */ SMSType),
  SOSActivityAction: () => (/* reexport */ SOSActivityAction),
  SOSActivityEntity: () => (/* reexport */ SOSActivityEntity),
  SOSEntity: () => (/* reexport */ SOSEntity),
  SOSReasonEntity: () => (/* reexport */ SOSReasonEntity),
  SOSStatus: () => (/* reexport */ SOSStatus),
  SavedPaymentMethodEntity: () => (/* reexport */ SavedPaymentMethodEntity),
  SavedPaymentMethodType: () => (/* reexport */ SavedPaymentMethodType),
  ServiceCategoryEntity: () => (/* reexport */ ServiceCategoryEntity),
  ServiceDistanceFeeMode: () => (/* reexport */ ServiceDistanceFeeMode),
  ServiceEntity: () => (/* reexport */ ServiceEntity),
  ServiceOptionEntity: () => (/* reexport */ ServiceOptionEntity),
  ServiceOptionIcon: () => (/* reexport */ ServiceOptionIcon),
  ServiceOptionType: () => (/* reexport */ ServiceOptionType),
  ServicePaymentMethod: () => (/* reexport */ ServicePaymentMethod),
  ServiceService: () => (/* reexport */ ServiceService),
  SessionInfo: () => (/* reexport */ SessionInfo),
  SharedConfigurationService: () => (/* reexport */ SharedConfigurationService),
  SharedCustomerModule: () => (/* reexport */ SharedCustomerModule),
  SharedCustomerService: () => (/* reexport */ SharedCustomerService),
  SharedCustomerWalletModule: () => (/* reexport */ SharedCustomerWalletModule),
  SharedCustomerWalletService: () => (/* reexport */ SharedCustomerWalletService),
  SharedDriverService: () => (/* reexport */ SharedDriverService),
  SharedFleetService: () => (/* reexport */ SharedFleetService),
  SharedOrderModule: () => (/* reexport */ SharedOrderModule),
  SharedOrderService: () => (/* reexport */ SharedOrderService),
  SharedProviderService: () => (/* reexport */ SharedProviderService),
  SharedRiderService: () => (/* reexport */ SharedRiderService),
  SharedShopModule: () => (/* reexport */ SharedShopModule),
  SharedShopService: () => (/* reexport */ SharedShopService),
  ShopCategoryEntity: () => (/* reexport */ ShopCategoryEntity),
  ShopCategoryStatus: () => (/* reexport */ ShopCategoryStatus),
  ShopCustomerNotificationEntity: () => (/* reexport */ ShopCustomerNotificationEntity),
  ShopCustomerNotificationType: () => (/* reexport */ ShopCustomerNotificationType),
  ShopCustomerSupportRequestActivityEntity: () => (/* reexport */ ShopCustomerSupportRequestActivityEntity),
  ShopCustomerSupportRequestEntity: () => (/* reexport */ ShopCustomerSupportRequestEntity),
  ShopCustomerSupportRequestType: () => (/* reexport */ ShopCustomerSupportRequestType),
  ShopDeliveryZoneEntity: () => (/* reexport */ ShopDeliveryZoneEntity),
  ShopDocumentEntity: () => (/* reexport */ ShopDocumentEntity),
  ShopDocumentRetentionPolicyEntity: () => (/* reexport */ ShopDocumentRetentionPolicyEntity),
  ShopEntity: () => (/* reexport */ ShopEntity),
  ShopFeedbackEntity: () => (/* reexport */ ShopFeedbackEntity),
  ShopFeedbackParameterEntity: () => (/* reexport */ ShopFeedbackParameterEntity),
  ShopLoginSessionEntity: () => (/* reexport */ ShopLoginSessionEntity),
  ShopNoteEntity: () => (/* reexport */ ShopNoteEntity),
  ShopNotificationEntity: () => (/* reexport */ ShopNotificationEntity),
  ShopNotificationType: () => (/* reexport */ ShopNotificationType),
  ShopOrderCartEntity: () => (/* reexport */ ShopOrderCartEntity),
  ShopOrderCartProductEntity: () => (/* reexport */ ShopOrderCartProductEntity),
  ShopOrderEntity: () => (/* reexport */ ShopOrderEntity),
  ShopOrderNoteEntity: () => (/* reexport */ ShopOrderNoteEntity),
  ShopOrderStatus: () => (/* reexport */ ShopOrderStatus),
  ShopOrderStatusHistoryEntity: () => (/* reexport */ ShopOrderStatusHistoryEntity),
  ShopPayoutSessionEntity: () => (/* reexport */ ShopPayoutSessionEntity),
  ShopPayoutSessionPayoutMethodDetailEntity: () => (/* reexport */ ShopPayoutSessionPayoutMethodDetailEntity),
  ShopPermission: () => (/* reexport */ ShopPermission),
  ShopProductPresetEntity: () => (/* reexport */ ShopProductPresetEntity),
  ShopSessionEntity: () => (/* reexport */ ShopSessionEntity),
  ShopStatus: () => (/* reexport */ ShopStatus),
  ShopSubcategoryEntity: () => (/* reexport */ ShopSubcategoryEntity),
  ShopSupportRequestActivityEntity: () => (/* reexport */ ShopSupportRequestActivityEntity),
  ShopSupportRequestEntity: () => (/* reexport */ ShopSupportRequestEntity),
  ShopSupportRequestType: () => (/* reexport */ ShopSupportRequestType),
  ShopToShopDocumentEntity: () => (/* reexport */ ShopToShopDocumentEntity),
  ShopTransactionCreditType: () => (/* reexport */ ShopTransactionCreditType),
  ShopTransactionDebitType: () => (/* reexport */ ShopTransactionDebitType),
  ShopTransactionEntity: () => (/* reexport */ ShopTransactionEntity),
  ShopWalletEntity: () => (/* reexport */ ShopWalletEntity),
  TaxiOrderEntity: () => (/* reexport */ TaxiOrderEntity),
  TaxiOrderNoteEntity: () => (/* reexport */ TaxiOrderNoteEntity),
  TaxiOrderShopEntity: () => (/* reexport */ TaxiOrderShopEntity),
  TaxiOrderType: () => (/* reexport */ TaxiOrderType),
  TaxiPayoutSessionEntity: () => (/* reexport */ TaxiPayoutSessionEntity),
  TaxiPayoutSessionPayoutMethodDetailEntity: () => (/* reexport */ TaxiPayoutSessionPayoutMethodDetailEntity),
  TaxiPermission: () => (/* reexport */ TaxiPermission),
  TaxiSupportRequestActivityEntity: () => (/* reexport */ TaxiSupportRequestActivityEntity),
  TaxiSupportRequestEntity: () => (/* reexport */ TaxiSupportRequestEntity),
  Time: () => (/* reexport */ Time),
  TimeFrequency: () => (/* reexport */ TimeFrequency),
  TimeMultiplier: () => (/* reexport */ TimeMultiplier),
  TimeRangeDTO: () => (/* reexport */ TimeRangeDTO),
  TransactionAction: () => (/* reexport */ TransactionAction),
  TransactionStatus: () => (/* reexport */ TransactionStatus),
  TransactionType: () => (/* reexport */ TransactionType),
  TwilioService: () => (/* reexport */ TwilioService),
  UpdateConfigResult: () => (/* reexport */ UpdateConfigResult),
  UpdateConfigStatus: () => (/* reexport */ UpdateConfigStatus),
  UpdatePurchaseCodeClient: () => (/* reexport */ UpdatePurchaseCodeClient),
  UpdatePurchaseCodeResult: () => (/* reexport */ UpdatePurchaseCodeResult),
  UpdatePurchaseCodeStatus: () => (/* reexport */ UpdatePurchaseCodeStatus),
  UploadResult: () => (/* reexport */ UploadResult),
  VentisService: () => (/* reexport */ VentisService),
  VerifyHash: () => (/* reexport */ VerifyHash),
  VersionStatus: () => (/* reexport */ VersionStatus),
  VonageService: () => (/* reexport */ VonageService),
  Weekday: () => (/* reexport */ Weekday),
  WeekdayMultiplier: () => (/* reexport */ WeekdayMultiplier),
  WeekdayScheduleDTO: () => (/* reexport */ WeekdayScheduleDTO),
  ZonePriceCategoryEntity: () => (/* reexport */ ZonePriceCategoryEntity),
  ZonePriceEntity: () => (/* reexport */ ZonePriceEntity),
  entities: () => (/* reexport */ entities)
});

// EXTERNAL MODULE: external "@nestjs/common"
var common_ = __webpack_require__(7);
// EXTERNAL MODULE: external "@nestjs/typeorm"
var typeorm_ = __webpack_require__(14);
// EXTERNAL MODULE: external "typeorm"
var external_typeorm_ = __webpack_require__(16);
;// ../../libs/database/src/lib/entities/taxi/car-model.entity.ts
function _ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function _ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var CarModelEntity = function CarModelEntity() {
    "use strict";
};
_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    _ts_metadata("design:type", Number)
], CarModelEntity.prototype, "id", void 0);
_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'title'
    }),
    _ts_metadata("design:type", String)
], CarModelEntity.prototype, "name", void 0);
_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.car;
    }),
    _ts_metadata("design:type", Array)
], CarModelEntity.prototype, "drivers", void 0);
CarModelEntity = _ts_decorate([
    (0,external_typeorm_.Entity)('car')
], CarModelEntity);

// EXTERNAL MODULE: external "@nestjs/graphql"
var graphql_ = __webpack_require__(13);
;// ../../libs/database/src/lib/entities/enums/driver-deduct-transaction-type.enum.ts

var DriverDeductTransactionType;
(function(DriverDeductTransactionType) {
    DriverDeductTransactionType["Withdraw"] = "Withdraw";
    DriverDeductTransactionType["Commission"] = "Commission";
    DriverDeductTransactionType["Correction"] = "Correction";
})(DriverDeductTransactionType || (DriverDeductTransactionType = {}));
(0,graphql_.registerEnumType)(DriverDeductTransactionType, {
    name: 'DriverDeductTransactionType'
});

;// ../../libs/database/src/lib/entities/enums/driver-recharge-transaction-type.enum.ts

var DriverRechargeTransactionType;
(function(DriverRechargeTransactionType) {
    DriverRechargeTransactionType["OrderFee"] = "OrderFee";
    DriverRechargeTransactionType["BankTransfer"] = "BankTransfer";
    DriverRechargeTransactionType["InAppPayment"] = "InAppPayment";
    DriverRechargeTransactionType["Gift"] = "Gift";
})(DriverRechargeTransactionType || (DriverRechargeTransactionType = {}));
(0,graphql_.registerEnumType)(DriverRechargeTransactionType, {
    name: 'DriverRechargeTransactionType'
});

;// ../../libs/database/src/lib/entities/enums/transaction-action.enum.ts

var TransactionAction;
(function(TransactionAction) {
    TransactionAction["Recharge"] = "Recharge";
    TransactionAction["Deduct"] = "Deduct";
})(TransactionAction || (TransactionAction = {}));
(0,graphql_.registerEnumType)(TransactionAction, {
    name: 'TransactionAction'
});

;// ../../libs/database/src/lib/entities/enums/transaction-status.enum.ts

var TransactionStatus;
(function(TransactionStatus) {
    TransactionStatus["Processing"] = "Processing";
    TransactionStatus["Done"] = "Done";
    TransactionStatus["Canceled"] = "Canceled";
    TransactionStatus["Rejected"] = "Rejected";
})(TransactionStatus || (TransactionStatus = {}));
(0,graphql_.registerEnumType)(TransactionStatus, {
    name: 'TransactionStatus'
});

;// ../../libs/database/src/lib/entities/enums/complaint-status.enum.ts

var ComplaintStatus;
(function(ComplaintStatus) {
    ComplaintStatus["Submitted"] = "Submitted";
    ComplaintStatus["UnderInvestigation"] = "UnderInvestigation";
    ComplaintStatus["Resolved"] = "Resolved";
})(ComplaintStatus || (ComplaintStatus = {}));
(0,graphql_.registerEnumType)(ComplaintStatus, {
    name: 'ComplaintStatus'
});

;// ../../libs/database/src/lib/transformers/multipoint.transformer.ts
var MultipointTransformer = /*#__PURE__*/ function() {
    "use strict";
    function MultipointTransformer() {}
    var _proto = MultipointTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null || value.length < 1) return null;
        return "MULTIPOINT(" + value.map(function(x) {
            return x.lng + " " + x.lat;
        }).join(',') + ")";
    };
    _proto.from = function from(value) {
        if (value == null) return [];
        var i = value.substring(11, value.length - 1).split(',').map(function(x) {
            var s = x.substring(1, x.length - 1).split(' ');
            return {
                lng: parseFloat(s[0]),
                lat: parseFloat(s[1])
            };
        });
        return i;
    };
    return MultipointTransformer;
}();

;// ../../libs/database/src/lib/entities/enums/gender.enum.ts

var Gender;
(function(Gender) {
    Gender["Male"] = "male";
    Gender["Female"] = "female";
    Gender["Unknown"] = "unknown";
})(Gender || (Gender = {}));
(0,graphql_.registerEnumType)(Gender, {
    name: 'Gender'
});

;// ../../libs/database/src/lib/entities/enums/rider-status.enum.ts

var RiderStatus;
(function(RiderStatus) {
    RiderStatus["Enabled"] = "enabled";
    RiderStatus["Disabled"] = "blocked";
})(RiderStatus || (RiderStatus = {}));
(0,graphql_.registerEnumType)(RiderStatus, {
    name: 'RiderStatus'
});

;// ../../libs/database/src/lib/entities/enums/anouncement-user-type.enum.ts

var AnnouncementUserType;
(function(AnnouncementUserType) {
    AnnouncementUserType["Driver"] = "Driver";
    AnnouncementUserType["Rider"] = "Rider";
    AnnouncementUserType["Operator"] = "Operator";
})(AnnouncementUserType || (AnnouncementUserType = {}));
(0,graphql_.registerEnumType)(AnnouncementUserType, {
    name: 'AnnouncementUserType'
});

;// ../../libs/database/src/lib/entities/enums/app-type.enum.ts

var AppType;
(function(AppType) {
    AppType["Taxi"] = "Taxi";
    AppType["Shop"] = "Shop";
    AppType["Parking"] = "Parking";
})(AppType || (AppType = {}));
(0,graphql_.registerEnumType)(AppType, {
    name: 'AppType'
});

;// ../../libs/database/src/lib/entities/announcement.entity.ts
function announcement_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function announcement_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var AnnouncementEntity = function AnnouncementEntity() {
    "use strict";
};
announcement_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    announcement_entity_ts_metadata("design:type", Number)
], AnnouncementEntity.prototype, "id", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: AnnouncementUserType,
        default: [
            AnnouncementUserType.Rider
        ]
    }),
    announcement_entity_ts_metadata("design:type", Array)
], AnnouncementEntity.prototype, "userType", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: AppType,
        nullable: true
    }),
    announcement_entity_ts_metadata("design:type", typeof AppType === "undefined" ? Object : AppType)
], AnnouncementEntity.prototype, "appType", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'startTimestamp'
    }),
    announcement_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], AnnouncementEntity.prototype, "startAt", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'expirationTimestamp'
    }),
    announcement_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], AnnouncementEntity.prototype, "expireAt", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    announcement_entity_ts_metadata("design:type", String)
], AnnouncementEntity.prototype, "title", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    announcement_entity_ts_metadata("design:type", String)
], AnnouncementEntity.prototype, "url", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    announcement_entity_ts_metadata("design:type", String)
], AnnouncementEntity.prototype, "description", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, function(media) {
        return media.announcement;
    }),
    (0,external_typeorm_.JoinColumn)(),
    announcement_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], AnnouncementEntity.prototype, "media", void 0);
announcement_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    announcement_entity_ts_metadata("design:type", Number)
], AnnouncementEntity.prototype, "mediaId", void 0);
AnnouncementEntity = announcement_entity_ts_decorate([
    (0,external_typeorm_.Entity)('promotion')
], AnnouncementEntity);

;// ../../libs/database/src/lib/entities/enums/rider-deduct-transaction-type.enum.ts

var RiderDeductTransactionType;
(function(RiderDeductTransactionType) {
    RiderDeductTransactionType["OrderFee"] = "OrderFee";
    RiderDeductTransactionType["ParkingFee"] = "ParkingFee";
    RiderDeductTransactionType["CancellationFee"] = "CancellationFee";
    RiderDeductTransactionType["Withdraw"] = "Withdraw";
    RiderDeductTransactionType["Correction"] = "Correction";
})(RiderDeductTransactionType || (RiderDeductTransactionType = {}));
(0,graphql_.registerEnumType)(RiderDeductTransactionType, {
    name: 'RiderDeductTransactionType'
});

;// ../../libs/database/src/lib/entities/enums/rider-recharge-transaction-type.enum.ts

var RiderRechargeTransactionType;
(function(RiderRechargeTransactionType) {
    RiderRechargeTransactionType["BankTransfer"] = "BankTransfer";
    RiderRechargeTransactionType["Gift"] = "Gift";
    RiderRechargeTransactionType["Correction"] = "Correction";
    RiderRechargeTransactionType["InAppPayment"] = "InAppPayment";
})(RiderRechargeTransactionType || (RiderRechargeTransactionType = {}));
(0,graphql_.registerEnumType)(RiderRechargeTransactionType, {
    name: 'RiderRechargeTransactionType'
});

;// ../../libs/database/src/lib/entities/gift-batch.entity.ts
function gift_batch_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function gift_batch_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var GiftBatchEntity = function GiftBatchEntity() {
    "use strict";
};
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    gift_batch_entity_ts_metadata("design:type", Number)
], GiftBatchEntity.prototype, "id", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    gift_batch_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], GiftBatchEntity.prototype, "createdAt", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    gift_batch_entity_ts_metadata("design:type", String)
], GiftBatchEntity.prototype, "name", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.Column)('varchar', {
        length: 3
    }),
    gift_batch_entity_ts_metadata("design:type", String)
], GiftBatchEntity.prototype, "currency", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    gift_batch_entity_ts_metadata("design:type", Number)
], GiftBatchEntity.prototype, "amount", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    gift_batch_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], GiftBatchEntity.prototype, "availableFrom", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    gift_batch_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], GiftBatchEntity.prototype, "expireAt", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.giftBatchesCreated;
    }),
    gift_batch_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], GiftBatchEntity.prototype, "createdByOperator", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    gift_batch_entity_ts_metadata("design:type", Number)
], GiftBatchEntity.prototype, "createdByOperatorId", void 0);
gift_batch_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return GiftCodeEntity;
    }, function(giftCode) {
        return giftCode.gift;
    }),
    gift_batch_entity_ts_metadata("design:type", Array)
], GiftBatchEntity.prototype, "giftCodes", void 0);
GiftBatchEntity = gift_batch_entity_ts_decorate([
    (0,external_typeorm_.Entity)('gift')
], GiftBatchEntity);

;// ../../libs/database/src/lib/entities/gift-code.entity.ts
function gift_code_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function gift_code_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var GiftCodeEntity = function GiftCodeEntity() {
    "use strict";
};
gift_code_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    gift_code_entity_ts_metadata("design:type", Number)
], GiftCodeEntity.prototype, "id", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    gift_code_entity_ts_metadata("design:type", String)
], GiftCodeEntity.prototype, "code", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    gift_code_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], GiftCodeEntity.prototype, "usedAt", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return DriverTransactionEntity;
    }, function(driverTransaction) {
        return driverTransaction.giftCard;
    }),
    gift_code_entity_ts_metadata("design:type", typeof DriverTransactionEntity === "undefined" ? Object : DriverTransactionEntity)
], GiftCodeEntity.prototype, "driverTransaction", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    gift_code_entity_ts_metadata("design:type", Number)
], GiftCodeEntity.prototype, "driverTransactionId", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return RiderTransactionEntity;
    }, function(riderTransaction) {
        return riderTransaction.giftCard;
    }),
    gift_code_entity_ts_metadata("design:type", typeof RiderTransactionEntity === "undefined" ? Object : RiderTransactionEntity)
], GiftCodeEntity.prototype, "riderTransaction", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    gift_code_entity_ts_metadata("design:type", Number)
], GiftCodeEntity.prototype, "riderTransactionId", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return GiftBatchEntity;
    }, function(gift) {
        return gift.giftCodes;
    }),
    gift_code_entity_ts_metadata("design:type", typeof GiftBatchEntity === "undefined" ? Object : GiftBatchEntity)
], GiftCodeEntity.prototype, "gift", void 0);
gift_code_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    gift_code_entity_ts_metadata("design:type", Number)
], GiftCodeEntity.prototype, "giftId", void 0);
GiftCodeEntity = gift_code_entity_ts_decorate([
    (0,external_typeorm_.Entity)('gift_code')
], GiftCodeEntity);

;// ../../libs/database/src/lib/entities/enums/saved-payment-method-type.ts

var SavedPaymentMethodType;
(function(SavedPaymentMethodType) {
    SavedPaymentMethodType["CARD"] = "CARD";
    SavedPaymentMethodType["BANK_ACCOUNT"] = "BANK_ACCOUNT";
})(SavedPaymentMethodType || (SavedPaymentMethodType = {}));
(0,graphql_.registerEnumType)(SavedPaymentMethodType, {
    name: 'SavedPaymentMethodType',
    description: 'Saved payment method type'
});

;// ../../libs/database/src/lib/entities/enums/card-type.enum.ts

var ProviderBrand;
(function(ProviderBrand) {
    ProviderBrand["Visa"] = "visa";
    ProviderBrand["Mastercard"] = "mastercard";
    ProviderBrand["Amex"] = "amex";
    ProviderBrand["Discover"] = "discover";
    ProviderBrand["Diners"] = "diners";
    ProviderBrand["EftPosAu"] = "eftpos_au";
    ProviderBrand["JCB"] = "jcb";
    ProviderBrand["UnionPay"] = "unionpay";
    ProviderBrand["Unknown"] = "unknown";
})(ProviderBrand || (ProviderBrand = {}));
(0,graphql_.registerEnumType)(ProviderBrand, {
    name: 'ProviderBrand',
    description: 'Brand of the provider wether bank name or card provider'
});

;// ../../libs/database/src/lib/entities/parking/enums/park-spot-type.enum.ts

var ParkSpotType;
(function(ParkSpotType) {
    ParkSpotType["PERSONAL"] = "personal";
    ParkSpotType["PUBLIC"] = "public";
})(ParkSpotType || (ParkSpotType = {}));
(0,graphql_.registerEnumType)(ParkSpotType, {
    name: 'ParkSpotType',
    description: 'The type of the park spot, If personal then show the location as name, If public then show the name as location'
});

;// ../../libs/database/src/lib/transformers/point.transformer.ts
var PointTransformer = /*#__PURE__*/ function() {
    "use strict";
    function PointTransformer() {}
    var _proto = PointTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null) return null;
        return "POINT(" + value.lng + " " + value.lat + ")";
    };
    _proto.from = function from(value) {
        if (value == null || value == '') {
            return null;
        }
        var a = value.substring(6, value.length - 1).split(' ');
        return {
            lng: parseFloat(a[0]),
            lat: parseFloat(a[1])
        };
    };
    return PointTransformer;
}();

;// ../../libs/database/src/lib/entities/parking/enums/park-spot-car-size.enum.ts

var ParkSpotCarSize;
(function(ParkSpotCarSize) {
    ParkSpotCarSize["SMALL"] = "small";
    ParkSpotCarSize["MEDIUM"] = "medium";
    ParkSpotCarSize["LARGE"] = "large";
    ParkSpotCarSize["VERY_LARGE"] = "very_large";
})(ParkSpotCarSize || (ParkSpotCarSize = {}));
(0,graphql_.registerEnumType)(ParkSpotCarSize, {
    name: 'ParkSpotCarSize'
});

;// ../../libs/database/src/lib/entities/parking/enums/park-spot-facility.enum.ts

var ParkSpotFacility;
(function(ParkSpotFacility) {
    ParkSpotFacility["GUARDED"] = "guarded";
    ParkSpotFacility["COVERED"] = "covered";
    ParkSpotFacility["CCTV"] = "cctv";
    ParkSpotFacility["ELECTRIC_CHARGING"] = "electric_charging";
    ParkSpotFacility["CAR_WASH"] = "car_wash";
    ParkSpotFacility["TOILET"] = "toilet";
})(ParkSpotFacility || (ParkSpotFacility = {}));
(0,graphql_.registerEnumType)(ParkSpotFacility, {
    name: 'ParkSpotFacility',
    description: 'List of possible park spot facilities. This enum is used in ParkSpot.'
});

;// ../../libs/database/src/lib/entities/parking/parking-feedback-parameter.entity.ts
function parking_feedback_parameter_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_feedback_parameter_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ParkingFeedbackParameterEntity = function ParkingFeedbackParameterEntity() {
    "use strict";
};
parking_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_feedback_parameter_entity_ts_metadata("design:type", Number)
], ParkingFeedbackParameterEntity.prototype, "id", void 0);
parking_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_feedback_parameter_entity_ts_metadata("design:type", String)
], ParkingFeedbackParameterEntity.prototype, "name", void 0);
parking_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_feedback_parameter_entity_ts_metadata("design:type", Boolean)
], ParkingFeedbackParameterEntity.prototype, "isGood", void 0);
parking_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ParkingFeedbackEntity;
    }, function(feedback) {
        return feedback.parameters;
    }),
    parking_feedback_parameter_entity_ts_metadata("design:type", Array)
], ParkingFeedbackParameterEntity.prototype, "feedbacks", void 0);
ParkingFeedbackParameterEntity = parking_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_feedback_parameter')
], ParkingFeedbackParameterEntity);

;// ../../libs/database/src/lib/entities/enums/review.status.enum.ts

var ReviewStatus;
(function(ReviewStatus) {
    ReviewStatus["Pending"] = "pending";
    ReviewStatus["Approved"] = "approved";
    ReviewStatus["ApprovedUnpublished"] = "approved_unpublished";
    ReviewStatus["Rejected"] = "rejected";
    ReviewStatus["Overridden"] = "overridden";
})(ReviewStatus || (ReviewStatus = {}));
(0,graphql_.registerEnumType)(ReviewStatus, {
    name: 'ReviewStatus',
    description: undefined
});

;// ../../libs/database/src/lib/entities/parking/parking-feedback.entity.ts
function parking_feedback_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_feedback_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






var ParkingFeedbackEntity = function ParkingFeedbackEntity() {
    "use strict";
};
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_feedback_entity_ts_metadata("design:type", Number)
], ParkingFeedbackEntity.prototype, "id", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    parking_feedback_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingFeedbackEntity.prototype, "createdAt", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)('float'),
    parking_feedback_entity_ts_metadata("design:type", Number)
], ParkingFeedbackEntity.prototype, "score", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_feedback_entity_ts_metadata("design:type", String)
], ParkingFeedbackEntity.prototype, "comment", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ReviewStatus,
        default: ReviewStatus.Pending
    }),
    parking_feedback_entity_ts_metadata("design:type", typeof ReviewStatus === "undefined" ? Object : ReviewStatus)
], ParkingFeedbackEntity.prototype, "status", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkSpotEntity;
    }, function(parkSpot) {
        return parkSpot.feedbacks;
    }),
    parking_feedback_entity_ts_metadata("design:type", typeof ParkSpotEntity === "undefined" ? Object : ParkSpotEntity)
], ParkingFeedbackEntity.prototype, "parkSpot", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_feedback_entity_ts_metadata("design:type", Number)
], ParkingFeedbackEntity.prototype, "parkSpotId", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }),
    parking_feedback_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkingFeedbackEntity.prototype, "customer", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_feedback_entity_ts_metadata("design:type", Number)
], ParkingFeedbackEntity.prototype, "customerId", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.feedbacks;
    }),
    (0,external_typeorm_.JoinColumn)(),
    parking_feedback_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ParkingFeedbackEntity.prototype, "order", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_feedback_entity_ts_metadata("design:type", Number)
], ParkingFeedbackEntity.prototype, "orderId", void 0);
parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ParkingFeedbackParameterEntity;
    }, function(parameter) {
        return parameter.feedbacks;
    }),
    (0,external_typeorm_.JoinTable)(),
    parking_feedback_entity_ts_metadata("design:type", Array)
], ParkingFeedbackEntity.prototype, "parameters", void 0);
ParkingFeedbackEntity = parking_feedback_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_feedback')
], ParkingFeedbackEntity);

;// ../../libs/database/src/lib/interfaces/point.ts
function point_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function point_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var Point = function Point() {
    "use strict";
};
point_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }),
    point_ts_metadata("design:type", Number)
], Point.prototype, "lat", void 0);
point_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }),
    point_ts_metadata("design:type", Number)
], Point.prototype, "lng", void 0);
point_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Int;
    }, {
        nullable: true
    }),
    point_ts_metadata("design:type", Number)
], Point.prototype, "heading", void 0);
Point = point_ts_decorate([
    (0,graphql_.ObjectType)(),
    (0,graphql_.InputType)('PointInput')
], Point);

;// ../../libs/database/src/lib/entities/parking/park-spot-note.entity.ts
function park_spot_note_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function park_spot_note_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ParkSpotNoteEntity = function ParkSpotNoteEntity() {
    "use strict";
};
park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    park_spot_note_entity_ts_metadata("design:type", Number)
], ParkSpotNoteEntity.prototype, "id", void 0);
park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    park_spot_note_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkSpotNoteEntity.prototype, "createdAt", void 0);
park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_spot_note_entity_ts_metadata("design:type", Number)
], ParkSpotNoteEntity.prototype, "parkSpotId", void 0);
park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkSpotEntity;
    }, function(parkSpot) {
        return parkSpot.notes;
    }),
    park_spot_note_entity_ts_metadata("design:type", typeof ParkSpotEntity === "undefined" ? Object : ParkSpotEntity)
], ParkSpotNoteEntity.prototype, "parkSpot", void 0);
park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.Column)('text'),
    park_spot_note_entity_ts_metadata("design:type", String)
], ParkSpotNoteEntity.prototype, "note", void 0);
park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    park_spot_note_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ParkSpotNoteEntity.prototype, "staff", void 0);
park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_spot_note_entity_ts_metadata("design:type", Number)
], ParkSpotNoteEntity.prototype, "staffId", void 0);
ParkSpotNoteEntity = park_spot_note_entity_ts_decorate([
    (0,external_typeorm_.Entity)('park_spot_note')
], ParkSpotNoteEntity);

;// ../../libs/database/src/lib/entities/parking/enums/park-spot-status.enum.ts

var ParkSpotStatus;
(function(ParkSpotStatus) {
    ParkSpotStatus["Pending"] = "pending";
    ParkSpotStatus["Active"] = "active";
    ParkSpotStatus["Blocked"] = "blocked";
    ParkSpotStatus["Inactive"] = "inactive";
})(ParkSpotStatus || (ParkSpotStatus = {}));
(0,graphql_.registerEnumType)(ParkSpotStatus, {
    name: 'ParkSpotStatus',
    description: 'The status of the park spot'
});

;// ../../libs/database/src/lib/transformers/weekly-schedule.transformer.ts
var WeeklyScheduleTransformer = /*#__PURE__*/ function() {
    "use strict";
    function WeeklyScheduleTransformer() {}
    var _proto = WeeklyScheduleTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null || value.length == 0) return null;
        return JSON.stringify(value);
    };
    _proto.from = function from(value) {
        if (value == null || value == '') {
            return [];
        }
        return JSON.parse(value);
    };
    return WeeklyScheduleTransformer;
}();

;// ../../libs/database/src/lib/entities/enums/transaction-type.enum.ts

var TransactionType;
(function(TransactionType) {
    TransactionType["Debit"] = "Debit";
    TransactionType["Credit"] = "Credit";
})(TransactionType || (TransactionType = {}));
(0,graphql_.registerEnumType)(TransactionType, {
    name: 'TransactionType'
});

;// ../../libs/database/src/lib/entities/parking/enums/parking-transaction-debit-type.enum.ts

var ParkingTransactionDebitType;
(function(ParkingTransactionDebitType) {
    ParkingTransactionDebitType["Commission"] = "Commission";
    ParkingTransactionDebitType["Correction"] = "Correction";
    ParkingTransactionDebitType["Payout"] = "Payout";
    ParkingTransactionDebitType["Refund"] = "Refund";
    ParkingTransactionDebitType["ParkingFee"] = "ParkingFee";
    ParkingTransactionDebitType["CancelFee"] = "CancelFee";
})(ParkingTransactionDebitType || (ParkingTransactionDebitType = {}));
(0,graphql_.registerEnumType)(ParkingTransactionDebitType, {
    name: 'ParkingTransactionDebitType'
});

;// ../../libs/database/src/lib/entities/parking/enums/parking-transaction-credit-type.enum.ts

var ParkingTransactionCreditType;
(function(ParkingTransactionCreditType) {
    ParkingTransactionCreditType["WalletTopUp"] = "WalletTopUp";
    ParkingTransactionCreditType["GiftCardTopUp"] = "GiftCardTopUp";
    ParkingTransactionCreditType["BankTransfer"] = "BankTransfer";
    ParkingTransactionCreditType["ParkingRentalIncome"] = "ParkingRentalIncome";
    ParkingTransactionCreditType["Correction"] = "Correction";
})(ParkingTransactionCreditType || (ParkingTransactionCreditType = {}));
(0,graphql_.registerEnumType)(ParkingTransactionCreditType, {
    name: 'ParkingTransactionCreditType'
});

;// ../../libs/database/src/lib/entities/enums/payout-method-type.enum.ts

var PayoutMethodType;
(function(PayoutMethodType) {
    PayoutMethodType["Stripe"] = "stripe";
    PayoutMethodType["BankTransfer"] = "bank_transfer";
})(PayoutMethodType || (PayoutMethodType = {}));
(0,graphql_.registerEnumType)(PayoutMethodType, {
    name: 'PayoutMethodType',
    description: 'The type of payout method'
});

;// ../../libs/database/src/lib/entities/fragments/personal-info.ts
function personal_info_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function personal_info_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var PersonalInfo = function PersonalInfo() {
    "use strict";
};
personal_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    personal_info_ts_metadata("design:type", String)
], PersonalInfo.prototype, "firstName", void 0);
personal_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    personal_info_ts_metadata("design:type", String)
], PersonalInfo.prototype, "lastName", void 0);
personal_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    personal_info_ts_metadata("design:type", String)
], PersonalInfo.prototype, "email", void 0);
personal_info_ts_decorate([
    (0,external_typeorm_.Column)(),
    personal_info_ts_metadata("design:type", String)
], PersonalInfo.prototype, "mobileNumber", void 0);
personal_info_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: Gender
    }),
    personal_info_ts_metadata("design:type", typeof Gender === "undefined" ? Object : Gender)
], PersonalInfo.prototype, "gender", void 0);
personal_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    personal_info_ts_metadata("design:type", String)
], PersonalInfo.prototype, "address", void 0);

;// ../../libs/database/src/lib/entities/fragments/rating-aggregate.ts
function rating_aggregate_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function rating_aggregate_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var RatingAggregate = function RatingAggregate() {
    "use strict";
};
rating_aggregate_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        nullable: true
    }),
    rating_aggregate_ts_metadata("design:type", Number)
], RatingAggregate.prototype, "rating", void 0);
rating_aggregate_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    rating_aggregate_ts_metadata("design:type", Number)
], RatingAggregate.prototype, "reviewCount", void 0);

;// ../../libs/database/src/lib/entities/shop/enums/order-queue-level.enum.ts

var OrderQueueLevel;
(function(OrderQueueLevel) {
    OrderQueueLevel["LOW"] = "LOW";
    OrderQueueLevel["MEDIUM"] = "MEDIUM";
    OrderQueueLevel["HIGH"] = "HIGH";
})(OrderQueueLevel || (OrderQueueLevel = {}));
(0,graphql_.registerEnumType)(OrderQueueLevel, {
    name: 'OrderQueueLevel'
});

;// ../../libs/database/src/lib/entities/shop/enums/shop-status.enum.ts

var ShopStatus;
(function(ShopStatus) {
    ShopStatus["PendingSubmission"] = "pending_submission";
    ShopStatus["PendingApproval"] = "pending_approval";
    ShopStatus["Active"] = "active";
    ShopStatus["Inactive"] = "inactive";
    ShopStatus["Deleted"] = "deleted";
    ShopStatus["Blocked"] = "blocked";
})(ShopStatus || (ShopStatus = {}));
(0,graphql_.registerEnumType)(ShopStatus, {
    name: 'ShopStatus',
    description: 'The status of the shop'
});

;// ../../libs/database/src/lib/entities/enums/rider-address-type.enum.ts

var RiderAddressType;
(function(RiderAddressType) {
    RiderAddressType["Home"] = "Home";
    RiderAddressType["Work"] = "Work";
    RiderAddressType["Partner"] = "Partner";
    RiderAddressType["Gym"] = "Gym";
    RiderAddressType["Parent"] = "Parent";
    RiderAddressType["Cafe"] = "Cafe";
    RiderAddressType["Park"] = "Park";
    RiderAddressType["Other"] = "Other";
})(RiderAddressType || (RiderAddressType = {}));
(0,graphql_.registerEnumType)(RiderAddressType, {
    name: 'RiderAddressType'
});

;// ../../libs/database/src/lib/entities/fragments/phone-number.ts
function phone_number_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function phone_number_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var PhoneNumber = function PhoneNumber() {
    "use strict";
};
phone_number_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    phone_number_ts_metadata("design:type", String)
], PhoneNumber.prototype, "countryCode", void 0);
phone_number_ts_decorate([
    (0,external_typeorm_.Column)('bigint', {
        unique: true
    }),
    phone_number_ts_metadata("design:type", String)
], PhoneNumber.prototype, "number", void 0);

;// ../../libs/database/src/lib/entities/rider-address.entity.ts
function rider_address_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function rider_address_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






var RiderAddressEntity = function RiderAddressEntity() {
    "use strict";
};
rider_address_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    rider_address_entity_ts_metadata("design:type", Number)
], RiderAddressEntity.prototype, "id", void 0);
rider_address_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RiderAddressType,
        default: RiderAddressType.Other
    }),
    rider_address_entity_ts_metadata("design:type", typeof RiderAddressType === "undefined" ? Object : RiderAddressType)
], RiderAddressEntity.prototype, "type", void 0);
rider_address_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    rider_address_entity_ts_metadata("design:type", String)
], RiderAddressEntity.prototype, "title", void 0);
rider_address_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'address'
    }),
    rider_address_entity_ts_metadata("design:type", String)
], RiderAddressEntity.prototype, "details", void 0);
rider_address_entity_ts_decorate([
    (0,external_typeorm_.Column)('point', {
        transformer: new PointTransformer()
    }),
    rider_address_entity_ts_metadata("design:type", typeof Point === "undefined" ? Object : Point)
], RiderAddressEntity.prototype, "location", void 0);
rider_address_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.addresses;
    }),
    rider_address_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], RiderAddressEntity.prototype, "rider", void 0);
rider_address_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return PhoneNumber;
    }),
    rider_address_entity_ts_metadata("design:type", typeof PhoneNumber === "undefined" ? Object : PhoneNumber)
], RiderAddressEntity.prototype, "phoneNumber", void 0);
rider_address_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    rider_address_entity_ts_metadata("design:type", Number)
], RiderAddressEntity.prototype, "riderId", void 0);
RiderAddressEntity = rider_address_entity_ts_decorate([
    (0,external_typeorm_.Entity)('rider_address')
], RiderAddressEntity);

;// ../../libs/database/src/lib/entities/shop/enums/delivery-method.enum.ts

var DeliveryMethod;
(function(DeliveryMethod) {
    DeliveryMethod["BATCH"] = "BATCH";
    DeliveryMethod["SPLIT"] = "SPLIT";
    DeliveryMethod["SCHEDULED"] = "SCHEDULED";
})(DeliveryMethod || (DeliveryMethod = {}));
(0,graphql_.registerEnumType)(DeliveryMethod, {
    name: 'DeliveryMethod'
});

;// ../../libs/database/src/lib/entities/enums/payment-mode.enum.ts

var PaymentMode;
(function(PaymentMode) {
    PaymentMode["Cash"] = "cash";
    PaymentMode["SavedPaymentMethod"] = "savedPaymentMethod";
    PaymentMode["PaymentGateway"] = "paymentGateway";
    PaymentMode["Wallet"] = "wallet";
})(PaymentMode || (PaymentMode = {}));
(0,graphql_.registerEnumType)(PaymentMode, {
    name: 'PaymentMode',
    description: 'The means of payment for an order.'
});

;// ../../libs/database/src/lib/entities/shop/enums/shop-order-status.enum.ts

var ShopOrderStatus;
(function(ShopOrderStatus) {
    ShopOrderStatus["New"] = "new";
    ShopOrderStatus["Processing"] = "processing";
    ShopOrderStatus["PaymentPending"] = "payment-pending";
    ShopOrderStatus["PaymentFailed"] = "payment-failed";
    ShopOrderStatus["OnHold"] = "on-hold";
    ShopOrderStatus["ReadyForPickup"] = "ready-for-pickup";
    ShopOrderStatus["OutForDelivery"] = "out-for-delivery";
    ShopOrderStatus["Completed"] = "completed";
    ShopOrderStatus["Cancelled"] = "cancelled";
    ShopOrderStatus["Returned"] = "returned";
    ShopOrderStatus["Refunded"] = "refunded";
})(ShopOrderStatus || (ShopOrderStatus = {}));
(0,graphql_.registerEnumType)(ShopOrderStatus, {
    name: 'ShopOrderStatus',
    description: 'The status of the shop order'
});

;// ../../libs/database/src/lib/entities/enums/complaint-activity-type.enum.ts

var ComplaintActivityType;
(function(ComplaintActivityType) {
    ComplaintActivityType["Create"] = "Create";
    ComplaintActivityType["AssignToOperator"] = "AssignedToOperator";
    ComplaintActivityType["UnassignFromOperators"] = "UnassignedFromOperators";
    ComplaintActivityType["Update"] = "Update";
    ComplaintActivityType["Resolved"] = "Resolved";
    ComplaintActivityType["StatusChange"] = "StatusChange";
    ComplaintActivityType["Comment"] = "Comment";
})(ComplaintActivityType || (ComplaintActivityType = {}));
(0,graphql_.registerEnumType)(ComplaintActivityType, {
    name: 'ComplaintActivityType'
});

;// ../../libs/database/src/lib/entities/shop/shop-support-request-activity.entity.ts
function shop_support_request_activity_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_support_request_activity_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ShopSupportRequestActivityEntity = function ShopSupportRequestActivityEntity() {
    "use strict";
};
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_support_request_activity_entity_ts_metadata("design:type", Number)
], ShopSupportRequestActivityEntity.prototype, "id", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_support_request_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopSupportRequestActivityEntity.prototype, "createdAt", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintActivityType
    }),
    shop_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintActivityType === "undefined" ? Object : ComplaintActivityType)
], ShopSupportRequestActivityEntity.prototype, "type", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.complaintActivities;
    }),
    shop_support_request_activity_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ShopSupportRequestActivityEntity.prototype, "actor", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_support_request_activity_entity_ts_metadata("design:type", Array)
], ShopSupportRequestActivityEntity.prototype, "assignedToStaffs", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_support_request_activity_entity_ts_metadata("design:type", Array)
], ShopSupportRequestActivityEntity.prototype, "unassignedFromStaffs", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_support_request_activity_entity_ts_metadata("design:type", String)
], ShopSupportRequestActivityEntity.prototype, "comment", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    shop_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ShopSupportRequestActivityEntity.prototype, "statusFrom", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    shop_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ShopSupportRequestActivityEntity.prototype, "statusTo", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopSupportRequestEntity;
    }, function(supportRequest) {
        return supportRequest.activities;
    }),
    shop_support_request_activity_entity_ts_metadata("design:type", typeof ShopSupportRequestEntity === "undefined" ? Object : ShopSupportRequestEntity)
], ShopSupportRequestActivityEntity.prototype, "supportRequest", void 0);
shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_support_request_activity_entity_ts_metadata("design:type", Number)
], ShopSupportRequestActivityEntity.prototype, "supportRequestId", void 0);
ShopSupportRequestActivityEntity = shop_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_support_request_activity')
], ShopSupportRequestActivityEntity);

;// ../../libs/database/src/lib/entities/enums/shop-support-request-type.enum.ts

var ShopSupportRequestType;
(function(ShopSupportRequestType) {
    ShopSupportRequestType["UnavailableProduct"] = "UnavailableProduct";
    ShopSupportRequestType["CancelOrder"] = "CancelOrder";
    ShopSupportRequestType["UpdateShopCategories"] = "UpdateShopCategories";
    ShopSupportRequestType["UpdateItem"] = "UpdateItem";
    ShopSupportRequestType["ExpressDelivery"] = "ExpressDelivery";
    ShopSupportRequestType["Other"] = "Other";
})(ShopSupportRequestType || (ShopSupportRequestType = {}));
(0,graphql_.registerEnumType)(ShopSupportRequestType, {
    name: 'ShopSupportRequestType',
    description: 'The type of support request for a shop'
});

;// ../../libs/database/src/lib/entities/shop/shop-support-request.entity.ts
function shop_support_request_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_support_request_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}








var ShopSupportRequestEntity = function ShopSupportRequestEntity() {
    "use strict";
};
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_support_request_entity_ts_metadata("design:type", Number)
], ShopSupportRequestEntity.prototype, "id", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_support_request_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopSupportRequestEntity.prototype, "createdAt", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopSupportRequestType
    }),
    shop_support_request_entity_ts_metadata("design:type", typeof ShopSupportRequestType === "undefined" ? Object : ShopSupportRequestType)
], ShopSupportRequestEntity.prototype, "type", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }, function(order) {
        return order.supportRequests;
    }),
    shop_support_request_entity_ts_metadata("design:type", typeof ShopOrderEntity === "undefined" ? Object : ShopOrderEntity)
], ShopSupportRequestEntity.prototype, "order", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_support_request_entity_ts_metadata("design:type", Number)
], ShopSupportRequestEntity.prototype, "orderId", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }, function(cart) {
        return cart.supportRequests;
    }),
    shop_support_request_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ShopSupportRequestEntity.prototype, "cart", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_support_request_entity_ts_metadata("design:type", Number)
], ShopSupportRequestEntity.prototype, "cartId", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.supportRequests;
    }),
    shop_support_request_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopSupportRequestEntity.prototype, "shop", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)({}),
    shop_support_request_entity_ts_metadata("design:type", Number)
], ShopSupportRequestEntity.prototype, "shopId", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }, function(staff) {
        return staff.assignedShopSupportRequests;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_support_request_entity_ts_metadata("design:type", Array)
], ShopSupportRequestEntity.prototype, "assignedToStaffs", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_support_request_entity_ts_metadata("design:type", Boolean)
], ShopSupportRequestEntity.prototype, "requestedByShop", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_support_request_entity_ts_metadata("design:type", String)
], ShopSupportRequestEntity.prototype, "subject", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_support_request_entity_ts_metadata("design:type", String)
], ShopSupportRequestEntity.prototype, "content", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        default: ComplaintStatus.Submitted
    }),
    shop_support_request_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ShopSupportRequestEntity.prototype, "status", void 0);
shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopSupportRequestActivityEntity;
    }, function(activity) {
        return activity.supportRequest;
    }),
    shop_support_request_entity_ts_metadata("design:type", Array)
], ShopSupportRequestEntity.prototype, "activities", void 0);
ShopSupportRequestEntity = shop_support_request_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_support_request')
], ShopSupportRequestEntity);

;// ../../libs/database/src/lib/entities/fragments/note.ts
function note_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function note_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var Note = function Note() {
    "use strict";
};
note_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)(),
    note_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], Note.prototype, "createdAt", void 0);
note_ts_decorate([
    (0,external_typeorm_.Column)(),
    note_ts_metadata("design:type", String)
], Note.prototype, "note", void 0);

;// ../../libs/database/src/lib/entities/shop/shop-order-note.entity.ts
function shop_order_note_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_order_note_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var ShopOrderNoteEntity = function ShopOrderNoteEntity() {
    "use strict";
};
shop_order_note_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_order_note_entity_ts_metadata("design:type", Number)
], ShopOrderNoteEntity.prototype, "id", void 0);
shop_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return Note;
    }),
    shop_order_note_entity_ts_metadata("design:type", typeof Note === "undefined" ? Object : Note)
], ShopOrderNoteEntity.prototype, "note", void 0);
shop_order_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }, function(order) {
        return order.notes;
    }),
    shop_order_note_entity_ts_metadata("design:type", typeof ShopOrderEntity === "undefined" ? Object : ShopOrderEntity)
], ShopOrderNoteEntity.prototype, "order", void 0);
shop_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_note_entity_ts_metadata("design:type", Number)
], ShopOrderNoteEntity.prototype, "orderId", void 0);
shop_order_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    shop_order_note_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ShopOrderNoteEntity.prototype, "staff", void 0);
shop_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_note_entity_ts_metadata("design:type", Number)
], ShopOrderNoteEntity.prototype, "staffId", void 0);
ShopOrderNoteEntity = shop_order_note_entity_ts_decorate([
    (0,external_typeorm_.Entity)()
], ShopOrderNoteEntity);

;// ../../libs/database/src/lib/entities/shop/shop-order-status-history.entity.ts
function shop_order_status_history_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_order_status_history_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var ShopOrderStatusHistoryEntity = function ShopOrderStatusHistoryEntity() {
    "use strict";
};
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_order_status_history_entity_ts_metadata("design:type", Number)
], ShopOrderStatusHistoryEntity.prototype, "id", void 0);
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopOrderStatus
    }),
    shop_order_status_history_entity_ts_metadata("design:type", typeof ShopOrderStatus === "undefined" ? Object : ShopOrderStatus)
], ShopOrderStatusHistoryEntity.prototype, "status", void 0);
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }, function(order) {
        return order.statusHistories;
    }),
    shop_order_status_history_entity_ts_metadata("design:type", typeof ShopOrderEntity === "undefined" ? Object : ShopOrderEntity)
], ShopOrderStatusHistoryEntity.prototype, "order", void 0);
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_status_history_entity_ts_metadata("design:type", Number)
], ShopOrderStatusHistoryEntity.prototype, "orderId", void 0);
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }, function(order) {
        return order.statusHistories;
    }),
    shop_order_status_history_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ShopOrderStatusHistoryEntity.prototype, "orderCart", void 0);
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_status_history_entity_ts_metadata("design:type", Number)
], ShopOrderStatusHistoryEntity.prototype, "orderCartId", void 0);
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_status_history_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderStatusHistoryEntity.prototype, "expectedBy", void 0);
shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_status_history_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderStatusHistoryEntity.prototype, "updatedAt", void 0);
ShopOrderStatusHistoryEntity = shop_order_status_history_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_order_status_history')
], ShopOrderStatusHistoryEntity);

;// ../../libs/database/src/lib/entities/enums/order-payment-status.enum.ts

var OrderPaymentStatus;
(function(OrderPaymentStatus) {
    OrderPaymentStatus["Unpaid"] = "unpaid";
    OrderPaymentStatus["Paid"] = "paid";
    OrderPaymentStatus["Refunded"] = "refunded";
    OrderPaymentStatus["PartiallyRefunded"] = "partially_refunded";
    OrderPaymentStatus["Pending"] = "pending";
    OrderPaymentStatus["Cancelled"] = "cancelled";
    OrderPaymentStatus["Failed"] = "failed";
})(OrderPaymentStatus || (OrderPaymentStatus = {}));
(0,graphql_.registerEnumType)(OrderPaymentStatus, {
    name: 'OrderPaymentStatus'
});

;// ../../libs/database/src/lib/entities/enums/shop-customer-support-request-type.enum.ts

var ShopCustomerSupportRequestType;
(function(ShopCustomerSupportRequestType) {
    ShopCustomerSupportRequestType["NonDelivery"] = "non_delivery";
    ShopCustomerSupportRequestType["WrongItem"] = "wrong_item";
    ShopCustomerSupportRequestType["MissingItem"] = "missing_item";
    ShopCustomerSupportRequestType["DamagedItem"] = "damaged_item";
    ShopCustomerSupportRequestType["CancelOrder"] = "cancel_order";
    ShopCustomerSupportRequestType["Other"] = "other";
})(ShopCustomerSupportRequestType || (ShopCustomerSupportRequestType = {}));
(0,graphql_.registerEnumType)(ShopCustomerSupportRequestType, {
    name: 'ShopCustomerSupportRequestType',
    description: 'The type of support request for a shop customer'
});

;// ../../libs/database/src/lib/entities/shop/shop-customer-support-request-activity.entity.ts
function shop_customer_support_request_activity_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_customer_support_request_activity_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ShopCustomerSupportRequestActivityEntity = function ShopCustomerSupportRequestActivityEntity() {
    "use strict";
};
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", Number)
], ShopCustomerSupportRequestActivityEntity.prototype, "id", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopCustomerSupportRequestActivityEntity.prototype, "createdAt", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintActivityType
    }),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintActivityType === "undefined" ? Object : ComplaintActivityType)
], ShopCustomerSupportRequestActivityEntity.prototype, "type", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ShopCustomerSupportRequestActivityEntity.prototype, "actor", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", Array)
], ShopCustomerSupportRequestActivityEntity.prototype, "assignedToStaffs", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", Array)
], ShopCustomerSupportRequestActivityEntity.prototype, "unassignedFromStaffs", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", String)
], ShopCustomerSupportRequestActivityEntity.prototype, "comment", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ShopCustomerSupportRequestActivityEntity.prototype, "statusFrom", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ShopCustomerSupportRequestActivityEntity.prototype, "statusTo", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopCustomerSupportRequestEntity;
    }, function(supportRequest) {
        return supportRequest.activities;
    }),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", typeof ShopCustomerSupportRequestEntity === "undefined" ? Object : ShopCustomerSupportRequestEntity)
], ShopCustomerSupportRequestActivityEntity.prototype, "supportRequest", void 0);
shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_customer_support_request_activity_entity_ts_metadata("design:type", Number)
], ShopCustomerSupportRequestActivityEntity.prototype, "supportRequestId", void 0);
ShopCustomerSupportRequestActivityEntity = shop_customer_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_customer_support_request_activity')
], ShopCustomerSupportRequestActivityEntity);

;// ../../libs/database/src/lib/entities/shop/shop-customer-support-request.entity.ts
function shop_customer_support_request_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_customer_support_request_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}








var ShopCustomerSupportRequestEntity = function ShopCustomerSupportRequestEntity() {
    "use strict";
};
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_customer_support_request_entity_ts_metadata("design:type", Number)
], ShopCustomerSupportRequestEntity.prototype, "id", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopCustomerSupportRequestEntity.prototype, "createdAt", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopCustomerSupportRequestType
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", typeof ShopCustomerSupportRequestType === "undefined" ? Object : ShopCustomerSupportRequestType)
], ShopCustomerSupportRequestEntity.prototype, "type", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }, function(order) {
        return order.customerSupportRequests;
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", typeof ShopOrderEntity === "undefined" ? Object : ShopOrderEntity)
], ShopCustomerSupportRequestEntity.prototype, "order", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_customer_support_request_entity_ts_metadata("design:type", Number)
], ShopCustomerSupportRequestEntity.prototype, "orderId", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }, function(cart) {
        return cart.customerSupportRequests;
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ShopCustomerSupportRequestEntity.prototype, "cart", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", Number)
], ShopCustomerSupportRequestEntity.prototype, "cartId", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ShopCustomerSupportRequestEntity.prototype, "customer", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_customer_support_request_entity_ts_metadata("design:type", Number)
], ShopCustomerSupportRequestEntity.prototype, "customerId", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }, function(staff) {
        return staff.assignedShopCustomerSupportRequests;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_customer_support_request_entity_ts_metadata("design:type", Array)
], ShopCustomerSupportRequestEntity.prototype, "assignedToStaffs", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_customer_support_request_entity_ts_metadata("design:type", String)
], ShopCustomerSupportRequestEntity.prototype, "subject", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", String)
], ShopCustomerSupportRequestEntity.prototype, "content", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        default: ComplaintStatus.Submitted
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ShopCustomerSupportRequestEntity.prototype, "status", void 0);
shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopCustomerSupportRequestActivityEntity;
    }, function(activity) {
        return activity.supportRequest;
    }),
    shop_customer_support_request_entity_ts_metadata("design:type", Array)
], ShopCustomerSupportRequestEntity.prototype, "activities", void 0);
ShopCustomerSupportRequestEntity = shop_customer_support_request_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_customer_support_request')
], ShopCustomerSupportRequestEntity);

;// ../../libs/database/src/lib/entities/shop/shop-order.entity.ts
function shop_order_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_order_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



















var ShopOrderEntity = function ShopOrderEntity() {
    "use strict";
};
shop_order_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "id", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderEntity.prototype, "createdAt", void 0);
shop_order_entity_ts_decorate([
    (0,graphql_.Field)(function() {
        return ShopOrderStatus;
    }),
    shop_order_entity_ts_metadata("design:type", typeof ShopOrderStatus === "undefined" ? Object : ShopOrderStatus)
], ShopOrderEntity.prototype, "status", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_entity_ts_metadata("design:type", String)
], ShopOrderEntity.prototype, "currency", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return RiderAddressEntity;
    }),
    shop_order_entity_ts_metadata("design:type", typeof RiderAddressEntity === "undefined" ? Object : RiderAddressEntity)
], ShopOrderEntity.prototype, "deliveryAddress", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "deliveryAddressId", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.shopOrders;
    }),
    shop_order_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ShopOrderEntity.prototype, "customer", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "customerId", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DeliveryMethod
    }),
    shop_order_entity_ts_metadata("design:type", typeof DeliveryMethod === "undefined" ? Object : DeliveryMethod)
], ShopOrderEntity.prototype, "deliveryMethod", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        nullable: true,
        enum: PaymentMode
    }),
    shop_order_entity_ts_metadata("design:type", typeof PaymentMode === "undefined" ? Object : PaymentMode)
], ShopOrderEntity.prototype, "paymentMethod", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: OrderPaymentStatus,
        default: OrderPaymentStatus.Pending
    }),
    shop_order_entity_ts_metadata("design:type", typeof OrderPaymentStatus === "undefined" ? Object : OrderPaymentStatus)
], ShopOrderEntity.prototype, "paymentStatus", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "subTotal", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "deliveryFee", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "tax", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "discount", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "serviceFee", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('multipoint', {
        transformer: new MultipointTransformer(),
        nullable: true
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "deliveryDirections", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "total", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "paymentGatewayId", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderEntity.prototype, "estimatedDeliveryTime", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderEntity.prototype, "fullfillmentTime", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }),
    shop_order_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], ShopOrderEntity.prototype, "expressDelivery", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "expressDeliveryOrderId", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }),
    shop_order_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], ShopOrderEntity.prototype, "paymentGateway", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_entity_ts_metadata("design:type", Number)
], ShopOrderEntity.prototype, "savedPaymentMethodId", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SavedPaymentMethodEntity;
    }),
    shop_order_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], ShopOrderEntity.prototype, "savedPaymentMethod", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderCartEntity;
    }, function(cart) {
        return cart.order;
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "carts", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopSupportRequestEntity;
    }, function(activity) {
        return activity.order;
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "supportRequests", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderNoteEntity;
    }, function(note) {
        return note.order;
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "notes", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(transaction) {
        return transaction.shopOrder;
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "driverTransactions", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(transaction) {
        return transaction.shopOrder;
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "riderTransactions", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderStatusHistoryEntity;
    }, function(statusHistory) {
        return statusHistory.order;
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "statusHistories", void 0);
shop_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopCustomerSupportRequestEntity;
    }, function(supportRequest) {
        return supportRequest.order;
    }),
    shop_order_entity_ts_metadata("design:type", Array)
], ShopOrderEntity.prototype, "customerSupportRequests", void 0);
ShopOrderEntity = shop_order_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_order')
], ShopOrderEntity);

;// ../../libs/database/src/lib/entities/shop/shop-feedback-parameter.entity.ts
function shop_feedback_parameter_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_feedback_parameter_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ShopFeedbackParameterEntity = function ShopFeedbackParameterEntity() {
    "use strict";
};
shop_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_feedback_parameter_entity_ts_metadata("design:type", Number)
], ShopFeedbackParameterEntity.prototype, "id", void 0);
shop_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_feedback_parameter_entity_ts_metadata("design:type", Boolean)
], ShopFeedbackParameterEntity.prototype, "isGood", void 0);
shop_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_feedback_parameter_entity_ts_metadata("design:type", String)
], ShopFeedbackParameterEntity.prototype, "name", void 0);
shop_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopFeedbackEntity;
    }, function(shopFeedback) {
        return shopFeedback.parameters;
    }),
    shop_feedback_parameter_entity_ts_metadata("design:type", Number)
], ShopFeedbackParameterEntity.prototype, "shopFeedback", void 0);
shop_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_feedback_parameter_entity_ts_metadata("design:type", Number)
], ShopFeedbackParameterEntity.prototype, "shopFeedbackId", void 0);
ShopFeedbackParameterEntity = shop_feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_feedback_parameter')
], ShopFeedbackParameterEntity);

;// ../../libs/database/src/lib/entities/shop/shop-feedback.entity.ts
function shop_feedback_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_feedback_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}







var ShopFeedbackEntity = function ShopFeedbackEntity() {
    "use strict";
};
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_feedback_entity_ts_metadata("design:type", Number)
], ShopFeedbackEntity.prototype, "id", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_feedback_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopFeedbackEntity.prototype, "createdAt", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint'),
    shop_feedback_entity_ts_metadata("design:type", Number)
], ShopFeedbackEntity.prototype, "score", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_feedback_entity_ts_metadata("design:type", String)
], ShopFeedbackEntity.prototype, "comment", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ReviewStatus,
        default: ReviewStatus.Pending
    }),
    shop_feedback_entity_ts_metadata("design:type", typeof ReviewStatus === "undefined" ? Object : ReviewStatus)
], ShopFeedbackEntity.prototype, "status", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_feedback_entity_ts_metadata("design:type", String)
], ShopFeedbackEntity.prototype, "reply", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_feedback_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopFeedbackEntity.prototype, "replyAt", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderCartEntity;
    }, function(order) {
        return order.feedbacks;
    }),
    shop_feedback_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ShopFeedbackEntity.prototype, "orderCart", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_feedback_entity_ts_metadata("design:type", Number)
], ShopFeedbackEntity.prototype, "orderCartId", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductEntity;
    }, function(product) {
        return product.feedbacks;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_feedback_entity_ts_metadata("design:type", Array)
], ShopFeedbackEntity.prototype, "products", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.feedbacks;
    }),
    shop_feedback_entity_ts_metadata("design:type", Number)
], ShopFeedbackEntity.prototype, "shop", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_feedback_entity_ts_metadata("design:type", Number)
], ShopFeedbackEntity.prototype, "shopId", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.reviews;
    }),
    shop_feedback_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ShopFeedbackEntity.prototype, "customer", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_feedback_entity_ts_metadata("design:type", Number)
], ShopFeedbackEntity.prototype, "customerId", void 0);
shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopFeedbackParameterEntity;
    }, function(reviewParameter) {
        return reviewParameter.shopFeedback;
    }),
    shop_feedback_entity_ts_metadata("design:type", Array)
], ShopFeedbackEntity.prototype, "parameters", void 0);
ShopFeedbackEntity = shop_feedback_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_feedback')
], ShopFeedbackEntity);

;// ../../libs/database/src/lib/entities/shop/enums/shop-transaction-debit-type.enum.ts

var ShopTransactionDebitType;
(function(ShopTransactionDebitType) {
    ShopTransactionDebitType["Commission"] = "Commission";
    ShopTransactionDebitType["Correction"] = "Correction";
    ShopTransactionDebitType["Payout"] = "Payout";
    ShopTransactionDebitType["Refund"] = "Refund";
})(ShopTransactionDebitType || (ShopTransactionDebitType = {}));
(0,graphql_.registerEnumType)(ShopTransactionDebitType, {
    name: 'ShopTransactionDebitType'
});

;// ../../libs/database/src/lib/entities/shop/enums/shop-transaction-credit-type.enum.ts

var ShopTransactionCreditType;
(function(ShopTransactionCreditType) {
    ShopTransactionCreditType["SaleRevenue"] = "SaleRevenue";
    ShopTransactionCreditType["Correction"] = "Correction";
})(ShopTransactionCreditType || (ShopTransactionCreditType = {}));
(0,graphql_.registerEnumType)(ShopTransactionCreditType, {
    name: 'ShopTransactionCreditType'
});

;// ../../libs/database/src/lib/entities/enums/payout-session-status.enum.ts

var PayoutSessionStatus;
(function(PayoutSessionStatus) {
    PayoutSessionStatus["PENDING"] = "pending";
    PayoutSessionStatus["IN_PROGRESS"] = "in_progress";
    PayoutSessionStatus["PAID"] = "paid";
    PayoutSessionStatus["FAILED"] = "failed";
    PayoutSessionStatus["CANCELLED"] = "cancelled";
})(PayoutSessionStatus || (PayoutSessionStatus = {}));
(0,graphql_.registerEnumType)(PayoutSessionStatus, {
    name: 'PayoutSessionStatus',
    description: undefined
});

;// ../../libs/database/src/lib/entities/shop/shop-payout-session-payout-method-detail.entity.ts
function shop_payout_session_payout_method_detail_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_payout_session_payout_method_detail_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ShopPayoutSessionPayoutMethodDetailEntity = function ShopPayoutSessionPayoutMethodDetailEntity() {
    "use strict";
};
shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], ShopPayoutSessionPayoutMethodDetailEntity.prototype, "id", void 0);
shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopPayoutSessionEntity;
    }, function(payoutSession) {
        return payoutSession.payoutMethodDetails;
    }),
    shop_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof ShopPayoutSessionEntity === "undefined" ? Object : ShopPayoutSessionEntity)
], ShopPayoutSessionPayoutMethodDetailEntity.prototype, "payoutSession", void 0);
shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], ShopPayoutSessionPayoutMethodDetailEntity.prototype, "payoutSessionId", void 0);
shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.sessions;
    }),
    shop_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], ShopPayoutSessionPayoutMethodDetailEntity.prototype, "payoutMethod", void 0);
shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], ShopPayoutSessionPayoutMethodDetailEntity.prototype, "payoutMethodId", void 0);
shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PayoutSessionStatus,
        default: PayoutSessionStatus.PENDING
    }),
    shop_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof PayoutSessionStatus === "undefined" ? Object : PayoutSessionStatus)
], ShopPayoutSessionPayoutMethodDetailEntity.prototype, "status", void 0);
shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopTransactionEntity;
    }, function(shopTransaction) {
        return shopTransaction.payoutSessionMethod;
    }),
    shop_payout_session_payout_method_detail_entity_ts_metadata("design:type", Array)
], ShopPayoutSessionPayoutMethodDetailEntity.prototype, "shopTransactions", void 0);
ShopPayoutSessionPayoutMethodDetailEntity = shop_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_payout_session_payout_method_detail')
], ShopPayoutSessionPayoutMethodDetailEntity);

;// ../../libs/database/src/lib/entities/shop/shop-payout-session.entity.ts
function shop_payout_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_payout_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






var ShopPayoutSessionEntity = function ShopPayoutSessionEntity() {
    "use strict";
};
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_payout_session_entity_ts_metadata("design:type", Number)
], ShopPayoutSessionEntity.prototype, "id", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_payout_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopPayoutSessionEntity.prototype, "createdAt", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_payout_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopPayoutSessionEntity.prototype, "processedAt", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_payout_session_entity_ts_metadata("design:type", String)
], ShopPayoutSessionEntity.prototype, "description", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: PayoutSessionStatus.PENDING,
        type: 'enum',
        enum: PayoutSessionStatus
    }),
    shop_payout_session_entity_ts_metadata("design:type", typeof PayoutSessionStatus === "undefined" ? Object : PayoutSessionStatus)
], ShopPayoutSessionEntity.prototype, "status", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.payoutSessions;
    }, {
        onDelete: 'CASCADE'
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_payout_session_entity_ts_metadata("design:type", Array)
], ShopPayoutSessionEntity.prototype, "payoutMethods", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopTransactionEntity;
    }, function(shopTransaction) {
        return shopTransaction.payoutSession;
    }),
    shop_payout_session_entity_ts_metadata("design:type", Array)
], ShopPayoutSessionEntity.prototype, "shopTransactions", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    shop_payout_session_entity_ts_metadata("design:type", Number)
], ShopPayoutSessionEntity.prototype, "totalAmount", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_payout_session_entity_ts_metadata("design:type", String)
], ShopPayoutSessionEntity.prototype, "currency", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    shop_payout_session_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ShopPayoutSessionEntity.prototype, "createdByOperator", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_payout_session_entity_ts_metadata("design:type", Number)
], ShopPayoutSessionEntity.prototype, "createdByOperatorId", void 0);
shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopPayoutSessionPayoutMethodDetailEntity;
    }, function(payoutMethodDetail) {
        return payoutMethodDetail.payoutSession;
    }),
    shop_payout_session_entity_ts_metadata("design:type", Array)
], ShopPayoutSessionEntity.prototype, "payoutMethodDetails", void 0);
ShopPayoutSessionEntity = shop_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_payout_session')
], ShopPayoutSessionEntity);

;// ../../libs/database/src/lib/entities/shop/shop-transaction.entity.ts
function shop_transaction_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_transaction_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}














var ShopTransactionEntity = function ShopTransactionEntity() {
    "use strict";
};
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "id", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopTransactionEntity.prototype, "createdAt", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopTransactionEntity.prototype, "transactionDate", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionStatus,
        default: TransactionStatus.Processing
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof TransactionStatus === "undefined" ? Object : TransactionStatus)
], ShopTransactionEntity.prototype, "status", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionType
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof TransactionType === "undefined" ? Object : TransactionType)
], ShopTransactionEntity.prototype, "type", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopTransactionDebitType,
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof ShopTransactionDebitType === "undefined" ? Object : ShopTransactionDebitType)
], ShopTransactionEntity.prototype, "debitType", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopTransactionCreditType,
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof ShopTransactionCreditType === "undefined" ? Object : ShopTransactionCreditType)
], ShopTransactionEntity.prototype, "creditType", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: '3'
    }),
    shop_transaction_entity_ts_metadata("design:type", String)
], ShopTransactionEntity.prototype, "currency", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "amount", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", String)
], ShopTransactionEntity.prototype, "documentNumber", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", String)
], ShopTransactionEntity.prototype, "description", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopTransactionEntity.prototype, "shop", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "shopId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SavedPaymentMethodEntity;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], ShopTransactionEntity.prototype, "paymentMethod", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "paymentMethodId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], ShopTransactionEntity.prototype, "paymentGateway", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "paymentGatewayId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ShopTransactionEntity.prototype, "staff", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "staffId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }, function(orderCart) {
        return orderCart.shopTransactions;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ShopTransactionEntity.prototype, "shopOrderCart", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "shopOrderCartId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopPayoutSessionEntity;
    }, function(session) {
        return session.shopTransactions;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof ShopPayoutSessionEntity === "undefined" ? Object : ShopPayoutSessionEntity)
], ShopTransactionEntity.prototype, "payoutSession", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "payoutSessionId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutAccountEntity;
    }, function(payoutAccount) {
        return payoutAccount.shopTransactions;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof PayoutAccountEntity === "undefined" ? Object : PayoutAccountEntity)
], ShopTransactionEntity.prototype, "payoutAccount", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "payoutAccountId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.shopTransactions;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], ShopTransactionEntity.prototype, "payoutMethod", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "payoutMethodId", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopPayoutSessionPayoutMethodDetailEntity;
    }, function(payoutSessionMethod) {
        return payoutSessionMethod.shopTransactions;
    }),
    shop_transaction_entity_ts_metadata("design:type", typeof ShopPayoutSessionPayoutMethodDetailEntity === "undefined" ? Object : ShopPayoutSessionPayoutMethodDetailEntity)
], ShopTransactionEntity.prototype, "payoutSessionMethod", void 0);
shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_transaction_entity_ts_metadata("design:type", Number)
], ShopTransactionEntity.prototype, "payoutSessionMethodId", void 0);
ShopTransactionEntity = shop_transaction_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_transaction')
], ShopTransactionEntity);

;// ../../libs/database/src/lib/entities/enums/provider-deduct-transaction-type.enum.ts

var ProviderDeductTransactionType;
(function(ProviderDeductTransactionType) {
    ProviderDeductTransactionType["Withdraw"] = "Withdraw";
    ProviderDeductTransactionType["Expense"] = "Expense";
    ProviderDeductTransactionType["Refund"] = "Refund";
})(ProviderDeductTransactionType || (ProviderDeductTransactionType = {}));
(0,graphql_.registerEnumType)(ProviderDeductTransactionType, {
    name: 'ProviderDeductTransactionType'
});

;// ../../libs/database/src/lib/entities/enums/provider-recharge-transaction-type.enum.ts

var ProviderRechargeTransactionType;
(function(ProviderRechargeTransactionType) {
    ProviderRechargeTransactionType["Commission"] = "Commission";
})(ProviderRechargeTransactionType || (ProviderRechargeTransactionType = {}));
(0,graphql_.registerEnumType)(ProviderRechargeTransactionType, {
    name: 'ProviderRechargeTransactionType'
});

;// ../../libs/database/src/lib/entities/enums/provider-expense-type.enum.ts

var ProviderExpenseType;
(function(ProviderExpenseType) {
    ProviderExpenseType["TechnologyDevelopment"] = "TechnologyDevelopment";
    ProviderExpenseType["PlatformMaintenance"] = "PlatformMaintenance";
    ProviderExpenseType["SoftwareLicense"] = "SoftwareLicense";
    ProviderExpenseType["Hosting"] = "Hosting";
    ProviderExpenseType["CloudServices"] = "CloudServices";
    ProviderExpenseType["Marketing"] = "Marketing";
})(ProviderExpenseType || (ProviderExpenseType = {}));
(0,graphql_.registerEnumType)(ProviderExpenseType, {
    name: 'ProviderExpenseType'
});

;// ../../libs/database/src/lib/entities/provider-transaction.entity.ts
function provider_transaction_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function provider_transaction_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}











var ProviderTransactionEntity = function ProviderTransactionEntity() {
    "use strict";
};
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    provider_transaction_entity_ts_metadata("design:type", Number)
], ProviderTransactionEntity.prototype, "id", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        name: 'transactionTime'
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ProviderTransactionEntity.prototype, "createdAt", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionAction
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof TransactionAction === "undefined" ? Object : TransactionAction)
], ProviderTransactionEntity.prototype, "action", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: AppType,
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof AppType === "undefined" ? Object : AppType)
], ProviderTransactionEntity.prototype, "appType", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ProviderDeductTransactionType,
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof ProviderDeductTransactionType === "undefined" ? Object : ProviderDeductTransactionType)
], ProviderTransactionEntity.prototype, "deductType", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ProviderRechargeTransactionType,
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof ProviderRechargeTransactionType === "undefined" ? Object : ProviderRechargeTransactionType)
], ProviderTransactionEntity.prototype, "rechargeType", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ProviderExpenseType,
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof ProviderExpenseType === "undefined" ? Object : ProviderExpenseType)
], ProviderTransactionEntity.prototype, "expenseType", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    provider_transaction_entity_ts_metadata("design:type", Number)
], ProviderTransactionEntity.prototype, "amount", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    provider_transaction_entity_ts_metadata("design:type", String)
], ProviderTransactionEntity.prototype, "currency", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'documentNumber'
    }),
    provider_transaction_entity_ts_metadata("design:type", String)
], ProviderTransactionEntity.prototype, "refrenceNumber", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'details'
    }),
    provider_transaction_entity_ts_metadata("design:type", String)
], ProviderTransactionEntity.prototype, "description", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.providerTransactions;
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ProviderTransactionEntity.prototype, "operator", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", Number)
], ProviderTransactionEntity.prototype, "operatorId", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.providerTransactions;
    }, {
        onDelete: 'CASCADE'
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], ProviderTransactionEntity.prototype, "request", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", Number)
], ProviderTransactionEntity.prototype, "requestId", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }, function(cart) {
        return cart.providerTransactions;
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ProviderTransactionEntity.prototype, "shopOrderCart", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", Number)
], ProviderTransactionEntity.prototype, "shopOrderCartId", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.adminTransactions;
    }, {
        onDelete: 'CASCADE'
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], ProviderTransactionEntity.prototype, "paymentGateway", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", Number)
], ProviderTransactionEntity.prototype, "paymentGatewayId", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.providerTransactions;
    }),
    provider_transaction_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ProviderTransactionEntity.prototype, "parkOrder", void 0);
provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    provider_transaction_entity_ts_metadata("design:type", Number)
], ProviderTransactionEntity.prototype, "parkOrderId", void 0);
ProviderTransactionEntity = provider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Entity)('admin_transaction')
], ProviderTransactionEntity);

;// ../../libs/database/src/lib/entities/shop/enums/shop-order-cart-status.enum.ts

var CartStatus;
(function(CartStatus) {
    CartStatus["New"] = "New";
    CartStatus["Preparing"] = "Preparing";
    CartStatus["ReadyForPickup"] = "ReadyForPickup";
    CartStatus["OutForDelivery"] = "OutForDelivery";
    CartStatus["Completed"] = "Completed";
    CartStatus["CancelRequestedByShop"] = "CancelRequestedByShop";
    CartStatus["CanceledRequestedByCustomer"] = "CanceledRequestedByCustomer";
    CartStatus["CanceledByShop"] = "CanceledByShop";
    CartStatus["CanceledByCustomer"] = "CanceledByCustomer";
    CartStatus["Returned"] = "Returned";
    CartStatus["Failed"] = "Failed";
})(CartStatus || (CartStatus = {}));
(0,graphql_.registerEnumType)(CartStatus, {
    name: 'CartStatus'
});

;// ../../libs/database/src/lib/entities/shop/enums/order-fulfillment-method.ts

var OrderFulfillmentMethod;
(function(OrderFulfillmentMethod) {
    OrderFulfillmentMethod["ShopDelivery"] = "shop_delivery";
    OrderFulfillmentMethod["ExpressDelivery"] = "express_delivery";
    OrderFulfillmentMethod["CustomerPickup"] = "customer_pickup";
})(OrderFulfillmentMethod || (OrderFulfillmentMethod = {}));
(0,graphql_.registerEnumType)(OrderFulfillmentMethod, {
    name: 'OrderFulfillmentMethod',
    description: 'The method of order fulfillment including shop delivery, express delivery, and customer pickup'
});

;// ../../libs/database/src/lib/entities/shop/shop-order-cart.entity.ts
function shop_order_cart_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_order_cart_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}












var ShopOrderCartEntity = function ShopOrderCartEntity() {
    "use strict";
};
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "id", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }, function(order) {
        return order.carts;
    }),
    shop_order_cart_entity_ts_metadata("design:type", typeof ShopOrderEntity === "undefined" ? Object : ShopOrderEntity)
], ShopOrderCartEntity.prototype, "order", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "orderId", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: CartStatus,
        default: CartStatus.New
    }),
    shop_order_cart_entity_ts_metadata("design:type", typeof CartStatus === "undefined" ? Object : CartStatus)
], ShopOrderCartEntity.prototype, "status", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(order) {
        return order.carts;
    }),
    shop_order_cart_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopOrderCartEntity.prototype, "shop", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "shopId", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "subtotal", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "shopDeliveryFee", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "tax", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "discount", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    shop_order_cart_entity_ts_metadata("design:type", Number)
], ShopOrderCartEntity.prototype, "total", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_cart_entity_ts_metadata("design:type", String)
], ShopOrderCartEntity.prototype, "customerDescription", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_cart_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderCartEntity.prototype, "estimatedPreparationTime", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: OrderFulfillmentMethod,
        default: OrderFulfillmentMethod.ShopDelivery
    }),
    shop_order_cart_entity_ts_metadata("design:type", typeof OrderFulfillmentMethod === "undefined" ? Object : OrderFulfillmentMethod)
], ShopOrderCartEntity.prototype, "fullfillmentMethod", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderCartProductEntity;
    }, function(product) {
        return product.cart;
    }),
    shop_order_cart_entity_ts_metadata("design:type", Array)
], ShopOrderCartEntity.prototype, "products", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopFeedbackEntity;
    }, function(feedback) {
        return feedback.orderCart;
    }),
    shop_order_cart_entity_ts_metadata("design:type", Array)
], ShopOrderCartEntity.prototype, "feedbacks", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopTransactionEntity;
    }, function(transaction) {
        return transaction.shopOrderCart;
    }),
    shop_order_cart_entity_ts_metadata("design:type", Array)
], ShopOrderCartEntity.prototype, "shopTransactions", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProviderTransactionEntity;
    }, function(transaction) {
        return transaction.shopOrderCart;
    }),
    shop_order_cart_entity_ts_metadata("design:type", Array)
], ShopOrderCartEntity.prototype, "providerTransactions", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopSupportRequestEntity;
    }, function(supportRequest) {
        return supportRequest.cart;
    }),
    shop_order_cart_entity_ts_metadata("design:type", Array)
], ShopOrderCartEntity.prototype, "supportRequests", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderStatusHistoryEntity;
    }, function(statusHistory) {
        return statusHistory.orderCart;
    }),
    shop_order_cart_entity_ts_metadata("design:type", Array)
], ShopOrderCartEntity.prototype, "statusHistories", void 0);
shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopCustomerSupportRequestEntity;
    }, function(request) {
        return request.cart;
    }),
    shop_order_cart_entity_ts_metadata("design:type", Array)
], ShopOrderCartEntity.prototype, "customerSupportRequests", void 0);
ShopOrderCartEntity = shop_order_cart_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_order_cart')
], ShopOrderCartEntity);

;// ../../libs/database/src/lib/entities/shop/product-option.entity.ts
function product_option_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function product_option_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ProductOptionEntity = function ProductOptionEntity() {
    "use strict";
};
product_option_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    product_option_entity_ts_metadata("design:type", Number)
], ProductOptionEntity.prototype, "id", void 0);
product_option_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_option_entity_ts_metadata("design:type", String)
], ProductOptionEntity.prototype, "name", void 0);
product_option_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    product_option_entity_ts_metadata("design:type", String)
], ProductOptionEntity.prototype, "description", void 0);
product_option_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    product_option_entity_ts_metadata("design:type", Number)
], ProductOptionEntity.prototype, "price", void 0);
product_option_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductEntity;
    }, function(product) {
        return product.options;
    }),
    product_option_entity_ts_metadata("design:type", typeof ProductEntity === "undefined" ? Object : ProductEntity)
], ProductOptionEntity.prototype, "products", void 0);
product_option_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_option_entity_ts_metadata("design:type", Number)
], ProductOptionEntity.prototype, "productId", void 0);
product_option_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopOrderCartProductEntity;
    }, function(orderProduct) {
        return orderProduct.options;
    }),
    product_option_entity_ts_metadata("design:type", Array)
], ProductOptionEntity.prototype, "orderProducts", void 0);
ProductOptionEntity = product_option_entity_ts_decorate([
    (0,external_typeorm_.Entity)()
], ProductOptionEntity);

;// ../../libs/database/src/lib/entities/shop/shop-order-cart-product.entity.ts
function shop_order_cart_product_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_order_cart_product_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ShopOrderCartProductEntity = function ShopOrderCartProductEntity() {
    "use strict";
};
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "id", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }, function(cart) {
        return cart.products;
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ShopOrderCartProductEntity.prototype, "cart", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "cartId", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ProductEntity;
    }, function(product) {
        return product.orderProducts;
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", typeof ProductEntity === "undefined" ? Object : ProductEntity)
], ShopOrderCartProductEntity.prototype, "product", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "productId", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ProductVariantEntity;
    }, function(product) {
        return product.orderProducts;
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", typeof ProductVariantEntity === "undefined" ? Object : ProductVariantEntity)
], ShopOrderCartProductEntity.prototype, "productVariant", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "productVariantId", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductOptionEntity;
    }, function(option) {
        return option.orderProducts;
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", Array)
], ShopOrderCartProductEntity.prototype, "options", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "priceEach", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 1
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "quantity", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "unavailableQuantity", void 0);
shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    shop_order_cart_product_entity_ts_metadata("design:type", Number)
], ShopOrderCartProductEntity.prototype, "canceledQuantity", void 0);
ShopOrderCartProductEntity = shop_order_cart_product_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_order_cart_product')
], ShopOrderCartProductEntity);

;// ../../libs/database/src/lib/entities/shop/product-variant.entity.ts
function product_variant_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function product_variant_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ProductVariantEntity = function ProductVariantEntity() {
    "use strict";
};
product_variant_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    product_variant_entity_ts_metadata("design:type", Number)
], ProductVariantEntity.prototype, "id", void 0);
product_variant_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ProductEntity;
    }, function(product) {
        return product.variants;
    }),
    product_variant_entity_ts_metadata("design:type", typeof ProductEntity === "undefined" ? Object : ProductEntity)
], ProductVariantEntity.prototype, "product", void 0);
product_variant_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_variant_entity_ts_metadata("design:type", Number)
], ProductVariantEntity.prototype, "productId", void 0);
product_variant_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_variant_entity_ts_metadata("design:type", String)
], ProductVariantEntity.prototype, "name", void 0);
product_variant_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    product_variant_entity_ts_metadata("design:type", String)
], ProductVariantEntity.prototype, "description", void 0);
product_variant_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_variant_entity_ts_metadata("design:type", Number)
], ProductVariantEntity.prototype, "basePrice", void 0);
product_variant_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderCartProductEntity;
    }, function(orderProduct) {
        return orderProduct.productVariant;
    }),
    product_variant_entity_ts_metadata("design:type", Array)
], ProductVariantEntity.prototype, "orderProducts", void 0);
ProductVariantEntity = product_variant_entity_ts_decorate([
    (0,external_typeorm_.Entity)('product_variant')
], ProductVariantEntity);

;// ../../libs/database/src/lib/entities/shop/customer-favorite-product.entity.ts
function customer_favorite_product_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function customer_favorite_product_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var CustomerFavoriteProductEntity = function CustomerFavoriteProductEntity() {
    "use strict";
};
customer_favorite_product_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    customer_favorite_product_entity_ts_metadata("design:type", Number)
], CustomerFavoriteProductEntity.prototype, "id", void 0);
customer_favorite_product_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    customer_favorite_product_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CustomerFavoriteProductEntity.prototype, "createdAt", void 0);
customer_favorite_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.favoriteProducts;
    }),
    customer_favorite_product_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], CustomerFavoriteProductEntity.prototype, "customer", void 0);
customer_favorite_product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    customer_favorite_product_entity_ts_metadata("design:type", Number)
], CustomerFavoriteProductEntity.prototype, "customerId", void 0);
customer_favorite_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ProductEntity;
    }, function(product) {
        return product.customersFavorited;
    }),
    customer_favorite_product_entity_ts_metadata("design:type", typeof ProductEntity === "undefined" ? Object : ProductEntity)
], CustomerFavoriteProductEntity.prototype, "product", void 0);
customer_favorite_product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    customer_favorite_product_entity_ts_metadata("design:type", Number)
], CustomerFavoriteProductEntity.prototype, "productId", void 0);
CustomerFavoriteProductEntity = customer_favorite_product_entity_ts_decorate([
    (0,external_typeorm_.Entity)('customer_favorite_product')
], CustomerFavoriteProductEntity);

;// ../../libs/database/src/lib/interfaces/dimensions.ts
var Dimensions = function Dimensions() {
    "use strict";
};

;// ../../libs/database/src/lib/entities/shop/product.entity.ts
function product_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function product_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}












var ProductEntity = function ProductEntity() {
    "use strict";
};
product_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "id", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_entity_ts_metadata("design:type", String)
], ProductEntity.prototype, "name", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    product_entity_ts_metadata("design:type", String)
], ProductEntity.prototype, "description", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'int',
        nullable: true
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "weight", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'json',
        nullable: true
    }),
    product_entity_ts_metadata("design:type", typeof Dimensions === "undefined" ? Object : Dimensions)
], ProductEntity.prototype, "dimensions", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('text', {
        transformer: new WeeklyScheduleTransformer(),
        nullable: true
    }),
    product_entity_ts_metadata("design:type", Array)
], ProductEntity.prototype, "availabilitySchedule", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return RatingAggregate;
    }),
    product_entity_ts_metadata("design:type", typeof RatingAggregate === "undefined" ? Object : RatingAggregate)
], ProductEntity.prototype, "ratingAggregate", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.products;
    }),
    product_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ProductEntity.prototype, "shop", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "shopId", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }),
    product_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], ProductEntity.prototype, "image", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "imageId", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        comment: 'in minutes'
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "minimumPreparationTime", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        comment: 'in minutes'
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "maximumPreparationTime", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "discountPercentage", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "discountedQuantity", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ProductEntity.prototype, "discountUntil", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "usedDiscountedQuantity", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "stockQuantity", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    product_entity_ts_metadata("design:type", Number)
], ProductEntity.prototype, "basePrice", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProductVariantEntity;
    }, function(variant) {
        return variant.product;
    }),
    product_entity_ts_metadata("design:type", Array)
], ProductEntity.prototype, "variants", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductOptionEntity;
    }, function(option) {
        return option.products;
    }),
    (0,external_typeorm_.JoinTable)(),
    product_entity_ts_metadata("design:type", Array)
], ProductEntity.prototype, "options", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductCategoryEntity;
    }, function(category) {
        return category.products;
    }),
    (0,external_typeorm_.JoinTable)(),
    product_entity_ts_metadata("design:type", Array)
], ProductEntity.prototype, "categories", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CustomerFavoriteProductEntity;
    }, function(customerFavoriteProduct) {
        return customerFavoriteProduct.product;
    }),
    product_entity_ts_metadata("design:type", Array)
], ProductEntity.prototype, "customersFavorited", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderCartProductEntity;
    }, function(orderProduct) {
        return orderProduct.product;
    }),
    product_entity_ts_metadata("design:type", Array)
], ProductEntity.prototype, "orderProducts", void 0);
product_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopFeedbackEntity;
    }, function(feedback) {
        return feedback.products;
    }),
    product_entity_ts_metadata("design:type", typeof ShopFeedbackEntity === "undefined" ? Object : ShopFeedbackEntity)
], ProductEntity.prototype, "feedbacks", void 0);
ProductEntity = product_entity_ts_decorate([
    (0,external_typeorm_.Entity)('product')
], ProductEntity);

;// ../../libs/database/src/lib/entities/shop/shop-product-preset.entity.ts
function shop_product_preset_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_product_preset_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var ShopProductPresetEntity = function ShopProductPresetEntity() {
    "use strict";
};
shop_product_preset_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_product_preset_entity_ts_metadata("design:type", Number)
], ShopProductPresetEntity.prototype, "id", void 0);
shop_product_preset_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_product_preset_entity_ts_metadata("design:type", String)
], ShopProductPresetEntity.prototype, "name", void 0);
shop_product_preset_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.productPresets;
    }),
    shop_product_preset_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopProductPresetEntity.prototype, "shop", void 0);
shop_product_preset_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_product_preset_entity_ts_metadata("design:type", Number)
], ShopProductPresetEntity.prototype, "shopId", void 0);
shop_product_preset_entity_ts_decorate([
    (0,external_typeorm_.Column)('text', {
        transformer: new WeeklyScheduleTransformer(),
        nullable: true
    }),
    shop_product_preset_entity_ts_metadata("design:type", Array)
], ShopProductPresetEntity.prototype, "weeklySchedule", void 0);
shop_product_preset_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductCategoryEntity;
    }, function(product) {
        return product.presets;
    }),
    (0,external_typeorm_.JoinTable)(),
    shop_product_preset_entity_ts_metadata("design:type", Array)
], ShopProductPresetEntity.prototype, "productCategories", void 0);
ShopProductPresetEntity = shop_product_preset_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_product_preset')
], ShopProductPresetEntity);

;// ../../libs/database/src/lib/entities/shop/product.category.entity.ts
function product_category_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function product_category_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var ProductCategoryEntity = function ProductCategoryEntity() {
    "use strict";
};
product_category_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    product_category_entity_ts_metadata("design:type", Number)
], ProductCategoryEntity.prototype, "id", void 0);
product_category_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_category_entity_ts_metadata("design:type", String)
], ProductCategoryEntity.prototype, "name", void 0);
product_category_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.productCategories;
    }),
    product_category_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ProductCategoryEntity.prototype, "shop", void 0);
product_category_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    product_category_entity_ts_metadata("design:type", Number)
], ProductCategoryEntity.prototype, "shopId", void 0);
product_category_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductEntity;
    }, function(product) {
        return product.categories;
    }),
    product_category_entity_ts_metadata("design:type", Array)
], ProductCategoryEntity.prototype, "products", void 0);
product_category_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopProductPresetEntity;
    }, function(preset) {
        return preset.productCategories;
    }),
    product_category_entity_ts_metadata("design:type", Array)
], ProductCategoryEntity.prototype, "presets", void 0);
ProductCategoryEntity = product_category_entity_ts_decorate([
    (0,external_typeorm_.Entity)('product_category')
], ProductCategoryEntity);

;// ../../libs/database/src/lib/entities/shop/enums/shop-category-status.enum.ts

var ShopCategoryStatus;
(function(ShopCategoryStatus) {
    ShopCategoryStatus["Enabled"] = "enabled";
    ShopCategoryStatus["Disabled"] = "disabled";
})(ShopCategoryStatus || (ShopCategoryStatus = {}));
(0,graphql_.registerEnumType)(ShopCategoryStatus, {
    name: 'ShopCategoryStatus'
});

;// ../../libs/database/src/lib/entities/shop/shop-category.entity.ts
function shop_category_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_category_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var ShopCategoryEntity = function ShopCategoryEntity() {
    "use strict";
};
shop_category_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_category_entity_ts_metadata("design:type", Number)
], ShopCategoryEntity.prototype, "id", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_category_entity_ts_metadata("design:type", String)
], ShopCategoryEntity.prototype, "name", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    shop_category_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], ShopCategoryEntity.prototype, "image", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_category_entity_ts_metadata("design:type", Number)
], ShopCategoryEntity.prototype, "imageId", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_category_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopCategoryEntity.prototype, "createdAt", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.UpdateDateColumn)({
        nullable: true
    }),
    shop_category_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopCategoryEntity.prototype, "updatedAt", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)({
        nullable: true
    }),
    shop_category_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopCategoryEntity.prototype, "deletedAt", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopCategoryStatus,
        default: ShopCategoryStatus.Enabled
    }),
    shop_category_entity_ts_metadata("design:type", typeof ShopCategoryStatus === "undefined" ? Object : ShopCategoryStatus)
], ShopCategoryEntity.prototype, "status", void 0);
shop_category_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.categories;
    }),
    shop_category_entity_ts_metadata("design:type", Array)
], ShopCategoryEntity.prototype, "shops", void 0);
ShopCategoryEntity = shop_category_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_category')
], ShopCategoryEntity);

;// ../../libs/database/src/lib/transformers/polygon.transformer.ts
var PolygonTransformer = /*#__PURE__*/ function() {
    "use strict";
    function PolygonTransformer() {}
    var _proto = PolygonTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null) return null;
        var str = value.map(function(x) {
            var ar = x.map(function(y) {
                return y.lng + " " + y.lat;
            });
            return ar.join(',');
        }).join('),(');
        return "POLYGON((" + str + "))";
    };
    _proto.from = function from(value) {
        if (value == null || value == undefined) {
            return [];
        }
        return value.substring(8, value.length - 1).split('),(').map(function(x) {
            var res = x.substring(1, x.length - 1).split(',').map(function(y) {
                var s = y.split(' ');
                return {
                    lng: parseFloat(s[0]),
                    lat: parseFloat(s[1])
                };
            });
            return res;
        });
    };
    return PolygonTransformer;
}();

;// ../../libs/database/src/lib/entities/shop/shop-delivery-zone.entity.ts
function shop_delivery_zone_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_delivery_zone_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ShopDeliveryZoneEntity = function ShopDeliveryZoneEntity() {
    "use strict";
};
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_delivery_zone_entity_ts_metadata("design:type", Number)
], ShopDeliveryZoneEntity.prototype, "id", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.deliveryZones;
    }),
    shop_delivery_zone_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopDeliveryZoneEntity.prototype, "shop", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_delivery_zone_entity_ts_metadata("design:type", Number)
], ShopDeliveryZoneEntity.prototype, "shopId", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_delivery_zone_entity_ts_metadata("design:type", String)
], ShopDeliveryZoneEntity.prototype, "name", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: false,
        default: 0,
        precision: 10,
        scale: 2
    }),
    shop_delivery_zone_entity_ts_metadata("design:type", Number)
], ShopDeliveryZoneEntity.prototype, "deliveryFee", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        nullable: false,
        default: 1
    }),
    shop_delivery_zone_entity_ts_metadata("design:type", Number)
], ShopDeliveryZoneEntity.prototype, "minimumOrderAmount", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        nullable: false
    }),
    shop_delivery_zone_entity_ts_metadata("design:type", Number)
], ShopDeliveryZoneEntity.prototype, "minDeliveryTimeMinutes", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        nullable: false
    }),
    shop_delivery_zone_entity_ts_metadata("design:type", Number)
], ShopDeliveryZoneEntity.prototype, "maxDeliveryTimeMinutes", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        nullable: false,
        default: 1
    }),
    shop_delivery_zone_entity_ts_metadata("design:type", Boolean)
], ShopDeliveryZoneEntity.prototype, "enabled", void 0);
shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Column)('polygon', {
        transformer: new PolygonTransformer()
    }),
    shop_delivery_zone_entity_ts_metadata("design:type", Array)
], ShopDeliveryZoneEntity.prototype, "location", void 0);
ShopDeliveryZoneEntity = shop_delivery_zone_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_delivery_zone')
], ShopDeliveryZoneEntity);

;// ../../libs/database/src/lib/entities/enums/device-type.enum.ts

var DeviceType;
(function(DeviceType) {
    DeviceType["DESKTOP"] = "DESKTOP";
    DeviceType["MOBILE"] = "MOBILE";
})(DeviceType || (DeviceType = {}));
(0,graphql_.registerEnumType)(DeviceType, {
    name: 'DeviceType'
});

;// ../../libs/database/src/lib/entities/enums/device-platform.enum.ts

var DevicePlatform;
(function(DevicePlatform) {
    DevicePlatform["Android"] = "ANDROID";
    DevicePlatform["Ios"] = "IOS";
    DevicePlatform["Web"] = "WEB";
    DevicePlatform["MacOS"] = "MACOS";
    DevicePlatform["Windows"] = "WINDOWS";
    DevicePlatform["Linux"] = "LINUX";
})(DevicePlatform || (DevicePlatform = {}));
(0,graphql_.registerEnumType)(DevicePlatform, {
    name: 'DevicePlatform'
});

;// ../../libs/database/src/lib/entities/fragments/session-info.ts
function session_info_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function session_info_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var SessionInfo = function SessionInfo() {
    "use strict";
};
session_info_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)(),
    session_info_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], SessionInfo.prototype, "createdAt", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    session_info_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], SessionInfo.prototype, "lastActivityAt", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    session_info_ts_metadata("design:type", String)
], SessionInfo.prototype, "ip", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    session_info_ts_metadata("design:type", String)
], SessionInfo.prototype, "ipLocation", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    session_info_ts_metadata("design:type", String)
], SessionInfo.prototype, "deviceName", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: AppType
    }),
    session_info_ts_metadata("design:type", typeof AppType === "undefined" ? Object : AppType)
], SessionInfo.prototype, "appType", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DevicePlatform
    }),
    session_info_ts_metadata("design:type", typeof DevicePlatform === "undefined" ? Object : DevicePlatform)
], SessionInfo.prototype, "devicePlatform", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DeviceType
    }),
    session_info_ts_metadata("design:type", typeof DeviceType === "undefined" ? Object : DeviceType)
], SessionInfo.prototype, "deviceType", void 0);
session_info_ts_decorate([
    (0,external_typeorm_.Index)(),
    (0,external_typeorm_.Column)(),
    session_info_ts_metadata("design:type", String)
], SessionInfo.prototype, "token", void 0);

;// ../../libs/database/src/lib/entities/shop/shop-login-session.entity.ts
function shop_login_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_login_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ShopLoginSessionEntity = function ShopLoginSessionEntity() {
    "use strict";
};
shop_login_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_login_session_entity_ts_metadata("design:type", Number)
], ShopLoginSessionEntity.prototype, "id", void 0);
shop_login_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return SessionInfo;
    }),
    shop_login_session_entity_ts_metadata("design:type", typeof SessionInfo === "undefined" ? Object : SessionInfo)
], ShopLoginSessionEntity.prototype, "sessionInfo", void 0);
shop_login_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.loginSessions;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    shop_login_session_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopLoginSessionEntity.prototype, "shop", void 0);
shop_login_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_login_session_entity_ts_metadata("design:type", Number)
], ShopLoginSessionEntity.prototype, "shopId", void 0);
ShopLoginSessionEntity = shop_login_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_login_session')
], ShopLoginSessionEntity);

;// ../../libs/database/src/lib/entities/shop/shop-note.entity.ts
function shop_note_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_note_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var ShopNoteEntity = function ShopNoteEntity() {
    "use strict";
};
shop_note_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_note_entity_ts_metadata("design:type", Number)
], ShopNoteEntity.prototype, "id", void 0);
shop_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return Note;
    }),
    shop_note_entity_ts_metadata("design:type", typeof Note === "undefined" ? Object : Note)
], ShopNoteEntity.prototype, "note", void 0);
shop_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.notes;
    }),
    shop_note_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopNoteEntity.prototype, "shop", void 0);
shop_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_note_entity_ts_metadata("design:type", Number)
], ShopNoteEntity.prototype, "shopId", void 0);
shop_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    shop_note_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ShopNoteEntity.prototype, "staff", void 0);
shop_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_note_entity_ts_metadata("design:type", Number)
], ShopNoteEntity.prototype, "staffId", void 0);
ShopNoteEntity = shop_note_entity_ts_decorate([
    (0,external_typeorm_.Entity)()
], ShopNoteEntity);

;// ../../libs/database/src/lib/entities/shop/shop-session.entity.ts
function shop_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ShopSessionEntity = function ShopSessionEntity() {
    "use strict";
};
shop_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_session_entity_ts_metadata("design:type", Number)
], ShopSessionEntity.prototype, "id", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopSessionEntity.prototype, "createdAt", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopSessionEntity.prototype, "lastActivityAt", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_session_entity_ts_metadata("design:type", String)
], ShopSessionEntity.prototype, "ip", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_session_entity_ts_metadata("design:type", String)
], ShopSessionEntity.prototype, "ipLocation", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_session_entity_ts_metadata("design:type", String)
], ShopSessionEntity.prototype, "deviceName", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: AppType
    }),
    shop_session_entity_ts_metadata("design:type", typeof AppType === "undefined" ? Object : AppType)
], ShopSessionEntity.prototype, "appType", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DevicePlatform
    }),
    shop_session_entity_ts_metadata("design:type", typeof DevicePlatform === "undefined" ? Object : DevicePlatform)
], ShopSessionEntity.prototype, "devicePlatform", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DeviceType
    }),
    shop_session_entity_ts_metadata("design:type", typeof DeviceType === "undefined" ? Object : DeviceType)
], ShopSessionEntity.prototype, "deviceType", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Index)(),
    (0,external_typeorm_.Column)(),
    shop_session_entity_ts_metadata("design:type", String)
], ShopSessionEntity.prototype, "token", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.sessions;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    shop_session_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopSessionEntity.prototype, "shop", void 0);
shop_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_session_entity_ts_metadata("design:type", Number)
], ShopSessionEntity.prototype, "shopId", void 0);
ShopSessionEntity = shop_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_session')
], ShopSessionEntity);

;// ../../libs/database/src/lib/entities/shop/shop-document-retention-policy.entity.ts
function shop_document_retention_policy_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_document_retention_policy_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ShopDocumentRetentionPolicyEntity = function ShopDocumentRetentionPolicyEntity() {
    "use strict";
};
shop_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_document_retention_policy_entity_ts_metadata("design:type", Number)
], ShopDocumentRetentionPolicyEntity.prototype, "id", void 0);
shop_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_document_retention_policy_entity_ts_metadata("design:type", Number)
], ShopDocumentRetentionPolicyEntity.prototype, "title", void 0);
shop_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    shop_document_retention_policy_entity_ts_metadata("design:type", Number)
], ShopDocumentRetentionPolicyEntity.prototype, "deleteAfterDays", void 0);
shop_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopDocumentEntity;
    }, function(shopDocument) {
        return shopDocument.retentionPolicies;
    }),
    shop_document_retention_policy_entity_ts_metadata("design:type", typeof ShopDocumentEntity === "undefined" ? Object : ShopDocumentEntity)
], ShopDocumentRetentionPolicyEntity.prototype, "shopDocument", void 0);
shop_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_document_retention_policy_entity_ts_metadata("design:type", Number)
], ShopDocumentRetentionPolicyEntity.prototype, "shopDocumentId", void 0);
ShopDocumentRetentionPolicyEntity = shop_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_document_retention_policy')
], ShopDocumentRetentionPolicyEntity);

;// ../../libs/database/src/lib/entities/shop/shop-document.entity.ts
function shop_document_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_document_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ShopDocumentEntity = function ShopDocumentEntity() {
    "use strict";
};
shop_document_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_document_entity_ts_metadata("design:type", Number)
], ShopDocumentEntity.prototype, "id", void 0);
shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_document_entity_ts_metadata("design:type", String)
], ShopDocumentEntity.prototype, "title", void 0);
shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_document_entity_ts_metadata("design:type", Boolean)
], ShopDocumentEntity.prototype, "isEnabled", void 0);
shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_document_entity_ts_metadata("design:type", Boolean)
], ShopDocumentEntity.prototype, "isRequired", void 0);
shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_document_entity_ts_metadata("design:type", Boolean)
], ShopDocumentEntity.prototype, "hasExpiryDate", void 0);
shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)('int'),
    shop_document_entity_ts_metadata("design:type", Number)
], ShopDocumentEntity.prototype, "notificationDaysBeforeExpiry", void 0);
shop_document_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopDocumentRetentionPolicyEntity;
    }, function(retentionPolicy) {
        return retentionPolicy.shopDocument;
    }),
    shop_document_entity_ts_metadata("design:type", Array)
], ShopDocumentEntity.prototype, "retentionPolicies", void 0);
shop_document_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopToShopDocumentEntity;
    }, function(shopToShopDocument) {
        return shopToShopDocument.shopDocument;
    }),
    shop_document_entity_ts_metadata("design:type", Array)
], ShopDocumentEntity.prototype, "shopToShopDocuments", void 0);
ShopDocumentEntity = shop_document_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_document')
], ShopDocumentEntity);

;// ../../libs/database/src/lib/entities/shop/shop-to-shop-document.entity.ts
function shop_to_shop_document_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_to_shop_document_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ShopToShopDocumentEntity = function ShopToShopDocumentEntity() {
    "use strict";
};
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_to_shop_document_entity_ts_metadata("design:type", Number)
], ShopToShopDocumentEntity.prototype, "id", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopDocumentEntity;
    }, function(shopDocument) {
        return shopDocument.shopToShopDocuments;
    }, {
        onDelete: 'CASCADE'
    }),
    shop_to_shop_document_entity_ts_metadata("design:type", typeof ShopDocumentEntity === "undefined" ? Object : ShopDocumentEntity)
], ShopToShopDocumentEntity.prototype, "shopDocument", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_to_shop_document_entity_ts_metadata("design:type", Number)
], ShopToShopDocumentEntity.prototype, "shopDocumentId", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.shopToShopDocuments;
    }, {
        onDelete: 'CASCADE'
    }),
    shop_to_shop_document_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopToShopDocumentEntity.prototype, "shop", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_to_shop_document_entity_ts_metadata("design:type", Number)
], ShopToShopDocumentEntity.prototype, "shopId", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return MediaEntity;
    }, {
        onDelete: 'CASCADE'
    }),
    shop_to_shop_document_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], ShopToShopDocumentEntity.prototype, "media", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_to_shop_document_entity_ts_metadata("design:type", Number)
], ShopToShopDocumentEntity.prototype, "mediaId", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopDocumentRetentionPolicyEntity;
    }, {
        onDelete: 'CASCADE'
    }),
    shop_to_shop_document_entity_ts_metadata("design:type", typeof ShopDocumentRetentionPolicyEntity === "undefined" ? Object : ShopDocumentRetentionPolicyEntity)
], ShopToShopDocumentEntity.prototype, "retentionPolicy", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_to_shop_document_entity_ts_metadata("design:type", Number)
], ShopToShopDocumentEntity.prototype, "retentionPolicyId", void 0);
shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_to_shop_document_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopToShopDocumentEntity.prototype, "expiresAt", void 0);
ShopToShopDocumentEntity = shop_to_shop_document_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_to_shop_document')
], ShopToShopDocumentEntity);

;// ../../libs/database/src/lib/entities/shop/shop-wallet.entity.ts
function shop_wallet_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_wallet_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ShopWalletEntity = function ShopWalletEntity() {
    "use strict";
};
shop_wallet_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_wallet_entity_ts_metadata("design:type", Number)
], ShopWalletEntity.prototype, "id", void 0);
shop_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0.0
    }),
    shop_wallet_entity_ts_metadata("design:type", Number)
], ShopWalletEntity.prototype, "balance", void 0);
shop_wallet_entity_ts_decorate([
    (0,external_typeorm_.Index)(),
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    shop_wallet_entity_ts_metadata("design:type", String)
], ShopWalletEntity.prototype, "currency", void 0);
shop_wallet_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.wallet;
    }, {
        onDelete: 'CASCADE'
    }),
    shop_wallet_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopWalletEntity.prototype, "shop", void 0);
shop_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_wallet_entity_ts_metadata("design:type", Number)
], ShopWalletEntity.prototype, "shopId", void 0);
ShopWalletEntity = shop_wallet_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_wallet')
], ShopWalletEntity);

;// ../../libs/database/src/lib/entities/shop/shop-subcategory.entity.ts
function shop_subcategory_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_subcategory_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ShopSubcategoryEntity = function ShopSubcategoryEntity() {
    "use strict";
};
shop_subcategory_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_subcategory_entity_ts_metadata("design:type", Number)
], ShopSubcategoryEntity.prototype, "id", void 0);
shop_subcategory_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_subcategory_entity_ts_metadata("design:type", String)
], ShopSubcategoryEntity.prototype, "name", void 0);
shop_subcategory_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.subcategories;
    }),
    shop_subcategory_entity_ts_metadata("design:type", Array)
], ShopSubcategoryEntity.prototype, "shops", void 0);
ShopSubcategoryEntity = shop_subcategory_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_subcategory')
], ShopSubcategoryEntity);

;// ../../libs/database/src/lib/entities/shop/enums/shop-notification-type.enum.ts

var ShopNotificationType;
(function(ShopNotificationType) {
    ShopNotificationType["NewOrder"] = "new_order";
    ShopNotificationType["OrderStatus"] = "order_status";
    ShopNotificationType["Announcement"] = "announcement";
    ShopNotificationType["PayoutCalculation"] = "payout_calculation";
    ShopNotificationType["PayoutProcessing"] = "payout_processing";
    ShopNotificationType["PayoutCompleted"] = "payout_completed";
    ShopNotificationType["PayoutFailed"] = "payout_failed";
    ShopNotificationType["UpdateAvailable"] = "update_available";
    ShopNotificationType["MandatoryUpdate"] = "mandatory_update";
    ShopNotificationType["Maintenance"] = "maintenance";
    ShopNotificationType["PaymentReceived"] = "payment_received";
    ShopNotificationType["RefundInitiated"] = "refund_initiated";
    ShopNotificationType["RefundCompleted"] = "refund_completed";
    ShopNotificationType["StockRunningLow"] = "stock_running_low";
    ShopNotificationType["ReturnRequested"] = "return_requested";
    ShopNotificationType["ShippingDelayed"] = "shipping_delayed";
    ShopNotificationType["SupportRequestCreated"] = "support_request_created";
    ShopNotificationType["SupportRequestReply"] = "support_request_reply";
    ShopNotificationType["SupportRequestClose"] = "support_request_close";
    ShopNotificationType["ShopFeedback"] = "shop_feedback";
})(ShopNotificationType || (ShopNotificationType = {}));
(0,graphql_.registerEnumType)(ShopNotificationType, {
    name: 'ShopNotificationType',
    description: 'The type of shop notification'
});

;// ../../libs/database/src/lib/entities/shop/shop-notification.entity.ts
function shop_notification_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_notification_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}








var ShopNotificationEntity = function ShopNotificationEntity() {
    "use strict";
};
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_notification_entity_ts_metadata("design:type", Number)
], ShopNotificationEntity.prototype, "id", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopNotificationType
    }),
    shop_notification_entity_ts_metadata("design:type", typeof ShopNotificationType === "undefined" ? Object : ShopNotificationType)
], ShopNotificationEntity.prototype, "type", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopNotificationEntity.prototype, "readAt", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopNotificationEntity.prototype, "createdAt", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", String)
], ShopNotificationEntity.prototype, "title", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", String)
], ShopNotificationEntity.prototype, "message", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.notifications;
    }),
    shop_notification_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], ShopNotificationEntity.prototype, "shop", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_notification_entity_ts_metadata("design:type", Number)
], ShopNotificationEntity.prototype, "shopId", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return AnnouncementEntity;
    }),
    shop_notification_entity_ts_metadata("design:type", typeof AnnouncementEntity === "undefined" ? Object : AnnouncementEntity)
], ShopNotificationEntity.prototype, "announcement", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", Number)
], ShopNotificationEntity.prototype, "announcementId", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", Number)
], ShopNotificationEntity.prototype, "shopOrderCartId", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }),
    shop_notification_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], ShopNotificationEntity.prototype, "shopOrderCart", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", Number)
], ShopNotificationEntity.prototype, "shopSupportRequestId", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopSupportRequestEntity;
    }),
    shop_notification_entity_ts_metadata("design:type", typeof ShopSupportRequestEntity === "undefined" ? Object : ShopSupportRequestEntity)
], ShopNotificationEntity.prototype, "shopSupportRequest", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", Number)
], ShopNotificationEntity.prototype, "payoutShopTransactionId", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopTransactionEntity;
    }),
    shop_notification_entity_ts_metadata("design:type", typeof ShopTransactionEntity === "undefined" ? Object : ShopTransactionEntity)
], ShopNotificationEntity.prototype, "payoutShopTransaction", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_notification_entity_ts_metadata("design:type", Number)
], ShopNotificationEntity.prototype, "shopFeedbackId", void 0);
shop_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopFeedbackEntity;
    }),
    shop_notification_entity_ts_metadata("design:type", typeof ShopFeedbackEntity === "undefined" ? Object : ShopFeedbackEntity)
], ShopNotificationEntity.prototype, "shopFeedback", void 0);
ShopNotificationEntity = shop_notification_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_notification')
], ShopNotificationEntity);

;// ../../libs/database/src/lib/entities/shop/shop.entity.ts
function shop_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



























var ShopEntity = function ShopEntity() {
    "use strict";
};
shop_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_entity_ts_metadata("design:type", Number)
], ShopEntity.prototype, "id", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_entity_ts_metadata("design:type", String)
], ShopEntity.prototype, "name", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return PhoneNumber;
    }),
    shop_entity_ts_metadata("design:type", typeof PhoneNumber === "undefined" ? Object : PhoneNumber)
], ShopEntity.prototype, "mobileNumber", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", String)
], ShopEntity.prototype, "email", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", String)
], ShopEntity.prototype, "description", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_entity_ts_metadata("design:type", String)
], ShopEntity.prototype, "address", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'enum',
        enum: ShopStatus,
        default: ShopStatus.PendingSubmission
    }),
    shop_entity_ts_metadata("design:type", typeof ShopStatus === "undefined" ? Object : ShopStatus)
], ShopEntity.prototype, "status", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return PersonalInfo;
    }),
    shop_entity_ts_metadata("design:type", typeof PersonalInfo === "undefined" ? Object : PersonalInfo)
], ShopEntity.prototype, "ownerInformation", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopEntity.prototype, "onlineUntil", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return RatingAggregate;
    }),
    shop_entity_ts_metadata("design:type", typeof RatingAggregate === "undefined" ? Object : RatingAggregate)
], ShopEntity.prototype, "ratingAggregate", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", String)
], ShopEntity.prototype, "password", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)('text', {
        transformer: new WeeklyScheduleTransformer(),
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "weeklySchedule", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    shop_entity_ts_metadata("design:type", Number)
], ShopEntity.prototype, "minimumOrderAmount", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "isExpressDeliveryAvailable", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        nullable: false,
        default: 0
    }),
    shop_entity_ts_metadata("design:type", Number)
], ShopEntity.prototype, "expressDeliveryShopCommission", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "isOnlinePaymentAvailable", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "isCashOnDeliveryAvailable", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "isShopDeliveryAvailable", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopEntity.prototype, "lastActivityAt", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'enum',
        enum: OrderQueueLevel,
        default: OrderQueueLevel.LOW
    }),
    shop_entity_ts_metadata("design:type", typeof OrderQueueLevel === "undefined" ? Object : OrderQueueLevel)
], ShopEntity.prototype, "orderQueueLevel", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)('point', {
        transformer: new PointTransformer()
    }),
    shop_entity_ts_metadata("design:type", typeof Point === "undefined" ? Object : Point)
], ShopEntity.prototype, "location", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_entity_ts_metadata("design:type", String)
], ShopEntity.prototype, "currency", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    shop_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], ShopEntity.prototype, "image", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", Number)
], ShopEntity.prototype, "imageId", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopEntity.prototype, "createdAt", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.UpdateDateColumn)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopEntity.prototype, "updatedAt", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopEntity.prototype, "deletedAt", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return PayoutAccountEntity;
    }, function(payoutAccount) {
        return payoutAccount.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "payoutAccounts", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return PayoutAccountEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    shop_entity_ts_metadata("design:type", typeof PayoutAccountEntity === "undefined" ? Object : PayoutAccountEntity)
], ShopEntity.prototype, "defaultPayoutAccount", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", Number)
], ShopEntity.prototype, "defaultPayoutAccountId", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopCategoryEntity;
    }, function(category) {
        return category.shops;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "categories", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopSubcategoryEntity;
    }, function(subcategory) {
        return subcategory.shops;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "subcategories", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopDeliveryZoneEntity;
    }, function(region) {
        return region.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "deliveryZones", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopFeedbackEntity;
    }, function(feedback) {
        return feedback.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "feedbacks", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopProductPresetEntity;
    }, function(preset) {
        return preset.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "productPresets", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderCartEntity;
    }, function(cart) {
        return cart.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "carts", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopSessionEntity;
    }, function(session) {
        return session.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "sessions", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopWalletEntity;
    }, function(wallet) {
        return wallet.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "wallet", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopNoteEntity;
    }, function(note) {
        return note.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "notes", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopLoginSessionEntity;
    }, function(loginSession) {
        return loginSession.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "loginSessions", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProductEntity;
    }, function(product) {
        return product.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "products", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProductCategoryEntity;
    }, function(productCategory) {
        return productCategory.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "productCategories", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SavedPaymentMethodEntity;
    }, function(savedPaymentMethod) {
        return savedPaymentMethod.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "savedPaymentMethods", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return SavedPaymentMethodEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    shop_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], ShopEntity.prototype, "defaultSavedPaymentMethod", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_entity_ts_metadata("design:type", Number)
], ShopEntity.prototype, "defaultSavedPaymentMethodId", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopToShopDocumentEntity;
    }, function(shopToShopDocument) {
        return shopToShopDocument.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "shopToShopDocuments", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopSupportRequestEntity;
    }, function(supportRequest) {
        return supportRequest.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "supportRequests", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopNotificationEntity;
    }, function(notification) {
        return notification.shop;
    }),
    shop_entity_ts_metadata("design:type", Array)
], ShopEntity.prototype, "notifications", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "pushNotificationNewOrder", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "pushNotificationOrderStatus", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "pushNotificationNewFeedback", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "pushNotificationSupportRequest", void 0);
shop_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    shop_entity_ts_metadata("design:type", Boolean)
], ShopEntity.prototype, "pushNotificationAnnouncements", void 0);
ShopEntity = shop_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop')
], ShopEntity);

;// ../../libs/database/src/lib/entities/payout-account.entity.ts
function payout_account_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function payout_account_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}










var PayoutAccountEntity = function PayoutAccountEntity() {
    "use strict";
};
payout_account_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    payout_account_entity_ts_metadata("design:type", Number)
], PayoutAccountEntity.prototype, "id", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "name", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.payoutAccounts;
    }),
    payout_account_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], PayoutAccountEntity.prototype, "driver", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", Number)
], PayoutAccountEntity.prototype, "driverId", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.payoutAccounts;
    }),
    payout_account_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], PayoutAccountEntity.prototype, "shop", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", Number)
], PayoutAccountEntity.prototype, "shopId", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.payoutAccounts;
    }),
    payout_account_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], PayoutAccountEntity.prototype, "customer", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", Number)
], PayoutAccountEntity.prototype, "customerId", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.payoutAccounts;
    }),
    payout_account_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], PayoutAccountEntity.prototype, "paymentGateway", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", Number)
], PayoutAccountEntity.prototype, "paymentGatewayId", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: SavedPaymentMethodType
    }),
    payout_account_entity_ts_metadata("design:type", typeof SavedPaymentMethodType === "undefined" ? Object : SavedPaymentMethodType)
], PayoutAccountEntity.prototype, "type", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "last4", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "currency", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.payoutAccounts;
    }),
    payout_account_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], PayoutAccountEntity.prototype, "payoutMethod", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payout_account_entity_ts_metadata("design:type", Number)
], PayoutAccountEntity.prototype, "payoutMethodId", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "token", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountNumber", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "routingNumber", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountHolderName", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "bankName", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "branchName", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountHolderAddress", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountHolderCity", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountHolderState", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountHolderZip", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountHolderCountry", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", String)
], PayoutAccountEntity.prototype, "accountHolderPhone", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], PayoutAccountEntity.prototype, "accountHolderDateOfBirth", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    payout_account_entity_ts_metadata("design:type", Boolean)
], PayoutAccountEntity.prototype, "isVerified", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    payout_account_entity_ts_metadata("design:type", Boolean)
], PayoutAccountEntity.prototype, "isDefault", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], PayoutAccountEntity.prototype, "createdAt", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.UpdateDateColumn)({
        nullable: true
    }),
    payout_account_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], PayoutAccountEntity.prototype, "updatedAt", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    payout_account_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], PayoutAccountEntity.prototype, "deletedAt", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(driverTransaction) {
        return driverTransaction.payoutAccount;
    }),
    payout_account_entity_ts_metadata("design:type", Array)
], PayoutAccountEntity.prototype, "driverTransactions", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingTransactionEntity;
    }, function(parkingTransaction) {
        return parkingTransaction.payoutAccount;
    }),
    payout_account_entity_ts_metadata("design:type", Array)
], PayoutAccountEntity.prototype, "parkingTransactions", void 0);
payout_account_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopTransactionEntity;
    }, function(shopTransaction) {
        return shopTransaction.payoutAccount;
    }),
    payout_account_entity_ts_metadata("design:type", Array)
], PayoutAccountEntity.prototype, "shopTransactions", void 0);
PayoutAccountEntity = payout_account_entity_ts_decorate([
    (0,external_typeorm_.Entity)('payout_account')
], PayoutAccountEntity);

;// ../../libs/database/src/lib/entities/taxi/taxi-payout-session-payout-method-detail.entity.ts
function taxi_payout_session_payout_method_detail_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function taxi_payout_session_payout_method_detail_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var TaxiPayoutSessionPayoutMethodDetailEntity = function TaxiPayoutSessionPayoutMethodDetailEntity() {
    "use strict";
};
taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    taxi_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], TaxiPayoutSessionPayoutMethodDetailEntity.prototype, "id", void 0);
taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiPayoutSessionEntity;
    }, function(payoutSession) {
        return payoutSession.payoutMethodDetails;
    }),
    taxi_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof TaxiPayoutSessionEntity === "undefined" ? Object : TaxiPayoutSessionEntity)
], TaxiPayoutSessionPayoutMethodDetailEntity.prototype, "payoutSession", void 0);
taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], TaxiPayoutSessionPayoutMethodDetailEntity.prototype, "payoutSessionId", void 0);
taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.sessions;
    }),
    taxi_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], TaxiPayoutSessionPayoutMethodDetailEntity.prototype, "payoutMethod", void 0);
taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], TaxiPayoutSessionPayoutMethodDetailEntity.prototype, "payoutMethodId", void 0);
taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PayoutSessionStatus,
        default: PayoutSessionStatus.PENDING
    }),
    taxi_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof PayoutSessionStatus === "undefined" ? Object : PayoutSessionStatus)
], TaxiPayoutSessionPayoutMethodDetailEntity.prototype, "status", void 0);
taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(driverTransaction) {
        return driverTransaction.payoutSessionMethod;
    }),
    taxi_payout_session_payout_method_detail_entity_ts_metadata("design:type", Array)
], TaxiPayoutSessionPayoutMethodDetailEntity.prototype, "driverTransactions", void 0);
TaxiPayoutSessionPayoutMethodDetailEntity = taxi_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Entity)('payout_session_payout_method_detail')
], TaxiPayoutSessionPayoutMethodDetailEntity);

;// ../../libs/database/src/lib/entities/taxi/taxi-payout-session.entity.ts
function taxi_payout_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function taxi_payout_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






var TaxiPayoutSessionEntity = function TaxiPayoutSessionEntity() {
    "use strict";
};
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    taxi_payout_session_entity_ts_metadata("design:type", Number)
], TaxiPayoutSessionEntity.prototype, "id", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    taxi_payout_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiPayoutSessionEntity.prototype, "createdAt", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_payout_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiPayoutSessionEntity.prototype, "processedAt", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_payout_session_entity_ts_metadata("design:type", String)
], TaxiPayoutSessionEntity.prototype, "description", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: PayoutSessionStatus.PENDING,
        type: 'enum',
        enum: PayoutSessionStatus
    }),
    taxi_payout_session_entity_ts_metadata("design:type", typeof PayoutSessionStatus === "undefined" ? Object : PayoutSessionStatus)
], TaxiPayoutSessionEntity.prototype, "status", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.payoutSessions;
    }, {
        onDelete: 'CASCADE'
    }),
    (0,external_typeorm_.JoinTable)(),
    taxi_payout_session_entity_ts_metadata("design:type", Array)
], TaxiPayoutSessionEntity.prototype, "payoutMethods", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(driverTransaction) {
        return driverTransaction.payoutSession;
    }),
    taxi_payout_session_entity_ts_metadata("design:type", Array)
], TaxiPayoutSessionEntity.prototype, "driverTransactions", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    taxi_payout_session_entity_ts_metadata("design:type", Number)
], TaxiPayoutSessionEntity.prototype, "totalAmount", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_payout_session_entity_ts_metadata("design:type", String)
], TaxiPayoutSessionEntity.prototype, "currency", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.taxiPayoutSessionsCreated;
    }),
    taxi_payout_session_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], TaxiPayoutSessionEntity.prototype, "createdByOperator", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_payout_session_entity_ts_metadata("design:type", Number)
], TaxiPayoutSessionEntity.prototype, "createdByOperatorId", void 0);
taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiPayoutSessionPayoutMethodDetailEntity;
    }, function(payoutMethodDetail) {
        return payoutMethodDetail.payoutSession;
    }),
    taxi_payout_session_entity_ts_metadata("design:type", Array)
], TaxiPayoutSessionEntity.prototype, "payoutMethodDetails", void 0);
TaxiPayoutSessionEntity = taxi_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('payout_session')
], TaxiPayoutSessionEntity);

;// ../../libs/database/src/lib/entities/payout-method.entity.ts
function payout_method_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function payout_method_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}









var PayoutMethodEntity = function PayoutMethodEntity() {
    "use strict";
};
payout_method_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    payout_method_entity_ts_metadata("design:type", Number)
], PayoutMethodEntity.prototype, "id", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    payout_method_entity_ts_metadata("design:type", Boolean)
], PayoutMethodEntity.prototype, "enabled", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payout_method_entity_ts_metadata("design:type", String)
], PayoutMethodEntity.prototype, "name", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payout_method_entity_ts_metadata("design:type", String)
], PayoutMethodEntity.prototype, "currency", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_method_entity_ts_metadata("design:type", String)
], PayoutMethodEntity.prototype, "description", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PayoutMethodType
    }),
    payout_method_entity_ts_metadata("design:type", typeof PayoutMethodType === "undefined" ? Object : PayoutMethodType)
], PayoutMethodEntity.prototype, "type", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'text'
    }),
    payout_method_entity_ts_metadata("design:type", String)
], PayoutMethodEntity.prototype, "publicKey", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'text'
    }),
    payout_method_entity_ts_metadata("design:type", String)
], PayoutMethodEntity.prototype, "privateKey", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'text'
    }),
    payout_method_entity_ts_metadata("design:type", String)
], PayoutMethodEntity.prototype, "saltKey", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'text'
    }),
    payout_method_entity_ts_metadata("design:type", String)
], PayoutMethodEntity.prototype, "merchantId", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    payout_method_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], PayoutMethodEntity.prototype, "deletedAt", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, function(media) {
        return media.payoutMethod;
    }, {
        nullable: true
    }),
    (0,external_typeorm_.JoinColumn)(),
    payout_method_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], PayoutMethodEntity.prototype, "media", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payout_method_entity_ts_metadata("design:type", Number)
], PayoutMethodEntity.prototype, "mediaId", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return PayoutAccountEntity;
    }, function(payoutAccount) {
        return payoutAccount.payoutMethod;
    }),
    payout_method_entity_ts_metadata("design:type", Array)
], PayoutMethodEntity.prototype, "payoutAccounts", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return TaxiPayoutSessionEntity;
    }, function(payoutSession) {
        return payoutSession.payoutMethods;
    }),
    payout_method_entity_ts_metadata("design:type", Array)
], PayoutMethodEntity.prototype, "payoutSessions", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(driverTransaction) {
        return driverTransaction.payoutMethod;
    }),
    payout_method_entity_ts_metadata("design:type", Array)
], PayoutMethodEntity.prototype, "driverTransactions", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingTransactionEntity;
    }, function(parkingTransaction) {
        return parkingTransaction.payoutMethod;
    }),
    payout_method_entity_ts_metadata("design:type", Array)
], PayoutMethodEntity.prototype, "parkingTransactions", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopTransactionEntity;
    }, function(shopTransaction) {
        return shopTransaction.payoutMethod;
    }),
    payout_method_entity_ts_metadata("design:type", Array)
], PayoutMethodEntity.prototype, "shopTransactions", void 0);
payout_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiPayoutSessionPayoutMethodDetailEntity;
    }, function(payoutSessionPayoutMethodDetail) {
        return payoutSessionPayoutMethodDetail.payoutMethod;
    }),
    payout_method_entity_ts_metadata("design:type", typeof TaxiPayoutSessionPayoutMethodDetailEntity === "undefined" ? Object : TaxiPayoutSessionPayoutMethodDetailEntity)
], PayoutMethodEntity.prototype, "sessions", void 0);
PayoutMethodEntity = payout_method_entity_ts_decorate([
    (0,external_typeorm_.Entity)('payout_method')
], PayoutMethodEntity);

;// ../../libs/database/src/lib/entities/parking/parking-payout-session.entity.ts
function parking_payout_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_payout_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






var ParkingPayoutSessionEntity = function ParkingPayoutSessionEntity() {
    "use strict";
};
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_payout_session_entity_ts_metadata("design:type", Number)
], ParkingPayoutSessionEntity.prototype, "id", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    parking_payout_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingPayoutSessionEntity.prototype, "createdAt", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_payout_session_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingPayoutSessionEntity.prototype, "processedAt", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_payout_session_entity_ts_metadata("design:type", String)
], ParkingPayoutSessionEntity.prototype, "description", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: PayoutSessionStatus.PENDING,
        type: 'enum',
        enum: PayoutSessionStatus
    }),
    parking_payout_session_entity_ts_metadata("design:type", typeof PayoutSessionStatus === "undefined" ? Object : PayoutSessionStatus)
], ParkingPayoutSessionEntity.prototype, "status", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.payoutSessions;
    }, {
        onDelete: 'CASCADE'
    }),
    (0,external_typeorm_.JoinTable)(),
    parking_payout_session_entity_ts_metadata("design:type", Array)
], ParkingPayoutSessionEntity.prototype, "payoutMethods", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingTransactionEntity;
    }, function(parkingTransaction) {
        return parkingTransaction.payoutSession;
    }),
    parking_payout_session_entity_ts_metadata("design:type", Array)
], ParkingPayoutSessionEntity.prototype, "parkingTransactions", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    parking_payout_session_entity_ts_metadata("design:type", Number)
], ParkingPayoutSessionEntity.prototype, "totalAmount", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_payout_session_entity_ts_metadata("design:type", String)
], ParkingPayoutSessionEntity.prototype, "currency", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    parking_payout_session_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ParkingPayoutSessionEntity.prototype, "createdByOperator", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_payout_session_entity_ts_metadata("design:type", Number)
], ParkingPayoutSessionEntity.prototype, "createdByOperatorId", void 0);
parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingPayoutSessionPayoutMethodDetailEntity;
    }, function(payoutMethodDetail) {
        return payoutMethodDetail.payoutSession;
    }),
    parking_payout_session_entity_ts_metadata("design:type", Array)
], ParkingPayoutSessionEntity.prototype, "payoutMethodDetails", void 0);
ParkingPayoutSessionEntity = parking_payout_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_payout_session')
], ParkingPayoutSessionEntity);

;// ../../libs/database/src/lib/entities/parking/parking-payout-session-payout-method-detail.entity.ts
function parking_payout_session_payout_method_detail_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_payout_session_payout_method_detail_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ParkingPayoutSessionPayoutMethodDetailEntity = function ParkingPayoutSessionPayoutMethodDetailEntity() {
    "use strict";
};
parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], ParkingPayoutSessionPayoutMethodDetailEntity.prototype, "id", void 0);
parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkingPayoutSessionEntity;
    }, function(payoutSession) {
        return payoutSession.payoutMethodDetails;
    }),
    parking_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof ParkingPayoutSessionEntity === "undefined" ? Object : ParkingPayoutSessionEntity)
], ParkingPayoutSessionPayoutMethodDetailEntity.prototype, "payoutSession", void 0);
parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], ParkingPayoutSessionPayoutMethodDetailEntity.prototype, "payoutSessionId", void 0);
parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.sessions;
    }),
    parking_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], ParkingPayoutSessionPayoutMethodDetailEntity.prototype, "payoutMethod", void 0);
parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_payout_session_payout_method_detail_entity_ts_metadata("design:type", Number)
], ParkingPayoutSessionPayoutMethodDetailEntity.prototype, "payoutMethodId", void 0);
parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PayoutSessionStatus,
        default: PayoutSessionStatus.PENDING
    }),
    parking_payout_session_payout_method_detail_entity_ts_metadata("design:type", typeof PayoutSessionStatus === "undefined" ? Object : PayoutSessionStatus)
], ParkingPayoutSessionPayoutMethodDetailEntity.prototype, "status", void 0);
parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingTransactionEntity;
    }, function(parkingTransaction) {
        return parkingTransaction.payoutSessionMethod;
    }),
    parking_payout_session_payout_method_detail_entity_ts_metadata("design:type", Array)
], ParkingPayoutSessionPayoutMethodDetailEntity.prototype, "parkingTransactions", void 0);
ParkingPayoutSessionPayoutMethodDetailEntity = parking_payout_session_payout_method_detail_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_payout_session_payout_method_detail')
], ParkingPayoutSessionPayoutMethodDetailEntity);

;// ../../libs/database/src/lib/entities/parking/parking-transaction.entity.ts
function parking_transaction_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_transaction_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}















var ParkingTransactionEntity = function ParkingTransactionEntity() {
    "use strict";
};
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "id", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingTransactionEntity.prototype, "createdAt", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingTransactionEntity.prototype, "transactionDate", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionStatus,
        default: TransactionStatus.Processing
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof TransactionStatus === "undefined" ? Object : TransactionStatus)
], ParkingTransactionEntity.prototype, "status", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionType
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof TransactionType === "undefined" ? Object : TransactionType)
], ParkingTransactionEntity.prototype, "type", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkingTransactionDebitType,
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof ParkingTransactionDebitType === "undefined" ? Object : ParkingTransactionDebitType)
], ParkingTransactionEntity.prototype, "debitType", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkingTransactionCreditType,
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof ParkingTransactionCreditType === "undefined" ? Object : ParkingTransactionCreditType)
], ParkingTransactionEntity.prototype, "creditType", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: '3'
    }),
    (0,external_typeorm_.Index)(),
    parking_transaction_entity_ts_metadata("design:type", String)
], ParkingTransactionEntity.prototype, "currency", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "amount", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", String)
], ParkingTransactionEntity.prototype, "documentNumber", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", String)
], ParkingTransactionEntity.prototype, "description", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkingTransactionEntity.prototype, "customer", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "customerId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SavedPaymentMethodEntity;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], ParkingTransactionEntity.prototype, "paymentMethod", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "paymentMethodId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], ParkingTransactionEntity.prototype, "paymentGateway", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "paymentGatewayId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ParkingTransactionEntity.prototype, "staff", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "staffId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.parkingTransactions;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ParkingTransactionEntity.prototype, "parkOrder", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "parkOrderId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkingPayoutSessionEntity;
    }, function(session) {
        return session.parkingTransactions;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof ParkingPayoutSessionEntity === "undefined" ? Object : ParkingPayoutSessionEntity)
], ParkingTransactionEntity.prototype, "payoutSession", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "payoutSessionId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutAccountEntity;
    }, function(payoutAccount) {
        return payoutAccount.parkingTransactions;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof PayoutAccountEntity === "undefined" ? Object : PayoutAccountEntity)
], ParkingTransactionEntity.prototype, "payoutAccount", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "payoutAccountId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.parkingTransactions;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], ParkingTransactionEntity.prototype, "payoutMethod", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "payoutMethodId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkingPayoutSessionPayoutMethodDetailEntity;
    }, function(payoutSessionMethod) {
        return payoutSessionMethod.parkingTransactions;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof ParkingPayoutSessionPayoutMethodDetailEntity === "undefined" ? Object : ParkingPayoutSessionPayoutMethodDetailEntity)
], ParkingTransactionEntity.prototype, "payoutSessionMethod", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "payoutSessionMethodId", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkSpotEntity;
    }, function(parkSpot) {
        return parkSpot.transactions;
    }),
    parking_transaction_entity_ts_metadata("design:type", typeof ParkSpotEntity === "undefined" ? Object : ParkSpotEntity)
], ParkingTransactionEntity.prototype, "parkSpot", void 0);
parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_transaction_entity_ts_metadata("design:type", Number)
], ParkingTransactionEntity.prototype, "parkSpotId", void 0);
ParkingTransactionEntity = parking_transaction_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_transaction')
], ParkingTransactionEntity);

;// ../../libs/database/src/lib/entities/parking/park-spot.entity.ts
function park_spot_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function park_spot_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}















var ParkSpotEntity = function ParkSpotEntity() {
    "use strict";
};
park_spot_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "id", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkSpotEntity.prototype, "createdAt", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkSpotStatus,
        default: ParkSpotStatus.Pending,
        nullable: false
    }),
    park_spot_entity_ts_metadata("design:type", typeof ParkSpotStatus === "undefined" ? Object : ParkSpotStatus)
], ParkSpotEntity.prototype, "status", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkSpotType,
        default: ParkSpotType.PERSONAL,
        nullable: false
    }),
    park_spot_entity_ts_metadata("design:type", typeof ParkSpotType === "undefined" ? Object : ParkSpotType)
], ParkSpotEntity.prototype, "type", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.parkSpots;
    }),
    park_spot_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkSpotEntity.prototype, "owner", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "ownerId", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "phoneNumber", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "email", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "name", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, {
        nullable: true
    }),
    (0,external_typeorm_.JoinColumn)(),
    park_spot_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], ParkSpotEntity.prototype, "mainImage", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "mainImageId", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkSpotEntity.prototype, "lastActivityAt", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('point', {
        transformer: new PointTransformer()
    }),
    park_spot_entity_ts_metadata("design:type", typeof Point === "undefined" ? Object : Point)
], ParkSpotEntity.prototype, "location", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "address", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return RatingAggregate;
    }),
    park_spot_entity_ts_metadata("design:type", typeof RatingAggregate === "undefined" ? Object : RatingAggregate)
], ParkSpotEntity.prototype, "ratingAggregate", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('text', {
        transformer: new WeeklyScheduleTransformer(),
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", Array)
], ParkSpotEntity.prototype, "weeklySchedule", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "openHour", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "closeHour", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    park_spot_entity_ts_metadata("design:type", Boolean)
], ParkSpotEntity.prototype, "acceptNewRequest", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    park_spot_entity_ts_metadata("design:type", Boolean)
], ParkSpotEntity.prototype, "acceptExtendRequest", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        nullable: true,
        enum: ParkSpotCarSize
    }),
    park_spot_entity_ts_metadata("design:type", typeof ParkSpotCarSize === "undefined" ? Object : ParkSpotCarSize)
], ParkSpotEntity.prototype, "carSize", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "carPrice", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "carSpaces", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "bikePrice", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "bikeSpaces", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "truckPrice", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    park_spot_entity_ts_metadata("design:type", Number)
], ParkSpotEntity.prototype, "truckSpaces", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 'USD'
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "currency", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "description", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "operatorName", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "operatorPhoneCountryCode", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_spot_entity_ts_metadata("design:type", String)
], ParkSpotEntity.prototype, "operatorPhoneNumber", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return MediaEntity;
    }, function(media) {
        return media.parkSpot;
    }),
    park_spot_entity_ts_metadata("design:type", Array)
], ParkSpotEntity.prototype, "images", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: ParkSpotFacility,
        default: []
    }),
    park_spot_entity_ts_metadata("design:type", Array)
], ParkSpotEntity.prototype, "facilities", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.parkSpot;
    }),
    park_spot_entity_ts_metadata("design:type", Array)
], ParkSpotEntity.prototype, "parkOrders", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingFeedbackEntity;
    }, function(review) {
        return review.parkSpot;
    }),
    park_spot_entity_ts_metadata("design:type", Array)
], ParkSpotEntity.prototype, "feedbacks", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkSpotNoteEntity;
    }, function(note) {
        return note.parkSpot;
    }),
    park_spot_entity_ts_metadata("design:type", typeof ParkSpotNoteEntity === "undefined" ? Object : ParkSpotNoteEntity)
], ParkSpotEntity.prototype, "notes", void 0);
park_spot_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingTransactionEntity;
    }, function(transaction) {
        return transaction.parkSpot;
    }),
    park_spot_entity_ts_metadata("design:type", Array)
], ParkSpotEntity.prototype, "transactions", void 0);
ParkSpotEntity = park_spot_entity_ts_decorate([
    (0,external_typeorm_.Entity)('park_spot')
], ParkSpotEntity);

;// ../../libs/database/src/lib/entities/parking/enums/park-order-status.enum.ts

var ParkOrderStatus;
(function(ParkOrderStatus) {
    ParkOrderStatus["PENDING"] = "pending";
    ParkOrderStatus["PAID"] = "paid";
    ParkOrderStatus["CANCELLED"] = "cancelled";
    ParkOrderStatus["ACCEPTED"] = "accepted";
    ParkOrderStatus["REJECTED"] = "rejected";
    ParkOrderStatus["COMPLETED"] = "completed";
})(ParkOrderStatus || (ParkOrderStatus = {}));
(0,graphql_.registerEnumType)(ParkOrderStatus, {
    name: 'ParkOrderStatus',
    description: 'park order status, Pending is the default status prior to payment'
});

;// ../../libs/database/src/lib/entities/parking/enums/park-spot-vehicle-type.enum.ts

var ParkSpotVehicleType;
(function(ParkSpotVehicleType) {
    ParkSpotVehicleType["Car"] = "car";
    ParkSpotVehicleType["Bike"] = "bike";
    ParkSpotVehicleType["Truck"] = "truck";
})(ParkSpotVehicleType || (ParkSpotVehicleType = {}));
(0,graphql_.registerEnumType)(ParkSpotVehicleType, {
    name: 'ParkSpotVehicleType',
    description: 'The type of ride that can be parked in a park spot'
});

;// ../../libs/database/src/lib/entities/parking/enums/parking-customer-notification-type.enum.ts

var ParkingCustomerNotificationType;
(function(ParkingCustomerNotificationType) {
    ParkingCustomerNotificationType["booked"] = "booked";
    ParkingCustomerNotificationType["cancelled"] = "cancelled";
    ParkingCustomerNotificationType["expiring"] = "expiring";
    ParkingCustomerNotificationType["rate"] = "rate";
})(ParkingCustomerNotificationType || (ParkingCustomerNotificationType = {}));
(0,graphql_.registerEnumType)(ParkingCustomerNotificationType, {
    name: 'ParkingCustomerNotificationType',
    description: 'The type of notification that a customer can receive'
});

;// ../../libs/database/src/lib/entities/parking/parking-customer-notification.entity.ts
function parking_customer_notification_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_customer_notification_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var ParkingCustomerNotificationEntity = function ParkingCustomerNotificationEntity() {
    "use strict";
};
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_customer_notification_entity_ts_metadata("design:type", Number)
], ParkingCustomerNotificationEntity.prototype, "id", void 0);
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkingCustomerNotificationType
    }),
    parking_customer_notification_entity_ts_metadata("design:type", typeof ParkingCustomerNotificationType === "undefined" ? Object : ParkingCustomerNotificationType)
], ParkingCustomerNotificationEntity.prototype, "type", void 0);
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    parking_customer_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingCustomerNotificationEntity.prototype, "createdAt", void 0);
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_customer_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingCustomerNotificationEntity.prototype, "expireAt", void 0);
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.customerNotifications;
    }),
    parking_customer_notification_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ParkingCustomerNotificationEntity.prototype, "parkOrder", void 0);
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_customer_notification_entity_ts_metadata("design:type", Number)
], ParkingCustomerNotificationEntity.prototype, "parkOrderId", void 0);
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }),
    parking_customer_notification_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkingCustomerNotificationEntity.prototype, "customer", void 0);
parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_customer_notification_entity_ts_metadata("design:type", Number)
], ParkingCustomerNotificationEntity.prototype, "customerId", void 0);
ParkingCustomerNotificationEntity = parking_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_customer_notification')
], ParkingCustomerNotificationEntity);

;// ../../libs/database/src/lib/entities/parking/enums/parking-provider-notification-type.enum.ts

var ParkingProviderNotificationType;
(function(ParkingProviderNotificationType) {
    ParkingProviderNotificationType["booked"] = "booked";
    ParkingProviderNotificationType["cancelled"] = "cancelled";
    ParkingProviderNotificationType["expiring"] = "expiring";
})(ParkingProviderNotificationType || (ParkingProviderNotificationType = {}));
(0,graphql_.registerEnumType)(ParkingProviderNotificationType, {
    name: 'ParkingProviderNotificationType',
    description: 'The type of notification that a provider can receive'
});

;// ../../libs/database/src/lib/entities/parking/parking-provider-notification.entity.ts
function parking_provider_notification_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_provider_notification_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ParkingProviderNotificationEntity = function ParkingProviderNotificationEntity() {
    "use strict";
};
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_provider_notification_entity_ts_metadata("design:type", Number)
], ParkingProviderNotificationEntity.prototype, "id", void 0);
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkingCustomerNotificationType
    }),
    parking_provider_notification_entity_ts_metadata("design:type", typeof ParkingProviderNotificationType === "undefined" ? Object : ParkingProviderNotificationType)
], ParkingProviderNotificationEntity.prototype, "type", void 0);
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    parking_provider_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingProviderNotificationEntity.prototype, "createdAt", void 0);
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_provider_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingProviderNotificationEntity.prototype, "expireAt", void 0);
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.providerNotifications;
    }),
    parking_provider_notification_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ParkingProviderNotificationEntity.prototype, "parkOrder", void 0);
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_provider_notification_entity_ts_metadata("design:type", Number)
], ParkingProviderNotificationEntity.prototype, "parkOrderId", void 0);
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }),
    parking_provider_notification_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkingProviderNotificationEntity.prototype, "provider", void 0);
parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_provider_notification_entity_ts_metadata("design:type", Number)
], ParkingProviderNotificationEntity.prototype, "providerId", void 0);
ParkingProviderNotificationEntity = parking_provider_notification_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_provider_notification')
], ParkingProviderNotificationEntity);

;// ../../libs/database/src/lib/entities/parking/park-order-note.entity.ts
function park_order_note_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function park_order_note_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ParkOrderNoteEntity = function ParkOrderNoteEntity() {
    "use strict";
};
park_order_note_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    park_order_note_entity_ts_metadata("design:type", Number)
], ParkOrderNoteEntity.prototype, "id", void 0);
park_order_note_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    park_order_note_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderNoteEntity.prototype, "createdAt", void 0);
park_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_note_entity_ts_metadata("design:type", Number)
], ParkOrderNoteEntity.prototype, "parkOrderId", void 0);
park_order_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.notes;
    }),
    park_order_note_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ParkOrderNoteEntity.prototype, "parkOrder", void 0);
park_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)('text'),
    park_order_note_entity_ts_metadata("design:type", String)
], ParkOrderNoteEntity.prototype, "note", void 0);
park_order_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    park_order_note_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ParkOrderNoteEntity.prototype, "staff", void 0);
park_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_note_entity_ts_metadata("design:type", Number)
], ParkOrderNoteEntity.prototype, "staffId", void 0);
ParkOrderNoteEntity = park_order_note_entity_ts_decorate([
    (0,external_typeorm_.Entity)('park_order_note')
], ParkOrderNoteEntity);

;// ../../libs/database/src/lib/entities/parking/parking-support-request-activity.entity.ts
function parking_support_request_activity_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_support_request_activity_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ParkingSupportRequestActivityEntity = function ParkingSupportRequestActivityEntity() {
    "use strict";
};
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_support_request_activity_entity_ts_metadata("design:type", Number)
], ParkingSupportRequestActivityEntity.prototype, "id", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    parking_support_request_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingSupportRequestActivityEntity.prototype, "createdAt", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintActivityType
    }),
    parking_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintActivityType === "undefined" ? Object : ComplaintActivityType)
], ParkingSupportRequestActivityEntity.prototype, "type", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.complaintActivities;
    }),
    parking_support_request_activity_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], ParkingSupportRequestActivityEntity.prototype, "actor", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    parking_support_request_activity_entity_ts_metadata("design:type", Array)
], ParkingSupportRequestActivityEntity.prototype, "assignedToStaffs", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    parking_support_request_activity_entity_ts_metadata("design:type", Array)
], ParkingSupportRequestActivityEntity.prototype, "unassignedFromStaffs", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_support_request_activity_entity_ts_metadata("design:type", String)
], ParkingSupportRequestActivityEntity.prototype, "comment", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    parking_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ParkingSupportRequestActivityEntity.prototype, "statusFrom", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    parking_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ParkingSupportRequestActivityEntity.prototype, "statusTo", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkingSupportRequestEntity;
    }, function(supportRequest) {
        return supportRequest.activities;
    }),
    parking_support_request_activity_entity_ts_metadata("design:type", typeof ParkingSupportRequestEntity === "undefined" ? Object : ParkingSupportRequestEntity)
], ParkingSupportRequestActivityEntity.prototype, "supportRequest", void 0);
parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_support_request_activity_entity_ts_metadata("design:type", Number)
], ParkingSupportRequestActivityEntity.prototype, "supportRequestId", void 0);
ParkingSupportRequestActivityEntity = parking_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_support_request_activity')
], ParkingSupportRequestActivityEntity);

;// ../../libs/database/src/lib/entities/parking/parking-support-request.entity.ts
function parking_support_request_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_support_request_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ParkingSupportRequestEntity = function ParkingSupportRequestEntity() {
    "use strict";
};
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_support_request_entity_ts_metadata("design:type", Number)
], ParkingSupportRequestEntity.prototype, "id", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    parking_support_request_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingSupportRequestEntity.prototype, "createdAt", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.supportRequests;
    }),
    parking_support_request_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ParkingSupportRequestEntity.prototype, "parkOrder", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    parking_support_request_entity_ts_metadata("design:type", Number)
], ParkingSupportRequestEntity.prototype, "parkOrderId", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }, function(staff) {
        return staff.assignedParkingSupportRequests;
    }),
    (0,external_typeorm_.JoinTable)(),
    parking_support_request_entity_ts_metadata("design:type", Array)
], ParkingSupportRequestEntity.prototype, "assignedToStaffs", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_support_request_entity_ts_metadata("design:type", Boolean)
], ParkingSupportRequestEntity.prototype, "requestedByOwner", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_support_request_entity_ts_metadata("design:type", String)
], ParkingSupportRequestEntity.prototype, "subject", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)('text', {
        nullable: true
    }),
    parking_support_request_entity_ts_metadata("design:type", String)
], ParkingSupportRequestEntity.prototype, "content", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        default: ComplaintStatus.Submitted
    }),
    parking_support_request_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], ParkingSupportRequestEntity.prototype, "status", void 0);
parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingSupportRequestActivityEntity;
    }, function(activity) {
        return activity.supportRequest;
    }),
    parking_support_request_entity_ts_metadata("design:type", Array)
], ParkingSupportRequestEntity.prototype, "activities", void 0);
ParkingSupportRequestEntity = parking_support_request_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_support_request')
], ParkingSupportRequestEntity);

;// ../../libs/database/src/lib/entities/parking/park-order-activity.entity.ts
function park_order_activity_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function park_order_activity_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ParkOrderActivityEntity = function ParkOrderActivityEntity() {
    "use strict";
};
park_order_activity_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    park_order_activity_entity_ts_metadata("design:type", Number)
], ParkOrderActivityEntity.prototype, "id", void 0);
park_order_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_order_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderActivityEntity.prototype, "updatedAt", void 0);
park_order_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkOrderStatus
    }),
    park_order_activity_entity_ts_metadata("design:type", typeof ParkOrderStatus === "undefined" ? Object : ParkOrderStatus)
], ParkOrderActivityEntity.prototype, "status", void 0);
park_order_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.activities;
    }),
    park_order_activity_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], ParkOrderActivityEntity.prototype, "parkOrder", void 0);
park_order_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_order_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderActivityEntity.prototype, "expectedBy", void 0);
park_order_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_activity_entity_ts_metadata("design:type", Number)
], ParkOrderActivityEntity.prototype, "parkOrderId", void 0);
ParkOrderActivityEntity = park_order_activity_entity_ts_decorate([
    (0,external_typeorm_.Entity)('park_order_activity')
], ParkOrderActivityEntity);

;// ../../libs/database/src/lib/entities/parking/park-order.entity.ts
function park_order_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function park_order_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


















var ParkOrderEntity = function ParkOrderEntity() {
    "use strict";
};
park_order_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    park_order_entity_ts_metadata("design:type", Number)
], ParkOrderEntity.prototype, "id", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.ownedParkOrders;
    }),
    park_order_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkOrderEntity.prototype, "spotOwner", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_entity_ts_metadata("design:type", Number)
], ParkOrderEntity.prototype, "spotOwnerId", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkSpotVehicleType,
        default: ParkSpotVehicleType.Car
    }),
    park_order_entity_ts_metadata("design:type", typeof ParkSpotVehicleType === "undefined" ? Object : ParkSpotVehicleType)
], ParkOrderEntity.prototype, "vehicleType", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkSpotCarSize,
        nullable: true
    }),
    park_order_entity_ts_metadata("design:type", typeof ParkSpotCarSize === "undefined" ? Object : ParkSpotCarSize)
], ParkOrderEntity.prototype, "carSize", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 'USD'
    }),
    park_order_entity_ts_metadata("design:type", String)
], ParkOrderEntity.prototype, "currency", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.ownedParkOrders;
    }),
    park_order_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkOrderEntity.prototype, "carOwner", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_entity_ts_metadata("design:type", Number)
], ParkOrderEntity.prototype, "carOwnerId", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkSpotEntity;
    }, function(parkSpot) {
        return parkSpot.parkOrders;
    }),
    park_order_entity_ts_metadata("design:type", typeof ParkSpotEntity === "undefined" ? Object : ParkSpotEntity)
], ParkOrderEntity.prototype, "parkSpot", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_entity_ts_metadata("design:type", Number)
], ParkOrderEntity.prototype, "parkSpotId", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    park_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderEntity.prototype, "createdAt", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PaymentMode
    }),
    park_order_entity_ts_metadata("design:type", typeof PaymentMode === "undefined" ? Object : PaymentMode)
], ParkOrderEntity.prototype, "paymentMode", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderEntity.prototype, "enterTime", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    park_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderEntity.prototype, "exitTime", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    park_order_entity_ts_metadata("design:type", Number)
], ParkOrderEntity.prototype, "price", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderEntity.prototype, "extendedExitTime", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SavedPaymentMethodEntity;
    }, function(paymentMethod) {
        return paymentMethod.parkOrders;
    }),
    park_order_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], ParkOrderEntity.prototype, "savedPaymentMethod", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_order_entity_ts_metadata("design:type", Number)
], ParkOrderEntity.prototype, "savedPaymentMethodId", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.parkOrders;
    }),
    park_order_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], ParkOrderEntity.prototype, "paymentGateway", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    park_order_entity_ts_metadata("design:type", Number)
], ParkOrderEntity.prototype, "paymentGatewayId", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PaymentMode
    }),
    park_order_entity_ts_metadata("design:type", typeof PaymentMode === "undefined" ? Object : PaymentMode)
], ParkOrderEntity.prototype, "paymentMethod", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ParkOrderStatus,
        default: ParkOrderStatus.PENDING
    }),
    park_order_entity_ts_metadata("design:type", typeof ParkOrderStatus === "undefined" ? Object : ParkOrderStatus)
], ParkOrderEntity.prototype, "status", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingCustomerNotificationEntity;
    }, function(notification) {
        return notification.parkOrder;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "customerNotifications", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingProviderNotificationEntity;
    }, function(notification) {
        return notification.parkOrder;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "providerNotifications", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingFeedbackEntity;
    }, function(feedback) {
        return feedback.order;
    }),
    park_order_entity_ts_metadata("design:type", typeof ParkingFeedbackEntity === "undefined" ? Object : ParkingFeedbackEntity)
], ParkOrderEntity.prototype, "feedbacks", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderNoteEntity;
    }, function(parkOrderNote) {
        return parkOrderNote.parkOrder;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "notes", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderActivityEntity;
    }, function(activity) {
        return activity.parkOrder;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "activities", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(riderTransaction) {
        return riderTransaction.parkOrderCustomer;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "customerTransactions", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(riderTransaction) {
        return riderTransaction.parkOrderParkOwner;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "parkOwnerTransactions", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProviderTransactionEntity;
    }, function(ProviderTransactionEntity) {
        return ProviderTransactionEntity.parkOrder;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "providerTransactions", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingSupportRequestEntity;
    }, function(supportRequest) {
        return supportRequest.activities;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "supportRequests", void 0);
park_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingTransactionEntity;
    }, function(parkTransaction) {
        return parkTransaction.parkOrder;
    }),
    park_order_entity_ts_metadata("design:type", Array)
], ParkOrderEntity.prototype, "parkingTransactions", void 0);
ParkOrderEntity = park_order_entity_ts_decorate([
    (0,external_typeorm_.Entity)('park_order')
], ParkOrderEntity);

;// ../../libs/database/src/lib/entities/enums/country.enum.ts

var Country;
(function(Country) {
    Country["AFGHANISTAN"] = "Afghanistan";
    Country["ALBANIA"] = "Albania";
    Country["ALGERIA"] = "Algeria";
    Country["ANDORRA"] = "Andorra";
    Country["ANGOLA"] = "Angola";
    Country["ANTIGUA_AND_BARBUDA"] = "Antigua and Barbuda";
    Country["ARGENTINA"] = "Argentina";
    Country["ARMENIA"] = "Armenia";
    Country["AUSTRALIA"] = "Australia";
    Country["AUSTRIA"] = "Austria";
    Country["AZERBAIJAN"] = "Azerbaijan";
    Country["BAHAMAS"] = "Bahamas";
    Country["BAHRAIN"] = "Bahrain";
    Country["BANGLADESH"] = "Bangladesh";
    Country["BARBADOS"] = "Barbados";
    Country["BELARUS"] = "Belarus";
    Country["BELGIUM"] = "Belgium";
    Country["BELIZE"] = "Belize";
    Country["BENIN"] = "Benin";
    Country["BHUTAN"] = "Bhutan";
    Country["BOLIVIA"] = "Bolivia";
    Country["BOSNIA_AND_HERZEGOVINA"] = "Bosnia and Herzegovina";
    Country["BOTSWANA"] = "Botswana";
    Country["BRAZIL"] = "Brazil";
    Country["BRUNEI"] = "Brunei";
    Country["BULGARIA"] = "Bulgaria";
    Country["BURKINA_FASO"] = "Burkina Faso";
    Country["BURUNDI"] = "Burundi";
    Country["CABO_VERDE"] = "Cabo Verde";
    Country["CAMBODIA"] = "Cambodia";
    Country["CAMEROON"] = "Cameroon";
    Country["CANADA"] = "Canada";
    Country["CENTRAL_AFRICAN_REPUBLIC"] = "Central African Republic";
    Country["CHAD"] = "Chad";
    Country["CHILE"] = "Chile";
    Country["CHINA"] = "China";
    Country["COLOMBIA"] = "Colombia";
    Country["COMOROS"] = "Comoros";
    Country["CONGO_DEMOCRATIC_REPUBLIC"] = "Congo (Democratic Republic)";
    Country["CONGO_REPUBLIC"] = "Congo (Republic)";
    Country["COSTA_RICA"] = "Costa Rica";
    Country["CROATIA"] = "Croatia";
    Country["CUBA"] = "Cuba";
    Country["CYPRUS"] = "Cyprus";
    Country["CZECH_REPUBLIC"] = "Czech Republic";
    Country["DENMARK"] = "Denmark";
    Country["DJIBOUTI"] = "Djibouti";
    Country["DOMINICA"] = "Dominica";
    Country["DOMINICAN_REPUBLIC"] = "Dominican Republic";
    Country["ECUADOR"] = "Ecuador";
    Country["EGYPT"] = "Egypt";
    Country["EL_SALVADOR"] = "El Salvador";
    Country["EQUATORIAL_GUINEA"] = "Equatorial Guinea";
    Country["ERITREA"] = "Eritrea";
    Country["ESTONIA"] = "Estonia";
    Country["ESWATINI"] = "Eswatini";
    Country["ETHIOPIA"] = "Ethiopia";
    Country["FIJI"] = "Fiji";
    Country["FINLAND"] = "Finland";
    Country["FRANCE"] = "France";
    Country["GABON"] = "Gabon";
    Country["GAMBIA"] = "Gambia";
    Country["GEORGIA"] = "Georgia";
    Country["GERMANY"] = "Germany";
    Country["GHANA"] = "Ghana";
    Country["GREECE"] = "Greece";
    Country["GRENADA"] = "Grenada";
    Country["GUATEMALA"] = "Guatemala";
    Country["GUINEA"] = "Guinea";
    Country["GUINEA_BISSAU"] = "Guinea-Bissau";
    Country["GUYANA"] = "Guyana";
    Country["HAITI"] = "Haiti";
    Country["HONDURAS"] = "Honduras";
    Country["HUNGARY"] = "Hungary";
    Country["ICELAND"] = "Iceland";
    Country["INDIA"] = "India";
    Country["INDONESIA"] = "Indonesia";
    Country["IRAN"] = "Iran";
    Country["IRAQ"] = "Iraq";
    Country["IRELAND"] = "Ireland";
    Country["ISRAEL"] = "Israel";
    Country["ITALY"] = "Italy";
    Country["JAMAICA"] = "Jamaica";
    Country["JAPAN"] = "Japan";
    Country["JORDAN"] = "Jordan";
    Country["KAZAKHSTAN"] = "Kazakhstan";
    Country["KENYA"] = "Kenya";
    Country["KIRIBATI"] = "Kiribati";
    Country["KOREA_NORTH"] = "Korea (North)";
    Country["KOREA_SOUTH"] = "Korea (South)";
    Country["KOSOVO"] = "Kosovo";
    Country["KUWAIT"] = "Kuwait";
    Country["KYRGYZSTAN"] = "Kyrgyzstan";
    Country["LAOS"] = "Laos";
    Country["LATVIA"] = "Latvia";
    Country["LEBANON"] = "Lebanon";
    Country["LESOTHO"] = "Lesotho";
    Country["LIBERIA"] = "Liberia";
    Country["LIBYA"] = "Libya";
    Country["LIECHTENSTEIN"] = "Liechtenstein";
    Country["LITHUANIA"] = "Lithuania";
    Country["LUXEMBOURG"] = "Luxembourg";
    Country["MADAGASCAR"] = "Madagascar";
    Country["MALAWI"] = "Malawi";
    Country["MALAYSIA"] = "Malaysia";
    Country["MALDIVES"] = "Maldives";
    Country["MALI"] = "Mali";
    Country["MALTA"] = "Malta";
    Country["MARSHALL_ISLANDS"] = "Marshall Islands";
    Country["MAURITANIA"] = "Mauritania";
    Country["MAURITIUS"] = "Mauritius";
    Country["MEXICO"] = "Mexico";
    Country["MICRONESIA"] = "Micronesia";
    Country["MOLDOVA"] = "Moldova";
    Country["MONACO"] = "Monaco";
    Country["MONGOLIA"] = "Mongolia";
    Country["MONTENEGRO"] = "Montenegro";
    Country["MOROCCO"] = "Morocco";
    Country["MOZAMBIQUE"] = "Mozambique";
    Country["MYANMAR"] = "Myanmar";
    Country["NAMIBIA"] = "Namibia";
    Country["NAURU"] = "Nauru";
    Country["NEPAL"] = "Nepal";
    Country["NETHERLANDS"] = "Netherlands";
    Country["NEW_ZEALAND"] = "New Zealand";
    Country["NICARAGUA"] = "Nicaragua";
    Country["NIGER"] = "Niger";
    Country["NIGERIA"] = "Nigeria";
    Country["NORTH_MACEDONIA"] = "North Macedonia";
    Country["NORWAY"] = "Norway";
    Country["OMAN"] = "Oman";
    Country["PAKISTAN"] = "Pakistan";
    Country["PALAU"] = "Palau";
    Country["PALESTINE"] = "Palestine";
    Country["PANAMA"] = "Panama";
    Country["PAPUA_NEW_GUINEA"] = "Papua New Guinea";
    Country["PARAGUAY"] = "Paraguay";
    Country["PERU"] = "Peru";
    Country["PHILIPPINES"] = "Philippines";
    Country["POLAND"] = "Poland";
    Country["PORTUGAL"] = "Portugal";
    Country["QATAR"] = "Qatar";
    Country["ROMANIA"] = "Romania";
    Country["RUSSIA"] = "Russia";
    Country["RWANDA"] = "Rwanda";
    Country["SAINT_KITTS_AND_NEVIS"] = "Saint Kitts and Nevis";
    Country["SAINT_LUCIA"] = "Saint Lucia";
    Country["SAINT_VINCENT_AND_THE_GRENADINES"] = "Saint Vincent and the Grenadines";
    Country["SAMOA"] = "Samoa";
    Country["SAN_MARINO"] = "San Marino";
    Country["SAO_TOME_AND_PRINCIPE"] = "Sao Tome and Principe";
    Country["SAUDI_ARABIA"] = "Saudi Arabia";
    Country["SENEGAL"] = "Senegal";
    Country["SERBIA"] = "Serbia";
    Country["SEYCHELLES"] = "Seychelles";
    Country["SIERRA_LEONE"] = "Sierra Leone";
    Country["SINGAPORE"] = "Singapore";
    Country["SLOVAKIA"] = "Slovakia";
    Country["SLOVENIA"] = "Slovenia";
    Country["SOLOMON_ISLANDS"] = "Solomon Islands";
    Country["SOMALIA"] = "Somalia";
    Country["SOUTH_AFRICA"] = "South Africa";
    Country["SOUTH_SUDAN"] = "South Sudan";
    Country["SPAIN"] = "Spain";
    Country["SRI_LANKA"] = "Sri Lanka";
    Country["SUDAN"] = "Sudan";
    Country["SURINAME"] = "Suriname";
    Country["SWEDEN"] = "Sweden";
    Country["SWITZERLAND"] = "Switzerland";
    Country["SYRIA"] = "Syria";
    Country["TAIWAN"] = "Taiwan";
    Country["TAJIKISTAN"] = "Tajikistan";
    Country["TANZANIA"] = "Tanzania";
    Country["THAILAND"] = "Thailand";
    Country["TIMOR_LESTE"] = "Timor-Leste";
    Country["TOGO"] = "Togo";
    Country["TONGA"] = "Tonga";
    Country["TRINIDAD_AND_TOBAGO"] = "Trinidad and Tobago";
    Country["TUNISIA"] = "Tunisia";
    Country["TURKEY"] = "Turkey";
    Country["TURKMENISTAN"] = "Turkmenistan";
    Country["TUVALU"] = "Tuvalu";
    Country["UGANDA"] = "Uganda";
    Country["UKRAINE"] = "Ukraine";
    Country["UNITED_ARAB_EMIRATES"] = "United Arab Emirates";
    Country["UNITED_KINGDOM"] = "United Kingdom";
    Country["UNITED_STATES"] = "United States";
    Country["URUGUAY"] = "Uruguay";
    Country["UZBEKISTAN"] = "Uzbekistan";
    Country["VANUATU"] = "Vanuatu";
    Country["VATICAN_CITY"] = "Vatican City";
    Country["VENEZUELA"] = "Venezuela";
    Country["VIETNAM"] = "Vietnam";
    Country["YEMEN"] = "Yemen";
    Country["ZAMBIA"] = "Zambia";
    Country["ZIMBABWE"] = "Zimbabwe";
})(Country || (Country = {}));
(0,graphql_.registerEnumType)(Country, {
    name: 'Country',
    description: 'Country'
});

;// ../../libs/database/src/lib/entities/saved-payment-method.entity.ts
function saved_payment_method_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function saved_payment_method_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}











var SavedPaymentMethodEntity = function SavedPaymentMethodEntity() {
    "use strict";
};
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    saved_payment_method_entity_ts_metadata("design:type", Number)
], SavedPaymentMethodEntity.prototype, "id", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    saved_payment_method_entity_ts_metadata("design:type", String)
], SavedPaymentMethodEntity.prototype, "title", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", String)
], SavedPaymentMethodEntity.prototype, "lastFour", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", Boolean)
], SavedPaymentMethodEntity.prototype, "isEnabled", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    saved_payment_method_entity_ts_metadata("design:type", Boolean)
], SavedPaymentMethodEntity.prototype, "isDefault", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: SavedPaymentMethodType
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof SavedPaymentMethodType === "undefined" ? Object : SavedPaymentMethodType)
], SavedPaymentMethodEntity.prototype, "type", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: Country
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof Country === "undefined" ? Object : Country)
], SavedPaymentMethodEntity.prototype, "country", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ProviderBrand,
        nullable: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof ProviderBrand === "undefined" ? Object : ProviderBrand)
], SavedPaymentMethodEntity.prototype, "providerBrand", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], SavedPaymentMethodEntity.prototype, "expiryDate", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", String)
], SavedPaymentMethodEntity.prototype, "holderName", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.savedPaymentMethods;
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], SavedPaymentMethodEntity.prototype, "rider", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", Number)
], SavedPaymentMethodEntity.prototype, "riderId", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.savedPaymentMethods;
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], SavedPaymentMethodEntity.prototype, "driver", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", Number)
], SavedPaymentMethodEntity.prototype, "driverId", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.savedPaymentMethods;
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], SavedPaymentMethodEntity.prototype, "shop", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    saved_payment_method_entity_ts_metadata("design:type", Number)
], SavedPaymentMethodEntity.prototype, "shopId", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.savedPaymentMethod;
    }),
    saved_payment_method_entity_ts_metadata("design:type", Array)
], SavedPaymentMethodEntity.prototype, "parkOrders", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    saved_payment_method_entity_ts_metadata("design:type", String)
], SavedPaymentMethodEntity.prototype, "token", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.savedPaymentMethods;
    }),
    saved_payment_method_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], SavedPaymentMethodEntity.prototype, "paymentGateway", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    saved_payment_method_entity_ts_metadata("design:type", Number)
], SavedPaymentMethodEntity.prototype, "paymentGatewayId", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.savedPaymentMethod;
    }),
    saved_payment_method_entity_ts_metadata("design:type", Array)
], SavedPaymentMethodEntity.prototype, "orders", void 0);
saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(transaction) {
        return transaction.savedPaymentMethod;
    }),
    saved_payment_method_entity_ts_metadata("design:type", Array)
], SavedPaymentMethodEntity.prototype, "transactions", void 0);
SavedPaymentMethodEntity = saved_payment_method_entity_ts_decorate([
    (0,external_typeorm_.Entity)('saved_payment_method')
], SavedPaymentMethodEntity);

;// ../../libs/database/src/lib/entities/rider-transaction.entity.ts
function rider_transaction_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function rider_transaction_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}













var RiderTransactionEntity = function RiderTransactionEntity() {
    "use strict";
};
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "id", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        name: 'transactionTime'
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], RiderTransactionEntity.prototype, "createdAt", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionStatus,
        default: TransactionStatus.Processing
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof TransactionStatus === "undefined" ? Object : TransactionStatus)
], RiderTransactionEntity.prototype, "status", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionAction
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof TransactionAction === "undefined" ? Object : TransactionAction)
], RiderTransactionEntity.prototype, "action", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RiderDeductTransactionType,
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof RiderDeductTransactionType === "undefined" ? Object : RiderDeductTransactionType)
], RiderTransactionEntity.prototype, "deductType", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RiderRechargeTransactionType,
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof RiderRechargeTransactionType === "undefined" ? Object : RiderRechargeTransactionType)
], RiderTransactionEntity.prototype, "rechargeType", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "amount", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: '3'
    }),
    rider_transaction_entity_ts_metadata("design:type", String)
], RiderTransactionEntity.prototype, "currency", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'documentNumber'
    }),
    rider_transaction_entity_ts_metadata("design:type", String)
], RiderTransactionEntity.prototype, "refrenceNumber", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'details'
    }),
    rider_transaction_entity_ts_metadata("design:type", String)
], RiderTransactionEntity.prototype, "description", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.transactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], RiderTransactionEntity.prototype, "rider", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "riderId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.riderTransactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], RiderTransactionEntity.prototype, "paymentGateway", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "paymentGatewayId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SavedPaymentMethodEntity;
    }, function(savedPaymentMethod) {
        return savedPaymentMethod.transactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], RiderTransactionEntity.prototype, "savedPaymentMethod", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "savedPaymentMethodId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.riderTransactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], RiderTransactionEntity.prototype, "operator", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'operatorId'
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "operatorId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return GiftCodeEntity;
    }, function(giftCard) {
        return giftCard.riderTransaction;
    }),
    (0,external_typeorm_.JoinColumn)(),
    rider_transaction_entity_ts_metadata("design:type", typeof GiftCodeEntity === "undefined" ? Object : GiftCodeEntity)
], RiderTransactionEntity.prototype, "giftCard", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "giftCardId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.riderTransactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], RiderTransactionEntity.prototype, "request", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "requestId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }, function(order) {
        return order.riderTransactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "shopOrder", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "shopOrderId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.parkOwnerTransactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], RiderTransactionEntity.prototype, "parkOrderParkOwner", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "parkOrderParkOwnerId", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.customerTransactions;
    }),
    rider_transaction_entity_ts_metadata("design:type", typeof ParkOrderEntity === "undefined" ? Object : ParkOrderEntity)
], RiderTransactionEntity.prototype, "parkOrderCustomer", void 0);
rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    rider_transaction_entity_ts_metadata("design:type", Number)
], RiderTransactionEntity.prototype, "parkOrderCustomerId", void 0);
RiderTransactionEntity = rider_transaction_entity_ts_decorate([
    (0,external_typeorm_.Entity)('rider_transaction')
], RiderTransactionEntity);

;// ../../libs/database/src/lib/entities/enums/payment-gateway-type.enum.ts

var PaymentGatewayType;
(function(PaymentGatewayType) {
    PaymentGatewayType["Stripe"] = "stripe";
    PaymentGatewayType["BrainTree"] = "braintree";
    PaymentGatewayType["PayPal"] = "paypal";
    PaymentGatewayType["Paytm"] = "paytm";
    PaymentGatewayType["Razorpay"] = "razorpay";
    PaymentGatewayType["Paystack"] = "paystack";
    PaymentGatewayType["PayU"] = "payu";
    PaymentGatewayType["Instamojo"] = "instamojo";
    PaymentGatewayType["Flutterwave"] = "flutterwave";
    PaymentGatewayType["PayGate"] = "paygate";
    PaymentGatewayType["MIPS"] = "mips";
    PaymentGatewayType["MercadoPago"] = "mercadopago";
    PaymentGatewayType["AmazonPaymentServices"] = "amazon";
    PaymentGatewayType["MyTMoney"] = "mytmoney";
    PaymentGatewayType["WayForPay"] = "wayforpay";
    PaymentGatewayType["MyFatoorah"] = "MyFatoorah";
    PaymentGatewayType["SberBank"] = "SberBank";
    PaymentGatewayType["BinancePay"] = "BinancePay";
    PaymentGatewayType["OpenPix"] = "OpenPix";
    PaymentGatewayType["PayTR"] = "PayTR";
    PaymentGatewayType["CustomLink"] = "link";
})(PaymentGatewayType || (PaymentGatewayType = {}));
(0,graphql_.registerEnumType)(PaymentGatewayType, {
    name: 'PaymentGatewayType'
});

;// ../../libs/database/src/lib/entities/gateway-to-user.entity.ts
function gateway_to_user_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function gateway_to_user_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var GatewayToUserEntity = function GatewayToUserEntity() {
    "use strict";
};
gateway_to_user_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    gateway_to_user_entity_ts_metadata("design:type", Number)
], GatewayToUserEntity.prototype, "id", void 0);
gateway_to_user_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.userIds;
    }),
    gateway_to_user_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], GatewayToUserEntity.prototype, "gateway", void 0);
gateway_to_user_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    gateway_to_user_entity_ts_metadata("design:type", Number)
], GatewayToUserEntity.prototype, "gatewayId", void 0);
gateway_to_user_entity_ts_decorate([
    (0,external_typeorm_.Index)(),
    (0,external_typeorm_.Column)(),
    gateway_to_user_entity_ts_metadata("design:type", String)
], GatewayToUserEntity.prototype, "internalUserId", void 0);
gateway_to_user_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    gateway_to_user_entity_ts_metadata("design:type", String)
], GatewayToUserEntity.prototype, "externalReferenceNumber", void 0);
GatewayToUserEntity = gateway_to_user_entity_ts_decorate([
    (0,external_typeorm_.Entity)('gateway_to_user')
], GatewayToUserEntity);

;// ../../libs/database/src/lib/entities/payment-gateway.entity.ts
function payment_gateway_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function payment_gateway_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}










var PaymentGatewayEntity = function PaymentGatewayEntity() {
    "use strict";
};
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    payment_gateway_entity_ts_metadata("design:type", Number)
], PaymentGatewayEntity.prototype, "id", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    payment_gateway_entity_ts_metadata("design:type", Boolean)
], PaymentGatewayEntity.prototype, "enabled", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payment_gateway_entity_ts_metadata("design:type", String)
], PaymentGatewayEntity.prototype, "title", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PaymentGatewayType
    }),
    payment_gateway_entity_ts_metadata("design:type", typeof PaymentGatewayType === "undefined" ? Object : PaymentGatewayType)
], PaymentGatewayEntity.prototype, "type", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'text'
    }),
    payment_gateway_entity_ts_metadata("design:type", String)
], PaymentGatewayEntity.prototype, "publicKey", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'text'
    }),
    payment_gateway_entity_ts_metadata("design:type", String)
], PaymentGatewayEntity.prototype, "privateKey", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'text'
    }),
    payment_gateway_entity_ts_metadata("design:type", String)
], PaymentGatewayEntity.prototype, "saltKey", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'text'
    }),
    payment_gateway_entity_ts_metadata("design:type", String)
], PaymentGatewayEntity.prototype, "merchantId", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    payment_gateway_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], PaymentGatewayEntity.prototype, "deletedAt", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, function(media) {
        return media.paymentGateway;
    }, {
        nullable: true
    }),
    (0,external_typeorm_.JoinColumn)(),
    payment_gateway_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], PaymentGatewayEntity.prototype, "media", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    payment_gateway_entity_ts_metadata("design:type", Number)
], PaymentGatewayEntity.prototype, "mediaId", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.paymentGateway;
    }),
    payment_gateway_entity_ts_metadata("design:type", Array)
], PaymentGatewayEntity.prototype, "orders", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(userTransaction) {
        return userTransaction.paymentGateway;
    }),
    payment_gateway_entity_ts_metadata("design:type", Array)
], PaymentGatewayEntity.prototype, "riderTransactions", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProviderTransactionEntity;
    }, function(adminTransaction) {
        return adminTransaction.paymentGateway;
    }),
    payment_gateway_entity_ts_metadata("design:type", Array)
], PaymentGatewayEntity.prototype, "adminTransactions", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderEntity;
    }, function(order) {
        return order.paymentGateway;
    }),
    payment_gateway_entity_ts_metadata("design:type", Array)
], PaymentGatewayEntity.prototype, "parkOrders", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return GatewayToUserEntity;
    }, function(gatewayToUser) {
        return gatewayToUser.gateway;
    }),
    payment_gateway_entity_ts_metadata("design:type", Array)
], PaymentGatewayEntity.prototype, "userIds", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SavedPaymentMethodEntity;
    }, function(savedPaymentMethod) {
        return savedPaymentMethod.paymentGateway;
    }),
    payment_gateway_entity_ts_metadata("design:type", Array)
], PaymentGatewayEntity.prototype, "savedPaymentMethods", void 0);
payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return PayoutAccountEntity;
    }, function(payout) {
        return payout.paymentGateway;
    }),
    payment_gateway_entity_ts_metadata("design:type", Array)
], PaymentGatewayEntity.prototype, "payoutAccounts", void 0);
PaymentGatewayEntity = payment_gateway_entity_ts_decorate([
    (0,external_typeorm_.Entity)('payment_gateway')
], PaymentGatewayEntity);

;// ../../libs/database/src/lib/transformers/distance-multiplier.transformer.ts
var DistanceMultiplierTransformer = /*#__PURE__*/ function() {
    "use strict";
    function DistanceMultiplierTransformer() {}
    var _proto = DistanceMultiplierTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(row) {
            return row.distanceFrom + "-" + row.distanceTo + "|" + row.multiply;
        });
    };
    _proto.from = function from(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(str) {
            return {
                distanceFrom: parseInt(str.split('|')[0].split('-')[0]),
                distanceTo: parseInt(str.split('|')[0].split('-')[1]),
                multiply: parseFloat(str.split('|')[1])
            };
        });
    };
    return DistanceMultiplierTransformer;
}();

;// ../../libs/database/src/lib/transformers/time-multiplier.transformer.ts
var TimeMultiplierTransformer = /*#__PURE__*/ function() {
    "use strict";
    function TimeMultiplierTransformer() {}
    var _proto = TimeMultiplierTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(row) {
            return row.startTime + "-" + row.endTime + "|" + row.multiply;
        });
    };
    _proto.from = function from(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(str) {
            return {
                startTime: str.split('|')[0].split('-')[0],
                endTime: str.split('|')[0].split('-')[1],
                multiply: parseFloat(str.split('|')[1])
            };
        });
    };
    return TimeMultiplierTransformer;
}();

;// ../../libs/database/src/lib/entities/enums/service-distance-fee-mode.enum.ts

var ServiceDistanceFeeMode;
(function(ServiceDistanceFeeMode) {
    ServiceDistanceFeeMode["None"] = "None";
    ServiceDistanceFeeMode["PickupToDestination"] = "PickupToDestination";
    ServiceDistanceFeeMode["Radial"] = "Radial";
})(ServiceDistanceFeeMode || (ServiceDistanceFeeMode = {}));
(0,graphql_.registerEnumType)(ServiceDistanceFeeMode, {
    name: 'ServiceDistanceFeeMode'
});

;// ../../libs/database/src/lib/entities/enums/service-payment-method.enum.ts

var ServicePaymentMethod;
(function(ServicePaymentMethod) {
    ServicePaymentMethod["CashCredit"] = "CashCredit";
    ServicePaymentMethod["OnlyCredit"] = "OnlyCredit";
    ServicePaymentMethod["OnlyCash"] = "OnlyCash";
})(ServicePaymentMethod || (ServicePaymentMethod = {}));
(0,graphql_.registerEnumType)(ServicePaymentMethod, {
    name: 'ServicePaymentMethod'
});

;// ../../libs/database/src/lib/entities/taxi/region-category.entity.ts
function region_category_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function region_category_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var RegionCategoryEntity = function RegionCategoryEntity() {
    "use strict";
};
region_category_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    region_category_entity_ts_metadata("design:type", Number)
], RegionCategoryEntity.prototype, "id", void 0);
region_category_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    region_category_entity_ts_metadata("design:type", String)
], RegionCategoryEntity.prototype, "name", void 0);
region_category_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    region_category_entity_ts_metadata("design:type", String)
], RegionCategoryEntity.prototype, "currency", void 0);
region_category_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RegionEntity;
    }, function(region) {
        return region.category;
    }),
    region_category_entity_ts_metadata("design:type", Array)
], RegionCategoryEntity.prototype, "regions", void 0);
RegionCategoryEntity = region_category_entity_ts_decorate([
    (0,external_typeorm_.Entity)('region_category')
], RegionCategoryEntity);

;// ../../libs/database/src/lib/entities/taxi/region.entity.ts
function region_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function region_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var RegionEntity = function RegionEntity() {
    "use strict";
};
region_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    region_entity_ts_metadata("design:type", Number)
], RegionEntity.prototype, "id", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    region_entity_ts_metadata("design:type", String)
], RegionEntity.prototype, "name", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    region_entity_ts_metadata("design:type", String)
], RegionEntity.prototype, "currency", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    region_entity_ts_metadata("design:type", Boolean)
], RegionEntity.prototype, "enabled", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.Column)('polygon', {
        transformer: new PolygonTransformer()
    }),
    region_entity_ts_metadata("design:type", Array)
], RegionEntity.prototype, "location", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.regions;
    }),
    region_entity_ts_metadata("design:type", Array)
], RegionEntity.prototype, "services", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return RegionCategoryEntity;
    }, function(category) {
        return category.regions;
    }),
    region_entity_ts_metadata("design:type", typeof RegionCategoryEntity === "undefined" ? Object : RegionCategoryEntity)
], RegionEntity.prototype, "category", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    region_entity_ts_metadata("design:type", Number)
], RegionEntity.prototype, "categoryId", void 0);
region_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(taxiOrder) {
        return taxiOrder.region;
    }),
    region_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], RegionEntity.prototype, "taxiOrders", void 0);
RegionEntity = region_entity_ts_decorate([
    (0,external_typeorm_.Entity)('region')
], RegionEntity);

;// ../../libs/database/src/lib/entities/taxi/service-category.entity.ts
function service_category_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function service_category_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ServiceCategoryEntity = function ServiceCategoryEntity() {
    "use strict";
};
service_category_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    service_category_entity_ts_metadata("design:type", Number)
], ServiceCategoryEntity.prototype, "id", void 0);
service_category_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'title'
    }),
    service_category_entity_ts_metadata("design:type", String)
], ServiceCategoryEntity.prototype, "name", void 0);
service_category_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.category;
    }),
    service_category_entity_ts_metadata("design:type", Array)
], ServiceCategoryEntity.prototype, "services", void 0);
service_category_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    service_category_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ServiceCategoryEntity.prototype, "deletedAt", void 0);
ServiceCategoryEntity = service_category_entity_ts_decorate([
    (0,external_typeorm_.Entity)('service_category')
], ServiceCategoryEntity);

;// ../../libs/database/src/lib/entities/enums/service-option-icon.enum.ts

var ServiceOptionIcon;
(function(ServiceOptionIcon) {
    ServiceOptionIcon["Pet"] = "Pet";
    ServiceOptionIcon["TwoWay"] = "TwoWay";
    ServiceOptionIcon["Luggage"] = "Luggage";
    ServiceOptionIcon["PackageDelivery"] = "PackageDelivery";
    ServiceOptionIcon["Shopping"] = "Shopping";
    ServiceOptionIcon["Custom1"] = "Custom1";
    ServiceOptionIcon["Custom2"] = "Custom2";
    ServiceOptionIcon["Custom3"] = "Custom3";
    ServiceOptionIcon["Custom4"] = "Custom4";
    ServiceOptionIcon["Custom5"] = "Custom5";
})(ServiceOptionIcon || (ServiceOptionIcon = {}));
(0,graphql_.registerEnumType)(ServiceOptionIcon, {
    name: 'ServiceOptionIcon'
});

;// ../../libs/database/src/lib/entities/enums/service-option-type.enum.ts

var ServiceOptionType;
(function(ServiceOptionType) {
    ServiceOptionType["Free"] = "Free";
    ServiceOptionType["Paid"] = "Paid";
    ServiceOptionType["TwoWay"] = "TwoWay";
})(ServiceOptionType || (ServiceOptionType = {}));
(0,graphql_.registerEnumType)(ServiceOptionType, {
    name: 'ServiceOptionType'
});

;// ../../libs/database/src/lib/entities/taxi/service-option.entity.ts
function service_option_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function service_option_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var ServiceOptionEntity = function ServiceOptionEntity() {
    "use strict";
};
service_option_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    service_option_entity_ts_metadata("design:type", Number)
], ServiceOptionEntity.prototype, "id", void 0);
service_option_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    service_option_entity_ts_metadata("design:type", String)
], ServiceOptionEntity.prototype, "name", void 0);
service_option_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    service_option_entity_ts_metadata("design:type", String)
], ServiceOptionEntity.prototype, "description", void 0);
service_option_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ServiceOptionType
    }),
    service_option_entity_ts_metadata("design:type", typeof ServiceOptionType === "undefined" ? Object : ServiceOptionType)
], ServiceOptionEntity.prototype, "type", void 0);
service_option_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 12,
        scale: 2,
        nullable: true
    }),
    service_option_entity_ts_metadata("design:type", Number)
], ServiceOptionEntity.prototype, "additionalFee", void 0);
service_option_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ServiceOptionIcon
    }),
    service_option_entity_ts_metadata("design:type", typeof ServiceOptionIcon === "undefined" ? Object : ServiceOptionIcon)
], ServiceOptionEntity.prototype, "icon", void 0);
service_option_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.options;
    }),
    service_option_entity_ts_metadata("design:type", typeof ServiceEntity === "undefined" ? Object : ServiceEntity)
], ServiceOptionEntity.prototype, "services", void 0);
service_option_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return TaxiOrderEntity;
    }, function(request) {
        return request.options;
    }),
    service_option_entity_ts_metadata("design:type", Array)
], ServiceOptionEntity.prototype, "requests", void 0);
ServiceOptionEntity = service_option_entity_ts_decorate([
    (0,external_typeorm_.Entity)('service_option')
], ServiceOptionEntity);

;// ../../libs/database/src/lib/entities/taxi/fleet-transaction.entity.ts
function fleet_transaction_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function fleet_transaction_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}









var FleetTransactionEntity = function FleetTransactionEntity() {
    "use strict";
};
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    fleet_transaction_entity_ts_metadata("design:type", Number)
], FleetTransactionEntity.prototype, "id", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        name: 'transactionTime'
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], FleetTransactionEntity.prototype, "transactionTimestamp", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionStatus,
        default: TransactionStatus.Processing
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof TransactionStatus === "undefined" ? Object : TransactionStatus)
], FleetTransactionEntity.prototype, "status", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionAction
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof TransactionAction === "undefined" ? Object : TransactionAction)
], FleetTransactionEntity.prototype, "action", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ProviderDeductTransactionType,
        nullable: true
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof ProviderDeductTransactionType === "undefined" ? Object : ProviderDeductTransactionType)
], FleetTransactionEntity.prototype, "deductType", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ProviderRechargeTransactionType,
        nullable: true
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof ProviderRechargeTransactionType === "undefined" ? Object : ProviderRechargeTransactionType)
], FleetTransactionEntity.prototype, "rechargeType", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    fleet_transaction_entity_ts_metadata("design:type", Number)
], FleetTransactionEntity.prototype, "amount", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: '3'
    }),
    fleet_transaction_entity_ts_metadata("design:type", String)
], FleetTransactionEntity.prototype, "currency", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'documentNumber'
    }),
    fleet_transaction_entity_ts_metadata("design:type", String)
], FleetTransactionEntity.prototype, "refrenceNumber", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'details'
    }),
    fleet_transaction_entity_ts_metadata("design:type", String)
], FleetTransactionEntity.prototype, "description", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.fleetTransactions;
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], FleetTransactionEntity.prototype, "request", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_transaction_entity_ts_metadata("design:type", Number)
], FleetTransactionEntity.prototype, "requestId", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.fleetTransactions;
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], FleetTransactionEntity.prototype, "driver", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_transaction_entity_ts_metadata("design:type", Number)
], FleetTransactionEntity.prototype, "driverId", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return FleetEntity;
    }, function(fleet) {
        return fleet.transactions;
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof FleetEntity === "undefined" ? Object : FleetEntity)
], FleetTransactionEntity.prototype, "fleet", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_transaction_entity_ts_metadata("design:type", Number)
], FleetTransactionEntity.prototype, "fleetId", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.fleetTransactions;
    }),
    fleet_transaction_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], FleetTransactionEntity.prototype, "operator", void 0);
fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'operatorId'
    }),
    fleet_transaction_entity_ts_metadata("design:type", Number)
], FleetTransactionEntity.prototype, "operatorId", void 0);
FleetTransactionEntity = fleet_transaction_entity_ts_decorate([
    (0,external_typeorm_.Entity)('fleet_transaction')
], FleetTransactionEntity);

;// ../../libs/database/src/lib/entities/taxi/fleet-wallet.entity.ts
function fleet_wallet_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function fleet_wallet_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var FleetWalletEntity = function FleetWalletEntity() {
    "use strict";
};
fleet_wallet_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    fleet_wallet_entity_ts_metadata("design:type", Number)
], FleetWalletEntity.prototype, "id", void 0);
fleet_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0.0,
        name: 'amount'
    }),
    fleet_wallet_entity_ts_metadata("design:type", Number)
], FleetWalletEntity.prototype, "balance", void 0);
fleet_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_wallet_entity_ts_metadata("design:type", String)
], FleetWalletEntity.prototype, "currency", void 0);
fleet_wallet_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return FleetEntity;
    }, function(fleet) {
        return fleet.wallet;
    }),
    fleet_wallet_entity_ts_metadata("design:type", typeof FleetEntity === "undefined" ? Object : FleetEntity)
], FleetWalletEntity.prototype, "fleet", void 0);
fleet_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_wallet_entity_ts_metadata("design:type", Number)
], FleetWalletEntity.prototype, "fleetId", void 0);
FleetWalletEntity = fleet_wallet_entity_ts_decorate([
    (0,external_typeorm_.Entity)('fleet_wallet')
], FleetWalletEntity);

;// ../../libs/database/src/lib/entities/enums/fleet-staff.permissions.enum.ts

var FleetStaffPermissionOrder;
(function(FleetStaffPermissionOrder) {
    FleetStaffPermissionOrder["CAN_VIEW"] = "CAN_VIEW";
    FleetStaffPermissionOrder["CAN_EDIT"] = "CAN_EDIT";
})(FleetStaffPermissionOrder || (FleetStaffPermissionOrder = {}));
(0,graphql_.registerEnumType)(FleetStaffPermissionOrder, {
    name: 'FleetStaffPermissionOrder'
});
var FleetStaffPermissionFinancial;
(function(FleetStaffPermissionFinancial) {
    FleetStaffPermissionFinancial["CAN_VIEW"] = "CAN_VIEW";
    FleetStaffPermissionFinancial["CAN_EDIT"] = "CAN_EDIT";
})(FleetStaffPermissionFinancial || (FleetStaffPermissionFinancial = {}));
(0,graphql_.registerEnumType)(FleetStaffPermissionFinancial, {
    name: 'FleetStaffPermissionFinancial'
});

;// ../../libs/database/src/lib/entities/taxi/fleet-staff-session.entity.ts
function fleet_staff_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function fleet_staff_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var FleetStaffSessionEntity = function FleetStaffSessionEntity() {
    "use strict";
};
fleet_staff_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    fleet_staff_session_entity_ts_metadata("design:type", Number)
], FleetStaffSessionEntity.prototype, "id", void 0);
fleet_staff_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return SessionInfo;
    }),
    fleet_staff_session_entity_ts_metadata("design:type", typeof SessionInfo === "undefined" ? Object : SessionInfo)
], FleetStaffSessionEntity.prototype, "sessionInfo", void 0);
fleet_staff_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return FleetStaffEntity;
    }, function(fleet) {
        return fleet.sessions;
    }),
    fleet_staff_session_entity_ts_metadata("design:type", typeof FleetStaffEntity === "undefined" ? Object : FleetStaffEntity)
], FleetStaffSessionEntity.prototype, "fleetStaff", void 0);
fleet_staff_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_staff_session_entity_ts_metadata("design:type", Number)
], FleetStaffSessionEntity.prototype, "fleetStaffId", void 0);
FleetStaffSessionEntity = fleet_staff_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('fleet_staff_session')
], FleetStaffSessionEntity);

;// ../../libs/database/src/lib/entities/taxi/fleet-staff.entity.ts
function fleet_staff_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function fleet_staff_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var FleetStaffEntity = function FleetStaffEntity() {
    "use strict";
};
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    fleet_staff_entity_ts_metadata("design:type", Number)
], FleetStaffEntity.prototype, "id", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    fleet_staff_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], FleetStaffEntity.prototype, "registeredAt", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "firstName", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "lastName", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)('bigint'),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "phoneNumber", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)('bigint'),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "mobileNumber", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    fleet_staff_entity_ts_metadata("design:type", Boolean)
], FleetStaffEntity.prototype, "isBlocked", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "email", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_staff_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], FleetStaffEntity.prototype, "lastActivityAt", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)('varchar', {
        nullable: true
    }),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "address", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "userName", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_staff_entity_ts_metadata("design:type", String)
], FleetStaffEntity.prototype, "password", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: FleetStaffPermissionOrder
    }),
    fleet_staff_entity_ts_metadata("design:type", typeof FleetStaffPermissionOrder === "undefined" ? Object : FleetStaffPermissionOrder)
], FleetStaffEntity.prototype, "permissionOrder", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: FleetStaffPermissionFinancial
    }),
    fleet_staff_entity_ts_metadata("design:type", typeof FleetStaffPermissionFinancial === "undefined" ? Object : FleetStaffPermissionFinancial)
], FleetStaffEntity.prototype, "permissionFinancial", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FleetStaffSessionEntity;
    }, function(device) {
        return device.fleetStaff;
    }),
    fleet_staff_entity_ts_metadata("design:type", Array)
], FleetStaffEntity.prototype, "sessions", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return FleetEntity;
    }, function(fleet) {
        return fleet.staffs;
    }),
    fleet_staff_entity_ts_metadata("design:type", typeof FleetEntity === "undefined" ? Object : FleetEntity)
], FleetStaffEntity.prototype, "fleet", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_staff_entity_ts_metadata("design:type", Number)
], FleetStaffEntity.prototype, "fleetId", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    fleet_staff_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], FleetStaffEntity.prototype, "profileImage", void 0);
fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_staff_entity_ts_metadata("design:type", Number)
], FleetStaffEntity.prototype, "profileImageId", void 0);
FleetStaffEntity = fleet_staff_entity_ts_decorate([
    (0,external_typeorm_.Entity)('fleet_staff')
], FleetStaffEntity);

;// ../../libs/database/src/lib/entities/taxi/fleet.entity.ts
function fleet_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function fleet_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}










var FleetEntity = function FleetEntity() {
    "use strict";
};
fleet_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    fleet_entity_ts_metadata("design:type", Number)
], FleetEntity.prototype, "id", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_entity_ts_metadata("design:type", String)
], FleetEntity.prototype, "name", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)('bigint'),
    fleet_entity_ts_metadata("design:type", String)
], FleetEntity.prototype, "phoneNumber", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], FleetEntity.prototype, "createdAt", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.UpdateDateColumn)({
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], FleetEntity.prototype, "updatedAt", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)({
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], FleetEntity.prototype, "deletedAt", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    fleet_entity_ts_metadata("design:type", String)
], FleetEntity.prototype, "accountNumber", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)('bigint'),
    fleet_entity_ts_metadata("design:type", String)
], FleetEntity.prototype, "mobileNumber", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    fleet_entity_ts_metadata("design:type", Boolean)
], FleetEntity.prototype, "isBlocked", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        default: 0
    }),
    fleet_entity_ts_metadata("design:type", Number)
], FleetEntity.prototype, "commissionSharePercent", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0
    }),
    fleet_entity_ts_metadata("design:type", Number)
], FleetEntity.prototype, "commissionShareFlat", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)('varchar', {
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", String)
], FleetEntity.prototype, "address", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", String)
], FleetEntity.prototype, "userName", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", String)
], FleetEntity.prototype, "password", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, {
        nullable: true
    }),
    (0,external_typeorm_.JoinColumn)(),
    fleet_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], FleetEntity.prototype, "profilePicture", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", Number)
], FleetEntity.prototype, "profilePictureId", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", Number)
], FleetEntity.prototype, "feeMultiplier", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.Column)('polygon', {
        transformer: new PolygonTransformer(),
        nullable: true
    }),
    fleet_entity_ts_metadata("design:type", Array)
], FleetEntity.prototype, "exclusivityAreas", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.fleet;
    }),
    fleet_entity_ts_metadata("design:type", Array)
], FleetEntity.prototype, "drivers", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FleetWalletEntity;
    }, function(wallet) {
        return wallet.fleet;
    }),
    fleet_entity_ts_metadata("design:type", Array)
], FleetEntity.prototype, "wallet", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FleetTransactionEntity;
    }, function(fleetTransaction) {
        return fleetTransaction.fleet;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'RESTRICT'
    }),
    fleet_entity_ts_metadata("design:type", Array)
], FleetEntity.prototype, "transactions", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.fleet;
    }),
    fleet_entity_ts_metadata("design:type", Array)
], FleetEntity.prototype, "operators", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ZonePriceEntity;
    }, function(zonePrice) {
        return zonePrice.fleets;
    }),
    fleet_entity_ts_metadata("design:type", typeof ZonePriceEntity === "undefined" ? Object : ZonePriceEntity)
], FleetEntity.prototype, "zonePrices", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FleetStaffEntity;
    }, function(fleetStaff) {
        return fleetStaff.fleet;
    }),
    fleet_entity_ts_metadata("design:type", Array)
], FleetEntity.prototype, "staffs", void 0);
fleet_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(request) {
        return request.fleet;
    }),
    fleet_entity_ts_metadata("design:type", Array)
], FleetEntity.prototype, "requests", void 0);
FleetEntity = fleet_entity_ts_decorate([
    (0,external_typeorm_.Entity)('fleet')
], FleetEntity);

;// ../../libs/database/src/lib/entities/taxi/zone-price-category.entity.ts
function zone_price_category_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function zone_price_category_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ZonePriceCategoryEntity = function ZonePriceCategoryEntity() {
    "use strict";
};
zone_price_category_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    zone_price_category_entity_ts_metadata("design:type", Number)
], ZonePriceCategoryEntity.prototype, "id", void 0);
zone_price_category_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    zone_price_category_entity_ts_metadata("design:type", String)
], ZonePriceCategoryEntity.prototype, "name", void 0);
zone_price_category_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ZonePriceEntity;
    }, function(zonePrice) {
        return zonePrice.zonePriceCategory;
    }),
    zone_price_category_entity_ts_metadata("design:type", Array)
], ZonePriceCategoryEntity.prototype, "zonePrices", void 0);
ZonePriceCategoryEntity = zone_price_category_entity_ts_decorate([
    (0,external_typeorm_.Entity)('zone_price_category')
], ZonePriceCategoryEntity);

;// ../../libs/database/src/lib/entities/taxi/zone-price.entity.ts
function zone_price_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function zone_price_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






var ZonePriceEntity = function ZonePriceEntity() {
    "use strict";
};
zone_price_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    zone_price_entity_ts_metadata("design:type", Number)
], ZonePriceEntity.prototype, "id", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    zone_price_entity_ts_metadata("design:type", String)
], ZonePriceEntity.prototype, "name", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.Column)('polygon', {
        transformer: new PolygonTransformer()
    }),
    zone_price_entity_ts_metadata("design:type", Array)
], ZonePriceEntity.prototype, "from", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.Column)('polygon', {
        transformer: new PolygonTransformer()
    }),
    zone_price_entity_ts_metadata("design:type", Array)
], ZonePriceEntity.prototype, "to", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    zone_price_entity_ts_metadata("design:type", Number)
], ZonePriceEntity.prototype, "cost", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.Column)('simple-array', {
        nullable: true,
        transformer: new TimeMultiplierTransformer()
    }),
    zone_price_entity_ts_metadata("design:type", Array)
], ZonePriceEntity.prototype, "timeMultipliers", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return FleetEntity;
    }, function(fleet) {
        return fleet.zonePrices;
    }),
    (0,external_typeorm_.JoinTable)(),
    zone_price_entity_ts_metadata("design:type", Array)
], ZonePriceEntity.prototype, "fleets", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.zonePrices;
    }),
    (0,external_typeorm_.JoinTable)(),
    zone_price_entity_ts_metadata("design:type", Array)
], ZonePriceEntity.prototype, "services", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ZonePriceCategoryEntity;
    }, function(zonePriceCategory) {
        return zonePriceCategory.zonePrices;
    }),
    zone_price_entity_ts_metadata("design:type", typeof ZonePriceCategoryEntity === "undefined" ? Object : ZonePriceCategoryEntity)
], ZonePriceEntity.prototype, "zonePriceCategory", void 0);
zone_price_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    zone_price_entity_ts_metadata("design:type", Number)
], ZonePriceEntity.prototype, "zonePriceCategoryId", void 0);
ZonePriceEntity = zone_price_entity_ts_decorate([
    (0,external_typeorm_.Entity)('zone_price')
], ZonePriceEntity);

;// ../../libs/database/src/lib/transformers/weekday-multiplier.transformer.ts
var WeekdayMultiplierTransformer = /*#__PURE__*/ function() {
    "use strict";
    function WeekdayMultiplierTransformer() {}
    var _proto = WeekdayMultiplierTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(row) {
            return row.weekday + "|" + row.multiply;
        });
    };
    _proto.from = function from(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(str) {
            return {
                weekday: str.split('|')[0],
                multiply: parseFloat(str.split('|')[1])
            };
        });
    };
    return WeekdayMultiplierTransformer;
}();

;// ../../libs/database/src/lib/transformers/date-range-multiplier.transformer.ts
var DateRangeMultiplierTransformer = /*#__PURE__*/ function() {
    "use strict";
    function DateRangeMultiplierTransformer() {}
    var _proto = DateRangeMultiplierTransformer.prototype;
    _proto.to = function to(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(row) {
            return row.startDate + "-" + row.endDate + "|" + row.multiply;
        });
    };
    _proto.from = function from(value) {
        if (value == null) {
            return [];
        }
        return value.map(function(str) {
            return {
                startDate: parseInt(str.split('|')[0].split('-')[0]),
                endDate: parseInt(str.split('|')[0].split('-')[1]),
                multiply: parseFloat(str.split('|')[1])
            };
        });
    };
    return DateRangeMultiplierTransformer;
}();

;// ../../libs/database/src/lib/entities/enums/package-size.enum.ts

var DeliveryPackageSize;
(function(DeliveryPackageSize) {
    DeliveryPackageSize["Small"] = "SMALL";
    DeliveryPackageSize["Medium"] = "MEDIUM";
    DeliveryPackageSize["Large"] = "LARGE";
})(DeliveryPackageSize || (DeliveryPackageSize = {}));
(0,graphql_.registerEnumType)(DeliveryPackageSize, {
    name: 'DeliveryPackageSize'
});

;// ../../libs/database/src/lib/entities/taxi/driver-services-service.entity.ts
function driver_services_service_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_services_service_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var DriverServicesServiceEntity = function DriverServicesServiceEntity() {
    "use strict";
};
driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        primary: true
    }),
    driver_services_service_entity_ts_metadata("design:type", Number)
], DriverServicesServiceEntity.prototype, "driverId", void 0);
driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.enabledServices;
    }, {
        onDelete: 'CASCADE'
    }),
    driver_services_service_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], DriverServicesServiceEntity.prototype, "driver", void 0);
driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        primary: true
    }),
    driver_services_service_entity_ts_metadata("design:type", Number)
], DriverServicesServiceEntity.prototype, "serviceId", void 0);
driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.driversWithService;
    }, {
        onDelete: 'CASCADE'
    }),
    driver_services_service_entity_ts_metadata("design:type", typeof ServiceEntity === "undefined" ? Object : ServiceEntity)
], DriverServicesServiceEntity.prototype, "service", void 0);
driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    driver_services_service_entity_ts_metadata("design:type", Boolean)
], DriverServicesServiceEntity.prototype, "driverEnabled", void 0);
driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    driver_services_service_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverServicesServiceEntity.prototype, "createdAt", void 0);
driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_services_service_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverServicesServiceEntity.prototype, "updatedAt", void 0);
DriverServicesServiceEntity = driver_services_service_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_services_service')
], DriverServicesServiceEntity);

;// ../../libs/database/src/lib/entities/taxi/enums/taxi-order-type.enum.ts

var TaxiOrderType;
(function(TaxiOrderType) {
    TaxiOrderType["Ride"] = "ride";
    TaxiOrderType["Rideshare"] = "rideshare";
    TaxiOrderType["ParcelDelivery"] = "parcelDelivery";
    TaxiOrderType["FoodDelivery"] = "foodDelivery";
    TaxiOrderType["ShopDelivery"] = "shopDelivery";
})(TaxiOrderType || (TaxiOrderType = {}));
(0,graphql_.registerEnumType)(TaxiOrderType, {
    name: 'TaxiOrderType',
    description: 'Different types of taxi orders, including ride, rideshare, parcel delivery, food delivery, and shop delivery.'
});

;// ../../libs/database/src/lib/entities/taxi/service.entity.ts
function service_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function service_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

















var ServiceEntity = function ServiceEntity() {
    "use strict";
};
service_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "id", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ServiceCategoryEntity;
    }, function(category) {
        return category.services;
    }, {
        onDelete: 'CASCADE'
    }),
    service_entity_ts_metadata("design:type", typeof ServiceCategoryEntity === "undefined" ? Object : ServiceCategoryEntity)
], ServiceEntity.prototype, "category", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "categoryId", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: TaxiOrderType,
        default: [
            TaxiOrderType.Ride
        ]
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "orderTypes", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'title'
    }),
    service_entity_ts_metadata("design:type", String)
], ServiceEntity.prototype, "name", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    service_entity_ts_metadata("design:type", String)
], ServiceEntity.prototype, "description", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('smallint', {
        nullable: true
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "personCapacity", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "baseFare", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "perHundredMeters", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "perMinuteDrive", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 12,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "perMinuteWait", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "minimumFee", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 10000
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "searchRadius", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'enum',
        enum: ServicePaymentMethod,
        default: ServicePaymentMethod.CashCredit
    }),
    service_entity_ts_metadata("design:type", typeof ServicePaymentMethod === "undefined" ? Object : ServicePaymentMethod)
], ServiceEntity.prototype, "paymentMethod", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DeliveryPackageSize,
        nullable: true
    }),
    service_entity_ts_metadata("design:type", typeof DeliveryPackageSize === "undefined" ? Object : DeliveryPackageSize)
], ServiceEntity.prototype, "maximumCarryPackageSize", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "deliveryFeePerPickup", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ServiceDistanceFeeMode,
        default: ServiceDistanceFeeMode.PickupToDestination
    }),
    service_entity_ts_metadata("design:type", typeof ServiceDistanceFeeMode === "undefined" ? Object : ServiceDistanceFeeMode)
], ServiceEntity.prototype, "distanceFeeMode", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('time', {
        default: '00:00'
    }),
    service_entity_ts_metadata("design:type", String)
], ServiceEntity.prototype, "availableTimeFrom", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('time', {
        default: '23:59'
    }),
    service_entity_ts_metadata("design:type", String)
], ServiceEntity.prototype, "availableTimeTo", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0,
        name: 'maxDestinationDistance'
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "maximumDestinationDistance", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        default: 0
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "prepayPercent", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    service_entity_ts_metadata("design:type", Boolean)
], ServiceEntity.prototype, "twoWayAvailable", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "cancellationTotalFee", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "cancellationDriverShare", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        default: 0
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "providerSharePercent", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "providerShareFlat", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        precision: 10,
        scale: 2
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "roundingFactor", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, function(media) {
        return media.service;
    }),
    (0,external_typeorm_.JoinColumn)(),
    service_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], ServiceEntity.prototype, "media", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "mediaId", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('simple-array', {
        nullable: true,
        transformer: new TimeMultiplierTransformer()
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "timeMultipliers", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('simple-array', {
        nullable: true,
        transformer: new DistanceMultiplierTransformer()
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "distanceMultipliers", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('simple-array', {
        nullable: true,
        transformer: new DateRangeMultiplierTransformer()
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "dateRangeMultipliers", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('simple-array', {
        nullable: true,
        transformer: new WeekdayMultiplierTransformer()
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "weekdayMultipliers", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    service_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ServiceEntity.prototype, "deletedAt", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 1.0
    }),
    service_entity_ts_metadata("design:type", Number)
], ServiceEntity.prototype, "touristMultiplier", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverServicesServiceEntity;
    }, function(driver) {
        return driver.service;
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "driversWithService", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return CouponEntity;
    }, function(coupon) {
        return coupon.allowedServices;
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "allowedCoupons", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return RegionEntity;
    }, function(region) {
        return region.services;
    }),
    (0,external_typeorm_.JoinTable)(),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "regions", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.service;
    }),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "requests", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ServiceOptionEntity;
    }, function(serviceOption) {
        return serviceOption.services;
    }),
    (0,external_typeorm_.JoinTable)(),
    service_entity_ts_metadata("design:type", Array)
], ServiceEntity.prototype, "options", void 0);
service_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ZonePriceEntity;
    }, function(zonePrice) {
        return zonePrice.fleets;
    }),
    service_entity_ts_metadata("design:type", typeof ZonePriceEntity === "undefined" ? Object : ZonePriceEntity)
], ServiceEntity.prototype, "zonePrices", void 0);
ServiceEntity = service_entity_ts_decorate([
    (0,external_typeorm_.Entity)('service')
], ServiceEntity);

;// ../../libs/database/src/lib/entities/media.entity.ts
function media_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function media_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}









var MediaEntity = function MediaEntity() {
    "use strict";
};
media_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    media_entity_ts_metadata("design:type", Number)
], MediaEntity.prototype, "id", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.Column)('varchar'),
    media_entity_ts_metadata("design:type", String)
], MediaEntity.prototype, "address", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.Column)('longtext', {
        nullable: true
    }),
    media_entity_ts_metadata("design:type", String)
], MediaEntity.prototype, "base64", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.media;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], MediaEntity.prototype, "driver", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.documents;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], MediaEntity.prototype, "driverDocument", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    media_entity_ts_metadata("design:type", Number)
], MediaEntity.prototype, "driverDocumentId", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.media;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], MediaEntity.prototype, "operator", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return AnnouncementEntity;
    }, function(announcement) {
        return announcement.media;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof AnnouncementEntity === "undefined" ? Object : AnnouncementEntity)
], MediaEntity.prototype, "announcement", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.media;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", Array)
], MediaEntity.prototype, "rider", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.media;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", Array)
], MediaEntity.prototype, "service", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.media;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], MediaEntity.prototype, "paymentGateway", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.media;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], MediaEntity.prototype, "payoutMethod", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkSpotEntity;
    }, function(parkSpot) {
        return parkSpot.images;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof ParkSpotEntity === "undefined" ? Object : ParkSpotEntity)
], MediaEntity.prototype, "parkSpot", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    media_entity_ts_metadata("design:type", Number)
], MediaEntity.prototype, "parkSpotId", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.uploads;
    }, {
        onDelete: 'SET NULL'
    }),
    media_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], MediaEntity.prototype, "uploadedByDriver", void 0);
media_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    media_entity_ts_metadata("design:type", Number)
], MediaEntity.prototype, "uploadedByDriverId", void 0);
MediaEntity = media_entity_ts_decorate([
    (0,external_typeorm_.Entity)('media')
], MediaEntity);

;// ../../libs/database/src/lib/entities/rider-wallet.entity.ts
function rider_wallet_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function rider_wallet_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var RiderWalletEntity = function RiderWalletEntity() {
    "use strict";
};
rider_wallet_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    rider_wallet_entity_ts_metadata("design:type", Number)
], RiderWalletEntity.prototype, "id", void 0);
rider_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0.0,
        name: 'amount'
    }),
    rider_wallet_entity_ts_metadata("design:type", Number)
], RiderWalletEntity.prototype, "balance", void 0);
rider_wallet_entity_ts_decorate([
    (0,external_typeorm_.Index)(),
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    rider_wallet_entity_ts_metadata("design:type", String)
], RiderWalletEntity.prototype, "currency", void 0);
rider_wallet_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.wallets;
    }),
    rider_wallet_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], RiderWalletEntity.prototype, "rider", void 0);
rider_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    rider_wallet_entity_ts_metadata("design:type", Number)
], RiderWalletEntity.prototype, "riderId", void 0);
RiderWalletEntity = rider_wallet_entity_ts_decorate([
    (0,external_typeorm_.Entity)('rider_wallet')
], RiderWalletEntity);

;// ../../libs/database/src/lib/entities/taxi/rider-review.entity.ts
function rider_review_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function rider_review_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var RiderReviewEntity = function RiderReviewEntity() {
    "use strict";
};
rider_review_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    rider_review_entity_ts_metadata("design:type", Number)
], RiderReviewEntity.prototype, "id", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint'),
    rider_review_entity_ts_metadata("design:type", Number)
], RiderReviewEntity.prototype, "score", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'review',
        nullable: true
    }),
    rider_review_entity_ts_metadata("design:type", String)
], RiderReviewEntity.prototype, "description", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.reviewsForRider;
    }),
    rider_review_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], RiderReviewEntity.prototype, "rider", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    rider_review_entity_ts_metadata("design:type", Number)
], RiderReviewEntity.prototype, "riderId", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.reviewsByDriver;
    }),
    rider_review_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], RiderReviewEntity.prototype, "driver", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    rider_review_entity_ts_metadata("design:type", Number)
], RiderReviewEntity.prototype, "driverId", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    rider_review_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], RiderReviewEntity.prototype, "reviewTimestamp", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.driverReviewForRider;
    }),
    (0,external_typeorm_.JoinColumn)(),
    rider_review_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], RiderReviewEntity.prototype, "request", void 0);
rider_review_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    rider_review_entity_ts_metadata("design:type", Number)
], RiderReviewEntity.prototype, "orderId", void 0);
RiderReviewEntity = rider_review_entity_ts_decorate([
    (0,external_typeorm_.Entity)('rider_review')
], RiderReviewEntity);

;// ../../libs/database/src/lib/entities/customer-session.entity.ts
function customer_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function customer_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var CustomerSessionEntity = function CustomerSessionEntity() {
    "use strict";
};
customer_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    customer_session_entity_ts_metadata("design:type", Number)
], CustomerSessionEntity.prototype, "id", void 0);
customer_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return SessionInfo;
    }),
    customer_session_entity_ts_metadata("design:type", typeof SessionInfo === "undefined" ? Object : SessionInfo)
], CustomerSessionEntity.prototype, "sessionInfo", void 0);
customer_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.sessions;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    customer_session_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], CustomerSessionEntity.prototype, "customer", void 0);
customer_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    customer_session_entity_ts_metadata("design:type", Number)
], CustomerSessionEntity.prototype, "customerId", void 0);
CustomerSessionEntity = customer_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('customer_session')
], CustomerSessionEntity);

;// ../../libs/database/src/lib/entities/customer-note.entity.ts
function customer_note_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function customer_note_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var CustomerNoteEntity = function CustomerNoteEntity() {
    "use strict";
};
customer_note_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    customer_note_entity_ts_metadata("design:type", Number)
], CustomerNoteEntity.prototype, "id", void 0);
customer_note_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    customer_note_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CustomerNoteEntity.prototype, "createdAt", void 0);
customer_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.notes;
    }),
    customer_note_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], CustomerNoteEntity.prototype, "customer", void 0);
customer_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    customer_note_entity_ts_metadata("design:type", Number)
], CustomerNoteEntity.prototype, "customerId", void 0);
customer_note_entity_ts_decorate([
    (0,external_typeorm_.Column)('text'),
    customer_note_entity_ts_metadata("design:type", String)
], CustomerNoteEntity.prototype, "note", void 0);
customer_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.customerNotes;
    }),
    customer_note_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], CustomerNoteEntity.prototype, "createdBy", void 0);
customer_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    customer_note_entity_ts_metadata("design:type", Number)
], CustomerNoteEntity.prototype, "createdById", void 0);
CustomerNoteEntity = customer_note_entity_ts_decorate([
    (0,external_typeorm_.Entity)('customer_note')
], CustomerNoteEntity);

;// ../../libs/database/src/lib/entities/campaign.entity.ts
function campaign_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function campaign_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var CampaignEntity = function CampaignEntity() {
    "use strict";
};
campaign_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    campaign_entity_ts_metadata("design:type", Number)
], CampaignEntity.prototype, "id", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    campaign_entity_ts_metadata("design:type", String)
], CampaignEntity.prototype, "name", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    campaign_entity_ts_metadata("design:type", String)
], CampaignEntity.prototype, "description", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: AppType,
        default: [
            AppType.Taxi
        ]
    }),
    campaign_entity_ts_metadata("design:type", Array)
], CampaignEntity.prototype, "appType", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 0
    }),
    campaign_entity_ts_metadata("design:type", Number)
], CampaignEntity.prototype, "manyUsersCanUse", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 1
    }),
    campaign_entity_ts_metadata("design:type", Number)
], CampaignEntity.prototype, "manyTimesUserCanUse", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    campaign_entity_ts_metadata("design:type", Number)
], CampaignEntity.prototype, "minimumCost", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    campaign_entity_ts_metadata("design:type", Number)
], CampaignEntity.prototype, "maximumCost", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'startTimestamp'
    }),
    campaign_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CampaignEntity.prototype, "startAt", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'expirationTimestamp',
        nullable: true
    }),
    campaign_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CampaignEntity.prototype, "expireAt", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        default: 0
    }),
    campaign_entity_ts_metadata("design:type", Number)
], CampaignEntity.prototype, "discountPercent", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    campaign_entity_ts_metadata("design:type", Number)
], CampaignEntity.prototype, "discountFlat", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    campaign_entity_ts_metadata("design:type", Boolean)
], CampaignEntity.prototype, "isEnabled", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 'USD'
    }),
    campaign_entity_ts_metadata("design:type", String)
], CampaignEntity.prototype, "currency", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    campaign_entity_ts_metadata("design:type", Boolean)
], CampaignEntity.prototype, "isFirstTravelOnly", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.allowedCoupons;
    }),
    (0,external_typeorm_.JoinTable)({
        name: 'campaign_services_service'
    }),
    campaign_entity_ts_metadata("design:type", Array)
], CampaignEntity.prototype, "allowedServices", void 0);
campaign_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CampaignCodeEntity;
    }, function(code) {
        return code.campaign;
    }),
    campaign_entity_ts_metadata("design:type", Array)
], CampaignEntity.prototype, "codes", void 0);
CampaignEntity = campaign_entity_ts_decorate([
    (0,external_typeorm_.Entity)('campaign')
], CampaignEntity);

;// ../../libs/database/src/lib/entities/campaign-code.entity.ts
function campaign_code_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function campaign_code_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var CampaignCodeEntity = function CampaignCodeEntity() {
    "use strict";
};
campaign_code_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    campaign_code_entity_ts_metadata("design:type", Number)
], CampaignCodeEntity.prototype, "id", void 0);
campaign_code_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    campaign_code_entity_ts_metadata("design:type", String)
], CampaignCodeEntity.prototype, "code", void 0);
campaign_code_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.campaignCodes;
    }),
    campaign_code_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], CampaignCodeEntity.prototype, "customer", void 0);
campaign_code_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    campaign_code_entity_ts_metadata("design:type", Number)
], CampaignCodeEntity.prototype, "customerId", void 0);
campaign_code_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.campaignCode;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    campaign_code_entity_ts_metadata("design:type", Array)
], CampaignCodeEntity.prototype, "orders", void 0);
campaign_code_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CampaignEntity;
    }, function(campaign) {
        return campaign.codes;
    }),
    campaign_code_entity_ts_metadata("design:type", typeof CampaignEntity === "undefined" ? Object : CampaignEntity)
], CampaignCodeEntity.prototype, "campaign", void 0);
campaign_code_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    campaign_code_entity_ts_metadata("design:type", Number)
], CampaignCodeEntity.prototype, "campaignId", void 0);
CampaignCodeEntity = campaign_code_entity_ts_decorate([
    (0,external_typeorm_.Entity)('campaign_code')
], CampaignCodeEntity);

;// ../../libs/database/src/lib/entities/parking/parking-wallet.entity.ts
function parking_wallet_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_wallet_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ParkingWalletEntity = function ParkingWalletEntity() {
    "use strict";
};
parking_wallet_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_wallet_entity_ts_metadata("design:type", Number)
], ParkingWalletEntity.prototype, "id", void 0);
parking_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0
    }),
    parking_wallet_entity_ts_metadata("design:type", Number)
], ParkingWalletEntity.prototype, "balance", void 0);
parking_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    (0,external_typeorm_.Index)(),
    parking_wallet_entity_ts_metadata("design:type", String)
], ParkingWalletEntity.prototype, "currency", void 0);
parking_wallet_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.parkingWallets;
    }),
    parking_wallet_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkingWalletEntity.prototype, "customer", void 0);
parking_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_wallet_entity_ts_metadata("design:type", Number)
], ParkingWalletEntity.prototype, "customerId", void 0);
ParkingWalletEntity = parking_wallet_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_wallet')
], ParkingWalletEntity);

;// ../../libs/database/src/lib/entities/parking/parking-login-session.entity.ts
function parking_login_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function parking_login_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var ParkingLoginSessionEntity = function ParkingLoginSessionEntity() {
    "use strict";
};
parking_login_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    parking_login_session_entity_ts_metadata("design:type", Number)
], ParkingLoginSessionEntity.prototype, "id", void 0);
parking_login_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return SessionInfo;
    }),
    parking_login_session_entity_ts_metadata("design:type", typeof SessionInfo === "undefined" ? Object : SessionInfo)
], ParkingLoginSessionEntity.prototype, "sessionInfo", void 0);
parking_login_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(customer) {
        return customer.parkingLoginSessions;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    parking_login_session_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ParkingLoginSessionEntity.prototype, "customer", void 0);
parking_login_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    parking_login_session_entity_ts_metadata("design:type", Number)
], ParkingLoginSessionEntity.prototype, "customerId", void 0);
ParkingLoginSessionEntity = parking_login_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('parking_login_session')
], ParkingLoginSessionEntity);

;// ../../libs/database/src/lib/entities/customer.entity.ts
function customer_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function customer_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
























var CustomerEntity = function CustomerEntity() {
    "use strict";
};
customer_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    customer_entity_ts_metadata("design:type", Number)
], CustomerEntity.prototype, "id", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RiderStatus,
        default: RiderStatus.Enabled
    }),
    customer_entity_ts_metadata("design:type", typeof RiderStatus === "undefined" ? Object : RiderStatus)
], CustomerEntity.prototype, "status", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "firstName", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "lastName", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'varchar',
        length: 5
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "countryIso", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)('bigint', {
        unique: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "mobileNumber", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CustomerEntity.prototype, "registrationTimestamp", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CustomerEntity.prototype, "lastActivityAt", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "email", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: Gender,
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", typeof Gender === "undefined" ? Object : Gender)
], CustomerEntity.prototype, "gender", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)('varchar', {
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "address", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", Boolean)
], CustomerEntity.prototype, "isResident", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "idNumber", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "password", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", String)
], CustomerEntity.prototype, "notificationPlayerId", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    customer_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CustomerEntity.prototype, "deletedAt", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return PayoutAccountEntity;
    }, function(payoutAccount) {
        return payoutAccount.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "payoutAccounts", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return PayoutAccountEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    customer_entity_ts_metadata("design:type", typeof PayoutAccountEntity === "undefined" ? Object : PayoutAccountEntity)
], CustomerEntity.prototype, "defaultPayoutAccount", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", Number)
], CustomerEntity.prototype, "defaultPayoutAccountId", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderAddressEntity;
    }, function(address) {
        return address.rider;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "addresses", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, function(media) {
        return media.rider;
    }),
    (0,external_typeorm_.JoinColumn)(),
    customer_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], CustomerEntity.prototype, "media", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", Number)
], CustomerEntity.prototype, "mediaId", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", Number)
], CustomerEntity.prototype, "presetAvatarNumber", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.rider;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "orders", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderWalletEntity;
    }, function(wallet) {
        return wallet.rider;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "wallets", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.ridersFavorited;
    }),
    (0,external_typeorm_.JoinTable)(),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "favoriteDrivers", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.ridersBlocked;
    }),
    (0,external_typeorm_.JoinTable)(),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "blockedDrivers", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(riderTransaction) {
        return riderTransaction.rider;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'RESTRICT'
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "transactions", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingTransactionEntity;
    }, function(transaction) {
        return transaction.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "parkingTransactions", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return CouponEntity;
    }, function(coupon) {
        return coupon.riders;
    }),
    (0,external_typeorm_.JoinTable)(),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "coupons", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SavedPaymentMethodEntity;
    }, function(savedPaymentMethod) {
        return savedPaymentMethod.rider;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "savedPaymentMethods", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return SavedPaymentMethodEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    customer_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], CustomerEntity.prototype, "defaultSavedPaymentMethod", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    customer_entity_ts_metadata("design:type", Number)
], CustomerEntity.prototype, "defaultSavedPaymentMethodId", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderReviewEntity;
    }, function(review) {
        return review.rider;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "reviewsForRider", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.carOwner;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "orderedParkOrders", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.spotOwner;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "ownedParkOrders", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CustomerSessionEntity;
    }, function(session) {
        return session.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "sessions", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingLoginSessionEntity;
    }, function(session) {
        return session.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "parkingLoginSessions", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CustomerNoteEntity;
    }, function(note) {
        return note.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "notes", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopOrderEntity;
    }, function(shopOrder) {
        return shopOrder.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "shopOrders", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ShopFeedbackEntity;
    }, function(feedback) {
        return feedback.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "reviews", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkSpotEntity;
    }, function(parkSpot) {
        return parkSpot.owner;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "parkSpots", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CampaignCodeEntity;
    }, function(campaignCode) {
        return campaignCode.customer;
    }),
    customer_entity_ts_metadata("design:type", typeof CampaignCodeEntity === "undefined" ? Object : CampaignCodeEntity)
], CustomerEntity.prototype, "campaignCodes", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkingWalletEntity;
    }, function(parkingWallet) {
        return parkingWallet.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "parkingWallets", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CustomerFavoriteProductEntity;
    }, function(favoriteItem) {
        return favoriteItem.customer;
    }),
    customer_entity_ts_metadata("design:type", Array)
], CustomerEntity.prototype, "favoriteProducts", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    customer_entity_ts_metadata("design:type", Boolean)
], CustomerEntity.prototype, "pushNotificationShopOrderStatus", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    customer_entity_ts_metadata("design:type", Boolean)
], CustomerEntity.prototype, "pushNotificationShopSupportRequest", void 0);
customer_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    customer_entity_ts_metadata("design:type", Boolean)
], CustomerEntity.prototype, "pushNotificationShopAnnouncements", void 0);
CustomerEntity = customer_entity_ts_decorate([
    (0,external_typeorm_.Entity)('rider')
], CustomerEntity);

;// ../../libs/database/src/lib/entities/coupon.entity.ts
function coupon_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function coupon_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var CouponEntity = function CouponEntity() {
    "use strict";
};
coupon_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "id", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        unique: true
    }),
    coupon_entity_ts_metadata("design:type", String)
], CouponEntity.prototype, "code", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    coupon_entity_ts_metadata("design:type", String)
], CouponEntity.prototype, "title", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    coupon_entity_ts_metadata("design:type", String)
], CouponEntity.prototype, "description", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 0
    }),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "manyUsersCanUse", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 1
    }),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "manyTimesUserCanUse", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "minimumCost", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "maximumCost", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'startTimestamp'
    }),
    coupon_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CouponEntity.prototype, "startAt", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'expirationTimestamp',
        nullable: true
    }),
    coupon_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CouponEntity.prototype, "expireAt", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        default: 0
    }),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "discountPercent", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "discountFlat", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    coupon_entity_ts_metadata("design:type", Number)
], CouponEntity.prototype, "creditGift", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    coupon_entity_ts_metadata("design:type", Boolean)
], CouponEntity.prototype, "isEnabled", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    coupon_entity_ts_metadata("design:type", Boolean)
], CouponEntity.prototype, "isFirstTravelOnly", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.allowedCoupons;
    }),
    (0,external_typeorm_.JoinTable)({
        name: 'coupon_services_service'
    }),
    coupon_entity_ts_metadata("design:type", Array)
], CouponEntity.prototype, "allowedServices", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.coupons;
    }),
    coupon_entity_ts_metadata("design:type", Array)
], CouponEntity.prototype, "riders", void 0);
coupon_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.coupon;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    coupon_entity_ts_metadata("design:type", Array)
], CouponEntity.prototype, "orders", void 0);
CouponEntity = coupon_entity_ts_decorate([
    (0,external_typeorm_.Entity)('coupon')
], CouponEntity);

;// ../../libs/database/src/lib/entities/enums/order-status.enum.ts

var OrderStatus;
(function(OrderStatus) {
    OrderStatus["Requested"] = "Requested";
    OrderStatus["NotFound"] = "NotFound";
    OrderStatus["NoCloseFound"] = "NoCloseFound";
    OrderStatus["Found"] = "Found";
    OrderStatus["DriverAccepted"] = "DriverAccepted";
    OrderStatus["Arrived"] = "Arrived";
    OrderStatus["WaitingForPrePay"] = "WaitingForPrePay";
    OrderStatus["DriverCanceled"] = "DriverCanceled";
    OrderStatus["RiderCanceled"] = "RiderCanceled";
    OrderStatus["Started"] = "Started";
    OrderStatus["WaitingForPostPay"] = "WaitingForPostPay";
    OrderStatus["WaitingForReview"] = "WaitingForReview";
    OrderStatus["Finished"] = "Finished";
    OrderStatus["Booked"] = "Booked";
    OrderStatus["Expired"] = "Expired";
})(OrderStatus || (OrderStatus = {}));
(0,graphql_.registerEnumType)(OrderStatus, {
    name: 'OrderStatus'
});

;// ../../libs/database/src/lib/entities/taxi/feedback-parameter.entity.ts
function feedback_parameter_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function feedback_parameter_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var FeedbackParameterEntity = function FeedbackParameterEntity() {
    "use strict";
};
feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    feedback_parameter_entity_ts_metadata("design:type", Number)
], FeedbackParameterEntity.prototype, "id", void 0);
feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    feedback_parameter_entity_ts_metadata("design:type", String)
], FeedbackParameterEntity.prototype, "title", void 0);
feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    feedback_parameter_entity_ts_metadata("design:type", Boolean)
], FeedbackParameterEntity.prototype, "isGood", void 0);
feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return FeedbackEntity;
    }, function(feedback) {
        return feedback.parameters;
    }),
    (0,external_typeorm_.JoinTable)(),
    feedback_parameter_entity_ts_metadata("design:type", Array)
], FeedbackParameterEntity.prototype, "feedbacks", void 0);
FeedbackParameterEntity = feedback_parameter_entity_ts_decorate([
    (0,external_typeorm_.Entity)('review_parameter')
], FeedbackParameterEntity);

;// ../../libs/database/src/lib/entities/taxi/feedback.entity.ts
function feedback_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function feedback_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var FeedbackEntity = function FeedbackEntity() {
    "use strict";
};
feedback_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    feedback_entity_ts_metadata("design:type", Number)
], FeedbackEntity.prototype, "id", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    feedback_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], FeedbackEntity.prototype, "reviewTimestamp", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint'),
    feedback_entity_ts_metadata("design:type", Number)
], FeedbackEntity.prototype, "score", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        name: 'review',
        nullable: true
    }),
    feedback_entity_ts_metadata("design:type", String)
], FeedbackEntity.prototype, "description", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.feedbacks;
    }),
    feedback_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], FeedbackEntity.prototype, "driver", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    feedback_entity_ts_metadata("design:type", Number)
], FeedbackEntity.prototype, "driverId", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.review;
    }),
    (0,external_typeorm_.JoinColumn)(),
    feedback_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], FeedbackEntity.prototype, "request", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    feedback_entity_ts_metadata("design:type", Number)
], FeedbackEntity.prototype, "requestId", void 0);
feedback_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return FeedbackParameterEntity;
    }, function(feedbackParameter) {
        return feedbackParameter.feedbacks;
    }),
    feedback_entity_ts_metadata("design:type", Array)
], FeedbackEntity.prototype, "parameters", void 0);
FeedbackEntity = feedback_entity_ts_decorate([
    (0,external_typeorm_.Entity)('request_review')
], FeedbackEntity);

;// ../../libs/database/src/lib/entities/enums/message-status.enum.ts

var MessageStatus;
(function(MessageStatus) {
    MessageStatus["Sent"] = "sent";
    MessageStatus["Delivered"] = "delivered";
    MessageStatus["Seen"] = "seen";
})(MessageStatus || (MessageStatus = {}));
(0,graphql_.registerEnumType)(MessageStatus, {
    name: 'MessageStatus'
});

;// ../../libs/database/src/lib/entities/taxi/request-message.entity.ts
function request_message_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function request_message_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var OrderMessageEntity = function OrderMessageEntity() {
    "use strict";
};
request_message_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    request_message_entity_ts_metadata("design:type", Number)
], OrderMessageEntity.prototype, "id", void 0);
request_message_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    request_message_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], OrderMessageEntity.prototype, "sentAt", void 0);
request_message_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    request_message_entity_ts_metadata("design:type", Boolean)
], OrderMessageEntity.prototype, "sentByDriver", void 0);
request_message_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        name: 'state',
        enum: MessageStatus,
        default: MessageStatus.Sent
    }),
    request_message_entity_ts_metadata("design:type", typeof MessageStatus === "undefined" ? Object : MessageStatus)
], OrderMessageEntity.prototype, "status", void 0);
request_message_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    request_message_entity_ts_metadata("design:type", String)
], OrderMessageEntity.prototype, "content", void 0);
request_message_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.conversation;
    }),
    request_message_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], OrderMessageEntity.prototype, "request", void 0);
request_message_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    request_message_entity_ts_metadata("design:type", Number)
], OrderMessageEntity.prototype, "requestId", void 0);
OrderMessageEntity = request_message_entity_ts_decorate([
    (0,external_typeorm_.Entity)('request_chat')
], OrderMessageEntity);

;// ../../libs/database/src/lib/entities/enums/request-activity-type.enum.ts

var RequestActivityType;
(function(RequestActivityType) {
    RequestActivityType["RequestedByOperator"] = "RequestedByOperator";
    RequestActivityType["BookedByOperator"] = "BookedByOperator";
    RequestActivityType["RequestedByRider"] = "RequestedByRider";
    RequestActivityType["BookedByRider"] = "BookedByRider";
    RequestActivityType["DriverAccepted"] = "DriverAccepted";
    RequestActivityType["ArrivedToPickupPoint"] = "ArrivedToPickupPoint";
    RequestActivityType["CanceledByDriver"] = "CanceledByDriver";
    RequestActivityType["CanceledByRider"] = "CanceledByRider";
    RequestActivityType["CanceledByOperator"] = "CanceledByOperator";
    RequestActivityType["Started"] = "Started";
    RequestActivityType["ArrivedToDestination"] = "ArrivedToDestination";
    RequestActivityType["Paid"] = "Paid";
    RequestActivityType["Reviewed"] = "Reviewed";
    RequestActivityType["Expired"] = "Expired";
    RequestActivityType["StartedByQr"] = "StartedByQr";
})(RequestActivityType || (RequestActivityType = {}));
(0,graphql_.registerEnumType)(RequestActivityType, {
    name: "RequestActivityType"
});

;// ../../libs/database/src/lib/entities/taxi/request-activity.entity.ts
function request_activity_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function request_activity_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var RequestActivityEntity = function RequestActivityEntity() {
    "use strict";
};
request_activity_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    request_activity_entity_ts_metadata("design:type", Number)
], RequestActivityEntity.prototype, "id", void 0);
request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RequestActivityType
    }),
    request_activity_entity_ts_metadata("design:type", typeof RequestActivityType === "undefined" ? Object : RequestActivityType)
], RequestActivityEntity.prototype, "type", void 0);
request_activity_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    request_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], RequestActivityEntity.prototype, "createdAt", void 0);
request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(request) {
        return request.activities;
    }),
    request_activity_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], RequestActivityEntity.prototype, "request", void 0);
request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    request_activity_entity_ts_metadata("design:type", Number)
], RequestActivityEntity.prototype, "requestId", void 0);
RequestActivityEntity = request_activity_entity_ts_decorate([
    (0,external_typeorm_.Entity)('request_activity')
], RequestActivityEntity);

;// ../../libs/database/src/lib/entities/enums/sos-status.enum.ts

var SOSStatus;
(function(SOSStatus) {
    SOSStatus["Submitted"] = "Submitted";
    SOSStatus["UnderReview"] = "UnderReview";
    SOSStatus["FalseAlarm"] = "FalseAlarm";
    SOSStatus["Resolved"] = "Resolved";
})(SOSStatus || (SOSStatus = {}));
(0,graphql_.registerEnumType)(SOSStatus, {
    name: 'SOSStatus'
});

;// ../../libs/database/src/lib/entities/enums/sos-activity-action.enum.ts

var SOSActivityAction;
(function(SOSActivityAction) {
    SOSActivityAction["Submitted"] = "Submitted";
    SOSActivityAction["Seen"] = "Seen";
    SOSActivityAction["ContactDriver"] = "ContactDriver";
    SOSActivityAction["ContactAuthorities"] = "ContactAuthorities";
    SOSActivityAction["MarkedAsResolved"] = "MarkedAsResolved";
    SOSActivityAction["MarkedAsFalseAlarm"] = "MarkedAsFalseAlarm";
})(SOSActivityAction || (SOSActivityAction = {}));
(0,graphql_.registerEnumType)(SOSActivityAction, {
    name: 'SOSActivityAction'
});

;// ../../libs/database/src/lib/entities/taxi/sos-activity.entity.ts
function sos_activity_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function sos_activity_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var SOSActivityEntity = function SOSActivityEntity() {
    "use strict";
};
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    sos_activity_entity_ts_metadata("design:type", Number)
], SOSActivityEntity.prototype, "id", void 0);
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    sos_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], SOSActivityEntity.prototype, "createdAt", void 0);
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: SOSActivityAction
    }),
    sos_activity_entity_ts_metadata("design:type", typeof SOSActivityAction === "undefined" ? Object : SOSActivityAction)
], SOSActivityEntity.prototype, "action", void 0);
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        length: 2000
    }),
    sos_activity_entity_ts_metadata("design:type", String)
], SOSActivityEntity.prototype, "note", void 0);
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.sosActivities;
    }),
    sos_activity_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], SOSActivityEntity.prototype, "operator", void 0);
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    sos_activity_entity_ts_metadata("design:type", Number)
], SOSActivityEntity.prototype, "operatorId", void 0);
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SOSEntity;
    }, function(sos) {
        return sos.activities;
    }),
    sos_activity_entity_ts_metadata("design:type", typeof SOSEntity === "undefined" ? Object : SOSEntity)
], SOSActivityEntity.prototype, "sos", void 0);
sos_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sos_activity_entity_ts_metadata("design:type", Number)
], SOSActivityEntity.prototype, "sosId", void 0);
SOSActivityEntity = sos_activity_entity_ts_decorate([
    (0,external_typeorm_.Entity)('sos_activity')
], SOSActivityEntity);

;// ../../libs/database/src/lib/entities/taxi/sos-reason.entity.ts
function sos_reason_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function sos_reason_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var SOSReasonEntity = function SOSReasonEntity() {
    "use strict";
};
sos_reason_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    sos_reason_entity_ts_metadata("design:type", Number)
], SOSReasonEntity.prototype, "id", void 0);
sos_reason_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sos_reason_entity_ts_metadata("design:type", String)
], SOSReasonEntity.prototype, "name", void 0);
sos_reason_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    sos_reason_entity_ts_metadata("design:type", Boolean)
], SOSReasonEntity.prototype, "isActive", void 0);
sos_reason_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SOSEntity;
    }, function(sos) {
        return sos.reason;
    }),
    sos_reason_entity_ts_metadata("design:type", Array)
], SOSReasonEntity.prototype, "sos", void 0);
SOSReasonEntity = sos_reason_entity_ts_decorate([
    (0,external_typeorm_.Entity)('sos_reason')
], SOSReasonEntity);

;// ../../libs/database/src/lib/entities/taxi/sos.entity.ts
function sos_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function sos_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}







var SOSEntity = function SOSEntity() {
    "use strict";
};
sos_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    sos_entity_ts_metadata("design:type", Number)
], SOSEntity.prototype, "id", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    sos_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], SOSEntity.prototype, "createdAt", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: SOSStatus,
        default: SOSStatus.Submitted
    }),
    sos_entity_ts_metadata("design:type", typeof SOSStatus === "undefined" ? Object : SOSStatus)
], SOSEntity.prototype, "status", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    sos_entity_ts_metadata("design:type", String)
], SOSEntity.prototype, "comment", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SOSReasonEntity;
    }, {
        nullable: true
    }),
    sos_entity_ts_metadata("design:type", typeof SOSReasonEntity === "undefined" ? Object : SOSReasonEntity)
], SOSEntity.prototype, "reason", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    sos_entity_ts_metadata("design:type", Number)
], SOSEntity.prototype, "reasonId", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.Column)('point', {
        transformer: new PointTransformer(),
        nullable: true
    }),
    sos_entity_ts_metadata("design:type", typeof Point === "undefined" ? Object : Point)
], SOSEntity.prototype, "location", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(request) {
        return request.sosCalls;
    }),
    sos_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], SOSEntity.prototype, "request", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sos_entity_ts_metadata("design:type", Number)
], SOSEntity.prototype, "requestId", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sos_entity_ts_metadata("design:type", Boolean)
], SOSEntity.prototype, "submittedByRider", void 0);
sos_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SOSActivityEntity;
    }, function(activity) {
        return activity.sos;
    }),
    sos_entity_ts_metadata("design:type", Array)
], SOSEntity.prototype, "activities", void 0);
SOSEntity = sos_entity_ts_decorate([
    (0,external_typeorm_.Entity)('sos')
], SOSEntity);

;// ../../libs/database/src/lib/entities/taxi/order-cancel-reason.entity.ts
function order_cancel_reason_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function order_cancel_reason_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var OrderCancelReasonEntity = function OrderCancelReasonEntity() {
    "use strict";
};
order_cancel_reason_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    order_cancel_reason_entity_ts_metadata("design:type", Number)
], OrderCancelReasonEntity.prototype, "id", void 0);
order_cancel_reason_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    order_cancel_reason_entity_ts_metadata("design:type", String)
], OrderCancelReasonEntity.prototype, "title", void 0);
order_cancel_reason_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(request) {
        return request.cancelReason;
    }),
    order_cancel_reason_entity_ts_metadata("design:type", Array)
], OrderCancelReasonEntity.prototype, "orders", void 0);
order_cancel_reason_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    order_cancel_reason_entity_ts_metadata("design:type", Boolean)
], OrderCancelReasonEntity.prototype, "isEnabled", void 0);
order_cancel_reason_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: AnnouncementUserType,
        default: AnnouncementUserType.Rider
    }),
    order_cancel_reason_entity_ts_metadata("design:type", typeof AnnouncementUserType === "undefined" ? Object : AnnouncementUserType)
], OrderCancelReasonEntity.prototype, "userType", void 0);
OrderCancelReasonEntity = order_cancel_reason_entity_ts_decorate([
    (0,external_typeorm_.Entity)('order_cancel_reason')
], OrderCancelReasonEntity);

;// ../../libs/database/src/lib/entities/taxi/taxi-order-note.entity.ts
function taxi_order_note_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function taxi_order_note_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var TaxiOrderNoteEntity = function TaxiOrderNoteEntity() {
    "use strict";
};
taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    taxi_order_note_entity_ts_metadata("design:type", Number)
], TaxiOrderNoteEntity.prototype, "id", void 0);
taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    taxi_order_note_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderNoteEntity.prototype, "createdAt", void 0);
taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.notes;
    }),
    taxi_order_note_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], TaxiOrderNoteEntity.prototype, "order", void 0);
taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_note_entity_ts_metadata("design:type", Number)
], TaxiOrderNoteEntity.prototype, "orderId", void 0);
taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_note_entity_ts_metadata("design:type", String)
], TaxiOrderNoteEntity.prototype, "note", void 0);
taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    taxi_order_note_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], TaxiOrderNoteEntity.prototype, "staff", void 0);
taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_note_entity_ts_metadata("design:type", Number)
], TaxiOrderNoteEntity.prototype, "staffId", void 0);
TaxiOrderNoteEntity = taxi_order_note_entity_ts_decorate([
    (0,external_typeorm_.Entity)('taxi_order_note')
], TaxiOrderNoteEntity);

;// ../../libs/database/src/lib/entities/fragments/delivery-contact.ts
var DeliveryContact = function DeliveryContact() {
    "use strict";
};

;// ../../libs/database/src/lib/entities/taxi/taxi-order-shop.entity.ts
function taxi_order_shop_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function taxi_order_shop_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var TaxiOrderShopEntity = function TaxiOrderShopEntity() {
    "use strict";
};
taxi_order_shop_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    taxi_order_shop_entity_ts_metadata("design:type", Number)
], TaxiOrderShopEntity.prototype, "id", void 0);
taxi_order_shop_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.shopCarts;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    taxi_order_shop_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], TaxiOrderShopEntity.prototype, "taxiOrder", void 0);
taxi_order_shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_shop_entity_ts_metadata("design:type", Number)
], TaxiOrderShopEntity.prototype, "taxiOrderId", void 0);
taxi_order_shop_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderCartEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    taxi_order_shop_entity_ts_metadata("design:type", typeof ShopOrderCartEntity === "undefined" ? Object : ShopOrderCartEntity)
], TaxiOrderShopEntity.prototype, "shopOrderCart", void 0);
taxi_order_shop_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_shop_entity_ts_metadata("design:type", Number)
], TaxiOrderShopEntity.prototype, "shopOrderCartId", void 0);
TaxiOrderShopEntity = taxi_order_shop_entity_ts_decorate([
    (0,external_typeorm_.Entity)('taxi_order_shop')
], TaxiOrderShopEntity);

;// ../../libs/database/src/lib/entities/taxi/taxi-order.entity.ts
function taxi_order_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function taxi_order_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






























var TaxiOrderEntity = function TaxiOrderEntity() {
    "use strict";
};
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "id", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        name: 'requestTimestamp'
    }),
    taxi_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderEntity.prototype, "createdOn", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TaxiOrderType,
        default: TaxiOrderType.Ride
    }),
    taxi_order_entity_ts_metadata("design:type", typeof TaxiOrderType === "undefined" ? Object : TaxiOrderType)
], TaxiOrderEntity.prototype, "type", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderEntity.prototype, "startTimestamp", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderEntity.prototype, "finishTimestamp", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: OrderStatus,
        default: OrderStatus.Requested
    }),
    taxi_order_entity_ts_metadata("design:type", typeof OrderStatus === "undefined" ? Object : OrderStatus)
], TaxiOrderEntity.prototype, "status", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "distanceBest", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "durationBest", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "waitMinutes", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "waitCost", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "rideOptionsCost", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "taxCost", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: 0
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "serviceCost", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderEntity.prototype, "expectedTimestamp", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderEntity.prototype, "etaPickup", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "costBest", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: '0.00'
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "costAfterCoupon", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2,
        default: '0.00'
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "tipAmount", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0,
        precision: 10,
        scale: 2
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "paidAmount", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        default: 0,
        scale: 2
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "providerShare", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        default: -1
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "destinationArrivedTo", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return RegionEntity;
    }, function(region) {
        return region.taxiOrders;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof RegionEntity === "undefined" ? Object : RegionEntity)
], TaxiOrderEntity.prototype, "region", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "regionId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RequestActivityEntity;
    }, function(activity) {
        return activity.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "activities", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'text',
        transformer: {
            to: function to(value) {
                return value.join('|');
            },
            from: function from(value) {
                if (value == null) return [];
                return value.split('|');
            }
        }
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "addresses", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('multipoint', {
        transformer: new MultipointTransformer()
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "points", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('multipoint', {
        transformer: new MultipointTransformer(),
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "directions", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('multipoint', {
        transformer: new MultipointTransformer(),
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "driverDirections", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: function() {
            return 'CURRENT_TIMESTAMP';
        }
    }),
    taxi_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderEntity.prototype, "driverLastSeenMessagesAt", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: function() {
            return 'CURRENT_TIMESTAMP';
        }
    }),
    taxi_order_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderEntity.prototype, "riderLastSeenMessagesAt", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return DeliveryContact;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof DeliveryContact === "undefined" ? Object : DeliveryContact)
], TaxiOrderEntity.prototype, "senderContact", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return DeliveryContact;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof DeliveryContact === "undefined" ? Object : DeliveryContact)
], TaxiOrderEntity.prototype, "receiverContact", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.orders;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], TaxiOrderEntity.prototype, "driver", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "driverId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.orders;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], TaxiOrderEntity.prototype, "rider", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "riderId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CouponEntity;
    }, function(coupon) {
        return coupon.orders;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof CouponEntity === "undefined" ? Object : CouponEntity)
], TaxiOrderEntity.prototype, "coupon", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "couponId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    taxi_order_entity_ts_metadata("design:type", String)
], TaxiOrderEntity.prototype, "currency", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return OrderMessageEntity;
    }, function(message) {
        return message.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "conversation", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PaymentMode,
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", typeof PaymentMode === "undefined" ? Object : PaymentMode)
], TaxiOrderEntity.prototype, "paymentMode", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.orders;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], TaxiOrderEntity.prototype, "paymentGateway", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "paymentGatewayId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SavedPaymentMethodEntity;
    }, function(method) {
        return method.orders;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], TaxiOrderEntity.prototype, "savedPaymentMethod", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "savedPaymentMethodId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiSupportRequestEntity;
    }, function(complaint) {
        return complaint.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "complaints", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ServiceEntity;
    }, function(service) {
        return service.requests;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof ServiceEntity === "undefined" ? Object : ServiceEntity)
], TaxiOrderEntity.prototype, "service", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "serviceId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.requests;
    }, {
        onDelete: 'CASCADE'
    }),
    taxi_order_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], TaxiOrderEntity.prototype, "operator", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "operatorId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return FleetEntity;
    }, function(fleet) {
        return fleet.requests;
    }, {
        onDelete: 'SET NULL'
    }),
    taxi_order_entity_ts_metadata("design:type", typeof FleetEntity === "undefined" ? Object : FleetEntity)
], TaxiOrderEntity.prototype, "fleet", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "fleetId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(riderTransaction) {
        return riderTransaction.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "riderTransactions", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FleetTransactionEntity;
    }, function(fleetTransaction) {
        return fleetTransaction.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "fleetTransactions", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return FeedbackEntity;
    }, function(feedback) {
        return feedback.request;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof FeedbackEntity === "undefined" ? Object : FeedbackEntity)
], TaxiOrderEntity.prototype, "review", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(transaction) {
        return transaction.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "driverTransactions", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProviderTransactionEntity;
    }, function(transaction) {
        return transaction.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "providerTransactions", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ServiceOptionEntity;
    }, function(option) {
        return option.requests;
    }, {
        onDelete: 'CASCADE'
    }),
    (0,external_typeorm_.JoinTable)(),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "options", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SOSEntity;
    }, function(sos) {
        return sos.request;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "sosCalls", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OrderCancelReasonEntity;
    }, function(order) {
        return order.orders;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof OrderCancelReasonEntity === "undefined" ? Object : OrderCancelReasonEntity)
], TaxiOrderEntity.prototype, "cancelReason", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "cancelReasonId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", String)
], TaxiOrderEntity.prototype, "cancelReasonNote", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return RiderReviewEntity;
    }, function(review) {
        return review.request;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof RiderReviewEntity === "undefined" ? Object : RiderReviewEntity)
], TaxiOrderEntity.prototype, "driverReviewForRider", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return RiderReviewEntity;
    }, function(review) {
        return review.request;
    }),
    taxi_order_entity_ts_metadata("design:type", typeof CampaignCodeEntity === "undefined" ? Object : CampaignCodeEntity)
], TaxiOrderEntity.prototype, "campaignCode", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_order_entity_ts_metadata("design:type", Number)
], TaxiOrderEntity.prototype, "campaignCodeId", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderNoteEntity;
    }, function(note) {
        return note.order;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "notes", void 0);
taxi_order_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderShopEntity;
    }, function(shop) {
        return shop.taxiOrder;
    }),
    taxi_order_entity_ts_metadata("design:type", Array)
], TaxiOrderEntity.prototype, "shopCarts", void 0);
TaxiOrderEntity = taxi_order_entity_ts_decorate([
    (0,external_typeorm_.Entity)('request')
], TaxiOrderEntity);

;// ../../libs/database/src/lib/entities/taxi/taxi-support-request.entity.ts
function taxi_support_request_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function taxi_support_request_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var TaxiSupportRequestEntity = function TaxiSupportRequestEntity() {
    "use strict";
};
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    taxi_support_request_entity_ts_metadata("design:type", Number)
], TaxiSupportRequestEntity.prototype, "id", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    taxi_support_request_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiSupportRequestEntity.prototype, "inscriptionTimestamp", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.complaints;
    }),
    taxi_support_request_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], TaxiSupportRequestEntity.prototype, "request", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.assignedTaxiSupportRequests;
    }),
    (0,external_typeorm_.JoinTable)(),
    taxi_support_request_entity_ts_metadata("design:type", Array)
], TaxiSupportRequestEntity.prototype, "assignedToStaffs", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_support_request_entity_ts_metadata("design:type", Number)
], TaxiSupportRequestEntity.prototype, "requestId", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_support_request_entity_ts_metadata("design:type", Boolean)
], TaxiSupportRequestEntity.prototype, "requestedByDriver", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_support_request_entity_ts_metadata("design:type", String)
], TaxiSupportRequestEntity.prototype, "subject", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_support_request_entity_ts_metadata("design:type", String)
], TaxiSupportRequestEntity.prototype, "content", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        default: ComplaintStatus.Submitted
    }),
    taxi_support_request_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], TaxiSupportRequestEntity.prototype, "status", void 0);
taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiSupportRequestActivityEntity;
    }, function(activity) {
        return activity.complaint;
    }),
    taxi_support_request_entity_ts_metadata("design:type", Array)
], TaxiSupportRequestEntity.prototype, "activities", void 0);
TaxiSupportRequestEntity = taxi_support_request_entity_ts_decorate([
    (0,external_typeorm_.Entity)('complaint')
], TaxiSupportRequestEntity);

;// ../../libs/database/src/lib/entities/taxi/taxi-support-request-activity.entity.ts
function taxi_support_request_activity_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function taxi_support_request_activity_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var TaxiSupportRequestActivityEntity = function TaxiSupportRequestActivityEntity() {
    "use strict";
};
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    taxi_support_request_activity_entity_ts_metadata("design:type", Number)
], TaxiSupportRequestActivityEntity.prototype, "id", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintActivityType
    }),
    taxi_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintActivityType === "undefined" ? Object : ComplaintActivityType)
], TaxiSupportRequestActivityEntity.prototype, "type", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    taxi_support_request_activity_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiSupportRequestActivityEntity.prototype, "createdAt", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.complaintActivities;
    }),
    taxi_support_request_activity_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], TaxiSupportRequestActivityEntity.prototype, "actor", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    taxi_support_request_activity_entity_ts_metadata("design:type", Array)
], TaxiSupportRequestActivityEntity.prototype, "assignedToStaffs", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return OperatorEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    taxi_support_request_activity_entity_ts_metadata("design:type", Array)
], TaxiSupportRequestActivityEntity.prototype, "unassignedFromStaffs", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    taxi_support_request_activity_entity_ts_metadata("design:type", String)
], TaxiSupportRequestActivityEntity.prototype, "comment", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    taxi_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], TaxiSupportRequestActivityEntity.prototype, "statusFrom", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ComplaintStatus,
        nullable: true
    }),
    taxi_support_request_activity_entity_ts_metadata("design:type", typeof ComplaintStatus === "undefined" ? Object : ComplaintStatus)
], TaxiSupportRequestActivityEntity.prototype, "statusTo", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiSupportRequestEntity;
    }, function(complaint) {
        return complaint.activities;
    }),
    taxi_support_request_activity_entity_ts_metadata("design:type", typeof TaxiSupportRequestEntity === "undefined" ? Object : TaxiSupportRequestEntity)
], TaxiSupportRequestActivityEntity.prototype, "complaint", void 0);
taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    taxi_support_request_activity_entity_ts_metadata("design:type", Number)
], TaxiSupportRequestActivityEntity.prototype, "complaintId", void 0);
TaxiSupportRequestActivityEntity = taxi_support_request_activity_entity_ts_decorate([
    (0,external_typeorm_.Entity)('complaint_activity')
], TaxiSupportRequestActivityEntity);

;// ../../libs/database/src/lib/entities/enums/enabled-notification.enum.ts

var EnabledNotification;
(function(EnabledNotification) {
    EnabledNotification["SOS"] = "sos";
    EnabledNotification["SupportRequest"] = "support_request";
    EnabledNotification["NewOrder"] = "new_order";
    EnabledNotification["UserPendingVerification"] = "user_pending_verification";
})(EnabledNotification || (EnabledNotification = {}));
(0,graphql_.registerEnumType)(EnabledNotification, {
    name: 'EnabledNotification'
});

;// ../../libs/database/src/lib/entities/enums/operator-permission.enum.ts

var OperatorPermission;
(function(OperatorPermission) {
    OperatorPermission["Drivers_View"] = "Drivers_View";
    OperatorPermission["Drivers_Edit"] = "Drivers_Edit";
    OperatorPermission["Riders_View"] = "Riders_View";
    OperatorPermission["Riders_Edit"] = "Riders_Edit";
    OperatorPermission["Regions_View"] = "Regions_View";
    OperatorPermission["Regions_Edit"] = "Regions_Edit";
    OperatorPermission["Services_View"] = "Services_View";
    OperatorPermission["Services_Edit"] = "Services_Edit";
    OperatorPermission["Complaints_View"] = "Complaints_View";
    OperatorPermission["Complaints_Edit"] = "Complaints_Edit";
    OperatorPermission["Coupons_View"] = "Coupons_View";
    OperatorPermission["Coupons_Edit"] = "Coupons_Edit";
    OperatorPermission["Announcements_View"] = "Announcements_View";
    OperatorPermission["Announcements_Edit"] = "Announcements_Edit";
    OperatorPermission["Requests_View"] = "Requests_View";
    OperatorPermission["Fleets_View"] = "Fleets_View";
    OperatorPermission["Fleets_Edit"] = "Fleets_Edit";
    OperatorPermission["Gateways_View"] = "Gateways_View";
    OperatorPermission["Gateways_Edit"] = "Gateways_Edit";
    OperatorPermission["Users_View"] = "Users_View";
    OperatorPermission["Users_Edit"] = "Users_Edit";
    OperatorPermission["Cars_View"] = "Cars_View";
    OperatorPermission["Cars_Edit"] = "Cars_Edit";
    OperatorPermission["FleetWallet_View"] = "FleetWallet_View";
    OperatorPermission["FleetWallet_Edit"] = "FleetWallet_Edit";
    OperatorPermission["ProviderWallet_View"] = "ProviderWallet_View";
    OperatorPermission["ProviderWallet_Edit"] = "ProviderWallet_Edit";
    OperatorPermission["DriverWallet_View"] = "DriverWallet_View";
    OperatorPermission["DriverWallet_Edit"] = "DriverWallet_Edit";
    OperatorPermission["RiderWallet_View"] = "RiderWallet_View";
    OperatorPermission["RiderWallet_Edit"] = "RiderWallet_Edit";
    OperatorPermission["ReviewParameter_Edit"] = "ReviewParameter_Edit";
    OperatorPermission["Payouts_View"] = "Payouts_View";
    OperatorPermission["Payouts_Edit"] = "Payouts_Edit";
    OperatorPermission["GiftBatch_View"] = "GiftBatch_View";
    OperatorPermission["GiftBatch_Create"] = "GiftBatch_Create";
    OperatorPermission["GiftBatch_ViewCodes"] = "GiftBatch_ViewCodes";
    OperatorPermission["SMSProviders_View"] = "SMSProviders_View";
    OperatorPermission["SMSProviders_Edit"] = "SMSProviders_Edit";
})(OperatorPermission || (OperatorPermission = {}));
(0,graphql_.registerEnumType)(OperatorPermission, {
    name: 'OperatorPermission'
});

;// ../../libs/database/src/lib/entities/enums/shop-permission.enum.ts

var ShopPermission;
(function(ShopPermission) {
    ShopPermission["SHOP_VIEW"] = "SHOP_VIEW";
    ShopPermission["SHOP_EDIT"] = "SHOP_EDIT";
    ShopPermission["ORDER_VIEW"] = "ORDER_VIEW";
    ShopPermission["ORDER_EDIT"] = "ORDER_EDIT";
})(ShopPermission || (ShopPermission = {}));
(0,graphql_.registerEnumType)(ShopPermission, {
    name: 'ShopPermission'
});

;// ../../libs/database/src/lib/entities/enums/parking-permission.enum.ts

var ParkingPermission;
(function(ParkingPermission) {
    ParkingPermission["PARKING_VIEW"] = "PARKING_VIEW";
    ParkingPermission["PARKING_EDIT"] = "PARKING_EDIT";
    ParkingPermission["ORDER_VIEW"] = "ORDER_VIEW";
    ParkingPermission["ORDER_EDIT"] = "ORDER_EDIT";
})(ParkingPermission || (ParkingPermission = {}));
(0,graphql_.registerEnumType)(ParkingPermission, {
    name: 'ParkingPermission'
});

;// ../../libs/database/src/lib/entities/enums/taxi-permissions.enum.ts

var TaxiPermission;
(function(TaxiPermission) {
    TaxiPermission["DRIVER_VIEW"] = "DRIVER_VIEW";
    TaxiPermission["DRIVER_EDIT"] = "DRIVER_EDIT";
    TaxiPermission["ORDER_VIEW"] = "ORDER_VIEW";
    TaxiPermission["ORDER_EDIT"] = "ORDER_EDIT";
    TaxiPermission["REGION_VIEW"] = "REGIONS_VIEW";
    TaxiPermission["REGION_EDIT"] = "REGIONS_EDIT";
    TaxiPermission["VEHICLE_VIEW"] = "VEHICLES_VIEW";
    TaxiPermission["VEHICLE_EDIT"] = "VEHICLES_EDIT";
    TaxiPermission["FLEET_VIEW"] = "FLEETS_VIEW";
    TaxiPermission["FLEET_EDIT"] = "FLEETS_EDIT";
    TaxiPermission["PRICING_VIEW"] = "PRICING_VIEW";
    TaxiPermission["PRICING_EDIT"] = "PRICING_EDIT";
})(TaxiPermission || (TaxiPermission = {}));
(0,graphql_.registerEnumType)(TaxiPermission, {
    name: 'TaxiPermission'
});

;// ../../libs/database/src/lib/entities/operator-role.entity.ts
function operator_role_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function operator_role_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}







var OperatorRoleEntity = function OperatorRoleEntity() {
    "use strict";
};
operator_role_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    operator_role_entity_ts_metadata("design:type", Number)
], OperatorRoleEntity.prototype, "id", void 0);
operator_role_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    operator_role_entity_ts_metadata("design:type", String)
], OperatorRoleEntity.prototype, "title", void 0);
operator_role_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: OperatorPermission
    }),
    operator_role_entity_ts_metadata("design:type", Array)
], OperatorRoleEntity.prototype, "permissions", void 0);
operator_role_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: TaxiPermission,
        default: []
    }),
    operator_role_entity_ts_metadata("design:type", Array)
], OperatorRoleEntity.prototype, "taxiPermissions", void 0);
operator_role_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: ShopPermission,
        default: []
    }),
    operator_role_entity_ts_metadata("design:type", Array)
], OperatorRoleEntity.prototype, "shopPermissions", void 0);
operator_role_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: ParkingPermission,
        default: []
    }),
    operator_role_entity_ts_metadata("design:type", Array)
], OperatorRoleEntity.prototype, "parkingPermissions", void 0);
operator_role_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: AppType,
        default: []
    }),
    operator_role_entity_ts_metadata("design:type", Array)
], OperatorRoleEntity.prototype, "allowedApps", void 0);
operator_role_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.role;
    }),
    operator_role_entity_ts_metadata("design:type", Array)
], OperatorRoleEntity.prototype, "operators", void 0);
OperatorRoleEntity = operator_role_entity_ts_decorate([
    (0,external_typeorm_.Entity)('operator_role')
], OperatorRoleEntity);

;// ../../libs/database/src/lib/entities/operator-session.entity.ts
function operator_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function operator_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var OperatorSessionEntity = function OperatorSessionEntity() {
    "use strict";
};
operator_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    operator_session_entity_ts_metadata("design:type", Number)
], OperatorSessionEntity.prototype, "id", void 0);
operator_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return SessionInfo;
    }),
    operator_session_entity_ts_metadata("design:type", typeof SessionInfo === "undefined" ? Object : SessionInfo)
], OperatorSessionEntity.prototype, "sessionInfo", void 0);
operator_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.sessions;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    operator_session_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], OperatorSessionEntity.prototype, "operator", void 0);
operator_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    operator_session_entity_ts_metadata("design:type", Number)
], OperatorSessionEntity.prototype, "operatorId", void 0);
OperatorSessionEntity = operator_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('operator_session')
], OperatorSessionEntity);

;// ../../libs/database/src/lib/entities/operator.entity.ts
function operator_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function operator_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



















var OperatorEntity = function OperatorEntity() {
    "use strict";
};
operator_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    operator_entity_ts_metadata("design:type", Number)
], OperatorEntity.prototype, "id", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], OperatorEntity.prototype, "createdAt", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.UpdateDateColumn)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], OperatorEntity.prototype, "updatedAt", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], OperatorEntity.prototype, "deletedAt", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", String)
], OperatorEntity.prototype, "firstName", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", String)
], OperatorEntity.prototype, "lastName", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        unique: true
    }),
    operator_entity_ts_metadata("design:type", String)
], OperatorEntity.prototype, "userName", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: 'admin'
    }),
    operator_entity_ts_metadata("design:type", String)
], OperatorEntity.prototype, "password", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)('bigint', {
        nullable: true,
        unique: true
    }),
    operator_entity_ts_metadata("design:type", String)
], OperatorEntity.prototype, "mobileNumber", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)('set', {
        enum: EnabledNotification,
        default: [
            EnabledNotification.SupportRequest,
            EnabledNotification.SOS,
            EnabledNotification.UserPendingVerification
        ]
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "enabledNotifications", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], OperatorEntity.prototype, "lastActivity", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    operator_entity_ts_metadata("design:type", Boolean)
], OperatorEntity.prototype, "isBlocked", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", String)
], OperatorEntity.prototype, "email", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", String)
], OperatorEntity.prototype, "address", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, function(media) {
        return media.operator;
    }),
    (0,external_typeorm_.JoinColumn)(),
    operator_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], OperatorEntity.prototype, "media", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", Number)
], OperatorEntity.prototype, "mediaId", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorRoleEntity;
    }, function(role) {
        return role.operators;
    }),
    operator_entity_ts_metadata("design:type", typeof OperatorRoleEntity === "undefined" ? Object : OperatorRoleEntity)
], OperatorEntity.prototype, "role", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    operator_entity_ts_metadata("design:type", Number)
], OperatorEntity.prototype, "roleId", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return FleetEntity;
    }, function(fleet) {
        return fleet.operators;
    }),
    operator_entity_ts_metadata("design:type", typeof FleetEntity === "undefined" ? Object : FleetEntity)
], OperatorEntity.prototype, "fleet", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(request) {
        return request.operator;
    }, {
        onDelete: 'RESTRICT',
        onUpdate: 'RESTRICT'
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "requests", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiSupportRequestActivityEntity;
    }, function(activity) {
        return activity.actor;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "complaintActivities", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderTransactionEntity;
    }, function(riderTransaction) {
        return riderTransaction.operator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "riderTransactions", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(driverTransaction) {
        return driverTransaction.operator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "driverTransactions", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FleetTransactionEntity;
    }, function(fleetTransaction) {
        return fleetTransaction.operator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "fleetTransactions", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ProviderTransactionEntity;
    }, function(providerTransaction) {
        return providerTransaction.operator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "providerTransactions", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SOSActivityEntity;
    }, function(sosActivity) {
        return sosActivity.operator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "sosActivities", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiPayoutSessionEntity;
    }, function(payoutSession) {
        return payoutSession.createdByOperator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "taxiPayoutSessionsCreated", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return GiftBatchEntity;
    }, function(gift) {
        return gift.createdByOperator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "giftBatchesCreated", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CustomerNoteEntity;
    }, function(note) {
        return note.createdBy;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "customerNotes", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return OperatorSessionEntity;
    }, function(session) {
        return session.operator;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "sessions", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return TaxiSupportRequestEntity;
    }, function(complaint) {
        return complaint.assignedToStaffs;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "assignedTaxiSupportRequests", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopSupportRequestEntity;
    }, function(complaint) {
        return complaint.assignedToStaffs;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "assignedShopSupportRequests", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopSupportRequestEntity;
    }, function(complaint) {
        return complaint.assignedToStaffs;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "assignedParkingSupportRequests", void 0);
operator_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ShopCustomerSupportRequestEntity;
    }, function(complaint) {
        return complaint.assignedToStaffs;
    }),
    operator_entity_ts_metadata("design:type", Array)
], OperatorEntity.prototype, "assignedShopCustomerSupportRequests", void 0);
OperatorEntity = operator_entity_ts_decorate([
    (0,external_typeorm_.Entity)('operator')
], OperatorEntity);

;// ../../libs/database/src/lib/entities/taxi/driver-transaction.entity.ts
function driver_transaction_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_transaction_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}















var DriverTransactionEntity = function DriverTransactionEntity() {
    "use strict";
};
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "id", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        name: 'transactionTime'
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverTransactionEntity.prototype, "createdAt", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionStatus,
        default: TransactionStatus.Processing
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof TransactionStatus === "undefined" ? Object : TransactionStatus)
], DriverTransactionEntity.prototype, "status", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TransactionAction
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof TransactionAction === "undefined" ? Object : TransactionAction)
], DriverTransactionEntity.prototype, "action", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DriverDeductTransactionType,
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof DriverDeductTransactionType === "undefined" ? Object : DriverDeductTransactionType)
], DriverTransactionEntity.prototype, "deductType", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DriverRechargeTransactionType,
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof DriverRechargeTransactionType === "undefined" ? Object : DriverRechargeTransactionType)
], DriverTransactionEntity.prototype, "rechargeType", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "amount", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: '3'
    }),
    driver_transaction_entity_ts_metadata("design:type", String)
], DriverTransactionEntity.prototype, "currency", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'documentNumber'
    }),
    driver_transaction_entity_ts_metadata("design:type", String)
], DriverTransactionEntity.prototype, "refrenceNumber", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'details'
    }),
    driver_transaction_entity_ts_metadata("design:type", String)
], DriverTransactionEntity.prototype, "description", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.transactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], DriverTransactionEntity.prototype, "driver", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "driverId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PaymentGatewayEntity;
    }, function(gateway) {
        return gateway.riderTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof PaymentGatewayEntity === "undefined" ? Object : PaymentGatewayEntity)
], DriverTransactionEntity.prototype, "paymentGateway", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "paymentGatewayId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, function(operator) {
        return operator.driverTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], DriverTransactionEntity.prototype, "operator", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "operatorId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.driverTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof TaxiOrderEntity === "undefined" ? Object : TaxiOrderEntity)
], DriverTransactionEntity.prototype, "request", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "requestId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return GiftCodeEntity;
    }, function(giftCard) {
        return giftCard.riderTransaction;
    }),
    (0,external_typeorm_.JoinColumn)(),
    driver_transaction_entity_ts_metadata("design:type", typeof GiftCodeEntity === "undefined" ? Object : GiftCodeEntity)
], DriverTransactionEntity.prototype, "giftCard", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "giftCardId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiPayoutSessionEntity;
    }, function(session) {
        return session.driverTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof TaxiPayoutSessionEntity === "undefined" ? Object : TaxiPayoutSessionEntity)
], DriverTransactionEntity.prototype, "payoutSession", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "payoutSessionId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutAccountEntity;
    }, function(payoutAccount) {
        return payoutAccount.driverTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof PayoutAccountEntity === "undefined" ? Object : PayoutAccountEntity)
], DriverTransactionEntity.prototype, "payoutAccount", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "payoutAccountId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return PayoutMethodEntity;
    }, function(payoutMethod) {
        return payoutMethod.driverTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof PayoutMethodEntity === "undefined" ? Object : PayoutMethodEntity)
], DriverTransactionEntity.prototype, "payoutMethod", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "payoutMethodId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiPayoutSessionPayoutMethodDetailEntity;
    }, function(payoutSessionMethod) {
        return payoutSessionMethod.driverTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", typeof TaxiPayoutSessionPayoutMethodDetailEntity === "undefined" ? Object : TaxiPayoutSessionPayoutMethodDetailEntity)
], DriverTransactionEntity.prototype, "payoutSessionMethod", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "payoutSessionMethodId", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }, function(order) {
        return order.driverTransactions;
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "shopOrder", void 0);
driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_transaction_entity_ts_metadata("design:type", Number)
], DriverTransactionEntity.prototype, "shopOrderId", void 0);
DriverTransactionEntity = driver_transaction_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_transaction')
], DriverTransactionEntity);

;// ../../libs/database/src/lib/entities/taxi/driver-wallet.entity.ts
function driver_wallet_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_wallet_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var DriverWalletEntity = function DriverWalletEntity() {
    "use strict";
};
driver_wallet_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_wallet_entity_ts_metadata("design:type", Number)
], DriverWalletEntity.prototype, "id", void 0);
driver_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0.0,
        name: 'amount'
    }),
    driver_wallet_entity_ts_metadata("design:type", Number)
], DriverWalletEntity.prototype, "balance", void 0);
driver_wallet_entity_ts_decorate([
    (0,external_typeorm_.Index)(),
    (0,external_typeorm_.Column)('char', {
        length: 3
    }),
    driver_wallet_entity_ts_metadata("design:type", String)
], DriverWalletEntity.prototype, "currency", void 0);
driver_wallet_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.wallet;
    }, {
        onDelete: 'CASCADE'
    }),
    driver_wallet_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], DriverWalletEntity.prototype, "driver", void 0);
driver_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_wallet_entity_ts_metadata("design:type", Number)
], DriverWalletEntity.prototype, "driverId", void 0);
DriverWalletEntity = driver_wallet_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_wallet')
], DriverWalletEntity);

;// ../../libs/database/src/lib/entities/enums/driver-status.enum.ts

var DriverStatus;
(function(DriverStatus) {
    DriverStatus["Online"] = "online";
    DriverStatus["Offline"] = "offline";
    DriverStatus["Blocked"] = "blocked";
    DriverStatus["InService"] = "in service";
    DriverStatus["WaitingDocuments"] = "waiting documents";
    DriverStatus["PendingApproval"] = "pending approval";
    DriverStatus["SoftReject"] = "soft reject";
    DriverStatus["HardReject"] = "hard reject";
    DriverStatus["Parked"] = "parked";
})(DriverStatus || (DriverStatus = {}));
(0,graphql_.registerEnumType)(DriverStatus, {
    name: 'DriverStatus'
});

;// ../../libs/database/src/lib/entities/taxi/driver-session.entity.ts
function driver_session_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_session_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var DriverSessionEntity = function DriverSessionEntity() {
    "use strict";
};
driver_session_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_session_entity_ts_metadata("design:type", Number)
], DriverSessionEntity.prototype, "id", void 0);
driver_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(function() {
        return SessionInfo;
    }),
    driver_session_entity_ts_metadata("design:type", typeof SessionInfo === "undefined" ? Object : SessionInfo)
], DriverSessionEntity.prototype, "sessionInfo", void 0);
driver_session_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.sessions;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    driver_session_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], DriverSessionEntity.prototype, "driver", void 0);
driver_session_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_session_entity_ts_metadata("design:type", Number)
], DriverSessionEntity.prototype, "driverId", void 0);
DriverSessionEntity = driver_session_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_session')
], DriverSessionEntity);

;// ../../libs/database/src/lib/entities/taxi/driver-document-retention-policy.entity.ts
function driver_document_retention_policy_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_document_retention_policy_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var DriverDocumentRetentionPolicyEntity = function DriverDocumentRetentionPolicyEntity() {
    "use strict";
};
driver_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_document_retention_policy_entity_ts_metadata("design:type", Number)
], DriverDocumentRetentionPolicyEntity.prototype, "id", void 0);
driver_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_document_retention_policy_entity_ts_metadata("design:type", Number)
], DriverDocumentRetentionPolicyEntity.prototype, "title", void 0);
driver_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    driver_document_retention_policy_entity_ts_metadata("design:type", Number)
], DriverDocumentRetentionPolicyEntity.prototype, "deleteAfterDays", void 0);
driver_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverDocumentEntity;
    }, function(driverDocument) {
        return driverDocument.retentionPolicies;
    }),
    driver_document_retention_policy_entity_ts_metadata("design:type", typeof DriverDocumentEntity === "undefined" ? Object : DriverDocumentEntity)
], DriverDocumentRetentionPolicyEntity.prototype, "driverDocument", void 0);
driver_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_document_retention_policy_entity_ts_metadata("design:type", Number)
], DriverDocumentRetentionPolicyEntity.prototype, "driverDocumentId", void 0);
DriverDocumentRetentionPolicyEntity = driver_document_retention_policy_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_document_retention_policy')
], DriverDocumentRetentionPolicyEntity);

;// ../../libs/database/src/lib/entities/taxi/driver-document.entity.ts
function driver_document_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_document_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var DriverDocumentEntity = function DriverDocumentEntity() {
    "use strict";
};
driver_document_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_document_entity_ts_metadata("design:type", Number)
], DriverDocumentEntity.prototype, "id", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_document_entity_ts_metadata("design:type", String)
], DriverDocumentEntity.prototype, "title", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_document_entity_ts_metadata("design:type", String)
], DriverDocumentEntity.prototype, "description", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_document_entity_ts_metadata("design:type", Boolean)
], DriverDocumentEntity.prototype, "isEnabled", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_document_entity_ts_metadata("design:type", Boolean)
], DriverDocumentEntity.prototype, "isRequired", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_document_entity_ts_metadata("design:type", Boolean)
], DriverDocumentEntity.prototype, "hasExpiryDate", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)('int'),
    driver_document_entity_ts_metadata("design:type", Number)
], DriverDocumentEntity.prototype, "notificationDaysBeforeExpiry", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)('int'),
    driver_document_entity_ts_metadata("design:type", Number)
], DriverDocumentEntity.prototype, "numberOfImages", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverDocumentRetentionPolicyEntity;
    }, function(retentionPolicy) {
        return retentionPolicy.driverDocument;
    }),
    driver_document_entity_ts_metadata("design:type", Array)
], DriverDocumentEntity.prototype, "retentionPolicies", void 0);
driver_document_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverToDriverDocumentEntity;
    }, function(driverToDriverDocument) {
        return driverToDriverDocument.driverDocument;
    }),
    driver_document_entity_ts_metadata("design:type", Array)
], DriverDocumentEntity.prototype, "driverToDriverDocuments", void 0);
DriverDocumentEntity = driver_document_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_document')
], DriverDocumentEntity);

;// ../../libs/database/src/lib/entities/taxi/driver-to-driver-document.entity.ts
function driver_to_driver_document_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_to_driver_document_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var DriverToDriverDocumentEntity = function DriverToDriverDocumentEntity() {
    "use strict";
};
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_to_driver_document_entity_ts_metadata("design:type", Number)
], DriverToDriverDocumentEntity.prototype, "id", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverDocumentEntity;
    }, function(driverDocument) {
        return driverDocument.driverToDriverDocuments;
    }, {
        onDelete: 'CASCADE'
    }),
    driver_to_driver_document_entity_ts_metadata("design:type", typeof DriverDocumentEntity === "undefined" ? Object : DriverDocumentEntity)
], DriverToDriverDocumentEntity.prototype, "driverDocument", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_to_driver_document_entity_ts_metadata("design:type", Number)
], DriverToDriverDocumentEntity.prototype, "driverDocumentId", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.driverToDriverDocuments;
    }, {
        onDelete: 'CASCADE'
    }),
    driver_to_driver_document_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], DriverToDriverDocumentEntity.prototype, "driver", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_to_driver_document_entity_ts_metadata("design:type", Number)
], DriverToDriverDocumentEntity.prototype, "driverId", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return MediaEntity;
    }, {
        onDelete: 'CASCADE'
    }),
    driver_to_driver_document_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], DriverToDriverDocumentEntity.prototype, "media", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_to_driver_document_entity_ts_metadata("design:type", Number)
], DriverToDriverDocumentEntity.prototype, "mediaId", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverDocumentRetentionPolicyEntity;
    }, {
        onDelete: 'CASCADE'
    }),
    driver_to_driver_document_entity_ts_metadata("design:type", typeof DriverDocumentRetentionPolicyEntity === "undefined" ? Object : DriverDocumentRetentionPolicyEntity)
], DriverToDriverDocumentEntity.prototype, "retentionPolicy", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_to_driver_document_entity_ts_metadata("design:type", Number)
], DriverToDriverDocumentEntity.prototype, "retentionPolicyId", void 0);
driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_to_driver_document_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverToDriverDocumentEntity.prototype, "expiresAt", void 0);
DriverToDriverDocumentEntity = driver_to_driver_document_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_to_driver_document')
], DriverToDriverDocumentEntity);

;// ../../libs/database/src/lib/entities/taxi/driver-note.entity.ts
function driver_note_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_note_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var DriverNoteEntity = function DriverNoteEntity() {
    "use strict";
};
driver_note_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_note_entity_ts_metadata("design:type", Number)
], DriverNoteEntity.prototype, "id", void 0);
driver_note_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    driver_note_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverNoteEntity.prototype, "createdAt", void 0);
driver_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.notes;
    }),
    driver_note_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], DriverNoteEntity.prototype, "driver", void 0);
driver_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_note_entity_ts_metadata("design:type", Number)
], DriverNoteEntity.prototype, "driverId", void 0);
driver_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_note_entity_ts_metadata("design:type", String)
], DriverNoteEntity.prototype, "note", void 0);
driver_note_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }),
    driver_note_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], DriverNoteEntity.prototype, "staff", void 0);
driver_note_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    driver_note_entity_ts_metadata("design:type", Number)
], DriverNoteEntity.prototype, "staffId", void 0);
DriverNoteEntity = driver_note_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_note')
], DriverNoteEntity);

;// ../../libs/database/src/lib/entities/taxi/driver.entity.ts
function driver_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}























var DriverEntity = function DriverEntity() {
    "use strict";
};
driver_entity_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Int;
    }),
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "id", void 0);
driver_entity_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "firstName", void 0);
driver_entity_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "lastName", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        type: 'varchar',
        length: 5
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "countryIso", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: true
    }),
    driver_entity_ts_metadata("design:type", Boolean)
], DriverEntity.prototype, "canDeliver", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DeliveryPackageSize,
        default: DeliveryPackageSize.Medium
    }),
    driver_entity_ts_metadata("design:type", typeof DeliveryPackageSize === "undefined" ? Object : DeliveryPackageSize)
], DriverEntity.prototype, "maxDeliveryPackageSize", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('bigint', {
        unique: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "mobileNumber", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "certificateNumber", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "email", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "password", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CarModelEntity;
    }, function(car) {
        return car.drivers;
    }, {
        onDelete: 'SET NULL'
    }),
    driver_entity_ts_metadata("design:type", typeof CarModelEntity === "undefined" ? Object : CarModelEntity)
], DriverEntity.prototype, "car", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "carId", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('varchar', {
        nullable: true,
        name: 'carColor'
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "carColorLegacy", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return SavedPaymentMethodEntity;
    }),
    (0,external_typeorm_.JoinColumn)(),
    driver_entity_ts_metadata("design:type", typeof SavedPaymentMethodEntity === "undefined" ? Object : SavedPaymentMethodEntity)
], DriverEntity.prototype, "defaultSavedPaymentMethod", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "defaultSavedPaymentMethodId", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CarColorEntity;
    }, function(carColor) {
        return carColor.drivers;
    }),
    driver_entity_ts_metadata("design:type", typeof CarColorEntity === "undefined" ? Object : CarColorEntity)
], DriverEntity.prototype, "carColor", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "carColorId", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "carProductionYear", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "carPlate", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "searchDistance", void 0);
driver_entity_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }),
    (0,external_typeorm_.Column)('enum', {
        default: DriverStatus.PendingApproval,
        enum: DriverStatus
    }),
    driver_entity_ts_metadata("design:type", typeof DriverStatus === "undefined" ? Object : DriverStatus)
], DriverEntity.prototype, "status", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        nullable: true,
        enum: Gender
    }),
    driver_entity_ts_metadata("design:type", typeof Gender === "undefined" ? Object : Gender)
], DriverEntity.prototype, "gender", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverEntity.prototype, "registrationTimestamp", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('tinyint', {
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "rating", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('smallint', {
        default: 0
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "reviewCount", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverEntity.prototype, "lastSeenTimestamp", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.favoriteDrivers;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "ridersFavorited", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return CustomerEntity;
    }, function(rider) {
        return rider.blockedDrivers;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "ridersBlocked", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return MediaEntity;
    }, function(media) {
        return media.uploadedByDriver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "uploads", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverServicesServiceEntity;
    }, function(service) {
        return service.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "enabledServices", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return MediaEntity;
    }, function(media) {
        return media.driverDocument;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "documents", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "accountNumber", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "bankName", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "bankRoutingNumber", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "bankSwift", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "address", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "notificationPlayerId", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true,
        name: 'documentsNote'
    }),
    driver_entity_ts_metadata("design:type", String)
], DriverEntity.prototype, "softRejectionNote", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    driver_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], DriverEntity.prototype, "deletedAt", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToOne)(function() {
        return MediaEntity;
    }, function(media) {
        return media.driver;
    }),
    (0,external_typeorm_.JoinColumn)(),
    driver_entity_ts_metadata("design:type", typeof MediaEntity === "undefined" ? Object : MediaEntity)
], DriverEntity.prototype, "media", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "mediaId", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "presetAvatarNumber", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return PayoutAccountEntity;
    }, function(payoutAccount) {
        return payoutAccount.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "payoutAccounts", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FeedbackEntity;
    }, function(feedback) {
        return feedback.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "feedbacks", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return FleetEntity;
    }, function(fleet) {
        return fleet.drivers;
    }),
    driver_entity_ts_metadata("design:type", typeof FleetEntity === "undefined" ? Object : FleetEntity)
], DriverEntity.prototype, "fleet", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    driver_entity_ts_metadata("design:type", Number)
], DriverEntity.prototype, "fleetId", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverWalletEntity;
    }, function(wallet) {
        return wallet.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "wallet", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverTransactionEntity;
    }, function(driverTransaction) {
        return driverTransaction.driver;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'RESTRICT'
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "transactions", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return TaxiOrderEntity;
    }, function(order) {
        return order.driver;
    }, {
        onDelete: 'SET NULL',
        onUpdate: 'CASCADE'
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "orders", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return FleetTransactionEntity;
    }, function(fleetTransaction) {
        return fleetTransaction.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "fleetTransactions", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return ParkOrderEntity;
    }, function(parkOrder) {
        return parkOrder.spotOwner;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "parkOrders", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SavedPaymentMethodEntity;
    }, function(savedPaymentMethod) {
        return savedPaymentMethod.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "savedPaymentMethods", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return RiderReviewEntity;
    }, function(review) {
        return review.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "reviewsByDriver", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverSessionEntity;
    }, function(session) {
        return session.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "sessions", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverToDriverDocumentEntity;
    }, function(driverToDriverDocument) {
        return driverToDriverDocument.driverDocument;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "driverToDriverDocuments", void 0);
driver_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverNoteEntity;
    }, function(note) {
        return note.driver;
    }),
    driver_entity_ts_metadata("design:type", Array)
], DriverEntity.prototype, "notes", void 0);
DriverEntity = driver_entity_ts_decorate([
    (0,graphql_.ObjectType)(),
    (0,external_typeorm_.Entity)('driver')
], DriverEntity);

;// ../../libs/database/src/lib/entities/taxi/car-color.entity.ts
function car_color_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function car_color_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var CarColorEntity = function CarColorEntity() {
    "use strict";
};
car_color_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    car_color_entity_ts_metadata("design:type", Number)
], CarColorEntity.prototype, "id", void 0);
car_color_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    car_color_entity_ts_metadata("design:type", String)
], CarColorEntity.prototype, "name", void 0);
car_color_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return DriverEntity;
    }, function(driver) {
        return driver.carColor;
    }),
    car_color_entity_ts_metadata("design:type", Array)
], CarColorEntity.prototype, "drivers", void 0);
CarColorEntity = car_color_entity_ts_decorate([
    (0,external_typeorm_.Entity)('car_color')
], CarColorEntity);

;// ../../libs/database/src/lib/entities/provider-wallet.entity.ts
function provider_wallet_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function provider_wallet_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var ProviderWalletEntity = function ProviderWalletEntity() {
    "use strict";
};
provider_wallet_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    provider_wallet_entity_ts_metadata("design:type", Number)
], ProviderWalletEntity.prototype, "id", void 0);
provider_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: 0.0,
        name: 'amount'
    }),
    provider_wallet_entity_ts_metadata("design:type", Number)
], ProviderWalletEntity.prototype, "balance", void 0);
provider_wallet_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    provider_wallet_entity_ts_metadata("design:type", String)
], ProviderWalletEntity.prototype, "currency", void 0);
ProviderWalletEntity = provider_wallet_entity_ts_decorate([
    (0,external_typeorm_.Entity)('admin_wallet')
], ProviderWalletEntity);

;// external "typeorm/decorator/entity/Entity"
const Entity_namespaceObject = require("typeorm/decorator/entity/Entity");
;// ../../libs/database/src/lib/entities/enums/payment-status.enum.ts
var PaymentStatus;
(function(PaymentStatus) {
    PaymentStatus["Processing"] = "processing";
    PaymentStatus["Authorized"] = "authorized";
    PaymentStatus["Success"] = "success";
    PaymentStatus["Canceled"] = "canceled";
    PaymentStatus["Failed"] = "failed";
})(PaymentStatus || (PaymentStatus = {}));

;// ../../libs/database/src/lib/entities/payment.entity.ts
function payment_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function payment_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var PaymentEntity = function PaymentEntity() {
    "use strict";
};
payment_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    payment_entity_ts_metadata("design:type", Number)
], PaymentEntity.prototype, "id", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: PaymentStatus,
        default: PaymentStatus.Processing
    }),
    payment_entity_ts_metadata("design:type", typeof PaymentStatus === "undefined" ? Object : PaymentStatus)
], PaymentEntity.prototype, "status", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    payment_entity_ts_metadata("design:type", Number)
], PaymentEntity.prototype, "amount", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payment_entity_ts_metadata("design:type", String)
], PaymentEntity.prototype, "currency", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payment_entity_ts_metadata("design:type", String)
], PaymentEntity.prototype, "transactionNumber", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)('text', {
        nullable: true
    }),
    payment_entity_ts_metadata("design:type", String)
], PaymentEntity.prototype, "externalReferenceNumber", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    (0,external_typeorm_.Index)('INDEX_ORDER_NUMBER'),
    payment_entity_ts_metadata("design:type", String)
], PaymentEntity.prototype, "orderNumber", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payment_entity_ts_metadata("design:type", String)
], PaymentEntity.prototype, "userType", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payment_entity_ts_metadata("design:type", String)
], PaymentEntity.prototype, "userId", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    payment_entity_ts_metadata("design:type", Number)
], PaymentEntity.prototype, "gatewayId", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    payment_entity_ts_metadata("design:type", Number)
], PaymentEntity.prototype, "savedPaymentMethodId", void 0);
payment_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    payment_entity_ts_metadata("design:type", String)
], PaymentEntity.prototype, "returnUrl", void 0);
PaymentEntity = payment_entity_ts_decorate([
    (0,Entity_namespaceObject.Entity)('payment')
], PaymentEntity);

;// ../../libs/database/src/lib/entities/enums/sms-status.enum.ts

var SMSStatus;
(function(SMSStatus) {
    SMSStatus["PENDING"] = "PENDING";
    SMSStatus["SENT"] = "SENT";
    SMSStatus["FAILED"] = "FAILED";
    SMSStatus["DELIVERED"] = "DELIVERED";
    SMSStatus["UNDELIVERED"] = "UNDELIVERED";
    SMSStatus["REJECTED"] = "REJECTED";
    SMSStatus["EXPIRED"] = "EXPIRED";
})(SMSStatus || (SMSStatus = {}));
(0,graphql_.registerEnumType)(SMSStatus, {
    name: 'SMSStatus'
});

;// ../../libs/database/src/lib/entities/enums/sms-type.enum.ts

var SMSType;
(function(SMSType) {
    SMSType["OTP"] = "OTP";
    SMSType["NOTIFICATION"] = "NOTIFICATION";
    SMSType["PROMOTIONAL"] = "PROMOTIONAL";
    SMSType["TRANSACTIONAL"] = "TRANSACTIONAL";
})(SMSType || (SMSType = {}));
(0,graphql_.registerEnumType)(SMSType, {
    name: 'SMSType'
});

;// ../../libs/database/src/lib/entities/enums/sms-provider-type.enum.ts

var SMSProviderType;
(function(SMSProviderType) {
    SMSProviderType["Firebase"] = "Firebase";
    SMSProviderType["Twilio"] = "Twilio";
    SMSProviderType["Plivo"] = "Plivo";
    SMSProviderType["Pahappa"] = "Pahappa";
    SMSProviderType["BroadNet"] = "BroadNet";
    SMSProviderType["Vonage"] = "Vonage";
    SMSProviderType["ClickSend"] = "ClickSend";
    SMSProviderType["Infobip"] = "Infobip";
    SMSProviderType["MessageBird"] = "MessageBird";
    SMSProviderType["VentisSMS"] = "VentisSMS";
    SMSProviderType["SMSC"] = "SMSC";
})(SMSProviderType || (SMSProviderType = {}));
(0,graphql_.registerEnumType)(SMSProviderType, {
    name: 'SMSProviderType',
    description: 'The type of the SMS provider'
});

;// ../../libs/database/src/lib/entities/sms-provider.entity.ts
function sms_provider_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function sms_provider_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var SMSProviderEntity = function SMSProviderEntity() {
    "use strict";
};
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    sms_provider_entity_ts_metadata("design:type", Number)
], SMSProviderEntity.prototype, "id", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'enum',
        enum: SMSProviderType
    }),
    sms_provider_entity_ts_metadata("design:type", typeof SMSProviderType === "undefined" ? Object : SMSProviderType)
], SMSProviderEntity.prototype, "type", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        default: false
    }),
    sms_provider_entity_ts_metadata("design:type", Boolean)
], SMSProviderEntity.prototype, "isDefault", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sms_provider_entity_ts_metadata("design:type", String)
], SMSProviderEntity.prototype, "name", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    sms_provider_entity_ts_metadata("design:type", String)
], SMSProviderEntity.prototype, "accountId", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    sms_provider_entity_ts_metadata("design:type", String)
], SMSProviderEntity.prototype, "authToken", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    sms_provider_entity_ts_metadata("design:type", String)
], SMSProviderEntity.prototype, "fromNumber", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)('text', {
        nullable: true
    }),
    sms_provider_entity_ts_metadata("design:type", String)
], SMSProviderEntity.prototype, "verificationTemplate", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    sms_provider_entity_ts_metadata("design:type", String)
], SMSProviderEntity.prototype, "smsType", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    sms_provider_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], SMSProviderEntity.prototype, "createdAt", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    sms_provider_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], SMSProviderEntity.prototype, "deletedAt", void 0);
sms_provider_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return SMSEntity;
    }, function(message) {
        return message.provider;
    }),
    sms_provider_entity_ts_metadata("design:type", Array)
], SMSProviderEntity.prototype, "messages", void 0);
SMSProviderEntity = sms_provider_entity_ts_decorate([
    (0,external_typeorm_.Entity)('sms_provider')
], SMSProviderEntity);

;// ../../libs/database/src/lib/entities/sms.entity.ts
function sms_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function sms_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var SMSEntity = function SMSEntity() {
    "use strict";
};
sms_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    sms_entity_ts_metadata("design:type", Number)
], SMSEntity.prototype, "id", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sms_entity_ts_metadata("design:type", String)
], SMSEntity.prototype, "countryIsoCode", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sms_entity_ts_metadata("design:type", String)
], SMSEntity.prototype, "to", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sms_entity_ts_metadata("design:type", String)
], SMSEntity.prototype, "from", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sms_entity_ts_metadata("design:type", String)
], SMSEntity.prototype, "message", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: SMSStatus,
        default: SMSStatus.PENDING
    }),
    sms_entity_ts_metadata("design:type", typeof SMSStatus === "undefined" ? Object : SMSStatus)
], SMSEntity.prototype, "status", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: SMSType
    }),
    sms_entity_ts_metadata("design:type", typeof SMSType === "undefined" ? Object : SMSType)
], SMSEntity.prototype, "type", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return SMSProviderEntity;
    }, function(provider) {
        return provider.messages;
    }),
    sms_entity_ts_metadata("design:type", typeof SMSProviderEntity === "undefined" ? Object : SMSProviderEntity)
], SMSEntity.prototype, "provider", void 0);
sms_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    sms_entity_ts_metadata("design:type", Number)
], SMSEntity.prototype, "providerId", void 0);
SMSEntity = sms_entity_ts_decorate([
    (0,external_typeorm_.Entity)('sms')
], SMSEntity);

;// ../../libs/database/src/lib/entities/shop/cart-product.entity.ts
function cart_product_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function cart_product_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var CartProductEntity = function CartProductEntity() {
    "use strict";
};
cart_product_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    cart_product_entity_ts_metadata("design:type", Number)
], CartProductEntity.prototype, "id", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CartEntity;
    }, function(cart) {
        return cart.products;
    }),
    cart_product_entity_ts_metadata("design:type", typeof CartEntity === "undefined" ? Object : CartEntity)
], CartProductEntity.prototype, "cart", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    cart_product_entity_ts_metadata("design:type", Number)
], CartProductEntity.prototype, "cartId", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ProductEntity;
    }),
    cart_product_entity_ts_metadata("design:type", typeof ProductEntity === "undefined" ? Object : ProductEntity)
], CartProductEntity.prototype, "product", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    cart_product_entity_ts_metadata("design:type", Number)
], CartProductEntity.prototype, "productId", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        type: 'int',
        default: 1
    }),
    cart_product_entity_ts_metadata("design:type", Number)
], CartProductEntity.prototype, "quantity", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ProductVariantEntity;
    }),
    cart_product_entity_ts_metadata("design:type", typeof ProductVariantEntity === "undefined" ? Object : ProductVariantEntity)
], CartProductEntity.prototype, "productVariant", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    cart_product_entity_ts_metadata("design:type", Number)
], CartProductEntity.prototype, "productVariantId", void 0);
cart_product_entity_ts_decorate([
    (0,external_typeorm_.ManyToMany)(function() {
        return ProductOptionEntity;
    }),
    (0,external_typeorm_.JoinTable)(),
    cart_product_entity_ts_metadata("design:type", Array)
], CartProductEntity.prototype, "productOptions", void 0);
CartProductEntity = cart_product_entity_ts_decorate([
    (0,external_typeorm_.Entity)('cart_product')
], CartProductEntity);

;// ../../libs/database/src/lib/entities/shop/cart-group.entity.ts
function cart_group_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function cart_group_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}





var CartGroupEntity = function CartGroupEntity() {
    "use strict";
};
cart_group_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "id", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    cart_group_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CartGroupEntity.prototype, "createdAt", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }),
    cart_group_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], CartGroupEntity.prototype, "customer", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "customerId", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return RiderAddressEntity;
    }),
    cart_group_entity_ts_metadata("design:type", typeof RiderAddressEntity === "undefined" ? Object : RiderAddressEntity)
], CartGroupEntity.prototype, "deliveryAddress", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "deliveryAddressId", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: DeliveryMethod
    }),
    cart_group_entity_ts_metadata("design:type", typeof DeliveryMethod === "undefined" ? Object : DeliveryMethod)
], CartGroupEntity.prototype, "deliveryMethod", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "bathDeliveryMethodDeliveryFee", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "splitDeliveryMethodDeliveryFee", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "batchDeliveryDuration", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "subtotal", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        nullable: true,
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "deliveryFee", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "tax", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "discount", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "serviceFee", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        precision: 10,
        scale: 2
    }),
    cart_group_entity_ts_metadata("design:type", Number)
], CartGroupEntity.prototype, "total", void 0);
cart_group_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CartEntity;
    }, function(cart) {
        return cart.cartGroup;
    }),
    cart_group_entity_ts_metadata("design:type", Array)
], CartGroupEntity.prototype, "carts", void 0);
CartGroupEntity = cart_group_entity_ts_decorate([
    (0,external_typeorm_.Entity)('cart_group')
], CartGroupEntity);

;// ../../libs/database/src/lib/entities/shop/cart.entity.ts
function cart_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function cart_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var CartEntity = function CartEntity() {
    "use strict";
};
cart_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    cart_entity_ts_metadata("design:type", Number)
], CartEntity.prototype, "id", void 0);
cart_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    cart_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], CartEntity.prototype, "createdAt", void 0);
cart_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, function(shop) {
        return shop.carts;
    }),
    cart_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], CartEntity.prototype, "shop", void 0);
cart_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    cart_entity_ts_metadata("design:type", Number)
], CartEntity.prototype, "shopId", void 0);
cart_entity_ts_decorate([
    (0,external_typeorm_.OneToMany)(function() {
        return CartProductEntity;
    }, function(cartProduct) {
        return cartProduct.cart;
    }),
    cart_entity_ts_metadata("design:type", Array)
], CartEntity.prototype, "products", void 0);
cart_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CartGroupEntity;
    }, function(cartGroup) {
        return cartGroup.carts;
    }),
    cart_entity_ts_metadata("design:type", typeof CartGroupEntity === "undefined" ? Object : CartGroupEntity)
], CartEntity.prototype, "cartGroup", void 0);
cart_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    cart_entity_ts_metadata("design:type", Number)
], CartEntity.prototype, "cartGroupId", void 0);
CartEntity = cart_entity_ts_decorate([
    (0,external_typeorm_.Entity)('cart')
], CartEntity);

;// external "@nestjs/config"
const config_namespaceObject = require("@nestjs/config");
;// ../../libs/database/src/lib/entities/enums/admin-notification-type.enum.ts

var AdminNotificationType;
(function(AdminNotificationType) {
    AdminNotificationType["UserPendingVerification"] = "user_pending_verification";
    AdminNotificationType["SupportRequestSubmitted"] = "support_request_submitted";
    AdminNotificationType["SupportRequestAssigned"] = "support_request_assigned";
    AdminNotificationType["ReviewPendingApproval"] = "review_pending_approval";
})(AdminNotificationType || (AdminNotificationType = {}));
(0,graphql_.registerEnumType)(AdminNotificationType, {
    name: 'AdminNotificationType',
    description: 'The type of admin notification.'
});

;// ../../libs/database/src/lib/entities/admin-notification.entity.ts
function admin_notification_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function admin_notification_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}












var AdminNotificationEntity = function AdminNotificationEntity() {
    "use strict";
};
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "id", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: AdminNotificationType
    }),
    admin_notification_entity_ts_metadata("design:type", typeof AdminNotificationType === "undefined" ? Object : AdminNotificationType)
], AdminNotificationEntity.prototype, "type", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return OperatorEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof OperatorEntity === "undefined" ? Object : OperatorEntity)
], AdminNotificationEntity.prototype, "operator", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "operatorId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: AppType
    }),
    admin_notification_entity_ts_metadata("design:type", typeof AppType === "undefined" ? Object : AppType)
], AdminNotificationEntity.prototype, "appType", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], AdminNotificationEntity.prototype, "readAt", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.CreateDateColumn)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], AdminNotificationEntity.prototype, "createdAt", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return TaxiSupportRequestEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof TaxiSupportRequestEntity === "undefined" ? Object : TaxiSupportRequestEntity)
], AdminNotificationEntity.prototype, "taxiSupportRequest", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "taxiSupportRequestId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopSupportRequestEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof ShopSupportRequestEntity === "undefined" ? Object : ShopSupportRequestEntity)
], AdminNotificationEntity.prototype, "shopSupportRequest", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "shopSupportRequestId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkingSupportRequestEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof ParkingSupportRequestEntity === "undefined" ? Object : ParkingSupportRequestEntity)
], AdminNotificationEntity.prototype, "parkingSupportRequest", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "parkingSupportRequestId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return DriverEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof DriverEntity === "undefined" ? Object : DriverEntity)
], AdminNotificationEntity.prototype, "driverPendingVerification", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "driverPendingVerificationId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof ShopEntity === "undefined" ? Object : ShopEntity)
], AdminNotificationEntity.prototype, "shopPendingVerification", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "shopPendingVerificationId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkSpotEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof ParkSpotEntity === "undefined" ? Object : ParkSpotEntity)
], AdminNotificationEntity.prototype, "parkSpotPendingVerification", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "parkSpotPendingVerificationId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopFeedbackEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof ShopFeedbackEntity === "undefined" ? Object : ShopFeedbackEntity)
], AdminNotificationEntity.prototype, "shopReviewPendingApproval", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "shopReviewPendingApprovalId", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ParkingFeedbackEntity;
    }, {
        onDelete: 'CASCADE',
        onUpdate: 'NO ACTION'
    }),
    admin_notification_entity_ts_metadata("design:type", typeof ParkingFeedbackEntity === "undefined" ? Object : ParkingFeedbackEntity)
], AdminNotificationEntity.prototype, "parkingReviewPendingApproval", void 0);
admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    admin_notification_entity_ts_metadata("design:type", Number)
], AdminNotificationEntity.prototype, "parkingReviewPendingApprovalId", void 0);
AdminNotificationEntity = admin_notification_entity_ts_decorate([
    (0,external_typeorm_.Entity)('admin_notification')
], AdminNotificationEntity);

;// ../../libs/database/src/lib/entities/enums/chart-interval.enum.ts

var ChartInterval;
(function(ChartInterval) {
    ChartInterval["Daily"] = "Daily";
    ChartInterval["Monthly"] = "Monthly";
    ChartInterval["Quarterly"] = "Quarterly";
    ChartInterval["Yearly"] = "Yearly";
})(ChartInterval || (ChartInterval = {}));
(0,graphql_.registerEnumType)(ChartInterval, {
    name: 'ChartInterval'
});

;// ../../libs/database/src/lib/entities/enums/gateway-link-method.ts

var GatewayLinkMethod;
(function(GatewayLinkMethod) {
    GatewayLinkMethod["none"] = "none";
    GatewayLinkMethod["redirect"] = "redirect";
    GatewayLinkMethod["manual"] = "manual";
})(GatewayLinkMethod || (GatewayLinkMethod = {}));
(0,graphql_.registerEnumType)(GatewayLinkMethod, {
    name: 'GatewayLinkMethod',
    description: 'Method of connecting to a payout or saved payment method.'
});

;// ../../libs/database/src/lib/entities/enums/legacy-transaction-type.ts

var LegacyTransactionType;
(function(LegacyTransactionType) {
    LegacyTransactionType["Cash"] = "Cash";
    LegacyTransactionType["Bank"] = "Bank";
    LegacyTransactionType["Gift"] = "Gift";
    LegacyTransactionType["Commission"] = "Commission";
    LegacyTransactionType["Travel"] = "Travel";
    LegacyTransactionType["InApp"] = "InApp";
    LegacyTransactionType["TransferToBank"] = "TransferToBank";
})(LegacyTransactionType || (LegacyTransactionType = {}));
(0,graphql_.registerEnumType)(LegacyTransactionType, {
    name: 'LegacyTransactionType'
});

;// ../../libs/database/src/lib/entities/enums/reward-app-type.ts

var RewardAppType;
(function(RewardAppType) {
    RewardAppType["Driver"] = "Driver";
    RewardAppType["Rider"] = "Rider";
})(RewardAppType || (RewardAppType = {}));
(0,graphql_.registerEnumType)(RewardAppType, {
    name: 'RewardAppType'
});

;// ../../libs/database/src/lib/entities/enums/reward-beneficiary.ts

var RewardBeneficiary;
(function(RewardBeneficiary) {
    RewardBeneficiary["Self"] = "Self";
    RewardBeneficiary["Referrer"] = "Referrer";
})(RewardBeneficiary || (RewardBeneficiary = {}));
(0,graphql_.registerEnumType)(RewardBeneficiary, {
    name: 'RewardBeneficiary'
});

;// ../../libs/database/src/lib/entities/enums/reward-event.ts

var RewardEvent;
(function(RewardEvent) {
    RewardEvent["Register"] = "Register";
    RewardEvent["ServiceCompleted"] = "ServiceCompleted";
})(RewardEvent || (RewardEvent = {}));
(0,graphql_.registerEnumType)(RewardEvent, {
    name: 'RewardEvent'
});

;// ../../libs/database/src/lib/entities/enums/rider-document-type.ts

var RiderDocumentType;
(function(RiderDocumentType) {
    RiderDocumentType["ID"] = "ID";
    RiderDocumentType["Passport"] = "Passport";
    RiderDocumentType["DriverLicense"] = "DriverLicense";
    RiderDocumentType["ResidentPermitID"] = "ResidentPermitID";
})(RiderDocumentType || (RiderDocumentType = {}));
(0,graphql_.registerEnumType)(RiderDocumentType, {
    name: 'RiderDocumentType'
});

;// ../../libs/database/src/lib/entities/enums/time-frequency.enum.ts

var TimeFrequency;
(function(TimeFrequency) {
    TimeFrequency["Daily"] = "daily";
    TimeFrequency["Weekly"] = "weekly";
    TimeFrequency["Monthly"] = "monthly";
    TimeFrequency["Quarterly"] = "quarterly";
    TimeFrequency["Yearly"] = "yearly";
})(TimeFrequency || (TimeFrequency = {}));
(0,graphql_.registerEnumType)(TimeFrequency, {
    name: 'TimeFrequency'
});

;// ../../libs/database/src/lib/entities/enums/version-status.enum.ts

var VersionStatus;
(function(VersionStatus) {
    VersionStatus["Latest"] = "Latest";
    VersionStatus["MandatoryUpdate"] = "MandatoryUpdate";
    VersionStatus["OptionalUpdate"] = "OptionalUpdate";
})(VersionStatus || (VersionStatus = {}));
(0,graphql_.registerEnumType)(VersionStatus, {
    name: 'VersionStatus'
});

;// ../../libs/database/src/lib/entities/reward.entity.ts
function reward_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function reward_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var RewardEntity = function RewardEntity() {
    "use strict";
};
reward_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    reward_entity_ts_metadata("design:type", Number)
], RewardEntity.prototype, "id", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    reward_entity_ts_metadata("design:type", String)
], RewardEntity.prototype, "title", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    reward_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], RewardEntity.prototype, "startDate", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    reward_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], RewardEntity.prototype, "endDate", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RewardAppType
    }),
    reward_entity_ts_metadata("design:type", typeof RewardAppType === "undefined" ? Object : RewardAppType)
], RewardEntity.prototype, "appType", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RewardBeneficiary
    }),
    reward_entity_ts_metadata("design:type", typeof RewardBeneficiary === "undefined" ? Object : RewardBeneficiary)
], RewardEntity.prototype, "beneficiary", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: RewardEvent
    }),
    reward_entity_ts_metadata("design:type", typeof RewardEvent === "undefined" ? Object : RewardEvent)
], RewardEntity.prototype, "event", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('float', {
        default: '0.00',
        precision: 10,
        scale: 2
    }),
    reward_entity_ts_metadata("design:type", Number)
], RewardEntity.prototype, "creditGift", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.DeleteDateColumn)(),
    reward_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], RewardEntity.prototype, "deletedAt", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    reward_entity_ts_metadata("design:type", Number)
], RewardEntity.prototype, "tripFeePercentGift", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('char', {
        length: 3,
        nullable: true
    }),
    reward_entity_ts_metadata("design:type", String)
], RewardEntity.prototype, "creditCurrency", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        nullable: true
    }),
    reward_entity_ts_metadata("design:type", Number)
], RewardEntity.prototype, "conditionTripCountsLessThan", void 0);
reward_entity_ts_decorate([
    (0,external_typeorm_.Column)('simple-array', {
        nullable: true
    }),
    reward_entity_ts_metadata("design:type", Array)
], RewardEntity.prototype, "conditionUserNumberFirstDigits", void 0);
RewardEntity = reward_entity_ts_decorate([
    (0,external_typeorm_.Entity)('reward')
], RewardEntity);

;// ../../libs/database/src/lib/entities/shop/enums/shop-customer-notification-type.enum.ts

var ShopCustomerNotificationType;
(function(ShopCustomerNotificationType) {
    ShopCustomerNotificationType["OrderCancelled"] = "order_cancelled";
    ShopCustomerNotificationType["OrderShipped"] = "order_shipped";
    ShopCustomerNotificationType["RateYourOrder"] = "rate_your_order";
    ShopCustomerNotificationType["OrderDelays"] = "order_delays";
    ShopCustomerNotificationType["OrderRefund"] = "order_refund";
    ShopCustomerNotificationType["SupportRequestUpdate"] = "support_request_update";
    ShopCustomerNotificationType["Announcement"] = "announcement";
})(ShopCustomerNotificationType || (ShopCustomerNotificationType = {}));
(0,graphql_.registerEnumType)(ShopCustomerNotificationType, {
    name: 'ShopCustomerNotificationType',
    description: "The type of customer's shop notification"
});

;// ../../libs/database/src/lib/entities/shop/shop-customer-notification.entity.ts
function shop_customer_notification_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shop_customer_notification_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}






var ShopCustomerNotificationEntity = function ShopCustomerNotificationEntity() {
    "use strict";
};
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    shop_customer_notification_entity_ts_metadata("design:type", Number)
], ShopCustomerNotificationEntity.prototype, "id", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: ShopCustomerNotificationType
    }),
    shop_customer_notification_entity_ts_metadata("design:type", typeof ShopCustomerNotificationType === "undefined" ? Object : ShopCustomerNotificationType)
], ShopCustomerNotificationEntity.prototype, "type", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopCustomerNotificationEntity.prototype, "readAt", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_customer_notification_entity_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], ShopCustomerNotificationEntity.prototype, "createdAt", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_notification_entity_ts_metadata("design:type", String)
], ShopCustomerNotificationEntity.prototype, "title", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_notification_entity_ts_metadata("design:type", String)
], ShopCustomerNotificationEntity.prototype, "message", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return CustomerEntity;
    }),
    shop_customer_notification_entity_ts_metadata("design:type", typeof CustomerEntity === "undefined" ? Object : CustomerEntity)
], ShopCustomerNotificationEntity.prototype, "customer", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)(),
    shop_customer_notification_entity_ts_metadata("design:type", Number)
], ShopCustomerNotificationEntity.prototype, "customerId", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return AnnouncementEntity;
    }),
    shop_customer_notification_entity_ts_metadata("design:type", typeof AnnouncementEntity === "undefined" ? Object : AnnouncementEntity)
], ShopCustomerNotificationEntity.prototype, "announcement", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_notification_entity_ts_metadata("design:type", Number)
], ShopCustomerNotificationEntity.prototype, "announcementId", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_notification_entity_ts_metadata("design:type", Number)
], ShopCustomerNotificationEntity.prototype, "shopOrderId", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopOrderEntity;
    }),
    shop_customer_notification_entity_ts_metadata("design:type", typeof ShopOrderEntity === "undefined" ? Object : ShopOrderEntity)
], ShopCustomerNotificationEntity.prototype, "shopOrder", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Column)({
        nullable: true
    }),
    shop_customer_notification_entity_ts_metadata("design:type", Number)
], ShopCustomerNotificationEntity.prototype, "shopCustomerSupportRequestId", void 0);
shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.ManyToOne)(function() {
        return ShopCustomerSupportRequestEntity;
    }),
    shop_customer_notification_entity_ts_metadata("design:type", typeof ShopCustomerSupportRequestEntity === "undefined" ? Object : ShopCustomerSupportRequestEntity)
], ShopCustomerNotificationEntity.prototype, "shopCustomerSupportRequest", void 0);
ShopCustomerNotificationEntity = shop_customer_notification_entity_ts_decorate([
    (0,external_typeorm_.Entity)('shop_customer_notification')
], ShopCustomerNotificationEntity);

;// ../../libs/database/src/lib/entities/taxi/driver-shift-rule.entity.ts
function driver_shift_rule_entity_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_shift_rule_entity_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var DriverShiftRuleEntity = function DriverShiftRuleEntity() {
    "use strict";
};
driver_shift_rule_entity_ts_decorate([
    (0,external_typeorm_.PrimaryGeneratedColumn)(),
    driver_shift_rule_entity_ts_metadata("design:type", Number)
], DriverShiftRuleEntity.prototype, "id", void 0);
driver_shift_rule_entity_ts_decorate([
    (0,external_typeorm_.Column)('enum', {
        enum: TimeFrequency
    }),
    driver_shift_rule_entity_ts_metadata("design:type", typeof TimeFrequency === "undefined" ? Object : TimeFrequency)
], DriverShiftRuleEntity.prototype, "timeFrequency", void 0);
driver_shift_rule_entity_ts_decorate([
    (0,external_typeorm_.Column)('int'),
    driver_shift_rule_entity_ts_metadata("design:type", Number)
], DriverShiftRuleEntity.prototype, "maxHoursPerFrequency", void 0);
driver_shift_rule_entity_ts_decorate([
    (0,external_typeorm_.Column)('int', {
        default: 0
    }),
    driver_shift_rule_entity_ts_metadata("design:type", Number)
], DriverShiftRuleEntity.prototype, "mandatoryBreakMinutes", void 0);
DriverShiftRuleEntity = driver_shift_rule_entity_ts_decorate([
    (0,external_typeorm_.Entity)('driver_shift_rule')
], DriverShiftRuleEntity);

;// ../../libs/database/src/lib/entities/index.ts























































//export * from './enums/service-type.enum';



























































































































































;// ../../libs/database/src/lib/database.module.ts
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function _async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function database_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function _ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function database_module_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

























































































































var DatabaseModule = /*#__PURE__*/ function() {
    "use strict";
    function DatabaseModule(dataSource) {
        this.dataSource = dataSource;
        this.logger = new common_.Logger(DatabaseModule.name);
    }
    var _proto = DatabaseModule.prototype;
    _proto.onModuleInit = function onModuleInit() {
        var _this = this;
        return _async_to_generator(function() {
            var migrations;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        _this.logger.log('Running database migrations...');
                        return [
                            4,
                            _this.dataSource.runMigrations()
                        ];
                    case 1:
                        migrations = _state.sent();
                        _this.logger.log("Completed " + migrations.length + " migrations");
                        return [
                            2
                        ];
                }
            });
        })();
    };
    DatabaseModule.ensureDatabaseExists = function ensureDatabaseExists(configService) {
        return _async_to_generator(function() {
            var dbName, tempConnection, error;
            return _ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        dbName = configService.get('MYSQL_DB', 'ridy');
                        tempConnection = new external_typeorm_.DataSource({
                            type: 'mysql',
                            host: configService.get('MYSQL_HOST', 'localhost'),
                            port: 3306,
                            username: configService.get('MYSQL_USER', 'root'),
                            password: configService.get('MYSQL_PASS', 'defaultpassword')
                        });
                        _state.label = 1;
                    case 1:
                        _state.trys.push([
                            1,
                            4,
                            5,
                            8
                        ]);
                        return [
                            4,
                            tempConnection.initialize()
                        ];
                    case 2:
                        _state.sent();
                        return [
                            4,
                            tempConnection.query("CREATE DATABASE IF NOT EXISTS `" + dbName + "`")
                        ];
                    case 3:
                        _state.sent();
                        common_.Logger.log("Database '" + dbName + "' ensured to exist");
                        return [
                            3,
                            8
                        ];
                    case 4:
                        error = _state.sent();
                        common_.Logger.error('Failed to create database:', error);
                        throw error;
                    case 5:
                        if (!tempConnection.isInitialized) return [
                            3,
                            7
                        ];
                        return [
                            4,
                            tempConnection.destroy()
                        ];
                    case 6:
                        _state.sent();
                        _state.label = 7;
                    case 7:
                        return [
                            7
                        ];
                    case 8:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return DatabaseModule;
}();
DatabaseModule = database_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            config_namespaceObject.ConfigModule,
            typeorm_.TypeOrmModule.forRootAsync({
                imports: [
                    config_namespaceObject.ConfigModule
                ],
                useFactory: /*#__PURE__*/ _async_to_generator(function(configService) {
                    var logger, dataSource, currentTables, config;
                    return _ts_generator(this, function(_state) {
                        switch(_state.label){
                            case 0:
                                logger = new common_.Logger(DatabaseModule.name);
                                logger.log('Initializing database connection...');
                                // Ensure database exists
                                return [
                                    4,
                                    DatabaseModule.ensureDatabaseExists(configService)
                                ];
                            case 1:
                                _state.sent();
                                // Get current tables count
                                dataSource = new external_typeorm_.DataSource({
                                    type: 'mysql',
                                    host: configService.get('MYSQL_HOST', 'localhost'),
                                    port: 3306,
                                    username: configService.get('MYSQL_USER', 'root'),
                                    password: configService.get('MYSQL_PASS', 'defaultpassword'),
                                    database: configService.get('MYSQL_DB', 'ridy')
                                });
                                if (!!dataSource.isInitialized) return [
                                    3,
                                    3
                                ];
                                return [
                                    4,
                                    dataSource.initialize()
                                ];
                            case 2:
                                _state.sent();
                                _state.label = 3;
                            case 3:
                                return [
                                    4,
                                    dataSource.query("SELECT COUNT(*) as count FROM information_schema.tables WHERE table_schema = ?", [
                                        configService.get('MYSQL_DB', 'ridy')
                                    ])
                                ];
                            case 4:
                                currentTables = _state.sent();
                                logger.log("Current tables count: " + currentTables[0].count);
                                return [
                                    4,
                                    dataSource.destroy()
                                ];
                            case 5:
                                _state.sent();
                                config = {
                                    type: 'mysql',
                                    host: configService.get('MYSQL_HOST', 'localhost'),
                                    port: 3306,
                                    username: configService.get('MYSQL_USER', 'root'),
                                    password: configService.get('MYSQL_PASS', 'defaultpassword'),
                                    database: configService.get('MYSQL_DB', 'ridy'),
                                    entities: entities,
                                    legacySpatialSupport: false,
                                    migrations: [
                                        "" + __dirname + "/migrations/*.js"
                                    ],
                                    migrationsRun: true,
                                    synchronize: configService.get('NODE_ENV') === 'dev' || configService.get('FORCE_SYNC_DB', false) || currentTables[0].count < 10,
                                    // logging: configService.get('NODE_ENV') === 'dev',
                                    logging: true,
                                    timezone: '+06:00'
                                };
                                logger.log('Database connection configured');
                                return [
                                    2,
                                    config
                                ];
                        }
                    });
                }),
                inject: [
                    config_namespaceObject.ConfigService
                ]
            })
        ]
    }),
    database_module_ts_metadata("design:type", Function),
    database_module_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.DataSource === "undefined" ? Object : external_typeorm_.DataSource
    ])
], DatabaseModule);
var entities = [
    MediaEntity,
    OperatorEntity,
    OperatorRoleEntity,
    OperatorSessionEntity,
    DriverEntity,
    DriverSessionEntity,
    ProviderTransactionEntity,
    ProviderWalletEntity,
    TaxiSupportRequestActivityEntity,
    TaxiSupportRequestEntity,
    CarModelEntity,
    CarColorEntity,
    DriverTransactionEntity,
    DriverWalletEntity,
    FeedbackParameterEntity,
    FeedbackEntity,
    FleetEntity,
    FleetWalletEntity,
    FleetTransactionEntity,
    FleetStaffEntity,
    FleetStaffSessionEntity,
    TaxiOrderEntity,
    OrderMessageEntity,
    OrderCancelReasonEntity,
    PaymentGatewayEntity,
    PaymentEntity,
    ServiceEntity,
    ServiceCategoryEntity,
    CouponEntity,
    RegionEntity,
    RegionCategoryEntity,
    CustomerEntity,
    RiderWalletEntity,
    RiderTransactionEntity,
    RiderAddressEntity,
    ServiceOptionEntity,
    GiftBatchEntity,
    GiftCodeEntity,
    SOSEntity,
    SOSActivityEntity,
    AnnouncementEntity,
    ZonePriceEntity,
    GatewayToUserEntity,
    SavedPaymentMethodEntity,
    RiderReviewEntity,
    PayoutMethodEntity,
    PayoutAccountEntity,
    TaxiPayoutSessionEntity,
    ShopPayoutSessionEntity,
    ShopDocumentEntity,
    ShopToShopDocumentEntity,
    ShopDocumentRetentionPolicyEntity,
    ParkingPayoutSessionEntity,
    ParkSpotEntity,
    ParkOrderEntity,
    ParkingFeedbackEntity,
    ParkingFeedbackParameterEntity,
    ParkingCustomerNotificationEntity,
    ParkingProviderNotificationEntity,
    ShopOrderEntity,
    ShopNoteEntity,
    ShopOrderCartEntity,
    ShopOrderCartProductEntity,
    ShopProductPresetEntity,
    ProductVariantEntity,
    ProductEntity,
    ProductOptionEntity,
    ProductCategoryEntity,
    ShopEntity,
    ShopCategoryEntity,
    ShopDeliveryZoneEntity,
    ShopFeedbackEntity,
    ShopFeedbackParameterEntity,
    ShopSessionEntity,
    CustomerSessionEntity,
    RequestActivityEntity,
    ZonePriceCategoryEntity,
    ShopSupportRequestEntity,
    ShopSupportRequestActivityEntity,
    TaxiOrderNoteEntity,
    ParkingLoginSessionEntity,
    ShopLoginSessionEntity,
    ShopOrderNoteEntity,
    ShopOrderStatusHistoryEntity,
    ShopTransactionEntity,
    ShopWalletEntity,
    ParkingWalletEntity,
    ParkingTransactionEntity,
    ParkSpotNoteEntity,
    ParkOrderNoteEntity,
    ParkOrderActivityEntity,
    ParkingSupportRequestEntity,
    ParkingSupportRequestActivityEntity,
    ShopSupportRequestEntity,
    ShopSupportRequestActivityEntity,
    CustomerNoteEntity,
    CampaignEntity,
    CampaignCodeEntity,
    SOSReasonEntity,
    DriverToDriverDocumentEntity,
    DriverDocumentEntity,
    DriverDocumentRetentionPolicyEntity,
    DriverNoteEntity,
    SMSEntity,
    SMSProviderEntity,
    TaxiPayoutSessionPayoutMethodDetailEntity,
    ShopPayoutSessionPayoutMethodDetailEntity,
    ShopSubcategoryEntity,
    ShopNotificationEntity,
    ParkingPayoutSessionPayoutMethodDetailEntity,
    CustomerFavoriteProductEntity,
    ShopCustomerSupportRequestEntity,
    ShopCustomerSupportRequestActivityEntity,
    CartEntity,
    CartProductEntity,
    CartGroupEntity,
    TaxiOrderShopEntity,
    DriverServicesServiceEntity,
    DriverShiftRuleEntity,
    RewardEntity
];

// EXTERNAL MODULE: external "@ptc-org/nestjs-query-graphql"
var nestjs_query_graphql_ = __webpack_require__(17);
// EXTERNAL MODULE: external "graphql-redis-subscriptions"
var external_graphql_redis_subscriptions_ = __webpack_require__(18);
;// external "ioredis"
const external_ioredis_namespaceObject = require("ioredis");
var external_ioredis_default = /*#__PURE__*/__webpack_require__.n(external_ioredis_namespaceObject);
;// ../../libs/database/src/lib/redis-pub-sub.provider.ts



var RedisPubSubProvider = /*#__PURE__*/ function() {
    "use strict";
    function RedisPubSubProvider() {}
    RedisPubSubProvider.provider = function provider() {
        return {
            provide: (0,nestjs_query_graphql_.pubSubToken)(),
            useFactory: function() {
                var options = {
                    host: process.env.REDIS_HOST || 'localhost',
                    port: 6379
                };
                return new external_graphql_redis_subscriptions_.RedisPubSub({
                    publisher: new (external_ioredis_default())(options),
                    subscriber: new (external_ioredis_default())(options)
                });
            }
        };
    };
    return RedisPubSubProvider;
}();

;// external "crypto"
const external_crypto_namespaceObject = require("crypto");
;// ../../libs/database/src/lib/crypto/crypto.service.ts
function crypto_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function crypto_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                crypto_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                crypto_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function crypto_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function crypto_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}


var CryptoService = /*#__PURE__*/ function() {
    "use strict";
    function CryptoService() {
        this.ENCRYPTION_KEY = process.env.ENCRYPTION_KEY // Must be 256 bits (32 characters)
        ;
        this.IV_LENGTH = 16 // For AES, this is always 16
        ;
    }
    var _proto = CryptoService.prototype;
    _proto.encrypt = function encrypt(text) {
        var _this = this;
        return crypto_service_async_to_generator(function() {
            var iv, cipher, encrypted;
            return crypto_service_ts_generator(this, function(_state) {
                iv = (0,external_crypto_namespaceObject.randomBytes)(_this.IV_LENGTH);
                cipher = (0,external_crypto_namespaceObject.createCipheriv)('aes-256-cbc', Buffer.from(_this.ENCRYPTION_KEY), iv);
                encrypted = cipher.update(text);
                encrypted = Buffer.concat([
                    encrypted,
                    cipher.final()
                ]);
                return [
                    2,
                    iv.toString('hex') + ':' + encrypted.toString('hex')
                ];
            });
        })();
    };
    _proto.decrypt = function decrypt(text) {
        var _this = this;
        return crypto_service_async_to_generator(function() {
            var textParts, iv, encryptedText, decipher, decrypted;
            return crypto_service_ts_generator(this, function(_state) {
                textParts = text.split(':');
                iv = Buffer.from(textParts.shift(), 'hex');
                encryptedText = Buffer.from(textParts.join(':'), 'hex');
                decipher = (0,external_crypto_namespaceObject.createDecipheriv)('aes-256-cbc', Buffer.from(_this.ENCRYPTION_KEY), iv);
                decrypted = decipher.update(encryptedText);
                decrypted = Buffer.concat([
                    decrypted,
                    decipher.final()
                ]);
                return [
                    2,
                    JSON.parse(decrypted.toString())
                ];
            });
        })();
    };
    return CryptoService;
}();
CryptoService = crypto_service_ts_decorate([
    (0,common_.Injectable)()
], CryptoService);

// EXTERNAL MODULE: external "fs"
var external_fs_ = __webpack_require__(19);
;// ../../libs/database/src/lib/shared-configuration.service.ts
function shared_configuration_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_configuration_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_configuration_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_configuration_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_configuration_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_configuration_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}


var SharedConfigurationService = /*#__PURE__*/ function() {
    "use strict";
    function SharedConfigurationService() {}
    var _proto = SharedConfigurationService.prototype;
    _proto.getConfiguration = function getConfiguration() {
        return shared_configuration_service_async_to_generator(function() {
            var _process_env_NODE_ENV, configAddress, file, config, firebaseKeyFileAddress;
            return shared_configuration_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        console.log(process.env.NODE_ENV);
                        configAddress = process.cwd() + "/config/config." + ((_process_env_NODE_ENV = process.env.NODE_ENV) != null ? _process_env_NODE_ENV : 'production') + ".json";
                        if (!external_fs_.existsSync(configAddress)) return [
                            3,
                            2
                        ];
                        return [
                            4,
                            external_fs_.promises.readFile(configAddress, {
                                encoding: 'utf-8'
                            })
                        ];
                    case 1:
                        file = _state.sent();
                        config = JSON.parse(file);
                        firebaseKeyFileAddress = process.cwd() + "/config/" + config.firebaseProjectPrivateKey;
                        if (config.firebaseProjectPrivateKey != null && external_fs_.existsSync(firebaseKeyFileAddress)) {
                            config.purchaseCode = 'RESTRICTED';
                            config.firebaseProjectPrivateKey = 'RESTRICTED';
                            return [
                                2,
                                config
                            ];
                        }
                        return [
                            2,
                            config
                        ];
                    case 2:
                        return [
                            2,
                            {}
                        ];
                    case 3:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return SharedConfigurationService;
}();
SharedConfigurationService = shared_configuration_service_ts_decorate([
    (0,common_.Injectable)()
], SharedConfigurationService);

;// ../../libs/database/src/lib/shop/shared-shop.service.ts
function shared_shop_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_shop_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_shop_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_shop_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_shop_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_shop_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_shop_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function _ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}




var SharedShopService = /*#__PURE__*/ function() {
    "use strict";
    function SharedShopService(shopRepository) {
        this.shopRepository = shopRepository;
    }
    var _proto = SharedShopService.prototype;
    _proto.findById = function findById(id) {
        var _this = this;
        return shared_shop_service_async_to_generator(function() {
            return shared_shop_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.shopRepository.findOneOrFail({
                        where: {
                            id: id
                        },
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.findWithDeleted = function findWithDeleted(filter) {
        var _this = this;
        return shared_shop_service_async_to_generator(function() {
            return shared_shop_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.shopRepository.findOne({
                        where: filter,
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.findUserByMobileNumber = function findUserByMobileNumber(mobileNumber) {
        var _this = this;
        return shared_shop_service_async_to_generator(function() {
            return shared_shop_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.shopRepository.findOne({
                        where: {
                            mobileNumber: {
                                number: mobileNumber
                            }
                        },
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.createUserWithMobileNumber = function createUserWithMobileNumber(input) {
        var _this = this;
        return shared_shop_service_async_to_generator(function() {
            var shop;
            return shared_shop_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log('creating rider with ');
                        shop = _this.shopRepository.create({
                            mobileNumber: {
                                number: input.mobileNumber,
                                countryCode: input.countryIso
                            }
                        });
                        return [
                            4,
                            _this.shopRepository.save(shop)
                        ];
                    case 1:
                        shop = _state.sent();
                        return [
                            2,
                            shop
                        ];
                }
            });
        })();
    };
    _proto.updateLastActivity = function updateLastActivity(riderId) {
        return this.shopRepository.update(riderId, {
            lastActivityAt: new Date()
        });
    };
    _proto.findOrCreateUserWithMobileNumber = function findOrCreateUserWithMobileNumber(input) {
        var _this = this;
        return shared_shop_service_async_to_generator(function() {
            return shared_shop_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.shopRepository.manager.transaction(/*#__PURE__*/ shared_shop_service_async_to_generator(function(manager) {
                                var user;
                                return shared_shop_service_ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                manager.findOne(ShopEntity, {
                                                    where: {
                                                        mobileNumber: input.mobileNumber
                                                    },
                                                    withDeleted: true,
                                                    lock: {
                                                        mode: 'pessimistic_write'
                                                    }
                                                })
                                            ];
                                        case 1:
                                            user = _state.sent();
                                            if (!!user) return [
                                                3,
                                                3
                                            ];
                                            user = manager.create(ShopEntity, {
                                                mobileNumber: input.mobileNumber,
                                                countryIso: input.countryIso
                                            });
                                            return [
                                                4,
                                                manager.save(user)
                                            ];
                                        case 2:
                                            _state.sent();
                                            _state.label = 3;
                                        case 3:
                                            if (!(user.deletedAt != null)) return [
                                                3,
                                                6
                                            ];
                                            return [
                                                4,
                                                manager.restore(ShopEntity, {
                                                    id: user.id
                                                })
                                            ];
                                        case 4:
                                            _state.sent();
                                            return [
                                                4,
                                                manager.findOne(ShopEntity, {
                                                    where: {
                                                        id: user.id
                                                    }
                                                })
                                            ];
                                        case 5:
                                            //    
                                            user = _state.sent();
                                            _state.label = 6;
                                        case 6:
                                            return [
                                                2,
                                                user
                                            ];
                                    }
                                });
                            }))
                        ];
                    case 1:
                        //     race condition
                        return [
                            2,
                            _state.sent()
                        ];
                }
            });
        })();
    };
    _proto.deleteById = function deleteById(id) {
        var _this = this;
        return shared_shop_service_async_to_generator(function() {
            var user;
            return shared_shop_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.findById(id)
                        ];
                    case 1:
                        user = _state.sent();
                        return [
                            4,
                            _this.shopRepository.softDelete(id)
                        ];
                    case 2:
                        _state.sent();
                        return [
                            2,
                            user
                        ];
                }
            });
        })();
    };
    return SharedShopService;
}();
SharedShopService = shared_shop_service_ts_decorate([
    (0,common_.Injectable)(),
    _ts_param(0, (0,typeorm_.InjectRepository)(ShopEntity)),
    shared_shop_service_ts_metadata("design:type", Function),
    shared_shop_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SharedShopService);

;// external "@googlemaps/routing"
const routing_namespaceObject = require("@googlemaps/routing");
// EXTERNAL MODULE: external "@nestjs/apollo"
var apollo_ = __webpack_require__(3);
;// ../../libs/database/src/lib/order/google-services/google-services.service.ts
function google_services_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function google_services_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                google_services_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                google_services_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function google_services_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function google_services_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function google_services_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var GoogleServicesService = /*#__PURE__*/ function() {
    "use strict";
    function GoogleServicesService(configurationService) {
        this.configurationService = configurationService;
    }
    var _proto = GoogleServicesService.prototype;
    _proto.getSumDistanceAndDuration = function getSumDistanceAndDuration(points) {
        var _this = this;
        return google_services_service_async_to_generator(function() {
            var config, client, waypoints, _routesResponse__routes, _route_duration_seconds, _route_duration, _route_polyline_encodedPolyline, _route_polyline, routesResponse, route, distance, duration, directions, exception;
            return google_services_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.configurationService.getConfiguration()
                        ];
                    case 1:
                        config = _state.sent();
                        client = new routing_namespaceObject.RoutesClient({
                            apiKey: config == null ? void 0 : config.backendMapsAPIKey,
                            retryOptions: {
                                maxRetries: 3,
                                initialRetryDelayMillis: 1000,
                                retryDelayMultiplier: 2,
                                maxRetryDelayMillis: 10000
                            }
                        });
                        waypoints = points.map(function(point) {
                            return {
                                location: {
                                    latLng: {
                                        latitude: point.lat,
                                        longitude: point.lng
                                    }
                                }
                            };
                        });
                        _state.label = 2;
                    case 2:
                        _state.trys.push([
                            2,
                            4,
                            ,
                            5
                        ]);
                        return [
                            4,
                            client.computeRoutes({
                                origin: waypoints[0],
                                destination: waypoints[waypoints.length - 1],
                                intermediates: waypoints.length > 2 ? waypoints.slice(1, -1) : [],
                                travelMode: 'DRIVE',
                                routingPreference: 'TRAFFIC_AWARE_OPTIMAL',
                                computeAlternativeRoutes: false,
                                routeModifiers: {
                                    avoidTolls: false,
                                    avoidHighways: false,
                                    avoidFerries: false
                                },
                                languageCode: 'en-US',
                                units: 'METRIC'
                            }, {
                                otherArgs: {
                                    headers: {
                                        'X-Goog-FieldMask': 'routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline'
                                    }
                                }
                            })
                        ];
                    case 3:
                        routesResponse = _state.sent();
                        if (((_routesResponse__routes = routesResponse[0].routes) == null ? void 0 : _routesResponse__routes.length) === 0 || !routesResponse[0].routes) {
                            throw new apollo_.ForbiddenError(routesResponse.toString());
                        }
                        route = routesResponse[0].routes[0];
                        distance = route.distanceMeters || 0;
                        duration = parseInt(((_route_duration = route.duration) == null ? void 0 : (_route_duration_seconds = _route_duration.seconds) == null ? void 0 : _route_duration_seconds.toString().replace('s', '')) || '0', 10);
                        directions = _this.decode(((_route_polyline = route.polyline) == null ? void 0 : (_route_polyline_encodedPolyline = _route_polyline.encodedPolyline) == null ? void 0 : _route_polyline_encodedPolyline.toString()) || '');
                        return [
                            2,
                            {
                                distance: distance,
                                duration: duration,
                                directions: directions
                            }
                        ];
                    case 4:
                        exception = _state.sent();
                        common_.Logger.error(exception);
                        throw new apollo_.ForbiddenError('NO_ROUTE_FOUND');
                    case 5:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.findTheBestRoute = function findTheBestRoute(shops, deliveryAddress) {
        var _this = this;
        return google_services_service_async_to_generator(function() {
            var _route__routes, config, client, farthestShop, route;
            return google_services_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.configurationService.getConfiguration()
                        ];
                    case 1:
                        config = _state.sent();
                        client = new routing_namespaceObject.RoutesClient({
                            apiKey: config == null ? void 0 : config.backendMapsAPIKey,
                            retryOptions: {
                                maxRetries: 3,
                                initialRetryDelayMillis: 1000,
                                retryDelayMultiplier: 2,
                                maxRetryDelayMillis: 10000
                            }
                        });
                        // find the farthest shop from the delivery address based on the distance
                        // between the delivery address and the shop locations
                        farthestShop = shops.reduce(function(a, b) {
                            return _this.distancePoints(a.location, deliveryAddress.location) > _this.distancePoints(b.location, deliveryAddress.location) ? a : b;
                        });
                        return [
                            4,
                            client.computeRoutes({
                                origin: {
                                    location: {
                                        latLng: {
                                            latitude: farthestShop.location.lat,
                                            longitude: farthestShop.location.lng
                                        }
                                    }
                                },
                                destination: {
                                    location: {
                                        latLng: {
                                            latitude: deliveryAddress.location.lat,
                                            longitude: deliveryAddress.location.lng
                                        }
                                    }
                                },
                                intermediates: shops.filter(function(shop) {
                                    return shop.id !== farthestShop.id;
                                }).map(function(shop) {
                                    return {
                                        location: {
                                            latLng: {
                                                latitude: shop.location.lat,
                                                longitude: shop.location.lng
                                            }
                                        }
                                    };
                                }),
                                travelMode: 'DRIVE',
                                routingPreference: 'TRAFFIC_AWARE_OPTIMAL',
                                computeAlternativeRoutes: true,
                                routeModifiers: {
                                    avoidTolls: false,
                                    avoidHighways: false,
                                    avoidFerries: false
                                },
                                languageCode: 'en-US',
                                units: 'METRIC'
                            }, {
                                otherArgs: {
                                    headers: {
                                        'X-Goog-FieldMask': 'routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline'
                                    }
                                }
                            })
                        ];
                    case 2:
                        route = _state.sent();
                        console.log(JSON.stringify(route));
                        common_.Logger.log(route, 'Route');
                        if (((_route__routes = route[0].routes) == null ? void 0 : _route__routes.length) === 0 || !route[0].routes) {
                            throw new apollo_.ForbiddenError('NO_ROUTE_FOUND');
                        }
                        return [
                            2,
                            {
                                shops: [].concat([
                                    farthestShop
                                ], shops.filter(function(shop) {
                                    return shop.id !== farthestShop.id;
                                })),
                                legs: route[0].routes[0].legs
                            }
                        ];
                }
            });
        })();
    };
    _proto.distancePoints = function distancePoints(point1, point2) {
        return Math.sqrt(Math.pow(point1.lat - point2.lat, 2) + Math.pow(point1.lng - point2.lng, 2));
    };
    _proto.decode = function decode(encoded) {
        // array that holds the points
        var points = [];
        var index = 0;
        var len = encoded.length;
        var lat = 0, lng = 0;
        while(index < len){
            var b = void 0, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++).charCodeAt(0) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            }while (b >= 0x20);
            var dlat = (result & 1) != 0 ? ~(result >> 1) : result >> 1;
            lat += dlat;
            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++).charCodeAt(0) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            }while (b >= 0x20);
            var dlng = (result & 1) != 0 ? ~(result >> 1) : result >> 1;
            lng += dlng;
            points.push({
                lat: lat / 1e5,
                lng: lng / 1e5
            });
        }
        return points;
    };
    return GoogleServicesService;
}();
GoogleServicesService = google_services_service_ts_decorate([
    (0,common_.Injectable)(),
    google_services_service_ts_metadata("design:type", Function),
    google_services_service_ts_metadata("design:paramtypes", [
        typeof SharedConfigurationService === "undefined" ? Object : SharedConfigurationService
    ])
], GoogleServicesService);

;// ../../libs/database/src/lib/order/service.service.ts
function _array_like_to_array(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _unsupported_iterable_to_array(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _array_like_to_array(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _array_like_to_array(o, minLen);
}
function _create_for_of_iterator_helper_loose(o, allowArrayLike) {
    var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
    if (it) return (it = it.call(o)).next.bind(it);
    if (Array.isArray(o) || (it = _unsupported_iterable_to_array(o)) || allowArrayLike && o && typeof o.length === "number") {
        if (it) o = it;
        var i = 0;
        return function() {
            if (i >= o.length) {
                return {
                    done: true
                };
            }
            return {
                done: false,
                value: o[i++]
            };
        };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function service_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function service_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function service_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}




var weekdays = [
    'Sunday',
    'Monday',
    'Tuesday',
    'Wednesday',
    'Thursday',
    'Friday',
    'Saturday'
];
var ServiceService = /*#__PURE__*/ function() {
    "use strict";
    function ServiceService(service) {
        this.service = service;
    }
    var _proto = ServiceService.prototype;
    _proto.calculateCost = function calculateCost(service, distance, duration, eta, fleetMultiplier, isResident) {
        if (fleetMultiplier === void 0) fleetMultiplier = 1;
        if (isResident === void 0) isResident = true;
        var i = service.baseFare;
        var multiplier = 1;
        console.log("Calculating Trip fee with base fare " + i + " distance of " + distance + " meters and duration of " + duration);
        i += service.perHundredMeters * distance / 100 + service.perMinuteDrive * duration / 60;
        console.log("Initial calculation without multiplier: " + i);
        var ratioCost = 0;
        var newRatioCost = 0;
        var ratioDistance = 0;
        var endDistance = 0;
        for(var _iterator = _create_for_of_iterator_helper_loose(service.distanceMultipliers), _step; !(_step = _iterator()).done;){
            var _multiplier = _step.value;
            if (distance > _multiplier.distanceFrom) {
                endDistance = distance > _multiplier.distanceTo ? _multiplier.distanceTo : distance;
                ratioDistance = endDistance - _multiplier.distanceFrom;
                ratioCost = ratioDistance / distance * i;
                newRatioCost = ratioCost * _multiplier.multiply;
                i = i - ratioCost + newRatioCost;
                console.log("After distance multiplier: " + i);
            }
        }
        for(var _iterator1 = _create_for_of_iterator_helper_loose(service.timeMultipliers), _step1; !(_step1 = _iterator1()).done;){
            var _multiplier1 = _step1.value;
            var startMinutes = parseInt(_multiplier1.startTime.split(':')[0]) * 60 + parseInt(_multiplier1.startTime.split(':')[1]);
            var nowMinutes = eta.getHours() * 60 + eta.getMinutes();
            var endMinutes = parseInt(_multiplier1.endTime.split(':')[0]) * 60 + parseInt(_multiplier1.endTime.split(':')[1]);
            if (nowMinutes >= startMinutes && nowMinutes <= endMinutes) {
                i *= _multiplier1.multiply;
                multiplier *= _multiplier1.multiply;
                console.log("After time multiplier: " + i);
            }
        }
        for(var _iterator2 = _create_for_of_iterator_helper_loose(service.weekdayMultipliers), _step2; !(_step2 = _iterator2()).done;){
            var _multiplier2 = _step2.value;
            if (_multiplier2.weekday === weekdays[eta.getDay()]) {
                i *= _multiplier2.multiply;
                multiplier *= _multiplier2.multiply;
                console.log("After weekday multiplier: " + i);
            }
        }
        for(var _iterator3 = _create_for_of_iterator_helper_loose(service.dateRangeMultipliers), _step3; !(_step3 = _iterator3()).done;){
            var _multiplier3 = _step3.value;
            var startDate = new Date(_multiplier3.startDate);
            var endDate = new Date(_multiplier3.endDate);
            if (eta >= startDate && eta <= endDate) {
                i *= _multiplier3.multiply;
                multiplier *= _multiplier3.multiply;
                console.log("After date range multiplier: " + i);
            }
        }
        i *= fleetMultiplier;
        multiplier *= fleetMultiplier;
        console.log("After fleet multiplier: " + i);
        if (i < service.minimumFee * multiplier) {
            i = service.minimumFee * multiplier;
            console.log("After Minimum fee applied: " + i);
        }
        if (isResident === false) {
            i *= service.touristMultiplier;
        }
        common_.Logger.log("Final calculation with base fare " + service.baseFare + " distance of " + distance + " meters and duration of " + duration + " is " + i, 'ServiceService');
        if (service.roundingFactor != null && service.roundingFactor > 0) {
            console.log("Rounding factor: " + service.roundingFactor);
            console.log("Before Rounding factor applied: " + i);
            i = Math.round(i / service.roundingFactor) * service.roundingFactor;
            console.log("After Rounding factor applied: " + i);
        }
        return i != null ? i : 0;
    };
    _proto.getWithId = function getWithId(id) {
        return this.service.findOneBy({
            id: id
        });
    };
    return ServiceService;
}();
ServiceService = service_service_ts_decorate([
    (0,common_.Injectable)(),
    service_service_ts_param(0, (0,typeorm_.InjectRepository)(ServiceEntity)),
    service_service_ts_metadata("design:type", Function),
    service_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], ServiceService);

;// ../../libs/database/src/lib/shop/delivery-fee.service.ts
function delivery_fee_service_array_like_to_array(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function delivery_fee_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function delivery_fee_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                delivery_fee_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                delivery_fee_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function delivery_fee_service_unsupported_iterable_to_array(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return delivery_fee_service_array_like_to_array(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return delivery_fee_service_array_like_to_array(o, minLen);
}
function delivery_fee_service_create_for_of_iterator_helper_loose(o, allowArrayLike) {
    var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
    if (it) return (it = it.call(o)).next.bind(it);
    if (Array.isArray(o) || (it = delivery_fee_service_unsupported_iterable_to_array(o)) || allowArrayLike && o && typeof o.length === "number") {
        if (it) o = it;
        var i = 0;
        return function() {
            if (i >= o.length) {
                return {
                    done: true
                };
            }
            return {
                done: false,
                value: o[i++]
            };
        };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function delivery_fee_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function delivery_fee_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function delivery_fee_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function delivery_fee_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}
function _ts_values(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function() {
            if (o && i >= o.length) o = void 0;
            return {
                value: o && o[i++],
                done: !o
            };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
}











var DeliveryFeeService = /*#__PURE__*/ function() {
    "use strict";
    function DeliveryFeeService(shopRepository, riderAddressRepository, serviceRepository, googleService, serviceService, productEntity) {
        this.shopRepository = shopRepository;
        this.riderAddressRepository = riderAddressRepository;
        this.serviceRepository = serviceRepository;
        this.googleService = googleService;
        this.serviceService = serviceService;
        this.productEntity = productEntity;
    }
    var _proto = DeliveryFeeService.prototype;
    _proto.calculateDeliveryFee = function calculateDeliveryFee(input) {
        var _this = this;
        return delivery_fee_service_async_to_generator(function() {
            var _loop, _Math, _Math1, shops, address, bestShopOrderByDistance, totalDistance, totalDuration, deliveryMode, services, costs, minCostBatch, maxCostBatch, maxPreparationTime, splitDeliveryMinFee, splitDeliveryMaxFee, _iterator, _step;
            return delivery_fee_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        _loop = function() {
                            var shopId, _Math, _Math1, shop, metrics, distance, duration, costs, queueLevel, queueLevelValue, preparationTime, _iterator, _step1, productId, product, itemPreparationTime;
                            return delivery_fee_service_ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        shopId = _step.value;
                                        return [
                                            4,
                                            _this.shopRepository.findOneByOrFail({
                                                id: shopId
                                            })
                                        ];
                                    case 1:
                                        shop = _state.sent();
                                        return [
                                            4,
                                            _this.googleService.getSumDistanceAndDuration([
                                                address.location,
                                                shop.location
                                            ])
                                        ];
                                    case 2:
                                        metrics = _state.sent();
                                        distance = metrics.distance;
                                        duration = metrics.duration;
                                        costs = services.map(function(service) {
                                            return _this.serviceService.calculateCost(service, distance, duration, new Date());
                                        });
                                        splitDeliveryMinFee += (_Math = Math).min.apply(_Math, [].concat(costs));
                                        splitDeliveryMaxFee += (_Math1 = Math).max.apply(_Math1, [].concat(costs));
                                        queueLevel = shop.orderQueueLevel;
                                        // Convert the queue level from low, medium, high to 0, 0.5, 1
                                        queueLevelValue = 0;
                                        if (queueLevel === OrderQueueLevel.MEDIUM) {
                                            queueLevelValue = 0.5;
                                        } else if (queueLevel === OrderQueueLevel.HIGH) {
                                            queueLevelValue = 1;
                                        }
                                        preparationTime = 0;
                                        _iterator = delivery_fee_service_create_for_of_iterator_helper_loose(input.produtIds);
                                        _state.label = 3;
                                    case 3:
                                        if (!!(_step1 = _iterator()).done) return [
                                            3,
                                            6
                                        ];
                                        productId = _step1.value;
                                        return [
                                            4,
                                            _this.productEntity.findOneByOrFail({
                                                id: productId
                                            })
                                        ];
                                    case 4:
                                        product = _state.sent();
                                        itemPreparationTime = product.minimumPreparationTime + (product.maximumPreparationTime - product.minimumPreparationTime) * queueLevelValue;
                                        preparationTime = Math.max(preparationTime, itemPreparationTime);
                                        _state.label = 5;
                                    case 5:
                                        return [
                                            3,
                                            3
                                        ];
                                    case 6:
                                        maxPreparationTime = Math.max(maxPreparationTime, preparationTime);
                                        return [
                                            2
                                        ];
                                }
                            });
                        };
                        return [
                            4,
                            _this.shopRepository.find({
                                where: {
                                    id: (0,external_typeorm_.In)(input.shopIds)
                                }
                            })
                        ];
                    case 1:
                        shops = _state.sent();
                        return [
                            4,
                            _this.riderAddressRepository.findOneByOrFail({
                                id: input.deliveryAddressId
                            })
                        ];
                    case 2:
                        address = _state.sent();
                        return [
                            4,
                            _this.googleService.findTheBestRoute(shops, address)
                        ];
                    case 3:
                        bestShopOrderByDistance = _state.sent();
                        totalDistance = bestShopOrderByDistance.legs.reduce(function(acc, leg) {
                            return acc + leg.distance.value;
                        }, 0);
                        totalDuration = bestShopOrderByDistance.legs.reduce(function(acc, leg) {
                            return acc + leg.duration.value;
                        }, 0);
                        // determine the delivery mode based on the number of items
                        deliveryMode = [
                            DeliveryPackageSize.Small,
                            DeliveryPackageSize.Medium
                        ];
                        if (input.totalItems > 5) {
                            deliveryMode = [
                                DeliveryPackageSize.Medium,
                                DeliveryPackageSize.Large
                            ];
                        } else if (input.totalItems > 10) {
                            deliveryMode = [
                                DeliveryPackageSize.Large
                            ];
                        }
                        return [
                            4,
                            _this.serviceRepository.find({
                                where: {
                                    maximumCarryPackageSize: (0,external_typeorm_.In)(deliveryMode)
                                }
                            })
                        ];
                    case 4:
                        services = _state.sent();
                        costs = services.map(function(service) {
                            return _this.serviceService.calculateCost(service, totalDistance, totalDuration, new Date());
                        });
                        minCostBatch = (_Math = Math).min.apply(_Math, [].concat(costs));
                        maxCostBatch = (_Math1 = Math).max.apply(_Math1, [].concat(costs));
                        // START: Calculate the preparation time
                        maxPreparationTime = 0;
                        splitDeliveryMinFee = 0;
                        splitDeliveryMaxFee = 0;
                        _iterator = delivery_fee_service_create_for_of_iterator_helper_loose(input.shopIds);
                        _state.label = 5;
                    case 5:
                        if (!!(_step = _iterator()).done) return [
                            3,
                            8
                        ];
                        return [
                            5,
                            _ts_values(_loop())
                        ];
                    case 6:
                        _state.sent();
                        _state.label = 7;
                    case 7:
                        return [
                            3,
                            5
                        ];
                    case 8:
                        // return averages of the costs
                        return [
                            2,
                            {
                                batchDeliveryFee: (minCostBatch + maxCostBatch) / 2,
                                splitDeliveryFee: (splitDeliveryMinFee + splitDeliveryMaxFee) / 2,
                                batchDeliveryDuration: maxPreparationTime + totalDuration
                            }
                        ];
                }
            });
        })();
    };
    return DeliveryFeeService;
}();
DeliveryFeeService = delivery_fee_service_ts_decorate([
    (0,common_.Injectable)(),
    delivery_fee_service_ts_param(0, (0,typeorm_.InjectRepository)(ShopEntity)),
    delivery_fee_service_ts_param(1, (0,typeorm_.InjectRepository)(RiderAddressEntity)),
    delivery_fee_service_ts_param(2, (0,typeorm_.InjectRepository)(ServiceEntity)),
    delivery_fee_service_ts_param(5, (0,typeorm_.InjectRepository)(ProductEntity)),
    delivery_fee_service_ts_metadata("design:type", Function),
    delivery_fee_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof GoogleServicesService === "undefined" ? Object : GoogleServicesService,
        typeof ServiceService === "undefined" ? Object : ServiceService,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], DeliveryFeeService);

;// ../../libs/database/src/lib/order/google-services/google-services.module.ts
function google_services_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}



var GoogleServicesModule = function GoogleServicesModule() {
    "use strict";
};
GoogleServicesModule = google_services_module_ts_decorate([
    (0,common_.Module)({
        providers: [
            GoogleServicesService,
            SharedConfigurationService
        ],
        exports: [
            GoogleServicesService
        ]
    })
], GoogleServicesModule);

// EXTERNAL MODULE: external "@nestjs/axios"
var axios_ = __webpack_require__(12);
;// ../../libs/database/src/lib/coupon/common-coupon.service.ts
function common_coupon_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function common_coupon_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                common_coupon_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                common_coupon_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function common_coupon_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function common_coupon_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function common_coupon_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function common_coupon_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}






var CommonCouponService = /*#__PURE__*/ function() {
    "use strict";
    function CommonCouponService(couponRepo, requestRepo) {
        this.couponRepo = couponRepo;
        this.requestRepo = requestRepo;
    }
    var _proto = CommonCouponService.prototype;
    _proto.applyCouponOnPrice = function applyCouponOnPrice(coupon, price) {
        if (coupon == null) return price;
        price *= (100.0 - coupon.discountPercent) / 100.0;
        price -= coupon.discountFlat;
        return price;
    };
    _proto.getCouponInfo = function getCouponInfo(input) {
        var _this = this;
        return common_coupon_service_async_to_generator(function() {
            var coupon, requestsWithCoupon, timesCouponUsed;
            return common_coupon_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.couponRepo.findOneBy({
                                code: input.code
                            })
                        ];
                    case 1:
                        coupon = _state.sent();
                        if (coupon == null) {
                            throw new apollo_.ForbiddenError('Incorrect code');
                        }
                        if (coupon.expireAt == null || coupon.expireAt < new Date()) {
                            throw new apollo_.ForbiddenError('Coupon expired');
                        }
                        if (!(input.riderId != null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.requestRepo.count({
                                where: {
                                    riderId: input.riderId,
                                    couponId: coupon.id
                                }
                            })
                        ];
                    case 2:
                        requestsWithCoupon = _state.sent();
                        if (requestsWithCoupon >= coupon.manyTimesUserCanUse) {
                            throw new apollo_.ForbiddenError('Coupon already used.');
                        }
                        _state.label = 3;
                    case 3:
                        if (!coupon.isEnabled) {
                            throw new apollo_.ForbiddenError('Coupon is disabled.');
                        }
                        return [
                            4,
                            _this.requestRepo.count({
                                where: {
                                    couponId: coupon.id
                                }
                            })
                        ];
                    case 4:
                        timesCouponUsed = _state.sent();
                        if (timesCouponUsed >= coupon.manyUsersCanUse) {
                            throw new apollo_.ForbiddenError('Coupon usage limit exceeded.');
                        }
                        return [
                            2,
                            coupon
                        ];
                }
            });
        })();
    };
    _proto.checkCoupon = function checkCoupon(code, riderId) {
        var _this = this;
        return common_coupon_service_async_to_generator(function() {
            var coupon, requestsWithCoupon, timesCouponUsed;
            return common_coupon_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.couponRepo.findOneBy({
                                code: code
                            })
                        ];
                    case 1:
                        coupon = _state.sent();
                        if (coupon == null) {
                            throw new apollo_.ForbiddenError('Incorrect code');
                        }
                        if (coupon.expireAt == null || coupon.expireAt < new Date()) {
                            throw new apollo_.ForbiddenError('Coupon expired');
                        }
                        if (!(riderId != null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.requestRepo.count({
                                where: {
                                    riderId: riderId,
                                    couponId: coupon.id
                                }
                            })
                        ];
                    case 2:
                        requestsWithCoupon = _state.sent();
                        if (requestsWithCoupon >= coupon.manyTimesUserCanUse) {
                            throw new apollo_.ForbiddenError('Coupon already used.');
                        }
                        _state.label = 3;
                    case 3:
                        if (!coupon.isEnabled) {
                            throw new apollo_.ForbiddenError('Coupon is disabled.');
                        }
                        return [
                            4,
                            _this.requestRepo.count({
                                where: {
                                    couponId: coupon.id
                                }
                            })
                        ];
                    case 4:
                        timesCouponUsed = _state.sent();
                        if (timesCouponUsed >= coupon.manyUsersCanUse) {
                            throw new apollo_.ForbiddenError('Coupon usage limit exceeded.');
                        }
                        return [
                            2,
                            coupon
                        ];
                }
            });
        })();
    };
    _proto.applyCoupon = function applyCoupon(code, orderId, riderId) {
        var _this = this;
        return common_coupon_service_async_to_generator(function() {
            var coupon, request, finalCost;
            return common_coupon_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.checkCoupon(code, riderId)
                        ];
                    case 1:
                        coupon = _state.sent();
                        return [
                            4,
                            _this.requestRepo.findOneOrFail({
                                where: {
                                    id: orderId
                                },
                                relations: {
                                    service: true
                                }
                            })
                        ];
                    case 2:
                        request = _state.sent();
                        finalCost = _this.applyCouponOnPrice(coupon, request.costBest + request.waitMinutes * request.service.perMinuteWait);
                        return [
                            4,
                            _this.requestRepo.update(request.id, {
                                couponId: coupon.id,
                                costAfterCoupon: finalCost
                            })
                        ];
                    case 3:
                        _state.sent();
                        return [
                            4,
                            _this.requestRepo.findOneOrFail({
                                where: {
                                    id: orderId
                                },
                                relations: {
                                    service: true
                                }
                            })
                        ];
                    case 4:
                        request = _state.sent();
                        return [
                            2,
                            request
                        ];
                }
            });
        })();
    };
    return CommonCouponService;
}();
CommonCouponService = common_coupon_service_ts_decorate([
    (0,common_.Injectable)(),
    common_coupon_service_ts_param(0, (0,typeorm_.InjectRepository)(CouponEntity)),
    common_coupon_service_ts_param(1, (0,typeorm_.InjectRepository)(TaxiOrderEntity)),
    common_coupon_service_ts_metadata("design:type", Function),
    common_coupon_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], CommonCouponService);

;// ../../libs/database/src/lib/order/shared-driver.service.ts
function shared_driver_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_driver_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_driver_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_driver_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_driver_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_driver_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_driver_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function shared_driver_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}







var SharedDriverService = /*#__PURE__*/ function() {
    "use strict";
    function SharedDriverService(driverRepo, driverWalletRepo, driverTransactionRepo) {
        this.driverRepo = driverRepo;
        this.driverWalletRepo = driverWalletRepo;
        this.driverTransactionRepo = driverTransactionRepo;
    }
    var _proto = SharedDriverService.prototype;
    _proto.findById = function findById(id) {
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            return shared_driver_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.driverRepo.findOneOrFail({
                        where: {
                            id: id
                        },
                        relations: {
                            enabledServices: {
                                service: true
                            }
                        },
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.updateDriverStatus = function updateDriverStatus(driverId, status) {
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            return shared_driver_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.driverRepo.update(driverId, {
                        status: status
                    })
                ];
            });
        })();
    };
    _proto.getMaxRadiusForDriverServices = function getMaxRadiusForDriverServices(driverId) {
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            var _Math, driver, radiuses, max;
            return shared_driver_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.driverRepo.findOneOrFail({
                                where: {
                                    id: driverId
                                },
                                relations: {
                                    enabledServices: {
                                        service: true
                                    }
                                }
                            })
                        ];
                    case 1:
                        driver = _state.sent();
                        radiuses = driver.enabledServices.map(function(service) {
                            return service.service.searchRadius;
                        });
                        max = (_Math = Math).max.apply(_Math, [].concat(radiuses));
                        return [
                            2,
                            max > 0 ? max : 0
                        ];
                }
            });
        })();
    };
    _proto.getOnlineDriversWithServiceId = function getOnlineDriversWithServiceId(driverIds, serviceId, fleetIds) {
        if (fleetIds === void 0) fleetIds = [];
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            var driversWithService;
            return shared_driver_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log(serviceId, 'SharedDriverService.serviceId');
                        common_.Logger.log(driverIds, 'SharedDriverService.driverIds');
                        common_.Logger.log(fleetIds, 'SharedDriverService.fleetIds');
                        if (!(fleetIds.length > 0)) return [
                            3,
                            2
                        ];
                        return [
                            4,
                            _this.driverRepo.find({
                                where: {
                                    id: (0,external_typeorm_.In)(driverIds),
                                    status: DriverStatus.Online,
                                    fleetId: (0,external_typeorm_.In)(fleetIds)
                                },
                                relations: {
                                    enabledServices: {
                                        service: true
                                    }
                                }
                            })
                        ];
                    case 1:
                        driversWithService = _state.sent();
                        return [
                            3,
                            4
                        ];
                    case 2:
                        return [
                            4,
                            _this.driverRepo.find({
                                where: {
                                    id: (0,external_typeorm_.In)(driverIds),
                                    status: DriverStatus.Online
                                },
                                relations: {
                                    enabledServices: {
                                        service: true
                                    }
                                }
                            })
                        ];
                    case 3:
                        driversWithService = _state.sent();
                        _state.label = 4;
                    case 4:
                        return [
                            2,
                            driversWithService.filter(function(x) {
                                return x.enabledServices.map(function(y) {
                                    var _y_service;
                                    return (_y_service = y.service) == null ? void 0 : _y_service.id;
                                }).includes(serviceId);
                            })
                        ];
                }
            });
        })();
    };
    _proto.canDriverDoServiceAndFleet = function canDriverDoServiceAndFleet(driverId, serviceId, fleetIds) {
        if (fleetIds === void 0) fleetIds = [];
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            return shared_driver_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.getOnlineDriversWithServiceId([
                                driverId
                            ], serviceId, fleetIds)
                        ];
                    case 1:
                        return [
                            2,
                            _state.sent().length > 0
                        ];
                }
            });
        })();
    };
    _proto.rechargeWallet = function rechargeWallet(transaction) {
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            var wallet;
            return shared_driver_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.driverWalletRepo.findOneBy({
                                driverId: transaction.driverId,
                                currency: transaction.currency
                            })
                        ];
                    case 1:
                        wallet = _state.sent();
                        transaction.amount = parseFloat(transaction.amount.toString());
                        if (!(wallet == null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.driverWalletRepo.save({
                                balance: transaction.amount,
                                currency: transaction.currency,
                                driverId: transaction.driverId
                            })
                        ];
                    case 2:
                        wallet = _state.sent();
                        return [
                            3,
                            5
                        ];
                    case 3:
                        return [
                            4,
                            _this.driverWalletRepo.update(wallet.id, {
                                balance: parseFloat(transaction.amount.toString()) + parseFloat(wallet.balance.toString())
                            })
                        ];
                    case 4:
                        _state.sent();
                        wallet.balance += transaction.amount;
                        _state.label = 5;
                    case 5:
                        if (transaction.amount != 0) {
                            common_.Logger.log("Saving transaction " + JSON.stringify(transaction));
                            _this.driverTransactionRepo.save(transaction);
                        }
                        return [
                            2,
                            wallet
                        ];
                }
            });
        })();
    };
    _proto.setRating = function setRating(driverId, rating, totalRatingCount) {
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            return shared_driver_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.driverRepo.update(driverId, {
                        rating: rating,
                        reviewCount: totalRatingCount
                    })
                ];
            });
        })();
    };
    _proto.deleteById = function deleteById(id) {
        var _this = this;
        return shared_driver_service_async_to_generator(function() {
            var user;
            return shared_driver_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.findById(id)
                        ];
                    case 1:
                        user = _state.sent();
                        return [
                            4,
                            _this.driverRepo.softDelete(id)
                        ];
                    case 2:
                        _state.sent();
                        return [
                            2,
                            user
                        ];
                }
            });
        })();
    };
    return SharedDriverService;
}();
SharedDriverService = shared_driver_service_ts_decorate([
    (0,common_.Injectable)(),
    shared_driver_service_ts_param(0, (0,typeorm_.InjectRepository)(DriverEntity)),
    shared_driver_service_ts_param(1, (0,typeorm_.InjectRepository)(DriverWalletEntity)),
    shared_driver_service_ts_param(2, (0,typeorm_.InjectRepository)(DriverTransactionEntity)),
    shared_driver_service_ts_metadata("design:type", Function),
    shared_driver_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SharedDriverService);

;// ../../libs/database/src/lib/customer-wallet/shared-customer-wallet.service.ts
function shared_customer_wallet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_customer_wallet_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_customer_wallet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_customer_wallet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_customer_wallet_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_customer_wallet_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_customer_wallet_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function shared_customer_wallet_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}





var SharedCustomerWalletService = /*#__PURE__*/ function() {
    "use strict";
    function SharedCustomerWalletService(customerWalletRepo, customerTransactionRepo) {
        this.customerWalletRepo = customerWalletRepo;
        this.customerTransactionRepo = customerTransactionRepo;
    }
    var _proto = SharedCustomerWalletService.prototype;
    _proto.getRiderCreditInCurrency = function getRiderCreditInCurrency(riderId, currency) {
        var _this = this;
        return shared_customer_wallet_service_async_to_generator(function() {
            var wallet, _wallet_balance;
            return shared_customer_wallet_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.customerWalletRepo.findOneBy({
                                riderId: riderId,
                                currency: currency
                            })
                        ];
                    case 1:
                        wallet = _state.sent();
                        return [
                            2,
                            (_wallet_balance = wallet == null ? void 0 : wallet.balance) != null ? _wallet_balance : 0
                        ];
                }
            });
        })();
    };
    _proto.rechargeWallet = function rechargeWallet(input) {
        var _this = this;
        return shared_customer_wallet_service_async_to_generator(function() {
            var wallet, transaction;
            return shared_customer_wallet_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.customerWalletRepo.findOneBy({
                                riderId: input.riderId,
                                currency: input.currency
                            })
                        ];
                    case 1:
                        wallet = _state.sent();
                        if (!(wallet == null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.customerWalletRepo.save({
                                balance: input.amount,
                                currency: input.currency,
                                riderId: input.riderId
                            })
                        ];
                    case 2:
                        wallet = _state.sent();
                        return [
                            3,
                            5
                        ];
                    case 3:
                        return [
                            4,
                            _this.customerWalletRepo.update(wallet.id, {
                                balance: input.amount + wallet.balance
                            })
                        ];
                    case 4:
                        _state.sent();
                        wallet.balance += input.amount;
                        _state.label = 5;
                    case 5:
                        return [
                            4,
                            _this.customerTransactionRepo.save(input)
                        ];
                    case 6:
                        transaction = _state.sent();
                        return [
                            2,
                            {
                                wallet: wallet,
                                transaction: transaction
                            }
                        ];
                }
            });
        })();
    };
    return SharedCustomerWalletService;
}();
SharedCustomerWalletService = shared_customer_wallet_service_ts_decorate([
    (0,common_.Injectable)(),
    shared_customer_wallet_service_ts_param(0, (0,typeorm_.InjectRepository)(RiderWalletEntity)),
    shared_customer_wallet_service_ts_param(1, (0,typeorm_.InjectRepository)(RiderTransactionEntity)),
    shared_customer_wallet_service_ts_metadata("design:type", Function),
    shared_customer_wallet_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SharedCustomerWalletService);

;// ../../libs/database/src/lib/coupon/common-gift-card.service.ts
function common_gift_card_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function common_gift_card_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                common_gift_card_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                common_gift_card_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function common_gift_card_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function common_gift_card_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function common_gift_card_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function common_gift_card_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}










var CommonGiftCardService = /*#__PURE__*/ function() {
    "use strict";
    function CommonGiftCardService(giftCardRepo, sharedDriverService, sharedCustomerWalletService) {
        this.giftCardRepo = giftCardRepo;
        this.sharedDriverService = sharedDriverService;
        this.sharedCustomerWalletService = sharedCustomerWalletService;
    }
    var _proto = CommonGiftCardService.prototype;
    _proto.redeemGiftCard = function redeemGiftCard(input) {
        var _this = this;
        return common_gift_card_service_async_to_generator(function() {
            var giftCode;
            return common_gift_card_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.giftCardRepo.findOne({
                                where: {
                                    code: input.code
                                },
                                relations: {
                                    gift: true
                                }
                            })
                        ];
                    case 1:
                        giftCode = _state.sent();
                        if (!giftCode) {
                            throw new Error('Invalid gift code');
                        }
                        if (giftCode.usedAt != null) {
                            throw new Error('Gift code already used');
                        }
                        if (giftCode.gift.expireAt != null && giftCode.gift.expireAt < new Date()) {
                            throw new Error('Gift code expired');
                        }
                        giftCode.usedAt = new Date();
                        if (!(input.userType === 'rider')) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.sharedCustomerWalletService.rechargeWallet({
                                action: TransactionAction.Recharge,
                                status: TransactionStatus.Done,
                                riderId: input.userId,
                                amount: giftCode.gift.amount,
                                currency: giftCode.gift.currency,
                                giftCardId: giftCode.id,
                                rechargeType: RiderRechargeTransactionType.Gift
                            })
                        ];
                    case 2:
                        _state.sent();
                        return [
                            3,
                            5
                        ];
                    case 3:
                        return [
                            4,
                            _this.sharedDriverService.rechargeWallet({
                                action: TransactionAction.Recharge,
                                status: TransactionStatus.Done,
                                driverId: input.userId,
                                amount: giftCode.gift.amount,
                                currency: giftCode.gift.currency,
                                giftCardId: giftCode.id,
                                rechargeType: DriverRechargeTransactionType.Gift
                            })
                        ];
                    case 4:
                        _state.sent();
                        _state.label = 5;
                    case 5:
                        return [
                            4,
                            _this.giftCardRepo.save(giftCode)
                        ];
                    case 6:
                        _state.sent();
                        return [
                            2,
                            giftCode.gift
                        ];
                }
            });
        })();
    };
    return CommonGiftCardService;
}();
CommonGiftCardService = common_gift_card_service_ts_decorate([
    (0,common_.Injectable)(),
    common_gift_card_service_ts_param(0, (0,typeorm_.InjectRepository)(GiftCodeEntity)),
    common_gift_card_service_ts_metadata("design:type", Function),
    common_gift_card_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof SharedDriverService === "undefined" ? Object : SharedDriverService,
        typeof SharedCustomerWalletService === "undefined" ? Object : SharedCustomerWalletService
    ])
], CommonGiftCardService);

;// ../../libs/database/src/lib/order/shared-rider.service.ts
function shared_rider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_rider_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_rider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_rider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_rider_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_rider_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_rider_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function shared_rider_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}







var SharedRiderService = /*#__PURE__*/ function() {
    "use strict";
    function SharedRiderService(repo, driverRepo, riderWalletRepo, riderTransactionRepo) {
        this.repo = repo;
        this.driverRepo = driverRepo;
        this.riderWalletRepo = riderWalletRepo;
        this.riderTransactionRepo = riderTransactionRepo;
    }
    var _proto = SharedRiderService.prototype;
    _proto.findOrCreateUserWithMobileNumber = function findOrCreateUserWithMobileNumber(input) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            return shared_rider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.repo.manager.transaction(/*#__PURE__*/ shared_rider_service_async_to_generator(function(manager) {
                                var user;
                                return shared_rider_service_ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                manager.findOne(CustomerEntity, {
                                                    where: {
                                                        mobileNumber: input.mobileNumber
                                                    },
                                                    withDeleted: true,
                                                    lock: {
                                                        mode: 'pessimistic_write'
                                                    }
                                                })
                                            ];
                                        case 1:
                                            user = _state.sent();
                                            if (!!user) return [
                                                3,
                                                3
                                            ];
                                            user = manager.create(CustomerEntity, {
                                                mobileNumber: input.mobileNumber
                                            });
                                            return [
                                                4,
                                                manager.save(user)
                                            ];
                                        case 2:
                                            _state.sent();
                                            _state.label = 3;
                                        case 3:
                                            if (!(user.deletedAt != null)) return [
                                                3,
                                                6
                                            ];
                                            return [
                                                4,
                                                manager.restore(CustomerEntity, {
                                                    id: user.id
                                                })
                                            ];
                                        case 4:
                                            _state.sent();
                                            return [
                                                4,
                                                manager.findOne(CustomerEntity, {
                                                    where: {
                                                        id: user.id
                                                    }
                                                })
                                            ];
                                        case 5:
                                            //    
                                            user = _state.sent();
                                            _state.label = 6;
                                        case 6:
                                            return [
                                                2,
                                                user
                                            ];
                                    }
                                });
                            }))
                        ];
                    case 1:
                        //     race condition
                        return [
                            2,
                            _state.sent()
                        ];
                }
            });
        })();
    };
    _proto.addDriverToFavoriteList = function addDriverToFavoriteList(input) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            var rider, favoriteDrivers, _;
            return shared_rider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.repo.findOneOrFail({
                                where: {
                                    id: input.riderId
                                },
                                relations: {
                                    favoriteDrivers: true
                                }
                            })
                        ];
                    case 1:
                        rider = _state.sent();
                        favoriteDrivers = rider.favoriteDrivers;
                        if (favoriteDrivers.some(function(driver) {
                            return driver.id === input.driverId;
                        })) {
                            return [
                                2,
                                false
                            ];
                        }
                        _ = favoriteDrivers.push;
                        return [
                            4,
                            _this.driverRepo.createQueryBuilder('driver').where('driver.id = :id', {
                                id: input.driverId
                            }).getOneOrFail()
                        ];
                    case 2:
                        _.apply(favoriteDrivers, [
                            _state.sent()
                        ]);
                        return [
                            4,
                            _this.repo.save(rider)
                        ];
                    case 3:
                        _state.sent();
                        return [
                            2,
                            true
                        ];
                }
            });
        })();
    };
    _proto.findWithDeleted = function findWithDeleted(filter) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            return shared_rider_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.repo.findOne({
                        where: filter,
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.deleteById = function deleteById(id) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            var user;
            return shared_rider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.findById(id)
                        ];
                    case 1:
                        user = _state.sent();
                        return [
                            4,
                            _this.repo.softDelete(id)
                        ];
                    case 2:
                        _state.sent();
                        return [
                            2,
                            user
                        ];
                }
            });
        })();
    };
    _proto.getRiderCreditInCurrency = function getRiderCreditInCurrency(riderId, currency) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            var wallet, _wallet_balance;
            return shared_rider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.riderWalletRepo.findOneBy({
                                riderId: riderId,
                                currency: currency
                            })
                        ];
                    case 1:
                        wallet = _state.sent();
                        return [
                            2,
                            (_wallet_balance = wallet == null ? void 0 : wallet.balance) != null ? _wallet_balance : 0
                        ];
                }
            });
        })();
    };
    _proto.rechargeWallet = function rechargeWallet(transaction) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            var wallet;
            return shared_rider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.riderWalletRepo.findOneBy({
                                riderId: transaction.riderId,
                                currency: transaction.currency
                            })
                        ];
                    case 1:
                        wallet = _state.sent();
                        if (!(wallet == null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.riderWalletRepo.save({
                                balance: transaction.amount,
                                currency: transaction.currency,
                                riderId: transaction.riderId
                            })
                        ];
                    case 2:
                        wallet = _state.sent();
                        return [
                            3,
                            5
                        ];
                    case 3:
                        return [
                            4,
                            _this.riderWalletRepo.update(wallet.id, {
                                balance: transaction.amount + wallet.balance
                            })
                        ];
                    case 4:
                        _state.sent();
                        wallet.balance += transaction.amount;
                        _state.label = 5;
                    case 5:
                        _this.riderTransactionRepo.save(transaction);
                        return [
                            2,
                            wallet
                        ];
                }
            });
        })();
    };
    _proto.restore = function restore(id) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            return shared_rider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.repo.restore(id)
                        ];
                    case 1:
                        _state.sent();
                        return [
                            2,
                            _this.findById(id)
                        ];
                }
            });
        })();
    };
    _proto.findById = function findById(id) {
        var _this = this;
        return shared_rider_service_async_to_generator(function() {
            return shared_rider_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.repo.findOneOrFail({
                        where: {
                            id: id
                        }
                    })
                ];
            });
        })();
    };
    return SharedRiderService;
}();
SharedRiderService = shared_rider_service_ts_decorate([
    (0,common_.Injectable)(),
    shared_rider_service_ts_param(0, (0,typeorm_.InjectRepository)(CustomerEntity)),
    shared_rider_service_ts_param(1, (0,typeorm_.InjectRepository)(DriverEntity)),
    shared_rider_service_ts_param(2, (0,typeorm_.InjectRepository)(RiderWalletEntity)),
    shared_rider_service_ts_param(3, (0,typeorm_.InjectRepository)(RiderTransactionEntity)),
    shared_rider_service_ts_metadata("design:type", Function),
    shared_rider_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SharedRiderService);

;// ../../libs/database/src/lib/customer-wallet/shared-customer-wallet.module.ts
function shared_customer_wallet_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}





var SharedCustomerWalletModule = function SharedCustomerWalletModule() {
    "use strict";
};
SharedCustomerWalletModule = shared_customer_wallet_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            typeorm_.TypeOrmModule.forFeature([
                RiderWalletEntity,
                RiderTransactionEntity
            ])
        ],
        providers: [
            SharedCustomerWalletService
        ],
        exports: [
            SharedCustomerWalletService
        ]
    })
], SharedCustomerWalletModule);

;// ../../libs/database/src/lib/customer-wallet/index.ts



;// ../../libs/database/src/lib/coupon/common-coupon.module.ts
function common_coupon_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
















var CommonCouponModule = function CommonCouponModule() {
    "use strict";
};
CommonCouponModule = common_coupon_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            SharedCustomerWalletModule,
            typeorm_.TypeOrmModule.forFeature([
                TaxiOrderEntity,
                CustomerEntity,
                DriverEntity,
                CouponEntity,
                RiderWalletEntity,
                DriverWalletEntity,
                RiderTransactionEntity,
                DriverTransactionEntity,
                GiftCodeEntity
            ])
        ],
        providers: [
            CommonCouponService,
            CommonGiftCardService,
            SharedRiderService,
            SharedDriverService
        ],
        exports: [
            CommonCouponService,
            CommonGiftCardService
        ]
    })
], CommonCouponModule);

// EXTERNAL MODULE: external "@liaoliaots/nestjs-redis"
var nestjs_redis_ = __webpack_require__(20);
;// ../../libs/database/src/lib/redis/driver-redis.service.ts
function driver_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function driver_redis_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                driver_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                driver_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function driver_redis_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_redis_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function driver_redis_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var DriverRedisService = /*#__PURE__*/ function() {
    "use strict";
    function DriverRedisService(redisService) {
        this.redisService = redisService;
    }
    var _proto = DriverRedisService.prototype;
    _proto.setLocation = function setLocation(driverId, point) {
        var _this = this;
        return driver_redis_service_async_to_generator(function() {
            return driver_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            Promise.all([
                                _this.redisService.getOrThrow().geoadd("driver", point.lng, point.lat, driverId.toString()),
                                _this.redisService.getOrThrow().zadd("driver-location-time", Date.now(), driverId)
                            ])
                        ];
                    case 1:
                        _state.sent();
                        if (point.heading) {
                            _this.redisService.getOrThrow().hset("driver-heading", driverId.toString(), point.heading);
                        }
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.getDriverCoordinate = function getDriverCoordinate(driverId) {
        var _this = this;
        return driver_redis_service_async_to_generator(function() {
            var pos, heading;
            return driver_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().geopos("driver", driverId.toString())
                        ];
                    case 1:
                        pos = _state.sent();
                        return [
                            4,
                            _this.redisService.getOrThrow().hget("driver-heading", driverId.toString())
                        ];
                    case 2:
                        heading = _state.sent();
                        return [
                            2,
                            pos[0] ? {
                                lat: parseFloat(pos[0][1]),
                                lng: parseFloat(pos[0][0]),
                                heading: heading ? parseInt(heading) : undefined
                            } : null
                        ];
                }
            });
        })();
    };
    _proto.getClose = function getClose(point, distance) {
        var _this = this;
        return driver_redis_service_async_to_generator(function() {
            var bare, result;
            return driver_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().call("GEORADIUS", "driver", point.lng, point.lat, distance, "m", "WITHCOORD")
                        ];
                    case 1:
                        bare = _state.sent();
                        result = bare.map(/*#__PURE__*/ driver_redis_service_async_to_generator(function(item) {
                            var heading;
                            return driver_redis_service_ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        return [
                                            4,
                                            _this.redisService.getOrThrow().hget("driver-heading", item[0])
                                        ];
                                    case 1:
                                        heading = _state.sent();
                                        return [
                                            2,
                                            {
                                                driverId: parseInt(item[0]),
                                                location: {
                                                    lat: parseFloat(item[1][1]),
                                                    lng: parseFloat(item[1][0]),
                                                    heading: heading ? parseInt(heading) : undefined
                                                }
                                            }
                                        ];
                                }
                            });
                        }));
                        return [
                            2,
                            Promise.all(result)
                        ];
                }
            });
        })();
    };
    _proto.getAllOnline = function getAllOnline(center, count) {
        var _this = this;
        return driver_redis_service_async_to_generator(function() {
            var bare, times, result;
            return driver_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().call("GEORADIUS", "driver", center.lng.toString(), center.lat.toString(), "22000", "km", "WITHCOORD", "COUNT", count.toString(), "ASC")
                        ];
                    case 1:
                        bare = _state.sent();
                        return [
                            4,
                            _this.redisService.getOrThrow().zrangebyscore("driver-location-time", 0, new Date().getTime(), "WITHSCORES")
                        ];
                    case 2:
                        times = _state.sent();
                        result = bare.map(/*#__PURE__*/ driver_redis_service_async_to_generator(function(x) {
                            var heading;
                            return driver_redis_service_ts_generator(this, function(_state) {
                                switch(_state.label){
                                    case 0:
                                        return [
                                            4,
                                            _this.redisService.getOrThrow().hget("driver-heading", x[0])
                                        ];
                                    case 1:
                                        heading = _state.sent();
                                        return [
                                            2,
                                            {
                                                driverId: parseInt(x[0]),
                                                location: {
                                                    lat: parseFloat(x[1][1]),
                                                    lng: parseFloat(x[1][0]),
                                                    heading: heading ? parseInt(heading) : undefined
                                                },
                                                lastUpdatedAt: new Date(parseInt(times[times.indexOf(x[0]) + 1]))
                                            }
                                        ];
                                }
                            });
                        }));
                        return [
                            2,
                            Promise.all(result)
                        ];
                }
            });
        })();
    };
    _proto.expire = function expire(userId) {
        var _this = this;
        return driver_redis_service_async_to_generator(function() {
            return driver_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().zrem("driver", userId)
                        ];
                    case 1:
                        _state.sent();
                        return [
                            4,
                            _this.redisService.getOrThrow().zrem("driver-location-time", userId)
                        ];
                    case 2:
                        _state.sent();
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.setQrCodeToken = function setQrCodeToken(driverId, token, ttlSeconds) {
        var _this = this;
        return driver_redis_service_async_to_generator(function() {
            var key;
            return driver_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        key = "qr:token:" + token;
                        console.log("key :", key);
                        return [
                            4,
                            _this.redisService.getOrThrow().set(key, driverId.toString(), "EX", ttlSeconds)
                        ];
                    case 1:
                        _state.sent();
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.getDriverIdByToken = function getDriverIdByToken(token) {
        var _this = this;
        return driver_redis_service_async_to_generator(function() {
            var key, value;
            return driver_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        key = "qr:token:" + token;
                        return [
                            4,
                            _this.redisService.getOrThrow().get(key)
                        ];
                    case 1:
                        value = _state.sent();
                        console.log("key :", key, "value :", value);
                        return [
                            2,
                            value ? parseInt(value, 10) : null
                        ];
                }
            });
        })();
    };
    return DriverRedisService;
}();
DriverRedisService = driver_redis_service_ts_decorate([
    (0,common_.Injectable)(),
    driver_redis_service_ts_metadata("design:type", Function),
    driver_redis_service_ts_metadata("design:paramtypes", [
        typeof nestjs_redis_.RedisService === "undefined" ? Object : nestjs_redis_.RedisService
    ])
], DriverRedisService);
var RedisKeys;
(function(RedisKeys) {
    RedisKeys["Driver"] = "driver";
    RedisKeys["DriverHeading"] = "driver-heading";
    RedisKeys["DriverLocationTime"] = "driver-location-time";
})(RedisKeys || (RedisKeys = {}));

;// ../../libs/database/src/lib/redis/order-redis.service.ts
function order_redis_service_array_like_to_array(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function order_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function order_redis_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                order_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                order_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function order_redis_service_unsupported_iterable_to_array(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return order_redis_service_array_like_to_array(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return order_redis_service_array_like_to_array(o, minLen);
}
function order_redis_service_create_for_of_iterator_helper_loose(o, allowArrayLike) {
    var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
    if (it) return (it = it.call(o)).next.bind(it);
    if (Array.isArray(o) || (it = order_redis_service_unsupported_iterable_to_array(o)) || allowArrayLike && o && typeof o.length === "number") {
        if (it) o = it;
        var i = 0;
        return function() {
            if (i >= o.length) {
                return {
                    done: true
                };
            }
            return {
                done: false,
                value: o[i++]
            };
        };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function order_redis_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function order_redis_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function order_redis_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var OrderRedisService = /*#__PURE__*/ function() {
    "use strict";
    function OrderRedisService(redisService, sharedDriverService) {
        this.redisService = redisService;
        this.sharedDriverService = sharedDriverService;
    }
    var _proto = OrderRedisService.prototype;
    _proto.add = function add(request, minutesfromNow) {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            var date, pickupTime;
            return order_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        date = new Date();
                        pickupTime = date.setMinutes(date.getMinutes() + minutesfromNow);
                        return [
                            4,
                            _this.redisService.getOrThrow().geoadd("request", request.points[0].lng, request.points[0].lat, request.id.toString())
                        ];
                    case 1:
                        _state.sent();
                        return [
                            4,
                            _this.redisService.getOrThrow().zadd("request-time", pickupTime, request.id)
                        ];
                    case 2:
                        _state.sent();
                        // await this.redisService.set(`${RedisKeys.Request}:${request.id}`, JSON.stringify(request));
                        return [
                            2,
                            request
                        ];
                }
            });
        })();
    };
    _proto.getForDriver = function getForDriver(driverId, distance) {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            var driverLocation, searchArea, _tmp, requestIds, ts, min, max, _requests, intersection;
            return order_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().geopos("driver", driverId.toString())
                        ];
                    case 1:
                        driverLocation = _state.sent();
                        if (driverLocation[0] == null) {
                            return [
                                2,
                                []
                            ];
                        }
                        if (!(distance != null)) return [
                            3,
                            2
                        ];
                        _tmp = distance;
                        return [
                            3,
                            4
                        ];
                    case 2:
                        return [
                            4,
                            _this.sharedDriverService.getMaxRadiusForDriverServices(driverId)
                        ];
                    case 3:
                        _tmp = _state.sent();
                        _state.label = 4;
                    case 4:
                        searchArea = _tmp;
                        return [
                            4,
                            _this.redisService.getOrThrow().georadius("request", parseFloat(driverLocation[0][0]), parseFloat(driverLocation[0][1]), searchArea, 'm')
                        ];
                    case 5:
                        requestIds = _state.sent();
                        // const requests = [];
                        ts = Math.round(new Date().getTime());
                        min = ts - 20 * 60000;
                        max = ts + 30 * 60000;
                        return [
                            4,
                            _this.redisService.getOrThrow().zrangebyscore("request-time", min, max)
                        ];
                    case 6:
                        _requests = _state.sent();
                        intersection = requestIds.filter(function(x) {
                            return _requests.includes(x);
                        });
                        return [
                            2,
                            intersection.map(function(x) {
                                return x.toString();
                            })
                        ];
                }
            });
        // for (const requestId of intersection) {
        //     const requestString = await this.redisService.get(`${RedisKeys.Request}:${requestId}`);
        //     const request: RequestRedisDTO = JSON.parse(requestString!);
        //     if (request) {
        //         const canDo = await this.sharedDriverService.canDriverDoServiceAndFleet(driverId, request.serviceId, request.fleetIds);
        //         if(canDo) {
        //             requests.push(request);
        //         }
        //     }
        // }
        // return requests;
        })();
    };
    _proto.driverNotified = function driverNotified(requestId, driverIds) {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            var ids, _iterator, _step, id;
            return order_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        ids = driverIds.map(function(driverId) {
                            return driverId.id;
                        });
                        _iterator = order_redis_service_create_for_of_iterator_helper_loose(ids);
                        _state.label = 1;
                    case 1:
                        if (!!(_step = _iterator()).done) return [
                            3,
                            4
                        ];
                        id = _step.value;
                        return [
                            4,
                            _this.redisService.getOrThrow().sadd("request-drivers:" + requestId, id)
                        ];
                    case 2:
                        _state.sent();
                        _state.label = 3;
                    case 3:
                        return [
                            3,
                            1
                        ];
                    case 4:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.getDriversNotified = function getDriversNotified(requestId) {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            var driverIds;
            return order_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().smembers("request-drivers:" + requestId)
                        ];
                    case 1:
                        driverIds = _state.sent();
                        return [
                            2,
                            driverIds.map(function(x) {
                                return parseInt(x);
                            })
                        ];
                }
            });
        })();
    };
    _proto.expire = function expire(requestIds) {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            var _iterator, _step, requestId, zremRequest, zremRequestTime, driversNotified, _iterator1, _step1, driver, delRequestObject;
            return order_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log('Expire', 'OrderRedisService');
                        _iterator = order_redis_service_create_for_of_iterator_helper_loose(requestIds);
                        _state.label = 1;
                    case 1:
                        if (!!(_step = _iterator()).done) return [
                            3,
                            11
                        ];
                        requestId = _step.value;
                        return [
                            4,
                            _this.redisService.getOrThrow().zrem("request", requestId)
                        ];
                    case 2:
                        zremRequest = _state.sent();
                        return [
                            4,
                            _this.redisService.getOrThrow().zrem("request-time", requestId)
                        ];
                    case 3:
                        zremRequestTime = _state.sent();
                        return [
                            4,
                            _this.getDriversNotified(requestId)
                        ];
                    case 4:
                        driversNotified = _state.sent();
                        _iterator1 = order_redis_service_create_for_of_iterator_helper_loose(driversNotified);
                        _state.label = 5;
                    case 5:
                        if (!!(_step1 = _iterator1()).done) return [
                            3,
                            8
                        ];
                        driver = _step1.value;
                        return [
                            4,
                            _this.redisService.getOrThrow().srem("request-drivers:" + requestId, driver)
                        ];
                    case 6:
                        _state.sent();
                        _state.label = 7;
                    case 7:
                        return [
                            3,
                            5
                        ];
                    case 8:
                        return [
                            4,
                            _this.redisService.getOrThrow().del([
                                "request:" + requestId
                            ])
                        ];
                    case 9:
                        delRequestObject = _state.sent();
                        common_.Logger.log("zremRequest: " + zremRequest + " zremRequestTime: " + zremRequestTime + " delRequestObject: " + delRequestObject, 'OrderRedisService');
                        _state.label = 10;
                    case 10:
                        return [
                            3,
                            1
                        ];
                    case 11:
                        common_.Logger.log('Expire done', 'OrderRedisService');
                        return [
                            2
                        ];
                }
            });
        // this.redisService.del(
        //   requestIds.map((id) => `${RedisKeys.Request}:${id}`).join(' '),
        // ); // # This doesn't works for some reason. expire works
        })();
    };
    _proto.getAll = function getAll() {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            return order_redis_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.getRequestsInTimeRange(0, -1)
                ];
            });
        })();
    };
    _proto.getRequestIdsInTimeRage = function getRequestIdsInTimeRage(min, max) {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            return order_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().zrange("request-time", min, max)
                        ];
                    case 1:
                        return [
                            2,
                            _state.sent()
                        ];
                }
            });
        })();
    };
    _proto.getRequestsInTimeRange = function getRequestsInTimeRange(min, max) {
        var _this = this;
        return order_redis_service_async_to_generator(function() {
            var _requestIds;
            return order_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.getRequestIdsInTimeRage(min, max)
                        ];
                    case 1:
                        _requestIds = _state.sent();
                        return [
                            2,
                            _requestIds
                        ];
                }
            });
        // const result: RequestRedisDTO[] = []
        // for(const requestId of _requestIds) {
        //     const request = await this.getOne(requestId);
        //     if(request != null) {
        //         result.push(request);
        //     }
        // }
        // return result;
        })();
    };
    return OrderRedisService;
}();
OrderRedisService = order_redis_service_ts_decorate([
    (0,common_.Injectable)(),
    order_redis_service_ts_metadata("design:type", Function),
    order_redis_service_ts_metadata("design:paramtypes", [
        typeof nestjs_redis_.RedisService === "undefined" ? Object : nestjs_redis_.RedisService,
        typeof SharedDriverService === "undefined" ? Object : SharedDriverService
    ])
], OrderRedisService);
var order_redis_service_RedisKeys;
(function(RedisKeys) {
    RedisKeys["Driver"] = "driver";
    RedisKeys["Request"] = "request";
    RedisKeys["RequestDrivers"] = "request-drivers";
    RedisKeys["RequestTime"] = "request-time";
})(order_redis_service_RedisKeys || (order_redis_service_RedisKeys = {}));

;// ../../libs/database/src/lib/sms/auth-redis.service.ts
function auth_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function auth_redis_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                auth_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                auth_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function auth_redis_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function auth_redis_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function auth_redis_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var AuthRedisService = /*#__PURE__*/ function() {
    "use strict";
    function AuthRedisService(redisService) {
        this.redisService = redisService;
    }
    var _proto = AuthRedisService.prototype;
    _proto.createVerificationCode = function createVerificationCode(input) {
        var _this = this;
        return auth_redis_service_async_to_generator(function() {
            var hash, verifyHash;
            return auth_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        hash = Math.random().toString(36).substring(7);
                        verifyHash = {
                            mobileNumber: input.mobileNumber,
                            countryIso: input.countryIso,
                            code: input.code
                        };
                        return [
                            4,
                            _this.redisService.getOrThrow().hset("verify:" + hash, verifyHash)
                        ];
                    case 1:
                        _state.sent();
                        return [
                            4,
                            _this.redisService.getOrThrow().expire("verify:" + hash, 60 * 3)
                        ];
                    case 2:
                        _state.sent();
                        return [
                            2,
                            {
                                hash: hash
                            }
                        ];
                }
            });
        })();
    };
    _proto.isVerificationCodeValid = function isVerificationCodeValid(hash, code) {
        var _this = this;
        return auth_redis_service_async_to_generator(function() {
            var verifyHash;
            return auth_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().hgetall("verify:" + hash)
                        ];
                    case 1:
                        verifyHash = _state.sent();
                        common_.Logger.log(verifyHash, 'verifyHash');
                        if (!verifyHash) throw new apollo_.ForbiddenError('EXPIRED');
                        if (process.env.DEMO_MODE != null || verifyHash.code == code) {
                            return [
                                2,
                                verifyHash
                            ];
                        } else {
                            throw new apollo_.ForbiddenError('INVALID');
                        }
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.deleteVerificationCode = function deleteVerificationCode(hash) {
        var _this = this;
        return auth_redis_service_async_to_generator(function() {
            return auth_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().del("verify:" + hash)
                        ];
                    case 1:
                        _state.sent();
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return AuthRedisService;
}();
AuthRedisService = auth_redis_service_ts_decorate([
    (0,common_.Injectable)(),
    auth_redis_service_ts_metadata("design:type", Function),
    auth_redis_service_ts_metadata("design:paramtypes", [
        typeof nestjs_redis_.RedisService === "undefined" ? Object : nestjs_redis_.RedisService
    ])
], AuthRedisService);
var VerifyHash = function VerifyHash() {
    "use strict";
};

;// ../../libs/database/src/lib/redis/redis-helper.module.ts
function redis_helper_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}









var RedisHelpersModule = function RedisHelpersModule() {
    "use strict";
};
RedisHelpersModule = redis_helper_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            typeorm_.TypeOrmModule.forFeature([
                DriverEntity,
                DriverWalletEntity,
                DriverTransactionEntity
            ])
        ],
        providers: [
            DriverRedisService,
            OrderRedisService,
            SharedDriverService,
            AuthRedisService
        ],
        exports: [
            DriverRedisService,
            OrderRedisService,
            AuthRedisService
        ]
    })
], RedisHelpersModule);

// EXTERNAL MODULE: external "firebase-admin"
var external_firebase_admin_ = __webpack_require__(21);
;// ../../libs/database/src/lib/order/firebase-notification-service/driver-notification.service.ts
function driver_notification_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function driver_notification_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                driver_notification_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                driver_notification_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function driver_notification_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function driver_notification_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}


var DriverNotificationService = /*#__PURE__*/ function() {
    "use strict";
    function DriverNotificationService() {}
    var _proto = DriverNotificationService.prototype;
    _proto.requests = function requests(driver) {
        return driver_notification_service_async_to_generator(function() {
            var tokens, _process_env_REQUEST_SOUND, notificationResult, error;
            return driver_notification_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        tokens = driver.filter(function(_driver) {
                            var _driver_notificationPlayerId;
                            var _driver_notificationPlayerId_length;
                            return ((_driver_notificationPlayerId_length = (_driver_notificationPlayerId = _driver.notificationPlayerId) == null ? void 0 : _driver_notificationPlayerId.length) != null ? _driver_notificationPlayerId_length : 0) > 0;
                        }).map(function(x) {
                            return x.notificationPlayerId;
                        });
                        if (tokens.length < 1) return [
                            2
                        ];
                        common_.Logger.log(tokens, 'DriverNotificationService.requests.tokens');
                        _state.label = 1;
                    case 1:
                        _state.trys.push([
                            1,
                            3,
                            ,
                            4
                        ]);
                        return [
                            4,
                            (0,external_firebase_admin_.messaging)().sendEachForMulticast({
                                tokens: tokens,
                                android: {
                                    notification: {
                                        sound: 'default',
                                        titleLocKey: 'notification_new_request_title',
                                        bodyLocKey: 'notification_new_request_body',
                                        channelId: 'orders',
                                        icon: 'notification_icon',
                                        priority: 'high'
                                    }
                                },
                                apns: {
                                    payload: {
                                        aps: {
                                            sound: {
                                                critical: true,
                                                name: (_process_env_REQUEST_SOUND = process.env.REQUEST_SOUND) != null ? _process_env_REQUEST_SOUND : 'default',
                                                volume: 1.0
                                            },
                                            badge: 1,
                                            contentAvailable: true,
                                            alert: {
                                                titleLocKey: 'notification_new_request_title',
                                                subtitleLocKey: 'notification_new_request_body'
                                            }
                                        }
                                    }
                                }
                            })
                        ];
                    case 2:
                        notificationResult = _state.sent();
                        common_.Logger.log(notificationResult);
                        return [
                            3,
                            4
                        ];
                    case 3:
                        error = _state.sent();
                        common_.Logger.error(error);
                        return [
                            3,
                            4
                        ];
                    case 4:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.canceled = function canceled(driver) {
        this.sendNotification(driver, 'notification_cancel_title', 'notification_cancel_body');
    };
    _proto.message = function message(driver, message) {
        if (driver.notificationPlayerId == null) return;
        try {
            (0,external_firebase_admin_.messaging)().send({
                token: driver.notificationPlayerId,
                android: {
                    notification: {
                        sound: 'default',
                        titleLocKey: 'notification_new_message_title',
                        body: message.content,
                        channelId: 'message',
                        icon: 'notification_icon'
                    }
                },
                apns: {
                    payload: {
                        aps: {
                            sound: 'default',
                            badge: 1,
                            contentAvailable: true,
                            alert: {
                                titleLocKey: 'notification_new_message_title',
                                subtitle: message.content
                            }
                        }
                    }
                }
            });
        } catch (error) {
            common_.Logger.log(JSON.stringify(error));
        }
    };
    _proto.paid = function paid(driver) {
        this.sendNotification(driver, 'notification_paid_title', 'notification_paid_body');
    };
    _proto.assigned = function assigned(driver, time, from, to) {
        this.sendNotification(driver, 'notification_assigned_title', 'notification_assigned_body', [
            time,
            from,
            to
        ]);
    };
    _proto.upcomingBooking = function upcomingBooking(driver) {
        this.sendNotification(driver, 'notification_upcoming_ride_title', 'notification_upcoming_ride_body');
    };
    _proto.sendNotification = function sendNotification(driver, titleLocKey, bodyLocKey, bodyLocArgs, sound, channelId) {
        if (bodyLocArgs === void 0) bodyLocArgs = [];
        if (sound === void 0) sound = 'default';
        if (channelId === void 0) channelId = 'tripEvents';
        if (driver.notificationPlayerId == null || process.env['NODE_ENV'] === 'dev') return;
        try {
            (0,external_firebase_admin_.messaging)().send({
                token: driver.notificationPlayerId,
                android: {
                    notification: {
                        sound: sound,
                        titleLocKey: titleLocKey,
                        bodyLocKey: bodyLocKey,
                        bodyLocArgs: bodyLocArgs,
                        channelId: channelId,
                        icon: 'notification_icon'
                    }
                },
                apns: {
                    payload: {
                        aps: {
                            sound: sound,
                            alert: {
                                titleLocKey: titleLocKey,
                                subtitleLocKey: bodyLocKey,
                                subtitleLocArgs: bodyLocArgs
                            }
                        }
                    }
                }
            });
        } catch (error) {
            common_.Logger.log(JSON.stringify(error));
        }
    };
    return DriverNotificationService;
}();
DriverNotificationService = driver_notification_service_ts_decorate([
    (0,common_.Injectable)()
], DriverNotificationService);

;// ../../libs/database/src/lib/order/firebase-notification-service/rider-notification.service.ts
function rider_notification_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}


var RiderNotificationService = /*#__PURE__*/ function() {
    "use strict";
    function RiderNotificationService() {}
    var _proto = RiderNotificationService.prototype;
    _proto.message = function message(rider, message) {
        if (rider.notificationPlayerId == null) return;
        try {
            (0,external_firebase_admin_.messaging)().send({
                token: rider.notificationPlayerId,
                android: {
                    notification: {
                        sound: 'default',
                        titleLocKey: 'notification_new_message_title',
                        body: message.content,
                        channelId: 'message',
                        icon: 'notification_icon'
                    }
                },
                apns: {
                    payload: {
                        aps: {
                            sound: 'default',
                            badge: 1,
                            alert: {
                                titleLocKey: 'notification_new_message_title',
                                subtitle: message.content
                            }
                        }
                    }
                }
            });
        } catch (error) {
            common_.Logger.log(JSON.stringify(error));
        }
    };
    _proto.canceled = function canceled(rider) {
        this.sendNotification(rider, 'notification_cancel_title', 'notification_cancel_body', 'Canceled', 'Your trip has been canceled');
    };
    _proto.accepted = function accepted(rider) {
        this.sendNotification(rider, 'notification_found_title', 'notification_found_body', 'Accepted', 'A driver has accepted your requet');
    };
    _proto.bookingAssigned = function bookingAssigned(rider, time) {
        this.sendNotification(rider, 'notification_booking_assigned_title', 'notification_booking_assigned_body', 'Assigned', 'A driver has been assigned to your trip', [
            time
        ]);
    };
    _proto.arrived = function arrived(rider) {
        this.sendNotification(rider, 'notification_arrived_title', 'notification_arrived_body', 'Arrived', 'Driver has arrived to your location');
    };
    _proto.started = function started(rider) {
        this.sendNotification(rider, 'notification_started_title', 'notification_started_body', 'Started', 'Trip has been started');
    };
    _proto.waitingForPostPay = function waitingForPostPay(rider) {
        this.sendNotification(rider, 'notification_waiting_for_pay_title', 'notification_waiting_for_pay_body', 'Finished', 'Waiting for post-pay');
    };
    _proto.finished = function finished(rider) {
        this.sendNotification(rider, 'notification_finished_title', 'notification_finished_body', 'Finished', 'Trip has been finished.');
    };
    _proto.sendNotification = function sendNotification(rider, titleLocKey, bodyLocKey, titleDefault, bodyDefault, bodyLocArgs, sound, channelId) {
        if (bodyLocArgs === void 0) bodyLocArgs = [];
        if (sound === void 0) sound = 'default';
        if (channelId === void 0) channelId = 'tripEvents';
        if (rider.notificationPlayerId == null || rider.notificationPlayerId.length < 5) {
            return;
        }
        try {
            (0,external_firebase_admin_.messaging)().send({
                token: rider.notificationPlayerId,
                android: {
                    notification: {
                        sound: sound,
                        titleLocKey: titleLocKey,
                        bodyLocKey: bodyLocKey,
                        bodyLocArgs: bodyLocArgs,
                        channelId: channelId,
                        icon: 'notification_icon'
                    }
                },
                apns: {
                    payload: {
                        aps: {
                            sound: sound,
                            alert: {
                                titleLocKey: titleLocKey,
                                subtitleLocKey: bodyLocKey,
                                subtitleLocArgs: bodyLocArgs
                            }
                        }
                    }
                },
                webpush: {
                    notification: {
                        title: titleDefault,
                        body: bodyDefault
                    }
                }
            });
        } catch (error) {
            common_.Logger.log(JSON.stringify(error));
        }
    };
    return RiderNotificationService;
}();
RiderNotificationService = rider_notification_service_ts_decorate([
    (0,common_.Injectable)()
], RiderNotificationService);

// EXTERNAL MODULE: external "license-verify"
var external_license_verify_ = __webpack_require__(22);
;// ../../libs/database/src/lib/order/firebase-notification-service/firebase-notification-service.module.ts
function firebase_notification_service_module_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function firebase_notification_service_module_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                firebase_notification_service_module_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                firebase_notification_service_module_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function firebase_notification_service_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function firebase_notification_service_module_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}




var FirebaseNotificationModule = /*#__PURE__*/ function() {
    "use strict";
    function FirebaseNotificationModule() {}
    FirebaseNotificationModule.register = function register() {
        return firebase_notification_service_module_async_to_generator(function() {
            var providers, _process_env_NODE_ENV;
            return firebase_notification_service_module_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        providers = [];
                        return [
                            4,
                            (0,external_license_verify_.getConfig)((_process_env_NODE_ENV = process.env.NODE_ENV) != null ? _process_env_NODE_ENV : 'production')
                        ];
                    case 1:
                        if (_state.sent()) {
                            providers = [
                                DriverNotificationService,
                                RiderNotificationService
                            ];
                        }
                        return [
                            2,
                            {
                                module: FirebaseNotificationModule,
                                imports: [],
                                providers: providers,
                                exports: providers
                            }
                        ];
                }
            });
        })();
    };
    return FirebaseNotificationModule;
}();
FirebaseNotificationModule = firebase_notification_service_module_ts_decorate([
    (0,common_.Module)({})
], FirebaseNotificationModule);

;// ../../libs/database/src/lib/order/region/region.service.ts
function region_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function region_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                region_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                region_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function region_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function region_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function region_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function region_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}




var RegionService = /*#__PURE__*/ function() {
    "use strict";
    function RegionService(regionRepository) {
        this.regionRepository = regionRepository;
    }
    var _proto = RegionService.prototype;
    _proto.getRegionWithPoint = function getRegionWithPoint(point) {
        var _this = this;
        return region_service_async_to_generator(function() {
            var regions;
            return region_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.regionRepository.query("SELECT * FROM region WHERE enabled=TRUE AND ST_Within(st_geomfromtext('POINT(? ?)'), region.location)", [
                                point.lng,
                                point.lat
                            ])
                        ];
                    case 1:
                        regions = _state.sent();
                        return [
                            2,
                            regions
                        ];
                }
            });
        })();
    };
    _proto.getRegionServices = function getRegionServices(regionId) {
        var _this = this;
        return region_service_async_to_generator(function() {
            var _this1, _services;
            return region_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.regionRepository.findOne({
                                where: {
                                    id: regionId
                                },
                                relations: [
                                    'services'
                                ]
                            })
                        ];
                    case 1:
                        return [
                            2,
                            (_services = (_this1 = _state.sent()) == null ? void 0 : _this1.services) != null ? _services : []
                        ];
                }
            });
        })();
    };
    return RegionService;
}();
RegionService = region_service_ts_decorate([
    (0,common_.Injectable)(),
    region_service_ts_param(0, (0,typeorm_.InjectRepository)(RegionEntity)),
    region_service_ts_metadata("design:type", Function),
    region_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], RegionService);

;// ../../libs/database/src/lib/order/region/region.module.ts
function region_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}




var RegionModule = function RegionModule() {
    "use strict";
};
RegionModule = region_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            typeorm_.TypeOrmModule.forFeature([
                RegionEntity
            ])
        ],
        providers: [
            RegionService
        ],
        exports: [
            RegionService
        ]
    })
], RegionModule);

;// ../../libs/database/src/lib/order/shared-fleet.service.ts
function shared_fleet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_fleet_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_fleet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_fleet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_fleet_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_fleet_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_fleet_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function shared_fleet_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}






var SharedFleetService = /*#__PURE__*/ function() {
    "use strict";
    function SharedFleetService(fleetRepository, fleetWalletRepository, fleetTransactionEntity) {
        this.fleetRepository = fleetRepository;
        this.fleetWalletRepository = fleetWalletRepository;
        this.fleetTransactionEntity = fleetTransactionEntity;
    }
    var _proto = SharedFleetService.prototype;
    _proto.rechargeWallet = function rechargeWallet(transaction) {
        var _this = this;
        return shared_fleet_service_async_to_generator(function() {
            var wallet;
            return shared_fleet_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.fleetWalletRepository.findOneBy({
                                fleetId: transaction.fleetId,
                                currency: transaction.currency
                            })
                        ];
                    case 1:
                        wallet = _state.sent();
                        if (!(wallet == null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.fleetWalletRepository.save({
                                fleetId: transaction.fleetId,
                                balance: transaction.amount,
                                currency: transaction.currency
                            })
                        ];
                    case 2:
                        wallet = _state.sent();
                        return [
                            3,
                            5
                        ];
                    case 3:
                        return [
                            4,
                            _this.fleetWalletRepository.update(wallet.id, {
                                balance: transaction.amount + wallet.balance
                            })
                        ];
                    case 4:
                        _state.sent();
                        wallet.balance += transaction.amount;
                        _state.label = 5;
                    case 5:
                        _this.fleetTransactionEntity.save(transaction);
                        return [
                            2,
                            wallet
                        ];
                }
            });
        })();
    };
    _proto.getFleetIdsInPoint = function getFleetIdsInPoint(point) {
        var _this = this;
        return shared_fleet_service_async_to_generator(function() {
            var fleets;
            return shared_fleet_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.fleetRepository.query("SELECT id FROM fleet WHERE ST_Within(st_geomfromtext('POINT(? ?)'), fleet.exclusivityAreas)", [
                                point.lng,
                                point.lat
                            ])
                        ];
                    case 1:
                        fleets = _state.sent();
                        return [
                            2,
                            fleets.map(function(fleet) {
                                return fleet.id;
                            })
                        ];
                }
            });
        })();
    };
    _proto.getFleetById = function getFleetById(id) {
        var _this = this;
        return shared_fleet_service_async_to_generator(function() {
            return shared_fleet_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.fleetRepository.findOneBy({
                        id: id
                    })
                ];
            });
        })();
    };
    _proto.getFleetMultiplierInPoint = function getFleetMultiplierInPoint(point) {
        var _this = this;
        return shared_fleet_service_async_to_generator(function() {
            var fleetIds, fleet, _fleet_feeMultiplier;
            return shared_fleet_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.getFleetIdsInPoint(point)
                        ];
                    case 1:
                        fleetIds = _state.sent();
                        if (fleetIds.length === 0) {
                            return [
                                2,
                                1
                            ];
                        }
                        return [
                            4,
                            _this.getFleetById(fleetIds[0])
                        ];
                    case 2:
                        fleet = _state.sent();
                        return [
                            2,
                            (_fleet_feeMultiplier = fleet == null ? void 0 : fleet.feeMultiplier) != null ? _fleet_feeMultiplier : 1
                        ];
                }
            });
        })();
    };
    return SharedFleetService;
}();
SharedFleetService = shared_fleet_service_ts_decorate([
    (0,common_.Injectable)(),
    shared_fleet_service_ts_param(0, (0,typeorm_.InjectRepository)(FleetEntity)),
    shared_fleet_service_ts_param(1, (0,typeorm_.InjectRepository)(FleetWalletEntity)),
    shared_fleet_service_ts_param(2, (0,typeorm_.InjectRepository)(FleetTransactionEntity)),
    shared_fleet_service_ts_metadata("design:type", Function),
    shared_fleet_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SharedFleetService);

;// ../../libs/database/src/lib/order/shared-provider.service.ts
function shared_provider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_provider_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_provider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_provider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_provider_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_provider_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_provider_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function shared_provider_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}





var SharedProviderService = /*#__PURE__*/ function() {
    "use strict";
    function SharedProviderService(providerWalletRepo, providerTransactionRepo) {
        this.providerWalletRepo = providerWalletRepo;
        this.providerTransactionRepo = providerTransactionRepo;
    }
    var _proto = SharedProviderService.prototype;
    _proto.rechargeWallet = function rechargeWallet(transaction) {
        var _this = this;
        return shared_provider_service_async_to_generator(function() {
            var wallet;
            return shared_provider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.providerWalletRepo.findOneBy({
                                currency: transaction.currency
                            })
                        ];
                    case 1:
                        wallet = _state.sent();
                        if (!(wallet == null)) return [
                            3,
                            3
                        ];
                        return [
                            4,
                            _this.providerWalletRepo.save({
                                balance: transaction.amount,
                                currency: transaction.currency
                            })
                        ];
                    case 2:
                        wallet = _state.sent();
                        return [
                            3,
                            5
                        ];
                    case 3:
                        return [
                            4,
                            _this.providerWalletRepo.update(wallet.id, {
                                balance: transaction.amount + wallet.balance
                            })
                        ];
                    case 4:
                        _state.sent();
                        wallet.balance += transaction.amount;
                        _state.label = 5;
                    case 5:
                        if (transaction.amount != 0) {
                            common_.Logger.log("Saving transaction " + JSON.stringify(transaction));
                            _this.providerTransactionRepo.save(transaction);
                        }
                        return [
                            2,
                            wallet
                        ];
                }
            });
        })();
    };
    return SharedProviderService;
}();
SharedProviderService = shared_provider_service_ts_decorate([
    (0,common_.Injectable)(),
    shared_provider_service_ts_param(0, (0,typeorm_.InjectRepository)(ProviderWalletEntity)),
    shared_provider_service_ts_param(1, (0,typeorm_.InjectRepository)(ProviderTransactionEntity)),
    shared_provider_service_ts_metadata("design:type", Function),
    shared_provider_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SharedProviderService);

// EXTERNAL MODULE: external "rxjs"
var external_rxjs_ = __webpack_require__(23);
;// ../../libs/database/src/lib/order/shared-order.service.ts
function shared_order_service_array_like_to_array(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function shared_order_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_order_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_order_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_order_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function _extends() {
    _extends = Object.assign || function(target) {
        for(var i = 1; i < arguments.length; i++){
            var source = arguments[i];
            for(var key in source){
                if (Object.prototype.hasOwnProperty.call(source, key)) {
                    target[key] = source[key];
                }
            }
        }
        return target;
    };
    return _extends.apply(this, arguments);
}
function _object_without_properties_loose(source, excluded) {
    if (source == null) return {};
    var target = {};
    var sourceKeys = Object.keys(source);
    var key, i;
    for(i = 0; i < sourceKeys.length; i++){
        key = sourceKeys[i];
        if (excluded.indexOf(key) >= 0) continue;
        target[key] = source[key];
    }
    return target;
}
function shared_order_service_unsupported_iterable_to_array(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return shared_order_service_array_like_to_array(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return shared_order_service_array_like_to_array(o, minLen);
}
function shared_order_service_create_for_of_iterator_helper_loose(o, allowArrayLike) {
    var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
    if (it) return (it = it.call(o)).next.bind(it);
    if (Array.isArray(o) || (it = shared_order_service_unsupported_iterable_to_array(o)) || allowArrayLike && o && typeof o.length === "number") {
        if (it) o = it;
        var i = 0;
        return function() {
            if (i >= o.length) {
                return {
                    done: true
                };
            }
            return {
                done: false,
                value: o[i++]
            };
        };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function shared_order_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_order_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_order_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function shared_order_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}








































var SharedOrderService = /*#__PURE__*/ function() {
    "use strict";
    function SharedOrderService(orderRepository, activityRepository, regionService, serviceCategoryRepository, serviceOptionRepository, zonePriceRepository, paymentRepository, googleServices, servicesService, riderService, sharedRiderWalletService, driverRedisService, orderRedisService, driverService, sharedProviderService, sharedFleetService, commonCouponService, pubSub, driverNotificationService, riderNotificationService, httpService) {
        this.orderRepository = orderRepository;
        this.activityRepository = activityRepository;
        this.regionService = regionService;
        this.serviceCategoryRepository = serviceCategoryRepository;
        this.serviceOptionRepository = serviceOptionRepository;
        this.zonePriceRepository = zonePriceRepository;
        this.paymentRepository = paymentRepository;
        this.googleServices = googleServices;
        this.servicesService = servicesService;
        this.riderService = riderService;
        this.sharedRiderWalletService = sharedRiderWalletService;
        this.driverRedisService = driverRedisService;
        this.orderRedisService = orderRedisService;
        this.driverService = driverService;
        this.sharedProviderService = sharedProviderService;
        this.sharedFleetService = sharedFleetService;
        this.commonCouponService = commonCouponService;
        this.pubSub = pubSub;
        this.driverNotificationService = driverNotificationService;
        this.riderNotificationService = riderNotificationService;
        this.httpService = httpService;
    }
    var _proto = SharedOrderService.prototype;
    _proto.getZonePricingsForPoints = function getZonePricingsForPoints(from, to) {
        var _this = this;
        return shared_order_service_async_to_generator(function() {
            var pricings;
            return shared_order_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.zonePriceRepository.query("SELECT * FROM zone_price WHERE ST_Within(st_geomfromtext('POINT(? ?)'), `from`) AND ST_Within(st_geomfromtext('POINT(? ?)'), `to`)", [
                                from.lng,
                                from.lat,
                                to.lng,
                                to.lat
                            ])
                        ];
                    case 1:
                        pricings = _state.sent();
                        return [
                            4,
                            _this.zonePriceRepository.find({
                                where: {
                                    id: (0,external_typeorm_.In)(pricings.map(function(p) {
                                        return p.id;
                                    }))
                                },
                                relations: {
                                    services: true,
                                    fleets: true
                                }
                            })
                        ];
                    case 2:
                        pricings = _state.sent();
                        return [
                            2,
                            pricings
                        ];
                }
            });
        })();
    };
    _proto.calculateFare = function calculateFare(input) {
        var _this = this;
        return shared_order_service_async_to_generator(function() {
            var zonePricings, regions, servicesInRegion, _input_twoWay, metrics, _tmp, cats, feeMultiplier, _cats;
            return shared_order_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log(input, "SharedOrderService.calculateFare.input");
                        zonePricings = [];
                        if (!(input.points.length == 2)) return [
                            3,
                            2
                        ];
                        return [
                            4,
                            _this.getZonePricingsForPoints(input.points[0], input.points[1])
                        ];
                    case 1:
                        zonePricings = _state.sent();
                        _state.label = 2;
                    case 2:
                        return [
                            4,
                            _this.regionService.getRegionWithPoint(input.points[0])
                        ];
                    case 3:
                        regions = _state.sent();
                        if (regions.length < 1) {
                            throw new apollo_.ForbiddenError("REGION_UNSUPPORTED");
                        }
                        return [
                            4,
                            _this.regionService.getRegionServices(regions[0].id)
                        ];
                    case 4:
                        servicesInRegion = _state.sent();
                        if (servicesInRegion.length < 1) {
                            throw new apollo_.ForbiddenError("NO_SERVICE_IN_REGION");
                        }
                        if (((_input_twoWay = input.twoWay) != null ? _input_twoWay : false) && input.points.length > 1) {
                            input.points.push(input.points[0]);
                        }
                        if (!(servicesInRegion.findIndex(function(x) {
                            return x.perHundredMeters > 0;
                        }) > -1)) return [
                            3,
                            6
                        ];
                        return [
                            4,
                            _this.googleServices.getSumDistanceAndDuration(input.points)
                        ];
                    case 5:
                        _tmp = _state.sent();
                        return [
                            3,
                            7
                        ];
                    case 6:
                        _tmp = {
                            distance: 0,
                            duration: 0,
                            directions: []
                        };
                        _state.label = 7;
                    case 7:
                        metrics = _tmp;
                        return [
                            4,
                            _this.serviceCategoryRepository.find({
                                relations: {
                                    services: {
                                        media: true,
                                        options: true
                                    }
                                }
                            })
                        ];
                    case 8:
                        cats = _state.sent();
                        return [
                            4,
                            _this.sharedFleetService.getFleetMultiplierInPoint(input.points[0])
                        ];
                    case 9:
                        feeMultiplier = _state.sent();
                        _cats = cats.map(function(cat) {
                            var services = cat.services, _cat = _object_without_properties_loose(cat, [
                                "services"
                            ]);
                            var _services = services.filter(function(x) {
                                return servicesInRegion.filter(function(y) {
                                    return y.id == x.id;
                                }).length > 0;
                            }).filter(function(x) {
                                return x.orderTypes.includes(input.orderType);
                            }).map(function(service) {
                                var cost = 0;
                                var zonePricesWithService = zonePricings.filter(function(zone) {
                                    return zone.services.find(function(_service) {
                                        return _service.id == service.id;
                                    });
                                });
                                if (zonePricesWithService.length > 0) {
                                    cost = zonePricesWithService[0].cost;
                                    var eta = new Date();
                                    for(var _iterator = shared_order_service_create_for_of_iterator_helper_loose(zonePricesWithService[0].timeMultipliers), _step; !(_step = _iterator()).done;){
                                        var _multiplier = _step.value;
                                        var startMinutes = parseInt(_multiplier.startTime.split(":")[0]) * 60 + parseInt(_multiplier.startTime.split(":")[1]);
                                        var nowMinutes = eta.getHours() * 60 + eta.getMinutes();
                                        var endMinutes = parseInt(_multiplier.endTime.split(":")[0]) * 60 + parseInt(_multiplier.endTime.split(":")[1]);
                                        if (nowMinutes >= startMinutes && nowMinutes <= endMinutes) {
                                            cost *= _multiplier.multiply;
                                        }
                                    }
                                } else {
                                    cost = _this.servicesService.calculateCost(service, metrics.distance, metrics.duration, new Date(), feeMultiplier, false);
                                }
                                var _input_waitTime;
                                var waitFee = service.perMinuteWait * ((_input_waitTime = input.waitTime) != null ? _input_waitTime : 0);
                                if (input.coupon == null) {
                                    return _extends({}, service, {
                                        cost: cost + waitFee
                                    });
                                } else {
                                    var costAfterCoupon = _this.commonCouponService.applyCouponOnPrice(input.coupon, cost + waitFee);
                                    return _extends({}, service, {
                                        cost: cost + waitFee,
                                        costAfterCoupon: costAfterCoupon
                                    });
                                }
                            });
                            return _extends({}, _cat, {
                                services: _services
                            });
                        }).filter(function(x) {
                            return x.services.length > 0;
                        });
                        common_.Logger.log(_cats, "SharedOrderService.calculateFare.cats");
                        common_.Logger.log(metrics, "SharedOrderService.calculateFare.metrics");
                        if (_cats.length == 0) {
                            throw new apollo_.ForbiddenError("NO_SERVICE_IN_REGION");
                        }
                        return [
                            2,
                            _extends({}, metrics, {
                                currency: regions[0].currency,
                                services: _cats
                            })
                        ];
                }
            });
        })();
    };
    _proto.createOrder = function createOrder(input) {
        var _this = this;
        return shared_order_service_async_to_generator(function() {
            var _this1, zonePricings, service, closeDrivers, driverIds, fleetIdsInPoint, driversWithService, optionFee, options, _input_twoWay, paidOptions, metrics, _tmp, eta, rider, _tmp1, _rider_isResident, isResident, _feeMultiplier, feeMultiplier, _tmp2, cost, _input_waitMinutes, zonePricing, eta1, _iterator, _step, _multiplier, startMinutes, nowMinutes, endMinutes, regions, shouldPrePay, paidAmount, balance, amountNeedsToBePrePaid, _input_waitMinutes1, _input_waitMinutes2, orderObject, order, activityType, _input_intervalMinutes;
            return shared_order_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log(input, "SharedOrderService.createOrder.input");
                        zonePricings = [];
                        if (!(input.points.length == 2)) return [
                            3,
                            2
                        ];
                        return [
                            4,
                            _this.getZonePricingsForPoints(input.points[0], input.points[1])
                        ];
                    case 1:
                        zonePricings = _state.sent();
                        _state.label = 2;
                    case 2:
                        return [
                            4,
                            _this.servicesService.getWithId(input.serviceId)
                        ];
                    case 3:
                        service = _state.sent();
                        if (service == undefined) {
                            throw new apollo_.ForbiddenError("SERVICE_NOT_FOUND");
                        }
                        return [
                            4,
                            _this.driverRedisService.getClose(input.points[0], service.searchRadius)
                        ];
                    case 4:
                        closeDrivers = _state.sent();
                        common_.Logger.log(closeDrivers, "SharedOrderService.createOrder.closeDrivers");
                        driverIds = closeDrivers.map(function(x) {
                            return x.driverId;
                        });
                        return [
                            4,
                            _this.sharedFleetService.getFleetIdsInPoint(input.points[0])
                        ];
                    case 5:
                        fleetIdsInPoint = _state.sent();
                        return [
                            4,
                            _this.driverService.getOnlineDriversWithServiceId(driverIds, input.serviceId, fleetIdsInPoint)
                        ];
                    case 6:
                        driversWithService = _state.sent();
                        optionFee = 0;
                        options = [];
                        if (!(input.optionIds != null)) return [
                            3,
                            8
                        ];
                        return [
                            4,
                            _this.serviceOptionRepository.findByIds(input.optionIds)
                        ];
                    case 7:
                        options = _state.sent();
                        if (((_input_twoWay = input.twoWay) != null ? _input_twoWay : false) && input.points.length > 1) {
                            input.points.push(input.points[0]);
                            input.addresses.push(input.addresses[0]);
                        }
                        paidOptions = options.filter(function(option) {
                            return option.type == ServiceOptionType.Paid;
                        });
                        optionFee = paidOptions.length == 0 ? 0 : paidOptions.map(function(option) {
                            var _option_additionalFee;
                            return (_option_additionalFee = option.additionalFee) != null ? _option_additionalFee : 0;
                        }).reduce(function(previous, current) {
                            return current += previous;
                        });
                        _state.label = 8;
                    case 8:
                        if (!(service.perHundredMeters > 0)) return [
                            3,
                            10
                        ];
                        return [
                            4,
                            _this.googleServices.getSumDistanceAndDuration(input.points)
                        ];
                    case 9:
                        _tmp = _state.sent();
                        return [
                            3,
                            11
                        ];
                    case 10:
                        _tmp = {
                            distance: 0,
                            duration: 0,
                            directions: []
                        };
                        _state.label = 11;
                    case 11:
                        metrics = _tmp;
                        eta = new Date(new Date().getTime() + (input.intervalMinutes | 0) * 60 * 1000);
                        if (!(input.riderId == null)) return [
                            3,
                            12
                        ];
                        _tmp1 = null;
                        return [
                            3,
                            14
                        ];
                    case 12:
                        return [
                            4,
                            _this.riderService.repo.findOneBy({
                                id: input.riderId
                            })
                        ];
                    case 13:
                        _tmp1 = _state.sent();
                        _state.label = 14;
                    case 14:
                        rider = _tmp1;
                        isResident = (_rider_isResident = rider == null ? void 0 : rider.isResident) != null ? _rider_isResident : process.env.MOTAXI == null;
                        if (!(fleetIdsInPoint.length == 0)) return [
                            3,
                            15
                        ];
                        _tmp2 = 1;
                        return [
                            3,
                            17
                        ];
                    case 15:
                        return [
                            4,
                            _this.sharedFleetService.getFleetById(fleetIdsInPoint[0])
                        ];
                    case 16:
                        _tmp2 = (_feeMultiplier = (_this1 = _state.sent()) == null ? void 0 : _this1.feeMultiplier) != null ? _feeMultiplier : 1;
                        _state.label = 17;
                    case 17:
                        feeMultiplier = _tmp2;
                        cost = _this.servicesService.calculateCost(service, metrics.distance, metrics.duration, eta, feeMultiplier, isResident);
                        optionFee + service.perMinuteWait * ((_input_waitMinutes = input.waitMinutes) != null ? _input_waitMinutes : 0);
                        zonePricing = zonePricings.filter(function(price) {
                            return price.services.filter(function(service) {
                                return service.id == input.serviceId;
                            }).length > 0;
                        });
                        common_.Logger.log(zonePricing, "SharedOrderService.createOrder.zonePricing");
                        if (zonePricing.length > 0) {
                            cost = zonePricing[0].cost;
                            eta1 = new Date();
                            for(_iterator = shared_order_service_create_for_of_iterator_helper_loose(zonePricings[0].timeMultipliers); !(_step = _iterator()).done;){
                                _multiplier = _step.value;
                                startMinutes = parseInt(_multiplier.startTime.split(":")[0]) * 60 + parseInt(_multiplier.startTime.split(":")[1]);
                                nowMinutes = eta1.getHours() * 60 + eta1.getMinutes();
                                endMinutes = parseInt(_multiplier.endTime.split(":")[0]) * 60 + parseInt(_multiplier.endTime.split(":")[1]);
                                if (nowMinutes >= startMinutes && nowMinutes <= endMinutes) {
                                    cost *= _multiplier.multiply;
                                }
                            }
                        }
                        return [
                            4,
                            _this.regionService.getRegionWithPoint(input.points[0])
                        ];
                    case 18:
                        regions = _state.sent();
                        common_.Logger.log(regions, "SharedOrderService.createOrder.regions");
                        if (service.maximumDestinationDistance != 0 && metrics.distance > service.maximumDestinationDistance) {
                            throw new apollo_.ForbiddenError("DISTANCE_TOO_FAR");
                        }
                        shouldPrePay = false;
                        paidAmount = 0;
                        if (!(service.prepayPercent > 0 && input.riderId != null)) return [
                            3,
                            20
                        ];
                        return [
                            4,
                            _this.sharedRiderWalletService.getRiderCreditInCurrency(input.riderId, regions[0].currency)
                        ];
                    case 19:
                        balance = _state.sent();
                        amountNeedsToBePrePaid = cost * service.prepayPercent / 100;
                        if (balance < amountNeedsToBePrePaid) {
                            shouldPrePay = true;
                        } else {
                        // await this.riderService.rechargeWallet({
                        //     amount: -amountNeedsToBePrePaid,
                        //     currency: regions[0].currency,
                        //     action: TransactionAction.Deduct,
                        //     deductType: RiderDeductTransactionType.OrderFee,
                        //     status: TransactionStatus.Done,
                        //     riderId: input.riderId
                        // });
                        // paidAmount = amountNeedsToBePrePaid;
                        }
                        _state.label = 20;
                    case 20:
                        common_.Logger.log("shouldPrePay: " + shouldPrePay, "createOrder");
                        common_.Logger.log("cost: " + cost, "createOrder");
                        common_.Logger.log("paidAmount: " + paidAmount, "createOrder");
                        common_.Logger.log("optionFee: " + optionFee, "createOrder");
                        common_.Logger.log("eta: " + eta, "createOrder");
                        orderObject = _this.orderRepository.create({
                            serviceId: input.serviceId,
                            currency: regions[0].currency,
                            riderId: input.riderId,
                            points: input.points,
                            addresses: input.addresses.map(function(address) {
                                return address.replace(", ", "-");
                            }),
                            distanceBest: metrics.distance,
                            durationBest: metrics.duration,
                            directions: metrics.directions,
                            paymentMode: input.paymentMode,
                            driverId: input.driverId,
                            savedPaymentMethodId: input.paymentMode == PaymentMode.SavedPaymentMethod ? input.paymentMethodId : undefined,
                            paymentGatewayId: input.paymentMode == PaymentMode.PaymentGateway ? input.paymentMethodId : undefined,
                            status: shouldPrePay ? OrderStatus.WaitingForPrePay : input.intervalMinutes > 30 ? OrderStatus.Booked : driversWithService.length < 1 ? OrderStatus.NoCloseFound : OrderStatus.Requested,
                            paidAmount: paidAmount,
                            costBest: cost,
                            costAfterCoupon: cost,
                            expectedTimestamp: eta,
                            operatorId: input.operatorId,
                            waitMinutes: (_input_waitMinutes1 = input.waitMinutes) != null ? _input_waitMinutes1 : 0,
                            waitCost: service.perMinuteWait * ((_input_waitMinutes2 = input.waitMinutes) != null ? _input_waitMinutes2 : 0),
                            rideOptionsCost: optionFee,
                            fleetId: input.fleetId,
                            providerShare: service.providerShareFlat + service.providerSharePercent * cost / 100,
                            options: options
                        });
                        common_.Logger.log(orderObject, "SharedOrderService.createOrder.orderObject");
                        return [
                            4,
                            _this.orderRepository.save(orderObject)
                        ];
                    case 21:
                        order = _state.sent();
                        if (!(input.couponCode != null && input.couponCode != "" && rider != null)) return [
                            3,
                            23
                        ];
                        return [
                            4,
                            _this.commonCouponService.applyCoupon(input.couponCode, order.id, rider.id)
                        ];
                    case 22:
                        order = _state.sent();
                        _state.label = 23;
                    case 23:
                        activityType = RequestActivityType.RequestedByRider;
                        if (input.intervalMinutes > 0) {
                            activityType = input.operatorId == null ? activityType = RequestActivityType.BookedByRider : RequestActivityType.BookedByOperator;
                        } else {
                            activityType = input.operatorId == null ? activityType = RequestActivityType.RequestedByRider : RequestActivityType.RequestedByOperator;
                        }
                        _this.activityRepository.insert({
                            requestId: order.id,
                            type: activityType
                        });
                        _this.riderService.repo.update(order.riderId, {
                            lastActivityAt: new Date()
                        });
                        if (!(input.driverId != null)) return [
                            3,
                            24
                        ];
                        _this.assignOrderToDriver(order.id, input.driverId);
                        return [
                            2,
                            order
                        ];
                    case 24:
                        return [
                            4,
                            _this.orderRedisService.add(_extends({}, order, {
                                fleetIds: fleetIdsInPoint
                            }), input.intervalMinutes | 0)
                        ];
                    case 25:
                        _state.sent();
                        common_.Logger.log(order.id, "SharedOrderService.createOrder.publishingOrder");
                        common_.Logger.log(driversWithService, "SharedOrderService.createOrder.driversWithService");
                        if (((_input_intervalMinutes = input.intervalMinutes) != null ? _input_intervalMinutes : 0) < 30 && !shouldPrePay) {
                            _this.orderRedisService.driverNotified(order.id, driversWithService);
                            _this.pubSub.publish("orderCreated", {
                                orderCreated: order,
                                driverIds: driversWithService.map(function(driver) {
                                    return driver.id;
                                })
                            });
                            _this.driverNotificationService.requests(driversWithService);
                        }
                        _state.label = 26;
                    case 26:
                        return [
                            2,
                            order
                        ];
                }
            });
        })();
    };
    _proto.createOrderByQr = function createOrderByQr(input) {
        var _this = this;
        return shared_order_service_async_to_generator(function() {
            var _this1, zonePricings, service, optionFee, options, _input_twoWay, paidOptions, metrics, _tmp, eta, rider, _tmp1, _rider_isResident, isResident, fleetIdsInPoint, _feeMultiplier, feeMultiplier, _tmp2, _input_waitMinutes, cost, zonePricing, now, _iterator, _step, multiplier, startMinutes, nowMinutes, endMinutes, regions, shouldPrePay, paidAmount, balance, amountNeedsToBePrePaid, _input_waitMinutes1, _input_waitMinutes2, orderObject, order;
            return shared_order_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log(input, "SharedOrderService.createOrderByQr:  ");
                        //   ,    2
                        zonePricings = [];
                        if (!(input.points.length === 2)) return [
                            3,
                            2
                        ];
                        common_.Logger.log("    ", "createOrderByQr");
                        return [
                            4,
                            _this.getZonePricingsForPoints(input.points[0], input.points[1])
                        ];
                    case 1:
                        zonePricings = _state.sent();
                        common_.Logger.log("  : " + zonePricings.length, "createOrderByQr");
                        return [
                            3,
                            3
                        ];
                    case 2:
                        common_.Logger.log("   , ..   != 2", "createOrderByQr");
                        _state.label = 3;
                    case 3:
                        return [
                            4,
                            _this.servicesService.getWithId(input.serviceId)
                        ];
                    case 4:
                        service = _state.sent();
                        if (!service) {
                            common_.Logger.error("  ", "createOrderByQr");
                            throw new apollo_.ForbiddenError("SERVICE_NOT_FOUND");
                        }
                        common_.Logger.log(" : ID=" + service.id, "createOrderByQr");
                        // ---  ---         
                        // const closeDrivers = ...
                        // const driverIds = ...
                        // const fleetIdsInPoint = ...
                        // const driversWithService = ...
                        //        
                        optionFee = 0;
                        options = [];
                        if (!(input.optionIds != null)) return [
                            3,
                            6
                        ];
                        return [
                            4,
                            _this.serviceOptionRepository.findByIds(input.optionIds)
                        ];
                    case 5:
                        options = _state.sent();
                        common_.Logger.log(" : " + options.length, "createOrderByQr");
                        if (((_input_twoWay = input.twoWay) != null ? _input_twoWay : false) && input.points.length > 1) {
                            input.points.push(input.points[0]);
                            input.addresses.push(input.addresses[0]);
                            common_.Logger.log("  ''      ", "createOrderByQr");
                        }
                        paidOptions = options.filter(function(opt) {
                            return opt.type === ServiceOptionType.Paid;
                        });
                        optionFee = paidOptions.reduce(function(sum, opt) {
                            var _opt_additionalFee;
                            return sum + ((_opt_additionalFee = opt.additionalFee) != null ? _opt_additionalFee : 0);
                        }, 0);
                        common_.Logger.log("   : " + optionFee, "createOrderByQr");
                        return [
                            3,
                            7
                        ];
                    case 6:
                        common_.Logger.log("  ", "createOrderByQr");
                        _state.label = 7;
                    case 7:
                        if (!(service.perHundredMeters > 0)) return [
                            3,
                            9
                        ];
                        return [
                            4,
                            _this.googleServices.getSumDistanceAndDuration(input.points)
                        ];
                    case 8:
                        _tmp = _state.sent();
                        return [
                            3,
                            10
                        ];
                    case 9:
                        _tmp = {
                            distance: 0,
                            duration: 0,
                            directions: []
                        };
                        _state.label = 10;
                    case 10:
                        metrics = _tmp;
                        common_.Logger.log(" : =" + metrics.distance + ", =" + metrics.duration, "createOrderByQr");
                        //  ETA (  )
                        eta = new Date(new Date().getTime() + (input.intervalMinutes | 0) * 60 * 1000);
                        common_.Logger.log(" ETA: " + eta.toISOString(), "createOrderByQr");
                        if (!(input.riderId == null)) return [
                            3,
                            11
                        ];
                        _tmp1 = null;
                        return [
                            3,
                            13
                        ];
                    case 11:
                        return [
                            4,
                            _this.riderService.repo.findOneBy({
                                id: input.riderId
                            })
                        ];
                    case 12:
                        _tmp1 = _state.sent();
                        _state.label = 13;
                    case 13:
                        rider = _tmp1;
                        common_.Logger.log(" : " + (rider ? rider.id : ""), "createOrderByQr");
                        isResident = (_rider_isResident = rider == null ? void 0 : rider.isResident) != null ? _rider_isResident : process.env.MOTAXI == null;
                        common_.Logger.log("  : " + isResident, "createOrderByQr");
                        return [
                            4,
                            _this.sharedFleetService.getFleetIdsInPoint(input.points[0])
                        ];
                    case 14:
                        fleetIdsInPoint = _state.sent();
                        common_.Logger.log("  : " + fleetIdsInPoint, "createOrderByQr");
                        if (!(fleetIdsInPoint.length === 0)) return [
                            3,
                            15
                        ];
                        _tmp2 = 1;
                        return [
                            3,
                            17
                        ];
                    case 15:
                        return [
                            4,
                            _this.sharedFleetService.getFleetById(fleetIdsInPoint[0])
                        ];
                    case 16:
                        _tmp2 = (_feeMultiplier = (_this1 = _state.sent()) == null ? void 0 : _this1.feeMultiplier) != null ? _feeMultiplier : 1;
                        _state.label = 17;
                    case 17:
                        feeMultiplier = _tmp2;
                        common_.Logger.log("  : " + feeMultiplier, "createOrderByQr");
                        //   
                        cost = _this.servicesService.calculateCost(service, metrics.distance, metrics.duration, eta, feeMultiplier, isResident) + optionFee + service.perMinuteWait * ((_input_waitMinutes = input.waitMinutes) != null ? _input_waitMinutes : 0);
                        common_.Logger.log("  : " + cost, "createOrderByQr");
                        //   ,  
                        zonePricing = zonePricings.filter(function(price) {
                            return price.services.some(function(s) {
                                return s.id === input.serviceId;
                            });
                        });
                        if (zonePricing.length > 0) {
                            cost = zonePricing[0].cost;
                            common_.Logger.log("   : " + cost, "createOrderByQr");
                            now = new Date();
                            for(_iterator = shared_order_service_create_for_of_iterator_helper_loose(zonePricings[0].timeMultipliers); !(_step = _iterator()).done;){
                                multiplier = _step.value;
                                startMinutes = parseInt(multiplier.startTime.split(":")[0]) * 60 + parseInt(multiplier.startTime.split(":")[1]);
                                nowMinutes = now.getHours() * 60 + now.getMinutes();
                                endMinutes = parseInt(multiplier.endTime.split(":")[0]) * 60 + parseInt(multiplier.endTime.split(":")[1]);
                                if (nowMinutes >= startMinutes && nowMinutes <= endMinutes) {
                                    cost *= multiplier.multiply;
                                    common_.Logger.log("   " + multiplier.multiply + ",  : " + cost, "createOrderByQr");
                                }
                            }
                        }
                        return [
                            4,
                            _this.regionService.getRegionWithPoint(input.points[0])
                        ];
                    case 18:
                        regions = _state.sent();
                        common_.Logger.log(" : " + regions.length, "createOrderByQr");
                        //   
                        if (service.maximumDestinationDistance !== 0 && metrics.distance > service.maximumDestinationDistance) {
                            common_.Logger.error("     ", "createOrderByQr");
                            throw new apollo_.ForbiddenError("DISTANCE_TOO_FAR");
                        }
                        //   
                        shouldPrePay = false;
                        paidAmount = 0;
                        if (!(service.prepayPercent > 0 && input.riderId != null)) return [
                            3,
                            20
                        ];
                        return [
                            4,
                            _this.sharedRiderWalletService.getRiderCreditInCurrency(input.riderId, regions[0].currency)
                        ];
                    case 19:
                        balance = _state.sent();
                        amountNeedsToBePrePaid = cost * service.prepayPercent / 100;
                        if (balance < amountNeedsToBePrePaid) {
                            shouldPrePay = true;
                            common_.Logger.log(" : " + amountNeedsToBePrePaid, "createOrderByQr");
                        } else {
                            common_.Logger.log("  ", "createOrderByQr");
                        }
                        _state.label = 20;
                    case 20:
                        common_.Logger.log(" : " + shouldPrePay, "createOrderByQr");
                        common_.Logger.log(" : " + cost, "createOrderByQr");
                        common_.Logger.log("  : " + paidAmount, "createOrderByQr");
                        common_.Logger.log(" : " + optionFee, "createOrderByQr");
                        common_.Logger.log("ETA: " + eta.toISOString(), "createOrderByQr");
                        //   
                        orderObject = _this.orderRepository.create({
                            serviceId: input.serviceId,
                            currency: regions[0].currency,
                            riderId: input.riderId,
                            points: input.points,
                            addresses: input.addresses.map(function(address) {
                                return address.replace(", ", "-");
                            }),
                            distanceBest: metrics.distance,
                            durationBest: metrics.duration,
                            directions: metrics.directions,
                            paymentMode: input.paymentMode,
                            driverId: input.driverId,
                            savedPaymentMethodId: input.paymentMode === PaymentMode.SavedPaymentMethod ? input.paymentMethodId : undefined,
                            paymentGatewayId: input.paymentMode === PaymentMode.PaymentGateway ? input.paymentMethodId : undefined,
                            status: shouldPrePay ? OrderStatus.WaitingForPrePay : OrderStatus.Started,
                            paidAmount: paidAmount,
                            costBest: cost,
                            costAfterCoupon: cost,
                            expectedTimestamp: eta,
                            operatorId: input.operatorId,
                            waitMinutes: (_input_waitMinutes1 = input.waitMinutes) != null ? _input_waitMinutes1 : 0,
                            waitCost: service.perMinuteWait * ((_input_waitMinutes2 = input.waitMinutes) != null ? _input_waitMinutes2 : 0),
                            rideOptionsCost: optionFee,
                            fleetId: input.fleetId,
                            providerShare: service.providerShareFlat + service.providerSharePercent * cost / 100,
                            options: options
                        });
                        common_.Logger.log(orderObject, "SharedOrderService.createOrderByQr:   ");
                        return [
                            4,
                            _this.orderRepository.save(orderObject)
                        ];
                    case 21:
                        order = _state.sent();
                        common_.Logger.log("   ID: " + order.id, "createOrderByQr");
                        if (!(input.couponCode && rider)) return [
                            3,
                            23
                        ];
                        common_.Logger.log(" : " + input.couponCode, "createOrderByQr");
                        return [
                            4,
                            _this.commonCouponService.applyCoupon(input.couponCode, order.id, rider.id)
                        ];
                    case 22:
                        order = _state.sent();
                        common_.Logger.log(" ,   : " + order.costAfterCoupon, "createOrderByQr");
                        _state.label = 23;
                    case 23:
                        //     StartedByQr
                        return [
                            4,
                            _this.activityRepository.insert({
                                requestId: order.id,
                                type: RequestActivityType.StartedByQr
                            })
                        ];
                    case 24:
                        _state.sent();
                        common_.Logger.log(" 'StartedByQr'    " + order.id, "createOrderByQr");
                        //    
                        return [
                            4,
                            _this.riderService.repo.update(order.riderId, {
                                lastActivityAt: new Date()
                            })
                        ];
                    case 25:
                        _state.sent();
                        common_.Logger.log("      ID: " + order.riderId, "createOrderByQr");
                        //      
                        _this.assignOrderToDriver(order.id, input.driverId);
                        common_.Logger.log("  ID " + input.driverId + "    " + order.id, "createOrderByQr");
                        return [
                            2,
                            order
                        ];
                }
            });
        })();
    };
    _proto.processPrePay = function processPrePay(orderId, authorizedAmount) {
        if (authorizedAmount === void 0) authorizedAmount = 0;
        var _this = this;
        return shared_order_service_async_to_generator(function() {
            var order, riderCredit, minimumRequired, closeDriverIds, fleetIdsInPoint, driversWithService;
            return shared_order_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.orderRepository.findOneOrFail({
                                where: {
                                    id: orderId
                                },
                                relations: [
                                    "service",
                                    "driver",
                                    "driver.fleet",
                                    "rider"
                                ]
                            })
                        ];
                    case 1:
                        order = _state.sent();
                        return [
                            4,
                            _this.sharedRiderWalletService.getRiderCreditInCurrency(order.riderId, order.currency)
                        ];
                    case 2:
                        riderCredit = _state.sent();
                        minimumRequired = order.costAfterCoupon * (order.service.prepayPercent / 100.0);
                        common_.Logger.log("riderCredit: " + riderCredit, "processPrePay");
                        common_.Logger.log("authorizedAmount: " + authorizedAmount, "processPrePay");
                        common_.Logger.log("serviceFee: " + order.costAfterCoupon, "processPrePay");
                        common_.Logger.log("Minmum required authorizedAmount: " + minimumRequired, "processPrePay");
                        if (riderCredit + authorizedAmount - minimumRequired < 1) {
                            throw new apollo_.ForbiddenError("Credit is not enough");
                        }
                        return [
                            4,
                            _this.orderRepository.update(order.id, {
                                status: OrderStatus.Requested
                            })
                        ];
                    case 3:
                        _state.sent();
                        return [
                            4,
                            _this.driverRedisService.getClose(order.points[0], order.service.searchRadius)
                        ];
                    case 4:
                        closeDriverIds = _state.sent().map(function(x) {
                            return x.driverId;
                        });
                        return [
                            4,
                            _this.sharedFleetService.getFleetIdsInPoint(order.points[0])
                        ];
                    case 5:
                        fleetIdsInPoint = _state.sent();
                        return [
                            4,
                            _this.driverService.getOnlineDriversWithServiceId(closeDriverIds, order.serviceId, fleetIdsInPoint)
                        ];
                    case 6:
                        driversWithService = _state.sent();
                        _this.orderRedisService.driverNotified(order.id, driversWithService);
                        _this.pubSub.publish("orderCreated", {
                            orderCreated: order,
                            driverIds: driversWithService.map(function(driver) {
                                return driver.id;
                            })
                        });
                        _this.driverNotificationService.requests(driversWithService);
                        return [
                            2,
                            _this.orderRepository.findOneOrFail({
                                where: {
                                    id: orderId
                                },
                                relations: [
                                    "service",
                                    "driver",
                                    "driver.fleet",
                                    "rider"
                                ]
                            })
                        ];
                }
            });
        })();
    };
    _proto.finish = function finish(orderId, cashAmount) {
        if (cashAmount === void 0) cashAmount = 0.0;
        var _this = this;
        return shared_order_service_async_to_generator(function() {
            var _order_driver, order, riderCredit, providerPercent, commission, unPaidAmount, payment, status, captureResult, fleetShare;
            return shared_order_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.orderRepository.findOneOrFail({
                                where: {
                                    id: orderId
                                },
                                relations: [
                                    "service",
                                    "driver",
                                    "driver.fleet",
                                    "rider"
                                ]
                            })
                        ];
                    case 1:
                        order = _state.sent();
                        if (order.service.paymentMethod == ServicePaymentMethod.OnlyCredit && cashAmount > 0) {
                            throw new apollo_.ForbiddenError("Cash payment is not available for this service.");
                        }
                        return [
                            4,
                            _this.sharedRiderWalletService.getRiderCreditInCurrency(order.riderId, order.currency)
                        ];
                    case 2:
                        riderCredit = _state.sent();
                        providerPercent = order.rider.isResident === false ? order.service.providerSharePercent * order.service.touristMultiplier : order.service.providerSharePercent;
                        commission = providerPercent * order.costAfterCoupon / 100 + order.service.providerShareFlat;
                        unPaidAmount = order.costAfterCoupon - order.paidAmount + order.tipAmount;
                        if (!(riderCredit + cashAmount < unPaidAmount)) return [
                            3,
                            13
                        ];
                        return [
                            4,
                            _this.paymentRepository.find({
                                where: {
                                    userType: "client",
                                    userId: order.riderId.toString(),
                                    status: PaymentStatus.Authorized,
                                    orderNumber: order.id.toString()
                                },
                                order: {
                                    id: "DESC"
                                }
                            })
                        ];
                    case 3:
                        payment = _state.sent();
                        status = OrderStatus.WaitingForPostPay;
                        if (!(payment.length > 0)) return [
                            3,
                            11
                        ];
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.get(process.env.GATEWAY_SERVER_URL + "/capture?id=" + payment[0].transactionNumber + "&amount=" + (unPaidAmount - riderCredit)))
                        ];
                    case 4:
                        captureResult = _state.sent();
                        if (!(captureResult.data.status == "OK")) return [
                            3,
                            8
                        ];
                        return [
                            4,
                            _this.sharedRiderWalletService.getRiderCreditInCurrency(order.riderId, order.currency)
                        ];
                    case 5:
                        riderCredit = _state.sent();
                        unPaidAmount = order.costAfterCoupon - order.paidAmount + order.tipAmount;
                        if (!(riderCredit + cashAmount < unPaidAmount)) return [
                            3,
                            7
                        ];
                        return [
                            4,
                            _this.orderRepository.update(order.id, {
                                status: status
                            })
                        ];
                    case 6:
                        _state.sent();
                        return [
                            2
                        ];
                    case 7:
                        return [
                            3,
                            10
                        ];
                    case 8:
                        return [
                            4,
                            _this.orderRepository.update(order.id, {
                                status: status
                            })
                        ];
                    case 9:
                        _state.sent();
                        return [
                            2
                        ];
                    case 10:
                        return [
                            3,
                            13
                        ];
                    case 11:
                        return [
                            4,
                            _this.orderRepository.update(order.id, {
                                status: status
                            })
                        ];
                    case 12:
                        _state.sent();
                        return [
                            2
                        ];
                    case 13:
                        return [
                            4,
                            _this.driverService.rechargeWallet({
                                status: TransactionStatus.Done,
                                driverId: order.driverId,
                                currency: order.currency,
                                action: TransactionAction.Deduct,
                                deductType: DriverDeductTransactionType.Commission,
                                amount: -1 * commission,
                                requestId: order.id
                            })
                        ];
                    case 14:
                        _state.sent();
                        fleetShare = 0;
                        if (((_order_driver = order.driver) == null ? void 0 : _order_driver.fleetId) != null) {
                            fleetShare = commission * order.driver.fleet.commissionSharePercent / 100 + order.driver.fleet.commissionShareFlat;
                            if (fleetShare > 0) {
                                _this.sharedFleetService.rechargeWallet({
                                    fleetId: order.driver.fleetId,
                                    action: TransactionAction.Recharge,
                                    rechargeType: ProviderRechargeTransactionType.Commission,
                                    amount: fleetShare,
                                    currency: order.currency,
                                    requestId: order.id,
                                    driverId: order.driverId
                                });
                            }
                        }
                        return [
                            4,
                            _this.sharedProviderService.rechargeWallet({
                                action: TransactionAction.Recharge,
                                rechargeType: ProviderRechargeTransactionType.Commission,
                                currency: order.currency,
                                amount: commission - fleetShare
                            })
                        ];
                    case 15:
                        _state.sent();
                        if (!(order.costAfterCoupon - cashAmount > 0)) return [
                            3,
                            17
                        ];
                        return [
                            4,
                            _this.driverService.rechargeWallet({
                                status: TransactionStatus.Done,
                                driverId: order.driverId,
                                currency: order.currency,
                                requestId: order.id,
                                action: TransactionAction.Recharge,
                                rechargeType: DriverRechargeTransactionType.OrderFee,
                                amount: order.costAfterCoupon - cashAmount + order.tipAmount
                            })
                        ];
                    case 16:
                        _state.sent();
                        _state.label = 17;
                    case 17:
                        if (!(riderCredit > 0 && cashAmount < unPaidAmount)) return [
                            3,
                            19
                        ];
                        return [
                            4,
                            _this.sharedRiderWalletService.rechargeWallet({
                                status: TransactionStatus.Done,
                                action: TransactionAction.Deduct,
                                deductType: RiderDeductTransactionType.OrderFee,
                                currency: order.currency,
                                requestId: order.id,
                                amount: -1 * (unPaidAmount - cashAmount),
                                riderId: order.riderId
                            })
                        ];
                    case 18:
                        _state.sent();
                        _state.label = 19;
                    case 19:
                        return [
                            4,
                            _this.orderRepository.update(order.id, {
                                paidAmount: order.costAfterCoupon,
                                status: OrderStatus.WaitingForReview,
                                finishTimestamp: new Date()
                            })
                        ];
                    case 20:
                        _state.sent();
                        return [
                            4,
                            _this.driverService.updateDriverStatus(order.driverId, DriverStatus.Online)
                        ];
                    case 21:
                        _state.sent();
                        _this.activityRepository.insert({
                            requestId: order.id,
                            type: RequestActivityType.Paid
                        });
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.assignOrderToDriver = function assignOrderToDriver(orderId, driverId) {
        var _this = this;
        return shared_order_service_async_to_generator(function() {
            var _ref, travel, driverLocation, metrics, _tmp, dt, etaPickup, result;
            return shared_order_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            Promise.all([
                                _this.orderRepository.findOneOrFail({
                                    where: {
                                        id: orderId
                                    },
                                    relations: [
                                        "driver",
                                        "driver.car",
                                        "driver.carColor",
                                        "service"
                                    ]
                                }),
                                _this.driverRedisService.getDriverCoordinate(driverId)
                            ])
                        ];
                    case 1:
                        _ref = _state.sent(), travel = _ref[0], driverLocation = _ref[1];
                        _this.activityRepository.insert({
                            requestId: orderId,
                            type: RequestActivityType.DriverAccepted
                        });
                        //  const allowedStatuses = [OrderStatus.Found, OrderStatus.NoCloseFound, OrderStatus.Requested, OrderStatus.Booked];
                        // if (travel == null || !allowedStatuses.includes(travel.status)) {
                        if (travel == null) {
                            throw new apollo_.ForbiddenError("Already Taken");
                        }
                        if (!(travel.driverId != null)) return [
                            3,
                            3
                        ];
                        _this.driverNotificationService.canceled(travel.driver);
                        return [
                            4,
                            _this.driverService.updateDriverStatus(travel.driverId, DriverStatus.Online)
                        ];
                    case 2:
                        _state.sent();
                        travel.status = OrderStatus.RiderCanceled;
                        _this.pubSub.publish("orderUpdated", {
                            orderUpdated: travel
                        });
                        _state.label = 3;
                    case 3:
                        if (!(driverLocation != null)) return [
                            3,
                            5
                        ];
                        return [
                            4,
                            _this.googleServices.getSumDistanceAndDuration([
                                travel.points[0],
                                driverLocation
                            ])
                        ];
                    case 4:
                        _tmp = _state.sent();
                        return [
                            3,
                            6
                        ];
                    case 5:
                        _tmp = {
                            distance: 0,
                            duration: 0
                        };
                        _state.label = 6;
                    case 6:
                        metrics = _tmp;
                        dt = new Date();
                        etaPickup = dt.setSeconds(dt.getSeconds() + metrics.duration);
                        _this.driverService.updateDriverStatus(driverId, DriverStatus.InService);
                        return [
                            4,
                            _this.orderRedisService.expire([
                                orderId
                            ])
                        ];
                    case 7:
                        _state.sent();
                        return [
                            4,
                            _this.orderRepository.update(orderId, {
                                status: OrderStatus.DriverAccepted,
                                etaPickup: new Date(etaPickup),
                                driverId: driverId
                            })
                        ];
                    case 8:
                        _state.sent();
                        return [
                            4,
                            _this.orderRepository.findOneOrFail({
                                where: {
                                    id: orderId
                                },
                                relations: [
                                    "driver",
                                    "driver.car",
                                    "driver.carColor",
                                    "service",
                                    "rider"
                                ]
                            })
                        ];
                    case 9:
                        result = _state.sent();
                        _this.pubSub.publish("orderUpdated", {
                            orderUpdated: result
                        });
                        _this.pubSub.publish("orderRemoved", {
                            orderRemoved: result
                        }); // This one has a filter to let know all except the one accepted.
                        _this.riderNotificationService.bookingAssigned(result.rider, result.expectedTimestamp.toISOString());
                        _this.driverNotificationService.assigned(result.driver, result.expectedTimestamp.toTimeString(), result.addresses[0], result.addresses[result.addresses.length - 1]);
                        return [
                            2,
                            result
                        ];
                }
            });
        })();
    };
    return SharedOrderService;
}();
SharedOrderService = shared_order_service_ts_decorate([
    (0,common_.Injectable)(),
    shared_order_service_ts_param(0, (0,typeorm_.InjectRepository)(TaxiOrderEntity)),
    shared_order_service_ts_param(1, (0,typeorm_.InjectRepository)(RequestActivityEntity)),
    shared_order_service_ts_param(3, (0,typeorm_.InjectRepository)(ServiceCategoryEntity)),
    shared_order_service_ts_param(4, (0,typeorm_.InjectRepository)(ServiceOptionEntity)),
    shared_order_service_ts_param(5, (0,typeorm_.InjectRepository)(ZonePriceEntity)),
    shared_order_service_ts_param(6, (0,typeorm_.InjectRepository)(PaymentEntity)),
    shared_order_service_ts_param(17, (0,nestjs_query_graphql_.InjectPubSub)()),
    shared_order_service_ts_metadata("design:type", Function),
    shared_order_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof RegionService === "undefined" ? Object : RegionService,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository,
        typeof GoogleServicesService === "undefined" ? Object : GoogleServicesService,
        typeof ServiceService === "undefined" ? Object : ServiceService,
        typeof SharedRiderService === "undefined" ? Object : SharedRiderService,
        typeof SharedCustomerWalletService === "undefined" ? Object : SharedCustomerWalletService,
        typeof DriverRedisService === "undefined" ? Object : DriverRedisService,
        typeof OrderRedisService === "undefined" ? Object : OrderRedisService,
        typeof SharedDriverService === "undefined" ? Object : SharedDriverService,
        typeof SharedProviderService === "undefined" ? Object : SharedProviderService,
        typeof SharedFleetService === "undefined" ? Object : SharedFleetService,
        typeof CommonCouponService === "undefined" ? Object : CommonCouponService,
        typeof external_graphql_redis_subscriptions_.RedisPubSub === "undefined" ? Object : external_graphql_redis_subscriptions_.RedisPubSub,
        typeof DriverNotificationService === "undefined" ? Object : DriverNotificationService,
        typeof RiderNotificationService === "undefined" ? Object : RiderNotificationService,
        typeof axios_.HttpService === "undefined" ? Object : axios_.HttpService
    ])
], SharedOrderService);
var CalculateFareError;
(function(CalculateFareError) {
    CalculateFareError["RegionUnsupported"] = "REGION_UNSUPPORTED";
    CalculateFareError["NoServiceInRegion"] = "NO_SERVICE_IN_REGION";
})(CalculateFareError || (CalculateFareError = {}));

;// ../../libs/database/src/lib/order/shared-order.module.ts
function shared_order_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}



































var SharedOrderModule = function SharedOrderModule() {
    "use strict";
};
SharedOrderModule = shared_order_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            RedisHelpersModule,
            CommonCouponModule,
            SharedCustomerWalletModule,
            typeorm_.TypeOrmModule.forFeature([
                ServiceCategoryEntity,
                ServiceOptionEntity,
                ServiceEntity,
                CustomerEntity,
                DriverEntity,
                DriverWalletEntity,
                DriverTransactionEntity,
                FleetEntity,
                FleetWalletEntity,
                FleetTransactionEntity,
                ProviderWalletEntity,
                ProviderTransactionEntity,
                RiderWalletEntity,
                RiderTransactionEntity,
                TaxiOrderEntity,
                RequestActivityEntity,
                ZonePriceEntity,
                PaymentEntity
            ]),
            axios_.HttpModule,
            RegionModule,
            GoogleServicesModule,
            FirebaseNotificationModule.register()
        ],
        providers: [
            RedisPubSubProvider.provider(),
            ServiceService,
            SharedDriverService,
            SharedFleetService,
            SharedOrderService,
            SharedProviderService,
            SharedRiderService,
            SharedConfigurationService
        ],
        exports: [
            SharedDriverService,
            SharedFleetService,
            SharedOrderService,
            SharedProviderService,
            SharedRiderService,
            ServiceService
        ]
    })
], SharedOrderModule);

;// ../../libs/database/src/lib/shop/shared-shop.module.ts
function shared_shop_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}










var SharedShopModule = function SharedShopModule() {
    "use strict";
};
SharedShopModule = shared_shop_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            GoogleServicesModule,
            SharedOrderModule,
            typeorm_.TypeOrmModule.forFeature([
                ShopEntity,
                RiderAddressEntity,
                ServiceEntity,
                ProductEntity
            ])
        ],
        providers: [
            SharedShopService,
            DeliveryFeeService
        ],
        exports: [
            SharedShopService,
            DeliveryFeeService
        ]
    })
], SharedShopModule);

;// ../../libs/database/src/lib/shop/index.ts




;// ../../libs/database/src/lib/customer/shared-customer.service.ts
function shared_customer_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function shared_customer_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                shared_customer_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                shared_customer_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function shared_customer_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function shared_customer_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function shared_customer_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function shared_customer_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}




var SharedCustomerService = /*#__PURE__*/ function() {
    "use strict";
    function SharedCustomerService(customerRepository) {
        this.customerRepository = customerRepository;
    }
    var _proto = SharedCustomerService.prototype;
    _proto.findById = function findById(id) {
        var _this = this;
        return shared_customer_service_async_to_generator(function() {
            return shared_customer_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.customerRepository.findOneOrFail({
                        where: {
                            id: id
                        },
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.findWithDeleted = function findWithDeleted(filter) {
        var _this = this;
        return shared_customer_service_async_to_generator(function() {
            return shared_customer_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.customerRepository.findOne({
                        where: filter,
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.findUserByMobileNumber = function findUserByMobileNumber(mobileNumber) {
        var _this = this;
        return shared_customer_service_async_to_generator(function() {
            return shared_customer_service_ts_generator(this, function(_state) {
                return [
                    2,
                    _this.customerRepository.findOne({
                        where: {
                            mobileNumber: mobileNumber
                        },
                        withDeleted: true
                    })
                ];
            });
        })();
    };
    _proto.createUserWithMobileNumber = function createUserWithMobileNumber(input) {
        var _this = this;
        return shared_customer_service_async_to_generator(function() {
            var rider, _$CustomerEntity;
            return shared_customer_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log('creating rider with ');
                        rider = _this.customerRepository.create({
                            mobileNumber: input.mobileNumber,
                            countryIso: input.countryIso
                        });
                        return [
                            4,
                            _this.customerRepository.save(rider)
                        ];
                    case 1:
                        _$CustomerEntity = _state.sent();
                        return [
                            2,
                            _$CustomerEntity
                        ];
                }
            });
        })();
    };
    _proto.updateLastActivity = function updateLastActivity(riderId) {
        return this.customerRepository.update(riderId, {
            lastActivityAt: new Date()
        });
    };
    _proto.findOrCreateUserWithMobileNumber = function findOrCreateUserWithMobileNumber(input) {
        var _this = this;
        return shared_customer_service_async_to_generator(function() {
            return shared_customer_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.customerRepository.manager.transaction(/*#__PURE__*/ shared_customer_service_async_to_generator(function(manager) {
                                var user;
                                return shared_customer_service_ts_generator(this, function(_state) {
                                    switch(_state.label){
                                        case 0:
                                            return [
                                                4,
                                                manager.findOne(CustomerEntity, {
                                                    where: {
                                                        mobileNumber: input.mobileNumber
                                                    },
                                                    withDeleted: true,
                                                    lock: {
                                                        mode: 'pessimistic_write'
                                                    }
                                                })
                                            ];
                                        case 1:
                                            user = _state.sent();
                                            if (!!user) return [
                                                3,
                                                3
                                            ];
                                            user = manager.create(CustomerEntity, {
                                                mobileNumber: input.mobileNumber,
                                                countryIso: input.countryIso
                                            });
                                            return [
                                                4,
                                                manager.save(user)
                                            ];
                                        case 2:
                                            _state.sent();
                                            _state.label = 3;
                                        case 3:
                                            if (!(user.deletedAt != null)) return [
                                                3,
                                                6
                                            ];
                                            return [
                                                4,
                                                manager.restore(CustomerEntity, {
                                                    id: user.id
                                                })
                                            ];
                                        case 4:
                                            _state.sent();
                                            return [
                                                4,
                                                manager.findOne(CustomerEntity, {
                                                    where: {
                                                        id: user.id
                                                    }
                                                })
                                            ];
                                        case 5:
                                            //    
                                            user = _state.sent();
                                            _state.label = 6;
                                        case 6:
                                            return [
                                                2,
                                                user
                                            ];
                                    }
                                });
                            }))
                        ];
                    case 1:
                        //     race condition
                        return [
                            2,
                            _state.sent()
                        ];
                }
            });
        })();
    };
    _proto.deleteById = function deleteById(id) {
        var _this = this;
        return shared_customer_service_async_to_generator(function() {
            var user;
            return shared_customer_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.findById(id)
                        ];
                    case 1:
                        user = _state.sent();
                        return [
                            4,
                            _this.customerRepository.softDelete(id)
                        ];
                    case 2:
                        _state.sent();
                        return [
                            2,
                            user
                        ];
                }
            });
        })();
    };
    return SharedCustomerService;
}();
SharedCustomerService = shared_customer_service_ts_decorate([
    (0,common_.Injectable)(),
    shared_customer_service_ts_param(0, (0,typeorm_.InjectRepository)(CustomerEntity)),
    shared_customer_service_ts_metadata("design:type", Function),
    shared_customer_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SharedCustomerService);

;// ../../libs/database/src/lib/customer/shared-customer.module.ts
function shared_customer_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}




var SharedCustomerModule = function SharedCustomerModule() {
    "use strict";
};
SharedCustomerModule = shared_customer_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            typeorm_.TypeOrmModule.forFeature([
                CustomerEntity
            ])
        ],
        providers: [
            SharedCustomerService
        ],
        exports: [
            SharedCustomerService
        ]
    })
], SharedCustomerModule);

;// ../../libs/database/src/lib/customer/index.ts



;// ../../libs/database/src/lib/coupon/index.ts




;// ../../libs/database/src/lib/interfaces/app-config-info.dto.ts
function app_config_info_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function app_config_info_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var AppConfigInfoDTO = function AppConfigInfoDTO() {
    "use strict";
};
app_config_info_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    app_config_info_dto_ts_metadata("design:type", String)
], AppConfigInfoDTO.prototype, "logo", void 0);
app_config_info_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    app_config_info_dto_ts_metadata("design:type", String)
], AppConfigInfoDTO.prototype, "name", void 0);
app_config_info_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return external_license_verify_.AppColorScheme;
    }, {
        nullable: true
    }),
    app_config_info_dto_ts_metadata("design:type", typeof external_license_verify_.AppColorScheme === "undefined" ? Object : external_license_verify_.AppColorScheme)
], AppConfigInfoDTO.prototype, "color", void 0);
AppConfigInfoDTO = app_config_info_dto_ts_decorate([
    (0,graphql_.InputType)('AppConfigInfoInput'),
    (0,graphql_.ObjectType)('AppConfigInfo')
], AppConfigInfoDTO);
(0,graphql_.registerEnumType)(external_license_verify_.AppColorScheme, {
    name: 'AppColorScheme'
});

;// ../../libs/database/src/lib/interfaces/license.dto.ts
function license_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function license_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var License = function License() {
    "use strict";
};
license_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }),
    license_dto_ts_metadata("design:type", String)
], License.prototype, "buyerName", void 0);
license_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return LicenseType;
    }),
    license_dto_ts_metadata("design:type", typeof LicenseType === "undefined" ? Object : LicenseType)
], License.prototype, "licenseType", void 0);
license_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.GraphQLISODateTime;
    }),
    license_dto_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], License.prototype, "supportExpireDate", void 0);
license_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            AppType
        ];
    }),
    license_dto_ts_metadata("design:type", Array)
], License.prototype, "connectedApps", void 0);
license_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            external_license_verify_.PlatformAddOn
        ];
    }),
    license_dto_ts_metadata("design:type", Array)
], License.prototype, "platformAddons", void 0);
License = license_dto_ts_decorate([
    (0,graphql_.ObjectType)('License')
], License);
(0,graphql_.registerEnumType)(external_license_verify_.PlatformAddOn, {
    name: 'PlatformAddOn'
});

;// ../../libs/database/src/lib/interfaces/config.dto.ts
function config_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function config_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var CurrentConfiguration = function CurrentConfiguration() {
    "use strict";
};
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "purchaseCode", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "backendMapsAPIKey", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "adminPanelAPIKey", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "firebaseProjectPrivateKey", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Number)
], CurrentConfiguration.prototype, "versionNumber", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "companyLogo", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "companyName", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return AppConfigInfoDTO;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", typeof AppConfigInfoDTO === "undefined" ? Object : AppConfigInfoDTO)
], CurrentConfiguration.prototype, "taxi", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return AppConfigInfoDTO;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", typeof AppConfigInfoDTO === "undefined" ? Object : AppConfigInfoDTO)
], CurrentConfiguration.prototype, "shop", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return AppConfigInfoDTO;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", typeof AppConfigInfoDTO === "undefined" ? Object : AppConfigInfoDTO)
], CurrentConfiguration.prototype, "parking", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "mysqlHost", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Int;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Number)
], CurrentConfiguration.prototype, "mysqlPort", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "mysqlUser", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "mysqlPassword", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "mysqlDatabase", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "redisHost", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Int;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Number)
], CurrentConfiguration.prototype, "redisPort", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], CurrentConfiguration.prototype, "redisPassword", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Int;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Number)
], CurrentConfiguration.prototype, "redisDb", void 0);
CurrentConfiguration = config_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], CurrentConfiguration);
var UploadResult = function UploadResult() {
    "use strict";
};
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", String)
], UploadResult.prototype, "url", void 0);
UploadResult = config_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], UploadResult);
var UpdatePurchaseCodeStatus;
(function(UpdatePurchaseCodeStatus) {
    UpdatePurchaseCodeStatus["OK"] = "OK";
    UpdatePurchaseCodeStatus["INVALID"] = "INVALID";
    UpdatePurchaseCodeStatus["OVERUSED"] = "OVERUSED";
    UpdatePurchaseCodeStatus["CLIENT_FOUND"] = "CLIENT_FOUND";
})(UpdatePurchaseCodeStatus || (UpdatePurchaseCodeStatus = {}));
(0,graphql_.registerEnumType)(UpdatePurchaseCodeStatus, {
    name: 'UpdatePurchaseCodeStatus'
});
var UpdatePurchaseCodeResult = function UpdatePurchaseCodeResult() {
    "use strict";
};
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return UpdatePurchaseCodeStatus;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", String)
], UpdatePurchaseCodeResult.prototype, "status", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], UpdatePurchaseCodeResult.prototype, "message", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return LicenseInformationDTO;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", typeof LicenseInformationDTO === "undefined" ? Object : LicenseInformationDTO)
], UpdatePurchaseCodeResult.prototype, "data", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            UpdatePurchaseCodeClient
        ];
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Array)
], UpdatePurchaseCodeResult.prototype, "clients", void 0);
UpdatePurchaseCodeResult = config_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], UpdatePurchaseCodeResult);
var UpdatePurchaseCodeClient = function UpdatePurchaseCodeClient() {
    "use strict";
};
config_dto_ts_decorate([
    (0,nestjs_query_graphql_.IDField)(function() {
        return graphql_.ID;
    }),
    config_dto_ts_metadata("design:type", Number)
], UpdatePurchaseCodeClient.prototype, "id", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return Boolean;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", Boolean)
], UpdatePurchaseCodeClient.prototype, "enabled", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", String)
], UpdatePurchaseCodeClient.prototype, "ip", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", Number)
], UpdatePurchaseCodeClient.prototype, "port", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", String)
], UpdatePurchaseCodeClient.prototype, "token", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.ID;
    }),
    config_dto_ts_metadata("design:type", Number)
], UpdatePurchaseCodeClient.prototype, "purchaseId", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.GraphQLISODateTime;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], UpdatePurchaseCodeClient.prototype, "firstVerifiedAt", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.GraphQLISODateTime;
    }, {
        nullable: false
    }),
    config_dto_ts_metadata("design:type", typeof Date === "undefined" ? Object : Date)
], UpdatePurchaseCodeClient.prototype, "lastVerifiedAt", void 0);
UpdatePurchaseCodeClient = config_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], UpdatePurchaseCodeClient);
var LicenseInformationDTO = function LicenseInformationDTO() {
    "use strict";
};
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return License;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", typeof License === "undefined" ? Object : License)
], LicenseInformationDTO.prototype, "license", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            String
        ];
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Array)
], LicenseInformationDTO.prototype, "benefits", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            String
        ];
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Array)
], LicenseInformationDTO.prototype, "drawbacks", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            AvaialbeUpgrade
        ];
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", Array)
], LicenseInformationDTO.prototype, "availableUpgrades", void 0);
LicenseInformationDTO = config_dto_ts_decorate([
    (0,graphql_.ObjectType)('LicenseInformation')
], LicenseInformationDTO);
var AvaialbeUpgrade = function AvaialbeUpgrade() {
    "use strict";
};
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }),
    config_dto_ts_metadata("design:type", String)
], AvaialbeUpgrade.prototype, "type", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }),
    config_dto_ts_metadata("design:type", Number)
], AvaialbeUpgrade.prototype, "price", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            String
        ];
    }),
    config_dto_ts_metadata("design:type", Array)
], AvaialbeUpgrade.prototype, "benefits", void 0);
AvaialbeUpgrade = config_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], AvaialbeUpgrade);
var UpdateConfigStatus;
(function(UpdateConfigStatus) {
    UpdateConfigStatus["OK"] = "OK";
    UpdateConfigStatus["INVALID"] = "INVALID";
})(UpdateConfigStatus || (UpdateConfigStatus = {}));
(0,graphql_.registerEnumType)(UpdateConfigStatus, {
    name: 'UpdateConfigStatus'
});
var LicenseType;
(function(LicenseType) {
    LicenseType["Regular"] = "Regular";
    LicenseType["Extended"] = "Extended";
    LicenseType["Bronze"] = "Bronze";
    LicenseType["Silver"] = "Silver";
    LicenseType["Gold"] = "Gold";
})(LicenseType || (LicenseType = {}));
(0,graphql_.registerEnumType)(LicenseType, {
    name: 'LicenseType'
});
var UpdateConfigResult = function UpdateConfigResult() {
    "use strict";
};
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return UpdateConfigStatus;
    }),
    config_dto_ts_metadata("design:type", String)
], UpdateConfigResult.prototype, "status", void 0);
config_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: true
    }),
    config_dto_ts_metadata("design:type", String)
], UpdateConfigResult.prototype, "message", void 0);
UpdateConfigResult = config_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], UpdateConfigResult);

;// ../../libs/database/src/lib/interfaces/config-information.dto.ts
function config_information_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function config_information_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ConfigInformation = function ConfigInformation() {
    "use strict";
};
config_information_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return Boolean;
    }),
    config_information_dto_ts_metadata("design:type", Boolean)
], ConfigInformation.prototype, "isValid", void 0);
config_information_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return CurrentConfiguration;
    }, {
        nullable: true
    }),
    config_information_dto_ts_metadata("design:type", typeof CurrentConfiguration === "undefined" ? Object : CurrentConfiguration)
], ConfigInformation.prototype, "config", void 0);
ConfigInformation = config_information_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], ConfigInformation);

;// ../../libs/database/src/lib/interfaces/date-range-multiplier.dto.ts
function date_range_multiplier_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function date_range_multiplier_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var DateRangeMultiplier = function DateRangeMultiplier() {
    "use strict";
};
date_range_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    date_range_multiplier_dto_ts_metadata("design:type", Number)
], DateRangeMultiplier.prototype, "startDate", void 0);
date_range_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    date_range_multiplier_dto_ts_metadata("design:type", Number)
], DateRangeMultiplier.prototype, "endDate", void 0);
date_range_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    date_range_multiplier_dto_ts_metadata("design:type", Number)
], DateRangeMultiplier.prototype, "multiply", void 0);
DateRangeMultiplier = date_range_multiplier_dto_ts_decorate([
    (0,graphql_.InputType)('DateRangeMultiplierInput'),
    (0,graphql_.ObjectType)()
], DateRangeMultiplier);

;// ../../libs/database/src/lib/interfaces/distance-multiplier.dto.ts
function distance_multiplier_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function distance_multiplier_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var DistanceMultiplier = function DistanceMultiplier() {
    "use strict";
};
distance_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    distance_multiplier_dto_ts_metadata("design:type", Number)
], DistanceMultiplier.prototype, "distanceFrom", void 0);
distance_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    distance_multiplier_dto_ts_metadata("design:type", Number)
], DistanceMultiplier.prototype, "distanceTo", void 0);
distance_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    distance_multiplier_dto_ts_metadata("design:type", Number)
], DistanceMultiplier.prototype, "multiply", void 0);
DistanceMultiplier = distance_multiplier_dto_ts_decorate([
    (0,graphql_.InputType)('DistanceMultiplierInput'),
    (0,graphql_.ObjectType)()
], DistanceMultiplier);

;// ../../libs/database/src/lib/interfaces/license-verify-remote-response.ts
/**
 * @deprecated
 */ var LicenseVerifyRemoteResponse = function LicenseVerifyRemoteResponse() {
    "use strict";
};

;// ../../libs/database/src/lib/interfaces/time-multiplier.dto.ts
function time_multiplier_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function time_multiplier_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var TimeMultiplier = function TimeMultiplier() {
    "use strict";
};
time_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: false
    }),
    time_multiplier_dto_ts_metadata("design:type", String)
], TimeMultiplier.prototype, "startTime", void 0);
time_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: false
    }),
    time_multiplier_dto_ts_metadata("design:type", String)
], TimeMultiplier.prototype, "endTime", void 0);
time_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    time_multiplier_dto_ts_metadata("design:type", Number)
], TimeMultiplier.prototype, "multiply", void 0);
TimeMultiplier = time_multiplier_dto_ts_decorate([
    (0,graphql_.InputType)('TimeMultiplierInput'),
    (0,graphql_.ObjectType)()
], TimeMultiplier);

;// ../../libs/database/src/lib/interfaces/time.dto.ts
function time_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function time_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var Time = function Time() {
    "use strict";
};
time_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Int;
    }),
    time_dto_ts_metadata("design:type", Number)
], Time.prototype, "hour", void 0);
time_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Int;
    }),
    time_dto_ts_metadata("design:type", Number)
], Time.prototype, "minute", void 0);
Time = time_dto_ts_decorate([
    (0,graphql_.ObjectType)(),
    (0,graphql_.InputType)('TimeInput')
], Time);

;// ../../libs/database/src/lib/interfaces/weekday-multiplier.dto.ts
function weekday_multiplier_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function weekday_multiplier_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}

var WeekdayMultiplier = function WeekdayMultiplier() {
    "use strict";
};
weekday_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return Weekday;
    }, {
        nullable: false
    }),
    weekday_multiplier_dto_ts_metadata("design:type", String)
], WeekdayMultiplier.prototype, "weekday", void 0);
weekday_multiplier_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return graphql_.Float;
    }, {
        nullable: false
    }),
    weekday_multiplier_dto_ts_metadata("design:type", Number)
], WeekdayMultiplier.prototype, "multiply", void 0);
WeekdayMultiplier = weekday_multiplier_dto_ts_decorate([
    (0,graphql_.InputType)('WeekdayMultiplierInput'),
    (0,graphql_.ObjectType)()
], WeekdayMultiplier);
var Weekday;
(function(Weekday) {
    Weekday["Sunday"] = "Sunday";
    Weekday["Monday"] = "Monday";
    Weekday["Tuesday"] = "Tuesday";
    Weekday["Wednesday"] = "Wednesday";
    Weekday["Thursday"] = "Thursday";
    Weekday["Friday"] = "Friday";
    Weekday["Saturday"] = "Saturday";
})(Weekday || (Weekday = {}));
(0,graphql_.registerEnumType)(Weekday, {
    name: 'Weekday'
});

;// ../../libs/database/src/lib/interfaces/weekday-schedule.dto.ts
function weekday_schedule_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function weekday_schedule_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var WeekdayScheduleDTO = function WeekdayScheduleDTO() {
    "use strict";
};
weekday_schedule_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return Weekday;
    }, {
        nullable: false
    }),
    weekday_schedule_dto_ts_metadata("design:type", typeof Weekday === "undefined" ? Object : Weekday)
], WeekdayScheduleDTO.prototype, "weekday", void 0);
weekday_schedule_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return [
            TimeRangeDTO
        ];
    }, {
        nullable: false
    }),
    weekday_schedule_dto_ts_metadata("design:type", Array)
], WeekdayScheduleDTO.prototype, "openingHours", void 0);
WeekdayScheduleDTO = weekday_schedule_dto_ts_decorate([
    (0,graphql_.ObjectType)('WeekdaySchedule'),
    (0,graphql_.InputType)('WeekdayScheduleInput')
], WeekdayScheduleDTO);
var TimeRangeDTO = function TimeRangeDTO() {
    "use strict";
};
weekday_schedule_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: false
    }),
    weekday_schedule_dto_ts_metadata("design:type", String)
], TimeRangeDTO.prototype, "open", void 0);
weekday_schedule_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }, {
        nullable: false
    }),
    weekday_schedule_dto_ts_metadata("design:type", String)
], TimeRangeDTO.prototype, "close", void 0);
TimeRangeDTO = weekday_schedule_dto_ts_decorate([
    (0,graphql_.ObjectType)('TimeRange'),
    (0,graphql_.InputType)('OpeningHoursInput')
], TimeRangeDTO);

;// ../../libs/database/src/lib/interfaces/index.ts














;// ../../libs/database/src/lib/geo/dto/geo-provider.enum.ts

var GeoProvider;
(function(GeoProvider) {
    GeoProvider["GOOGLE"] = "google";
    GeoProvider["MAPBOX"] = "mapbox";
    GeoProvider["NOMINATIM"] = "nominatim";
})(GeoProvider || (GeoProvider = {}));
(0,graphql_.registerEnumType)(GeoProvider, {
    name: 'GeoProvider'
});

;// ../../libs/database/src/lib/geo/dto/place.dto.ts
function place_dto_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function place_dto_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var PlaceDTO = function PlaceDTO() {
    "use strict";
};
place_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return Point;
    }),
    place_dto_ts_metadata("design:type", typeof Point === "undefined" ? Object : Point)
], PlaceDTO.prototype, "point", void 0);
place_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }),
    place_dto_ts_metadata("design:type", String)
], PlaceDTO.prototype, "title", void 0);
place_dto_ts_decorate([
    (0,graphql_.Field)(function() {
        return String;
    }),
    place_dto_ts_metadata("design:type", String)
], PlaceDTO.prototype, "address", void 0);
PlaceDTO = place_dto_ts_decorate([
    (0,graphql_.ObjectType)()
], PlaceDTO);

;// external "@googlemaps/google-maps-services-js"
const google_maps_services_js_namespaceObject = require("@googlemaps/google-maps-services-js");
;// ../../libs/database/src/lib/geo/google-geo.service.ts
function google_geo_service_array_like_to_array(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function google_geo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function google_geo_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                google_geo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                google_geo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function google_geo_service_unsupported_iterable_to_array(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return google_geo_service_array_like_to_array(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return google_geo_service_array_like_to_array(o, minLen);
}
function google_geo_service_create_for_of_iterator_helper_loose(o, allowArrayLike) {
    var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
    if (it) return (it = it.call(o)).next.bind(it);
    if (Array.isArray(o) || (it = google_geo_service_unsupported_iterable_to_array(o)) || allowArrayLike && o && typeof o.length === "number") {
        if (it) o = it;
        var i = 0;
        return function() {
            if (i >= o.length) {
                return {
                    done: true
                };
            }
            return {
                done: false,
                value: o[i++]
            };
        };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function google_geo_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function google_geo_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function google_geo_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var GoogleGeoService = /*#__PURE__*/ function() {
    "use strict";
    function GoogleGeoService(configurationService) {
        this.configurationService = configurationService;
        this.googleClient = new google_maps_services_js_namespaceObject.Client({});
    }
    var _proto = GoogleGeoService.prototype;
    _proto.getPlaces = function getPlaces(input) {
        var _this = this;
        return google_geo_service_async_to_generator(function() {
            var config, results, params, response, _iterator, _step, item, _placeDetails_data_result_geometry, _placeDetails_data_result_geometry1, placeDetails;
            return google_geo_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.configurationService.getConfiguration()
                        ];
                    case 1:
                        config = _state.sent();
                        results = [];
                        params = {
                            input: input.keyword,
                            language: input.language,
                            key: config.backendMapsAPIKey
                        };
                        if (input.location != null) {
                            params.location = {
                                lat: input.location.lat,
                                lng: input.location.lng
                            };
                        }
                        if (input.location != null && input.radius != null) {
                            params.radius = input.radius;
                        }
                        return [
                            4,
                            _this.googleClient.placeQueryAutocomplete({
                                params: params
                            })
                        ];
                    case 2:
                        response = _state.sent();
                        _iterator = google_geo_service_create_for_of_iterator_helper_loose(response.data.predictions);
                        _state.label = 3;
                    case 3:
                        if (!!(_step = _iterator()).done) return [
                            3,
                            6
                        ];
                        item = _step.value;
                        if (item.place_id == null) return [
                            3,
                            5
                        ];
                        return [
                            4,
                            _this.googleClient.placeDetails({
                                params: {
                                    place_id: item.place_id,
                                    key: config.backendMapsAPIKey
                                }
                            })
                        ];
                    case 4:
                        placeDetails = _state.sent();
                        if (((_placeDetails_data_result_geometry = placeDetails.data.result.geometry) == null ? void 0 : _placeDetails_data_result_geometry.location.lat) == null || ((_placeDetails_data_result_geometry1 = placeDetails.data.result.geometry) == null ? void 0 : _placeDetails_data_result_geometry1.location.lng) == null || placeDetails.data.result.formatted_address == null) return [
                            3,
                            5
                        ];
                        results.push({
                            point: {
                                lat: placeDetails.data.result.geometry.location.lat,
                                lng: placeDetails.data.result.geometry.location.lng
                            },
                            title: placeDetails.data.result.name,
                            address: placeDetails.data.result.formatted_address
                        });
                        _state.label = 5;
                    case 5:
                        return [
                            3,
                            3
                        ];
                    case 6:
                        // Sort by distance
                        results.sort(function(a, b) {
                            if (input.location == null) return 0;
                            var aDistance = Math.pow(a.point.lat - input.location.lat, 2) + Math.pow(a.point.lng - input.location.lng, 2);
                            var bDistance = Math.pow(b.point.lat - input.location.lat, 2) + Math.pow(b.point.lng - input.location.lng, 2);
                            return aDistance - bDistance;
                        });
                        // const response = await this.googleClient.textSearch({
                        //   params: {
                        //     query: input.keyword,
                        //     key: config!.backendMapsAPIKey!,
                        //   },
                        // });
                        // if (response.data.results.length == 0) return [];
                        // for (let i = 0; i < response.data.results.length; i++) {
                        //   results.push({
                        //     point: {
                        //       lat: response.data.results[i].geometry?.location.lat,
                        //       lng: response.data.results[i].geometry?.location.lng,
                        //     },
                        //     title: response.data.results[i].name,
                        //     address: response.data.results[i].formatted_address,
                        //   });
                        // }
                        // const response = await this.googleClient.placeAutocomplete({
                        //   params: {
                        //     input: input.keyword,
                        //     location: input.location,
                        //     radius: input.radius,
                        //     language: input.language as any,
                        //     key: config!.backendMapsAPIKey!,
                        //   },
                        // });
                        // if (response.data.predictions.length == 0) return [];
                        // for (let i = 0; i < response.data.predictions.length; i++) {
                        //   const geocoding = await this.googleClient.reverseGeocode({
                        //     params: {
                        //       place_id: response.data.predictions[i].place_id,
                        //       key: config!.backendMapsAPIKey!,
                        //     },
                        //   });
                        //   results.push({
                        //     point: {
                        //       lat: geocoding.data.results[0].geometry.location.lat,
                        //       lng: geocoding.data.results[0].geometry.location.lng,
                        //     },
                        //     title: response.data.predictions[i].structured_formatting.main_text,
                        //     address:
                        //       response.data.predictions[i].structured_formatting.secondary_text ??
                        //       '',
                        //   });
                        // }
                        return [
                            2,
                            results
                        ];
                }
            });
        })();
    };
    _proto.reverseGeocode = function reverseGeocode(input) {
        var _this = this;
        return google_geo_service_async_to_generator(function() {
            var config, response;
            return google_geo_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.configurationService.getConfiguration()
                        ];
                    case 1:
                        config = _state.sent();
                        return [
                            4,
                            _this.googleClient.reverseGeocode({
                                params: {
                                    latlng: {
                                        lat: input.lat,
                                        lng: input.lng
                                    },
                                    language: input.language,
                                    key: config.backendMapsAPIKey
                                }
                            })
                        ];
                    case 2:
                        response = _state.sent();
                        return [
                            2,
                            {
                                point: {
                                    lat: input.lat,
                                    lng: input.lng
                                },
                                address: response.data.results[0].formatted_address
                            }
                        ];
                }
            });
        })();
    };
    return GoogleGeoService;
}();
GoogleGeoService = google_geo_service_ts_decorate([
    (0,common_.Injectable)(),
    google_geo_service_ts_metadata("design:type", Function),
    google_geo_service_ts_metadata("design:paramtypes", [
        typeof SharedConfigurationService === "undefined" ? Object : SharedConfigurationService
    ])
], GoogleGeoService);

;// ../../libs/database/src/lib/geo/nominitam-geo.service.ts
function nominitam_geo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function nominitam_geo_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                nominitam_geo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                nominitam_geo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function nominitam_geo_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function nominitam_geo_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function nominitam_geo_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}



var NominitamGeoService = /*#__PURE__*/ function() {
    "use strict";
    function NominitamGeoService(httpService) {
        this.httpService = httpService;
    }
    var _proto = NominitamGeoService.prototype;
    _proto.getPlaces = function getPlaces(input) {
        var _this = this;
        return nominitam_geo_service_async_to_generator(function() {
            var result, mapped;
            return nominitam_geo_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.get('https://nominatim.openstreetmap.org/search', {
                                params: {
                                    q: input.keyword,
                                    format: 'json',
                                    addressdetails: '1',
                                    viewbox: input.location == null ? null : input.location.lng - 1 + "," + (input.location.lat - 1) + "," + (input.location.lng + 1) + "," + (input.location.lat + 1)
                                }
                            }))
                        ];
                    case 1:
                        result = _state.sent();
                        mapped = result.data.map(function(prediction) {
                            var placeDTO = {
                                point: {
                                    lat: prediction.lat,
                                    lng: prediction.lon
                                },
                                title: prediction.name,
                                address: prediction.display_name
                            };
                            return placeDTO;
                        });
                        return [
                            2,
                            mapped
                        ];
                }
            });
        })();
    };
    _proto.reverseGeocode = function reverseGeocode(input) {
        var _this = this;
        return nominitam_geo_service_async_to_generator(function() {
            var result;
            return nominitam_geo_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.get('https://nominatim.openstreetmap.org/reverse', {
                                params: {
                                    lat: input.lat,
                                    lon: input.lng,
                                    format: 'json'
                                }
                            }))
                        ];
                    case 1:
                        result = _state.sent();
                        return [
                            2,
                            {
                                point: {
                                    lat: input.lat,
                                    lng: input.lng
                                },
                                title: result.data.name,
                                address: result.data.display_name
                            }
                        ];
                }
            });
        })();
    };
    return NominitamGeoService;
}();
NominitamGeoService = nominitam_geo_service_ts_decorate([
    (0,common_.Injectable)(),
    nominitam_geo_service_ts_metadata("design:type", Function),
    nominitam_geo_service_ts_metadata("design:paramtypes", [
        typeof axios_.HttpService === "undefined" ? Object : axios_.HttpService
    ])
], NominitamGeoService);

;// ../../libs/database/src/lib/geo/geo.resolver.ts
function geo_resolver_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function geo_resolver_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                geo_resolver_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                geo_resolver_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function geo_resolver_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function geo_resolver_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function geo_resolver_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function geo_resolver_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}







var GeoResolver = /*#__PURE__*/ function() {
    "use strict";
    function GeoResolver(googleGeoService, nominitamGeoService, configService) {
        this.googleGeoService = googleGeoService;
        this.nominitamGeoService = nominitamGeoService;
        this.configService = configService;
    }
    var _proto = GeoResolver.prototype;
    _proto.getPlaces = function getPlaces(keyword, location, radius, language, provider, apiKey) {
        var _this = this;
        return geo_resolver_async_to_generator(function() {
            var serverProvider, configs, serverApiKey;
            return geo_resolver_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        serverProvider = process.env.GEO_PROVIDER;
                        return [
                            4,
                            _this.configService.getConfiguration()
                        ];
                    case 1:
                        configs = _state.sent();
                        serverApiKey = configs == null ? void 0 : configs.backendMapsAPIKey;
                        if (serverApiKey == null && (apiKey == null ? void 0 : apiKey.length) == 0) {
                            throw new Error('Invalid API Key');
                        }
                        if (serverProvider != null) {
                            if (serverProvider == 'google') {
                                provider = GeoProvider.GOOGLE;
                            }
                            if (serverProvider == 'nominitam') {
                                provider = GeoProvider.NOMINATIM;
                            }
                        }
                        if (provider === GeoProvider.GOOGLE) {
                            return [
                                2,
                                _this.googleGeoService.getPlaces({
                                    keyword: keyword,
                                    location: location,
                                    radius: radius,
                                    language: language
                                })
                            ];
                        } else {
                            return [
                                2,
                                _this.nominitamGeoService.getPlaces({
                                    keyword: keyword,
                                    location: location,
                                    radius: radius,
                                    language: language
                                })
                            ];
                        }
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.reverseGeocode = function reverseGeocode(location, language, provider, apiKey) {
        var _this = this;
        return geo_resolver_async_to_generator(function() {
            var serverProvider, configs, serverApiKey;
            return geo_resolver_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        serverProvider = process.env.GEO_PROVIDER;
                        return [
                            4,
                            _this.configService.getConfiguration()
                        ];
                    case 1:
                        configs = _state.sent();
                        serverApiKey = configs == null ? void 0 : configs.backendMapsAPIKey;
                        if (serverApiKey == null && (apiKey == null ? void 0 : apiKey.length) == 0) {
                            throw new Error('Invalid API Key');
                        }
                        if (serverProvider != null) {
                            if (serverProvider == 'google') {
                                provider = GeoProvider.GOOGLE;
                            }
                            if (serverProvider == 'nominitam') {
                                provider = GeoProvider.NOMINATIM;
                            }
                        }
                        if (provider === GeoProvider.GOOGLE) {
                            return [
                                2,
                                _this.googleGeoService.reverseGeocode({
                                    lat: location.lat,
                                    lng: location.lng,
                                    language: language
                                })
                            ];
                        } else {
                            return [
                                2,
                                _this.nominitamGeoService.reverseGeocode({
                                    lat: location.lat,
                                    lng: location.lng,
                                    language: language
                                })
                            ];
                        }
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return GeoResolver;
}();
geo_resolver_ts_decorate([
    (0,graphql_.Query)(function() {
        return [
            PlaceDTO
        ];
    }),
    geo_resolver_ts_param(0, (0,graphql_.Args)('keyword')),
    geo_resolver_ts_param(1, (0,graphql_.Args)('location', {
        nullable: true
    })),
    geo_resolver_ts_param(2, (0,graphql_.Args)('radius', {
        nullable: true,
        type: function() {
            return graphql_.Int;
        },
        description: 'Search radius from location argument in meters'
    })),
    geo_resolver_ts_param(3, (0,graphql_.Args)('language', {
        nullable: true
    })),
    geo_resolver_ts_param(4, (0,graphql_.Args)('provider', {
        nullable: true,
        type: function() {
            return GeoProvider;
        }
    })),
    geo_resolver_ts_param(5, (0,graphql_.Args)('apiKey', {
        nullable: true
    })),
    geo_resolver_ts_metadata("design:type", Function),
    geo_resolver_ts_metadata("design:paramtypes", [
        String,
        typeof Point === "undefined" ? Object : Point,
        Number,
        String,
        typeof GeoProvider === "undefined" ? Object : GeoProvider,
        String
    ]),
    geo_resolver_ts_metadata("design:returntype", Promise)
], GeoResolver.prototype, "getPlaces", null);
geo_resolver_ts_decorate([
    (0,graphql_.Query)(function() {
        return PlaceDTO;
    }),
    geo_resolver_ts_param(0, (0,graphql_.Args)('location')),
    geo_resolver_ts_param(1, (0,graphql_.Args)('language', {
        nullable: true
    })),
    geo_resolver_ts_param(2, (0,graphql_.Args)('provider', {
        nullable: true,
        type: function() {
            return GeoProvider;
        }
    })),
    geo_resolver_ts_param(3, (0,graphql_.Args)('apiKey', {
        nullable: true
    })),
    geo_resolver_ts_metadata("design:type", Function),
    geo_resolver_ts_metadata("design:paramtypes", [
        typeof Point === "undefined" ? Object : Point,
        String,
        typeof GeoProvider === "undefined" ? Object : GeoProvider,
        String
    ]),
    geo_resolver_ts_metadata("design:returntype", Promise)
], GeoResolver.prototype, "reverseGeocode", null);
GeoResolver = geo_resolver_ts_decorate([
    (0,graphql_.Resolver)(),
    geo_resolver_ts_metadata("design:type", Function),
    geo_resolver_ts_metadata("design:paramtypes", [
        typeof GoogleGeoService === "undefined" ? Object : GoogleGeoService,
        typeof NominitamGeoService === "undefined" ? Object : NominitamGeoService,
        typeof SharedConfigurationService === "undefined" ? Object : SharedConfigurationService
    ])
], GeoResolver);

;// ../../libs/database/src/lib/geo/geo.module.ts
function geo_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}






var GeoModule = function GeoModule() {
    "use strict";
};
GeoModule = geo_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            axios_.HttpModule
        ],
        providers: [
            GeoResolver,
            GoogleGeoService,
            NominitamGeoService,
            SharedConfigurationService
        ]
    })
], GeoModule);

;// ../../libs/database/src/lib/geo/index.ts







;// ../../libs/database/src/lib/order/index.ts















;// ../../libs/database/src/lib/redis/config-redis.service.ts
function config_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function config_redis_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                config_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                config_redis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function config_redis_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function config_redis_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function config_redis_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}


var ConfigRedisService = /*#__PURE__*/ function() {
    "use strict";
    function ConfigRedisService(redisService) {
        this.redisService = redisService;
    }
    var _proto = ConfigRedisService.prototype;
    _proto.getConfig = function getConfig(key) {
        var _this = this;
        return config_redis_service_async_to_generator(function() {
            var result;
            return config_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().get("config:" + key)
                        ];
                    case 1:
                        result = _state.sent();
                        if (result == null) return [
                            2,
                            _this.getDefault(key)
                        ];
                        return [
                            2,
                            result
                        ];
                }
            });
        })();
    };
    _proto.setConfig = function setConfig(key, value) {
        var _this = this;
        return config_redis_service_async_to_generator(function() {
            return config_redis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.redisService.getOrThrow().set("config:" + key, value)
                        ];
                    case 1:
                        _state.sent();
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.getDefault = function getDefault(key) {
        if (key == 'twilio:verificationCodeSMSTemplate') {
            return 'Your verification code is {code}';
        }
        return null;
    };
    return ConfigRedisService;
}();
ConfigRedisService = config_redis_service_ts_decorate([
    (0,common_.Injectable)(),
    config_redis_service_ts_metadata("design:type", Function),
    config_redis_service_ts_metadata("design:paramtypes", [
        typeof nestjs_redis_.RedisService === "undefined" ? Object : nestjs_redis_.RedisService
    ])
], ConfigRedisService);

;// ../../libs/database/src/lib/redis/index.ts





;// ../../libs/database/src/lib/sms/providers/broadnet.service.ts
function broadnet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function broadnet_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                broadnet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                broadnet_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function broadnet_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function broadnet_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function broadnet_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var BroadnetService = /*#__PURE__*/ function() {
    "use strict";
    function BroadnetService(httpService) {
        this.httpService = httpService;
    }
    var _proto = BroadnetService.prototype;
    _proto.sendOTP = function sendOTP(input) {
        var _this = this;
        return broadnet_service_async_to_generator(function() {
            var config, response;
            return broadnet_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        config = input.providerEntity;
                        if (config == null) {
                            throw new Error('Broadnet config not found');
                        }
                        common_.Logger.log('Sending sms to ' + input.phoneNumber + ' using Broadnet');
                        common_.Logger.log('Message: ' + input.message);
                        common_.Logger.log('Config: ' + JSON.stringify(config));
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.get('https://gw5s.broadnet.me:8443/websmpp/websms', {
                                params: {
                                    user: config.accountId,
                                    pass: config.authToken,
                                    sid: config.fromNumber,
                                    type: config.smsType,
                                    mno: input.phoneNumber,
                                    text: input.message
                                }
                            }))
                        ];
                    case 1:
                        response = _state.sent();
                        if (response.status !== 200) {
                            throw new apollo_.ForbiddenError('Broadnet failed to send sms, status: ' + response.statusText);
                        }
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return BroadnetService;
}();
BroadnetService = broadnet_service_ts_decorate([
    (0,common_.Injectable)(),
    broadnet_service_ts_metadata("design:type", Function),
    broadnet_service_ts_metadata("design:paramtypes", [
        typeof axios_.HttpService === "undefined" ? Object : axios_.HttpService
    ])
], BroadnetService);

;// ../../libs/database/src/lib/sms/providers/pahappa.service.ts
function pahappa_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function pahappa_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                pahappa_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                pahappa_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function pahappa_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function pahappa_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function pahappa_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var PahappaService = /*#__PURE__*/ function() {
    "use strict";
    function PahappaService(httpService) {
        this.httpService = httpService;
    }
    var _proto = PahappaService.prototype;
    _proto.sendOTP = function sendOTP(input) {
        var _this = this;
        return pahappa_service_async_to_generator(function() {
            var providerEntity, phoneNumber, message, response, error;
            return pahappa_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        providerEntity = input.providerEntity, phoneNumber = input.phoneNumber, message = input.message;
                        _state.label = 1;
                    case 1:
                        _state.trys.push([
                            1,
                            3,
                            ,
                            4
                        ]);
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.get('https://www.egosms.co/api/v1/plain/', {
                                params: {
                                    username: providerEntity.accountId,
                                    password: providerEntity.authToken,
                                    number: phoneNumber,
                                    message: message,
                                    sender: providerEntity.fromNumber,
                                    priority: 0
                                }
                            }))
                        ];
                    case 2:
                        response = _state.sent();
                        // Handle any errors from the API response
                        if (response.status !== 200) {
                            throw new apollo_.ForbiddenError('Failed to send Pahappa OTP');
                        }
                        return [
                            3,
                            4
                        ];
                    case 3:
                        error = _state.sent();
                        // Handle any errors that occurred during the OTP sending process
                        // You can log the error or perform any necessary error handling
                        console.error('Failed to send Pahappa OTP:', error);
                        throw new apollo_.ForbiddenError("Failed to send Pahappa OTP: " + error.message);
                    case 4:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return PahappaService;
}();
PahappaService = pahappa_service_ts_decorate([
    (0,common_.Injectable)(),
    pahappa_service_ts_metadata("design:type", Function),
    pahappa_service_ts_metadata("design:paramtypes", [
        typeof axios_.HttpService === "undefined" ? Object : axios_.HttpService
    ])
], PahappaService);

;// external "plivo"
const external_plivo_namespaceObject = require("plivo");
;// ../../libs/database/src/lib/sms/providers/plivo.service.ts
function plivo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function plivo_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                plivo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                plivo_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function plivo_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function plivo_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}


var PlivoService = /*#__PURE__*/ function() {
    "use strict";
    function PlivoService() {}
    var _proto = PlivoService.prototype;
    _proto.sendOTP = function sendOTP(input) {
        return plivo_service_async_to_generator(function() {
            var client, result;
            return plivo_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        client = new external_plivo_namespaceObject.Client(input.providerEntity.accountId, input.providerEntity.authToken);
                        return [
                            4,
                            client.messages.create(input.providerEntity.fromNumber, input.phoneNumber, input.message)
                        ];
                    case 1:
                        result = _state.sent();
                        common_.Logger.log(JSON.stringify(result), 'PlivoService');
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return PlivoService;
}();
PlivoService = plivo_service_ts_decorate([
    (0,common_.Injectable)()
], PlivoService);

;// ../../libs/database/src/lib/sms/providers/sms-provider.interface.ts
var SMSProviderInterface = function SMSProviderInterface() {
    "use strict";
};

;// external "twilio"
const external_twilio_namespaceObject = require("twilio");
;// ../../libs/database/src/lib/sms/providers/twilio.service.ts
function twilio_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function twilio_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                twilio_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                twilio_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function twilio_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function twilio_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}



var TwilioService = /*#__PURE__*/ function() {
    "use strict";
    function TwilioService() {}
    var _proto = TwilioService.prototype;
    _proto.sendOTP = function sendOTP(input) {
        return twilio_service_async_to_generator(function() {
            var client, error;
            return twilio_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        _state.trys.push([
                            0,
                            2,
                            ,
                            3
                        ]);
                        client = new external_twilio_namespaceObject.Twilio(input.providerEntity.accountId, input.providerEntity.authToken);
                        return [
                            4,
                            client.messages.create({
                                body: input.message,
                                from: input.providerEntity.fromNumber,
                                to: "+" + input.phoneNumber
                            })
                        ];
                    case 1:
                        _state.sent();
                        return [
                            3,
                            3
                        ];
                    case 2:
                        error = _state.sent();
                        throw new apollo_.ForbiddenError(error.message);
                    case 3:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return TwilioService;
}();
TwilioService = twilio_service_ts_decorate([
    (0,common_.Injectable)()
], TwilioService);

;// ../../libs/database/src/lib/sms/providers/ventis.service.ts
function ventis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function ventis_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                ventis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                ventis_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function ventis_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function ventis_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function ventis_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var VentisService = /*#__PURE__*/ function() {
    "use strict";
    function VentisService(httpService) {
        this.httpService = httpService;
    }
    var _proto = VentisService.prototype;
    _proto.getAccessToken = function getAccessToken(providerEntity) {
        var _this = this;
        return ventis_service_async_to_generator(function() {
            var _response_data, response, error;
            return ventis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        _state.trys.push([
                            0,
                            2,
                            ,
                            3
                        ]);
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.post('https://signin.ventis.group/realms/Messaging/protocol/openid-connect/token', new URLSearchParams({
                                username: providerEntity.accountId,
                                password: providerEntity.smsType,
                                client_id: 'api-messaging',
                                grant_type: 'password',
                                client_secret: providerEntity.authToken
                            }), {
                                headers: {
                                    'Content-Type': 'application/x-www-form-urlencoded'
                                }
                            }))
                        ];
                    case 1:
                        response = _state.sent();
                        if (!((_response_data = response.data) == null ? void 0 : _response_data.access_token)) {
                            throw new Error('Failed to retrieve access token');
                        }
                        return [
                            2,
                            response.data.access_token
                        ];
                    case 2:
                        error = _state.sent();
                        common_.Logger.error(error, 'VentisService.getAccessToken');
                        throw new apollo_.ForbiddenError("Failed to authenticate with Ventis: " + error.message);
                    case 3:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    _proto.sendOTP = function sendOTP(input) {
        var _this = this;
        return ventis_service_async_to_generator(function() {
            var providerEntity, phoneNumber, message, accessToken, response, error;
            return ventis_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        providerEntity = input.providerEntity, phoneNumber = input.phoneNumber, message = input.message;
                        _state.label = 1;
                    case 1:
                        _state.trys.push([
                            1,
                            4,
                            ,
                            5
                        ]);
                        return [
                            4,
                            _this.getAccessToken(providerEntity)
                        ];
                    case 2:
                        accessToken = _state.sent();
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.post('https://messaging.ventis.group/messaging/api/v1/message', {
                                to: phoneNumber.replace(/\D/g, ''),
                                sender: providerEntity.fromNumber,
                                isOTP: 'false',
                                message: message
                            }, {
                                headers: {
                                    'Content-Type': 'application/json; charset=UTF-8',
                                    Connection: 'keep-alive',
                                    Authorization: "Bearer " + accessToken
                                }
                            }))
                        ];
                    case 3:
                        response = _state.sent();
                        // Handle any errors from the API response
                        if (response.status !== 200) {
                            throw new apollo_.ForbiddenError('Failed to send Ventis OTP');
                        }
                        return [
                            3,
                            5
                        ];
                    case 4:
                        error = _state.sent();
                        // Handle any errors that occurred during the OTP sending process
                        common_.Logger.error(error, 'VentisService.sendOTP');
                        throw new apollo_.ForbiddenError("Failed to send Ventis OTP: " + error.message);
                    case 5:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return VentisService;
}();
VentisService = ventis_service_ts_decorate([
    (0,common_.Injectable)(),
    ventis_service_ts_metadata("design:type", Function),
    ventis_service_ts_metadata("design:paramtypes", [
        typeof axios_.HttpService === "undefined" ? Object : axios_.HttpService
    ])
], VentisService);

;// ../../libs/database/src/lib/sms/providers/vonage.service.ts
function vonage_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function vonage_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                vonage_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                vonage_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function vonage_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function vonage_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function vonage_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}




var VonageService = /*#__PURE__*/ function() {
    "use strict";
    function VonageService(httpService) {
        this.httpService = httpService;
    }
    var _proto = VonageService.prototype;
    _proto.sendOTP = function sendOTP(input) {
        var _this = this;
        return vonage_service_async_to_generator(function() {
            var config, response;
            return vonage_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        config = input.providerEntity;
                        return [
                            4,
                            (0,external_rxjs_.firstValueFrom)(_this.httpService.post("https://rest.nexmo.com/sms/json", {
                                api_key: config.accountId,
                                api_secret: config.authToken,
                                from: config.fromNumber,
                                to: input.phoneNumber,
                                text: input.message
                            }, {
                                headers: {
                                    'Content-Type': 'application/json'
                                }
                            }))
                        ];
                    case 1:
                        response = _state.sent();
                        common_.Logger.log(JSON.stringify(response.data), 'VonageService');
                        if (response.status !== 200) {
                            throw new apollo_.ForbiddenError('Vonage failed to send sms, status: ' + response.statusText);
                        }
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return VonageService;
}();
VonageService = vonage_service_ts_decorate([
    (0,common_.Injectable)(),
    vonage_service_ts_metadata("design:type", Function),
    vonage_service_ts_metadata("design:paramtypes", [
        typeof axios_.HttpService === "undefined" ? Object : axios_.HttpService
    ])
], VonageService);

;// ../../libs/database/src/lib/sms/sms-provider.service.ts
function sms_provider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function sms_provider_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                sms_provider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                sms_provider_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function sms_provider_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function sms_provider_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function sms_provider_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}
function sms_provider_service_ts_param(paramIndex, decorator) {
    return function(target, key) {
        decorator(target, key, paramIndex);
    };
}





var SMSProviderService = /*#__PURE__*/ function() {
    "use strict";
    function SMSProviderService(smsProviderRepository) {
        this.smsProviderRepository = smsProviderRepository;
    }
    var _proto = SMSProviderService.prototype;
    _proto.getDefaultProvider = function getDefaultProvider() {
        var _this = this;
        return sms_provider_service_async_to_generator(function() {
            var defaultProvider;
            return sms_provider_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.smsProviderRepository.findOne({
                                where: {
                                    isDefault: true
                                }
                            })
                        ];
                    case 1:
                        defaultProvider = _state.sent();
                        common_.Logger.log("defaultProvider SMSProviderService :", defaultProvider);
                        if (defaultProvider == null) {
                            throw new apollo_.ForbiddenError("Default SMS provider not found");
                        }
                        return [
                            2,
                            defaultProvider
                        ];
                }
            });
        })();
    };
    return SMSProviderService;
}();
SMSProviderService = sms_provider_service_ts_decorate([
    (0,common_.Injectable)(),
    sms_provider_service_ts_param(0, (0,typeorm_.InjectRepository)(SMSProviderEntity)),
    sms_provider_service_ts_metadata("design:type", Function),
    sms_provider_service_ts_metadata("design:paramtypes", [
        typeof external_typeorm_.Repository === "undefined" ? Object : external_typeorm_.Repository
    ])
], SMSProviderService);

;// external "axios"
const external_axios_namespaceObject = require("axios");
var external_axios_default = /*#__PURE__*/__webpack_require__.n(external_axios_namespaceObject);
;// external "qs"
const external_qs_namespaceObject = require("qs");
;// ../../libs/database/src/lib/sms/providers/smsc.service.ts
function smsc_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function smsc_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                smsc_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                smsc_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function smsc_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function smsc_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}




var SMSCService = /*#__PURE__*/ function() {
    "use strict";
    function SMSCService() {
        this.logger = new common_.Logger(SMSCService.name);
    }
    var _proto = SMSCService.prototype;
    _proto.sendOTP = function sendOTP(input) {
        var _this = this;
        return smsc_service_async_to_generator(function() {
            var login, password, sender, params, url, urlWithoutPassword, response, errorMsg, errorCode, error;
            return smsc_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        _state.trys.push([
                            0,
                            2,
                            ,
                            3
                        ]);
                        _this.logger.log("=== SMSC SMS Service ===");
                        login = input.providerEntity.accountId;
                        password = input.providerEntity.authToken;
                        sender = input.providerEntity.fromNumber;
                        _this.logger.log("Sending SMS to: " + input.phoneNumber);
                        _this.logger.log("Sender: " + sender);
                        _this.logger.log("Login: " + login);
                        _this.logger.log("Message: " + input.message);
                        params = {
                            login: login,
                            psw: password,
                            phones: input.phoneNumber,
                            mes: input.message,
                            sender: sender,
                            fmt: 3
                        };
                        url = "https://smsc.kz/sys/send.php?" + external_qs_namespaceObject.stringify(params);
                        urlWithoutPassword = url.replace(password, '***');
                        _this.logger.log("Request URL: " + urlWithoutPassword);
                        return [
                            4,
                            external_axios_default().get(url)
                        ];
                    case 1:
                        response = _state.sent();
                        _this.logger.log("SMSC Response status: " + response.status);
                        _this.logger.log("SMSC Response data: " + JSON.stringify(response.data));
                        if (response.data.error) {
                            errorMsg = response.data.error;
                            errorCode = response.data.error_code;
                            _this.logger.error("SMSC Error: " + errorMsg + " (code: " + errorCode + ")");
                            throw new Error("SMSC API Error: " + errorMsg + " (code: " + errorCode + ")");
                        }
                        _this.logger.log("SMS sent successfully via SMSC");
                        return [
                            3,
                            3
                        ];
                    case 2:
                        error = _state.sent();
                        _this.logger.error("SMSC Service Error: " + error.message);
                        throw new apollo_.ForbiddenError(error.message);
                    case 3:
                        return [
                            2
                        ];
                }
            });
        })();
    };
    return SMSCService;
}();
SMSCService = smsc_service_ts_decorate([
    (0,common_.Injectable)()
], SMSCService);

;// ../../libs/database/src/lib/sms/sms.service.ts
function sms_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function sms_service_async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                sms_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                sms_service_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function sms_service_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}
function sms_service_ts_generator(thisArg, body) {
    var f, y, t, g, _ = {
        label: 0,
        sent: function() {
            if (t[0] & 1) throw t[1];
            return t[1];
        },
        trys: [],
        ops: []
    };
    return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
    }), g;
    function verb(n) {
        return function(v) {
            return step([
                n,
                v
            ]);
        };
    }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while(_)try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [
                op[0] & 2,
                t.value
            ];
            switch(op[0]){
                case 0:
                case 1:
                    t = op;
                    break;
                case 4:
                    _.label++;
                    return {
                        value: op[1],
                        done: false
                    };
                case 5:
                    _.label++;
                    y = op[1];
                    op = [
                        0
                    ];
                    continue;
                case 7:
                    op = _.ops.pop();
                    _.trys.pop();
                    continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                        _ = 0;
                        continue;
                    }
                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                        _.label = op[1];
                        break;
                    }
                    if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                    }
                    if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                    }
                    if (t[2]) _.ops.pop();
                    _.trys.pop();
                    continue;
            }
            op = body.call(thisArg, _);
        } catch (e) {
            op = [
                6,
                e
            ];
            y = 0;
        } finally{
            f = t = 0;
        }
        if (op[0] & 5) throw op[1];
        return {
            value: op[0] ? op[1] : void 0,
            done: true
        };
    }
}
function sms_service_ts_metadata(k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
}












var SMSService = /*#__PURE__*/ function() {
    "use strict";
    function SMSService(smsProviderService, sharedConfigService, twilioService, broadnetService, plivoService, vonageService, pahappaService, ventisService, smscService) {
        this.smsProviderService = smsProviderService;
        this.sharedConfigService = sharedConfigService;
        this.twilioService = twilioService;
        this.broadnetService = broadnetService;
        this.plivoService = plivoService;
        this.vonageService = vonageService;
        this.pahappaService = pahappaService;
        this.ventisService = ventisService;
        this.smscService = smscService;
    }
    var _proto = SMSService.prototype;
    _proto.sendVerificationCodeSms = function sendVerificationCodeSms(phoneNumber) {
        var _this = this;
        return sms_service_async_to_generator(function() {
            var _defaultProvider_verificationTemplate, defaultProvider, random6Digit, _defaultProvider_verificationTemplate_replace, message;
            return sms_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        common_.Logger.log(">>> known types = " + JSON.stringify(Object.values(SMSProviderType)));
                        return [
                            4,
                            _this.smsProviderService.getDefaultProvider()
                        ];
                    case 1:
                        defaultProvider = _state.sent();
                        random6Digit = Math.floor(100000 + Math.random() * 900000).toString();
                        common_.Logger.log("random6Digit: " + random6Digit);
                        message = (_defaultProvider_verificationTemplate_replace = (_defaultProvider_verificationTemplate = defaultProvider.verificationTemplate) == null ? void 0 : _defaultProvider_verificationTemplate.replace("{code}", random6Digit)) != null ? _defaultProvider_verificationTemplate_replace : "OTP is {code}";
                        return [
                            2,
                            '123456'
                        ]; // TEMPORARY DISABLE SMS SENDING
                }
            });
        // Logger.log(`defaultProvider: ${JSON.stringify(defaultProvider)}`);
        // switch (defaultProvider?.type) {
        //   case SMSProviderType.Twilio:
        //     await this.twilioService.sendOTP({
        //       providerEntity: defaultProvider,
        //       phoneNumber,
        //       message,
        //     });
        //     break;
        //   case SMSProviderType.BroadNet:
        //     await this.broadnetService.sendOTP({
        //       providerEntity: defaultProvider,
        //       phoneNumber,
        //       message,
        //     });
        //     break;
        //   case SMSProviderType.Vonage:
        //     await this.vonageService.sendOTP({
        //       providerEntity: defaultProvider,
        //       phoneNumber,
        //       message,
        //     });
        //     break;
        //   case SMSProviderType.Plivo:
        //     await this.plivoService.sendOTP({
        //       providerEntity: defaultProvider,
        //       phoneNumber,
        //       message,
        //     });
        //     break;
        //   case SMSProviderType.Pahappa:
        //     await this.pahappaService.sendOTP({
        //       providerEntity: defaultProvider,
        //       phoneNumber,
        //       message,
        //     });
        //     break;
        //   case SMSProviderType.VentisSMS:
        //     await this.ventisService.sendOTP({
        //       providerEntity: defaultProvider,
        //       phoneNumber,
        //       message,
        //     });
        //     break;
        //   case SMSProviderType.SMSC:
        //     await this.smscService.sendOTP({
        //       providerEntity: defaultProvider,
        //       phoneNumber,
        //       message,
        //     });
        //     break;
        //   case SMSProviderType.Firebase:
        //     return random6Digit;
        //   default:
        //     throw new ForbiddenError("The default SMS provider is not supported");
        // }
        // return random6Digit;
        })();
    };
    _proto.sendVerificationCodeWhatsapp = function sendVerificationCodeWhatsapp(phoneNumber) {
        var _this = this;
        return sms_service_async_to_generator(function() {
            var config, client, random6Digit;
            return sms_service_ts_generator(this, function(_state) {
                switch(_state.label){
                    case 0:
                        return [
                            4,
                            _this.sharedConfigService.getConfiguration()
                        ];
                    case 1:
                        config = _state.sent();
                        if ((config == null ? void 0 : config.twilioAccountSid) == null || (config == null ? void 0 : config.twilioAuthToken) == null || (config == null ? void 0 : config.twilioFromNumber) == null || config.twilioVerificationCodeSMSTemplate == null) throw new Error("twilio config not found");
                        client = new external_twilio_namespaceObject.Twilio(config.twilioAccountSid, config.twilioAuthToken);
                        random6Digit = Math.floor(100000 + Math.random() * 900000).toString();
                        return [
                            4,
                            client.messages.create({
                                body: config.twilioVerificationCodeSMSTemplate.replace("{code}", random6Digit),
                                from: config.twilioFromNumber,
                                to: "whatsapp:+" + phoneNumber
                            })
                        ];
                    case 2:
                        _state.sent();
                        return [
                            2,
                            random6Digit
                        ];
                }
            });
        })();
    };
    return SMSService;
}();
SMSService = sms_service_ts_decorate([
    (0,common_.Injectable)(),
    sms_service_ts_metadata("design:type", Function),
    sms_service_ts_metadata("design:paramtypes", [
        typeof SMSProviderService === "undefined" ? Object : SMSProviderService,
        typeof SharedConfigurationService === "undefined" ? Object : SharedConfigurationService,
        typeof TwilioService === "undefined" ? Object : TwilioService,
        typeof BroadnetService === "undefined" ? Object : BroadnetService,
        typeof PlivoService === "undefined" ? Object : PlivoService,
        typeof VonageService === "undefined" ? Object : VonageService,
        typeof PahappaService === "undefined" ? Object : PahappaService,
        typeof VentisService === "undefined" ? Object : VentisService,
        typeof SMSCService === "undefined" ? Object : SMSCService
    ])
], SMSService);

;// ../../libs/database/src/lib/sms/sms.module.ts
function sms_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}















var SMSModule = function SMSModule() {
    "use strict";
};
SMSModule = sms_module_ts_decorate([
    (0,common_.Module)({
        imports: [
            typeorm_.TypeOrmModule.forFeature([
                SMSProviderEntity
            ]),
            axios_.HttpModule
        ],
        providers: [
            SMSService,
            SMSProviderService,
            TwilioService,
            PlivoService,
            BroadnetService,
            PahappaService,
            VonageService,
            VentisService,
            SharedConfigurationService,
            AuthRedisService,
            SMSCService
        ],
        exports: [
            SMSService,
            AuthRedisService
        ]
    })
], SMSModule);

;// ../../libs/database/src/lib/sms/index.ts












;// ../../libs/database/src/lib/crypto/crypto.module.ts
function crypto_module_ts_decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}


var CryptoModule = function CryptoModule() {
    "use strict";
};
CryptoModule = crypto_module_ts_decorate([
    (0,common_.Module)({
        imports: [],
        providers: [
            CryptoService
        ],
        exports: [
            CryptoService
        ]
    })
], CryptoModule);

;// ../../libs/database/src/lib/crypto/index.ts



;// ../../libs/database/src/lib/payment/payment-interfaces.ts
var ChargeSavedPaymentMethodBody = function ChargeSavedPaymentMethodBody() {
    "use strict";
};

;// ../../libs/database/src/lib/payment/index.ts


;// ../../libs/database/src/index.ts





















/***/ }),
/* 16 */
/***/ ((module) => {

module.exports = require("typeorm");

/***/ }),
/* 17 */
/***/ ((module) => {

module.exports = require("@ptc-org/nestjs-query-graphql");

/***/ }),
/* 18 */
/***/ ((module) => {

module.exports = require("graphql-redis-subscriptions");

/***/ }),
/* 19 */
/***/ ((module) => {

module.exports = require("fs");

/***/ }),
/* 20 */
/***/ ((module) => {

module.exports = require("@liaoliaots/nestjs-redis");

/***/ }),
/* 21 */
/***/ ((module) => {

module.exports = require("firebase-admin");

/***/ }),
/* 22 */
/***/ ((module) => {

module.exports = require("license-verify");

/***/ }),
/* 23 */
/***/ ((module) => {

module.exports = require("rxjs");

/***/ }),
/* 24 */
/***/ ((module) => {

module.exports = require("path");

/***/ }),
/* 25 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AccountingModule", ({
    enumerable: true,
    get: function() {
        return AccountingModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _accountingresolver = __webpack_require__(27);
const _accountingservice = __webpack_require__(32);
const _providertransactiondto = __webpack_require__(42);
const _providerwalletdto = __webpack_require__(43);
const _jwtauthguard = __webpack_require__(29);
const _providertransactioninput = __webpack_require__(44);
let AccountingModule = class AccountingModule {
};
AccountingModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.ProviderTransactionEntity,
                _database.ShopTransactionEntity,
                _database.RiderTransactionEntity,
                _database.DriverTransactionEntity,
                _database.FleetTransactionEntity,
                _database.ProviderWalletEntity,
                _database.RiderWalletEntity,
                _database.DriverWalletEntity,
                _database.ShopWalletEntity,
                _database.FleetWalletEntity,
                _database.TaxiOrderEntity,
                _database.DriverEntity,
                _database.CustomerEntity
            ]),
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.ProviderTransactionEntity,
                        _database.ProviderWalletEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.ProviderTransactionEntity,
                        DTOClass: _providertransactiondto.ProviderTransactionDTO,
                        CreateDTOClass: _providertransactioninput.ProviderTransactionInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        enableAggregate: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.ProviderWalletEntity,
                        DTOClass: _providerwalletdto.ProviderWalletDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    }
                ]
            })
        ],
        providers: [
            _accountingservice.AccountingService,
            _accountingresolver.AccountingResolver
        ]
    })
], AccountingModule);


/***/ }),
/* 26 */
/***/ ((module) => {

module.exports = require("@ptc-org/nestjs-query-typeorm");

/***/ }),
/* 27 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AccountingResolver", ({
    enumerable: true,
    get: function() {
        return AccountingResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _jwtauthguard = __webpack_require__(29);
const _accountingservice = __webpack_require__(32);
const _charttimeframeenum = __webpack_require__(33);
const _exportdto = __webpack_require__(36);
const _incomeresultitemdto = __webpack_require__(38);
const _registrationresultitemdto = __webpack_require__(39);
const _requestresultitemdto = __webpack_require__(40);
const _totaldailypairdto = __webpack_require__(41);
let AccountingResolver = class AccountingResolver {
    constructor(service){
        this.service = service;
    }
    async incomeChart(input) {
        const items = await this.service.incomeChart(input);
        return items;
    }
    async requestChart(input) {
        const items = await this.service.requestsChart(input);
        return items;
    }
    async driverRegistrations(input) {
        const items = await this.service.driverRegistrations(input);
        return items;
    }
    async riderRegistrations(input) {
        const items = await this.service.riderRegistrations(input);
        return items;
    }
    async export(input) {
        return this.service.exportTable(input);
    }
    async totalRevenue(currency) {
        return this.service.totalRevenue({
            currency
        });
    }
    async totaloutstandingUserBalances(currency) {
        return this.service.totaloutstandingUserBalances({
            currency
        });
    }
    async totalExpenses(currency) {
        return this.service.totalExpenses({
            currency
        });
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _incomeresultitemdto.IncomeResultItem
        ]),
    _ts_param._(0, (0, _graphql.Args)('timeframe', {
        type: ()=>_charttimeframeenum.ChartTimeframe
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _charttimeframeenum.ChartTimeframe === "undefined" ? Object : _charttimeframeenum.ChartTimeframe
    ]),
    _ts_metadata._("design:returntype", Promise)
], AccountingResolver.prototype, "incomeChart", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _requestresultitemdto.RequestResultItem
        ]),
    _ts_param._(0, (0, _graphql.Args)('timeframe', {
        type: ()=>_charttimeframeenum.ChartTimeframe
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _charttimeframeenum.ChartTimeframe === "undefined" ? Object : _charttimeframeenum.ChartTimeframe
    ]),
    _ts_metadata._("design:returntype", Promise)
], AccountingResolver.prototype, "requestChart", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _registrationresultitemdto.RegistrationResultItemDto
        ]),
    _ts_param._(0, (0, _graphql.Args)('timeframe', {
        type: ()=>_charttimeframeenum.ChartTimeframe
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _charttimeframeenum.ChartTimeframe === "undefined" ? Object : _charttimeframeenum.ChartTimeframe
    ]),
    _ts_metadata._("design:returntype", Promise)
], AccountingResolver.prototype, "driverRegistrations", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _registrationresultitemdto.RegistrationResultItemDto
        ]),
    _ts_param._(0, (0, _graphql.Args)('timeframe', {
        type: ()=>_charttimeframeenum.ChartTimeframe
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _charttimeframeenum.ChartTimeframe === "undefined" ? Object : _charttimeframeenum.ChartTimeframe
    ]),
    _ts_metadata._("design:returntype", Promise)
], AccountingResolver.prototype, "riderRegistrations", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_exportdto.ExportResultDTO),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_exportdto.ExportArgsDTO
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _exportdto.ExportArgsDTO === "undefined" ? Object : _exportdto.ExportArgsDTO
    ]),
    _ts_metadata._("design:returntype", Promise)
], AccountingResolver.prototype, "export", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_totaldailypairdto.TotalDailyPairDTO),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(0, (0, _graphql.Args)('currency', {
        type: ()=>String
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], AccountingResolver.prototype, "totalRevenue", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_totaldailypairdto.TotalDailyPairDTO),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(0, (0, _graphql.Args)('currency', {
        type: ()=>String
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], AccountingResolver.prototype, "totaloutstandingUserBalances", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_totaldailypairdto.TotalDailyPairDTO),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(0, (0, _graphql.Args)('currency', {
        type: ()=>String
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], AccountingResolver.prototype, "totalExpenses", null);
AccountingResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _accountingservice.AccountingService === "undefined" ? Object : _accountingservice.AccountingService
    ])
], AccountingResolver);


/***/ }),
/* 28 */
/***/ ((module) => {

module.exports = require("@swc/helpers/_/_ts_param");

/***/ }),
/* 29 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "JwtAuthGuard", ({
    enumerable: true,
    get: function() {
        return JwtAuthGuard;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _apollo = __webpack_require__(3);
const _passport = __webpack_require__(30);
const _executioncontexthost = __webpack_require__(31);
let JwtAuthGuard = class JwtAuthGuard extends (0, _passport.AuthGuard)('jwt') {
    canActivate(context) {
        const ctx = _graphql.GqlExecutionContext.create(context);
        const { req } = ctx.getContext();
        return super.canActivate(new _executioncontexthost.ExecutionContextHost([
            req
        ]));
    }
    handleRequest(err, user) {
        if (err || !user) {
            throw err || new _apollo.AuthenticationError('GqlAuthGuard');
        }
        return user;
    }
};
JwtAuthGuard = _ts_decorate._([
    (0, _common.Injectable)()
], JwtAuthGuard);


/***/ }),
/* 30 */
/***/ ((module) => {

module.exports = require("@nestjs/passport");

/***/ }),
/* 31 */
/***/ ((module) => {

module.exports = require("@nestjs/core/helpers/execution-context-host");

/***/ }),
/* 32 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AccountingService", ({
    enumerable: true,
    get: function() {
        return AccountingService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
const _charttimeframeenum = __webpack_require__(33);
const _path = __webpack_require__(24);
const _promises = __webpack_require__(34);
const _json2csv = __webpack_require__(35);
let AccountingService = class AccountingService {
    constructor(providerTransactionRepository, riderTransactionRepository, driverTransactionRepository, fleetTransactionRepository, shopTransactionRepository, riderWalletRepository, driverWalletRepository, fleetWalletRepository, shopWalletRepository, riderRepository, driverRepository, dataSource){
        this.providerTransactionRepository = providerTransactionRepository;
        this.riderTransactionRepository = riderTransactionRepository;
        this.driverTransactionRepository = driverTransactionRepository;
        this.fleetTransactionRepository = fleetTransactionRepository;
        this.shopTransactionRepository = shopTransactionRepository;
        this.riderWalletRepository = riderWalletRepository;
        this.driverWalletRepository = driverWalletRepository;
        this.fleetWalletRepository = fleetWalletRepository;
        this.shopWalletRepository = shopWalletRepository;
        this.riderRepository = riderRepository;
        this.driverRepository = driverRepository;
        this.dataSource = dataSource;
    }
    incomeChart(timeframe) {
        const vars = this.getQueryVars(timeframe, 'transactionTime');
        return this.providerTransactionRepository.query(`SELECT currency, SUM(amount) as sum, UNIX_TIMESTAMP(ANY_VALUE(transactionTime)) * 1000 AS time from admin_transaction WHERE ${vars.query} GROUP BY currency, ${vars.groupBy}`);
    }
    requestsChart(timeframe) {
        const vars = this.getQueryVars(timeframe, 'requestTimestamp');
        return this.providerTransactionRepository.query(`SELECT COUNT(status) as count, status, UNIX_TIMESTAMP(ANY_VALUE(requestTimestamp)) * 1000 AS time from \`request\` WHERE ${vars.query} GROUP BY ${vars.groupBy}, status`);
    }
    driverRegistrations(timeframe) {
        const vars = this.getQueryVars(timeframe, 'registrationTimestamp');
        return this.driverRepository.query(`SELECT COUNT(id) as count, UNIX_TIMESTAMP(ANY_VALUE(registrationTimestamp)) * 1000 AS time from driver WHERE ${vars.query} GROUP BY ${vars.groupBy}`);
    }
    riderRegistrations(timeframe) {
        const vars = this.getQueryVars(timeframe, 'registrationTimestamp');
        return this.riderRepository.query(`SELECT COUNT(id) as count, UNIX_TIMESTAMP(ANY_VALUE(registrationTimestamp)) * 1000 AS time from rider WHERE ${vars.query} GROUP BY ${vars.groupBy}`);
    }
    getQueryVars(query, timeField) {
        switch(query){
            case _charttimeframeenum.ChartTimeframe.Daily:
                return {
                    groupBy: `DATE(${timeField}),TIME(${timeField})`,
                    query: `DATE(${timeField}) = CURDATE()`
                };
            case _charttimeframeenum.ChartTimeframe.Monthly:
                return {
                    groupBy: `DAYOFYEAR(${timeField}),YEAR(${timeField})`,
                    query: `${timeField} > CURDATE() - INTERVAL 2 MONTH`
                };
            case _charttimeframeenum.ChartTimeframe.Weekly:
                return {
                    groupBy: `WEEKOFYEAR(${timeField}),YEAR(${timeField})`,
                    query: `${timeField} > CURDATE() - INTERVAL 6 MONTH`
                };
            case _charttimeframeenum.ChartTimeframe.Yearly:
                return {
                    groupBy: `MONTH(${timeField}),YEAR(${timeField})`,
                    query: `${timeField} > CURDATE() - INTERVAL 12 MONTH`
                };
        }
    }
    async exportTable(input) {
        const options = {};
        if (input.filters) {
            for (const f of input.filters){
                if (typeof f.value != 'string') continue;
                if (f.value.includes('^')) {
                    const a = f.value.split('^');
                    f.value = (0, _typeorm1.Between)(a[0], a[1]);
                } else if (f.value.startsWith('%') && f.value.endsWith('%')) {
                    f.value = (0, _typeorm1.Like)(f.value);
                } else if (f.value.includes('|')) {
                    const s = f.value.split('|');
                    f.value = (0, _typeorm1.In)(s);
                }
            }
            options.where = input.filters.map((filter)=>{
                const obj = {};
                obj[filter.field] = filter.value;
            });
        }
        if (input.sort) {
            const _sort = {};
            _sort[input.sort.property] = input.sort.direction;
            options.order = _sort;
        }
        if (input.relations != null) {
            options.relations = input.relations;
        }
        const result = await this.dataSource.getRepository(`${input.table}Entity`).find(options);
        if (input.table == 'DriverWallet' && process.env.DEMO_MODE != null) {
            result.forEach((x)=>{
                const length = x.driver.mobileNumber.length;
                x.driver.mobileNumber = `${x.driver.mobileNumber.toString().substring(0, length - 3)}xxxx`;
                x.driver.email = 'Confidential';
            });
        }
        if (input.table == 'RiderWallet' && process.env.DEMO_MODE != null) {
            result.forEach((x)=>{
                const length = x.rider.mobileNumber.length;
                x.rider.mobileNumber = `${x.rider.mobileNumber.toString().substring(0, length - 3)}xxxx`;
                x.rider.email = 'Confidential';
            });
        }
        if (input.type == 'csv') {
            const str = await (0, _json2csv.json2csv)(result);
            const fileName = `${new Date().getTime().toString()}.csv`;
            await (0, _promises.writeFile)((0, _path.join)(process.cwd(), 'uploads', `${new Date().getTime().toString()}.csv`), str);
            return {
                url: `uploads/${fileName}`
            };
        }
        return undefined;
    }
    async totalRevenue(input) {
        const total = await this.providerTransactionRepository.sum('amount', {
            currency: input.currency,
            rechargeType: (0, _typeorm1.In)([
                _database.ProviderRechargeTransactionType.Commission
            ])
        });
        const todayRevenue = await this.providerTransactionRepository.sum('amount', {
            currency: input.currency,
            rechargeType: (0, _typeorm1.In)([
                _database.ProviderRechargeTransactionType.Commission
            ]),
            createdAt: (0, _typeorm1.Between)(new Date(new Date().setHours(0, 0, 0, 0)), new Date(new Date().setHours(23, 59, 59, 999)))
        });
        return {
            total: total ?? 0,
            daily: todayRevenue ?? 0
        };
    }
    async totaloutstandingUserBalances(input) {
        const sumRiderWalletoutstandingUserBalances = (await this.riderWalletRepository.createQueryBuilder().select('SUM(amount)', 'balance').where('currency = :currency', {
            currency: input.currency
        }).getRawOne())?.balance;
        const sumDriverWalletoutstandingUserBalances = (await this.driverWalletRepository.createQueryBuilder().select('SUM(amount)', 'balance').where('currency = :currency', {
            currency: input.currency
        }).getRawOne()).balance;
        const sumFleetWalletoutstandingUserBalances = (await this.fleetWalletRepository.createQueryBuilder().select('SUM(amount)', 'balance').where('currency = :currency', {
            currency: input.currency
        }).getRawOne()).balance;
        const sumShopWalletoutstandingUserBalances = await this.shopWalletRepository.sum('balance', {
            currency: input.currency
        });
        const total = (sumRiderWalletoutstandingUserBalances ?? 0) + (sumDriverWalletoutstandingUserBalances ?? 0) + (sumFleetWalletoutstandingUserBalances ?? 0) + (sumShopWalletoutstandingUserBalances ?? 0);
        const riderToday = await this.riderTransactionRepository.sum('amount', {
            currency: input.currency,
            createdAt: (0, _typeorm1.Between)(new Date(new Date().setHours(0, 0, 0, 0)), new Date(new Date().setHours(23, 59, 59, 999)))
        });
        const driverToday = await this.driverTransactionRepository.sum('amount', {
            currency: input.currency,
            createdAt: (0, _typeorm1.Between)(new Date(new Date().setHours(0, 0, 0, 0)), new Date(new Date().setHours(23, 59, 59, 999)))
        });
        const fleetToday = await this.fleetTransactionRepository.sum('amount', {
            currency: input.currency,
            transactionTimestamp: (0, _typeorm1.Between)(new Date(new Date().setHours(0, 0, 0, 0)), new Date(new Date().setHours(23, 59, 59, 999)))
        });
        const shopToday = await this.shopTransactionRepository.sum('amount', {
            currency: input.currency,
            createdAt: (0, _typeorm1.Between)(new Date(new Date().setHours(0, 0, 0, 0)), new Date(new Date().setHours(23, 59, 59, 999)))
        });
        const daily = (riderToday ?? 0) + (driverToday ?? 0) + (fleetToday ?? 0) + (shopToday ?? 0);
        return {
            total: total ?? 0,
            daily: daily ?? 0
        };
    }
    async totalExpenses(input) {
        const totalExpenses = await this.providerTransactionRepository.sum('amount', {
            currency: input.currency,
            deductType: _database.ProviderDeductTransactionType.Expense
        });
        const todayExpenses = await this.providerTransactionRepository.sum('amount', {
            currency: input.currency,
            deductType: _database.ProviderDeductTransactionType.Expense,
            createdAt: (0, _typeorm1.Between)(new Date(new Date().setHours(0, 0, 0, 0)), new Date(new Date().setHours(23, 59, 59, 999)))
        });
        return {
            total: totalExpenses ?? 0,
            daily: todayExpenses ?? 0
        };
    }
};
AccountingService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ProviderTransactionEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.RiderTransactionEntity)),
    _ts_param._(2, (0, _typeorm.InjectRepository)(_database.DriverTransactionEntity)),
    _ts_param._(3, (0, _typeorm.InjectRepository)(_database.FleetTransactionEntity)),
    _ts_param._(4, (0, _typeorm.InjectRepository)(_database.ShopTransactionEntity)),
    _ts_param._(5, (0, _typeorm.InjectRepository)(_database.RiderWalletEntity)),
    _ts_param._(6, (0, _typeorm.InjectRepository)(_database.DriverWalletEntity)),
    _ts_param._(7, (0, _typeorm.InjectRepository)(_database.FleetWalletEntity)),
    _ts_param._(8, (0, _typeorm.InjectRepository)(_database.ShopWalletEntity)),
    _ts_param._(9, (0, _typeorm.InjectRepository)(_database.CustomerEntity)),
    _ts_param._(10, (0, _typeorm.InjectRepository)(_database.DriverEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.DataSource === "undefined" ? Object : _typeorm1.DataSource
    ])
], AccountingService);


/***/ }),
/* 33 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ChartTimeframe", ({
    enumerable: true,
    get: function() {
        return ChartTimeframe;
    }
}));
const _graphql = __webpack_require__(13);
var ChartTimeframe;
(function(ChartTimeframe) {
    ChartTimeframe["Daily"] = "Daily";
    ChartTimeframe["Weekly"] = "Weekly";
    ChartTimeframe["Monthly"] = "Monthly";
    ChartTimeframe["Yearly"] = "Yearly";
})(ChartTimeframe || (ChartTimeframe = {}));
(0, _graphql.registerEnumType)(ChartTimeframe, {
    name: 'ChartTimeframe'
});


/***/ }),
/* 34 */
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),
/* 35 */
/***/ ((module) => {

module.exports = require("json-2-csv");

/***/ }),
/* 36 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    ExportArgsDTO: function() {
        return ExportArgsDTO;
    },
    ExportFilterArg: function() {
        return ExportFilterArg;
    },
    ExportResultDTO: function() {
        return ExportResultDTO;
    },
    ExportSortArg: function() {
        return ExportSortArg;
    }
});
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerycore = __webpack_require__(37);
const _graphql = __webpack_require__(13);
let ExportResultDTO = class ExportResultDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], ExportResultDTO.prototype, "url", void 0);
ExportResultDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ExportResult')
], ExportResultDTO);
var ExportTable;
(function(ExportTable) {
    ExportTable["ProviderWallet"] = "ProviderWallet";
    ExportTable["DriverWallet"] = "DriverWallet";
    ExportTable["RiderWallet"] = "RiderWallet";
    ExportTable["FleetWallet"] = "FleetWallet";
})(ExportTable || (ExportTable = {}));
(0, _graphql.registerEnumType)(ExportTable, {
    name: 'ExportTable'
});
var ExportType;
(function(ExportType) {
    ExportType["CSV"] = "csv";
})(ExportType || (ExportType = {}));
(0, _graphql.registerEnumType)(ExportType, {
    name: 'ExportType'
});
let ExportSortArg = class ExportSortArg {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ExportSortArg.prototype, "property", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_nestjsquerycore.SortDirection, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _nestjsquerycore.SortDirection === "undefined" ? Object : _nestjsquerycore.SortDirection)
], ExportSortArg.prototype, "direction", void 0);
ExportSortArg = _ts_decorate._([
    (0, _graphql.InputType)('ExportSortArg')
], ExportSortArg);
let ExportArgsDTO = class ExportArgsDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>ExportTable, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ExportArgsDTO.prototype, "table", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            ExportFilterArg
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], ExportArgsDTO.prototype, "filters", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>ExportSortArg, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof ExportSortArg === "undefined" ? Object : ExportSortArg)
], ExportArgsDTO.prototype, "sort", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            String
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], ExportArgsDTO.prototype, "relations", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>ExportType),
    _ts_metadata._("design:type", String)
], ExportArgsDTO.prototype, "type", void 0);
ExportArgsDTO = _ts_decorate._([
    (0, _graphql.InputType)('ExportArgs')
], ExportArgsDTO);
let ExportFilterArg = class ExportFilterArg {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ExportFilterArg.prototype, "field", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ExportFilterArg.prototype, "value", void 0);
ExportFilterArg = _ts_decorate._([
    (0, _graphql.InputType)('ExportFilterArg')
], ExportFilterArg);


/***/ }),
/* 37 */
/***/ ((module) => {

module.exports = require("@ptc-org/nestjs-query-core");

/***/ }),
/* 38 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "IncomeResultItem", ({
    enumerable: true,
    get: function() {
        return IncomeResultItem;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let IncomeResultItem = class IncomeResultItem {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], IncomeResultItem.prototype, "time", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], IncomeResultItem.prototype, "sum", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], IncomeResultItem.prototype, "currency", void 0);
IncomeResultItem = _ts_decorate._([
    (0, _graphql.ObjectType)()
], IncomeResultItem);


/***/ }),
/* 39 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RegistrationResultItemDto", ({
    enumerable: true,
    get: function() {
        return RegistrationResultItemDto;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let RegistrationResultItemDto = class RegistrationResultItemDto {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], RegistrationResultItemDto.prototype, "time", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], RegistrationResultItemDto.prototype, "count", void 0);
RegistrationResultItemDto = _ts_decorate._([
    (0, _graphql.ObjectType)('RegistrationResultItem')
], RegistrationResultItemDto);


/***/ }),
/* 40 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RequestResultItem", ({
    enumerable: true,
    get: function() {
        return RequestResultItem;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let RequestResultItem = class RequestResultItem {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], RequestResultItem.prototype, "time", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], RequestResultItem.prototype, "count", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.OrderStatus),
    _ts_metadata._("design:type", typeof _database.OrderStatus === "undefined" ? Object : _database.OrderStatus)
], RequestResultItem.prototype, "status", void 0);
RequestResultItem = _ts_decorate._([
    (0, _graphql.ObjectType)()
], RequestResultItem);


/***/ }),
/* 41 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TotalDailyPairDTO", ({
    enumerable: true,
    get: function() {
        return TotalDailyPairDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let TotalDailyPairDTO = class TotalDailyPairDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], TotalDailyPairDTO.prototype, "total", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], TotalDailyPairDTO.prototype, "daily", void 0);
TotalDailyPairDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('TotalDailyPair')
], TotalDailyPairDTO);


/***/ }),
/* 42 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ProviderTransactionDTO", ({
    enumerable: true,
    get: function() {
        return ProviderTransactionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let ProviderTransactionDTO = class ProviderTransactionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ProviderTransactionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ProviderTransactionDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.TransactionAction),
    _ts_metadata._("design:type", typeof _database.TransactionAction === "undefined" ? Object : _database.TransactionAction)
], ProviderTransactionDTO.prototype, "action", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ProviderDeductTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ProviderDeductTransactionType === "undefined" ? Object : _database.ProviderDeductTransactionType)
], ProviderTransactionDTO.prototype, "deductType", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ProviderRechargeTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ProviderRechargeTransactionType === "undefined" ? Object : _database.ProviderRechargeTransactionType)
], ProviderTransactionDTO.prototype, "rechargeType", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ProviderExpenseType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ProviderExpenseType === "undefined" ? Object : _database.ProviderExpenseType)
], ProviderTransactionDTO.prototype, "expenseType", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Number)
], ProviderTransactionDTO.prototype, "amount", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], ProviderTransactionDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ProviderTransactionDTO.prototype, "refrenceNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ProviderTransactionDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ProviderTransactionDTO.prototype, "operatorId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        name: 'requestId',
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ProviderTransactionDTO.prototype, "taxiOrderId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ProviderTransactionDTO.prototype, "parkOrderId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ProviderTransactionDTO.prototype, "shopOrderCartId", void 0);
ProviderTransactionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ProviderTransaction')
], ProviderTransactionDTO);


/***/ }),
/* 43 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ProviderWalletDTO", ({
    enumerable: true,
    get: function() {
        return ProviderWalletDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
let ProviderWalletDTO = class ProviderWalletDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ProviderWalletDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], ProviderWalletDTO.prototype, "balance", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String),
    _ts_metadata._("design:type", String)
], ProviderWalletDTO.prototype, "currency", void 0);
ProviderWalletDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ProviderWallet')
], ProviderWalletDTO);


/***/ }),
/* 44 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ProviderTransactionInput", ({
    enumerable: true,
    get: function() {
        return ProviderTransactionInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
let ProviderTransactionInput = class ProviderTransactionInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.TransactionAction),
    _ts_metadata._("design:type", typeof _database.TransactionAction === "undefined" ? Object : _database.TransactionAction)
], ProviderTransactionInput.prototype, "action", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ProviderDeductTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ProviderDeductTransactionType === "undefined" ? Object : _database.ProviderDeductTransactionType)
], ProviderTransactionInput.prototype, "deductType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ProviderRechargeTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ProviderRechargeTransactionType === "undefined" ? Object : _database.ProviderRechargeTransactionType)
], ProviderTransactionInput.prototype, "rechargeType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ProviderExpenseType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ProviderExpenseType === "undefined" ? Object : _database.ProviderExpenseType)
], ProviderTransactionInput.prototype, "expenseType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ProviderTransactionInput.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ProviderTransactionInput.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ProviderTransactionInput.prototype, "refrenceNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ProviderTransactionInput.prototype, "description", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ProviderTransactionInput.prototype, "operatorId", void 0);
ProviderTransactionInput = _ts_decorate._([
    (0, _graphql.InputType)(),
    (0, _nestjsquerygraphql.BeforeCreateOne)((input, context)=>{
        return {
            input: {
                ...input.input,
                operatorId: context.req.user.id
            }
        };
    })
], ProviderTransactionInput);


/***/ }),
/* 45 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AddressModule", ({
    enumerable: true,
    get: function() {
        return AddressModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _addressdto = __webpack_require__(46);
let AddressModule = class AddressModule {
};
AddressModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.RiderAddressEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.RiderAddressEntity,
                        DTOClass: _addressdto.AddressDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        enableTotalCount: true
                    }
                ]
            })
        ]
    })
], AddressModule);


/***/ }),
/* 46 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AddressDTO", ({
    enumerable: true,
    get: function() {
        return AddressDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let AddressDTO = class AddressDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], AddressDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], AddressDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RiderAddressType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.RiderAddressType === "undefined" ? Object : _database.RiderAddressType)
], AddressDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], AddressDTO.prototype, "details", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], AddressDTO.prototype, "location", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], AddressDTO.prototype, "riderId", void 0);
AddressDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Address')
], AddressDTO);


/***/ }),
/* 47 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AdminApiSetupNotFoundController", ({
    enumerable: true,
    get: function() {
        return AdminApiSetupNotFoundController;
    }
}));
const _interop_require_default = __webpack_require__(48);
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _express = __webpack_require__(49);
const _path = __webpack_require__(24);
const _properurljoin = /*#__PURE__*/ _interop_require_default._(__webpack_require__(50));
const _multer = __webpack_require__(51);
const _platformexpress = __webpack_require__(52);
let AdminApiSetupNotFoundController = class AdminApiSetupNotFoundController {
    restart(res) {
        res.send(' Restarting...');
        process.exit(1);
    }
    async upload(file, res) {
        res.send({
            id: '0',
            address: (0, _properurljoin.default)(process.env.CDN_URL, file.filename)
        });
    }
};
_ts_decorate._([
    (0, _common.Get)('/restart'),
    _ts_param._(0, (0, _common.Res)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _express.Response === "undefined" ? Object : _express.Response
    ]),
    _ts_metadata._("design:returntype", void 0)
], AdminApiSetupNotFoundController.prototype, "restart", null);
_ts_decorate._([
    (0, _common.Post)('upload'),
    (0, _common.UseInterceptors)((0, _platformexpress.FileInterceptor)('file', {
        storage: (0, _multer.diskStorage)({
            destination: './config',
            filename: (req, file, cb)=>{
                // Generating a unique filename
                const randomName = Array(32).fill(null).map(()=>Math.round(Math.random() * 16).toString(16)).join('');
                cb(null, `${randomName}${(0, _path.extname)(file.originalname)}`);
            }
        }),
        limits: {
            fileSize: 1024 * 1024 * 10
        }
    })),
    _ts_param._(0, (0, _common.UploadedFile)()),
    _ts_param._(1, (0, _common.Res)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof Express === "undefined" || typeof Express.Multer === "undefined" || typeof Express.Multer.File === "undefined" ? Object : Express.Multer.File,
        typeof _express.Response === "undefined" ? Object : _express.Response
    ]),
    _ts_metadata._("design:returntype", Promise)
], AdminApiSetupNotFoundController.prototype, "upload", null);
AdminApiSetupNotFoundController = _ts_decorate._([
    (0, _common.Controller)()
], AdminApiSetupNotFoundController);


/***/ }),
/* 48 */
/***/ ((module) => {

module.exports = require("@swc/helpers/_/_interop_require_default");

/***/ }),
/* 49 */
/***/ ((module) => {

module.exports = require("express");

/***/ }),
/* 50 */
/***/ ((module) => {

module.exports = require("proper-url-join");

/***/ }),
/* 51 */
/***/ ((module) => {

module.exports = require("multer");

/***/ }),
/* 52 */
/***/ ((module) => {

module.exports = require("@nestjs/platform-express");

/***/ }),
/* 53 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AppController", ({
    enumerable: true,
    get: function() {
        return AppController;
    }
}));
const _interop_require_default = __webpack_require__(48);
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _express = __webpack_require__(49);
const _promises = __webpack_require__(34);
const _firebaseadmin = __webpack_require__(21);
const _restjwtauthguard = __webpack_require__(54);
const _app = __webpack_require__(55);
const _fs = __webpack_require__(19);
const _typeorm = __webpack_require__(16);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(14);
const _platformexpress = __webpack_require__(52);
const _multer = __webpack_require__(51);
const _path = __webpack_require__(24);
const _properurljoin = /*#__PURE__*/ _interop_require_default._(__webpack_require__(50));
let AppController = class AppController {
    constructor(mediaRepository){
        this.mediaRepository = mediaRepository;
    }
    async defaultPath(res) {
        res.send(` Admin API microservice running.\nVersion: 4.0.0`);
    }
    getError() {
        throw new Error('My first Sentry error!');
    }
    async upload(file, req, res) {
        let id = '0';
        if (file) {
            const insert = await this.mediaRepository.insert({
                address: file.filename
            });
            id = insert.raw.insertId.toString();
        }
        const response = {
            id: id,
            address: (0, _properurljoin.default)(process.env.CDN_URL, file.filename)
        };
        res.send(response);
    }
    async reconfig(req, res) {
        const configAddress = `${process.cwd()}/config/config.${process.env.NODE_ENV ?? 'production'}.json`;
        await (0, _promises.rm)(configAddress);
        res.send(' Config file deleted. Restarting...');
        process.exit(1);
    }
    async apps(res) {
        const configAddress = `${process.cwd()}/config/config.${process.env.NODE_ENV ?? 'production'}.json`;
        if ((0, _fs.existsSync)(configAddress)) {
            const file = await (0, _promises.readFile)(configAddress, {
                encoding: 'utf-8'
            });
            const config = JSON.parse(file);
            (0, _app.initializeApp)({
                credential: _firebaseadmin.credential.cert(`${process.cwd()}/config/${config.firebaseProjectPrivateKey}`)
            });
            const apps = await (0, _firebaseadmin.projectManagement)().listAppMetadata();
            const finalListOfApps = [];
            for (const app of apps){
                if (app.platform === 'ANDROID') {
                    const config = JSON.parse(await (0, _firebaseadmin.projectManagement)().androidApp(app.appId).getConfig());
                    finalListOfApps.push({
                        packageName: config.client.filter((c)=>c.client_info.mobilesdk_app_id == app.appId).map((c)=>c.client_info.android_client_info.package_name)[0]
                    });
                }
            }
            res.send(finalListOfApps);
            return finalListOfApps;
        }
        res.status(404).send('Config file not found');
        return 'Config file not found';
    }
};
_ts_decorate._([
    (0, _common.Get)(),
    _ts_param._(0, (0, _common.Res)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _express.Response === "undefined" ? Object : _express.Response
    ]),
    _ts_metadata._("design:returntype", Promise)
], AppController.prototype, "defaultPath", null);
_ts_decorate._([
    (0, _common.Get)('/debug-sentry'),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", void 0)
], AppController.prototype, "getError", null);
_ts_decorate._([
    (0, _common.Post)('upload'),
    (0, _common.UseGuards)(_restjwtauthguard.RestJwtAuthGuard),
    (0, _common.UseInterceptors)((0, _platformexpress.FileInterceptor)('file', {
        storage: (0, _multer.diskStorage)({
            destination: './uploads',
            filename: (req, file, cb)=>{
                // Generating a unique filename
                const randomName = Array(32).fill(null).map(()=>Math.round(Math.random() * 16).toString(16)).join('');
                cb(null, `${randomName}${(0, _path.extname)(file.originalname)}`);
            }
        }),
        limits: {
            fileSize: 1024 * 1024 * 10
        },
        fileFilter: (req, file, cb)=>{
            // Only allow images
            if (!file.originalname.match(/\.(jpg|jpeg|png|gif)$/)) {
                return cb(new Error('Only image files are allowed!'), false);
            }
            cb(null, true);
        }
    })),
    _ts_param._(0, (0, _common.UploadedFile)()),
    _ts_param._(1, (0, _common.Req)()),
    _ts_param._(2, (0, _common.Res)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof Express === "undefined" || typeof Express.Multer === "undefined" || typeof Express.Multer.File === "undefined" ? Object : Express.Multer.File,
        typeof _express.Request === "undefined" ? Object : _express.Request,
        typeof _express.Response === "undefined" ? Object : _express.Response
    ]),
    _ts_metadata._("design:returntype", Promise)
], AppController.prototype, "upload", null);
_ts_decorate._([
    (0, _common.Get)('reconfig'),
    _ts_param._(0, (0, _common.Req)()),
    _ts_param._(1, (0, _common.Res)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _express.Request === "undefined" ? Object : _express.Request,
        typeof _express.Response === "undefined" ? Object : _express.Response
    ]),
    _ts_metadata._("design:returntype", Promise)
], AppController.prototype, "reconfig", null);
_ts_decorate._([
    (0, _common.Get)('apps'),
    _ts_param._(0, (0, _common.Res)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _express.Response === "undefined" ? Object : _express.Response
    ]),
    _ts_metadata._("design:returntype", Promise)
], AppController.prototype, "apps", null);
AppController = _ts_decorate._([
    (0, _common.Controller)(),
    _ts_param._(0, (0, _typeorm1.InjectRepository)(_database.MediaEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.Repository === "undefined" ? Object : _typeorm.Repository
    ])
], AppController);


/***/ }),
/* 54 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RestJwtAuthGuard", ({
    enumerable: true,
    get: function() {
        return RestJwtAuthGuard;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _passport = __webpack_require__(30);
let RestJwtAuthGuard = class RestJwtAuthGuard extends (0, _passport.AuthGuard)('jwt') {
    canActivate(context) {
        return super.canActivate(context);
    }
    handleRequest(err, user) {
        if (err || !user) {
            throw err || new _common.UnauthorizedException('REST API Auth blocked reqeust.');
        }
        return user;
    }
};
RestJwtAuthGuard = _ts_decorate._([
    (0, _common.Injectable)()
], RestJwtAuthGuard);


/***/ }),
/* 55 */
/***/ ((module) => {

module.exports = require("firebase-admin/app");

/***/ }),
/* 56 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AnnouncementModule", ({
    enumerable: true,
    get: function() {
        return AnnouncementModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _database = __webpack_require__(15);
const _announcementdto = __webpack_require__(57);
const _jwtauthguard = __webpack_require__(29);
const _announcementinput = __webpack_require__(59);
let AnnouncementModule = class AnnouncementModule {
};
AnnouncementModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.AnnouncementEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.AnnouncementEntity,
                        DTOClass: _announcementdto.AnnouncementDTO,
                        CreateDTOClass: _announcementinput.AnnouncementInput,
                        UpdateDTOClass: _announcementinput.AnnouncementInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    }
                ]
            })
        ]
    })
], AnnouncementModule);


/***/ }),
/* 57 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AnnouncementDTO", ({
    enumerable: true,
    get: function() {
        return AnnouncementDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _announcementauthorizer = __webpack_require__(58);
let AnnouncementDTO = class AnnouncementDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], AnnouncementDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], AnnouncementDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], AnnouncementDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], AnnouncementDTO.prototype, "url", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.AnnouncementUserType
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], AnnouncementDTO.prototype, "userType", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.AppType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.AppType === "undefined" ? Object : _database.AppType)
], AnnouncementDTO.prototype, "appType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], AnnouncementDTO.prototype, "startAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], AnnouncementDTO.prototype, "expireAt", void 0);
AnnouncementDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Announcement'),
    (0, _nestjsquerygraphql.Authorize)(_announcementauthorizer.AnnouncementAuthorizer)
], AnnouncementDTO);


/***/ }),
/* 58 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AnnouncementAuthorizer", ({
    enumerable: true,
    get: function() {
        return AnnouncementAuthorizer;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _typeorm = __webpack_require__(16);
let AnnouncementAuthorizer = class AnnouncementAuthorizer {
    constructor(datasource){
        this.datasource = datasource;
    }
    async authorize(context, authorizerContext) {
        const operator = await this.datasource.getRepository(_database.OperatorEntity).findOne({
            where: {
                id: context.req.user.id
            },
            relations: {
                role: true
            }
        });
        if (authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Announcements_View)) {
            throw new _common.UnauthorizedException();
        }
        if (!authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Announcements_Edit)) {
            throw new _common.UnauthorizedException();
        }
        return undefined;
    }
};
AnnouncementAuthorizer = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.DataSource === "undefined" ? Object : _typeorm.DataSource
    ])
], AnnouncementAuthorizer);


/***/ }),
/* 59 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AnnouncementInput", ({
    enumerable: true,
    get: function() {
        return AnnouncementInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let AnnouncementInput = class AnnouncementInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], AnnouncementInput.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], AnnouncementInput.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], AnnouncementInput.prototype, "url", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AppType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.AppType === "undefined" ? Object : _database.AppType)
], AnnouncementInput.prototype, "appType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.AnnouncementUserType
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], AnnouncementInput.prototype, "userType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], AnnouncementInput.prototype, "startAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], AnnouncementInput.prototype, "expireAt", void 0);
AnnouncementInput = _ts_decorate._([
    (0, _graphql.InputType)()
], AnnouncementInput);


/***/ }),
/* 60 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AuthModule", ({
    enumerable: true,
    get: function() {
        return AuthModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _jwt = __webpack_require__(61);
const _passport = __webpack_require__(30);
const _operatormodule = __webpack_require__(62);
const _authresolver = __webpack_require__(76);
const _authservice = __webpack_require__(77);
const _jwtstrategy = __webpack_require__(79);
let AuthModule = class AuthModule {
};
AuthModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _operatormodule.OperatorModule,
            _passport.PassportModule,
            _jwt.JwtModule.register({
                secret: 'secret'
            })
        ],
        providers: [
            _jwtstrategy.JwtStrategy,
            _authservice.AuthService,
            _authresolver.AuthResolver
        ]
    })
], AuthModule);


/***/ }),
/* 61 */
/***/ ((module) => {

module.exports = require("@nestjs/jwt");

/***/ }),
/* 62 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OperatorModule", ({
    enumerable: true,
    get: function() {
        return OperatorModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _operatorroledto = __webpack_require__(63);
const _operatordto = __webpack_require__(65);
const _createoperatorinput = __webpack_require__(69);
const _operatorservice = __webpack_require__(70);
const _operatorresolver = __webpack_require__(71);
const _operatorroleinput = __webpack_require__(74);
const _operatorsessiondto = __webpack_require__(67);
const _promises = __webpack_require__(34);
const _licenseverify = __webpack_require__(22);
const _typeorm = __webpack_require__(14);
const _typeorm1 = __webpack_require__(16);
const _fs = __webpack_require__(19);
const _updateoperatorinput = __webpack_require__(75);
let OperatorModule = class OperatorModule {
    constructor(operatorRoleRepository, operatorRepository){
        this.operatorRoleRepository = operatorRoleRepository;
        this.operatorRepository = operatorRepository;
    }
    async onModuleInit() {
        const operators = await this.operatorRepository.find();
        if (operators.length > 0) {
            return;
        }
        const fileAddress = `${process.cwd()}/config/credentials.json`;
        if (!(0, _fs.existsSync)(fileAddress)) {
            return;
        }
        const file = await (0, _promises.readFile)(`${process.cwd()}/config/credentials.json`, {
            encoding: 'utf-8'
        });
        const config = JSON.parse(file);
        // restart AdminApiModule
        const operatorRole = this.operatorRoleRepository.create();
        operatorRole.title = 'Admin';
        operatorRole.permissions = Object.values(_database.OperatorPermission);
        if (config.taxi != null) {
            operatorRole.taxiPermissions = Object.values(_database.TaxiPermission);
        } else {
            operatorRole.taxiPermissions = [];
        }
        if (config.shop) {
            operatorRole.shopPermissions = Object.values(_database.ShopPermission);
        } else {
            operatorRole.shopPermissions = [];
        }
        if (config.parking) {
            operatorRole.parkingPermissions = Object.values(_database.ParkingPermission);
        } else {
            operatorRole.parkingPermissions = [];
        }
        operatorRole.allowedApps = [
            config.taxi ? _licenseverify.AppType.Taxi : null,
            config.shop ? _licenseverify.AppType.Shop : null,
            config.parking ? _licenseverify.AppType.Parking : null
        ].filter((app)=>app != null);
        const role = await this.operatorRoleRepository.save(operatorRole);
        const operator = this.operatorRepository.create();
        operator.email = config.email;
        operator.firstName = config.firstName;
        operator.lastName = config.lastName;
        operator.password = config.password;
        operator.role = role;
        operator.mobileNumber = config.phoneNumber;
        operator.userName = config.email;
        this.operatorRepository.save(operator);
        // delete file
        await (0, _promises.unlink)(fileAddress);
    }
};
OperatorModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.OperatorEntity,
                        _database.OperatorRoleEntity,
                        _database.OperatorSessionEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.OperatorRoleEntity,
                        DTOClass: _operatorroledto.OperatorRoleDTO,
                        CreateDTOClass: _operatorroleinput.OperatorRoleInput,
                        UpdateDTOClass: _operatorroleinput.OperatorRoleInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.OperatorEntity,
                        DTOClass: _operatordto.OperatorDTO,
                        CreateDTOClass: _createoperatorinput.CreateOperatorInput,
                        UpdateDTOClass: _updateoperatorinput.UpdateOperatorInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.OperatorSessionEntity,
                        DTOClass: _operatorsessiondto.OperatorSessionDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        enableTotalCount: true
                    }
                ]
            })
        ],
        providers: [
            _operatorservice.OperatorService,
            _operatorresolver.OperatorResolver
        ],
        exports: [
            _operatorservice.OperatorService
        ]
    }),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.OperatorRoleEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.OperatorEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], OperatorModule);


/***/ }),
/* 63 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OperatorRoleDTO", ({
    enumerable: true,
    get: function() {
        return OperatorRoleDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _operatorauthorizer = __webpack_require__(64);
let OperatorRoleDTO = class OperatorRoleDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OperatorRoleDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], OperatorRoleDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.OperatorPermission
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], OperatorRoleDTO.prototype, "permissions", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.TaxiPermission
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], OperatorRoleDTO.prototype, "taxiPermissions", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.ShopPermission
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], OperatorRoleDTO.prototype, "shopPermissions", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.ParkingPermission
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], OperatorRoleDTO.prototype, "parkingPermissions", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.AppType
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], OperatorRoleDTO.prototype, "allowedApps", void 0);
OperatorRoleDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('OperatorRole'),
    (0, _nestjsquerygraphql.Authorize)(_operatorauthorizer.OperatorAuthorizer)
], OperatorRoleDTO);


/***/ }),
/* 64 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OperatorAuthorizer", ({
    enumerable: true,
    get: function() {
        return OperatorAuthorizer;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _typeorm = __webpack_require__(16);
let OperatorAuthorizer = class OperatorAuthorizer {
    constructor(datasource){
        this.datasource = datasource;
    }
    async authorize(context, authorizerContext) {
        const operator = await this.datasource.getRepository(_database.OperatorEntity).findOne({
            where: {
                id: context.req.user.id
            },
            relations: {
                role: true
            }
        });
        if (authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Users_View)) {
            throw new _common.UnauthorizedException();
        }
        if (!authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Users_Edit)) {
            throw new _common.UnauthorizedException();
        }
        return undefined;
    }
};
OperatorAuthorizer = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.DataSource === "undefined" ? Object : _typeorm.DataSource
    ])
], OperatorAuthorizer);


/***/ }),
/* 65 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OperatorDTO", ({
    enumerable: true,
    get: function() {
        return OperatorDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _operatorroledto = __webpack_require__(63);
const _operatorauthorizer = __webpack_require__(64);
const _mediadto = __webpack_require__(66);
const _operatorsessiondto = __webpack_require__(67);
const _database = __webpack_require__(15);
let OperatorDTO = class OperatorDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OperatorDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], OperatorDTO.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OperatorDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OperatorDTO.prototype, "updatedAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], OperatorDTO.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], OperatorDTO.prototype, "userName", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], OperatorDTO.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OperatorDTO.prototype, "lastActivity", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.EnabledNotification
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], OperatorDTO.prototype, "enabledNotifications", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], OperatorDTO.prototype, "isBlocked", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], OperatorDTO.prototype, "email", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], OperatorDTO.prototype, "roleId", void 0);
OperatorDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Operator'),
    (0, _nestjsquerygraphql.Relation)('role', ()=>_operatorroledto.OperatorRoleDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('media', ()=>_mediadto.MediaDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('sessions', ()=>_operatorsessiondto.OperatorSessionDTO),
    (0, _nestjsquerygraphql.Authorize)(_operatorauthorizer.OperatorAuthorizer)
], OperatorDTO);


/***/ }),
/* 66 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "MediaDTO", ({
    enumerable: true,
    get: function() {
        return MediaDTO;
    }
}));
const _interop_require_default = __webpack_require__(48);
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _properurljoin = /*#__PURE__*/ _interop_require_default._(__webpack_require__(50));
let MediaDTO = class MediaDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], MediaDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        middleware: [
            async (ctx, next)=>{
                let value = await next();
                value = (0, _properurljoin.default)(process.env.CDN_URL, value);
                return value;
            }
        ]
    }),
    _ts_metadata._("design:type", String)
], MediaDTO.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], MediaDTO.prototype, "base64", void 0);
MediaDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Media')
], MediaDTO);


/***/ }),
/* 67 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OperatorSessionDTO", ({
    enumerable: true,
    get: function() {
        return OperatorSessionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _sessioninfodto = __webpack_require__(68);
let OperatorSessionDTO = class OperatorSessionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OperatorSessionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_sessioninfodto.SessionInfoDTO),
    _ts_metadata._("design:type", typeof _sessioninfodto.SessionInfoDTO === "undefined" ? Object : _sessioninfodto.SessionInfoDTO)
], OperatorSessionDTO.prototype, "sessionInfo", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OperatorSessionDTO.prototype, "operatorId", void 0);
OperatorSessionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('OperatorSession')
], OperatorSessionDTO);


/***/ }),
/* 68 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SessionInfoDTO", ({
    enumerable: true,
    get: function() {
        return SessionInfoDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let SessionInfoDTO = class SessionInfoDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], SessionInfoDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], SessionInfoDTO.prototype, "lastActivityAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SessionInfoDTO.prototype, "ip", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SessionInfoDTO.prototype, "ipLocation", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SessionInfoDTO.prototype, "deviceName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AppType),
    _ts_metadata._("design:type", typeof _database.AppType === "undefined" ? Object : _database.AppType)
], SessionInfoDTO.prototype, "appType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.DevicePlatform),
    _ts_metadata._("design:type", typeof _database.DevicePlatform === "undefined" ? Object : _database.DevicePlatform)
], SessionInfoDTO.prototype, "devicePlatform", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.DeviceType),
    _ts_metadata._("design:type", typeof _database.DeviceType === "undefined" ? Object : _database.DeviceType)
], SessionInfoDTO.prototype, "deviceType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], SessionInfoDTO.prototype, "token", void 0);
SessionInfoDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('SessionInfo')
], SessionInfoDTO);


/***/ }),
/* 69 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateOperatorInput", ({
    enumerable: true,
    get: function() {
        return CreateOperatorInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _operatorauthorizer = __webpack_require__(64);
let CreateOperatorInput = class CreateOperatorInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateOperatorInput.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateOperatorInput.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateOperatorInput.prototype, "userName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateOperatorInput.prototype, "password", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateOperatorInput.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateOperatorInput.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateOperatorInput.prototype, "roleId", void 0);
CreateOperatorInput = _ts_decorate._([
    (0, _graphql.InputType)(),
    (0, _nestjsquerygraphql.Authorize)(_operatorauthorizer.OperatorAuthorizer)
], CreateOperatorInput);


/***/ }),
/* 70 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OperatorService", ({
    enumerable: true,
    get: function() {
        return OperatorService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _apollo = __webpack_require__(3);
const _typeorm1 = __webpack_require__(16);
let OperatorService = class OperatorService {
    constructor(repo, sessionRepo){
        this.repo = repo;
        this.sessionRepo = sessionRepo;
    }
    async validateCredentials(userName, password) {
        return this.repo.findOneBy({
            userName,
            password
        });
    }
    terminateSession(id) {
        return this.sessionRepo.delete(id);
    }
    async getById(id) {
        return this.repo.findOneBy({
            id
        });
    }
    async hasPermission(id, permission) {
        const operator = await this.repo.findOneOrFail({
            where: {
                id
            },
            relations: {
                role: true
            }
        });
        const hasPermission = operator.role.permissions.includes(permission);
        if (!hasPermission) throw new _apollo.ForbiddenError('PERMISSION_NOT_GRANTED');
        return operator;
    }
    async hasPermissionBoolean(id, permission) {
        const operator = await this.repo.findOneOrFail({
            where: {
                id
            },
            relations: {
                role: true
            }
        });
        return operator.role.permissions.includes(permission);
    }
    async updateProfile(input) {
        const user = await this.getById(input.id);
        if (!user) throw new _apollo.ForbiddenError('USER_NOT_FOUND');
        // check if the new username is already taken
        if (input.update.userName) {
            const userWithSameUserName = await this.repo.findOneBy({
                userName: input.update.userName
            });
            if (userWithSameUserName && userWithSameUserName.id !== user.id) {
                throw new _apollo.ForbiddenError('USERNAME_ALREADY_TAKEN');
            }
        }
        await this.repo.update(user.id, input.update);
        return this.getById(user.id);
    }
    async currentUserSessions(staffId) {
        return this.sessionRepo.find({
            where: {
                operatorId: staffId
            }
        });
    }
};
OperatorService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.OperatorEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.OperatorSessionEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], OperatorService);


/***/ }),
/* 71 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OperatorResolver", ({
    enumerable: true,
    get: function() {
        return OperatorResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _apollo = __webpack_require__(3);
const _jwtauthguard = __webpack_require__(29);
const _operatordto = __webpack_require__(65);
const _updatepasswordinput = __webpack_require__(72);
const _operatorservice = __webpack_require__(70);
const _updateprofileinput = __webpack_require__(73);
const _operatorsessiondto = __webpack_require__(67);
let OperatorResolver = class OperatorResolver {
    constructor(service, context){
        this.service = service;
        this.context = context;
    }
    async updatePassword(input) {
        if (process.env.DEMO_MODE != null) {
            throw new _apollo.ForbiddenError('Action not allowed in demo mode.');
        }
        const operator = await this.service.getById(this.context.req.user.id);
        if (operator.password != input.oldPassword) {
            throw new _apollo.ForbiddenError("Old password don't match");
        }
        await this.service.repo.update(operator.id, {
            password: input.newPasswod
        });
        operator.password = input.newPasswod;
        return operator;
    }
    async terminateStaffSession(id) {
        if (process.env.DEMO_MODE != null) {
            throw new _apollo.ForbiddenError('Action not allowed in demo mode.');
        }
        const result = await this.service.terminateSession(id);
        return result.affected > 0;
    }
    async updateProfile(input) {
        if (process.env.DEMO_MODE != null) {
            throw new _apollo.ForbiddenError('Action not allowed in demo mode.');
        }
        return this.service.updateProfile({
            id: this.context.req.user.id,
            update: input
        });
    }
    async currentUserSessions() {
        if (process.env.DEMO_MODE != null) {
            return [];
        }
        const result = await this.service.currentUserSessions(this.context.req.user.id);
        return result;
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_operatordto.OperatorDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_updatepasswordinput.UpdatePasswordInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _updatepasswordinput.UpdatePasswordInput === "undefined" ? Object : _updatepasswordinput.UpdatePasswordInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], OperatorResolver.prototype, "updatePassword", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>Boolean),
    _ts_param._(0, (0, _graphql.Args)('id', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], OperatorResolver.prototype, "terminateStaffSession", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_operatordto.OperatorDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_updateprofileinput.UpdateProfileInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _updateprofileinput.UpdateProfileInput === "undefined" ? Object : _updateprofileinput.UpdateProfileInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], OperatorResolver.prototype, "updateProfile", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _operatorsessiondto.OperatorSessionDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], OperatorResolver.prototype, "currentUserSessions", null);
OperatorResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(1, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _operatorservice.OperatorService === "undefined" ? Object : _operatorservice.OperatorService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], OperatorResolver);


/***/ }),
/* 72 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdatePasswordInput", ({
    enumerable: true,
    get: function() {
        return UpdatePasswordInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let UpdatePasswordInput = class UpdatePasswordInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], UpdatePasswordInput.prototype, "oldPassword", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], UpdatePasswordInput.prototype, "newPassword", void 0);
UpdatePasswordInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdatePasswordInput);


/***/ }),
/* 73 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateProfileInput", ({
    enumerable: true,
    get: function() {
        return UpdateProfileInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let UpdateProfileInput = class UpdateProfileInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateProfileInput.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateProfileInput.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateProfileInput.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateProfileInput.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateProfileInput.prototype, "userName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateProfileInput.prototype, "mediaId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.EnabledNotification
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], UpdateProfileInput.prototype, "enabledNotifications", void 0);
UpdateProfileInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateProfileInput);


/***/ }),
/* 74 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OperatorRoleInput", ({
    enumerable: true,
    get: function() {
        return OperatorRoleInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let OperatorRoleInput = class OperatorRoleInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], OperatorRoleInput.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.OperatorPermission
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], OperatorRoleInput.prototype, "permissions", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.TaxiPermission
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], OperatorRoleInput.prototype, "taxiPermissions", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.ShopPermission
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], OperatorRoleInput.prototype, "shopPermissions", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.ParkingPermission
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], OperatorRoleInput.prototype, "parkingPermissions", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.AppType
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], OperatorRoleInput.prototype, "allowedApps", void 0);
OperatorRoleInput = _ts_decorate._([
    (0, _graphql.InputType)()
], OperatorRoleInput);


/***/ }),
/* 75 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateOperatorInput", ({
    enumerable: true,
    get: function() {
        return UpdateOperatorInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _operatorauthorizer = __webpack_require__(64);
let UpdateOperatorInput = class UpdateOperatorInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateOperatorInput.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateOperatorInput.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateOperatorInput.prototype, "userName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateOperatorInput.prototype, "password", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateOperatorInput.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateOperatorInput.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateOperatorInput.prototype, "roleId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], UpdateOperatorInput.prototype, "isBlocked", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            String
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], UpdateOperatorInput.prototype, "enabledNotifications", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateOperatorInput.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateOperatorInput.prototype, "mediaId", void 0);
UpdateOperatorInput = _ts_decorate._([
    (0, _graphql.InputType)(),
    (0, _nestjsquerygraphql.Authorize)(_operatorauthorizer.OperatorAuthorizer)
], UpdateOperatorInput);


/***/ }),
/* 76 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AuthResolver", ({
    enumerable: true,
    get: function() {
        return AuthResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _operatordto = __webpack_require__(65);
const _authservice = __webpack_require__(77);
const _tokendto = __webpack_require__(78);
const _jwtauthguard = __webpack_require__(29);
let AuthResolver = class AuthResolver {
    constructor(authService, context){
        this.authService = authService;
        this.context = context;
    }
    //@UseGuards(LocalAdminAuthGuard)
    async login(userName, password) {
        const token = await this.authService.loginAdmin({
            userName,
            password
        });
        return {
            token
        };
    }
    async me() {
        return this.authService.getAdmin(this.context.req.user.id);
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>_tokendto.TokenObject),
    _ts_param._(0, (0, _graphql.Args)('userName', {
        type: ()=>String
    })),
    _ts_param._(1, (0, _graphql.Args)('password', {
        type: ()=>String
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String,
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], AuthResolver.prototype, "login", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_operatordto.OperatorDTO),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], AuthResolver.prototype, "me", null);
AuthResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_param._(1, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _authservice.AuthService === "undefined" ? Object : _authservice.AuthService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], AuthResolver);


/***/ }),
/* 77 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AuthService", ({
    enumerable: true,
    get: function() {
        return AuthService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _common = __webpack_require__(7);
const _jwt = __webpack_require__(61);
const _apollo = __webpack_require__(3);
const _operatorservice = __webpack_require__(70);
let AuthService = class AuthService {
    constructor(jwtService, adminService){
        this.jwtService = jwtService;
        this.adminService = adminService;
    }
    async getAdmin(id) {
        return this.adminService.getById(id);
    }
    async loginAdmin(args) {
        const admin = await this.adminService.validateCredentials(args.userName, args.password);
        if (admin == null) {
            throw new _apollo.ForbiddenError('Invalid Credentials');
        }
        return this.jwtService.sign({
            id: admin.id
        });
    }
};
AuthService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _jwt.JwtService === "undefined" ? Object : _jwt.JwtService,
        typeof _operatorservice.OperatorService === "undefined" ? Object : _operatorservice.OperatorService
    ])
], AuthService);


/***/ }),
/* 78 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TokenObject", ({
    enumerable: true,
    get: function() {
        return TokenObject;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let TokenObject = class TokenObject {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], TokenObject.prototype, "token", void 0);
TokenObject = _ts_decorate._([
    (0, _graphql.ObjectType)()
], TokenObject);


/***/ }),
/* 79 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    JwtStrategy: function() {
        return JwtStrategy;
    },
    validateToken: function() {
        return validateToken;
    }
});
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _passportjwt = __webpack_require__(80);
const _passport = __webpack_require__(30);
const _common = __webpack_require__(7);
const _jwtdecode = __webpack_require__(81);
let JwtStrategy = class JwtStrategy extends (0, _passport.PassportStrategy)(_passportjwt.Strategy, 'jwt') {
    // Use JwtBaseStrategy here
    constructor(){
        super({
            jwtFromRequest: _passportjwt.ExtractJwt.fromAuthHeaderAsBearerToken(),
            ignoreExpiration: false,
            secretOrKey: 'secret'
        });
    }
    async validate(payload) {
        // The 'payload' here is the decoded JWT payload.
        // Ensure that your JWT actually contains an 'id' property if you're returning { id: payload.id }.
        return payload;
    }
};
JwtStrategy = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [])
], JwtStrategy);
async function validateToken(token) {
    try {
        const res = (0, _jwtdecode.jwtDecode)(token);
        return {
            id: res.id
        };
    } catch (error) {
        console.error('Error decoding token:', error);
        throw new Error('Invalid token');
    }
}


/***/ }),
/* 80 */
/***/ ((module) => {

module.exports = require("passport-jwt");

/***/ }),
/* 81 */
/***/ ((module) => {

module.exports = require("jwt-decode");

/***/ }),
/* 82 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CarModule", ({
    enumerable: true,
    get: function() {
        return CarModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _carcolordto = __webpack_require__(83);
const _carmodeldto = __webpack_require__(85);
const _carcolorinput = __webpack_require__(86);
const _carmodelinput = __webpack_require__(87);
let CarModule = class CarModule {
};
CarModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.CarColorEntity,
                        _database.CarModelEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.CarModelEntity,
                        DTOClass: _carmodeldto.CarModelDTO,
                        CreateDTOClass: _carmodelinput.CarModelInput,
                        UpdateDTOClass: _carmodelinput.CarModelInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.CarColorEntity,
                        DTOClass: _carcolordto.CarColorDTO,
                        CreateDTOClass: _carcolorinput.CarColorInput,
                        UpdateDTOClass: _carcolorinput.CarColorInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    }
                ]
            })
        ]
    })
], CarModule);


/***/ }),
/* 83 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CarColorDTO", ({
    enumerable: true,
    get: function() {
        return CarColorDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _carauthorizer = __webpack_require__(84);
let CarColorDTO = class CarColorDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CarColorDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], CarColorDTO.prototype, "name", void 0);
CarColorDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('CarColor'),
    (0, _nestjsquerygraphql.Authorize)(_carauthorizer.CarAuthorizer)
], CarColorDTO);


/***/ }),
/* 84 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CarAuthorizer", ({
    enumerable: true,
    get: function() {
        return CarAuthorizer;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _typeorm = __webpack_require__(16);
let CarAuthorizer = class CarAuthorizer {
    constructor(datasource){
        this.datasource = datasource;
    }
    async authorize(context, authorizerContext) {
        const operator = await this.datasource.getRepository(_database.OperatorEntity).findOne({
            where: {
                id: context.req.user.id
            },
            relations: {
                role: true
            }
        });
        if (authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Cars_View)) {
            throw new _common.UnauthorizedException();
        }
        if (!authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Cars_Edit)) {
            if (authorizerContext.operationGroup === 'create' || authorizerContext.operationGroup === 'update' || authorizerContext.operationGroup === 'delete') {
                throw new _common.UnauthorizedException();
            }
        }
        return undefined;
    }
};
CarAuthorizer = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.DataSource === "undefined" ? Object : _typeorm.DataSource
    ])
], CarAuthorizer);


/***/ }),
/* 85 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CarModelDTO", ({
    enumerable: true,
    get: function() {
        return CarModelDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _carauthorizer = __webpack_require__(84);
let CarModelDTO = class CarModelDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CarModelDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], CarModelDTO.prototype, "name", void 0);
CarModelDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('CarModel'),
    (0, _nestjsquerygraphql.Authorize)(_carauthorizer.CarAuthorizer)
], CarModelDTO);


/***/ }),
/* 86 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CarColorInput", ({
    enumerable: true,
    get: function() {
        return CarColorInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CarColorInput = class CarColorInput {
};
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", String)
], CarColorInput.prototype, "name", void 0);
CarColorInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CarColorInput);


/***/ }),
/* 87 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CarModelInput", ({
    enumerable: true,
    get: function() {
        return CarModelInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CarModelInput = class CarModelInput {
};
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", String)
], CarModelInput.prototype, "name", void 0);
CarModelInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CarModelInput);


/***/ }),
/* 88 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ConfigurationModule", ({
    enumerable: true,
    get: function() {
        return ConfigurationModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _axios = __webpack_require__(12);
const _common = __webpack_require__(7);
const _configurationcontroller = __webpack_require__(89);
const _configurationresolver = __webpack_require__(90);
const _configurationservice = __webpack_require__(91);
const _licenseverify = __webpack_require__(22);
let ConfigurationModule = class ConfigurationModule {
};
ConfigurationModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _axios.HttpModule,
            _licenseverify.LicenseVerifyModule
        ],
        providers: [
            _configurationservice.ConfigurationService,
            _configurationresolver.ConfigurationResolver
        ],
        controllers: [
            _configurationcontroller.ConfigurationController
        ]
    })
], ConfigurationModule);


/***/ }),
/* 89 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ConfigurationController", ({
    enumerable: true,
    get: function() {
        return ConfigurationController;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _express = __webpack_require__(49);
const _platformexpress = __webpack_require__(52);
const _multer = __webpack_require__(51);
const _path = __webpack_require__(24);
let ConfigurationController = class ConfigurationController {
    constructor(){}
    async upload(file, res) {
        res.send({
            address: file.filename
        });
    }
};
_ts_decorate._([
    (0, _common.Post)('upload'),
    (0, _common.UseInterceptors)((0, _platformexpress.FileInterceptor)('file', {
        storage: (0, _multer.diskStorage)({
            destination: './uploads',
            filename: (req, file, cb)=>{
                // Generating a unique filename
                const randomName = Array(32).fill(null).map(()=>Math.round(Math.random() * 16).toString(16)).join('');
                cb(null, `${randomName}${(0, _path.extname)(file.originalname)}`);
            }
        }),
        limits: {
            fileSize: 1024 * 1024 * 10
        }
    })),
    _ts_param._(0, (0, _common.UploadedFile)()),
    _ts_param._(1, (0, _common.Res)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof Express === "undefined" || typeof Express.Multer === "undefined" || typeof Express.Multer.File === "undefined" ? Object : Express.Multer.File,
        typeof _express.Response === "undefined" ? Object : _express.Response
    ]),
    _ts_metadata._("design:returntype", Promise)
], ConfigurationController.prototype, "upload", null);
ConfigurationController = _ts_decorate._([
    (0, _common.Controller)('config'),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [])
], ConfigurationController);


/***/ }),
/* 90 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ConfigurationResolver", ({
    enumerable: true,
    get: function() {
        return ConfigurationResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _configurationservice = __webpack_require__(91);
const _updateconfiginput = __webpack_require__(92);
const _updateconfiginput1 = __webpack_require__(93);
let ConfigurationResolver = class ConfigurationResolver {
    constructor(configurationService){
        this.configurationService = configurationService;
    }
    async configInformation() {
        const config = await this.configurationService.getConfiguration();
        return {
            isValid: config.firebaseProjectPrivateKey != null && config.adminPanelAPIKey != null && config.mysqlDatabase != null,
            config
        };
    }
    async licenseInformation() {
        return this.configurationService.getLicenseInformation();
    }
    async updateConfigurations(input) {
        await this.configurationService.updateConfig(input);
        return {
            status: _database.UpdateConfigStatus.OK
        };
    }
    async currentConfiguration() {
        const currentConfig = await this.configurationService.getConfiguration();
        if (process.env.DEMO_MODE != null) {
            return {
                purchaseCode: 'RESTRICTED',
                adminPanelAPIKey: currentConfig.adminPanelAPIKey,
                firebaseProjectPrivateKey: currentConfig.firebaseProjectPrivateKey
            };
        }
        return currentConfig;
    }
    async updatePurchaseCode(purchaseCode, email) {
        return this.configurationService.updatePurchaseCode(purchaseCode, email);
    }
    async updateMapsAPIKey(backend, adminPanel) {
        return this.configurationService.updateMapsAPIKey(backend, adminPanel);
    }
    async updateFirebase(keyFileName) {
        return this.configurationService.updateFirebase(keyFileName);
    }
    async disablePreviousServer(ip, purchaseCode) {
        return this.configurationService.disablePreviousServer({
            ip,
            purchaseCode
        });
    }
    async saveConfiguration(input) {
        return this.configurationService.saveConfiguration(input);
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>_database.ConfigInformation),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], ConfigurationResolver.prototype, "configInformation", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_database.LicenseInformationDTO, {
        nullable: true
    }),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], ConfigurationResolver.prototype, "licenseInformation", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_database.UpdateConfigResult),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_updateconfiginput1.UpdateConfigInputV2
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _updateconfiginput1.UpdateConfigInputV2 === "undefined" ? Object : _updateconfiginput1.UpdateConfigInputV2
    ]),
    _ts_metadata._("design:returntype", Promise)
], ConfigurationResolver.prototype, "updateConfigurations", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_database.CurrentConfiguration),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], ConfigurationResolver.prototype, "currentConfiguration", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_database.UpdatePurchaseCodeResult),
    _ts_param._(0, (0, _graphql.Args)('purchaseCode', {
        type: ()=>String
    })),
    _ts_param._(1, (0, _graphql.Args)('email', {
        type: ()=>String,
        nullable: true
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String,
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], ConfigurationResolver.prototype, "updatePurchaseCode", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_database.UpdateConfigResult, {
        deprecationReason: 'Use updateConfigurations instead'
    }),
    _ts_param._(0, (0, _graphql.Args)('backend', {
        type: ()=>String
    })),
    _ts_param._(1, (0, _graphql.Args)('adminPanel', {
        type: ()=>String
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String,
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], ConfigurationResolver.prototype, "updateMapsAPIKey", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_database.UpdateConfigResult, {
        deprecationReason: 'Use updateConfigurations instead'
    }),
    _ts_param._(0, (0, _graphql.Args)('keyFileName', {
        type: ()=>String
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], ConfigurationResolver.prototype, "updateFirebase", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_database.UpdateConfigResult),
    _ts_param._(0, (0, _graphql.Args)('ip', {
        type: ()=>String
    })),
    _ts_param._(1, (0, _graphql.Args)('purchaseCode', {
        type: ()=>String,
        nullable: true
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String,
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], ConfigurationResolver.prototype, "disablePreviousServer", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_database.CurrentConfiguration, {
        deprecationReason: 'Use updateConfigurations instead'
    }),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_updateconfiginput.UpdateConfigInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _database.CurrentConfiguration === "undefined" ? Object : _database.CurrentConfiguration
    ]),
    _ts_metadata._("design:returntype", Promise)
], ConfigurationResolver.prototype, "saveConfiguration", null);
ConfigurationResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _configurationservice.ConfigurationService === "undefined" ? Object : _configurationservice.ConfigurationService
    ])
], ConfigurationResolver);


/***/ }),
/* 91 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ConfigurationService", ({
    enumerable: true,
    get: function() {
        return ConfigurationService;
    }
}));
const _interop_require_wildcard = __webpack_require__(2);
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _axios = __webpack_require__(12);
const _common = __webpack_require__(7);
const _rxjs = __webpack_require__(23);
const _database = __webpack_require__(15);
const _fs = /*#__PURE__*/ _interop_require_wildcard._(__webpack_require__(19));
const _apollo = __webpack_require__(3);
const _licenseverify = __webpack_require__(22);
let ConfigurationService = class ConfigurationService {
    constructor(licenseVerifyService, httpService){
        this.licenseVerifyService = licenseVerifyService;
        this.httpService = httpService;
    }
    async getLicenseInformation() {
        _common.Logger.log('License information', 'ConfigurationService');
        _common.Logger.log(this.licenseVerifyService.licenseInformation, 'ConfigurationService');
        if (this.licenseVerifyService.licenseInformation == null) {
            return null;
        }
        return {
            license: {
                buyerName: this.licenseVerifyService.licenseInformation?.data.buyerName ?? '-',
                licenseType: this.licenseVerifyService.licenseInformation?.data.licenseType ?? _database.LicenseType.Regular,
                supportExpireDate: this.licenseVerifyService.licenseInformation?.data.supportExpiry == null ? null : new Date(this.licenseVerifyService.licenseInformation?.data.supportExpiry),
                connectedApps: this.licenseVerifyService.licenseInformation?.data.connectedApps ?? [],
                platformAddons: this.licenseVerifyService.licenseInformation?.data.platformAddOns ?? []
            },
            benefits: this.licenseVerifyService.licenseInformation?.data.benefits ?? [],
            drawbacks: this.licenseVerifyService.licenseInformation?.data.drawbacks ?? [],
            availableUpgrades: this.licenseVerifyService.licenseInformation?.data.availableUpgrades ?? []
        };
    }
    async getConfiguration() {
        const config = await (0, _licenseverify.getConfig)(process.env.NODE_ENV ?? 'production');
        return config ?? new _database.CurrentConfiguration();
    }
    async saveConfiguration(newConfig) {
        const config = await this.getConfiguration();
        _common.Logger.log(JSON.stringify(config), 'ConfigurationService.saveConfiguration.config');
        if (process.env.DEMO_MODE?.toLowerCase() == 'true') {
            throw new _apollo.ForbiddenError('Cannot change configuration in demo mode.');
        }
        const finalConfig = Object.assign(config, newConfig);
        const str = JSON.stringify(finalConfig);
        await _fs.promises.mkdir(`${process.cwd()}/config`, {
            recursive: true
        });
        await _fs.promises.writeFile(`${process.cwd()}/config/config.${process.env.NODE_ENV ?? 'production'}.json`, str);
        return true;
    }
    async updateConfig(input) {
        if (process.env.DEMO_MODE?.toLowerCase() == 'true') {
            throw new _apollo.ForbiddenError('Cannot change configuration in demo mode.');
        }
        await this.saveConfiguration(input);
        const str = JSON.stringify({
            input
        });
        await _fs.promises.writeFile(`${process.cwd()}/config/credentials.json`, str);
        setTimeout(async ()=>{
            _common.Logger.log('Restarting services', 'Configuration');
            await (0, _rxjs.firstValueFrom)(this.httpService.get('http://taxi-rider-api:3000/restart'));
            await (0, _rxjs.firstValueFrom)(this.httpService.get('http://taxi-driver-api:3000/restart'));
            process.exit(0);
        }, 1000);
        return this.getConfiguration();
    }
    maskString(str) {
        if (str == null) {
            return null;
        }
        return str.split('').map(()=>'*').join('');
    }
    async updatePurchaseCode(code, email) {
        const license = await this.licenseVerifyService.verifyLicense({
            purchaseCode: code,
            email: email
        });
        _common.Logger.log(license, 'ConfigurationService.updatePurchaseCode.license');
        if (license.status == 'OK') {
            await this.saveConfiguration({
                purchaseCode: code
            });
            return {
                status: _database.UpdatePurchaseCodeStatus.OK,
                data: {
                    license: {
                        buyerName: license.data?.buyerName ?? 'Unknown',
                        licenseType: license.data?.licenseType ?? _database.LicenseType.Regular,
                        supportExpireDate: license.data != null ? new Date() : null,
                        connectedApps: license.data?.connectedApps ?? [],
                        platformAddons: license.data.platformAddOns ?? []
                    },
                    benefits: license.data?.benefits ?? [],
                    drawbacks: license.data?.drawbacks ?? [],
                    availableUpgrades: license.data?.availableUpgrades ?? []
                }
            };
        } else if (license.status == 'USED') {
            return {
                status: _database.UpdatePurchaseCodeStatus.CLIENT_FOUND,
                clients: license.clients.map((client)=>({
                        ...client,
                        lastVerifiedAt: client.lastVerifiedAt == null ? null : new Date(client.lastVerifiedAt),
                        firstVerifiedAt: new Date(client.firstVerifiedAt)
                    }))
            };
        } else {
            return {
                status: _database.UpdatePurchaseCodeStatus.INVALID
            };
        }
    }
    async updateMapsAPIKey(backend, adminPanel) {
        await this.saveConfiguration({
            backendMapsAPIKey: backend,
            adminPanelAPIKey: adminPanel
        });
        return {
            status: _database.UpdateConfigStatus.OK
        };
    }
    async updateFirebase(keyFileName) {
        await this.saveConfiguration({
            firebaseProjectPrivateKey: keyFileName
        });
        setTimeout(async ()=>{
            _common.Logger.log('Restarting services', 'Configuration');
            await (0, _rxjs.firstValueFrom)(this.httpService.get('http://taxi-rider-api:3000/restart'));
            await (0, _rxjs.firstValueFrom)(this.httpService.get('http://taxi-driver-api:3000/restart'));
            process.exit(0);
        }, 1000);
        return {
            status: _database.UpdateConfigStatus.OK
        };
    }
    async disablePreviousServer(input) {
        const result = await this.licenseVerifyService.deactivteClient({
            purchaseCode: input.purchaseCode,
            ip: input.ip
        });
        if (result == 'OK') {
            return {
                status: _database.UpdateConfigStatus.OK
            };
        } else {
            return {
                status: _database.UpdateConfigStatus.INVALID
            };
        }
    }
};
ConfigurationService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _licenseverify.LicenseVerifyService === "undefined" ? Object : _licenseverify.LicenseVerifyService,
        typeof _axios.HttpService === "undefined" ? Object : _axios.HttpService
    ])
], ConfigurationService);


/***/ }),
/* 92 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateConfigInput", ({
    enumerable: true,
    get: function() {
        return UpdateConfigInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let UpdateConfigInput = class UpdateConfigInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInput.prototype, "backendMapsAPIKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInput.prototype, "adminPanelAPIKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInput.prototype, "twilioAccountSid", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInput.prototype, "twilioAuthToken", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInput.prototype, "twilioFromNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInput.prototype, "twilioVerificationCodeSMSTemplate", void 0);
UpdateConfigInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateConfigInput);


/***/ }),
/* 93 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateConfigInputV2", ({
    enumerable: true,
    get: function() {
        return UpdateConfigInputV2;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let UpdateConfigInputV2 = class UpdateConfigInputV2 {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "phoneNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "password", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "profilePicture", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "adminPanelAPIKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "backendMapsAPIKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "companyLogo", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "companyName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AppConfigInfoDTO, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.AppConfigInfoDTO === "undefined" ? Object : _database.AppConfigInfoDTO)
], UpdateConfigInputV2.prototype, "taxi", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AppConfigInfoDTO, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.AppConfigInfoDTO === "undefined" ? Object : _database.AppConfigInfoDTO)
], UpdateConfigInputV2.prototype, "shop", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AppConfigInfoDTO, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.AppConfigInfoDTO === "undefined" ? Object : _database.AppConfigInfoDTO)
], UpdateConfigInputV2.prototype, "parking", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "mysqlHost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateConfigInputV2.prototype, "mysqlPort", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "mysqlUser", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "mysqlPassword", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "mysqlDatabase", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "redisHost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateConfigInputV2.prototype, "redisPort", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "redisPassword", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateConfigInputV2.prototype, "redisDb", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateConfigInputV2.prototype, "firebaseProjectPrivateKey", void 0);
UpdateConfigInputV2 = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateConfigInputV2);


/***/ }),
/* 94 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CouponModule", ({
    enumerable: true,
    get: function() {
        return CouponModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _coupondto = __webpack_require__(95);
const _couponinput = __webpack_require__(137);
const _campaigndto = __webpack_require__(138);
const _campaigncodedto = __webpack_require__(139);
const _couponservice = __webpack_require__(140);
const _couponresolver = __webpack_require__(141);
let CouponModule = class CouponModule {
};
CouponModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.CouponEntity,
                        _database.CampaignEntity,
                        _database.CampaignCodeEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.CouponEntity,
                        DTOClass: _coupondto.CouponDTO,
                        CreateDTOClass: _couponinput.CouponInput,
                        UpdateDTOClass: _couponinput.CouponInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.CampaignEntity,
                        DTOClass: _campaigndto.CampaignDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.CampaignCodeEntity,
                        DTOClass: _campaigncodedto.CampaignCodeDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        }
                    }
                ]
            })
        ],
        providers: [
            _couponservice.CouponService,
            _couponresolver.CouponResolver
        ]
    })
], CouponModule);


/***/ }),
/* 95 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CouponDTO", ({
    enumerable: true,
    get: function() {
        return CouponDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _servicedto = __webpack_require__(96);
const _couponauthorizer = __webpack_require__(136);
let CouponDTO = class CouponDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CouponDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CouponDTO.prototype, "code", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CouponDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CouponDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CouponDTO.prototype, "manyUsersCanUse", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CouponDTO.prototype, "manyTimesUserCanUse", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CouponDTO.prototype, "minimumCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CouponDTO.prototype, "maximumCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CouponDTO.prototype, "startAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CouponDTO.prototype, "expireAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CouponDTO.prototype, "discountPercent", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CouponDTO.prototype, "discountFlat", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CouponDTO.prototype, "creditGift", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], CouponDTO.prototype, "isEnabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], CouponDTO.prototype, "isFirstTravelOnly", void 0);
CouponDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Coupon'),
    (0, _nestjsquerygraphql.UnPagedRelation)('allowedServices', ()=>_servicedto.ServiceDTO),
    (0, _nestjsquerygraphql.Authorize)(_couponauthorizer.CouponAuthorizer)
], CouponDTO);


/***/ }),
/* 96 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceDTO", ({
    enumerable: true,
    get: function() {
        return ServiceDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _regiondto = __webpack_require__(97);
const _mediadto = __webpack_require__(66);
const _serviceoptiondto = __webpack_require__(134);
const _serviceauthorizer = __webpack_require__(131);
let ServiceDTO = class ServiceDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String),
    _ts_metadata._("design:type", String)
], ServiceDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ServiceDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.TaxiOrderType
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ServiceDTO.prototype, "orderTypes", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "personCapacity", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "categoryId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "baseFare", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "roundingFactor", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "perHundredMeters", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "perMinuteDrive", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "perMinuteWait", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "prepayPercent", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "minimumFee", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "searchRadius", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ServicePaymentMethod, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ServicePaymentMethod === "undefined" ? Object : _database.ServicePaymentMethod)
], ServiceDTO.prototype, "paymentMethod", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "cancellationTotalFee", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "cancellationDriverShare", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "providerSharePercent", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "providerShareFlat", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], ServiceDTO.prototype, "twoWayAvailable", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "maximumDestinationDistance", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.TimeMultiplier
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ServiceDTO.prototype, "timeMultipliers", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.DistanceMultiplier
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ServiceDTO.prototype, "distanceMultipliers", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.WeekdayMultiplier
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ServiceDTO.prototype, "weekdayMultipliers", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.DateRangeMultiplier
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ServiceDTO.prototype, "dateRangeMultipliers", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceDTO.prototype, "mediaId", void 0);
ServiceDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Service'),
    (0, _nestjsquerygraphql.UnPagedRelation)('regions', ()=>_regiondto.RegionDTO, {
        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
        update: {
            enabled: true
        }
    }),
    (0, _nestjsquerygraphql.Relation)('media', ()=>_mediadto.MediaDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('options', ()=>_serviceoptiondto.ServiceOptionDTO, {
        update: {
            enabled: true
        }
    }),
    (0, _nestjsquerygraphql.Authorize)(_serviceauthorizer.ServiceAuthorizer)
], ServiceDTO);


/***/ }),
/* 97 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RegionDTO", ({
    enumerable: true,
    get: function() {
        return RegionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _regionauthorizer = __webpack_require__(98);
const _orderdto = __webpack_require__(99);
const _regioncategorydto = __webpack_require__(135);
let RegionDTO = class RegionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RegionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String),
    _ts_metadata._("design:type", String)
], RegionDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String),
    _ts_metadata._("design:type", String)
], RegionDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], RegionDTO.prototype, "enabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            [
                _database.Point
            ]
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], RegionDTO.prototype, "location", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RegionDTO.prototype, "categoryId", void 0);
RegionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Region'),
    (0, _nestjsquerygraphql.Authorize)(_regionauthorizer.RegionAuthorizer),
    (0, _nestjsquerygraphql.OffsetConnection)('taxiOrders', ()=>_orderdto.OrderDTO, {
        enableAggregate: true
    }),
    (0, _nestjsquerygraphql.Relation)('category', ()=>_regioncategorydto.RegionCategoryDTO, {
        nullable: true
    })
], RegionDTO);


/***/ }),
/* 98 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RegionAuthorizer", ({
    enumerable: true,
    get: function() {
        return RegionAuthorizer;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _typeorm = __webpack_require__(16);
let RegionAuthorizer = class RegionAuthorizer {
    constructor(datasource){
        this.datasource = datasource;
    }
    async authorize(context, authorizerContext) {
        const operator = await this.datasource.getRepository(_database.OperatorEntity).findOne({
            where: {
                id: context.req.user.id
            },
            relations: {
                role: true
            }
        });
        if (authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Regions_View)) {
            throw new _common.UnauthorizedException();
        }
        if (!authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Regions_Edit)) {
            throw new _common.UnauthorizedException();
        }
        return undefined;
    }
};
RegionAuthorizer = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.DataSource === "undefined" ? Object : _typeorm.DataSource
    ])
], RegionAuthorizer);


/***/ }),
/* 99 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderDTO", ({
    enumerable: true,
    get: function() {
        return OrderDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _providertransactiondto = __webpack_require__(42);
const _taxisupportrequestdto = __webpack_require__(100);
const _coupondto = __webpack_require__(95);
const _drivertransactiondto = __webpack_require__(102);
const _driverdto = __webpack_require__(116);
const _fleettransactiondto = __webpack_require__(126);
const _ridertransactiondto = __webpack_require__(109);
const _customerdto = __webpack_require__(110);
const _servicedto = __webpack_require__(96);
const _ordermessagedto = __webpack_require__(127);
const _requestactivitydto = __webpack_require__(128);
const _paymentgatewaydto = __webpack_require__(107);
const _savedpaymentmethoddto = __webpack_require__(115);
const _fleetdto = __webpack_require__(129);
const _serviceoptiondto = __webpack_require__(134);
let OrderDTO = class OrderDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OrderDTO.prototype, "createdOn", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OrderDTO.prototype, "startTimestamp", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OrderDTO.prototype, "finishTimestamp", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.OrderStatus),
    _ts_metadata._("design:type", typeof _database.OrderStatus === "undefined" ? Object : _database.OrderStatus)
], OrderDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "distanceBest", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "durationBest", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "costBest", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "costAfterCoupon", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "waitCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "rideOptionsCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "taxCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "serviceCost", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], OrderDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "destinationArrivedTo", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "waitMinutes", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            String
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], OrderDTO.prototype, "addresses", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.Point
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], OrderDTO.prototype, "points", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OrderDTO.prototype, "expectedTimestamp", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "riderId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.PaymentMode, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.PaymentMode === "undefined" ? Object : _database.PaymentMode)
], OrderDTO.prototype, "paymentMode", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "regionId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "fleetId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], OrderDTO.prototype, "serviceId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.Point
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], OrderDTO.prototype, "directions", void 0);
OrderDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Order'),
    (0, _nestjsquerygraphql.Relation)('driver', ()=>_driverdto.DriverDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('rider', ()=>_customerdto.CustomerDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('service', ()=>_servicedto.ServiceDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('coupon', ()=>_coupondto.CouponDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('paymentGateway', ()=>_paymentgatewaydto.PaymentGatewayDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('savedPaymentMethod', ()=>_savedpaymentmethoddto.SavedPaymentMethodDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('complaints', ()=>_taxisupportrequestdto.TaxiSupportRequestDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('conversation', ()=>_ordermessagedto.OrderMessageDTO, {
        relationName: 'conversation'
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('riderTransactions', ()=>_ridertransactiondto.RiderTransactionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('driverTransactions', ()=>_drivertransactiondto.DriverTransactionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('fleetTransactions', ()=>_fleettransactiondto.FleetTransactionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('providerTransactions', ()=>_providertransactiondto.ProviderTransactionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('activities', ()=>_requestactivitydto.RequestActivityDTO),
    (0, _nestjsquerygraphql.Relation)('fleet', ()=>_fleetdto.FleetDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('options', ()=>_serviceoptiondto.ServiceOptionDTO)
], OrderDTO);


/***/ }),
/* 100 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiSupportRequestDTO", ({
    enumerable: true,
    get: function() {
        return TaxiSupportRequestDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _orderdto = __webpack_require__(99);
const _taxisupportrequestactivitydto = __webpack_require__(101);
const _operatordto = __webpack_require__(65);
let TaxiSupportRequestDTO = class TaxiSupportRequestDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], TaxiSupportRequestDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiSupportRequestDTO.prototype, "inscriptionTimestamp", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Boolean)
], TaxiSupportRequestDTO.prototype, "requestedByDriver", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], TaxiSupportRequestDTO.prototype, "subject", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], TaxiSupportRequestDTO.prototype, "content", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ComplaintStatus),
    _ts_metadata._("design:type", typeof _database.ComplaintStatus === "undefined" ? Object : _database.ComplaintStatus)
], TaxiSupportRequestDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], TaxiSupportRequestDTO.prototype, "requestId", void 0);
TaxiSupportRequestDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('TaxiSupportRequest'),
    (0, _nestjsquerygraphql.UnPagedRelation)('activities', ()=>_taxisupportrequestactivitydto.TaxiSupportRequestActivityDTO, {
        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE
    }),
    (0, _nestjsquerygraphql.FilterableRelation)('order', ()=>_orderdto.OrderDTO, {
        relationName: 'request'
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('assignedToStaffs', ()=>_operatordto.OperatorDTO, {
        disableFilter: true,
        disableSort: true
    })
], TaxiSupportRequestDTO);


/***/ }),
/* 101 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiSupportRequestActivityDTO", ({
    enumerable: true,
    get: function() {
        return TaxiSupportRequestActivityDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _operatordto = __webpack_require__(65);
let TaxiSupportRequestActivityDTO = class TaxiSupportRequestActivityDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], TaxiSupportRequestActivityDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiSupportRequestActivityDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ComplaintActivityType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ComplaintActivityType === "undefined" ? Object : _database.ComplaintActivityType)
], TaxiSupportRequestActivityDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], TaxiSupportRequestActivityDTO.prototype, "comment", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ComplaintStatus, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ComplaintStatus === "undefined" ? Object : _database.ComplaintStatus)
], TaxiSupportRequestActivityDTO.prototype, "statusFrom", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ComplaintStatus, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ComplaintStatus === "undefined" ? Object : _database.ComplaintStatus)
], TaxiSupportRequestActivityDTO.prototype, "statusTo", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], TaxiSupportRequestActivityDTO.prototype, "complaintId", void 0);
TaxiSupportRequestActivityDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('TaxiSupportRequestActivity'),
    (0, _nestjsquerygraphql.Relation)('actor', ()=>_operatordto.OperatorDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('assignedToStaffs', ()=>_operatordto.OperatorDTO, {
        disableFilter: true,
        disableSort: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('unassignedFromStaffs', ()=>_operatordto.OperatorDTO, {
        disableFilter: true,
        disableSort: true
    })
], TaxiSupportRequestActivityDTO);


/***/ }),
/* 102 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverTransactionDTO", ({
    enumerable: true,
    get: function() {
        return DriverTransactionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _operatordto = __webpack_require__(65);
const _payoutaccountdto = __webpack_require__(103);
const _driverdto = __webpack_require__(116);
const _paymentgatewaydto = __webpack_require__(107);
const _savedpaymentmethoddto = __webpack_require__(115);
const _payoutmethoddto = __webpack_require__(104);
let DriverTransactionDTO = class DriverTransactionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverTransactionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], DriverTransactionDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.TransactionAction),
    _ts_metadata._("design:type", typeof _database.TransactionAction === "undefined" ? Object : _database.TransactionAction)
], DriverTransactionDTO.prototype, "action", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.TransactionStatus),
    _ts_metadata._("design:type", typeof _database.TransactionStatus === "undefined" ? Object : _database.TransactionStatus)
], DriverTransactionDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.DriverDeductTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.DriverDeductTransactionType === "undefined" ? Object : _database.DriverDeductTransactionType)
], DriverTransactionDTO.prototype, "deductType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.DriverRechargeTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.DriverRechargeTransactionType === "undefined" ? Object : _database.DriverRechargeTransactionType)
], DriverTransactionDTO.prototype, "rechargeType", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Number)
], DriverTransactionDTO.prototype, "amount", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], DriverTransactionDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverTransactionDTO.prototype, "refrenceNumber", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverTransactionDTO.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverTransactionDTO.prototype, "paymentGatewayId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverTransactionDTO.prototype, "payoutSessionId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverTransactionDTO.prototype, "payoutAccountId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverTransactionDTO.prototype, "payoutMethodId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverTransactionDTO.prototype, "payoutSessionMethodId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverTransactionDTO.prototype, "operatorId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverTransactionDTO.prototype, "requestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverTransactionDTO.prototype, "description", void 0);
DriverTransactionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('DriverTransaction'),
    (0, _nestjsquerygraphql.Relation)('operator', ()=>_operatordto.OperatorDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('driver', ()=>_driverdto.DriverDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('payoutAccount', ()=>_payoutaccountdto.PayoutAccountDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.FilterableRelation)('payoutMethod', ()=>_payoutmethoddto.PayoutMethodDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('paymentGateway', ()=>_paymentgatewaydto.PaymentGatewayDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('savedPaymentMethod', ()=>_savedpaymentmethoddto.SavedPaymentMethodDTO, {
        nullable: true
    })
], DriverTransactionDTO);


/***/ }),
/* 103 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PayoutAccountDTO", ({
    enumerable: true,
    get: function() {
        return PayoutAccountDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _payoutmethoddto = __webpack_require__(104);
let PayoutAccountDTO = class PayoutAccountDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], PayoutAccountDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], PayoutAccountDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.SavedPaymentMethodType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.SavedPaymentMethodType === "undefined" ? Object : _database.SavedPaymentMethodType)
], PayoutAccountDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], PayoutAccountDTO.prototype, "last4", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], PayoutAccountDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], PayoutAccountDTO.prototype, "payoutMethodId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Boolean)
], PayoutAccountDTO.prototype, "isDefault", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PayoutAccountDTO.prototype, "accountNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PayoutAccountDTO.prototype, "routingNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PayoutAccountDTO.prototype, "accountHolderName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PayoutAccountDTO.prototype, "bankName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PayoutAccountDTO.prototype, "branchName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PayoutAccountDTO.prototype, "accountHolderAddress", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PayoutAccountDTO.prototype, "accountHolderCity", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PayoutAccountDTO.prototype, "accountHolderState", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PayoutAccountDTO.prototype, "accountHolderZip", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PayoutAccountDTO.prototype, "accountHolderCountry", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PayoutAccountDTO.prototype, "accountHolderPhone", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], PayoutAccountDTO.prototype, "accountHolderDateOfBirth", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], PayoutAccountDTO.prototype, "isVerified", void 0);
PayoutAccountDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('PayoutAccount'),
    (0, _nestjsquerygraphql.Relation)('payoutMethod', ()=>_payoutmethoddto.PayoutMethodDTO)
], PayoutAccountDTO);


/***/ }),
/* 104 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PayoutMethodDTO", ({
    enumerable: true,
    get: function() {
        return PayoutMethodDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _mediadto = __webpack_require__(66);
const _drivertransactiondto = __webpack_require__(102);
const _stripe = __webpack_require__(105);
const _payoutauthorizer = __webpack_require__(106);
const _paymentgatewaydto = __webpack_require__(107);
let PayoutMethodDTO = class PayoutMethodDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], PayoutMethodDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Boolean)
], PayoutMethodDTO.prototype, "enabled", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], PayoutMethodDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], PayoutMethodDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PayoutMethodDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.PayoutMethodType),
    _ts_metadata._("design:type", typeof _database.PayoutMethodType === "undefined" ? Object : _database.PayoutMethodType)
], PayoutMethodDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true,
        middleware: [
            _paymentgatewaydto.apiKeyMasker
        ]
    }),
    _ts_metadata._("design:type", String)
], PayoutMethodDTO.prototype, "publicKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true,
        middleware: [
            _paymentgatewaydto.apiKeyMasker
        ]
    }),
    _ts_metadata._("design:type", String)
], PayoutMethodDTO.prototype, "privateKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true,
        middleware: [
            _paymentgatewaydto.apiKeyMasker
        ]
    }),
    _ts_metadata._("design:type", String)
], PayoutMethodDTO.prototype, "saltKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true,
        middleware: [
            _paymentgatewaydto.apiKeyMasker
        ]
    }),
    _ts_metadata._("design:type", String)
], PayoutMethodDTO.prototype, "merchantId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], PayoutMethodDTO.prototype, "mediaId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true,
        middleware: [
            async (context, next)=>{
                if (context.source.type === _database.PayoutMethodType.Stripe) {
                    const stripe = new _stripe.Stripe(context.source.privateKey, {
                        apiVersion: '2022-11-15'
                    });
                    const balance = await stripe.balance.retrieve();
                    return balance.available.find((balance)=>balance.currency.toLowerCase() === context.source.currency.toLowerCase())?.amount ?? 0;
                }
                return null;
            }
        ]
    }),
    _ts_metadata._("design:type", Number)
], PayoutMethodDTO.prototype, "balance", void 0);
PayoutMethodDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('PayoutMethod'),
    (0, _nestjsquerygraphql.Relation)('media', ()=>_mediadto.MediaDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.FilterableRelation)('driverTransactions', ()=>_drivertransactiondto.DriverTransactionDTO),
    (0, _nestjsquerygraphql.Authorize)(_payoutauthorizer.PayoutAuthorizer)
], PayoutMethodDTO);


/***/ }),
/* 105 */
/***/ ((module) => {

module.exports = require("stripe");

/***/ }),
/* 106 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PayoutAuthorizer", ({
    enumerable: true,
    get: function() {
        return PayoutAuthorizer;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _typeorm = __webpack_require__(16);
let PayoutAuthorizer = class PayoutAuthorizer {
    constructor(datasource){
        this.datasource = datasource;
    }
    async authorize(context, authorizerContext) {
        const operator = await this.datasource.getRepository(_database.OperatorEntity).findOne({
            where: {
                id: context.req.user.id
            },
            relations: {
                role: true
            }
        });
        if (authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Payouts_View)) {
            throw new _common.UnauthorizedException();
        }
        if (!authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Payouts_Edit)) {
            if (authorizerContext.operationGroup === 'create' || authorizerContext.operationGroup === 'update' || authorizerContext.operationGroup === 'delete') {
                throw new _common.UnauthorizedException();
            }
        }
        return undefined;
    }
};
PayoutAuthorizer = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.DataSource === "undefined" ? Object : _typeorm.DataSource
    ])
], PayoutAuthorizer);


/***/ }),
/* 107 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    PaymentGatewayDTO: function() {
        return PaymentGatewayDTO;
    },
    apiKeyMasker: function() {
        return apiKeyMasker;
    }
});
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _mediadto = __webpack_require__(66);
const _gatewayauthorizer = __webpack_require__(108);
const _ridertransactiondto = __webpack_require__(109);
const apiKeyMasker = async (ctx, next)=>{
    let value = await next();
    if (process.env.DEMO_MODE != null && value != null && value.length > 0) {
        value = value.toString().split('').map(()=>'*').join('');
    }
    return value;
};
let PaymentGatewayDTO = class PaymentGatewayDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], PaymentGatewayDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Boolean)
], PaymentGatewayDTO.prototype, "enabled", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], PaymentGatewayDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.PaymentGatewayType),
    _ts_metadata._("design:type", typeof _database.PaymentGatewayType === "undefined" ? Object : _database.PaymentGatewayType)
], PaymentGatewayDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true,
        middleware: [
            apiKeyMasker
        ]
    }),
    _ts_metadata._("design:type", String)
], PaymentGatewayDTO.prototype, "publicKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        middleware: [
            apiKeyMasker
        ]
    }),
    _ts_metadata._("design:type", String)
], PaymentGatewayDTO.prototype, "privateKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true,
        middleware: [
            apiKeyMasker
        ]
    }),
    _ts_metadata._("design:type", String)
], PaymentGatewayDTO.prototype, "merchantId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true,
        middleware: [
            apiKeyMasker
        ]
    }),
    _ts_metadata._("design:type", String)
], PaymentGatewayDTO.prototype, "saltKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], PaymentGatewayDTO.prototype, "mediaId", void 0);
PaymentGatewayDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('PaymentGateway'),
    (0, _nestjsquerygraphql.Authorize)(_gatewayauthorizer.GatewayAuthorizer),
    (0, _nestjsquerygraphql.Relation)('media', ()=>_mediadto.MediaDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.OffsetConnection)('riderTransactions', ()=>_ridertransactiondto.RiderTransactionDTO, {
        enableAggregate: true
    })
], PaymentGatewayDTO);


/***/ }),
/* 108 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "GatewayAuthorizer", ({
    enumerable: true,
    get: function() {
        return GatewayAuthorizer;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _typeorm = __webpack_require__(16);
let GatewayAuthorizer = class GatewayAuthorizer {
    constructor(datasource){
        this.datasource = datasource;
    }
    async authorize(context, authorizerContext) {
        const operator = await this.datasource.getRepository(_database.OperatorEntity).findOne({
            where: {
                id: context.req.user.id
            },
            relations: {
                role: true
            }
        });
        if (authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Gateways_View)) {
            throw new _common.UnauthorizedException();
        }
        if (!authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Gateways_Edit)) {
            throw new _common.UnauthorizedException();
        }
        return undefined;
    }
};
GatewayAuthorizer = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.DataSource === "undefined" ? Object : _typeorm.DataSource
    ])
], GatewayAuthorizer);


/***/ }),
/* 109 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderTransactionDTO", ({
    enumerable: true,
    get: function() {
        return RiderTransactionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _operatordto = __webpack_require__(65);
const _paymentgatewaydto = __webpack_require__(107);
const _customerdto = __webpack_require__(110);
const _savedpaymentmethoddto = __webpack_require__(115);
let RiderTransactionDTO = class RiderTransactionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.TransactionAction),
    _ts_metadata._("design:type", typeof _database.TransactionAction === "undefined" ? Object : _database.TransactionAction)
], RiderTransactionDTO.prototype, "action", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], RiderTransactionDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.RiderDeductTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.RiderDeductTransactionType === "undefined" ? Object : _database.RiderDeductTransactionType)
], RiderTransactionDTO.prototype, "deductType", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.RiderRechargeTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.RiderRechargeTransactionType === "undefined" ? Object : _database.RiderRechargeTransactionType)
], RiderTransactionDTO.prototype, "rechargeType", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.TransactionStatus),
    _ts_metadata._("design:type", typeof _database.TransactionStatus === "undefined" ? Object : _database.TransactionStatus)
], RiderTransactionDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "amount", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String),
    _ts_metadata._("design:type", String)
], RiderTransactionDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderTransactionDTO.prototype, "refrenceNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderTransactionDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "riderId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "paymentGatewayId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "savedPaymentMethodId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "operatorId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        name: 'requestId',
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "taxiOrderId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "shopOrderId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "parkOrderParkOwnerId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], RiderTransactionDTO.prototype, "parkOrderCustomerId", void 0);
RiderTransactionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('RiderTransaction'),
    (0, _nestjsquerygraphql.Relation)('operator', ()=>_operatordto.OperatorDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('paymentGateway', ()=>_paymentgatewaydto.PaymentGatewayDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('savedPaymentMethod', ()=>_savedpaymentmethoddto.SavedPaymentMethodDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('rider', ()=>_customerdto.CustomerDTO)
], RiderTransactionDTO);


/***/ }),
/* 110 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CustomerDTO", ({
    enumerable: true,
    get: function() {
        return CustomerDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _numbermaskermiddleware = __webpack_require__(111);
const _orderdto = __webpack_require__(99);
const _mediadto = __webpack_require__(66);
const _rideraddressdto = __webpack_require__(112);
const _ridertransactiondto = __webpack_require__(109);
const _riderwalletdto = __webpack_require__(113);
const _parkingwalletdto = __webpack_require__(114);
let CustomerDTO = class CustomerDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CustomerDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.RiderStatus),
    _ts_metadata._("design:type", typeof _database.RiderStatus === "undefined" ? Object : _database.RiderStatus)
], CustomerDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CustomerDTO.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CustomerDTO.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true,
        description: 'Country ISO code. For example "GB" for United Kingdom, "CA" for Canada, "AU" for Australia, etc.'
    }),
    _ts_metadata._("design:type", String)
], CustomerDTO.prototype, "countryIso", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CustomerDTO.prototype, "lastActivityAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String, {
        middleware: [
            _numbermaskermiddleware.numberMasker
        ]
    }),
    _ts_metadata._("design:type", String)
], CustomerDTO.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CustomerDTO.prototype, "registrationTimestamp", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CustomerDTO.prototype, "email", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.Gender, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.Gender === "undefined" ? Object : _database.Gender)
], CustomerDTO.prototype, "gender", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], CustomerDTO.prototype, "isResident", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CustomerDTO.prototype, "idNumber", void 0);
CustomerDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Rider'),
    (0, _nestjsquerygraphql.OffsetConnection)('addresses', ()=>_rideraddressdto.RiderAddressDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('wallet', ()=>_riderwalletdto.RiderWalletDTO, {
        relationName: 'wallets'
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('parkingWallets', ()=>_parkingwalletdto.ParkingWalletDTO),
    (0, _nestjsquerygraphql.OffsetConnection)('transactions', ()=>_ridertransactiondto.RiderTransactionDTO),
    (0, _nestjsquerygraphql.OffsetConnection)('orders', ()=>_orderdto.OrderDTO, {
        enableAggregate: true
    }),
    (0, _nestjsquerygraphql.Relation)('media', ()=>_mediadto.MediaDTO, {
        nullable: true
    })
], CustomerDTO);


/***/ }),
/* 111 */
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "numberMasker", ({
    enumerable: true,
    get: function() {
        return numberMasker;
    }
}));
const numberMasker = async (ctx, next)=>{
    let value = await next();
    const length = value.toString().length;
    if (process.env.DEMO_MODE != null && value != null && length > 4) {
        value = `${value.toString().substring(0, length - 3)}xxxx`;
    }
    return value;
};


/***/ }),
/* 112 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderAddressDTO", ({
    enumerable: true,
    get: function() {
        return RiderAddressDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let RiderAddressDTO = class RiderAddressDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RiderAddressDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RiderAddressType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.RiderAddressType === "undefined" ? Object : _database.RiderAddressType)
], RiderAddressDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], RiderAddressDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderAddressDTO.prototype, "details", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], RiderAddressDTO.prototype, "location", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RiderAddressDTO.prototype, "riderId", void 0);
RiderAddressDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('RiderAddress')
], RiderAddressDTO);


/***/ }),
/* 113 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderWalletDTO", ({
    enumerable: true,
    get: function() {
        return RiderWalletDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _customerdto = __webpack_require__(110);
let RiderWalletDTO = class RiderWalletDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RiderWalletDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], RiderWalletDTO.prototype, "balance", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], RiderWalletDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RiderWalletDTO.prototype, "riderId", void 0);
RiderWalletDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('RiderWallet'),
    (0, _nestjsquerygraphql.Relation)('rider', ()=>_customerdto.CustomerDTO, {
        nullable: true
    })
], RiderWalletDTO);


/***/ }),
/* 114 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingWalletDTO", ({
    enumerable: true,
    get: function() {
        return ParkingWalletDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _customerdto = __webpack_require__(110);
let ParkingWalletDTO = class ParkingWalletDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingWalletDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], ParkingWalletDTO.prototype, "balance", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String),
    _ts_metadata._("design:type", String)
], ParkingWalletDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingWalletDTO.prototype, "customerId", void 0);
ParkingWalletDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkingWallet'),
    (0, _nestjsquerygraphql.Relation)('customer', ()=>_customerdto.CustomerDTO)
], ParkingWalletDTO);


/***/ }),
/* 115 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SavedPaymentMethodDTO", ({
    enumerable: true,
    get: function() {
        return SavedPaymentMethodDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
let SavedPaymentMethodDTO = class SavedPaymentMethodDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], SavedPaymentMethodDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], SavedPaymentMethodDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SavedPaymentMethodDTO.prototype, "lastFour", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], SavedPaymentMethodDTO.prototype, "isDefault", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.SavedPaymentMethodType),
    _ts_metadata._("design:type", typeof _database.SavedPaymentMethodType === "undefined" ? Object : _database.SavedPaymentMethodType)
], SavedPaymentMethodDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>Boolean, {
        filterOnly: true
    }),
    _ts_metadata._("design:type", Boolean)
], SavedPaymentMethodDTO.prototype, "isEnabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ProviderBrand, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ProviderBrand === "undefined" ? Object : _database.ProviderBrand)
], SavedPaymentMethodDTO.prototype, "providerBrand", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], SavedPaymentMethodDTO.prototype, "expiryDate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SavedPaymentMethodDTO.prototype, "holderName", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], SavedPaymentMethodDTO.prototype, "riderId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], SavedPaymentMethodDTO.prototype, "driverId", void 0);
SavedPaymentMethodDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('SavedPaymentMethod')
], SavedPaymentMethodDTO);


/***/ }),
/* 116 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverDTO", ({
    enumerable: true,
    get: function() {
        return DriverDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _feedbackdto = __webpack_require__(117);
const _numbermaskermiddleware = __webpack_require__(111);
const _orderdto = __webpack_require__(99);
const _mediadto = __webpack_require__(66);
const _drivertransactiondto = __webpack_require__(102);
const _driverwalletdto = __webpack_require__(120);
const _payoutaccountdto = __webpack_require__(103);
const _driversessiondto = __webpack_require__(121);
const _drivertodriverdocumentdto = __webpack_require__(122);
const _driverservicesservicedto = __webpack_require__(125);
let DriverDTO = class DriverDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverDTO.prototype, "fleetId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String, {
        middleware: [
            _numbermaskermiddleware.numberMasker
        ]
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "countryIso", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "certificateNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], DriverDTO.prototype, "canDeliver", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.DeliveryPackageSize),
    _ts_metadata._("design:type", typeof _database.DeliveryPackageSize === "undefined" ? Object : _database.DeliveryPackageSize)
], DriverDTO.prototype, "maxDeliveryPackageSize", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverDTO.prototype, "carProductionYear", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverDTO.prototype, "carId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverDTO.prototype, "carColorId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "carPlate", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.DriverStatus),
    _ts_metadata._("design:type", typeof _database.DriverStatus === "undefined" ? Object : _database.DriverStatus)
], DriverDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.Gender, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.Gender === "undefined" ? Object : _database.Gender)
], DriverDTO.prototype, "gender", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverDTO.prototype, "rating", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], DriverDTO.prototype, "reviewCount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], DriverDTO.prototype, "registrationTimestamp", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], DriverDTO.prototype, "lastSeenTimestamp", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "accountNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "bankName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "bankRoutingNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "bankSwift", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverDTO.prototype, "softRejectionNote", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], DriverDTO.prototype, "mediaId", void 0);
DriverDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Driver'),
    (0, _nestjsquerygraphql.OffsetConnection)('feedbacks', ()=>_feedbackdto.FeedbackDTO, {
        enableAggregate: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('wallet', ()=>_driverwalletdto.DriverWalletDTO, {
        relationName: 'wallet'
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('sessions', ()=>_driversessiondto.DriverSessionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('enabledServices', ()=>_driverservicesservicedto.DriverServicesServiceDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('driverToDriverDocuments', ()=>_drivertodriverdocumentdto.DriverToDriverDocumentDTO),
    (0, _nestjsquerygraphql.OffsetConnection)('transactions', ()=>_drivertransactiondto.DriverTransactionDTO),
    (0, _nestjsquerygraphql.OffsetConnection)('orders', ()=>_orderdto.OrderDTO),
    (0, _nestjsquerygraphql.Relation)('media', ()=>_mediadto.MediaDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.OffsetConnection)('payoutAccounts', ()=>_payoutaccountdto.PayoutAccountDTO)
], DriverDTO);


/***/ }),
/* 117 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FeedbackDTO", ({
    enumerable: true,
    get: function() {
        return FeedbackDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _feedbackparameterdto = __webpack_require__(118);
const _orderdto = __webpack_require__(99);
const _driverdto = __webpack_require__(116);
let FeedbackDTO = class FeedbackDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FeedbackDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], FeedbackDTO.prototype, "score", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], FeedbackDTO.prototype, "reviewTimestamp", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], FeedbackDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FeedbackDTO.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FeedbackDTO.prototype, "requestId", void 0);
FeedbackDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Feedback'),
    (0, _nestjsquerygraphql.FilterableUnPagedRelation)('parameters', ()=>_feedbackparameterdto.FeedbackParameterDTO, {
        enableAggregate: true
    }),
    (0, _nestjsquerygraphql.Relation)('driver', ()=>_driverdto.DriverDTO),
    (0, _nestjsquerygraphql.FilterableRelation)('request', ()=>_orderdto.OrderDTO)
], FeedbackDTO);


/***/ }),
/* 118 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FeedbackParameterDTO", ({
    enumerable: true,
    get: function() {
        return FeedbackParameterDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _feedbackparameterauthorizer = __webpack_require__(119);
let FeedbackParameterDTO = class FeedbackParameterDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FeedbackParameterDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], FeedbackParameterDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Boolean)
], FeedbackParameterDTO.prototype, "isGood", void 0);
FeedbackParameterDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('FeedbackParameter'),
    (0, _nestjsquerygraphql.Authorize)(_feedbackparameterauthorizer.FeedbackParameterAuthorizer),
    (0, _nestjsquerygraphql.OffsetConnection)('feedbacks', ()=>FeedbackParameterDTO, {
        enableAggregate: true
    })
], FeedbackParameterDTO);


/***/ }),
/* 119 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FeedbackParameterAuthorizer", ({
    enumerable: true,
    get: function() {
        return FeedbackParameterAuthorizer;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _typeorm = __webpack_require__(16);
let FeedbackParameterAuthorizer = class FeedbackParameterAuthorizer {
    constructor(datasource){
        this.datasource = datasource;
    }
    async authorize(context, authorizerContext) {
        if (authorizerContext.readonly) {
            return undefined;
        }
        const operator = await this.datasource.getRepository(_database.OperatorEntity).findOne({
            where: {
                id: context.req.user.id
            },
            relations: {
                role: true
            }
        });
        if (!authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.ReviewParameter_Edit)) {
            throw new _common.UnauthorizedException();
        }
        return undefined;
    }
};
FeedbackParameterAuthorizer = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.DataSource === "undefined" ? Object : _typeorm.DataSource
    ])
], FeedbackParameterAuthorizer);


/***/ }),
/* 120 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverWalletDTO", ({
    enumerable: true,
    get: function() {
        return DriverWalletDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _driverdto = __webpack_require__(116);
let DriverWalletDTO = class DriverWalletDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverWalletDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], DriverWalletDTO.prototype, "balance", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String),
    _ts_metadata._("design:type", String)
], DriverWalletDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverWalletDTO.prototype, "driverId", void 0);
DriverWalletDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('DriverWallet'),
    (0, _nestjsquerygraphql.Relation)('driver', ()=>_driverdto.DriverDTO, {
        nullable: true
    })
], DriverWalletDTO);


/***/ }),
/* 121 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverSessionDTO", ({
    enumerable: true,
    get: function() {
        return DriverSessionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _sessioninfodto = __webpack_require__(68);
let DriverSessionDTO = class DriverSessionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverSessionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_sessioninfodto.SessionInfoDTO),
    _ts_metadata._("design:type", typeof _sessioninfodto.SessionInfoDTO === "undefined" ? Object : _sessioninfodto.SessionInfoDTO)
], DriverSessionDTO.prototype, "sessionInfo", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverSessionDTO.prototype, "driverId", void 0);
DriverSessionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('DriverSession')
], DriverSessionDTO);


/***/ }),
/* 122 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverToDriverDocumentDTO", ({
    enumerable: true,
    get: function() {
        return DriverToDriverDocumentDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _driverdto = __webpack_require__(116);
const _driverdocumentdto = __webpack_require__(123);
const _mediadto = __webpack_require__(66);
const _driverdocumentretentionpolicydto = __webpack_require__(124);
let DriverToDriverDocumentDTO = class DriverToDriverDocumentDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverToDriverDocumentDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverToDriverDocumentDTO.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverToDriverDocumentDTO.prototype, "driverDocumentId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverToDriverDocumentDTO.prototype, "mediaId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverToDriverDocumentDTO.prototype, "retentionPolicyId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], DriverToDriverDocumentDTO.prototype, "expiresAt", void 0);
DriverToDriverDocumentDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('DriverToDriverDocument'),
    (0, _nestjsquerygraphql.Relation)('driver', ()=>_driverdto.DriverDTO),
    (0, _nestjsquerygraphql.Relation)('driverDocument', ()=>_driverdocumentdto.DriverDocumentDTO),
    (0, _nestjsquerygraphql.Relation)('media', ()=>_mediadto.MediaDTO),
    (0, _nestjsquerygraphql.Relation)('retentionPolicy', ()=>_driverdocumentretentionpolicydto.DriverDocumentRetentionPolicyDTO, {
        nullable: true
    })
], DriverToDriverDocumentDTO);


/***/ }),
/* 123 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverDocumentDTO", ({
    enumerable: true,
    get: function() {
        return DriverDocumentDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _driverdocumentretentionpolicydto = __webpack_require__(124);
let DriverDocumentDTO = class DriverDocumentDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverDocumentDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], DriverDocumentDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], DriverDocumentDTO.prototype, "isEnabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], DriverDocumentDTO.prototype, "isRequired", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], DriverDocumentDTO.prototype, "hasExpiryDate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], DriverDocumentDTO.prototype, "notificationDaysBeforeExpiry", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], DriverDocumentDTO.prototype, "numberOfImages", void 0);
DriverDocumentDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('DriverDocument'),
    (0, _nestjsquerygraphql.UnPagedRelation)('retentionPolicies', ()=>_driverdocumentretentionpolicydto.DriverDocumentRetentionPolicyDTO)
], DriverDocumentDTO);


/***/ }),
/* 124 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverDocumentRetentionPolicyDTO", ({
    enumerable: true,
    get: function() {
        return DriverDocumentRetentionPolicyDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
let DriverDocumentRetentionPolicyDTO = class DriverDocumentRetentionPolicyDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverDocumentRetentionPolicyDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], DriverDocumentRetentionPolicyDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], DriverDocumentRetentionPolicyDTO.prototype, "deleteAfterDays", void 0);
DriverDocumentRetentionPolicyDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('DriverDocumentRetentionPolicy')
], DriverDocumentRetentionPolicyDTO);


/***/ }),
/* 125 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverServicesServiceDTO", ({
    enumerable: true,
    get: function() {
        return DriverServicesServiceDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _servicedto = __webpack_require__(96);
let DriverServicesServiceDTO = class DriverServicesServiceDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverServicesServiceDTO.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverServicesServiceDTO.prototype, "serviceId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], DriverServicesServiceDTO.prototype, "driverEnabled", void 0);
DriverServicesServiceDTO = _ts_decorate._([
    (0, _graphql.ObjectType)(),
    (0, _nestjsquerygraphql.Relation)('service', ()=>_servicedto.ServiceDTO)
], DriverServicesServiceDTO);


/***/ }),
/* 126 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FleetTransactionDTO", ({
    enumerable: true,
    get: function() {
        return FleetTransactionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _operatordto = __webpack_require__(65);
let FleetTransactionDTO = class FleetTransactionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FleetTransactionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], FleetTransactionDTO.prototype, "transactionTimestamp", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.TransactionStatus),
    _ts_metadata._("design:type", typeof _database.TransactionStatus === "undefined" ? Object : _database.TransactionStatus)
], FleetTransactionDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.TransactionAction),
    _ts_metadata._("design:type", typeof _database.TransactionAction === "undefined" ? Object : _database.TransactionAction)
], FleetTransactionDTO.prototype, "action", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ProviderDeductTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ProviderDeductTransactionType === "undefined" ? Object : _database.ProviderDeductTransactionType)
], FleetTransactionDTO.prototype, "deductType", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ProviderRechargeTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ProviderRechargeTransactionType === "undefined" ? Object : _database.ProviderRechargeTransactionType)
], FleetTransactionDTO.prototype, "rechargeType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], FleetTransactionDTO.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], FleetTransactionDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], FleetTransactionDTO.prototype, "refrenceNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], FleetTransactionDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], FleetTransactionDTO.prototype, "operatorId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], FleetTransactionDTO.prototype, "requestId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], FleetTransactionDTO.prototype, "fleetId", void 0);
FleetTransactionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('FleetTransaction'),
    (0, _nestjsquerygraphql.Relation)('operator', ()=>_operatordto.OperatorDTO, {
        nullable: true
    })
], FleetTransactionDTO);


/***/ }),
/* 127 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderMessageDTO", ({
    enumerable: true,
    get: function() {
        return OrderMessageDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
let OrderMessageDTO = class OrderMessageDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OrderMessageDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OrderMessageDTO.prototype, "sentAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], OrderMessageDTO.prototype, "sentByDriver", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.MessageStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.MessageStatus === "undefined" ? Object : _database.MessageStatus)
], OrderMessageDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], OrderMessageDTO.prototype, "content", void 0);
OrderMessageDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('OrderMessage')
], OrderMessageDTO);


/***/ }),
/* 128 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RequestActivityDTO", ({
    enumerable: true,
    get: function() {
        return RequestActivityDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let RequestActivityDTO = class RequestActivityDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RequestActivityDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], RequestActivityDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RequestActivityType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.RequestActivityType === "undefined" ? Object : _database.RequestActivityType)
], RequestActivityDTO.prototype, "type", void 0);
RequestActivityDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('RequestActivity')
], RequestActivityDTO);


/***/ }),
/* 129 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FleetDTO", ({
    enumerable: true,
    get: function() {
        return FleetDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _zonepricedto = __webpack_require__(130);
const _fleettransactiondto = __webpack_require__(126);
const _fleetwalletdto = __webpack_require__(132);
const _fleetauthorizer = __webpack_require__(133);
const _driverdto = __webpack_require__(116);
const _mediadto = __webpack_require__(66);
let FleetDTO = class FleetDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FleetDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], FleetDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], FleetDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], FleetDTO.prototype, "isBlocked", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], FleetDTO.prototype, "phoneNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], FleetDTO.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], FleetDTO.prototype, "userName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], FleetDTO.prototype, "password", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], FleetDTO.prototype, "accountNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], FleetDTO.prototype, "commissionSharePercent", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], FleetDTO.prototype, "commissionShareFlat", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], FleetDTO.prototype, "feeMultiplier", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], FleetDTO.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            [
                _database.Point
            ]
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], FleetDTO.prototype, "exclusivityAreas", void 0);
FleetDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Fleet'),
    (0, _nestjsquerygraphql.UnPagedRelation)('wallet', ()=>_fleetwalletdto.FleetWalletDTO, {
        relationName: 'wallet'
    }),
    (0, _nestjsquerygraphql.OffsetConnection)('transactions', ()=>_fleettransactiondto.FleetTransactionDTO),
    (0, _nestjsquerygraphql.OffsetConnection)('zonePrices', ()=>_zonepricedto.ZonePriceDTO),
    (0, _nestjsquerygraphql.Relation)('profilePicture', ()=>_mediadto.MediaDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.OffsetConnection)('drivers', ()=>_driverdto.DriverDTO, {
        enableAggregate: true
    }),
    (0, _nestjsquerygraphql.Authorize)(_fleetauthorizer.FleetAuthorizer)
], FleetDTO);


/***/ }),
/* 130 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ZonePriceDTO", ({
    enumerable: true,
    get: function() {
        return ZonePriceDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _fleetdto = __webpack_require__(129);
const _serviceauthorizer = __webpack_require__(131);
const _servicedto = __webpack_require__(96);
let ZonePriceDTO = class ZonePriceDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ZonePriceDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ZonePriceDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            [
                _database.Point
            ]
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ZonePriceDTO.prototype, "from", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            [
                _database.Point
            ]
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ZonePriceDTO.prototype, "to", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ZonePriceDTO.prototype, "cost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.TimeMultiplier
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ZonePriceDTO.prototype, "timeMultipliers", void 0);
ZonePriceDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ZonePrice'),
    (0, _nestjsquerygraphql.UnPagedRelation)('fleets', ()=>_fleetdto.FleetDTO, {
        update: {
            enabled: true
        }
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('services', ()=>_servicedto.ServiceDTO, {
        update: {
            enabled: true
        }
    }),
    (0, _nestjsquerygraphql.Authorize)(_serviceauthorizer.ServiceAuthorizer)
], ZonePriceDTO);


/***/ }),
/* 131 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceAuthorizer", ({
    enumerable: true,
    get: function() {
        return ServiceAuthorizer;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _typeorm = __webpack_require__(16);
let ServiceAuthorizer = class ServiceAuthorizer {
    constructor(datasource){
        this.datasource = datasource;
    }
    async authorize(context, authorizerContext) {
        const operator = await this.datasource.getRepository(_database.OperatorEntity).findOne({
            where: {
                id: context.req.user.id
            },
            relations: {
                role: true
            }
        });
        if (authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Services_View)) {
            throw new _common.UnauthorizedException();
        }
        if (!authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Services_Edit)) {
            if (authorizerContext.operationGroup === 'create' || authorizerContext.operationGroup === 'update' || authorizerContext.operationGroup === 'delete') {
                throw new _common.UnauthorizedException();
            }
        }
        return undefined;
    }
};
ServiceAuthorizer = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.DataSource === "undefined" ? Object : _typeorm.DataSource
    ])
], ServiceAuthorizer);


/***/ }),
/* 132 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FleetWalletDTO", ({
    enumerable: true,
    get: function() {
        return FleetWalletDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _fleetdto = __webpack_require__(129);
let FleetWalletDTO = class FleetWalletDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FleetWalletDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], FleetWalletDTO.prototype, "balance", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String),
    _ts_metadata._("design:type", String)
], FleetWalletDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FleetWalletDTO.prototype, "fleetId", void 0);
FleetWalletDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('FleetWallet'),
    (0, _nestjsquerygraphql.Relation)('fleet', ()=>_fleetdto.FleetDTO)
], FleetWalletDTO);


/***/ }),
/* 133 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FleetAuthorizer", ({
    enumerable: true,
    get: function() {
        return FleetAuthorizer;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _typeorm = __webpack_require__(16);
let FleetAuthorizer = class FleetAuthorizer {
    constructor(datasource){
        this.datasource = datasource;
    }
    async authorize(context, authorizerContext) {
        const operator = await this.datasource.getRepository(_database.OperatorEntity).findOne({
            where: {
                id: context.req.user.id
            },
            relations: [
                'role'
            ]
        });
        if (authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Fleets_View)) {
            throw new _common.UnauthorizedException();
        }
        if (!authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Fleets_Edit)) {
            throw new _common.UnauthorizedException();
        }
        return undefined;
    }
};
FleetAuthorizer = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.DataSource === "undefined" ? Object : _typeorm.DataSource
    ])
], FleetAuthorizer);


/***/ }),
/* 134 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceOptionDTO", ({
    enumerable: true,
    get: function() {
        return ServiceOptionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _serviceauthorizer = __webpack_require__(131);
let ServiceOptionDTO = class ServiceOptionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ServiceOptionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ServiceOptionDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ServiceOptionType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ServiceOptionType === "undefined" ? Object : _database.ServiceOptionType)
], ServiceOptionDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ServiceOptionDTO.prototype, "additionalFee", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ServiceOptionIcon, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ServiceOptionIcon === "undefined" ? Object : _database.ServiceOptionIcon)
], ServiceOptionDTO.prototype, "icon", void 0);
ServiceOptionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ServiceOption'),
    (0, _nestjsquerygraphql.Authorize)(_serviceauthorizer.ServiceAuthorizer)
], ServiceOptionDTO);


/***/ }),
/* 135 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RegionCategoryDTO", ({
    enumerable: true,
    get: function() {
        return RegionCategoryDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _typeorm = __webpack_require__(16);
const _regiondto = __webpack_require__(97);
let RegionCategoryDTO = class RegionCategoryDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RegionCategoryDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _typeorm.Column)(),
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], RegionCategoryDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _typeorm.Column)(),
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], RegionCategoryDTO.prototype, "currency", void 0);
RegionCategoryDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('RegionCategory'),
    (0, _nestjsquerygraphql.OffsetConnection)('regions', ()=>_regiondto.RegionDTO)
], RegionCategoryDTO);


/***/ }),
/* 136 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CouponAuthorizer", ({
    enumerable: true,
    get: function() {
        return CouponAuthorizer;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _typeorm = __webpack_require__(16);
let CouponAuthorizer = class CouponAuthorizer {
    constructor(datasource){
        this.datasource = datasource;
    }
    async authorize(context, authorizerContext) {
        const operator = await this.datasource.getRepository(_database.OperatorEntity).findOne({
            where: {
                id: context.req.user.id
            },
            relations: {
                role: true
            }
        });
        if (authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Coupons_View)) {
            throw new _common.UnauthorizedException();
        }
        if (!authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.Coupons_Edit)) {
            throw new _common.UnauthorizedException();
        }
        return undefined;
    }
};
CouponAuthorizer = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.DataSource === "undefined" ? Object : _typeorm.DataSource
    ])
], CouponAuthorizer);


/***/ }),
/* 137 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CouponInput", ({
    enumerable: true,
    get: function() {
        return CouponInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CouponInput = class CouponInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CouponInput.prototype, "code", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CouponInput.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CouponInput.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CouponInput.prototype, "manyUsersCanUse", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CouponInput.prototype, "manyTimesUserCanUse", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CouponInput.prototype, "minimumCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CouponInput.prototype, "maximumCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CouponInput.prototype, "startAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CouponInput.prototype, "expireAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CouponInput.prototype, "discountPercent", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CouponInput.prototype, "discountFlat", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CouponInput.prototype, "creditGift", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], CouponInput.prototype, "isEnabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], CouponInput.prototype, "isFirstTravelOnly", void 0);
CouponInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CouponInput);


/***/ }),
/* 138 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CampaignDTO", ({
    enumerable: true,
    get: function() {
        return CampaignDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _campaigncodedto = __webpack_require__(139);
const _database = __webpack_require__(15);
let CampaignDTO = class CampaignDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CampaignDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], CampaignDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CampaignDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.AppType
        ]),
    _ts_metadata._("design:type", Array)
], CampaignDTO.prototype, "appType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CampaignDTO.prototype, "manyUsersCanUse", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CampaignDTO.prototype, "manyTimesUserCanUse", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CampaignDTO.prototype, "minimumCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CampaignDTO.prototype, "maximumCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CampaignDTO.prototype, "startAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CampaignDTO.prototype, "expireAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CampaignDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CampaignDTO.prototype, "discountPercent", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CampaignDTO.prototype, "discountFlat", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], CampaignDTO.prototype, "isEnabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], CampaignDTO.prototype, "isFirstTravelOnly", void 0);
CampaignDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Campaign'),
    (0, _nestjsquerygraphql.OffsetConnection)('codes', ()=>_campaigncodedto.CampaignCodeDTO, {
        enableAggregate: true
    })
], CampaignDTO);


/***/ }),
/* 139 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CampaignCodeDTO", ({
    enumerable: true,
    get: function() {
        return CampaignCodeDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _customerdto = __webpack_require__(110);
let CampaignCodeDTO = class CampaignCodeDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CampaignCodeDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CampaignCodeDTO.prototype, "code", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CampaignCodeDTO.prototype, "customerId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CampaignCodeDTO.prototype, "campaignId", void 0);
CampaignCodeDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('CampaignCode'),
    (0, _nestjsquerygraphql.Relation)('customer', ()=>_customerdto.CustomerDTO, {
        nullable: true
    })
], CampaignCodeDTO);


/***/ }),
/* 140 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CouponService", ({
    enumerable: true,
    get: function() {
        return CouponService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
const _path = __webpack_require__(24);
const _promises = __webpack_require__(34);
const _json2csv = __webpack_require__(35);
let CouponService = class CouponService {
    constructor(campaignRepository, campaignCodeRepository){
        this.campaignRepository = campaignRepository;
        this.campaignCodeRepository = campaignCodeRepository;
    }
    async createCampaign(input) {
        const campaign = this.campaignRepository.create();
        campaign.name = input.name;
        campaign.description = input.description;
        campaign.manyUsersCanUse = input.manyUsersCanUse;
        campaign.manyTimesUserCanUse = input.manyTimesUserCanUse;
        campaign.minimumCost = input.minimumCost;
        campaign.maximumCost = input.maximumCost;
        campaign.startAt = input.startAt;
        campaign.expireAt = input.expireAt;
        campaign.discountPercent = input.discountPercent;
        campaign.discountFlat = input.discountFlat;
        campaign.isFirstTravelOnly = input.isFirstTravelOnly;
        campaign.isEnabled = true;
        await this.campaignRepository.save(campaign);
        Array.from({
            length: input.codesCount
        }).map(async ()=>{
            const code = Math.random().toString(36).substring(2, 15);
            return await this.campaignCodeRepository.save({
                code,
                campaignId: campaign.id
            });
        });
        return campaign;
    }
    async exportCampaignCodes(input) {
        const { batchId } = input;
        const result = await this.campaignCodeRepository.find({
            where: {
                campaignId: batchId,
                customerId: null
            },
            select: {
                code: true
            }
        });
        const str = await (0, _json2csv.json2csv)(result);
        const fileName = `${new Date().getTime().toString()}.csv`;
        await (0, _promises.writeFile)((0, _path.join)(process.cwd(), 'uploads', `${new Date().getTime().toString()}.csv`), str);
        return {
            url: `uploads/${fileName}`
        };
    }
};
CouponService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.CampaignEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.CampaignCodeEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], CouponService);


/***/ }),
/* 141 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CouponResolver", ({
    enumerable: true,
    get: function() {
        return CouponResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _couponservice = __webpack_require__(140);
const _campaigndto = __webpack_require__(138);
const _createcampaigninput = __webpack_require__(142);
const _common = __webpack_require__(7);
const _jwtauthguard = __webpack_require__(29);
let CouponResolver = class CouponResolver {
    constructor(couponService, context){
        this.couponService = couponService;
        this.context = context;
    }
    async createCampaign(input) {
        return this.couponService.createCampaign(input);
    }
    async exportCampaignCodes(batchId) {
        return (await this.couponService.exportCampaignCodes({
            batchId,
            operatorId: this.context.req.user.id
        })).url;
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_campaigndto.CampaignDTO),
    _ts_param._(0, (0, _graphql.Args)('input')),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _createcampaigninput.CreateCampaignInput === "undefined" ? Object : _createcampaigninput.CreateCampaignInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], CouponResolver.prototype, "createCampaign", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>String),
    _ts_param._(0, (0, _graphql.Args)('batchId', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], CouponResolver.prototype, "exportCampaignCodes", null);
CouponResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(1, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _couponservice.CouponService === "undefined" ? Object : _couponservice.CouponService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], CouponResolver);


/***/ }),
/* 142 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    CampaignCriteriaOrdersType: function() {
        return CampaignCriteriaOrdersType;
    },
    CampaignTargetSegmentCriteria: function() {
        return CampaignTargetSegmentCriteria;
    },
    CreateCampaignInput: function() {
        return CreateCampaignInput;
    }
});
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CreateCampaignInput = class CreateCampaignInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateCampaignInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateCampaignInput.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CreateCampaignInput.prototype, "manyUsersCanUse", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CreateCampaignInput.prototype, "manyTimesUserCanUse", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateCampaignInput.prototype, "minimumCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateCampaignInput.prototype, "maximumCost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CreateCampaignInput.prototype, "startAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CreateCampaignInput.prototype, "expireAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], CreateCampaignInput.prototype, "discountPercent", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateCampaignInput.prototype, "discountFlat", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], CreateCampaignInput.prototype, "isFirstTravelOnly", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CreateCampaignInput.prototype, "codesCount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], CreateCampaignInput.prototype, "sendSMS", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateCampaignInput.prototype, "smsText", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], CreateCampaignInput.prototype, "sendEmail", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateCampaignInput.prototype, "emailSubject", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateCampaignInput.prototype, "emailText", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], CreateCampaignInput.prototype, "sendPush", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateCampaignInput.prototype, "pushTitle", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateCampaignInput.prototype, "pushText", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CreateCampaignInput.prototype, "sendAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            CampaignTargetSegmentCriteria
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], CreateCampaignInput.prototype, "targetUsers", void 0);
CreateCampaignInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateCampaignInput);
let CampaignTargetSegmentCriteria = class CampaignTargetSegmentCriteria {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AppType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.AppType === "undefined" ? Object : _database.AppType)
], CampaignTargetSegmentCriteria.prototype, "appType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CampaignTargetSegmentCriteria.prototype, "lastDays", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>CampaignCriteriaOrdersType, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CampaignTargetSegmentCriteria.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], CampaignTargetSegmentCriteria.prototype, "value", void 0);
CampaignTargetSegmentCriteria = _ts_decorate._([
    (0, _graphql.InputType)()
], CampaignTargetSegmentCriteria);
var CampaignCriteriaOrdersType;
(function(CampaignCriteriaOrdersType) {
    CampaignCriteriaOrdersType["OrderCountMoreThan"] = "OrderCountMoreThan";
    CampaignCriteriaOrdersType["OrderCountLessThan"] = "OrderCountLessThan";
    CampaignCriteriaOrdersType["PurchaseAmountMoreThan"] = "PurchaseAmountMoreThan";
    CampaignCriteriaOrdersType["PurchaseAmountLessThan"] = "PurchaseAmountLessThan";
})(CampaignCriteriaOrdersType || (CampaignCriteriaOrdersType = {}));
(0, _graphql.registerEnumType)(CampaignCriteriaOrdersType, {
    name: 'CampaignCriteriaOrdersType'
});


/***/ }),
/* 143 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverModule", ({
    enumerable: true,
    get: function() {
        return DriverModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _driverresolver = __webpack_require__(144);
const _driverservice = __webpack_require__(145);
const _drivertransactiondto = __webpack_require__(102);
const _driverwalletdto = __webpack_require__(120);
const _driverdto = __webpack_require__(116);
const _driverinput = __webpack_require__(150);
const _drivertransactioninput = __webpack_require__(147);
const _drivernotedto = __webpack_require__(151);
const _createdrivernoteinput = __webpack_require__(152);
const _driversessiondto = __webpack_require__(121);
const _driverservicesservicedto = __webpack_require__(125);
let DriverModule = class DriverModule {
};
DriverModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _database.RedisHelpersModule,
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.DriverEntity,
                        _database.DriverTransactionEntity,
                        _database.DriverWalletEntity,
                        _database.OperatorEntity,
                        _database.DriverNoteEntity,
                        _database.DriverSessionEntity,
                        _database.DriverServicesServiceEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.DriverEntity,
                        DTOClass: _driverdto.DriverDTO,
                        UpdateDTOClass: _driverinput.UpdateDriverInput,
                        CreateDTOClass: _driverinput.UpdateDriverInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        enableAggregate: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.DriverServicesServiceEntity,
                        DTOClass: _driverservicesservicedto.DriverServicesServiceDTO,
                        read: {
                            disabled: true
                        },
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET
                    },
                    {
                        EntityClass: _database.DriverNoteEntity,
                        DTOClass: _drivernotedto.DriverNoteDTO,
                        CreateDTOClass: _createdrivernoteinput.CreateDriverNoteInput,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET
                    },
                    {
                        EntityClass: _database.DriverWalletEntity,
                        DTOClass: _driverwalletdto.DriverWalletDTO,
                        create: {
                            disabled: true
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        enableAggregate: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.DriverSessionEntity,
                        DTOClass: _driversessiondto.DriverSessionDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        enableTotalCount: true,
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        }
                    },
                    {
                        EntityClass: _database.DriverTransactionEntity,
                        DTOClass: _drivertransactiondto.DriverTransactionDTO,
                        CreateDTOClass: _drivertransactioninput.DriverTransactionInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        enableAggregate: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    }
                ]
            })
        ],
        providers: [
            _driverresolver.DriverResolver,
            _driverservice.DriverService,
            _database.SharedDriverService
        ]
    })
], DriverModule);


/***/ }),
/* 144 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverResolver", ({
    enumerable: true,
    get: function() {
        return DriverResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _apollo = __webpack_require__(3);
const _typeorm = __webpack_require__(16);
const _jwtauthguard = __webpack_require__(29);
const _driverservice = __webpack_require__(145);
const _driverlocationdto = __webpack_require__(146);
const _drivertransactioninput = __webpack_require__(147);
const _driverwalletdto = __webpack_require__(120);
const _driverdto = __webpack_require__(116);
const _feedbackparameteraggregatedto = __webpack_require__(148);
const _typeorm1 = __webpack_require__(14);
const _setactiveservicesondriverinput = __webpack_require__(149);
let DriverResolver = class DriverResolver {
    constructor(driverService, sharedDriverService, operatorRepository, context){
        this.driverService = driverService;
        this.sharedDriverService = sharedDriverService;
        this.operatorRepository = operatorRepository;
        this.context = context;
    }
    async getDriversLocation(center, count) {
        return this.driverService.getDriversLocation(center, count);
    }
    async getDriversLocationWithData(center, count) {
        return this.driverService.getDriversLocationWithData(center, count);
    }
    async createDriverTransaction(input) {
        input.amount = input.action == _database.TransactionAction.Recharge ? Math.abs(input.amount) : Math.abs(input.amount) * -1;
        return this.sharedDriverService.rechargeWallet({
            ...input,
            operatorId: this.context.req.user.id,
            status: _database.TransactionStatus.Done
        });
    }
    async deleteOneDriver(id) {
        const operator = await this.operatorRepository.findOne({
            where: {
                id: this.context.req.user.id
            },
            relations: {
                role: true
            }
        });
        if (!operator.role.permissions.includes(_database.OperatorPermission.Drivers_Edit)) {
            throw new _apollo.ForbiddenError('PERMISSION_NOT_GRANTED');
        }
        return this.sharedDriverService.deleteById(id);
    }
    async driverFeedbackParametersSummary(driverId) {
        return this.driverService.driverFeedbackParametersSummary(driverId);
    }
    async terminateDriverLoginSession(sessionId) {
        if (process.env.DEMO_MODE != null) {
            throw new _apollo.ForbiddenError('Action not allowed in demo mode.');
        }
        const result = await this.driverService.terminateLoginSession(sessionId);
        return result.affected > 0;
    }
    async setActivatedServicesOnDriver(input) {
        return this.driverService.setActivatedServicesOnDriver(input);
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _driverlocationdto.OnlineDriver
        ]),
    _ts_param._(0, (0, _graphql.Args)('center', {
        type: ()=>_database.Point
    })),
    _ts_param._(1, (0, _graphql.Args)('count', {
        type: ()=>_graphql.Int
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _database.Point === "undefined" ? Object : _database.Point,
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], DriverResolver.prototype, "getDriversLocation", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _driverlocationdto.OnlineDriverWithData
        ]),
    _ts_param._(0, (0, _graphql.Args)('center', {
        type: ()=>_database.Point
    })),
    _ts_param._(1, (0, _graphql.Args)('count', {
        type: ()=>_graphql.Int
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _database.Point === "undefined" ? Object : _database.Point,
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], DriverResolver.prototype, "getDriversLocationWithData", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_driverwalletdto.DriverWalletDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_drivertransactioninput.DriverTransactionInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _drivertransactioninput.DriverTransactionInput === "undefined" ? Object : _drivertransactioninput.DriverTransactionInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], DriverResolver.prototype, "createDriverTransaction", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_driverdto.DriverDTO),
    _ts_param._(0, (0, _graphql.Args)('id', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], DriverResolver.prototype, "deleteOneDriver", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _feedbackparameteraggregatedto.FeedbackParameterAggregateDto
        ]),
    _ts_param._(0, (0, _graphql.Args)('driverId', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], DriverResolver.prototype, "driverFeedbackParametersSummary", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>Boolean),
    _ts_param._(0, (0, _graphql.Args)('sessionId', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], DriverResolver.prototype, "terminateDriverLoginSession", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>Boolean),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_setactiveservicesondriverinput.SetActiveServicesOnDriverInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _setactiveservicesondriverinput.SetActiveServicesOnDriverInput === "undefined" ? Object : _setactiveservicesondriverinput.SetActiveServicesOnDriverInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], DriverResolver.prototype, "setActivatedServicesOnDriver", null);
DriverResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(2, (0, _typeorm1.InjectRepository)(_database.OperatorEntity)),
    _ts_param._(3, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _driverservice.DriverService === "undefined" ? Object : _driverservice.DriverService,
        typeof _database.SharedDriverService === "undefined" ? Object : _database.SharedDriverService,
        typeof _typeorm.Repository === "undefined" ? Object : _typeorm.Repository,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], DriverResolver);


/***/ }),
/* 145 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverService", ({
    enumerable: true,
    get: function() {
        return DriverService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let DriverService = class DriverService {
    constructor(driverRepository, driverServicesServiceRepository, driverSessionRepository, driverRedisService){
        this.driverRepository = driverRepository;
        this.driverServicesServiceRepository = driverServicesServiceRepository;
        this.driverSessionRepository = driverSessionRepository;
        this.driverRedisService = driverRedisService;
    }
    getDriversLocation(center, count) {
        return this.driverRedisService.getAllOnline(center, count);
    }
    async getDriversLocationWithData(center, count) {
        const drivers = await this.getDriversLocation(center, count);
        const driverData = await this.driverRepository.findByIds(drivers.map((driver)=>driver.driverId));
        const result = driverData.map((_driver)=>{
            const redisDriver = drivers.filter((driver)=>driver.driverId == _driver.id)[0];
            const length = _driver.mobileNumber.toString().length;
            if (process.env.DEMO_MODE != null && _driver.mobileNumber != null && length > 4) {
                _driver.mobileNumber = `${_driver.mobileNumber.toString().substring(0, length - 3)}xxxx`;
            }
            return {
                ..._driver,
                ...redisDriver
            };
        });
        return result;
    }
    async driverFeedbackParametersSummary(driverId) {
        return this.driverRepository.query(`
        SELECT 
            review_parameter.title,
            ANY_VALUE(review_parameter.isGood) AS isGood,
            COUNT(review_parameter.id) AS count
        FROM
            review_parameter_feedbacks_request_review
        INNER JOIN review_parameter on review_parameter.id = review_parameter_feedbacks_request_review.reviewParameterId
        INNER JOIN request_review on request_review.id = review_parameter_feedbacks_request_review.requestReviewId
        WHERE
            request_review.driverId = ?
        GROUP BY
            review_parameter.title
        ORDER BY isGood DESC, count DESC`, [
            driverId
        ]);
    }
    async terminateLoginSession(sessionId) {
        return this.driverSessionRepository.softDelete(sessionId);
    }
    async setActivatedServicesOnDriver(input) {
        _common.Logger.log(`set activated services on driver ${JSON.stringify(input)}`, 'DriverService.setActivatedServicesOnDriver');
        const previousServcies = await this.driverRepository.findOne({
            where: {
                id: input.driverId
            },
            relations: {
                enabledServices: {
                    service: true
                }
            }
        });
        const newServiceIds = input.serviceIds.filter((serviceId)=>previousServcies.enabledServices.findIndex((service)=>service.service.id == serviceId) == -1);
        const removedServiceIds = previousServcies.enabledServices.filter((service)=>input.serviceIds.findIndex((serviceId)=>serviceId == service.service.id) == -1);
        const newServices = newServiceIds.map((serviceId)=>({
                driverId: input.driverId,
                serviceId
            }));
        const removedServices = removedServiceIds.map((service)=>({
                driverId: input.driverId,
                serviceId: service.service.id
            }));
        _common.Logger.log(`newServices: ${JSON.stringify(newServices)}`, 'DriverService.setActivatedServicesOnDriver');
        _common.Logger.log(`removedServices: ${JSON.stringify(removedServices)}`, 'DriverService.setActivatedServicesOnDriver');
        if (newServices.length > 0) {
            await this.driverServicesServiceRepository.createQueryBuilder().insert().into(_database.DriverServicesServiceEntity).values(newServices).execute();
        }
        if (removedServices.length > 0) {
            await this.driverServicesServiceRepository.createQueryBuilder().delete().from(_database.DriverServicesServiceEntity).where('driverId = :driverId', {
                driverId: input.driverId
            }).andWhere('serviceId IN (:...serviceIds)', {
                serviceIds: removedServices.map((service)=>service.serviceId)
            }).execute();
        }
        return true;
    }
};
DriverService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.DriverEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.DriverServicesServiceEntity)),
    _ts_param._(2, (0, _typeorm.InjectRepository)(_database.DriverSessionEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _database.DriverRedisService === "undefined" ? Object : _database.DriverRedisService
    ])
], DriverService);


/***/ }),
/* 146 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    OnlineDriver: function() {
        return OnlineDriver;
    },
    OnlineDriverWithData: function() {
        return OnlineDriverWithData;
    }
});
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _nestjsquerygraphql = __webpack_require__(17);
let OnlineDriver = class OnlineDriver {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], OnlineDriver.prototype, "location", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OnlineDriver.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OnlineDriver.prototype, "lastUpdatedAt", void 0);
OnlineDriver = _ts_decorate._([
    (0, _graphql.ObjectType)()
], OnlineDriver);
let OnlineDriverWithData = class OnlineDriverWithData {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OnlineDriverWithData.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], OnlineDriverWithData.prototype, "location", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], OnlineDriverWithData.prototype, "lastUpdatedAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], OnlineDriverWithData.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], OnlineDriverWithData.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], OnlineDriverWithData.prototype, "avatarUrl", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], OnlineDriverWithData.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.DriverStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.DriverStatus === "undefined" ? Object : _database.DriverStatus)
], OnlineDriverWithData.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Gender, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.Gender === "undefined" ? Object : _database.Gender)
], OnlineDriverWithData.prototype, "gender", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], OnlineDriverWithData.prototype, "rating", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], OnlineDriverWithData.prototype, "reviewCount", void 0);
OnlineDriverWithData = _ts_decorate._([
    (0, _graphql.ObjectType)()
], OnlineDriverWithData);


/***/ }),
/* 147 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverTransactionInput", ({
    enumerable: true,
    get: function() {
        return DriverTransactionInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let DriverTransactionInput = class DriverTransactionInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.TransactionAction, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.TransactionAction === "undefined" ? Object : _database.TransactionAction)
], DriverTransactionInput.prototype, "action", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.DriverDeductTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.DriverDeductTransactionType === "undefined" ? Object : _database.DriverDeductTransactionType)
], DriverTransactionInput.prototype, "deductType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.DriverRechargeTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.DriverRechargeTransactionType === "undefined" ? Object : _database.DriverRechargeTransactionType)
], DriverTransactionInput.prototype, "rechargeType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], DriverTransactionInput.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], DriverTransactionInput.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverTransactionInput.prototype, "refrenceNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverTransactionInput.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], DriverTransactionInput.prototype, "description", void 0);
DriverTransactionInput = _ts_decorate._([
    (0, _graphql.InputType)()
], DriverTransactionInput);


/***/ }),
/* 148 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FeedbackParameterAggregateDto", ({
    enumerable: true,
    get: function() {
        return FeedbackParameterAggregateDto;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let FeedbackParameterAggregateDto = class FeedbackParameterAggregateDto {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FeedbackParameterAggregateDto.prototype, "count", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], FeedbackParameterAggregateDto.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], FeedbackParameterAggregateDto.prototype, "isGood", void 0);
FeedbackParameterAggregateDto = _ts_decorate._([
    (0, _graphql.ObjectType)('FeedbackParameterAggregate')
], FeedbackParameterAggregateDto);


/***/ }),
/* 149 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SetActiveServicesOnDriverInput", ({
    enumerable: true,
    get: function() {
        return SetActiveServicesOnDriverInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let SetActiveServicesOnDriverInput = class SetActiveServicesOnDriverInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], SetActiveServicesOnDriverInput.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _graphql.ID
        ]),
    _ts_metadata._("design:type", Array)
], SetActiveServicesOnDriverInput.prototype, "serviceIds", void 0);
SetActiveServicesOnDriverInput = _ts_decorate._([
    (0, _graphql.InputType)()
], SetActiveServicesOnDriverInput);


/***/ }),
/* 150 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateDriverInput", ({
    enumerable: true,
    get: function() {
        return UpdateDriverInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let UpdateDriverInput = class UpdateDriverInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateDriverInput.prototype, "fleetId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateDriverInput.prototype, "carId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateDriverInput.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateDriverInput.prototype, "carColorId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateDriverInput.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateDriverInput.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateDriverInput.prototype, "certificateNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], UpdateDriverInput.prototype, "canDeliver", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.DeliveryPackageSize, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.DeliveryPackageSize === "undefined" ? Object : _database.DeliveryPackageSize)
], UpdateDriverInput.prototype, "maxDeliveryPackageSize", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateDriverInput.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateDriverInput.prototype, "password", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateDriverInput.prototype, "carProductionYear", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateDriverInput.prototype, "carPlate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.DriverStatus, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.DriverStatus === "undefined" ? Object : _database.DriverStatus)
], UpdateDriverInput.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Gender, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.Gender === "undefined" ? Object : _database.Gender)
], UpdateDriverInput.prototype, "gender", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateDriverInput.prototype, "accountNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateDriverInput.prototype, "bankName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateDriverInput.prototype, "bankRoutingNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateDriverInput.prototype, "bankSwift", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateDriverInput.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateDriverInput.prototype, "softRejectionNote", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateDriverInput.prototype, "mediaId", void 0);
UpdateDriverInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateDriverInput);


/***/ }),
/* 151 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverNoteDTO", ({
    enumerable: true,
    get: function() {
        return DriverNoteDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _operatordto = __webpack_require__(65);
let DriverNoteDTO = class DriverNoteDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverNoteDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], DriverNoteDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        filterRequired: true
    }),
    _ts_metadata._("design:type", Number)
], DriverNoteDTO.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", String)
], DriverNoteDTO.prototype, "note", void 0);
DriverNoteDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('DriverNote'),
    (0, _nestjsquerygraphql.Relation)('staff', ()=>_operatordto.OperatorDTO)
], DriverNoteDTO);


/***/ }),
/* 152 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateDriverNoteInput", ({
    enumerable: true,
    get: function() {
        return CreateDriverNoteInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CreateDriverNoteInput = class CreateDriverNoteInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateDriverNoteInput.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateDriverNoteInput.prototype, "note", void 0);
CreateDriverNoteInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateDriverNoteInput);


/***/ }),
/* 153 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FeedbackModule", ({
    enumerable: true,
    get: function() {
        return FeedbackModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _feedbackparameterdto = __webpack_require__(118);
const _feedbackdto = __webpack_require__(117);
const _feedbackparameterinput = __webpack_require__(154);
let FeedbackModule = class FeedbackModule {
};
FeedbackModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.FeedbackEntity,
                        _database.FeedbackParameterEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.FeedbackEntity,
                        DTOClass: _feedbackdto.FeedbackDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.FeedbackParameterEntity,
                        DTOClass: _feedbackparameterdto.FeedbackParameterDTO,
                        CreateDTOClass: _feedbackparameterinput.FeedbackParameterInput,
                        UpdateDTOClass: _feedbackparameterinput.FeedbackParameterInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    }
                ]
            })
        ]
    })
], FeedbackModule);


/***/ }),
/* 154 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FeedbackParameterInput", ({
    enumerable: true,
    get: function() {
        return FeedbackParameterInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let FeedbackParameterInput = class FeedbackParameterInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], FeedbackParameterInput.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean),
    _ts_metadata._("design:type", Boolean)
], FeedbackParameterInput.prototype, "isGood", void 0);
FeedbackParameterInput = _ts_decorate._([
    (0, _graphql.InputType)()
], FeedbackParameterInput);


/***/ }),
/* 155 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FleetModule", ({
    enumerable: true,
    get: function() {
        return FleetModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _fleettransactiondto = __webpack_require__(126);
const _fleetwalletdto = __webpack_require__(132);
const _fleetdto = __webpack_require__(129);
const _fleetresolver = __webpack_require__(156);
const _createfleetinput = __webpack_require__(159);
const _fleetstaffsessiondto = __webpack_require__(160);
const _fleetstaffdto = __webpack_require__(161);
const _createfleetstaffinput = __webpack_require__(162);
const _updatefleetstaffinput = __webpack_require__(163);
const _fleetservice = __webpack_require__(158);
const _updatefleetinput = __webpack_require__(164);
let FleetModule = class FleetModule {
};
FleetModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.FleetEntity,
                        _database.FleetTransactionEntity,
                        _database.FleetWalletEntity,
                        _database.FleetStaffEntity,
                        _database.FleetStaffSessionEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.FleetEntity,
                        DTOClass: _fleetdto.FleetDTO,
                        CreateDTOClass: _createfleetinput.CreateFleetInput,
                        UpdateDTOClass: _updatefleetinput.UpdateFleetInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.FleetWalletEntity,
                        DTOClass: _fleetwalletdto.FleetWalletDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        enableAggregate: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.FleetTransactionEntity,
                        DTOClass: _fleettransactiondto.FleetTransactionDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        enableAggregate: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.FleetStaffEntity,
                        DTOClass: _fleetstaffdto.FleetStaffDTO,
                        CreateDTOClass: _createfleetstaffinput.CreateFleetStaffInput,
                        UpdateDTOClass: _updatefleetstaffinput.UpdateFleetStaffInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    },
                    {
                        EntityClass: _database.FleetStaffSessionEntity,
                        DTOClass: _fleetstaffsessiondto.FleetStaffSessionDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        enableTotalCount: true
                    }
                ]
            })
        ],
        providers: [
            _fleetresolver.FleetResolver,
            _database.SharedFleetService,
            _fleetservice.FleetService
        ]
    })
], FleetModule);


/***/ }),
/* 156 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FleetResolver", ({
    enumerable: true,
    get: function() {
        return FleetResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _fleettransactioninput = __webpack_require__(157);
const _fleetwalletdto = __webpack_require__(132);
const _fleetservice = __webpack_require__(158);
let FleetResolver = class FleetResolver {
    constructor(sharedFleetService, fleetService, context){
        this.sharedFleetService = sharedFleetService;
        this.fleetService = fleetService;
        this.context = context;
    }
    async createFleetTransaction(input) {
        input.amount = input.action == _database.TransactionAction.Recharge ? Math.abs(input.amount) : Math.abs(input.amount) * -1;
        return this.sharedFleetService.rechargeWallet({
            ...input,
            operatorId: this.context.req.user.id
        });
    }
    async terminateFleetStaffSession(id) {
        await this.fleetService.terminateFleetStaffSession({
            id
        });
        return true;
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_fleetwalletdto.FleetWalletDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_fleettransactioninput.FleetTransactionInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _fleettransactioninput.FleetTransactionInput === "undefined" ? Object : _fleettransactioninput.FleetTransactionInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], FleetResolver.prototype, "createFleetTransaction", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>Boolean),
    _ts_param._(0, (0, _graphql.Args)('id', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], FleetResolver.prototype, "terminateFleetStaffSession", null);
FleetResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(2, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _database.SharedFleetService === "undefined" ? Object : _database.SharedFleetService,
        typeof _fleetservice.FleetService === "undefined" ? Object : _fleetservice.FleetService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], FleetResolver);


/***/ }),
/* 157 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FleetTransactionInput", ({
    enumerable: true,
    get: function() {
        return FleetTransactionInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let FleetTransactionInput = class FleetTransactionInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.TransactionAction, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.TransactionAction === "undefined" ? Object : _database.TransactionAction)
], FleetTransactionInput.prototype, "action", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ProviderDeductTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ProviderDeductTransactionType === "undefined" ? Object : _database.ProviderDeductTransactionType)
], FleetTransactionInput.prototype, "deductType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ProviderRechargeTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ProviderRechargeTransactionType === "undefined" ? Object : _database.ProviderRechargeTransactionType)
], FleetTransactionInput.prototype, "rechargeType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], FleetTransactionInput.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], FleetTransactionInput.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], FleetTransactionInput.prototype, "refrenceNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FleetTransactionInput.prototype, "fleetId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], FleetTransactionInput.prototype, "description", void 0);
FleetTransactionInput = _ts_decorate._([
    (0, _graphql.InputType)()
], FleetTransactionInput);


/***/ }),
/* 158 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FleetService", ({
    enumerable: true,
    get: function() {
        return FleetService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let FleetService = class FleetService {
    constructor(fleetStaffSessionRepository){
        this.fleetStaffSessionRepository = fleetStaffSessionRepository;
    }
    async terminateFleetStaffSession(input) {
        const session = await this.fleetStaffSessionRepository.findOneBy({
            id: input.id
        });
        if (session == null) {
            throw new Error('Session not found');
        }
        await this.fleetStaffSessionRepository.delete(session.id);
        return session;
    }
};
FleetService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.FleetStaffSessionEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], FleetService);


/***/ }),
/* 159 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateFleetInput", ({
    enumerable: true,
    get: function() {
        return CreateFleetInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CreateFleetInput = class CreateFleetInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateFleetInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateFleetInput.prototype, "phoneNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateFleetInput.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateFleetInput.prototype, "userName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateFleetInput.prototype, "password", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateFleetInput.prototype, "accountNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], CreateFleetInput.prototype, "commissionSharePercent", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CreateFleetInput.prototype, "commissionShareFlat", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateFleetInput.prototype, "feeMultiplier", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateFleetInput.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            [
                _database.Point
            ]
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], CreateFleetInput.prototype, "exclusivityAreas", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateFleetInput.prototype, "profilePictureId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], CreateFleetInput.prototype, "isBlocked", void 0);
CreateFleetInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateFleetInput);


/***/ }),
/* 160 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FleetStaffSessionDTO", ({
    enumerable: true,
    get: function() {
        return FleetStaffSessionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _sessioninfodto = __webpack_require__(68);
let FleetStaffSessionDTO = class FleetStaffSessionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FleetStaffSessionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_sessioninfodto.SessionInfoDTO),
    _ts_metadata._("design:type", typeof _sessioninfodto.SessionInfoDTO === "undefined" ? Object : _sessioninfodto.SessionInfoDTO)
], FleetStaffSessionDTO.prototype, "sessionInfo", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FleetStaffSessionDTO.prototype, "fleetStaffId", void 0);
FleetStaffSessionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('FleetStaffSession')
], FleetStaffSessionDTO);


/***/ }),
/* 161 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FleetStaffDTO", ({
    enumerable: true,
    get: function() {
        return FleetStaffDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _mediadto = __webpack_require__(66);
let FleetStaffDTO = class FleetStaffDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FleetStaffDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], FleetStaffDTO.prototype, "registeredAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], FleetStaffDTO.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], FleetStaffDTO.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], FleetStaffDTO.prototype, "phoneNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], FleetStaffDTO.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], FleetStaffDTO.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], FleetStaffDTO.prototype, "lastActivityAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Boolean)
], FleetStaffDTO.prototype, "isBlocked", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], FleetStaffDTO.prototype, "address", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], FleetStaffDTO.prototype, "userName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], FleetStaffDTO.prototype, "password", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.FleetStaffPermissionOrder, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.FleetStaffPermissionOrder === "undefined" ? Object : _database.FleetStaffPermissionOrder)
], FleetStaffDTO.prototype, "permissionOrder", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.FleetStaffPermissionOrder, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.FleetStaffPermissionOrder === "undefined" ? Object : _database.FleetStaffPermissionOrder)
], FleetStaffDTO.prototype, "permissionFinancial", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], FleetStaffDTO.prototype, "fleetId", void 0);
FleetStaffDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('FleetStaff'),
    (0, _nestjsquerygraphql.Relation)('profileImage', ()=>_mediadto.MediaDTO, {
        nullable: true
    })
], FleetStaffDTO);


/***/ }),
/* 162 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateFleetStaffInput", ({
    enumerable: true,
    get: function() {
        return CreateFleetStaffInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CreateFleetStaffInput = class CreateFleetStaffInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", String)
], CreateFleetStaffInput.prototype, "fleetId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateFleetStaffInput.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateFleetStaffInput.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateFleetStaffInput.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateFleetStaffInput.prototype, "phoneNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateFleetStaffInput.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateFleetStaffInput.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateFleetStaffInput.prototype, "userName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateFleetStaffInput.prototype, "password", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.FleetStaffPermissionOrder),
    _ts_metadata._("design:type", typeof _database.FleetStaffPermissionOrder === "undefined" ? Object : _database.FleetStaffPermissionOrder)
], CreateFleetStaffInput.prototype, "permissionOrder", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.FleetStaffPermissionFinancial),
    _ts_metadata._("design:type", typeof _database.FleetStaffPermissionFinancial === "undefined" ? Object : _database.FleetStaffPermissionFinancial)
], CreateFleetStaffInput.prototype, "permissionFinancial", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateFleetStaffInput.prototype, "profileImageId", void 0);
CreateFleetStaffInput = _ts_decorate._([
    (0, _graphql.InputType)('CreateFleetStaffInput')
], CreateFleetStaffInput);


/***/ }),
/* 163 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateFleetStaffInput", ({
    enumerable: true,
    get: function() {
        return UpdateFleetStaffInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let UpdateFleetStaffInput = class UpdateFleetStaffInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetStaffInput.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetStaffInput.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetStaffInput.prototype, "phoneNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetStaffInput.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetStaffInput.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetStaffInput.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetStaffInput.prototype, "userName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetStaffInput.prototype, "password", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.FleetStaffPermissionOrder, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.FleetStaffPermissionOrder === "undefined" ? Object : _database.FleetStaffPermissionOrder)
], UpdateFleetStaffInput.prototype, "permissionOrder", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.FleetStaffPermissionFinancial, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.FleetStaffPermissionFinancial === "undefined" ? Object : _database.FleetStaffPermissionFinancial)
], UpdateFleetStaffInput.prototype, "permissionFinancial", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateFleetStaffInput.prototype, "profileImageId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], UpdateFleetStaffInput.prototype, "isBlocked", void 0);
UpdateFleetStaffInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateFleetStaffInput);


/***/ }),
/* 164 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateFleetInput", ({
    enumerable: true,
    get: function() {
        return UpdateFleetInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let UpdateFleetInput = class UpdateFleetInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetInput.prototype, "phoneNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetInput.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetInput.prototype, "userName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetInput.prototype, "password", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetInput.prototype, "accountNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateFleetInput.prototype, "commissionSharePercent", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateFleetInput.prototype, "commissionShareFlat", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateFleetInput.prototype, "feeMultiplier", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateFleetInput.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            [
                _database.Point
            ]
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], UpdateFleetInput.prototype, "exclusivityAreas", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateFleetInput.prototype, "profilePictureId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], UpdateFleetInput.prototype, "isBlocked", void 0);
UpdateFleetInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateFleetInput);


/***/ }),
/* 165 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderModule", ({
    enumerable: true,
    get: function() {
        return OrderModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _dispatcherresolver = __webpack_require__(166);
const _ordermessagedto = __webpack_require__(127);
const _orderdto = __webpack_require__(99);
const _ordersubscriptionservice = __webpack_require__(173);
const _orderservice = __webpack_require__(172);
const _ordercancelreasondto = __webpack_require__(174);
const _ordercancelreasoninput = __webpack_require__(175);
const _orderresolver = __webpack_require__(176);
const _taxiordernotedto = __webpack_require__(177);
let OrderModule = class OrderModule {
};
OrderModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _database.SharedOrderModule,
            _database.RedisHelpersModule,
            _typeorm.TypeOrmModule.forFeature([
                _database.RequestActivityEntity
            ]),
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.TaxiOrderEntity,
                        _database.OrderMessageEntity,
                        _database.OrderCancelReasonEntity,
                        _database.TaxiOrderNoteEntity
                    ])
                ],
                pubSub: _database.RedisPubSubProvider.provider(),
                resolvers: [
                    {
                        EntityClass: _database.TaxiOrderEntity,
                        DTOClass: _orderdto.OrderDTO,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        enableAggregate: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.OrderMessageEntity,
                        DTOClass: _ordermessagedto.OrderMessageDTO,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.OrderCancelReasonEntity,
                        DTOClass: _ordercancelreasondto.OrderCancelReasonDTO,
                        CreateDTOClass: _ordercancelreasoninput.OrderCancelReasonInput,
                        UpdateDTOClass: _ordercancelreasoninput.OrderCancelReasonInput,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    },
                    {
                        EntityClass: _database.TaxiOrderNoteEntity,
                        DTOClass: _taxiordernotedto.TaxiOrderNoteDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET
                    }
                ]
            })
        ],
        providers: [
            _dispatcherresolver.DispatcherResolver,
            _orderresolver.OrderResolver,
            _ordersubscriptionservice.OrderSubscriptionService,
            _orderservice.OrderService,
            _database.RedisPubSubProvider.provider()
        ]
    })
], OrderModule);


/***/ }),
/* 166 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DispatcherResolver", ({
    enumerable: true,
    get: function() {
        return DispatcherResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _calculatefaredto = __webpack_require__(167);
const _calculatefareinput = __webpack_require__(170);
const _createorderinput = __webpack_require__(171);
const _orderdto = __webpack_require__(99);
const _orderservice = __webpack_require__(172);
let DispatcherResolver = class DispatcherResolver {
    constructor(context, sharedOrderService, orderService){
        this.context = context;
        this.sharedOrderService = sharedOrderService;
        this.orderService = orderService;
    }
    async calculateFare(input) {
        return this.sharedOrderService.calculateFare({
            ...input,
            twoWay: false
        });
    }
    async createOrder(input) {
        return this.sharedOrderService.createOrder({
            ...input,
            operatorId: this.context.req.user.id,
            twoWay: input.twoWay,
            optionIds: input.optionIds,
            waitMinutes: input.waitingTimeMinutes,
            driverId: input.driverId
        });
    }
    async cancelOrder(orderId) {
        return this.orderService.cancelOrder(orderId);
    }
    async assignDriverToOrder(orderId, driverId) {
        return this.sharedOrderService.assignOrderToDriver(orderId, driverId);
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>_calculatefaredto.CalculateFareDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_calculatefareinput.CalculateFareInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _calculatefareinput.CalculateFareInput === "undefined" ? Object : _calculatefareinput.CalculateFareInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], DispatcherResolver.prototype, "calculateFare", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_orderdto.OrderDTO),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_createorderinput.CreateOrderInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _createorderinput.CreateOrderInput === "undefined" ? Object : _createorderinput.CreateOrderInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], DispatcherResolver.prototype, "createOrder", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_orderdto.OrderDTO),
    _ts_param._(0, (0, _graphql.Args)('orderId', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], DispatcherResolver.prototype, "cancelOrder", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_orderdto.OrderDTO),
    _ts_param._(0, (0, _graphql.Args)('orderId', {
        type: ()=>_graphql.ID
    })),
    _ts_param._(1, (0, _graphql.Args)('driverId', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number,
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], DispatcherResolver.prototype, "assignDriverToOrder", null);
DispatcherResolver = _ts_decorate._([
    (0, _graphql.Resolver)(()=>_orderdto.OrderDTO),
    _ts_param._(0, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof UserContext === "undefined" ? Object : UserContext,
        typeof _database.SharedOrderService === "undefined" ? Object : _database.SharedOrderService,
        typeof _orderservice.OrderService === "undefined" ? Object : _orderservice.OrderService
    ])
], DispatcherResolver);


/***/ }),
/* 167 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    CalculateFareDTO: function() {
        return CalculateFareDTO;
    },
    CalculateFareError: function() {
        return CalculateFareError;
    }
});
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _servicecategorywithcostdto = __webpack_require__(168);
var CalculateFareError;
(function(CalculateFareError) {
    CalculateFareError["RegionUnsupported"] = "REGION_UNSUPPORTED";
    CalculateFareError["NoServiceInRegion"] = "NO_SERVICE_IN_REGION";
})(CalculateFareError || (CalculateFareError = {}));
(0, _graphql.registerEnumType)(CalculateFareError, {
    name: 'CalculateFareError'
});
let CalculateFareDTO = class CalculateFareDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], CalculateFareDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CalculateFareDTO.prototype, "distance", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CalculateFareDTO.prototype, "duration", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _servicecategorywithcostdto.ServiceCategoryWithCostDTO
        ]),
    _ts_metadata._("design:type", Array)
], CalculateFareDTO.prototype, "services", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>CalculateFareError, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CalculateFareDTO.prototype, "error", void 0);
CalculateFareDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('CalculateFare')
], CalculateFareDTO);


/***/ }),
/* 168 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceCategoryWithCostDTO", ({
    enumerable: true,
    get: function() {
        return ServiceCategoryWithCostDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _servicewithcostdto = __webpack_require__(169);
let ServiceCategoryWithCostDTO = class ServiceCategoryWithCostDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ServiceCategoryWithCostDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>String),
    _ts_metadata._("design:type", String)
], ServiceCategoryWithCostDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>[
            _servicewithcostdto.ServiceWithCostDTO
        ]),
    _ts_metadata._("design:type", Array)
], ServiceCategoryWithCostDTO.prototype, "services", void 0);
ServiceCategoryWithCostDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ServiceCategoryWithCost')
], ServiceCategoryWithCostDTO);


/***/ }),
/* 169 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceWithCostDTO", ({
    enumerable: true,
    get: function() {
        return ServiceWithCostDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _mediadto = __webpack_require__(66);
const _serviceoptiondto = __webpack_require__(134);
let ServiceWithCostDTO = class ServiceWithCostDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ServiceWithCostDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ServiceWithCostDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)({
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ServiceWithCostDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ServiceWithCostDTO.prototype, "personCapacity", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceWithCostDTO.prototype, "cost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_mediadto.MediaDTO, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _mediadto.MediaDTO === "undefined" ? Object : _mediadto.MediaDTO)
], ServiceWithCostDTO.prototype, "media", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _serviceoptiondto.ServiceOptionDTO
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ServiceWithCostDTO.prototype, "options", void 0);
ServiceWithCostDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ServiceWithCost')
], ServiceWithCostDTO);


/***/ }),
/* 170 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CalculateFareInput", ({
    enumerable: true,
    get: function() {
        return CalculateFareInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CalculateFareInput = class CalculateFareInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.Point
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], CalculateFareInput.prototype, "points", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CalculateFareInput.prototype, "riderId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.TaxiOrderType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.TaxiOrderType === "undefined" ? Object : _database.TaxiOrderType)
], CalculateFareInput.prototype, "orderType", void 0);
CalculateFareInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CalculateFareInput);


/***/ }),
/* 171 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateOrderInput", ({
    enumerable: true,
    get: function() {
        return CreateOrderInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CreateOrderInput = class CreateOrderInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateOrderInput.prototype, "riderId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateOrderInput.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateOrderInput.prototype, "serviceId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.Point
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], CreateOrderInput.prototype, "points", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            String
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], CreateOrderInput.prototype, "addresses", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        defaultValue: 0
    }),
    _ts_metadata._("design:type", Number)
], CreateOrderInput.prototype, "waitingTimeMinutes", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        defaultValue: false
    }),
    _ts_metadata._("design:type", Boolean)
], CreateOrderInput.prototype, "twoWay", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _graphql.ID
        ], {
        defaultValue: []
    }),
    _ts_metadata._("design:type", Array)
], CreateOrderInput.prototype, "optionIds", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        defaultValue: 0
    }),
    _ts_metadata._("design:type", Number)
], CreateOrderInput.prototype, "intervalMinutes", void 0);
CreateOrderInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateOrderInput);


/***/ }),
/* 172 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderService", ({
    enumerable: true,
    get: function() {
        return OrderService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _nestjsquerygraphql = __webpack_require__(17);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _graphqlredissubscriptions = __webpack_require__(18);
const _typeorm1 = __webpack_require__(16);
let OrderService = class OrderService {
    constructor(orderRepository, activityRepository, orderNoteRepository, orderRedisService, pubSub){
        this.orderRepository = orderRepository;
        this.activityRepository = activityRepository;
        this.orderNoteRepository = orderNoteRepository;
        this.orderRedisService = orderRedisService;
        this.pubSub = pubSub;
    }
    async cancelOrder(orderId) {
        const order = await this.orderRepository.findOneOrFail({
            where: {
                id: orderId
            },
            relations: {
                service: true
            }
        });
        this.activityRepository.insert({
            requestId: order.id,
            type: _database.RequestActivityType.CanceledByOperator
        });
        await this.orderRepository.update(order.id, {
            status: _database.OrderStatus.Expired,
            finishTimestamp: new Date(),
            costAfterCoupon: 0
        });
        this.orderRedisService.expire([
            order.id
        ]);
        this.pubSub.publish('orderRemoved', {
            orderRemoved: order
        });
        return order;
    }
    createTaxiOrderNote(input) {
        this.orderNoteRepository.insert({
            orderId: input.orderId,
            note: input.note,
            staffId: input.staffId
        });
        return this.orderNoteRepository.findOneOrFail({
            where: {
                orderId: input.orderId
            },
            relations: {
                staff: true
            }
        });
    }
    async getTaxiOrderSuccessRate(input) {
        const countSuccess = await this.orderRepository.count({
            where: {
                expectedTimestamp: input.startTime || input.endTime == null ? null : (0, _typeorm1.Between)(input.startTime, input.endTime),
                status: _database.OrderStatus.Finished
            }
        });
        const countAllOrders = await this.orderRepository.count({
            where: {
                expectedTimestamp: input.startTime || input.endTime == null ? undefined : (0, _typeorm1.Between)(input.startTime, input.endTime)
            }
        });
        if (countAllOrders == 0) return null;
        return countSuccess / countAllOrders;
    }
};
OrderService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.TaxiOrderEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.RequestActivityEntity)),
    _ts_param._(2, (0, _typeorm.InjectRepository)(_database.TaxiOrderNoteEntity)),
    _ts_param._(4, (0, _nestjsquerygraphql.InjectPubSub)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _database.OrderRedisService === "undefined" ? Object : _database.OrderRedisService,
        typeof _graphqlredissubscriptions.RedisPubSub === "undefined" ? Object : _graphqlredissubscriptions.RedisPubSub
    ])
], OrderService);


/***/ }),
/* 173 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderSubscriptionService", ({
    enumerable: true,
    get: function() {
        return OrderSubscriptionService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _nestjsquerygraphql = __webpack_require__(17);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _graphqlredissubscriptions = __webpack_require__(18);
const _orderdto = __webpack_require__(99);
let OrderSubscriptionService = class OrderSubscriptionService {
    constructor(pubSub){
        this.pubSub = pubSub;
    }
    orderUpdated(orderId) {
        return this.pubSub.asyncIterator('orderUpdated');
    }
};
_ts_decorate._([
    (0, _graphql.Subscription)(()=>_orderdto.OrderDTO, {
        filter: (payload, variables, context)=>{
            return variables.orderId == payload.orderUpdated.id;
        }
    }),
    _ts_param._(0, (0, _graphql.Args)('orderId', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", void 0)
], OrderSubscriptionService.prototype, "orderUpdated", null);
OrderSubscriptionService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _nestjsquerygraphql.InjectPubSub)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _graphqlredissubscriptions.RedisPubSub === "undefined" ? Object : _graphqlredissubscriptions.RedisPubSub
    ])
], OrderSubscriptionService);


/***/ }),
/* 174 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderCancelReasonDTO", ({
    enumerable: true,
    get: function() {
        return OrderCancelReasonDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _serviceauthorizer = __webpack_require__(131);
const _orderdto = __webpack_require__(99);
let OrderCancelReasonDTO = class OrderCancelReasonDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], OrderCancelReasonDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", String)
], OrderCancelReasonDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", Boolean)
], OrderCancelReasonDTO.prototype, "isEnabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AnnouncementUserType),
    _ts_metadata._("design:type", typeof _database.AnnouncementUserType === "undefined" ? Object : _database.AnnouncementUserType)
], OrderCancelReasonDTO.prototype, "userType", void 0);
OrderCancelReasonDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('OrderCancelReason'),
    (0, _nestjsquerygraphql.Authorize)(_serviceauthorizer.ServiceAuthorizer),
    (0, _nestjsquerygraphql.OffsetConnection)('orders', ()=>_orderdto.OrderDTO, {
        enableAggregate: true
    })
], OrderCancelReasonDTO);


/***/ }),
/* 175 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderCancelReasonInput", ({
    enumerable: true,
    get: function() {
        return OrderCancelReasonInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let OrderCancelReasonInput = class OrderCancelReasonInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], OrderCancelReasonInput.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], OrderCancelReasonInput.prototype, "isEnabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AnnouncementUserType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.AnnouncementUserType === "undefined" ? Object : _database.AnnouncementUserType)
], OrderCancelReasonInput.prototype, "userType", void 0);
OrderCancelReasonInput = _ts_decorate._([
    (0, _graphql.InputType)()
], OrderCancelReasonInput);


/***/ }),
/* 176 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "OrderResolver", ({
    enumerable: true,
    get: function() {
        return OrderResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _orderservice = __webpack_require__(172);
const _taxiordernotedto = __webpack_require__(177);
const _createtaxiordernoteinput = __webpack_require__(178);
const _common = __webpack_require__(7);
const _jwtauthguard = __webpack_require__(29);
let OrderResolver = class OrderResolver {
    constructor(orderService, context){
        this.orderService = orderService;
        this.context = context;
    }
    async createTaxiOrderNote(input) {
        return await this.orderService.createTaxiOrderNote({
            ...input,
            staffId: this.context.req.user.id
        });
    }
    async taxiOrderSuccessRate(startTime, endTime) {
        return this.orderService.getTaxiOrderSuccessRate({
            startTime,
            endTime
        });
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_taxiordernotedto.TaxiOrderNoteDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_createtaxiordernoteinput.CreateTaxiOrderNoteInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _createtaxiordernoteinput.CreateTaxiOrderNoteInput === "undefined" ? Object : _createtaxiordernoteinput.CreateTaxiOrderNoteInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], OrderResolver.prototype, "createTaxiOrderNote", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_param._(0, (0, _graphql.Args)('startTime', {
        type: ()=>Date,
        nullable: true
    })),
    _ts_param._(1, (0, _graphql.Args)('endTime', {
        type: ()=>Date,
        nullable: true
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof Date === "undefined" ? Object : Date,
        typeof Date === "undefined" ? Object : Date
    ]),
    _ts_metadata._("design:returntype", Promise)
], OrderResolver.prototype, "taxiOrderSuccessRate", null);
OrderResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(1, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _orderservice.OrderService === "undefined" ? Object : _orderservice.OrderService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], OrderResolver);


/***/ }),
/* 177 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiOrderNoteDTO", ({
    enumerable: true,
    get: function() {
        return TaxiOrderNoteDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _operatordto = __webpack_require__(65);
let TaxiOrderNoteDTO = class TaxiOrderNoteDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], TaxiOrderNoteDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiOrderNoteDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        filterRequired: true
    }),
    _ts_metadata._("design:type", Number)
], TaxiOrderNoteDTO.prototype, "orderId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", String)
], TaxiOrderNoteDTO.prototype, "note", void 0);
TaxiOrderNoteDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('TaxiOrderNote'),
    (0, _nestjsquerygraphql.Relation)('staff', ()=>_operatordto.OperatorDTO)
], TaxiOrderNoteDTO);


/***/ }),
/* 178 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateTaxiOrderNoteInput", ({
    enumerable: true,
    get: function() {
        return CreateTaxiOrderNoteInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CreateTaxiOrderNoteInput = class CreateTaxiOrderNoteInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateTaxiOrderNoteInput.prototype, "orderId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateTaxiOrderNoteInput.prototype, "note", void 0);
CreateTaxiOrderNoteInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateTaxiOrderNoteInput);


/***/ }),
/* 179 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PaymentGatewayModule", ({
    enumerable: true,
    get: function() {
        return PaymentGatewayModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _paymentgatewaydto = __webpack_require__(107);
const _createpaymentgatewayinput = __webpack_require__(180);
const _updatepaymentgatewayinput = __webpack_require__(181);
let PaymentGatewayModule = class PaymentGatewayModule {
};
PaymentGatewayModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.PaymentGatewayEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.PaymentGatewayEntity,
                        DTOClass: _paymentgatewaydto.PaymentGatewayDTO,
                        CreateDTOClass: _createpaymentgatewayinput.CreatePaymentGatewayInput,
                        UpdateDTOClass: _updatepaymentgatewayinput.UpdatePaymentGatewayInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    }
                ]
            })
        ]
    })
], PaymentGatewayModule);


/***/ }),
/* 180 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreatePaymentGatewayInput", ({
    enumerable: true,
    get: function() {
        return CreatePaymentGatewayInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CreatePaymentGatewayInput = class CreatePaymentGatewayInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], CreatePaymentGatewayInput.prototype, "enabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreatePaymentGatewayInput.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.PaymentGatewayType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.PaymentGatewayType === "undefined" ? Object : _database.PaymentGatewayType)
], CreatePaymentGatewayInput.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreatePaymentGatewayInput.prototype, "publicKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreatePaymentGatewayInput.prototype, "privateKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreatePaymentGatewayInput.prototype, "merchantId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreatePaymentGatewayInput.prototype, "saltKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreatePaymentGatewayInput.prototype, "mediaId", void 0);
CreatePaymentGatewayInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreatePaymentGatewayInput);


/***/ }),
/* 181 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdatePaymentGatewayInput", ({
    enumerable: true,
    get: function() {
        return UpdatePaymentGatewayInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let UpdatePaymentGatewayInput = class UpdatePaymentGatewayInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], UpdatePaymentGatewayInput.prototype, "enabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdatePaymentGatewayInput.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.PaymentGatewayType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.PaymentGatewayType === "undefined" ? Object : _database.PaymentGatewayType)
], UpdatePaymentGatewayInput.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdatePaymentGatewayInput.prototype, "publicKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdatePaymentGatewayInput.prototype, "privateKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdatePaymentGatewayInput.prototype, "merchantId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdatePaymentGatewayInput.prototype, "saltKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdatePaymentGatewayInput.prototype, "mediaId", void 0);
UpdatePaymentGatewayInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdatePaymentGatewayInput);


/***/ }),
/* 182 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PayoutModule", ({
    enumerable: true,
    get: function() {
        return PayoutModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _payoutmethoddto = __webpack_require__(104);
const _database = __webpack_require__(15);
const _createpayoutmethodinput = __webpack_require__(183);
const _jwtauthguard = __webpack_require__(29);
const _payoutaccountdto = __webpack_require__(103);
const _payoutservice = __webpack_require__(184);
const _payoutresolver = __webpack_require__(185);
const _typeorm = __webpack_require__(14);
const _operatormodule = __webpack_require__(62);
const _taxipayoutmodule = __webpack_require__(186);
const _shoppayoutmodule = __webpack_require__(197);
const _parkingpayoutmodule = __webpack_require__(221);
let PayoutModule = class PayoutModule {
};
PayoutModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _operatormodule.OperatorModule,
            _taxipayoutmodule.TaxiPayoutModule,
            _shoppayoutmodule.ShopPayoutModule,
            _parkingpayoutmodule.ParkingPayoutModule,
            _typeorm.TypeOrmModule.forFeature([
                _database.RegionEntity,
                _database.DriverWalletEntity,
                _database.DriverTransactionEntity,
                _database.ShopWalletEntity,
                _database.ParkingWalletEntity,
                _database.ShopTransactionEntity,
                _database.ParkingTransactionEntity
            ]),
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.PayoutMethodEntity,
                        _database.PayoutAccountEntity
                    ])
                ],
                resolvers: [
                    {
                        DTOClass: _payoutmethoddto.PayoutMethodDTO,
                        EntityClass: _database.PayoutMethodEntity,
                        CreateDTOClass: _createpayoutmethodinput.CreatePayoutMethodInput,
                        UpdateDTOClass: _createpayoutmethodinput.CreatePayoutMethodInput,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        enableTotalCount: true,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET
                    },
                    {
                        DTOClass: _payoutaccountdto.PayoutAccountDTO,
                        EntityClass: _database.PayoutAccountEntity,
                        read: {
                            many: {
                                disabled: true
                            }
                        },
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    }
                ]
            })
        ],
        providers: [
            _payoutservice.PayoutService,
            _payoutresolver.PayoutResolver
        ]
    })
], PayoutModule);


/***/ }),
/* 183 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreatePayoutMethodInput", ({
    enumerable: true,
    get: function() {
        return CreatePayoutMethodInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CreatePayoutMethodInput = class CreatePayoutMethodInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], CreatePayoutMethodInput.prototype, "enabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreatePayoutMethodInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreatePayoutMethodInput.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreatePayoutMethodInput.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.PayoutMethodType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.PayoutMethodType === "undefined" ? Object : _database.PayoutMethodType)
], CreatePayoutMethodInput.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreatePayoutMethodInput.prototype, "publicKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreatePayoutMethodInput.prototype, "privateKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreatePayoutMethodInput.prototype, "saltKey", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreatePayoutMethodInput.prototype, "merchantId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreatePayoutMethodInput.prototype, "mediaId", void 0);
CreatePayoutMethodInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreatePayoutMethodInput);


/***/ }),
/* 184 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PayoutService", ({
    enumerable: true,
    get: function() {
        return PayoutService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
const _json2csv = __webpack_require__(35);
const _promises = __webpack_require__(34);
const _path = __webpack_require__(24);
const _stripe = __webpack_require__(105);
let PayoutService = class PayoutService {
    constructor(regionRepository, payoutMethodRepository, driverWalletRepository, shopWalletRepository, parkingWalletRepository, driverTransactionRepository, shopTransactionRepository, parkingTransactionRepository){
        this.regionRepository = regionRepository;
        this.payoutMethodRepository = payoutMethodRepository;
        this.driverWalletRepository = driverWalletRepository;
        this.shopWalletRepository = shopWalletRepository;
        this.parkingWalletRepository = parkingWalletRepository;
        this.driverTransactionRepository = driverTransactionRepository;
        this.shopTransactionRepository = shopTransactionRepository;
        this.parkingTransactionRepository = parkingTransactionRepository;
    }
    async getSupportedCurrencies() {
        const regions = await this.regionRepository.find();
        const currencies = regions.map((region)=>region.currency);
        const distinctCurrencies = [
            ...new Set(currencies)
        ];
        return distinctCurrencies;
    }
    // async getPayoutStatistics(input: {
    //   currency?: string;
    // }): Promise<PayoutStatisticsDTO> {
    //   let { currency } = input;
    //   if (!currency) {
    //     const currentCurrencies = await this.getSupportedCurrencies();
    //     currency = currentCurrencies.length > 0 ? currentCurrencies[0] : 'USD';
    //   }
    //   const pendingAmount = await this.getPendingAmount(currency);
    //   const lastPayoutAmount = await this.getLastPayoutAmount(currency);
    //   const payoutMethodStats = await this.getDriversDefaultPayoutMethodStats(
    //     currency,
    //   );
    //   return {
    //     pendingAmount,
    //     lastPayoutAmount,
    //     currency,
    //     usersDefaultPayoutMethodStats: payoutMethodStats,
    //   };
    // }
    async getPendingAmount(currency) {
        const pendingAmount = await this.driverWalletRepository.find({
            where: {
                currency,
                balance: (0, _typeorm1.MoreThan)(0)
            }
        });
        const sum = pendingAmount.reduce((a, b)=>a + (b.balance || 0), 0);
        return sum || 0;
    }
    async getDriversDefaultPayoutMethodStats(currency) {
        const driverWallets = await this.driverWalletRepository.find({
            where: {
                currency
            },
            relations: [
                'driver',
                'driver.payoutAccounts'
            ]
        });
        const payoutMethods = await this.payoutMethodRepository.find({
            where: {
                currency
            }
        });
        const result = [];
        payoutMethods.forEach((payoutMethod)=>{
            const driverWalletsWithPayoutMethod = driverWallets.filter((driverWallet)=>{
                if (driverWallet.driver == null) {
                    // This drivers have deleted their account
                    return false;
                }
                return driverWallet.driver.payoutAccounts.find((account)=>account.payoutMethodId === payoutMethod.id && account.isDefault);
            });
            if (driverWalletsWithPayoutMethod.length > 0) {
                result.push({
                    payoutMethod,
                    totalCount: driverWalletsWithPayoutMethod.length
                });
            }
        });
        const driversWithoutDefaultPayoutMethod = driverWallets.filter((driverWallet)=>{
            if (driverWallet.driver == null) {
                // This drivers have deleted their account
                return false;
            }
            return driverWallet.driver.payoutAccounts.filter((account)=>account.isDefault).length === 0;
        });
        if (driversWithoutDefaultPayoutMethod.length > 0) {
            result.push({
                payoutMethod: null,
                totalCount: driversWithoutDefaultPayoutMethod.length
            });
        }
        return result;
    }
    // async getLastPayoutAmount(currency: string): Promise<number> {
    //   const lastPayout = await this.payoutSessionRepository.findOne({
    //     where: {
    //       currency,
    //       status: PayoutSessionStatus.PAID,
    //     },
    //     order: {
    //       createdAt: 'DESC',
    //     },
    //   });
    //   if (!lastPayout) {
    //     return 0;
    //   }
    //   return lastPayout.totalAmount;
    // }
    // async createPayoutSession(
    //   operatorId: number,
    //   input: CreatePayoutSessionInput,
    // ): Promise<TaxiPayoutSessionEntity> {
    //   const session = this.payoutSessionRepository.create({
    //     createdByOperatorId: operatorId,
    //     currency: input.currency,
    //     description: input.description,
    //     totalAmount: 0,
    //     payoutMethods: input.payoutMethodIds.map((id) => ({ id })),
    //   });
    //   const result = await this.payoutSessionRepository.save(session);
    //   let totalAmount = 0;
    //   if (input.appType == AppType.Taxi) {
    //     const driverWallets = await this.driverWalletRepository.find({
    //       where: {
    //         currency: input.currency,
    //         balance: MoreThan(input.minimumAmount),
    //       },
    //       relations: ['driver', 'driver.payoutAccounts'],
    //     });
    //     driverWallets.forEach(async (driverWallet) => {
    //       const defaultPayoutAccount = driverWallet.driver.payoutAccounts.find(
    //         (account) => account.isDefault,
    //       );
    //       if (defaultPayoutAccount) {
    //         totalAmount += driverWallet.balance;
    //         const transaction = this.driverTransactionRepository.create({
    //           driverId: driverWallet.driver.id,
    //           amount: driverWallet.balance,
    //           currency: driverWallet.currency,
    //           action: TransactionAction.Deduct,
    //           deductType: DriverDeductTransactionType.Withdraw,
    //           payoutSessionId: result.id,
    //           payoutAccountId: defaultPayoutAccount.id,
    //           payoutMethodId: defaultPayoutAccount.payoutMethodId,
    //         });
    //         await this.driverTransactionRepository.save(transaction);
    //       }
    //     });
    //   }
    //   if (input.appType == AppType.Shop) {
    //     const shopWallets = await this.shopWalletRepository.find({
    //       where: {
    //         currency: input.currency,
    //         balance: MoreThan(input.minimumAmount),
    //       },
    //       relations: ['shop', 'shop.payoutAccounts'],
    //     });
    //     shopWallets.forEach(async (shopWalet) => {
    //       const defaultPayoutAccount = shopWalet.shop.payoutAccounts.find(
    //         (account) => account.isDefault,
    //       );
    //       if (defaultPayoutAccount) {
    //         totalAmount += shopWalet.balance;
    //         const transaction = this.shopTransactionRepository.create({
    //           shopId: shopWalet.shop.id,
    //           amount: shopWalet.balance,
    //           currency: shopWalet.currency,
    //           type: TransactionType.Debit,
    //           debitType: ShopTransactionDebitType.Payout,
    //           payoutSessionId: result.id,
    //           payoutAccountId: defaultPayoutAccount.id,
    //           payoutMethodId: defaultPayoutAccount.payoutMethodId,
    //         });
    //         await this.driverTransactionRepository.save(transaction);
    //       }
    //     });
    //   }
    //   if (input.appType == AppType.Parking) {
    //     const parkingWallets = await this.parkingWalletRepository.find({
    //       where: {
    //         currency: input.currency,
    //         balance: MoreThan(input.minimumAmount),
    //       },
    //       relations: ['customer', 'customer.payoutAccounts'],
    //     });
    //     parkingWallets.forEach(async (parkingWallet) => {
    //       const defaultPayoutAccount = parkingWallet.customer.payoutAccounts.find(
    //         (account) => account.isDefault,
    //       );
    //       if (defaultPayoutAccount) {
    //         totalAmount += parkingWallet.balance;
    //         const transaction = this.parkingTransactionRepository.create({
    //           customerId: parkingWallet.customer.id,
    //           amount: parkingWallet.balance,
    //           currency: parkingWallet.currency,
    //           type: TransactionType.Debit,
    //           debitType: ParkingTransactionDebitType.Payout,
    //           payoutSessionId: result.id,
    //           payoutAccountId: defaultPayoutAccount.id,
    //           payoutMethodId: defaultPayoutAccount.payoutMethodId,
    //         });
    //         await this.parkingTransactionRepository.save(transaction);
    //       }
    //     });
    //   }
    //   // if (driverWallets.length === 0) {
    //   //   throw new ForbiddenError('No drivers to payout with these filters');
    //   // }
    //   await this.payoutSessionRepository.update(result.id, { totalAmount });
    //   return result;
    // }
    async exportToCsv(input) {
        const driverTransactions = await this.driverTransactionRepository.find({
            where: {
                payoutSessionId: input.payoutSessionId,
                payoutMethodId: input.payoutMethodId,
                status: _database.TransactionStatus.Processing
            },
            relations: [
                'driver',
                'payoutAccount',
                'payoutMethod'
            ]
        });
        const result = driverTransactions.map((transaction)=>{
            return {
                transactionId: transaction.id,
                driverFirstName: transaction.driver.firstName,
                driverLastName: transaction.driver.lastName,
                amount: transaction.amount,
                currency: transaction.currency,
                accountNumber: transaction.payoutAccount.accountNumber,
                routingNumber: transaction.payoutAccount.routingNumber,
                bankName: transaction.payoutAccount.bankName,
                branchName: transaction.payoutAccount.branchName,
                accountHolderName: transaction.payoutAccount.accountHolderName,
                accountHolderCountry: transaction.payoutAccount.accountHolderCountry,
                accountHolderState: transaction.payoutAccount.accountHolderState,
                accountHolderCity: transaction.payoutAccount.accountHolderCity,
                accountHolderAddress: transaction.payoutAccount.accountHolderAddress,
                accountHolderZip: transaction.payoutAccount.accountHolderZip
            };
        });
        const str = await (0, _json2csv.json2csv)(result);
        const fileName = `${new Date().getTime().toString()}.csv`;
        await (0, _promises.writeFile)((0, _path.join)(process.cwd(), 'uploads', `${new Date().getTime().toString()}.csv`), str);
        return {
            url: `uploads/${fileName}`
        };
    }
    async runAutoPayout(input) {
        const driverTransactions = await this.driverTransactionRepository.find({
            where: {
                payoutSessionId: input.payoutSessionId,
                payoutMethodId: input.payoutMethodId,
                status: _database.TransactionStatus.Processing
            },
            relations: [
                'driver',
                'payoutAccount',
                'payoutMethod'
            ]
        });
        for (const transaction of driverTransactions){
            if (transaction.payoutMethod.type == _database.PayoutMethodType.Stripe) {
                const instance = new _stripe.Stripe(transaction.payoutMethod.privateKey, {
                    apiVersion: '2022-11-15'
                });
                await instance.transfers.create({
                    amount: Math.floor(transaction.amount * 100),
                    currency: transaction.currency,
                    destination: transaction.payoutAccount.token,
                    description: 'Payout'
                });
                this.driverWalletRepository.decrement({
                    driverId: transaction.driverId,
                    currency: transaction.currency
                }, 'balance', transaction.amount);
                await this.driverTransactionRepository.update(transaction.id, {
                    status: _database.TransactionStatus.Done
                });
            }
        }
        const shopTrnsactions = await this.shopTransactionRepository.find({
            where: {
                payoutSessionId: input.payoutSessionId,
                payoutMethodId: input.payoutMethodId,
                status: _database.TransactionStatus.Processing
            },
            relations: [
                'shop',
                'payoutAccount',
                'payoutMethod'
            ]
        });
        for (const transaction of shopTrnsactions){
            if (transaction.payoutMethod.type == _database.PayoutMethodType.Stripe) {
                const instance = new _stripe.Stripe(transaction.payoutMethod.privateKey, {
                    apiVersion: '2022-11-15'
                });
                await instance.transfers.create({
                    amount: Math.floor(transaction.amount * 100),
                    currency: transaction.currency,
                    destination: transaction.payoutAccount.token,
                    description: 'Payout'
                });
                this.shopWalletRepository.decrement({
                    shopId: transaction.shopId,
                    currency: transaction.currency
                }, 'balance', transaction.amount);
                await this.shopTransactionRepository.update(transaction.id, {
                    status: _database.TransactionStatus.Done
                });
            }
        }
        const parkingTransactions = await this.parkingTransactionRepository.find({
            where: {
                payoutSessionId: input.payoutSessionId,
                payoutMethodId: input.payoutMethodId,
                status: _database.TransactionStatus.Processing
            },
            relations: [
                'customer',
                'payoutAccount',
                'payoutMethod'
            ]
        });
        for (const transaction of parkingTransactions){
            if (transaction.payoutMethod.type == _database.PayoutMethodType.Stripe) {
                const instance = new _stripe.Stripe(transaction.payoutMethod.privateKey, {
                    apiVersion: '2022-11-15'
                });
                await instance.transfers.create({
                    amount: Math.floor(transaction.amount * 100),
                    currency: transaction.currency,
                    destination: transaction.payoutAccount.token,
                    description: 'Payout'
                });
                this.parkingWalletRepository.decrement({
                    customerId: transaction.customerId,
                    currency: transaction.currency
                }, 'balance', transaction.amount);
                await this.driverTransactionRepository.update(transaction.id, {
                    status: _database.TransactionStatus.Done
                });
            }
        }
    }
    async manualPayout(input) {
        switch(input.appType){
            case _database.AppType.Taxi:
                {
                    const driverTransaction = await this.driverTransactionRepository.findOneBy({
                        id: input.userTransactionId
                    });
                    this.driverTransactionRepository.update(input.userTransactionId, {
                        refrenceNumber: input.transactionNumber,
                        description: input.description,
                        status: _database.TransactionStatus.Done
                    });
                    this.driverWalletRepository.decrement({
                        driverId: driverTransaction.driverId,
                        currency: driverTransaction.currency
                    }, 'balance', driverTransaction.amount);
                    return true;
                }
            case _database.AppType.Shop:
                {
                    const shopTransaction = await this.shopTransactionRepository.findOneBy({
                        id: input.userTransactionId
                    });
                    this.shopTransactionRepository.update(input.userTransactionId, {
                        documentNumber: input.transactionNumber,
                        description: input.description,
                        status: _database.TransactionStatus.Done
                    });
                    this.shopWalletRepository.decrement({
                        shopId: shopTransaction.shopId,
                        currency: shopTransaction.currency
                    }, 'balance', shopTransaction.amount);
                    return true;
                }
            case _database.AppType.Parking:
                {
                    const parkingTransaction = await this.parkingTransactionRepository.findOneBy({
                        id: input.userTransactionId
                    });
                    this.parkingTransactionRepository.update(input.userTransactionId, {
                        documentNumber: input.transactionNumber,
                        description: input.description,
                        status: _database.TransactionStatus.Done
                    });
                    this.parkingWalletRepository.decrement({
                        customerId: parkingTransaction.customerId,
                        currency: parkingTransaction.currency
                    }, 'balance', parkingTransaction.amount);
                    return true;
                }
        }
    }
};
PayoutService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.RegionEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.PayoutMethodEntity)),
    _ts_param._(2, (0, _typeorm.InjectRepository)(_database.DriverWalletEntity)),
    _ts_param._(3, (0, _typeorm.InjectRepository)(_database.ShopWalletEntity)),
    _ts_param._(4, (0, _typeorm.InjectRepository)(_database.ParkingWalletEntity)),
    _ts_param._(5, (0, _typeorm.InjectRepository)(_database.DriverTransactionEntity)),
    _ts_param._(6, (0, _typeorm.InjectRepository)(_database.ShopTransactionEntity)),
    _ts_param._(7, (0, _typeorm.InjectRepository)(_database.ParkingTransactionEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], PayoutService);


/***/ }),
/* 185 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PayoutResolver", ({
    enumerable: true,
    get: function() {
        return PayoutResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _payoutservice = __webpack_require__(184);
const _common = __webpack_require__(7);
const _jwtauthguard = __webpack_require__(29);
let PayoutResolver = class PayoutResolver {
    constructor(payoutService){
        this.payoutService = payoutService;
    }
    async supportedCurrencies() {
        return this.payoutService.getSupportedCurrencies();
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            String
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], PayoutResolver.prototype, "supportedCurrencies", null);
PayoutResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _payoutservice.PayoutService === "undefined" ? Object : _payoutservice.PayoutService
    ])
], PayoutResolver);


/***/ }),
/* 186 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiPayoutModule", ({
    enumerable: true,
    get: function() {
        return TaxiPayoutModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _taxipayoutservice = __webpack_require__(187);
const _taxipayoutresolver = __webpack_require__(188);
const _operatormodule = __webpack_require__(62);
const _nestjsquerygraphql = __webpack_require__(17);
const _jwtauthguard = __webpack_require__(29);
const _taxipayoutsessionpayoutmethoddetaildto = __webpack_require__(193);
const _taxipayoutsessiondto = __webpack_require__(192);
const _updatepayoutsessioninput = __webpack_require__(196);
const _nestjsquerytypeorm = __webpack_require__(26);
let TaxiPayoutModule = class TaxiPayoutModule {
};
TaxiPayoutModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _operatormodule.OperatorModule,
            _typeorm.TypeOrmModule.forFeature([
                _database.TaxiPayoutSessionEntity,
                _database.DriverTransactionEntity,
                _database.DriverWalletEntity,
                _database.RegionEntity,
                _database.PayoutMethodEntity
            ]),
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.TaxiPayoutSessionEntity,
                        _database.TaxiPayoutSessionPayoutMethodDetailEntity
                    ])
                ],
                resolvers: [
                    {
                        DTOClass: _taxipayoutsessiondto.TaxiPayoutSessionDTO,
                        EntityClass: _database.TaxiPayoutSessionEntity,
                        UpdateDTOClass: _updatepayoutsessioninput.UpdatePayoutSessionInput,
                        create: {
                            disabled: true
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    },
                    {
                        DTOClass: _taxipayoutsessionpayoutmethoddetaildto.TaxiPayoutSessionPayoutMethodDetailDTO,
                        EntityClass: _database.TaxiPayoutSessionPayoutMethodDetailEntity,
                        read: {
                            disabled: true
                        },
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    }
                ]
            })
        ],
        providers: [
            _taxipayoutservice.TaxiPayoutService,
            _taxipayoutresolver.TaxiPayoutResolver
        ],
        exports: [
            _taxipayoutresolver.TaxiPayoutResolver
        ]
    })
], TaxiPayoutModule);


/***/ }),
/* 187 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiPayoutService", ({
    enumerable: true,
    get: function() {
        return TaxiPayoutService;
    }
}));
const _interop_require_default = __webpack_require__(48);
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
const _json2csv = __webpack_require__(35);
const _promises = __webpack_require__(34);
const _path = __webpack_require__(24);
const _stripe = /*#__PURE__*/ _interop_require_default._(__webpack_require__(105));
const _apollo = __webpack_require__(3);
let TaxiPayoutService = class TaxiPayoutService {
    constructor(payoutSessionRepository, payoutSessionPayoutMethodDetailRepository, driverTransactionRepository, driverWalletRepository, regionRepository, payoutMethodRepository){
        this.payoutSessionRepository = payoutSessionRepository;
        this.payoutSessionPayoutMethodDetailRepository = payoutSessionPayoutMethodDetailRepository;
        this.driverTransactionRepository = driverTransactionRepository;
        this.driverWalletRepository = driverWalletRepository;
        this.regionRepository = regionRepository;
        this.payoutMethodRepository = payoutMethodRepository;
    }
    async createPayoutSession(operatorId, input) {
        const driverWallets = await this.driverWalletRepository.find({
            where: {
                currency: input.currency,
                balance: (0, _typeorm1.MoreThan)(input.minimumAmount)
            },
            relations: [
                'driver',
                'driver.payoutAccounts'
            ]
        });
        if (driverWallets.length === 0) {
            throw new _apollo.ForbiddenError('No drivers to payout with these filters');
        }
        const session = this.payoutSessionRepository.create({
            createdByOperatorId: operatorId,
            currency: input.currency,
            description: input.description,
            totalAmount: 0,
            payoutMethods: input.payoutMethodIds.map((id)=>({
                    id
                }))
        });
        let payoutSession = await this.payoutSessionRepository.save(session);
        for (const payoutMethod of input.payoutMethodIds){
            const detail = this.payoutSessionPayoutMethodDetailRepository.create({
                payoutSessionId: payoutSession.id,
                payoutMethodId: payoutMethod,
                status: _database.PayoutSessionStatus.PENDING
            });
            await this.payoutSessionPayoutMethodDetailRepository.save(detail);
        }
        let totalAmount = 0;
        const payoutSessionPayoutMethodDetails = await this.payoutSessionPayoutMethodDetailRepository.find({
            where: {
                payoutSessionId: payoutSession.id
            }
        });
        driverWallets.forEach(async (driverWallet)=>{
            const defaultPayoutAccount = driverWallet.driver.payoutAccounts.find((account)=>account.isDefault);
            if (defaultPayoutAccount) {
                totalAmount += driverWallet.balance;
                const transaction = this.driverTransactionRepository.create({
                    driverId: driverWallet.driver.id,
                    amount: driverWallet.balance,
                    currency: driverWallet.currency,
                    status: _database.TransactionStatus.Processing,
                    action: _database.TransactionAction.Deduct,
                    deductType: _database.DriverDeductTransactionType.Withdraw,
                    payoutSessionId: payoutSession.id,
                    payoutAccountId: defaultPayoutAccount.id,
                    payoutMethodId: defaultPayoutAccount.payoutMethodId,
                    payoutSessionMethodId: payoutSessionPayoutMethodDetails.find((detail)=>detail.payoutMethodId === defaultPayoutAccount.payoutMethodId)?.id
                });
                await this.driverTransactionRepository.save(transaction);
            }
        });
        await this.payoutSessionRepository.update(payoutSession.id, {
            totalAmount
        });
        payoutSession = await this.payoutSessionRepository.findOneBy({
            id: session.id
        });
        return payoutSession;
    }
    async getSupportedCurrencies() {
        const regions = await this.regionRepository.find();
        const currencies = regions.map((region)=>region.currency);
        const distinctCurrencies = [
            ...new Set(currencies)
        ];
        return distinctCurrencies;
    }
    async getPendingAmount(currency) {
        const pendingAmount = await this.driverWalletRepository.find({
            where: {
                currency,
                balance: (0, _typeorm1.MoreThan)(0)
            }
        });
        const sum = pendingAmount.reduce((a, b)=>a + (b.balance || 0), 0);
        return sum || 0;
    }
    async getLastPayoutAmount(currency) {
        const lastPayout = await this.payoutSessionRepository.findOne({
            where: {
                currency,
                status: _database.PayoutSessionStatus.PAID
            },
            order: {
                createdAt: 'DESC'
            }
        });
        if (!lastPayout) {
            return 0;
        }
        return lastPayout.totalAmount;
    }
    async getPayoutStatistics(input) {
        let { currency } = input;
        if (!currency) {
            const currentCurrencies = await this.getSupportedCurrencies();
            currency = currentCurrencies.length > 0 ? currentCurrencies[0] : 'USD';
        }
        const pendingAmount = await this.getPendingAmount(currency);
        const lastPayoutAmount = await this.getLastPayoutAmount(currency);
        const payoutMethodStats = await this.getDriversDefaultPayoutMethodStats(currency);
        return {
            pendingAmount,
            lastPayoutAmount,
            currency,
            usersDefaultPayoutMethodStats: payoutMethodStats
        };
    }
    async getDriversDefaultPayoutMethodStats(currency) {
        const driverWallets = await this.driverWalletRepository.find({
            where: {
                currency
            },
            relations: [
                'driver',
                'driver.payoutAccounts'
            ]
        });
        const payoutMethods = await this.payoutMethodRepository.find({
            where: {
                currency
            }
        });
        const result = [];
        payoutMethods.forEach((payoutMethod)=>{
            const driverWalletsWithPayoutMethod = driverWallets.filter((driverWallet)=>{
                if (driverWallet.driver == null) {
                    // This drivers have deleted their account
                    return false;
                }
                return driverWallet.driver.payoutAccounts.find((account)=>account.payoutMethodId === payoutMethod.id && account.isDefault);
            });
            if (driverWalletsWithPayoutMethod.length > 0) {
                result.push({
                    payoutMethod,
                    totalCount: driverWalletsWithPayoutMethod.length
                });
            }
        });
        const driversWithoutDefaultPayoutMethod = driverWallets.filter((driverWallet)=>{
            if (driverWallet.driver == null) {
                // This drivers have deleted their account
                return false;
            }
            return driverWallet.driver.payoutAccounts.filter((account)=>account.isDefault).length === 0;
        });
        if (driversWithoutDefaultPayoutMethod.length > 0) {
            result.push({
                payoutMethod: null,
                totalCount: driversWithoutDefaultPayoutMethod.length
            });
        }
        return result;
    }
    async manualPayout(input) {
        const driverTransaction = await this.driverTransactionRepository.findOneBy({
            id: input.userTransactionId
        });
        this.driverTransactionRepository.update(input.userTransactionId, {
            refrenceNumber: input.transactionNumber,
            description: input.description,
            status: _database.TransactionStatus.Done
        });
        this.driverWalletRepository.decrement({
            driverId: driverTransaction.driverId,
            currency: driverTransaction.currency
        }, 'balance', driverTransaction.amount);
        return this.driverTransactionRepository.findOneBy({
            id: input.userTransactionId
        });
    }
    async exportToCsv(input) {
        const driverTransactions = await this.driverTransactionRepository.find({
            where: {
                payoutSessionId: input.payoutSessionId,
                payoutMethodId: input.payoutMethodId,
                status: _database.TransactionStatus.Processing
            },
            relations: [
                'driver',
                'payoutAccount',
                'payoutMethod'
            ]
        });
        const result = driverTransactions.map((transaction)=>{
            return {
                transactionId: transaction.id,
                driverFirstName: transaction.driver.firstName,
                driverLastName: transaction.driver.lastName,
                amount: transaction.amount,
                currency: transaction.currency,
                accountNumber: transaction.payoutAccount.accountNumber,
                routingNumber: transaction.payoutAccount.routingNumber,
                bankName: transaction.payoutAccount.bankName,
                branchName: transaction.payoutAccount.branchName,
                accountHolderName: transaction.payoutAccount.accountHolderName,
                accountHolderCountry: transaction.payoutAccount.accountHolderCountry,
                accountHolderState: transaction.payoutAccount.accountHolderState,
                accountHolderCity: transaction.payoutAccount.accountHolderCity,
                accountHolderAddress: transaction.payoutAccount.accountHolderAddress,
                accountHolderZip: transaction.payoutAccount.accountHolderZip
            };
        });
        const str = await (0, _json2csv.json2csv)(result);
        const fileName = `${new Date().getTime().toString()}.csv`;
        await (0, _promises.writeFile)((0, _path.join)(process.cwd(), 'uploads', `${new Date().getTime().toString()}.csv`), str);
        return {
            url: `uploads/${fileName}`
        };
    }
    async runAutoPayout(input) {
        const driverTransactions = await this.driverTransactionRepository.find({
            where: {
                payoutSessionId: input.payoutSessionId,
                payoutMethodId: input.payoutMethodId,
                status: _database.TransactionStatus.Processing
            },
            relations: {
                driver: true,
                payoutAccount: true,
                payoutMethod: true
            }
        });
        for (const transaction of driverTransactions){
            if (transaction.payoutMethod.type == _database.PayoutMethodType.Stripe) {
                const instance = new _stripe.default(transaction.payoutMethod.privateKey, {
                    apiVersion: '2022-11-15'
                });
                const stripeTransaction = await instance.transfers.create({
                    amount: Math.floor(transaction.amount * 100),
                    currency: transaction.currency,
                    destination: transaction.payoutAccount.token,
                    description: 'Payout'
                });
                this.driverWalletRepository.decrement({
                    driverId: transaction.driverId,
                    currency: transaction.currency
                }, 'balance', transaction.amount);
                await this.driverTransactionRepository.update(transaction.id, {
                    status: _database.TransactionStatus.Done,
                    refrenceNumber: stripeTransaction.id
                });
            }
        }
    }
};
TaxiPayoutService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.TaxiPayoutSessionEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.TaxiPayoutSessionPayoutMethodDetailEntity)),
    _ts_param._(2, (0, _typeorm.InjectRepository)(_database.DriverTransactionEntity)),
    _ts_param._(3, (0, _typeorm.InjectRepository)(_database.DriverWalletEntity)),
    _ts_param._(4, (0, _typeorm.InjectRepository)(_database.RegionEntity)),
    _ts_param._(5, (0, _typeorm.InjectRepository)(_database.PayoutMethodEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], TaxiPayoutService);


/***/ }),
/* 188 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiPayoutResolver", ({
    enumerable: true,
    get: function() {
        return TaxiPayoutResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _taxipayoutservice = __webpack_require__(187);
const _apollo = __webpack_require__(3);
const _database = __webpack_require__(15);
const _exportsessiontocsvinput = __webpack_require__(189);
const _createpayoutsessioninput = __webpack_require__(190);
const _operatorservice = __webpack_require__(70);
const _common = __webpack_require__(7);
const _runautopayoutinput = __webpack_require__(191);
const _taxipayoutsessiondto = __webpack_require__(192);
const _payoutstatisticsdto = __webpack_require__(194);
const _drivertransactiondto = __webpack_require__(102);
const _manualpayoutinput = __webpack_require__(195);
const _jwtauthguard = __webpack_require__(29);
let TaxiPayoutResolver = class TaxiPayoutResolver {
    constructor(taxiPayoutService, operatorService, context){
        this.taxiPayoutService = taxiPayoutService;
        this.operatorService = operatorService;
        this.context = context;
    }
    async taxiManualPayout(input) {
        const hasPermission = await this.operatorService.hasPermissionBoolean(this.context.req.user.id, _database.OperatorPermission.Payouts_Edit);
        if (!hasPermission) {
            throw new _apollo.ForbiddenError('You do not have permission to perform this action');
        }
        return this.taxiPayoutService.manualPayout(input);
    }
    async taxiPayoutStatistics(currency) {
        return this.taxiPayoutService.getPayoutStatistics({
            currency
        });
    }
    async createTaxiPayoutSession(input) {
        const hasPermission = await this.operatorService.hasPermissionBoolean(this.context.req.user.id, _database.OperatorPermission.Payouts_Edit);
        if (!hasPermission) {
            throw new _apollo.ForbiddenError('You do not have permission to perform this action');
        }
        return this.taxiPayoutService.createPayoutSession(this.context.req.user.id, input);
    }
    async exportTaxiPayoutSessionToCsv(input) {
        const hasPermission = await this.operatorService.hasPermissionBoolean(this.context.req.user.id, _database.OperatorPermission.Payouts_Edit);
        if (!hasPermission) {
            throw new _apollo.ForbiddenError('You do not have permission to perform this action');
        }
        const csv = await this.taxiPayoutService.exportToCsv(input);
        return csv.url;
    }
    async runTaxiAutoPayout(input) {
        const hasPermission = await this.operatorService.hasPermissionBoolean(this.context.req.user.id, _database.OperatorPermission.Payouts_Edit);
        if (!hasPermission) {
            throw new _apollo.ForbiddenError('You do not have permission to perform this action');
        }
        await this.taxiPayoutService.runAutoPayout(input);
        return true;
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_drivertransactiondto.DriverTransactionDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_manualpayoutinput.ManualPayoutInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _manualpayoutinput.ManualPayoutInput === "undefined" ? Object : _manualpayoutinput.ManualPayoutInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], TaxiPayoutResolver.prototype, "taxiManualPayout", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_payoutstatisticsdto.PayoutStatisticsDTO),
    _ts_param._(0, (0, _graphql.Args)('currency', {
        type: ()=>String,
        nullable: true
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], TaxiPayoutResolver.prototype, "taxiPayoutStatistics", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_taxipayoutsessiondto.TaxiPayoutSessionDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_createpayoutsessioninput.CreatePayoutSessionInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _createpayoutsessioninput.CreatePayoutSessionInput === "undefined" ? Object : _createpayoutsessioninput.CreatePayoutSessionInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], TaxiPayoutResolver.prototype, "createTaxiPayoutSession", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>String),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_exportsessiontocsvinput.ExportSessionToCsvInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _exportsessiontocsvinput.ExportSessionToCsvInput === "undefined" ? Object : _exportsessiontocsvinput.ExportSessionToCsvInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], TaxiPayoutResolver.prototype, "exportTaxiPayoutSessionToCsv", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>Boolean),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_runautopayoutinput.RunAutoPayoutInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _runautopayoutinput.RunAutoPayoutInput === "undefined" ? Object : _runautopayoutinput.RunAutoPayoutInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], TaxiPayoutResolver.prototype, "runTaxiAutoPayout", null);
TaxiPayoutResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(2, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _taxipayoutservice.TaxiPayoutService === "undefined" ? Object : _taxipayoutservice.TaxiPayoutService,
        typeof _operatorservice.OperatorService === "undefined" ? Object : _operatorservice.OperatorService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], TaxiPayoutResolver);


/***/ }),
/* 189 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ExportSessionToCsvInput", ({
    enumerable: true,
    get: function() {
        return ExportSessionToCsvInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let ExportSessionToCsvInput = class ExportSessionToCsvInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ExportSessionToCsvInput.prototype, "payoutSessionId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ExportSessionToCsvInput.prototype, "payoutMethodId", void 0);
ExportSessionToCsvInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ExportSessionToCsvInput);


/***/ }),
/* 190 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreatePayoutSessionInput", ({
    enumerable: true,
    get: function() {
        return CreatePayoutSessionInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CreatePayoutSessionInput = class CreatePayoutSessionInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _graphql.ID
        ]),
    _ts_metadata._("design:type", Array)
], CreatePayoutSessionInput.prototype, "payoutMethodIds", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CreatePayoutSessionInput.prototype, "minimumAmount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreatePayoutSessionInput.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreatePayoutSessionInput.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AppType, {
        defaultValue: _database.AppType.Taxi
    }),
    _ts_metadata._("design:type", typeof _database.AppType === "undefined" ? Object : _database.AppType)
], CreatePayoutSessionInput.prototype, "appType", void 0);
CreatePayoutSessionInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreatePayoutSessionInput);


/***/ }),
/* 191 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RunAutoPayoutInput", ({
    enumerable: true,
    get: function() {
        return RunAutoPayoutInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let RunAutoPayoutInput = class RunAutoPayoutInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RunAutoPayoutInput.prototype, "payoutSessionId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RunAutoPayoutInput.prototype, "payoutMethodId", void 0);
RunAutoPayoutInput = _ts_decorate._([
    (0, _graphql.InputType)()
], RunAutoPayoutInput);


/***/ }),
/* 192 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiPayoutSessionDTO", ({
    enumerable: true,
    get: function() {
        return TaxiPayoutSessionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _taxipayoutsessionpayoutmethoddetaildto = __webpack_require__(193);
const _drivertransactiondto = __webpack_require__(102);
const _payoutmethoddto = __webpack_require__(104);
const _payoutauthorizer = __webpack_require__(106);
let TaxiPayoutSessionDTO = class TaxiPayoutSessionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], TaxiPayoutSessionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiPayoutSessionDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], TaxiPayoutSessionDTO.prototype, "processedAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], TaxiPayoutSessionDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.PayoutSessionStatus),
    _ts_metadata._("design:type", typeof _database.PayoutSessionStatus === "undefined" ? Object : _database.PayoutSessionStatus)
], TaxiPayoutSessionDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Number)
], TaxiPayoutSessionDTO.prototype, "totalAmount", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], TaxiPayoutSessionDTO.prototype, "currency", void 0);
TaxiPayoutSessionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('TaxiPayoutSession'),
    (0, _nestjsquerygraphql.OffsetConnection)('driverTransactions', ()=>_drivertransactiondto.DriverTransactionDTO, {
        enableAggregate: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('payoutMethodDetails', ()=>_taxipayoutsessionpayoutmethoddetaildto.TaxiPayoutSessionPayoutMethodDetailDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('payoutMethods', ()=>_payoutmethoddto.PayoutMethodDTO),
    (0, _nestjsquerygraphql.Authorize)(_payoutauthorizer.PayoutAuthorizer)
], TaxiPayoutSessionDTO);


/***/ }),
/* 193 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiPayoutSessionPayoutMethodDetailDTO", ({
    enumerable: true,
    get: function() {
        return TaxiPayoutSessionPayoutMethodDetailDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _payoutmethoddto = __webpack_require__(104);
const _drivertransactiondto = __webpack_require__(102);
let TaxiPayoutSessionPayoutMethodDetailDTO = class TaxiPayoutSessionPayoutMethodDetailDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], TaxiPayoutSessionPayoutMethodDetailDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.PayoutSessionStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.PayoutSessionStatus === "undefined" ? Object : _database.PayoutSessionStatus)
], TaxiPayoutSessionPayoutMethodDetailDTO.prototype, "status", void 0);
TaxiPayoutSessionPayoutMethodDetailDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('TaxiPayoutSessionPayoutMethodDetail'),
    (0, _nestjsquerygraphql.Relation)('payoutMethod', ()=>_payoutmethoddto.PayoutMethodDTO),
    (0, _nestjsquerygraphql.OffsetConnection)('driverTransactions', ()=>_drivertransactiondto.DriverTransactionDTO, {
        enableAggregate: true
    })
], TaxiPayoutSessionPayoutMethodDetailDTO);


/***/ }),
/* 194 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    PayoutMethodStatsDTO: function() {
        return PayoutMethodStatsDTO;
    },
    PayoutStatisticsDTO: function() {
        return PayoutStatisticsDTO;
    }
});
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _payoutmethoddto = __webpack_require__(104);
let PayoutStatisticsDTO = class PayoutStatisticsDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], PayoutStatisticsDTO.prototype, "pendingAmount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], PayoutStatisticsDTO.prototype, "lastPayoutAmount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            PayoutMethodStatsDTO
        ]),
    _ts_metadata._("design:type", Array)
], PayoutStatisticsDTO.prototype, "usersDefaultPayoutMethodStats", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], PayoutStatisticsDTO.prototype, "currency", void 0);
PayoutStatisticsDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('PayoutStatistics')
], PayoutStatisticsDTO);
let PayoutMethodStatsDTO = class PayoutMethodStatsDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_payoutmethoddto.PayoutMethodDTO, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _payoutmethoddto.PayoutMethodDTO === "undefined" ? Object : _payoutmethoddto.PayoutMethodDTO)
], PayoutMethodStatsDTO.prototype, "payoutMethod", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], PayoutMethodStatsDTO.prototype, "totalCount", void 0);
PayoutMethodStatsDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('PayoutMethodStats')
], PayoutMethodStatsDTO);


/***/ }),
/* 195 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ManualPayoutInput", ({
    enumerable: true,
    get: function() {
        return ManualPayoutInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let ManualPayoutInput = class ManualPayoutInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AppType, {
        defaultValue: _database.AppType.Taxi,
        description: "Fill this with the user's app type. Taxi for a driver, Parking for a Park Owner and Shop for a shop owner"
    }),
    _ts_metadata._("design:type", typeof _database.AppType === "undefined" ? Object : _database.AppType)
], ManualPayoutInput.prototype, "appType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ManualPayoutInput.prototype, "userTransactionId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ManualPayoutInput.prototype, "transactionNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ManualPayoutInput.prototype, "description", void 0);
ManualPayoutInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ManualPayoutInput);


/***/ }),
/* 196 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdatePayoutSessionInput", ({
    enumerable: true,
    get: function() {
        return UpdatePayoutSessionInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let UpdatePayoutSessionInput = class UpdatePayoutSessionInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.PayoutSessionStatus),
    _ts_metadata._("design:type", typeof _database.PayoutSessionStatus === "undefined" ? Object : _database.PayoutSessionStatus)
], UpdatePayoutSessionInput.prototype, "status", void 0);
UpdatePayoutSessionInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdatePayoutSessionInput);


/***/ }),
/* 197 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopPayoutModule", ({
    enumerable: true,
    get: function() {
        return ShopPayoutModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _shoppayoutservice = __webpack_require__(198);
const _shoppayoutresolver = __webpack_require__(199);
const _operatormodule = __webpack_require__(62);
const _nestjsquerygraphql = __webpack_require__(17);
const _jwtauthguard = __webpack_require__(29);
const _shoppayoutsessionpayoutmethoddetaildto = __webpack_require__(201);
const _shoppayoutsessiondto = __webpack_require__(200);
const _updatepayoutsessioninput = __webpack_require__(196);
const _nestjsquerytypeorm = __webpack_require__(26);
let ShopPayoutModule = class ShopPayoutModule {
};
ShopPayoutModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _operatormodule.OperatorModule,
            _typeorm.TypeOrmModule.forFeature([
                _database.ShopPayoutSessionEntity,
                _database.ShopTransactionEntity,
                _database.ShopWalletEntity
            ]),
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.ShopPayoutSessionEntity,
                        _database.ShopPayoutSessionPayoutMethodDetailEntity
                    ])
                ],
                resolvers: [
                    {
                        DTOClass: _shoppayoutsessiondto.ShopPayoutSessionDTO,
                        EntityClass: _database.ShopPayoutSessionEntity,
                        UpdateDTOClass: _updatepayoutsessioninput.UpdatePayoutSessionInput,
                        create: {
                            disabled: true
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    },
                    {
                        DTOClass: _shoppayoutsessionpayoutmethoddetaildto.ShopPayoutSessionPayoutMethodDetailDTO,
                        EntityClass: _database.ShopPayoutSessionPayoutMethodDetailEntity,
                        read: {
                            disabled: true
                        },
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    }
                ]
            })
        ],
        providers: [
            _shoppayoutservice.ShopPayoutService,
            _shoppayoutresolver.ShopPayoutResolver
        ],
        exports: [
            _shoppayoutresolver.ShopPayoutResolver
        ]
    })
], ShopPayoutModule);


/***/ }),
/* 198 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopPayoutService", ({
    enumerable: true,
    get: function() {
        return ShopPayoutService;
    }
}));
const _interop_require_default = __webpack_require__(48);
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
const _json2csv = __webpack_require__(35);
const _promises = __webpack_require__(34);
const _path = __webpack_require__(24);
const _stripe = /*#__PURE__*/ _interop_require_default._(__webpack_require__(105));
const _apollo = __webpack_require__(3);
let ShopPayoutService = class ShopPayoutService {
    constructor(payoutSessionRepository, payoutSessionPayoutMethodDetailRepository, shopTransactionRepository, shopWalletRepository){
        this.payoutSessionRepository = payoutSessionRepository;
        this.payoutSessionPayoutMethodDetailRepository = payoutSessionPayoutMethodDetailRepository;
        this.shopTransactionRepository = shopTransactionRepository;
        this.shopWalletRepository = shopWalletRepository;
    }
    async createPayoutSession(operatorId, input) {
        const shopWallets = await this.shopWalletRepository.find({
            where: {
                currency: input.currency,
                balance: (0, _typeorm1.MoreThan)(input.minimumAmount)
            },
            relations: [
                'shop',
                'shop.payoutAccounts'
            ]
        });
        if (shopWallets.length === 0) {
            throw new _apollo.ForbiddenError('No shops to payout with these filters');
        }
        const session = this.payoutSessionRepository.create({
            createdByOperatorId: operatorId,
            currency: input.currency,
            description: input.description,
            totalAmount: 0,
            payoutMethods: input.payoutMethodIds.map((id)=>({
                    id
                }))
        });
        let payoutSession = await this.payoutSessionRepository.save(session);
        for (const payoutMethod of input.payoutMethodIds){
            const detail = this.payoutSessionPayoutMethodDetailRepository.create({
                payoutSessionId: payoutSession.id,
                payoutMethodId: payoutMethod,
                status: _database.PayoutSessionStatus.PENDING
            });
            await this.payoutSessionPayoutMethodDetailRepository.save(detail);
        }
        let totalAmount = 0;
        const payoutSessionPayoutMethodDetails = await this.payoutSessionPayoutMethodDetailRepository.find({
            where: {
                payoutSessionId: payoutSession.id
            }
        });
        shopWallets.forEach(async (shopWallet)=>{
            const defaultPayoutAccount = shopWallet.shop.payoutAccounts.find((account)=>account.isDefault);
            if (defaultPayoutAccount) {
                totalAmount += shopWallet.balance;
                const transaction = this.shopTransactionRepository.create({
                    shopId: shopWallet.shop.id,
                    amount: shopWallet.balance,
                    currency: shopWallet.currency,
                    status: _database.TransactionStatus.Processing,
                    type: _database.TransactionType.Debit,
                    debitType: _database.ShopTransactionDebitType.Payout,
                    payoutSessionId: payoutSession.id,
                    payoutAccountId: defaultPayoutAccount.id,
                    payoutMethodId: defaultPayoutAccount.payoutMethodId,
                    payoutSessionMethodId: payoutSessionPayoutMethodDetails.find((detail)=>detail.payoutMethodId === defaultPayoutAccount.payoutMethodId)?.id
                });
                await this.shopTransactionRepository.save(transaction);
            }
        });
        await this.payoutSessionRepository.update(payoutSession.id, {
            totalAmount
        });
        payoutSession = await this.payoutSessionRepository.findOneBy({
            id: session.id
        });
        return payoutSession;
    }
    async exportToCsv(input) {
        const shopTransactions = await this.shopTransactionRepository.find({
            where: {
                payoutSessionId: input.payoutSessionId,
                payoutMethodId: input.payoutMethodId,
                status: _database.TransactionStatus.Processing
            },
            relations: [
                'shop',
                'payoutAccount',
                'payoutMethod'
            ]
        });
        const result = shopTransactions.map((transaction)=>{
            return {
                transactionId: transaction.id,
                shopName: transaction.shop.name,
                amount: transaction.amount,
                currency: transaction.currency,
                accountNumber: transaction.payoutAccount.accountNumber,
                routingNumber: transaction.payoutAccount.routingNumber,
                bankName: transaction.payoutAccount.bankName,
                branchName: transaction.payoutAccount.branchName,
                accountHolderName: transaction.payoutAccount.accountHolderName,
                accountHolderCountry: transaction.payoutAccount.accountHolderCountry,
                accountHolderState: transaction.payoutAccount.accountHolderState,
                accountHolderCity: transaction.payoutAccount.accountHolderCity,
                accountHolderAddress: transaction.payoutAccount.accountHolderAddress,
                accountHolderZip: transaction.payoutAccount.accountHolderZip
            };
        });
        const str = await (0, _json2csv.json2csv)(result);
        const fileName = `${new Date().getTime().toString()}.csv`;
        await (0, _promises.writeFile)((0, _path.join)(process.cwd(), 'uploads', `${new Date().getTime().toString()}.csv`), str);
        return {
            url: `uploads/${fileName}`
        };
    }
    async runAutoPayout(input) {
        const shopTransactions = await this.shopTransactionRepository.find({
            where: {
                payoutSessionId: input.payoutSessionId,
                payoutMethodId: input.payoutMethodId,
                status: _database.TransactionStatus.Processing
            },
            relations: [
                'shop',
                'payoutAccount',
                'payoutMethod'
            ]
        });
        for (const transaction of shopTransactions){
            if (transaction.payoutMethod.type == _database.PayoutMethodType.Stripe) {
                const instance = new _stripe.default(transaction.payoutMethod.privateKey, {
                    apiVersion: '2022-11-15'
                });
                const stripeTransaction = await instance.transfers.create({
                    amount: Math.floor(transaction.amount * 100),
                    currency: transaction.currency,
                    destination: transaction.payoutAccount.token,
                    description: 'Payout'
                });
                this.shopWalletRepository.decrement({
                    shopId: transaction.shopId,
                    currency: transaction.currency
                }, 'balance', transaction.amount);
                await this.shopTransactionRepository.update(transaction.id, {
                    status: _database.TransactionStatus.Done,
                    documentNumber: stripeTransaction.id
                });
            }
        }
    }
};
ShopPayoutService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ShopPayoutSessionEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.ShopPayoutSessionPayoutMethodDetailEntity)),
    _ts_param._(2, (0, _typeorm.InjectRepository)(_database.ShopTransactionEntity)),
    _ts_param._(3, (0, _typeorm.InjectRepository)(_database.ShopWalletEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], ShopPayoutService);


/***/ }),
/* 199 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopPayoutResolver", ({
    enumerable: true,
    get: function() {
        return ShopPayoutResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _shoppayoutservice = __webpack_require__(198);
const _apollo = __webpack_require__(3);
const _database = __webpack_require__(15);
const _exportsessiontocsvinput = __webpack_require__(189);
const _createpayoutsessioninput = __webpack_require__(190);
const _operatorservice = __webpack_require__(70);
const _common = __webpack_require__(7);
const _runautopayoutinput = __webpack_require__(191);
const _shoppayoutsessiondto = __webpack_require__(200);
const _jwtauthguard = __webpack_require__(29);
let ShopPayoutResolver = class ShopPayoutResolver {
    constructor(shopPayoutService, operatorService, context){
        this.shopPayoutService = shopPayoutService;
        this.operatorService = operatorService;
        this.context = context;
    }
    async createShopPayoutSession(input) {
        const hasPermission = await this.operatorService.hasPermissionBoolean(this.context.req.user.id, _database.OperatorPermission.Payouts_Edit);
        if (!hasPermission) {
            throw new _apollo.ForbiddenError('You do not have permission to perform this action');
        }
        return this.shopPayoutService.createPayoutSession(this.context.req.user.id, input);
    }
    async exportShopPayoutSessionToCsv(input) {
        const hasPermission = await this.operatorService.hasPermissionBoolean(this.context.req.user.id, _database.OperatorPermission.Payouts_Edit);
        if (!hasPermission) {
            throw new _apollo.ForbiddenError('You do not have permission to perform this action');
        }
        const csv = await this.shopPayoutService.exportToCsv(input);
        return csv.url;
    }
    async runShopAutoPayout(input) {
        const hasPermission = await this.operatorService.hasPermissionBoolean(this.context.req.user.id, _database.OperatorPermission.Payouts_Edit);
        if (!hasPermission) {
            throw new _apollo.ForbiddenError('You do not have permission to perform this action');
        }
        await this.shopPayoutService.runAutoPayout(input);
        return true;
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_shoppayoutsessiondto.ShopPayoutSessionDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_createpayoutsessioninput.CreatePayoutSessionInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _createpayoutsessioninput.CreatePayoutSessionInput === "undefined" ? Object : _createpayoutsessioninput.CreatePayoutSessionInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopPayoutResolver.prototype, "createShopPayoutSession", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>String),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_exportsessiontocsvinput.ExportSessionToCsvInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _exportsessiontocsvinput.ExportSessionToCsvInput === "undefined" ? Object : _exportsessiontocsvinput.ExportSessionToCsvInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopPayoutResolver.prototype, "exportShopPayoutSessionToCsv", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>Boolean),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_runautopayoutinput.RunAutoPayoutInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _runautopayoutinput.RunAutoPayoutInput === "undefined" ? Object : _runautopayoutinput.RunAutoPayoutInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopPayoutResolver.prototype, "runShopAutoPayout", null);
ShopPayoutResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(2, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _shoppayoutservice.ShopPayoutService === "undefined" ? Object : _shoppayoutservice.ShopPayoutService,
        typeof _operatorservice.OperatorService === "undefined" ? Object : _operatorservice.OperatorService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], ShopPayoutResolver);


/***/ }),
/* 200 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopPayoutSessionDTO", ({
    enumerable: true,
    get: function() {
        return ShopPayoutSessionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _shoppayoutsessionpayoutmethoddetaildto = __webpack_require__(201);
const _payoutmethoddto = __webpack_require__(104);
const _payoutauthorizer = __webpack_require__(106);
const _shoptransactiondto = __webpack_require__(202);
let ShopPayoutSessionDTO = class ShopPayoutSessionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopPayoutSessionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopPayoutSessionDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopPayoutSessionDTO.prototype, "processedAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ShopPayoutSessionDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.PayoutSessionStatus),
    _ts_metadata._("design:type", typeof _database.PayoutSessionStatus === "undefined" ? Object : _database.PayoutSessionStatus)
], ShopPayoutSessionDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Number)
], ShopPayoutSessionDTO.prototype, "totalAmount", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], ShopPayoutSessionDTO.prototype, "currency", void 0);
ShopPayoutSessionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopPayoutSession'),
    (0, _nestjsquerygraphql.OffsetConnection)('shopTransactions', ()=>_shoptransactiondto.ShopTransactionDTO, {
        enableAggregate: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('payoutMethodDetails', ()=>_shoppayoutsessionpayoutmethoddetaildto.ShopPayoutSessionPayoutMethodDetailDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('payoutMethods', ()=>_payoutmethoddto.PayoutMethodDTO),
    (0, _nestjsquerygraphql.Authorize)(_payoutauthorizer.PayoutAuthorizer)
], ShopPayoutSessionDTO);


/***/ }),
/* 201 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopPayoutSessionPayoutMethodDetailDTO", ({
    enumerable: true,
    get: function() {
        return ShopPayoutSessionPayoutMethodDetailDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _payoutmethoddto = __webpack_require__(104);
const _shoptransactiondto = __webpack_require__(202);
let ShopPayoutSessionPayoutMethodDetailDTO = class ShopPayoutSessionPayoutMethodDetailDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopPayoutSessionPayoutMethodDetailDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.PayoutSessionStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.PayoutSessionStatus === "undefined" ? Object : _database.PayoutSessionStatus)
], ShopPayoutSessionPayoutMethodDetailDTO.prototype, "status", void 0);
ShopPayoutSessionPayoutMethodDetailDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopPayoutSessionPayoutMethodDetail'),
    (0, _nestjsquerygraphql.Relation)('payoutMethod', ()=>_payoutmethoddto.PayoutMethodDTO),
    (0, _nestjsquerygraphql.OffsetConnection)('shopTransactions', ()=>_shoptransactiondto.ShopTransactionDTO, {
        enableAggregate: true
    })
], ShopPayoutSessionPayoutMethodDetailDTO);


/***/ }),
/* 202 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopTransactionDTO", ({
    enumerable: true,
    get: function() {
        return ShopTransactionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _shopdto = __webpack_require__(203);
const _savedpaymentmethoddto = __webpack_require__(115);
const _paymentgatewaydto = __webpack_require__(107);
const _operatordto = __webpack_require__(65);
const _payoutmethoddto = __webpack_require__(104);
const _payoutaccountdto = __webpack_require__(103);
let ShopTransactionDTO = class ShopTransactionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopTransactionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopTransactionDTO.prototype, "shopId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.TransactionStatus),
    _ts_metadata._("design:type", typeof _database.TransactionStatus === "undefined" ? Object : _database.TransactionStatus)
], ShopTransactionDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopTransactionDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopTransactionDTO.prototype, "transactionDate", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.TransactionType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.TransactionType === "undefined" ? Object : _database.TransactionType)
], ShopTransactionDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ShopTransactionDebitType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ShopTransactionDebitType === "undefined" ? Object : _database.ShopTransactionDebitType)
], ShopTransactionDTO.prototype, "debitType", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ShopTransactionCreditType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ShopTransactionCreditType === "undefined" ? Object : _database.ShopTransactionCreditType)
], ShopTransactionDTO.prototype, "creditType", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)({
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ShopTransactionDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)({
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ShopTransactionDTO.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ShopTransactionDTO.prototype, "documentNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ShopTransactionDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ShopTransactionDTO.prototype, "payoutSessionId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ShopTransactionDTO.prototype, "payoutAccountId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ShopTransactionDTO.prototype, "payoutMethodId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ShopTransactionDTO.prototype, "payoutSessionMethodId", void 0);
ShopTransactionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopTransaction'),
    (0, _nestjsquerygraphql.Relation)('staff', ()=>_operatordto.OperatorDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('payoutAccount', ()=>_payoutaccountdto.PayoutAccountDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.FilterableRelation)('payoutMethod', ()=>_payoutmethoddto.PayoutMethodDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('paymentGateway', ()=>_paymentgatewaydto.PaymentGatewayDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('savedPaymentMethod', ()=>_savedpaymentmethoddto.SavedPaymentMethodDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('shop', ()=>_shopdto.ShopDTO)
], ShopTransactionDTO);


/***/ }),
/* 203 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopDTO", ({
    enumerable: true,
    get: function() {
        return ShopDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _mediadto = __webpack_require__(66);
const _database = __webpack_require__(15);
const _shopitempresetdto = __webpack_require__(204);
const _shopcategorydto = __webpack_require__(216);
const _shopsessiondto = __webpack_require__(217);
const _shopwalletdto = __webpack_require__(218);
const _shopordercartdto = __webpack_require__(212);
const _personalinfodto = __webpack_require__(219);
const _ratingaggregatedto = __webpack_require__(209);
const _phonenumberdto = __webpack_require__(220);
let ShopDTO = class ShopDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], ShopDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ShopStatus),
    _ts_metadata._("design:type", typeof _database.ShopStatus === "undefined" ? Object : _database.ShopStatus)
], ShopDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_phonenumberdto.PhoneNumberDTO),
    _ts_metadata._("design:type", typeof _phonenumberdto.PhoneNumberDTO === "undefined" ? Object : _phonenumberdto.PhoneNumberDTO)
], ShopDTO.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_personalinfodto.PersonalInfoDTO),
    _ts_metadata._("design:type", typeof _personalinfodto.PersonalInfoDTO === "undefined" ? Object : _personalinfodto.PersonalInfoDTO)
], ShopDTO.prototype, "ownerInformation", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ShopDTO.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ShopDTO.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ShopDTO.prototype, "password", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.WeekdayScheduleDTO
        ]),
    _ts_metadata._("design:type", Array)
], ShopDTO.prototype, "weeklySchedule", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.OrderQueueLevel, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.OrderQueueLevel === "undefined" ? Object : _database.OrderQueueLevel)
], ShopDTO.prototype, "orderQueueLevel", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], ShopDTO.prototype, "isExpressDeliveryAvailable", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], ShopDTO.prototype, "isShopDeliveryAvailable", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        description: 'The percentage of the delivery fee that shop pays so the delivery fee would be more appealing to the users.'
    }),
    _ts_metadata._("design:type", Number)
], ShopDTO.prototype, "expressDeliveryShopCommission", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], ShopDTO.prototype, "isOnlinePaymentAvailable", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], ShopDTO.prototype, "isCashOnDeliveryAvailable", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopDTO.prototype, "lastActivityAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ShopDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], ShopDTO.prototype, "location", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ShopDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_ratingaggregatedto.RatingAggregateDTO, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _ratingaggregatedto.RatingAggregateDTO === "undefined" ? Object : _ratingaggregatedto.RatingAggregateDTO)
], ShopDTO.prototype, "ratingAggregate", void 0);
ShopDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Shop'),
    (0, _nestjsquerygraphql.Relation)('image', ()=>_mediadto.MediaDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.FilterableUnPagedRelation)('itemPresets', ()=>_shopitempresetdto.ShopItemPresetDTO),
    (0, _nestjsquerygraphql.FilterableUnPagedRelation)('categories', ()=>_shopcategorydto.ShopCategoryDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('sessions', ()=>_shopsessiondto.ShopSessionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('wallet', ()=>_shopwalletdto.ShopWalletDTO),
    (0, _nestjsquerygraphql.OffsetConnection)('carts', ()=>_shopordercartdto.ShopOrderCartDTO, {
        enableAggregate: true,
        enableTotalCount: true
    })
], ShopDTO);


/***/ }),
/* 204 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopItemPresetDTO", ({
    enumerable: true,
    get: function() {
        return ShopItemPresetDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _itemcategorydto = __webpack_require__(205);
const _itemdto = __webpack_require__(206);
const _database = __webpack_require__(15);
let ShopItemPresetDTO = class ShopItemPresetDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopItemPresetDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], ShopItemPresetDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopItemPresetDTO.prototype, "shopId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.WeekdayScheduleDTO
        ]),
    _ts_metadata._("design:type", Array)
], ShopItemPresetDTO.prototype, "weeklySchedule", void 0);
ShopItemPresetDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopItemPreset'),
    (0, _nestjsquerygraphql.FilterableOffsetConnection)('itemCategories', ()=>_itemcategorydto.ItemCategoryDTO),
    (0, _nestjsquerygraphql.FilterableOffsetConnection)('items', ()=>_itemdto.ItemDTO, {
        enableTotalCount: true
    })
], ShopItemPresetDTO);


/***/ }),
/* 205 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ItemCategoryDTO", ({
    enumerable: true,
    get: function() {
        return ItemCategoryDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _itemdto = __webpack_require__(206);
const _shopitempresetdto = __webpack_require__(204);
let ItemCategoryDTO = class ItemCategoryDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ItemCategoryDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], ItemCategoryDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ItemCategoryDTO.prototype, "shopId", void 0);
ItemCategoryDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ItemCategory'),
    (0, _nestjsquerygraphql.FilterableOffsetConnection)('items', ()=>_itemdto.ItemDTO, {
        enableTotalCount: true
    }),
    (0, _nestjsquerygraphql.FilterableUnPagedRelation)('presets', ()=>_shopitempresetdto.ShopItemPresetDTO)
], ItemCategoryDTO);


/***/ }),
/* 206 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ItemDTO", ({
    enumerable: true,
    get: function() {
        return ItemDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _mediadto = __webpack_require__(66);
const _itemvariantdto = __webpack_require__(207);
const _itemoptiondto = __webpack_require__(208);
const _itemcategorydto = __webpack_require__(205);
const _shopitempresetdto = __webpack_require__(204);
const _typeorm = __webpack_require__(16);
const _ratingaggregatedto = __webpack_require__(209);
const _shopfeedbackdto = __webpack_require__(210);
let ItemDTO = class ItemDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ItemDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], ItemDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ItemDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        description: 'The base price of the item'
    }),
    _ts_metadata._("design:type", Number)
], ItemDTO.prototype, "basePrice", void 0);
_ts_decorate._([
    (0, _typeorm.Column)(()=>_ratingaggregatedto.RatingAggregateDTO),
    (0, _graphql.Field)(()=>_ratingaggregatedto.RatingAggregateDTO, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _ratingaggregatedto.RatingAggregateDTO === "undefined" ? Object : _ratingaggregatedto.RatingAggregateDTO)
], ItemDTO.prototype, "ratingAggregate", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ItemDTO.prototype, "shopId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        description: 'The stock quantity'
    }),
    _ts_metadata._("design:type", Number)
], ItemDTO.prototype, "stockQuantity", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], ItemDTO.prototype, "discountPercentage", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], ItemDTO.prototype, "discountedQuantity", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ItemDTO.prototype, "discountUntil", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], ItemDTO.prototype, "usedDiscountedQuantity", void 0);
ItemDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Item'),
    (0, _nestjsquerygraphql.Relation)('image', ()=>_mediadto.MediaDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('variants', ()=>_itemvariantdto.ItemVariantDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('options', ()=>_itemoptiondto.ItemOptionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('categories', ()=>_itemcategorydto.ItemCategoryDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('presets', ()=>_shopitempresetdto.ShopItemPresetDTO),
    (0, _nestjsquerygraphql.OffsetConnection)('feedbacks', ()=>_shopfeedbackdto.ShopFeedbackDTO)
], ItemDTO);


/***/ }),
/* 207 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ItemVariantDTO", ({
    enumerable: true,
    get: function() {
        return ItemVariantDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _itemdto = __webpack_require__(206);
let ItemVariantDTO = class ItemVariantDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ItemVariantDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ItemVariantDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ItemVariantDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ItemVariantDTO.prototype, "price", void 0);
ItemVariantDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ItemVariant'),
    (0, _nestjsquerygraphql.Relation)('item', ()=>_itemdto.ItemDTO)
], ItemVariantDTO);


/***/ }),
/* 208 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ItemOptionDTO", ({
    enumerable: true,
    get: function() {
        return ItemOptionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
let ItemOptionDTO = class ItemOptionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ItemOptionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ItemOptionDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ItemOptionDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ItemOptionDTO.prototype, "price", void 0);
ItemOptionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ItemOption')
], ItemOptionDTO);


/***/ }),
/* 209 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RatingAggregateDTO", ({
    enumerable: true,
    get: function() {
        return RatingAggregateDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
let RatingAggregateDTO = class RatingAggregateDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], RatingAggregateDTO.prototype, "rating", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], RatingAggregateDTO.prototype, "reviewCount", void 0);
RatingAggregateDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('RatingAggregate'),
    (0, _graphql.InputType)('RatingAggregateInput')
], RatingAggregateDTO);


/***/ }),
/* 210 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopFeedbackDTO", ({
    enumerable: true,
    get: function() {
        return ShopFeedbackDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _shopfeedbackparameterdto = __webpack_require__(211);
const _shopordercartdto = __webpack_require__(212);
let ShopFeedbackDTO = class ShopFeedbackDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopFeedbackDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        description: 'The score of the review, from 0 to 100'
    }),
    _ts_metadata._("design:type", Number)
], ShopFeedbackDTO.prototype, "score", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ShopFeedbackDTO.prototype, "comment", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ReviewStatus),
    _ts_metadata._("design:type", typeof _database.ReviewStatus === "undefined" ? Object : _database.ReviewStatus)
], ShopFeedbackDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopFeedbackDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopFeedbackDTO.prototype, "shopId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopFeedbackDTO.prototype, "customerId", void 0);
ShopFeedbackDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopFeedback'),
    (0, _nestjsquerygraphql.FilterableRelation)('orderCart', ()=>_shopordercartdto.ShopOrderCartDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('parameters', ()=>_shopfeedbackparameterdto.ShopFeedbackParameterDTO)
], ShopFeedbackDTO);


/***/ }),
/* 211 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopFeedbackParameterDTO", ({
    enumerable: true,
    get: function() {
        return ShopFeedbackParameterDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
let ShopFeedbackParameterDTO = class ShopFeedbackParameterDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopFeedbackParameterDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], ShopFeedbackParameterDTO.prototype, "isGood", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ShopFeedbackParameterDTO.prototype, "name", void 0);
ShopFeedbackParameterDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopFeedbackParameter')
], ShopFeedbackParameterDTO);


/***/ }),
/* 212 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopOrderCartDTO", ({
    enumerable: true,
    get: function() {
        return ShopOrderCartDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _shopdto = __webpack_require__(203);
const _shoporderdto = __webpack_require__(213);
const _shoptransactiondto = __webpack_require__(202);
const _providertransactiondto = __webpack_require__(42);
const _shopordercartitemdto = __webpack_require__(215);
const _shopfeedbackdto = __webpack_require__(210);
let ShopOrderCartDTO = class ShopOrderCartDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopOrderCartDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ShopOrderCartDTO.prototype, "subtotal", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopOrderCartDTO.prototype, "shopId", void 0);
ShopOrderCartDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopOrderCart'),
    (0, _nestjsquerygraphql.Relation)('shop', ()=>_shopdto.ShopDTO),
    (0, _nestjsquerygraphql.FilterableRelation)('order', ()=>_shoporderdto.ShopOrderDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('shopTransactions', ()=>_shoptransactiondto.ShopTransactionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('providerTransactions', ()=>_providertransactiondto.ProviderTransactionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('feedbacks', ()=>_shopfeedbackdto.ShopFeedbackDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('items', ()=>_shopordercartitemdto.ShopOrderCartItemDTO)
], ShopOrderCartDTO);


/***/ }),
/* 213 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopOrderDTO", ({
    enumerable: true,
    get: function() {
        return ShopOrderDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _shopordercartdto = __webpack_require__(212);
const _database = __webpack_require__(15);
const _paymentgatewaydto = __webpack_require__(107);
const _savedpaymentmethoddto = __webpack_require__(115);
const _addressdto = __webpack_require__(46);
const _customerdto = __webpack_require__(110);
const _drivertransactiondto = __webpack_require__(102);
const _ridertransactiondto = __webpack_require__(109);
const _shoporderstatushistorydto = __webpack_require__(214);
let ShopOrderDTO = class ShopOrderDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopOrderDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ShopOrderStatus),
    _ts_metadata._("design:type", typeof _database.ShopOrderStatus === "undefined" ? Object : _database.ShopOrderStatus)
], ShopOrderDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ShopOrderDTO.prototype, "subTotal", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], ShopOrderDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ShopOrderDTO.prototype, "deliveryFee", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.DeliveryMethod),
    _ts_metadata._("design:type", typeof _database.DeliveryMethod === "undefined" ? Object : _database.DeliveryMethod)
], ShopOrderDTO.prototype, "deliveryMethod", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.Point
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], ShopOrderDTO.prototype, "deliveryDirections", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.PaymentMode),
    _ts_metadata._("design:type", typeof _database.PaymentMode === "undefined" ? Object : _database.PaymentMode)
], ShopOrderDTO.prototype, "paymentMethod", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopOrderDTO.prototype, "customerId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ShopOrderDTO.prototype, "tax", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ShopOrderDTO.prototype, "discount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ShopOrderDTO.prototype, "serviceFee", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], ShopOrderDTO.prototype, "total", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderDTO.prototype, "estimatedDeliveryTime", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderDTO.prototype, "fullfillmentTime", void 0);
ShopOrderDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopOrder'),
    (0, _nestjsquerygraphql.FilterableUnPagedRelation)('carts', ()=>_shopordercartdto.ShopOrderCartDTO),
    (0, _nestjsquerygraphql.Relation)('paymentGateway', ()=>_paymentgatewaydto.PaymentGatewayDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('savedPaymentMethod', ()=>_savedpaymentmethoddto.SavedPaymentMethodDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('deliveryAddress', ()=>_addressdto.AddressDTO),
    (0, _nestjsquerygraphql.Relation)('customer', ()=>_customerdto.CustomerDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('riderTransactions', ()=>_ridertransactiondto.RiderTransactionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('driverTransactions', ()=>_drivertransactiondto.DriverTransactionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('statusHistories', ()=>_shoporderstatushistorydto.ShopOrderStatusHistoryDTO)
], ShopOrderDTO);


/***/ }),
/* 214 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopOrderStatusHistoryDTO", ({
    enumerable: true,
    get: function() {
        return ShopOrderStatusHistoryDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _shopordercartdto = __webpack_require__(212);
let ShopOrderStatusHistoryDTO = class ShopOrderStatusHistoryDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopOrderStatusHistoryDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ShopOrderStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ShopOrderStatus === "undefined" ? Object : _database.ShopOrderStatus)
], ShopOrderStatusHistoryDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderStatusHistoryDTO.prototype, "expectedBy", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopOrderStatusHistoryDTO.prototype, "updatedAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopOrderStatusHistoryDTO.prototype, "orderId", void 0);
ShopOrderStatusHistoryDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopOrderStatusHistory'),
    (0, _nestjsquerygraphql.Relation)('orderCart', ()=>_shopordercartdto.ShopOrderCartDTO)
], ShopOrderStatusHistoryDTO);


/***/ }),
/* 215 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopOrderCartItemDTO", ({
    enumerable: true,
    get: function() {
        return ShopOrderCartItemDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _itemvariantdto = __webpack_require__(207);
const _itemoptiondto = __webpack_require__(208);
let ShopOrderCartItemDTO = class ShopOrderCartItemDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopOrderCartItemDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ShopOrderCartItemDTO.prototype, "priceEach", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], ShopOrderCartItemDTO.prototype, "quantity", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], ShopOrderCartItemDTO.prototype, "canceledQuantity", void 0);
ShopOrderCartItemDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopOrderCartItem'),
    (0, _nestjsquerygraphql.Relation)('itemVariant', ()=>_itemvariantdto.ItemVariantDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('options', ()=>_itemoptiondto.ItemOptionDTO)
], ShopOrderCartItemDTO);


/***/ }),
/* 216 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopCategoryDTO", ({
    enumerable: true,
    get: function() {
        return ShopCategoryDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _mediadto = __webpack_require__(66);
const _shopdto = __webpack_require__(203);
let ShopCategoryDTO = class ShopCategoryDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopCategoryDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], ShopCategoryDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ShopCategoryStatus),
    _ts_metadata._("design:type", typeof _database.ShopCategoryStatus === "undefined" ? Object : _database.ShopCategoryStatus)
], ShopCategoryDTO.prototype, "status", void 0);
ShopCategoryDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopCategory'),
    (0, _nestjsquerygraphql.Relation)('image', ()=>_mediadto.MediaDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.OffsetConnection)('shops', ()=>_shopdto.ShopDTO, {
        enableTotalCount: true,
        relationName: 'shops'
    })
], ShopCategoryDTO);


/***/ }),
/* 217 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopSessionDTO", ({
    enumerable: true,
    get: function() {
        return ShopSessionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
let ShopSessionDTO = class ShopSessionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopSessionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopSessionDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ShopSessionDTO.prototype, "deviceName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ShopSessionDTO.prototype, "ipLocation", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopSessionDTO.prototype, "lastActivityAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopSessionDTO.prototype, "shopId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.AppType),
    _ts_metadata._("design:type", typeof _database.AppType === "undefined" ? Object : _database.AppType)
], ShopSessionDTO.prototype, "appType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.DevicePlatform, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.DevicePlatform === "undefined" ? Object : _database.DevicePlatform)
], ShopSessionDTO.prototype, "devicePlatform", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.DeviceType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.DeviceType === "undefined" ? Object : _database.DeviceType)
], ShopSessionDTO.prototype, "deviceType", void 0);
ShopSessionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopSession')
], ShopSessionDTO);


/***/ }),
/* 218 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopWalletDTO", ({
    enumerable: true,
    get: function() {
        return ShopWalletDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _shopdto = __webpack_require__(203);
let ShopWalletDTO = class ShopWalletDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopWalletDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Number)
], ShopWalletDTO.prototype, "balance", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], ShopWalletDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopWalletDTO.prototype, "shopId", void 0);
ShopWalletDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopWallet'),
    (0, _nestjsquerygraphql.Relation)('shop', ()=>_shopdto.ShopDTO)
], ShopWalletDTO);


/***/ }),
/* 219 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PersonalInfoDTO", ({
    enumerable: true,
    get: function() {
        return PersonalInfoDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let PersonalInfoDTO = class PersonalInfoDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PersonalInfoDTO.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PersonalInfoDTO.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PersonalInfoDTO.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PersonalInfoDTO.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Gender, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.Gender === "undefined" ? Object : _database.Gender)
], PersonalInfoDTO.prototype, "gender", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], PersonalInfoDTO.prototype, "address", void 0);
PersonalInfoDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('PersonalInfo'),
    (0, _graphql.InputType)('PersonalInfoInput')
], PersonalInfoDTO);


/***/ }),
/* 220 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PhoneNumberDTO", ({
    enumerable: true,
    get: function() {
        return PhoneNumberDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let PhoneNumberDTO = class PhoneNumberDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], PhoneNumberDTO.prototype, "countryCode", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], PhoneNumberDTO.prototype, "number", void 0);
PhoneNumberDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('PhoneNumber'),
    (0, _graphql.InputType)('PhoneNumberInput')
], PhoneNumberDTO);


/***/ }),
/* 221 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingPayoutModule", ({
    enumerable: true,
    get: function() {
        return ParkingPayoutModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _parkingpayoutservice = __webpack_require__(222);
const _parkingpayoutresolver = __webpack_require__(223);
const _operatormodule = __webpack_require__(62);
const _nestjsquerygraphql = __webpack_require__(17);
const _jwtauthguard = __webpack_require__(29);
const _parkingpayoutsessionpayoutmethoddetaildto = __webpack_require__(225);
const _parkingpayoutsessiondto = __webpack_require__(224);
const _updatepayoutsessioninput = __webpack_require__(196);
const _nestjsquerytypeorm = __webpack_require__(26);
let ParkingPayoutModule = class ParkingPayoutModule {
};
ParkingPayoutModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _operatormodule.OperatorModule,
            _typeorm.TypeOrmModule.forFeature([
                _database.ParkingPayoutSessionEntity,
                _database.ParkingTransactionEntity,
                _database.ParkingWalletEntity
            ]),
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.ParkingPayoutSessionEntity,
                        _database.ParkingPayoutSessionPayoutMethodDetailEntity
                    ])
                ],
                resolvers: [
                    {
                        DTOClass: _parkingpayoutsessiondto.ParkingPayoutSessionDTO,
                        EntityClass: _database.ParkingPayoutSessionEntity,
                        UpdateDTOClass: _updatepayoutsessioninput.UpdatePayoutSessionInput,
                        create: {
                            disabled: true
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    },
                    {
                        DTOClass: _parkingpayoutsessionpayoutmethoddetaildto.ParkingPayoutSessionPayoutMethodDetailDTO,
                        EntityClass: _database.ParkingPayoutSessionPayoutMethodDetailEntity,
                        read: {
                            disabled: true
                        },
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    }
                ]
            })
        ],
        providers: [
            _parkingpayoutservice.ParkingPayoutService,
            _parkingpayoutresolver.ParkingPayoutResolver
        ],
        exports: [
            _parkingpayoutresolver.ParkingPayoutResolver
        ]
    })
], ParkingPayoutModule);


/***/ }),
/* 222 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingPayoutService", ({
    enumerable: true,
    get: function() {
        return ParkingPayoutService;
    }
}));
const _interop_require_default = __webpack_require__(48);
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
const _json2csv = __webpack_require__(35);
const _promises = __webpack_require__(34);
const _path = __webpack_require__(24);
const _stripe = /*#__PURE__*/ _interop_require_default._(__webpack_require__(105));
const _apollo = __webpack_require__(3);
let ParkingPayoutService = class ParkingPayoutService {
    constructor(payoutSessionRepository, payoutSessionPayoutMethodDetailRepository, parkingTransactionRepository, parkingWalletRepository){
        this.payoutSessionRepository = payoutSessionRepository;
        this.payoutSessionPayoutMethodDetailRepository = payoutSessionPayoutMethodDetailRepository;
        this.parkingTransactionRepository = parkingTransactionRepository;
        this.parkingWalletRepository = parkingWalletRepository;
    }
    async createPayoutSession(operatorId, input) {
        const parkingWallets = await this.parkingWalletRepository.find({
            where: {
                currency: input.currency,
                balance: (0, _typeorm1.MoreThan)(input.minimumAmount)
            },
            relations: [
                'parking',
                'parking.payoutAccounts'
            ]
        });
        if (parkingWallets.length === 0) {
            throw new _apollo.ForbiddenError('No parkings to payout with these filters');
        }
        const session = this.payoutSessionRepository.create({
            createdByOperatorId: operatorId,
            currency: input.currency,
            description: input.description,
            totalAmount: 0,
            payoutMethods: input.payoutMethodIds.map((id)=>({
                    id
                }))
        });
        let payoutSession = await this.payoutSessionRepository.save(session);
        for (const payoutMethod of input.payoutMethodIds){
            const detail = this.payoutSessionPayoutMethodDetailRepository.create({
                payoutSessionId: payoutSession.id,
                payoutMethodId: payoutMethod,
                status: _database.PayoutSessionStatus.PENDING
            });
            await this.payoutSessionPayoutMethodDetailRepository.save(detail);
        }
        let totalAmount = 0;
        const payoutSessionPayoutMethodDetails = await this.payoutSessionPayoutMethodDetailRepository.find({
            where: {
                payoutSessionId: payoutSession.id
            }
        });
        parkingWallets.forEach(async (parkingWallet)=>{
            const defaultPayoutAccount = parkingWallet.customer.payoutAccounts.find((account)=>account.isDefault);
            if (defaultPayoutAccount) {
                totalAmount += parkingWallet.balance;
                const transaction = this.parkingTransactionRepository.create({
                    customerId: parkingWallet.customerId,
                    amount: parkingWallet.balance,
                    currency: parkingWallet.currency,
                    status: _database.TransactionStatus.Processing,
                    type: _database.TransactionType.Debit,
                    debitType: _database.ParkingTransactionDebitType.Payout,
                    payoutSessionId: payoutSession.id,
                    payoutAccountId: defaultPayoutAccount.id,
                    payoutMethodId: defaultPayoutAccount.payoutMethodId,
                    payoutSessionMethodId: payoutSessionPayoutMethodDetails.find((detail)=>detail.payoutMethodId === defaultPayoutAccount.payoutMethodId)?.id
                });
                await this.parkingTransactionRepository.save(transaction);
            }
        });
        await this.payoutSessionRepository.update(payoutSession.id, {
            totalAmount
        });
        payoutSession = await this.payoutSessionRepository.findOneBy({
            id: session.id
        });
        return payoutSession;
    }
    async exportToCsv(input) {
        const parkingTransactions = await this.parkingTransactionRepository.find({
            where: {
                payoutSessionId: input.payoutSessionId,
                payoutMethodId: input.payoutMethodId,
                status: _database.TransactionStatus.Processing
            },
            relations: [
                'parking',
                'payoutAccount',
                'payoutMethod'
            ]
        });
        const result = parkingTransactions.map((transaction)=>{
            return {
                transactionId: transaction.id,
                parkingOwnerFirstName: transaction.customer.firstName,
                parkingOwnerLastName: transaction.customer.lastName,
                amount: transaction.amount,
                currency: transaction.currency,
                accountNumber: transaction.payoutAccount.accountNumber,
                routingNumber: transaction.payoutAccount.routingNumber,
                bankName: transaction.payoutAccount.bankName,
                branchName: transaction.payoutAccount.branchName,
                accountHolderName: transaction.payoutAccount.accountHolderName,
                accountHolderCountry: transaction.payoutAccount.accountHolderCountry,
                accountHolderState: transaction.payoutAccount.accountHolderState,
                accountHolderCity: transaction.payoutAccount.accountHolderCity,
                accountHolderAddress: transaction.payoutAccount.accountHolderAddress,
                accountHolderZip: transaction.payoutAccount.accountHolderZip
            };
        });
        const str = await (0, _json2csv.json2csv)(result);
        const fileName = `${new Date().getTime().toString()}.csv`;
        await (0, _promises.writeFile)((0, _path.join)(process.cwd(), 'uploads', `${new Date().getTime().toString()}.csv`), str);
        return {
            url: `uploads/${fileName}`
        };
    }
    async runAutoPayout(input) {
        const parkingTransactions = await this.parkingTransactionRepository.find({
            where: {
                payoutSessionId: input.payoutSessionId,
                payoutMethodId: input.payoutMethodId,
                status: _database.TransactionStatus.Processing
            },
            relations: [
                'parking',
                'payoutAccount',
                'payoutMethod'
            ]
        });
        for (const transaction of parkingTransactions){
            if (transaction.payoutMethod.type == _database.PayoutMethodType.Stripe) {
                const instance = new _stripe.default(transaction.payoutMethod.privateKey, {
                    apiVersion: '2022-11-15'
                });
                const stripeTransaction = await instance.transfers.create({
                    amount: Math.floor(transaction.amount * 100),
                    currency: transaction.currency,
                    destination: transaction.payoutAccount.token,
                    description: 'Payout'
                });
                this.parkingWalletRepository.decrement({
                    customerId: transaction.customerId,
                    currency: transaction.currency
                }, 'balance', transaction.amount);
                await this.parkingTransactionRepository.update(transaction.id, {
                    status: _database.TransactionStatus.Done,
                    documentNumber: stripeTransaction.id
                });
            }
        }
    }
};
ParkingPayoutService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ParkingPayoutSessionEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.ParkingPayoutSessionPayoutMethodDetailEntity)),
    _ts_param._(2, (0, _typeorm.InjectRepository)(_database.ParkingTransactionEntity)),
    _ts_param._(3, (0, _typeorm.InjectRepository)(_database.ParkingWalletEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], ParkingPayoutService);


/***/ }),
/* 223 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingPayoutResolver", ({
    enumerable: true,
    get: function() {
        return ParkingPayoutResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _apollo = __webpack_require__(3);
const _database = __webpack_require__(15);
const _exportsessiontocsvinput = __webpack_require__(189);
const _createpayoutsessioninput = __webpack_require__(190);
const _operatorservice = __webpack_require__(70);
const _common = __webpack_require__(7);
const _runautopayoutinput = __webpack_require__(191);
const _parkingpayoutsessiondto = __webpack_require__(224);
const _parkingpayoutservice = __webpack_require__(222);
const _jwtauthguard = __webpack_require__(29);
let ParkingPayoutResolver = class ParkingPayoutResolver {
    constructor(parkingPayoutService, operatorService, context){
        this.parkingPayoutService = parkingPayoutService;
        this.operatorService = operatorService;
        this.context = context;
    }
    async createParkingPayoutSession(input) {
        const hasPermission = await this.operatorService.hasPermissionBoolean(this.context.req.user.id, _database.OperatorPermission.Payouts_Edit);
        if (!hasPermission) {
            throw new _apollo.ForbiddenError('You do not have permission to perform this action');
        }
        return this.parkingPayoutService.createPayoutSession(this.context.req.user.id, input);
    }
    async exportParkingPayoutSessionToCsv(input) {
        const hasPermission = await this.operatorService.hasPermissionBoolean(this.context.req.user.id, _database.OperatorPermission.Payouts_Edit);
        if (!hasPermission) {
            throw new _apollo.ForbiddenError('You do not have permission to perform this action');
        }
        const csv = await this.parkingPayoutService.exportToCsv(input);
        return csv.url;
    }
    async runParkingAutoPayout(input) {
        const hasPermission = await this.operatorService.hasPermissionBoolean(this.context.req.user.id, _database.OperatorPermission.Payouts_Edit);
        if (!hasPermission) {
            throw new _apollo.ForbiddenError('You do not have permission to perform this action');
        }
        await this.parkingPayoutService.runAutoPayout(input);
        return true;
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_parkingpayoutsessiondto.ParkingPayoutSessionDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_createpayoutsessioninput.CreatePayoutSessionInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _createpayoutsessioninput.CreatePayoutSessionInput === "undefined" ? Object : _createpayoutsessioninput.CreatePayoutSessionInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ParkingPayoutResolver.prototype, "createParkingPayoutSession", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>String),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_exportsessiontocsvinput.ExportSessionToCsvInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _exportsessiontocsvinput.ExportSessionToCsvInput === "undefined" ? Object : _exportsessiontocsvinput.ExportSessionToCsvInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ParkingPayoutResolver.prototype, "exportParkingPayoutSessionToCsv", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>Boolean),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_runautopayoutinput.RunAutoPayoutInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _runautopayoutinput.RunAutoPayoutInput === "undefined" ? Object : _runautopayoutinput.RunAutoPayoutInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ParkingPayoutResolver.prototype, "runParkingAutoPayout", null);
ParkingPayoutResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(2, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _parkingpayoutservice.ParkingPayoutService === "undefined" ? Object : _parkingpayoutservice.ParkingPayoutService,
        typeof _operatorservice.OperatorService === "undefined" ? Object : _operatorservice.OperatorService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], ParkingPayoutResolver);


/***/ }),
/* 224 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingPayoutSessionDTO", ({
    enumerable: true,
    get: function() {
        return ParkingPayoutSessionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _parkingpayoutsessionpayoutmethoddetaildto = __webpack_require__(225);
const _payoutmethoddto = __webpack_require__(104);
const _payoutauthorizer = __webpack_require__(106);
const _parkingtransactiondto = __webpack_require__(226);
let ParkingPayoutSessionDTO = class ParkingPayoutSessionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingPayoutSessionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingPayoutSessionDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingPayoutSessionDTO.prototype, "processedAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkingPayoutSessionDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.PayoutSessionStatus),
    _ts_metadata._("design:type", typeof _database.PayoutSessionStatus === "undefined" ? Object : _database.PayoutSessionStatus)
], ParkingPayoutSessionDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Number)
], ParkingPayoutSessionDTO.prototype, "totalAmount", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], ParkingPayoutSessionDTO.prototype, "currency", void 0);
ParkingPayoutSessionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkingPayoutSession'),
    (0, _nestjsquerygraphql.OffsetConnection)('parkingTransactions', ()=>_parkingtransactiondto.ParkingTransactionDTO, {
        enableAggregate: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('payoutMethodDetails', ()=>_parkingpayoutsessionpayoutmethoddetaildto.ParkingPayoutSessionPayoutMethodDetailDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('payoutMethods', ()=>_payoutmethoddto.PayoutMethodDTO),
    (0, _nestjsquerygraphql.Authorize)(_payoutauthorizer.PayoutAuthorizer)
], ParkingPayoutSessionDTO);


/***/ }),
/* 225 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingPayoutSessionPayoutMethodDetailDTO", ({
    enumerable: true,
    get: function() {
        return ParkingPayoutSessionPayoutMethodDetailDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _payoutmethoddto = __webpack_require__(104);
const _parkingtransactiondto = __webpack_require__(226);
let ParkingPayoutSessionPayoutMethodDetailDTO = class ParkingPayoutSessionPayoutMethodDetailDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingPayoutSessionPayoutMethodDetailDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.PayoutSessionStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.PayoutSessionStatus === "undefined" ? Object : _database.PayoutSessionStatus)
], ParkingPayoutSessionPayoutMethodDetailDTO.prototype, "status", void 0);
ParkingPayoutSessionPayoutMethodDetailDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkingPayoutSessionPayoutMethodDetail'),
    (0, _nestjsquerygraphql.Relation)('payoutMethod', ()=>_payoutmethoddto.PayoutMethodDTO),
    (0, _nestjsquerygraphql.OffsetConnection)('parkingTransactions', ()=>_parkingtransactiondto.ParkingTransactionDTO, {
        enableAggregate: true
    })
], ParkingPayoutSessionPayoutMethodDetailDTO);


/***/ }),
/* 226 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingTransactionDTO", ({
    enumerable: true,
    get: function() {
        return ParkingTransactionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _customerdto = __webpack_require__(110);
const _savedpaymentmethoddto = __webpack_require__(115);
const _paymentgatewaydto = __webpack_require__(107);
const _operatordto = __webpack_require__(65);
const _payoutaccountdto = __webpack_require__(103);
const _payoutmethoddto = __webpack_require__(104);
let ParkingTransactionDTO = class ParkingTransactionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingTransactionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingTransactionDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingTransactionDTO.prototype, "transactionDate", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.TransactionStatus),
    _ts_metadata._("design:type", typeof _database.TransactionStatus === "undefined" ? Object : _database.TransactionStatus)
], ParkingTransactionDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.TransactionType),
    _ts_metadata._("design:type", typeof _database.TransactionType === "undefined" ? Object : _database.TransactionType)
], ParkingTransactionDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ParkingTransactionDebitType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ParkingTransactionDebitType === "undefined" ? Object : _database.ParkingTransactionDebitType)
], ParkingTransactionDTO.prototype, "debitType", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ParkingTransactionCreditType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ParkingTransactionCreditType === "undefined" ? Object : _database.ParkingTransactionCreditType)
], ParkingTransactionDTO.prototype, "creditType", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], ParkingTransactionDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Number)
], ParkingTransactionDTO.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkingTransactionDTO.prototype, "documentNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkingTransactionDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingTransactionDTO.prototype, "customerId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ParkingTransactionDTO.prototype, "payoutSessionId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ParkingTransactionDTO.prototype, "payoutAccountId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ParkingTransactionDTO.prototype, "payoutMethodId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ParkingTransactionDTO.prototype, "payoutSessionMethodId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ParkingTransactionDTO.prototype, "parkSpotId", void 0);
ParkingTransactionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkingTransaction'),
    (0, _nestjsquerygraphql.Relation)('staff', ()=>_operatordto.OperatorDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('payoutAccount', ()=>_payoutaccountdto.PayoutAccountDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.FilterableRelation)('payoutMethod', ()=>_payoutmethoddto.PayoutMethodDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('paymentGateway', ()=>_paymentgatewaydto.PaymentGatewayDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('savedPaymentMethod', ()=>_savedpaymentmethoddto.SavedPaymentMethodDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('customer', ()=>_customerdto.CustomerDTO)
], ParkingTransactionDTO);


/***/ }),
/* 227 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RegionModule", ({
    enumerable: true,
    get: function() {
        return RegionModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _regiondto = __webpack_require__(97);
const _createregioninput = __webpack_require__(228);
const _regioncategorydto = __webpack_require__(135);
const _regioncategoryinput = __webpack_require__(229);
const _updateregioninput = __webpack_require__(230);
let RegionModule = class RegionModule {
};
RegionModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.RegionEntity,
                        _database.RegionCategoryEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.RegionEntity,
                        DTOClass: _regiondto.RegionDTO,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        CreateDTOClass: _createregioninput.CreateRegionInput,
                        UpdateDTOClass: _updateregioninput.UpdateRegionInput,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        enableAggregate: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.RegionCategoryEntity,
                        DTOClass: _regioncategorydto.RegionCategoryDTO,
                        CreateDTOClass: _regioncategoryinput.RegionCategoryInput,
                        UpdateDTOClass: _regioncategoryinput.RegionCategoryInput,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        enableTotalCount: true,
                        enableAggregate: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        }
                    }
                ]
            })
        ]
    })
], RegionModule);


/***/ }),
/* 228 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateRegionInput", ({
    enumerable: true,
    get: function() {
        return CreateRegionInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
let CreateRegionInput = class CreateRegionInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateRegionInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateRegionInput.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], CreateRegionInput.prototype, "enabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            [
                _database.Point
            ]
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], CreateRegionInput.prototype, "location", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateRegionInput.prototype, "categoryId", void 0);
CreateRegionInput = _ts_decorate._([
    (0, _graphql.InputType)(),
    (0, _nestjsquerygraphql.BeforeCreateOne)((input)=>{
        for (const location of input.input.location){
            // if first and last point are not the same, add the first point to the end of the array
            if (location[0].lat !== location[location.length - 1].lat || location[0].lng !== location[location.length - 1].lng) {
                location.push(location[0]);
            }
        }
        return input;
    })
], CreateRegionInput);


/***/ }),
/* 229 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RegionCategoryInput", ({
    enumerable: true,
    get: function() {
        return RegionCategoryInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let RegionCategoryInput = class RegionCategoryInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], RegionCategoryInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], RegionCategoryInput.prototype, "currency", void 0);
RegionCategoryInput = _ts_decorate._([
    (0, _graphql.InputType)()
], RegionCategoryInput);


/***/ }),
/* 230 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateRegionInput", ({
    enumerable: true,
    get: function() {
        return UpdateRegionInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _graphql = __webpack_require__(13);
const _createregioninput = __webpack_require__(228);
let UpdateRegionInput = class UpdateRegionInput extends (0, _graphql.PartialType)(_createregioninput.CreateRegionInput) {
};
UpdateRegionInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateRegionInput);


/***/ }),
/* 231 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CustomerModule", ({
    enumerable: true,
    get: function() {
        return CustomerModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _rideraddressdto = __webpack_require__(112);
const _ridertransactiondto = __webpack_require__(109);
const _riderwalletdto = __webpack_require__(113);
const _customerdto = __webpack_require__(110);
const _customerresolver = __webpack_require__(232);
const _riderinput = __webpack_require__(235);
const _savedpaymentmethoddto = __webpack_require__(115);
const _customernotedto = __webpack_require__(236);
const _createcustomernoteinput = __webpack_require__(237);
const _ridertransactioninput = __webpack_require__(233);
const _customersessiondto = __webpack_require__(238);
const _customerservice = __webpack_require__(234);
let CustomerModule = class CustomerModule {
};
CustomerModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _database.SharedCustomerWalletModule,
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.CustomerEntity,
                        _database.CustomerNoteEntity,
                        _database.CustomerSessionEntity,
                        _database.DriverEntity,
                        _database.RiderWalletEntity,
                        _database.RiderTransactionEntity,
                        _database.RiderAddressEntity,
                        _database.SavedPaymentMethodEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.CustomerEntity,
                        DTOClass: _customerdto.CustomerDTO,
                        CreateDTOClass: _riderinput.RiderInput,
                        UpdateDTOClass: _riderinput.RiderInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        enableAggregate: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.RiderWalletEntity,
                        DTOClass: _riderwalletdto.RiderWalletDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        enableAggregate: true
                    },
                    {
                        EntityClass: _database.RiderTransactionEntity,
                        DTOClass: _ridertransactiondto.RiderTransactionDTO,
                        CreateDTOClass: _ridertransactioninput.RiderTransactionInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.RiderAddressEntity,
                        DTOClass: _rideraddressdto.RiderAddressDTO,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.SavedPaymentMethodEntity,
                        DTOClass: _savedpaymentmethoddto.SavedPaymentMethodDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        }
                    },
                    {
                        EntityClass: _database.CustomerNoteEntity,
                        DTOClass: _customernotedto.CustomerNoteDTO,
                        CreateDTOClass: _createcustomernoteinput.CreateCustomerNoteInput,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.CustomerSessionEntity,
                        DTOClass: _customersessiondto.CustomerSessionDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        enableTotalCount: true,
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        }
                    }
                ]
            })
        ],
        providers: [
            _customerresolver.RiderResolver,
            _database.SharedRiderService,
            _customerservice.CustomerService
        ]
    })
], CustomerModule);


/***/ }),
/* 232 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderResolver", ({
    enumerable: true,
    get: function() {
        return RiderResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _apollo = __webpack_require__(3);
const _jwtauthguard = __webpack_require__(29);
const _ridertransactioninput = __webpack_require__(233);
const _riderwalletdto = __webpack_require__(113);
const _customerdto = __webpack_require__(110);
const _typeorm = __webpack_require__(16);
const _customerservice = __webpack_require__(234);
let RiderResolver = class RiderResolver {
    constructor(sharedRiderService, sharedWalletService, customerService, context, datasource){
        this.sharedRiderService = sharedRiderService;
        this.sharedWalletService = sharedWalletService;
        this.customerService = customerService;
        this.context = context;
        this.datasource = datasource;
    }
    async createRiderTransaction(input) {
        input.amount = input.action == _database.TransactionAction.Recharge ? Math.abs(input.amount) : Math.abs(input.amount) * -1;
        return this.sharedWalletService.rechargeWallet({
            ...input,
            operatorId: this.context.req.user.id,
            status: _database.TransactionStatus.Done
        });
    }
    async deleteOneRider(id) {
        const operator = await this.datasource.getRepository(_database.OperatorEntity).findOne({
            where: {
                id: this.context.req.user.id
            },
            relations: {
                role: true
            }
        });
        if (!operator.role.permissions.includes(_database.OperatorPermission.Riders_Edit)) {
            throw new _apollo.ForbiddenError('PERMISSION_NOT_GRANTED');
        }
        await this.sharedRiderService.repo.delete({
            id
        });
    }
    async terminateCustomerLoginSession(sessionId) {
        if (process.env.DEMO_MODE != null) {
            throw new _apollo.ForbiddenError('Action not allowed in demo mode.');
        }
        const result = await this.customerService.terminateLoginSession(sessionId);
        return result.affected > 0;
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_riderwalletdto.RiderWalletDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_ridertransactioninput.RiderTransactionInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _ridertransactioninput.RiderTransactionInput === "undefined" ? Object : _ridertransactioninput.RiderTransactionInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], RiderResolver.prototype, "createRiderTransaction", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_customerdto.CustomerDTO),
    _ts_param._(0, (0, _graphql.Args)('id', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], RiderResolver.prototype, "deleteOneRider", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>Boolean),
    _ts_param._(0, (0, _graphql.Args)('sessionId', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], RiderResolver.prototype, "terminateCustomerLoginSession", null);
RiderResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(3, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _database.SharedRiderService === "undefined" ? Object : _database.SharedRiderService,
        typeof _database.SharedCustomerWalletService === "undefined" ? Object : _database.SharedCustomerWalletService,
        typeof _customerservice.CustomerService === "undefined" ? Object : _customerservice.CustomerService,
        typeof UserContext === "undefined" ? Object : UserContext,
        typeof _typeorm.DataSource === "undefined" ? Object : _typeorm.DataSource
    ])
], RiderResolver);


/***/ }),
/* 233 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderTransactionInput", ({
    enumerable: true,
    get: function() {
        return RiderTransactionInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let RiderTransactionInput = class RiderTransactionInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.TransactionAction, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.TransactionAction === "undefined" ? Object : _database.TransactionAction)
], RiderTransactionInput.prototype, "action", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RiderDeductTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.RiderDeductTransactionType === "undefined" ? Object : _database.RiderDeductTransactionType)
], RiderTransactionInput.prototype, "deductType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RiderRechargeTransactionType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.RiderRechargeTransactionType === "undefined" ? Object : _database.RiderRechargeTransactionType)
], RiderTransactionInput.prototype, "rechargeType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], RiderTransactionInput.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], RiderTransactionInput.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderTransactionInput.prototype, "refrenceNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderTransactionInput.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RiderTransactionInput.prototype, "riderId", void 0);
RiderTransactionInput = _ts_decorate._([
    (0, _graphql.InputType)()
], RiderTransactionInput);


/***/ }),
/* 234 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CustomerService", ({
    enumerable: true,
    get: function() {
        return CustomerService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _typeorm1 = __webpack_require__(16);
const _database = __webpack_require__(15);
let CustomerService = class CustomerService {
    constructor(customerSessionRepository){
        this.customerSessionRepository = customerSessionRepository;
    }
    async terminateLoginSession(sessionId) {
        return this.customerSessionRepository.softDelete(sessionId);
    }
};
CustomerService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.CustomerSessionEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], CustomerService);


/***/ }),
/* 235 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RiderInput", ({
    enumerable: true,
    get: function() {
        return RiderInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let RiderInput = class RiderInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RiderStatus, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.RiderStatus === "undefined" ? Object : _database.RiderStatus)
], RiderInput.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderInput.prototype, "firstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderInput.prototype, "lastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderInput.prototype, "countryIso", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderInput.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], RiderInput.prototype, "registrationTimestamp", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderInput.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Gender, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.Gender === "undefined" ? Object : _database.Gender)
], RiderInput.prototype, "gender", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], RiderInput.prototype, "isResident", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderInput.prototype, "idNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RiderInput.prototype, "password", void 0);
RiderInput = _ts_decorate._([
    (0, _graphql.InputType)()
], RiderInput);


/***/ }),
/* 236 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CustomerNoteDTO", ({
    enumerable: true,
    get: function() {
        return CustomerNoteDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _customerdto = __webpack_require__(110);
const _operatordto = __webpack_require__(65);
let CustomerNoteDTO = class CustomerNoteDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", String)
], CustomerNoteDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CustomerNoteDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        filterRequired: true
    }),
    _ts_metadata._("design:type", Number)
], CustomerNoteDTO.prototype, "customerId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CustomerNoteDTO.prototype, "note", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CustomerNoteDTO.prototype, "createdById", void 0);
CustomerNoteDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('CustomerNote'),
    (0, _nestjsquerygraphql.Relation)('customer', ()=>_customerdto.CustomerDTO),
    (0, _nestjsquerygraphql.Relation)('createdBy', ()=>_operatordto.OperatorDTO)
], CustomerNoteDTO);


/***/ }),
/* 237 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateCustomerNoteInput", ({
    enumerable: true,
    get: function() {
        return CreateCustomerNoteInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CreateCustomerNoteInput = class CreateCustomerNoteInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateCustomerNoteInput.prototype, "customerId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", String)
], CreateCustomerNoteInput.prototype, "note", void 0);
CreateCustomerNoteInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateCustomerNoteInput);


/***/ }),
/* 238 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CustomerSessionDTO", ({
    enumerable: true,
    get: function() {
        return CustomerSessionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _sessioninfodto = __webpack_require__(68);
let CustomerSessionDTO = class CustomerSessionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CustomerSessionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_sessioninfodto.SessionInfoDTO),
    _ts_metadata._("design:type", typeof _sessioninfodto.SessionInfoDTO === "undefined" ? Object : _sessioninfodto.SessionInfoDTO)
], CustomerSessionDTO.prototype, "sessionInfo", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CustomerSessionDTO.prototype, "customerId", void 0);
CustomerSessionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('CustomerSession')
], CustomerSessionDTO);


/***/ }),
/* 239 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceModule", ({
    enumerable: true,
    get: function() {
        return ServiceModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _operatormodule = __webpack_require__(62);
const _servicecategorydto = __webpack_require__(240);
const _serviceoptiondto = __webpack_require__(134);
const _servicedto = __webpack_require__(96);
const _servicecategoryqueryservice = __webpack_require__(241);
const _serviceoptionqueryservice = __webpack_require__(242);
const _servicequeryservice = __webpack_require__(243);
const _serviceoptioninput = __webpack_require__(244);
const _serviceinput = __webpack_require__(245);
const _servicecategoryinput = __webpack_require__(246);
let ServiceModule = class ServiceModule {
};
ServiceModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.ServiceCategoryEntity,
                        _database.ServiceEntity,
                        _database.ServiceOptionEntity
                    ]),
                    _operatormodule.OperatorModule
                ],
                services: [
                    _servicequeryservice.ServiceQueryService,
                    _servicecategoryqueryservice.ServiceCategoryQueryService,
                    _serviceoptionqueryservice.ServiceOptionQueryService
                ],
                resolvers: [
                    {
                        EntityClass: _database.ServiceEntity,
                        DTOClass: _servicedto.ServiceDTO,
                        ServiceClass: _servicequeryservice.ServiceQueryService,
                        CreateDTOClass: _serviceinput.ServiceInput,
                        UpdateDTOClass: _serviceinput.ServiceInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.ServiceCategoryEntity,
                        DTOClass: _servicecategorydto.ServiceCategoryDTO,
                        ServiceClass: _servicecategoryqueryservice.ServiceCategoryQueryService,
                        CreateDTOClass: _servicecategoryinput.ServiceCategoryInput,
                        UpdateDTOClass: _servicecategoryinput.ServiceCategoryInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.ServiceOptionEntity,
                        DTOClass: _serviceoptiondto.ServiceOptionDTO,
                        CreateDTOClass: _serviceoptioninput.ServiceOptionInput,
                        UpdateDTOClass: _serviceoptioninput.ServiceOptionInput,
                        ServiceClass: _serviceoptionqueryservice.ServiceOptionQueryService,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    }
                ]
            })
        ]
    })
], ServiceModule);


/***/ }),
/* 240 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceCategoryDTO", ({
    enumerable: true,
    get: function() {
        return ServiceCategoryDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _serviceauthorizer = __webpack_require__(131);
const _servicedto = __webpack_require__(96);
let ServiceCategoryDTO = class ServiceCategoryDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ServiceCategoryDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ServiceCategoryDTO.prototype, "name", void 0);
ServiceCategoryDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ServiceCategory'),
    (0, _nestjsquerygraphql.UnPagedRelation)('services', ()=>_servicedto.ServiceDTO, {
        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE
    }),
    (0, _nestjsquerygraphql.Authorize)(_serviceauthorizer.ServiceAuthorizer)
], ServiceCategoryDTO);


/***/ }),
/* 241 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceCategoryQueryService", ({
    enumerable: true,
    get: function() {
        return ServiceCategoryQueryService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _nestjsquerycore = __webpack_require__(37);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
const _operatorservice = __webpack_require__(70);
const _servicecategorydto = __webpack_require__(240);
let ServiceCategoryQueryService = class ServiceCategoryQueryService extends _nestjsquerytypeorm.TypeOrmQueryService {
    constructor(serviceRepo, operatorService, userContext){
        super(serviceRepo, {
            useSoftDelete: true
        });
        this.operatorService = operatorService;
        this.userContext = userContext;
    }
    async deleteOne(id, opts) {
        await this.operatorService.hasPermission(this.userContext.req.user.id, _database.OperatorPermission.Services_Edit);
        return super.deleteOne(id, opts);
    }
};
ServiceCategoryQueryService = _ts_decorate._([
    (0, _nestjsquerycore.QueryService)(_servicecategorydto.ServiceCategoryDTO),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ServiceCategoryEntity)),
    _ts_param._(2, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _operatorservice.OperatorService === "undefined" ? Object : _operatorservice.OperatorService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], ServiceCategoryQueryService);


/***/ }),
/* 242 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceOptionQueryService", ({
    enumerable: true,
    get: function() {
        return ServiceOptionQueryService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _nestjsquerycore = __webpack_require__(37);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
const _operatorservice = __webpack_require__(70);
const _serviceoptiondto = __webpack_require__(134);
let ServiceOptionQueryService = class ServiceOptionQueryService extends _nestjsquerytypeorm.TypeOrmQueryService {
    constructor(serviceRepo, operatorService, userContext){
        super(serviceRepo, {
            useSoftDelete: true
        });
        this.operatorService = operatorService;
        this.userContext = userContext;
    }
    async deleteOne(id, opts) {
        await this.operatorService.hasPermission(this.userContext.req.user.id, _database.OperatorPermission.Services_Edit);
        return super.deleteOne(id, opts);
    }
};
ServiceOptionQueryService = _ts_decorate._([
    (0, _nestjsquerycore.QueryService)(_serviceoptiondto.ServiceOptionDTO),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ServiceOptionEntity)),
    _ts_param._(2, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _operatorservice.OperatorService === "undefined" ? Object : _operatorservice.OperatorService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], ServiceOptionQueryService);


/***/ }),
/* 243 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceQueryService", ({
    enumerable: true,
    get: function() {
        return ServiceQueryService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _nestjsquerycore = __webpack_require__(37);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
const _operatorservice = __webpack_require__(70);
const _servicedto = __webpack_require__(96);
let ServiceQueryService = class ServiceQueryService extends _nestjsquerytypeorm.TypeOrmQueryService {
    constructor(serviceRepo, operatorService, userContext){
        super(serviceRepo, {
            useSoftDelete: true
        });
        this.operatorService = operatorService;
        this.userContext = userContext;
    }
    async deleteOne(id, opts) {
        await this.operatorService.hasPermission(this.userContext.req.user.id, _database.OperatorPermission.Services_Edit);
        return super.deleteOne(id, opts);
    }
};
ServiceQueryService = _ts_decorate._([
    (0, _nestjsquerycore.QueryService)(_servicedto.ServiceDTO),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ServiceEntity)),
    _ts_param._(2, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _operatorservice.OperatorService === "undefined" ? Object : _operatorservice.OperatorService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], ServiceQueryService);


/***/ }),
/* 244 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceOptionInput", ({
    enumerable: true,
    get: function() {
        return ServiceOptionInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let ServiceOptionInput = class ServiceOptionInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], ServiceOptionInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ServiceOptionType),
    _ts_metadata._("design:type", typeof _database.ServiceOptionType === "undefined" ? Object : _database.ServiceOptionType)
], ServiceOptionInput.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Number, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ServiceOptionInput.prototype, "additionalFee", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ServiceOptionIcon),
    _ts_metadata._("design:type", typeof _database.ServiceOptionIcon === "undefined" ? Object : _database.ServiceOptionIcon)
], ServiceOptionInput.prototype, "icon", void 0);
ServiceOptionInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ServiceOptionInput);


/***/ }),
/* 245 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceInput", ({
    enumerable: true,
    get: function() {
        return ServiceInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
let ServiceInput = class ServiceInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ServiceInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ServiceInput.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "personCapacity", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "categoryId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "baseFare", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.TaxiOrderType
        ], {
        defaultValue: [
            _database.TaxiOrderType.Ride
        ]
    }),
    _ts_metadata._("design:type", Array)
], ServiceInput.prototype, "orderTypes", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "roundingFactor", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "perHundredMeters", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "perMinuteDrive", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "perMinuteWait", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "prepayPercent", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "minimumFee", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "searchRadius", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ServicePaymentMethod, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ServicePaymentMethod === "undefined" ? Object : _database.ServicePaymentMethod)
], ServiceInput.prototype, "paymentMethod", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "cancellationTotalFee", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "cancellationDriverShare", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "providerSharePercent", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "providerShareFlat", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], ServiceInput.prototype, "twoWayAvailable", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "maximumDestinationDistance", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.TimeMultiplier
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ServiceInput.prototype, "timeMultipliers", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.DistanceMultiplier
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ServiceInput.prototype, "distanceMultipliers", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.WeekdayMultiplier
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ServiceInput.prototype, "weekdayMultipliers", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.DateRangeMultiplier
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ServiceInput.prototype, "dateRangeMultipliers", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ServiceInput.prototype, "mediaId", void 0);
ServiceInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ServiceInput);


/***/ }),
/* 246 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ServiceCategoryInput", ({
    enumerable: true,
    get: function() {
        return ServiceCategoryInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let ServiceCategoryInput = class ServiceCategoryInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], ServiceCategoryInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], ServiceCategoryInput.prototype, "enabled", void 0);
ServiceCategoryInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ServiceCategoryInput);


/***/ }),
/* 247 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UploadModule", ({
    enumerable: true,
    get: function() {
        return UploadModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _mediadto = __webpack_require__(66);
let UploadModule = class UploadModule {
};
UploadModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.MediaEntity
                    ])
                ],
                resolvers: [
                    {
                        DTOClass: _mediadto.MediaDTO,
                        EntityClass: _database.MediaEntity,
                        create: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        }
                    }
                ]
            })
        ],
        providers: [],
        exports: []
    })
], UploadModule);


/***/ }),
/* 248 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SOSModule", ({
    enumerable: true,
    get: function() {
        return SOSModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _createsosactivityinput = __webpack_require__(249);
const _sosactivitydto = __webpack_require__(250);
const _sosdto = __webpack_require__(251);
const _sosacitivtyqueryservice = __webpack_require__(253);
const _sossubscriptionservice = __webpack_require__(254);
const _sosreasondto = __webpack_require__(252);
const _createsosreasoninput = __webpack_require__(255);
const _updatesosreasoninput = __webpack_require__(256);
const _updatesosinput = __webpack_require__(257);
let SOSModule = class SOSModule {
};
SOSModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.SOSEntity,
                        _database.SOSActivityEntity,
                        _database.SOSReasonEntity
                    ])
                ],
                services: [
                    _sosacitivtyqueryservice.SOSActivityQueryService
                ],
                resolvers: [
                    {
                        EntityClass: _database.SOSEntity,
                        DTOClass: _sosdto.SOSDTO,
                        UpdateDTOClass: _updatesosinput.UpdateSosInput,
                        create: {
                            disabled: true
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        enableAggregate: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.SOSActivityEntity,
                        DTOClass: _sosactivitydto.SOSActivityDTO,
                        CreateDTOClass: _createsosactivityinput.CreateSOSAcitivtyInput,
                        ServiceClass: _sosacitivtyqueryservice.SOSActivityQueryService,
                        read: {
                            disabled: true
                        },
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.SOSReasonEntity,
                        DTOClass: _sosreasondto.SOSReasonDTO,
                        CreateDTOClass: _createsosreasoninput.CreateSosReasonInput,
                        UpdateDTOClass: _updatesosreasoninput.UpdateSosReasonInput,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        read: {
                            one: {
                                name: 'sosReason'
                            },
                            many: {
                                name: 'sosReasons'
                            }
                        },
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    }
                ]
            })
        ],
        providers: [
            _sossubscriptionservice.SOSSubscriptionService,
            _database.RedisPubSubProvider.provider()
        ]
    })
], SOSModule);


/***/ }),
/* 249 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateSOSAcitivtyInput", ({
    enumerable: true,
    get: function() {
        return CreateSOSAcitivtyInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CreateSOSAcitivtyInput = class CreateSOSAcitivtyInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.SOSActivityAction, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.SOSActivityAction === "undefined" ? Object : _database.SOSActivityAction)
], CreateSOSAcitivtyInput.prototype, "action", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateSOSAcitivtyInput.prototype, "note", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateSOSAcitivtyInput.prototype, "sosId", void 0);
CreateSOSAcitivtyInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateSOSAcitivtyInput);


/***/ }),
/* 250 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SOSActivityDTO", ({
    enumerable: true,
    get: function() {
        return SOSActivityDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _operatordto = __webpack_require__(65);
let SOSActivityDTO = class SOSActivityDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], SOSActivityDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], SOSActivityDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.SOSActivityAction, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.SOSActivityAction === "undefined" ? Object : _database.SOSActivityAction)
], SOSActivityDTO.prototype, "action", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SOSActivityDTO.prototype, "note", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], SOSActivityDTO.prototype, "operatorId", void 0);
SOSActivityDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('SOSActivity'),
    (0, _nestjsquerygraphql.Relation)('operator', ()=>_operatordto.OperatorDTO)
], SOSActivityDTO);


/***/ }),
/* 251 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SOSDTO", ({
    enumerable: true,
    get: function() {
        return SOSDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
const _orderdto = __webpack_require__(99);
const _sosactivitydto = __webpack_require__(250);
const _sosreasondto = __webpack_require__(252);
let SOSDTO = class SOSDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], SOSDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], SOSDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.SOSStatus),
    _ts_metadata._("design:type", typeof _database.SOSStatus === "undefined" ? Object : _database.SOSStatus)
], SOSDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SOSDTO.prototype, "comment", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], SOSDTO.prototype, "location", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], SOSDTO.prototype, "submittedByRider", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], SOSDTO.prototype, "requestId", void 0);
SOSDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('DistressSignal'),
    (0, _nestjsquerygraphql.UnPagedRelation)('activities', ()=>_sosactivitydto.SOSActivityDTO),
    (0, _nestjsquerygraphql.Relation)('order', ()=>_orderdto.OrderDTO, {
        relationName: 'request'
    }),
    (0, _nestjsquerygraphql.Relation)('reason', ()=>_sosreasondto.SOSReasonDTO, {
        nullable: true
    })
], SOSDTO);


/***/ }),
/* 252 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SOSReasonDTO", ({
    enumerable: true,
    get: function() {
        return SOSReasonDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _sosdto = __webpack_require__(251);
let SOSReasonDTO = class SOSReasonDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], SOSReasonDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], SOSReasonDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Boolean)
], SOSReasonDTO.prototype, "isActive", void 0);
SOSReasonDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('SOSReason'),
    (0, _nestjsquerygraphql.OffsetConnection)('sos', ()=>_sosdto.SOSDTO, {
        enableAggregate: true,
        enableTotalCount: true
    })
], SOSReasonDTO);


/***/ }),
/* 253 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SOSActivityQueryService", ({
    enumerable: true,
    get: function() {
        return SOSActivityQueryService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _nestjsquerycore = __webpack_require__(37);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
const _sosactivitydto = __webpack_require__(250);
let SOSActivityQueryService = class SOSActivityQueryService extends _nestjsquerytypeorm.TypeOrmQueryService {
    constructor(sosActivityRepo, sosRepository, userContext){
        super(sosActivityRepo);
        this.sosRepository = sosRepository;
        this.userContext = userContext;
    }
    async createOne(record) {
        const activity = await super.createOne({
            ...record,
            operatorId: this.userContext.req.user.id
        });
        switch(activity.action){
            case _database.SOSActivityAction.MarkedAsResolved:
                await this.sosRepository.update(record.sosId, {
                    status: _database.SOSStatus.Resolved
                });
                break;
            case _database.SOSActivityAction.MarkedAsFalseAlarm:
                await this.sosRepository.update(record.sosId, {
                    status: _database.SOSStatus.FalseAlarm
                });
                break;
        }
        return activity;
    }
};
SOSActivityQueryService = _ts_decorate._([
    (0, _nestjsquerycore.QueryService)(_sosactivitydto.SOSActivityDTO),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.SOSActivityEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.SOSEntity)),
    _ts_param._(2, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], SOSActivityQueryService);


/***/ }),
/* 254 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SOSSubscriptionService", ({
    enumerable: true,
    get: function() {
        return SOSSubscriptionService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _nestjsquerygraphql = __webpack_require__(17);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _graphqlredissubscriptions = __webpack_require__(18);
const _sosdto = __webpack_require__(251);
let SOSSubscriptionService = class SOSSubscriptionService {
    constructor(pubSub){
        this.pubSub = pubSub;
    }
    sosCreated() {
        return this.pubSub.asyncIterator('sosCreated');
    }
};
_ts_decorate._([
    (0, _graphql.Subscription)(()=>_sosdto.SOSDTO, {
        filter: (payload, variables, context)=>{
            _common.Logger.log(payload.adminIds.includes(context.req.user.id));
            return payload.adminIds.includes(context.req.user.id);
        }
    }),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", void 0)
], SOSSubscriptionService.prototype, "sosCreated", null);
SOSSubscriptionService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _nestjsquerygraphql.InjectPubSub)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _graphqlredissubscriptions.RedisPubSub === "undefined" ? Object : _graphqlredissubscriptions.RedisPubSub
    ])
], SOSSubscriptionService);


/***/ }),
/* 255 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateSosReasonInput", ({
    enumerable: true,
    get: function() {
        return CreateSosReasonInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CreateSosReasonInput = class CreateSosReasonInput {
};
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", String)
], CreateSosReasonInput.prototype, "name", void 0);
CreateSosReasonInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateSosReasonInput);


/***/ }),
/* 256 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateSosReasonInput", ({
    enumerable: true,
    get: function() {
        return UpdateSosReasonInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let UpdateSosReasonInput = class UpdateSosReasonInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateSosReasonInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], UpdateSosReasonInput.prototype, "isActive", void 0);
UpdateSosReasonInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateSosReasonInput);


/***/ }),
/* 257 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateSosInput", ({
    enumerable: true,
    get: function() {
        return UpdateSosInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let UpdateSosInput = class UpdateSosInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.SOSStatus),
    _ts_metadata._("design:type", typeof _database.SOSStatus === "undefined" ? Object : _database.SOSStatus)
], UpdateSosInput.prototype, "status", void 0);
UpdateSosInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateSosInput);


/***/ }),
/* 258 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RewardModule", ({
    enumerable: true,
    get: function() {
        return RewardModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _rewarddto = __webpack_require__(259);
let RewardModule = class RewardModule {
};
RewardModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.RewardEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.RewardEntity,
                        DTOClass: _rewarddto.RewardDTO,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    }
                ]
            })
        ]
    })
], RewardModule);


/***/ }),
/* 259 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RewardDTO", ({
    enumerable: true,
    get: function() {
        return RewardDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let RewardDTO = class RewardDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RewardDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], RewardDTO.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], RewardDTO.prototype, "startDate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], RewardDTO.prototype, "endDate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RewardAppType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.RewardAppType === "undefined" ? Object : _database.RewardAppType)
], RewardDTO.prototype, "appType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RewardBeneficiary, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.RewardBeneficiary === "undefined" ? Object : _database.RewardBeneficiary)
], RewardDTO.prototype, "beneficiary", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.RewardEvent, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.RewardEvent === "undefined" ? Object : _database.RewardEvent)
], RewardDTO.prototype, "event", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], RewardDTO.prototype, "creditGift", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], RewardDTO.prototype, "tripFeePercentGift", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], RewardDTO.prototype, "creditCurrency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], RewardDTO.prototype, "conditionTripCountsLessThan", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            String
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], RewardDTO.prototype, "conditionUserNumberFirstDigits", void 0);
RewardDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Reward')
], RewardDTO);


/***/ }),
/* 260 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "GiftCardModule", ({
    enumerable: true,
    get: function() {
        return GiftCardModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _giftbatchdto = __webpack_require__(261);
const _giftcodedto = __webpack_require__(262);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _giftcardservice = __webpack_require__(265);
const _giftcardresolver = __webpack_require__(266);
const _typeorm = __webpack_require__(14);
const _operatormodule = __webpack_require__(62);
let GiftCardModule = class GiftCardModule {
};
GiftCardModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _operatormodule.OperatorModule,
            _typeorm.TypeOrmModule.forFeature([
                _database.GiftBatchEntity,
                _database.GiftCodeEntity
            ]),
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.GiftBatchEntity,
                        _database.GiftCodeEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.GiftBatchEntity,
                        DTOClass: _giftbatchdto.GiftBatchDTO,
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        create: {
                            disabled: true
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    },
                    {
                        EntityClass: _database.GiftCodeEntity,
                        DTOClass: _giftcodedto.GiftCodeDTO,
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        create: {
                            disabled: true
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        read: {
                            one: {
                                disabled: true
                            }
                        }
                    }
                ]
            })
        ],
        providers: [
            _giftcardservice.GiftCardService,
            _giftcardresolver.GiftCardResolver
        ]
    })
], GiftCardModule);


/***/ }),
/* 261 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "GiftBatchDTO", ({
    enumerable: true,
    get: function() {
        return GiftBatchDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _giftcodedto = __webpack_require__(262);
const _giftbatchauthorizer = __webpack_require__(264);
let GiftBatchDTO = class GiftBatchDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], GiftBatchDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], GiftBatchDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], GiftBatchDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], GiftBatchDTO.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], GiftBatchDTO.prototype, "availableFrom", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], GiftBatchDTO.prototype, "expireAt", void 0);
GiftBatchDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('GiftBatch'),
    (0, _nestjsquerygraphql.OffsetConnection)('giftCodes', ()=>_giftcodedto.GiftCodeDTO, {
        enableTotalCount: true,
        enableAggregate: true
    }),
    (0, _nestjsquerygraphql.Authorize)(_giftbatchauthorizer.GiftBatchAuthorizer)
], GiftBatchDTO);


/***/ }),
/* 262 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "GiftCodeDTO", ({
    enumerable: true,
    get: function() {
        return GiftCodeDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _ridertransactiondto = __webpack_require__(109);
const _drivertransactiondto = __webpack_require__(102);
const _giftcodeauthorizer = __webpack_require__(263);
let GiftCodeDTO = class GiftCodeDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], GiftCodeDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], GiftCodeDTO.prototype, "code", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)({
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], GiftCodeDTO.prototype, "usedAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], GiftCodeDTO.prototype, "giftId", void 0);
GiftCodeDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('GiftCode'),
    (0, _nestjsquerygraphql.Relation)('riderTransaction', ()=>_ridertransactiondto.RiderTransactionDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('driverTransaction', ()=>_drivertransactiondto.DriverTransactionDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Authorize)(_giftcodeauthorizer.GiftCodeAuthorizer)
], GiftCodeDTO);


/***/ }),
/* 263 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "GiftCodeAuthorizer", ({
    enumerable: true,
    get: function() {
        return GiftCodeAuthorizer;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _typeorm = __webpack_require__(16);
let GiftCodeAuthorizer = class GiftCodeAuthorizer {
    constructor(datasource){
        this.datasource = datasource;
    }
    async authorize(context, authorizerContext) {
        const operator = await this.datasource.getRepository(_database.OperatorEntity).findOne({
            where: {
                id: context.req.user.id
            },
            relations: {
                role: true
            }
        });
        if (authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.GiftBatch_ViewCodes)) {
            throw new _common.UnauthorizedException();
        }
        return undefined;
    }
};
GiftCodeAuthorizer = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.DataSource === "undefined" ? Object : _typeorm.DataSource
    ])
], GiftCodeAuthorizer);


/***/ }),
/* 264 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "GiftBatchAuthorizer", ({
    enumerable: true,
    get: function() {
        return GiftBatchAuthorizer;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _typeorm = __webpack_require__(16);
let GiftBatchAuthorizer = class GiftBatchAuthorizer {
    constructor(datasource){
        this.datasource = datasource;
    }
    async authorize(context, authorizerContext) {
        const operator = await this.datasource.getRepository(_database.OperatorEntity).findOne({
            where: {
                id: context.req.user.id
            },
            relations: {
                role: true
            }
        });
        if (authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.GiftBatch_View)) {
            throw new _common.UnauthorizedException();
        }
        return undefined;
    }
};
GiftBatchAuthorizer = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.DataSource === "undefined" ? Object : _typeorm.DataSource
    ])
], GiftBatchAuthorizer);


/***/ }),
/* 265 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "GiftCardService", ({
    enumerable: true,
    get: function() {
        return GiftCardService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
const _json2csv = __webpack_require__(35);
const _promises = __webpack_require__(34);
const _path = __webpack_require__(24);
const _operatorservice = __webpack_require__(70);
let GiftCardService = class GiftCardService {
    constructor(giftRepository, giftCodeRepository, operatorService){
        this.giftRepository = giftRepository;
        this.giftCodeRepository = giftCodeRepository;
        this.operatorService = operatorService;
    }
    async createGiftCardBatch(input) {
        let gift = this.giftRepository.create({
            name: input.name,
            currency: input.currency,
            amount: input.amount,
            availableFrom: input.availableFrom,
            expireAt: input.expireAt,
            createdByOperatorId: input.operatorId
        });
        gift = await this.giftRepository.save(gift);
        const giftCodes = Array.from(Array(input.quantity)).map(()=>{
            return this.giftCodeRepository.create({
                code: this.generateGiftCode(),
                gift
            });
        });
        await this.giftCodeRepository.save(giftCodes);
        return gift;
    }
    generateGiftCode() {
        return Math.random().toString(36).substring(2, 10).toUpperCase();
    }
    async exportGiftCardBatch(input) {
        const { batchId, operatorId } = input;
        await this.operatorService.hasPermission(operatorId, _database.OperatorPermission.GiftBatch_ViewCodes);
        const result = await this.giftCodeRepository.find({
            where: {
                giftId: batchId
            },
            select: {
                code: true,
                usedAt: true
            }
        });
        const str = await (0, _json2csv.json2csv)(result);
        const fileName = `${new Date().getTime().toString()}.csv`;
        await (0, _promises.writeFile)((0, _path.join)(process.cwd(), 'uploads', `${new Date().getTime().toString()}.csv`), str);
        return {
            url: `uploads/${fileName}`
        };
    }
};
GiftCardService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.GiftBatchEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.GiftCodeEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _operatorservice.OperatorService === "undefined" ? Object : _operatorservice.OperatorService
    ])
], GiftCardService);


/***/ }),
/* 266 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "GiftCardResolver", ({
    enumerable: true,
    get: function() {
        return GiftCardResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _giftcardservice = __webpack_require__(265);
const _giftbatchdto = __webpack_require__(261);
const _creategiftbatchinput = __webpack_require__(267);
const _common = __webpack_require__(7);
const _jwtauthguard = __webpack_require__(29);
let GiftCardResolver = class GiftCardResolver {
    constructor(giftCardService, context){
        this.giftCardService = giftCardService;
        this.context = context;
    }
    async createGiftCardBatch(input) {
        return this.giftCardService.createGiftCardBatch({
            ...input,
            operatorId: this.context.req.user.id
        });
    }
    async exportGiftCardBatch(batchId) {
        return (await this.giftCardService.exportGiftCardBatch({
            batchId,
            operatorId: this.context.req.user.id
        })).url;
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_giftbatchdto.GiftBatchDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_creategiftbatchinput.CreateGiftBatchInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _creategiftbatchinput.CreateGiftBatchInput === "undefined" ? Object : _creategiftbatchinput.CreateGiftBatchInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], GiftCardResolver.prototype, "createGiftCardBatch", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>String),
    _ts_param._(0, (0, _graphql.Args)('batchId', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], GiftCardResolver.prototype, "exportGiftCardBatch", null);
GiftCardResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(1, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _giftcardservice.GiftCardService === "undefined" ? Object : _giftcardservice.GiftCardService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], GiftCardResolver);


/***/ }),
/* 267 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateGiftBatchInput", ({
    enumerable: true,
    get: function() {
        return CreateGiftBatchInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CreateGiftBatchInput = class CreateGiftBatchInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateGiftBatchInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateGiftBatchInput.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CreateGiftBatchInput.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CreateGiftBatchInput.prototype, "availableFrom", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CreateGiftBatchInput.prototype, "expireAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CreateGiftBatchInput.prototype, "quantity", void 0);
CreateGiftBatchInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateGiftBatchInput);


/***/ }),
/* 268 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SMSProviderModule", ({
    enumerable: true,
    get: function() {
        return SMSProviderModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _smsproviderdto = __webpack_require__(269);
const _nestjsquerytypeorm = __webpack_require__(26);
const _typeorm = __webpack_require__(14);
const _jwtauthguard = __webpack_require__(29);
const _smsproviderservice = __webpack_require__(272);
const _smsproviderresolver = __webpack_require__(273);
const _smsproviderinput = __webpack_require__(274);
const _smsproviderqueryservice = __webpack_require__(275);
const _smsdto = __webpack_require__(271);
let SMSProviderModule = class SMSProviderModule {
};
SMSProviderModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.SMSProviderEntity,
                        _database.SMSEntity
                    ])
                ],
                services: [
                    _smsproviderqueryservice.SMSProviderQueryService
                ],
                resolvers: [
                    {
                        DTOClass: _smsproviderdto.SMSProviderDTO,
                        CreateDTOClass: _smsproviderinput.SMSProviderInput,
                        UpdateDTOClass: _smsproviderinput.SMSProviderInput,
                        EntityClass: _database.SMSProviderEntity,
                        ServiceClass: _smsproviderqueryservice.SMSProviderQueryService,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        read: {
                            many: {
                                name: 'smsProviders'
                            },
                            one: {
                                name: 'smsProvider'
                            }
                        },
                        delete: {
                            many: {
                                disabled: false
                            }
                        },
                        update: {
                            many: {
                                disabled: false
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    },
                    {
                        EntityClass: _database.SMSEntity,
                        DTOClass: _smsdto.SMSDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        read: {
                            many: {
                                name: 'smses'
                            },
                            one: {
                                name: 'sms'
                            }
                        },
                        create: {
                            many: {
                                disabled: false
                            }
                        },
                        update: {
                            many: {
                                disabled: false
                            }
                        },
                        delete: {
                            many: {
                                disabled: false
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    }
                ]
            }),
            _typeorm.TypeOrmModule.forFeature([
                _database.SMSProviderEntity
            ])
        ],
        providers: [
            _smsproviderservice.SMSProviderService,
            _smsproviderresolver.SMSProviderResolver
        ]
    })
], SMSProviderModule);


/***/ }),
/* 269 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SMSProviderDTO", ({
    enumerable: true,
    get: function() {
        return SMSProviderDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _smsproviderauthorizer = __webpack_require__(270);
const _smsdto = __webpack_require__(271);
let SMSProviderDTO = class SMSProviderDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], SMSProviderDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], SMSProviderDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.SMSProviderType),
    _ts_metadata._("design:type", typeof _database.SMSProviderType === "undefined" ? Object : _database.SMSProviderType)
], SMSProviderDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], SMSProviderDTO.prototype, "isDefault", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", String)
], SMSProviderDTO.prototype, "accountId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SMSProviderDTO.prototype, "authToken", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SMSProviderDTO.prototype, "fromNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SMSProviderDTO.prototype, "verificationTemplate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SMSProviderDTO.prototype, "smsType", void 0);
SMSProviderDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('SMSProvider', {
        description: 'SMS Provider'
    }),
    (0, _nestjsquerygraphql.OffsetConnection)('messages', ()=>_smsdto.SMSDTO, {
        enableAggregate: true
    }),
    (0, _nestjsquerygraphql.Authorize)(_smsproviderauthorizer.SMSProviderAuthorizer)
], SMSProviderDTO);


/***/ }),
/* 270 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SMSProviderAuthorizer", ({
    enumerable: true,
    get: function() {
        return SMSProviderAuthorizer;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _typeorm = __webpack_require__(16);
let SMSProviderAuthorizer = class SMSProviderAuthorizer {
    constructor(datasource){
        this.datasource = datasource;
    }
    async authorize(context, authorizerContext) {
        const operator = await this.datasource.getRepository(_database.OperatorEntity).findOne({
            where: {
                id: context.req.user.id
            },
            relations: {
                role: true
            }
        });
        if (authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.SMSProviders_View)) {
            throw new _common.UnauthorizedException();
        }
        if (!authorizerContext.readonly && !operator.role.permissions.includes(_database.OperatorPermission.SMSProviders_Edit)) {
            if (authorizerContext.operationGroup === 'create' || authorizerContext.operationGroup === 'update' || authorizerContext.operationGroup === 'delete') {
                throw new _common.UnauthorizedException();
            }
        }
        return undefined;
    }
};
SMSProviderAuthorizer = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.DataSource === "undefined" ? Object : _typeorm.DataSource
    ])
], SMSProviderAuthorizer);


/***/ }),
/* 271 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SMSDTO", ({
    enumerable: true,
    get: function() {
        return SMSDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
let SMSDTO = class SMSDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], SMSDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], SMSDTO.prototype, "countryIsoCode", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], SMSDTO.prototype, "to", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], SMSDTO.prototype, "from", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], SMSDTO.prototype, "message", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.SMSStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.SMSStatus === "undefined" ? Object : _database.SMSStatus)
], SMSDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.SMSType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.SMSType === "undefined" ? Object : _database.SMSType)
], SMSDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], SMSDTO.prototype, "providerId", void 0);
SMSDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('SMS')
], SMSDTO);


/***/ }),
/* 272 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SMSProviderService", ({
    enumerable: true,
    get: function() {
        return SMSProviderService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let SMSProviderService = class SMSProviderService {
    constructor(smsProviderRepository){
        this.smsProviderRepository = smsProviderRepository;
    }
    async markAsDefault(id) {
        await this.smsProviderRepository.update({}, {
            isDefault: false
        });
        await this.smsProviderRepository.update({
            id
        }, {
            isDefault: true
        });
        const provider = await this.smsProviderRepository.findOneBy({
            id
        });
        return provider;
    }
};
SMSProviderService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.SMSProviderEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], SMSProviderService);


/***/ }),
/* 273 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SMSProviderResolver", ({
    enumerable: true,
    get: function() {
        return SMSProviderResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _smsproviderservice = __webpack_require__(272);
const _smsproviderdto = __webpack_require__(269);
let SMSProviderResolver = class SMSProviderResolver {
    constructor(smsProviderService){
        this.smsProviderService = smsProviderService;
    }
    async markSMSProviderAsDefault(id) {
        return await this.smsProviderService.markAsDefault(id);
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_smsproviderdto.SMSProviderDTO),
    _ts_param._(0, (0, _graphql.Args)('id', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], SMSProviderResolver.prototype, "markSMSProviderAsDefault", null);
SMSProviderResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _smsproviderservice.SMSProviderService === "undefined" ? Object : _smsproviderservice.SMSProviderService
    ])
], SMSProviderResolver);


/***/ }),
/* 274 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SMSProviderInput", ({
    enumerable: true,
    get: function() {
        return SMSProviderInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let SMSProviderInput = class SMSProviderInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SMSProviderInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.SMSProviderType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.SMSProviderType === "undefined" ? Object : _database.SMSProviderType)
], SMSProviderInput.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], SMSProviderInput.prototype, "isDefault", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SMSProviderInput.prototype, "accountId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SMSProviderInput.prototype, "authToken", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SMSProviderInput.prototype, "fromNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SMSProviderInput.prototype, "verificationTemplate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], SMSProviderInput.prototype, "smsType", void 0);
SMSProviderInput = _ts_decorate._([
    (0, _graphql.InputType)()
], SMSProviderInput);


/***/ }),
/* 275 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "SMSProviderQueryService", ({
    enumerable: true,
    get: function() {
        return SMSProviderQueryService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _typeorm = __webpack_require__(14);
const _nestjsquerycore = __webpack_require__(37);
const _nestjsquerytypeorm = __webpack_require__(26);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let SMSProviderQueryService = class SMSProviderQueryService extends _nestjsquerytypeorm.TypeOrmQueryService {
    constructor(repo){
        super(repo);
        this.repo = repo;
    }
    async createOne(record) {
        const count = await this.repo.count();
        if (count === 0) {
            record.isDefault = true;
        }
        if (record.isDefault) {
            await this.repo.update({
                id: (0, _typeorm1.Not)(0)
            }, {
                isDefault: false
            });
        }
        return super.createOne(record);
    }
};
SMSProviderQueryService = _ts_decorate._([
    (0, _nestjsquerycore.QueryService)(_database.SMSProviderEntity),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.SMSProviderEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], SMSProviderQueryService);


/***/ }),
/* 276 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopModule", ({
    enumerable: true,
    get: function() {
        return ShopModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _database = __webpack_require__(15);
const _shopcategorydto = __webpack_require__(216);
const _jwtauthguard = __webpack_require__(29);
const _shopdto = __webpack_require__(203);
const _shopservice = __webpack_require__(277);
const _shopresolver = __webpack_require__(279);
const _typeorm = __webpack_require__(14);
const _shopitempresetdto = __webpack_require__(204);
const _itemcategorydto = __webpack_require__(205);
const _itemdto = __webpack_require__(206);
const _itemvariantdto = __webpack_require__(207);
const _itemoptiondto = __webpack_require__(208);
const _shopordercartdto = __webpack_require__(212);
const _shopordercartitemdto = __webpack_require__(215);
const _shoporderdto = __webpack_require__(213);
const _shopsupportrequestmodule = __webpack_require__(289);
const _createshopcategoryinput = __webpack_require__(297);
const _updateshopcategoryinput = __webpack_require__(298);
const _shopordernotedto = __webpack_require__(299);
const _createshopordernoteinput = __webpack_require__(301);
const _shoporderstatushistorydto = __webpack_require__(214);
const _shoptransactiondto = __webpack_require__(202);
const _shopwalletdto = __webpack_require__(218);
const _shopwalletservice = __webpack_require__(278);
const _createshoptransactioninput = __webpack_require__(302);
const _shopfeedbackmodule = __webpack_require__(303);
const _shoppayoutmodule = __webpack_require__(197);
const _shopinput = __webpack_require__(306);
const _shopnotedto = __webpack_require__(307);
const _createshopnoteinput = __webpack_require__(308);
const _shoploginsessiondto = __webpack_require__(309);
const _shoploginsessionservice = __webpack_require__(288);
const _shopdeliveryzonedto = __webpack_require__(310);
const _createshopdeliveryzoneinput = __webpack_require__(311);
const _updateshopdeliveryzoneinput = __webpack_require__(312);
const _createitemcategoryinput = __webpack_require__(313);
const _updateitemcategoryinput = __webpack_require__(314);
const _createshopitempresetinput = __webpack_require__(315);
const _updateshopitempresetinput = __webpack_require__(316);
let ShopModule = class ShopModule {
};
ShopModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _database.GoogleServicesModule,
            _shopsupportrequestmodule.ShopSupportRequestModule,
            _shopfeedbackmodule.ShopFeedbackModule,
            _database.SharedOrderModule,
            _database.SharedCustomerWalletModule,
            _shoppayoutmodule.ShopPayoutModule,
            _database.SharedShopModule,
            _typeorm.TypeOrmModule.forFeature([
                _database.RiderAddressEntity,
                _database.ServiceEntity,
                _database.CustomerEntity,
                _database.DriverEntity,
                _database.RiderWalletEntity,
                _database.RiderTransactionEntity
            ]),
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.ShopCategoryEntity,
                        _database.ShopEntity,
                        _database.ShopSessionEntity,
                        _database.ShopOrderCartEntity,
                        _database.ShopOrderCartProductEntity,
                        _database.ShopDeliveryZoneEntity,
                        _database.MediaEntity,
                        _database.ProductCategoryEntity,
                        _database.ProductEntity,
                        _database.ProductOptionEntity,
                        _database.ShopProductPresetEntity,
                        _database.ProductVariantEntity,
                        _database.ShopOrderEntity,
                        _database.ShopOrderCartEntity,
                        _database.ShopOrderNoteEntity,
                        _database.ShopNoteEntity,
                        _database.ShopOrderCartProductEntity,
                        _database.ShopWalletEntity,
                        _database.ShopOrderStatusHistoryEntity,
                        _database.ShopTransactionEntity,
                        _database.ShopLoginSessionEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.ShopCategoryEntity,
                        DTOClass: _shopcategorydto.ShopCategoryDTO,
                        CreateDTOClass: _createshopcategoryinput.CreateShopCategoryInput,
                        UpdateDTOClass: _updateshopcategoryinput.UpdateShopCategoryInput,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        }
                    },
                    {
                        EntityClass: _database.ShopEntity,
                        DTOClass: _shopdto.ShopDTO,
                        CreateDTOClass: _shopinput.UpsertShopInput,
                        UpdateDTOClass: _shopinput.UpsertShopInput,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        enableTotalCount: true,
                        enableAggregate: true
                    },
                    {
                        EntityClass: _database.ShopLoginSessionEntity,
                        DTOClass: _shoploginsessiondto.ShopLoginSessionDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE
                    },
                    {
                        EntityClass: _database.ShopOrderNoteEntity,
                        DTOClass: _shopordernotedto.ShopOrderNoteDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        CreateDTOClass: _createshopordernoteinput.CreateShopOrderNoteInput,
                        UpdateDTOClass: _createshopordernoteinput.CreateShopOrderNoteInput,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.ShopNoteEntity,
                        DTOClass: _shopnotedto.ShopNoteDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        CreateDTOClass: _createshopnoteinput.CreateShopNoteInput,
                        UpdateDTOClass: _createshopnoteinput.CreateShopNoteInput,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.ShopProductPresetEntity,
                        DTOClass: _shopitempresetdto.ShopItemPresetDTO,
                        CreateDTOClass: _createshopitempresetinput.CreateShopItemPresetInput,
                        UpdateDTOClass: _updateshopitempresetinput.UpdateShopItemPresetInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    },
                    {
                        EntityClass: _database.ProductCategoryEntity,
                        DTOClass: _itemcategorydto.ItemCategoryDTO,
                        CreateDTOClass: _createitemcategoryinput.CreateItemCategoryInput,
                        UpdateDTOClass: _updateitemcategoryinput.UpdateItemCategoryInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    },
                    {
                        EntityClass: _database.ShopOrderStatusHistoryEntity,
                        DTOClass: _shoporderstatushistorydto.ShopOrderStatusHistoryDTO,
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE
                    },
                    {
                        EntityClass: _database.ProductEntity,
                        DTOClass: _itemdto.ItemDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    },
                    {
                        EntityClass: _database.ProductVariantEntity,
                        DTOClass: _itemvariantdto.ItemVariantDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET
                    },
                    {
                        EntityClass: _database.ShopTransactionEntity,
                        DTOClass: _shoptransactiondto.ShopTransactionDTO,
                        CreateDTOClass: _createshoptransactioninput.CreateShopTransactionInput,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    },
                    {
                        EntityClass: _database.ShopDeliveryZoneEntity,
                        DTOClass: _shopdeliveryzonedto.ShopDeliveryZoneDTO,
                        CreateDTOClass: _createshopdeliveryzoneinput.CreateShopDeliveryZoneInput,
                        UpdateDTOClass: _updateshopdeliveryzoneinput.UpdateShopDeliveryZoneInput,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    },
                    {
                        EntityClass: _database.ProductOptionEntity,
                        DTOClass: _itemoptiondto.ItemOptionDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET
                    },
                    {
                        EntityClass: _database.ShopOrderEntity,
                        DTOClass: _shoporderdto.ShopOrderDTO,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableAggregate: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        enableTotalCount: true,
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.ShopWalletEntity,
                        DTOClass: _shopwalletdto.ShopWalletDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        enableAggregate: true,
                        create: {
                            disabled: true
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.ShopOrderCartEntity,
                        DTOClass: _shopordercartdto.ShopOrderCartDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET
                    },
                    {
                        EntityClass: _database.ShopOrderCartProductEntity,
                        DTOClass: _shopordercartitemdto.ShopOrderCartItemDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET
                    }
                ]
            })
        ],
        providers: [
            _shopservice.ShopService,
            _shopresolver.ShopResolver,
            _database.ServiceService,
            _shopwalletservice.ShopWalletService,
            _database.SharedRiderService,
            _shoploginsessionservice.ShopLoginSessionService
        ]
    })
], ShopModule);


/***/ }),
/* 277 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopService", ({
    enumerable: true,
    get: function() {
        return ShopService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
const _shopwalletservice = __webpack_require__(278);
let ShopService = class ShopService {
    constructor(shopWalletService, sharedCustomerWalletService, shopRepository, shopCategoryRepository, shopDeliveryZoneRepository, riderAddressRepository, itemCategoryRepository, shopProductPresetRepository, shopOrderCartRepository, shopOrderCartProductRepository, itemVariantRepository, itemOptionRepository, shopOrderRepository, deliveryFeeService){
        this.shopWalletService = shopWalletService;
        this.sharedCustomerWalletService = sharedCustomerWalletService;
        this.shopRepository = shopRepository;
        this.shopCategoryRepository = shopCategoryRepository;
        this.shopDeliveryZoneRepository = shopDeliveryZoneRepository;
        this.riderAddressRepository = riderAddressRepository;
        this.itemCategoryRepository = itemCategoryRepository;
        this.shopProductPresetRepository = shopProductPresetRepository;
        this.shopOrderCartRepository = shopOrderCartRepository;
        this.shopOrderCartProductRepository = shopOrderCartProductRepository;
        this.itemVariantRepository = itemVariantRepository;
        this.itemOptionRepository = itemOptionRepository;
        this.shopOrderRepository = shopOrderRepository;
        this.deliveryFeeService = deliveryFeeService;
    }
    async getShopCategories() {
        return this.shopCategoryRepository.find({
            where: {
                status: _database.ShopCategoryStatus.Enabled
            }
        });
    }
    async getShops(input) {
        const address = await this.riderAddressRepository.findOneByOrFail({
            id: input.addressId
        });
        const regionQuery = this.shopDeliveryZoneRepository.createQueryBuilder('deliveryZone');
        // find delivery regions that are within the address
        regionQuery.where(`ST_Within(st_geomfromtext('POINT(:lat :lng)'), deliveryZone.region)`, {
            lat: address.location.lat,
            lng: address.location.lng
        });
        const regions = await regionQuery.getMany();
        const regionIds = regions.map((region)=>region.id);
        const query = this.shopRepository.createQueryBuilder('shop');
        query.leftJoinAndSelect('shop.deliveryZones', 'deliveryZone');
        query.leftJoinAndSelect('shop.reviews', 'reviews');
        query.leftJoinAndSelect('shop.image', 'image');
        // search where shop is in the category
        if (input.categoryId) {
            query.where('category.id = :categoryId', {
                categoryId: input.categoryId
            });
        }
        // search where delivery region is within the address
        query.where('deliveryZone.id IN (:...regionIds)', {
            regionIds
        });
        // If input.query is not empty, search where shop name contains input.query
        if (input.query) {
            query.where('shop.name LIKE :query', {
                query: `%${input.query}%`
            });
        }
        const shops = await query.getMany();
        return shops.map((shop)=>{
            // find the first delivery region that is within the address
            const deliveryZone = shop.deliveryZones?.find((region)=>regionIds.includes(region.id));
            return {
                ...shop,
                deliveryFee: deliveryZone?.deliveryFee ?? 0,
                minimumOrderAmount: deliveryZone?.minimumOrderAmount ?? 0,
                minDeliveryTime: deliveryZone?.minDeliveryTimeMinutes ?? 0,
                maxDeliveryTime: deliveryZone?.maxDeliveryTimeMinutes ?? 0,
                rating: shop.feedbacks?.reduce((acc, review)=>acc + review.score, 0) ?? 0
            };
        });
    }
    async getItemCategories(input) {
        const queryPreset = this.shopProductPresetRepository.createQueryBuilder('preset');
        // search where present belongs to the shop and is within the time
        queryPreset.where('preset.shopId = :shopId', {
            shopId: input.shopId
        });
        queryPreset.andWhere(`:timeOfDay BETWEEN preset.timeOfDayStart AND preset.timeOfDayEnd`, {
            timeOfDay: input.timeOfDay
        });
        const presets = await queryPreset.getMany();
        const presetIds = presets.map((preset)=>preset.id);
        const queryItemCategory = this.itemCategoryRepository.createQueryBuilder('itemCategory');
        queryItemCategory.leftJoinAndSelect('itemCategory.items', 'item');
        // search where the item belongs to the preset
        queryItemCategory.where('item.presetId IN (:...presetIds)', {
            presetIds
        });
        const itemCategories = await queryItemCategory.getMany();
        return itemCategories;
    }
    async createOrder(input) {
        let shopOrder = new _database.ShopOrderEntity();
        shopOrder.deliveryAddressId = input.deliveryAddressId;
        shopOrder.deliveryMethod = input.deliveryMethod;
        for (const cart of input.carts){
            const shopOrderCart = new _database.ShopOrderCartEntity();
            shopOrderCart.shopId = cart.shopId;
            shopOrderCart.orderId = shopOrder.id;
            let cartSubtotal = 0;
            for (const item of cart.items){
                const variant = await this.itemVariantRepository.findOneOrFail({
                    where: {
                        id: item.itemVariantId
                    }
                });
                const options = await this.itemOptionRepository.find({
                    where: {
                        id: (0, _typeorm1.In)(item.itemOptionIds)
                    }
                });
                cartSubtotal += variant?.basePrice ?? 0;
                cartSubtotal += options.reduce((acc, option)=>acc + option.price, 0);
                const shopOrderCartItem = new _database.ShopOrderCartProductEntity();
                shopOrderCartItem.productVariantId = variant.id;
                shopOrderCartItem.quantity = item.quantity;
                shopOrderCartItem.options = options;
                shopOrderCart.products.push(shopOrderCartItem);
            }
            shopOrderCart.subtotal = cartSubtotal;
            shopOrder.carts?.push(shopOrderCart);
            shopOrder.subTotal += cartSubtotal;
        }
        shopOrder = await this.shopOrderRepository.save(shopOrder);
        return shopOrder;
    }
    async calculateDeliveryFee(input) {
        return this.deliveryFeeService.calculateDeliveryFee({
            shopIds: input.carts.map((cart)=>cart.shopId),
            deliveryAddressId: input.deliveryAddressId,
            totalItems: input.carts.reduce((acc, cart)=>acc + cart.items.length, 0),
            produtIds: input.carts.reduce((acc, cart)=>acc.concat(cart.items.map((item)=>item.productId)), [])
        });
    }
    async cancelShopOrderCarts(input) {
        const carts = await this.shopOrderCartRepository.find({
            where: {
                id: (0, _typeorm1.In)(input.cartIds)
            }
        });
        const order = await this.shopOrderRepository.findOneOrFail({
            where: {
                id: carts[0].orderId
            }
        });
        for (const cart of carts){
            cart.status = _database.CartStatus.CanceledByShop;
            await this.shopWalletService.recordTransaction({
                status: _database.TransactionStatus.Done,
                shopId: cart.shopId,
                currency: order.currency,
                amount: cart.subtotal,
                transactionDate: new Date(),
                type: _database.TransactionType.Debit,
                debitType: _database.ShopTransactionDebitType.Refund,
                shopOrderCartId: cart.id
            });
            await this.sharedCustomerWalletService.rechargeWallet({
                status: _database.TransactionStatus.Done,
                currency: order.currency,
                amount: cart.subtotal,
                action: _database.TransactionAction.Recharge,
                rechargeType: _database.RiderRechargeTransactionType.Correction,
                riderId: order.customerId
            });
        }
        await this.shopOrderCartRepository.save(carts);
    }
    async removeItemFromCart(input) {
        const cart = await this.shopOrderCartRepository.findOneOrFail({
            where: {
                id: input.cartId
            },
            relations: {
                products: true,
                order: true
            }
        });
        let refundable = 0;
        input.cancelables.forEach(async (cancelable)=>{
            const cartItem = await this.shopOrderCartProductRepository.findOne({
                where: {
                    id: cancelable.shopOrderCartItemId
                }
            });
            this.shopOrderCartProductRepository.update(cancelable.shopOrderCartItemId, {
                canceledQuantity: cancelable.cancelQuantity
            });
            refundable += cancelable.cancelQuantity * (cartItem?.priceEach ?? 0);
        });
        cart.subtotal -= refundable;
        await this.shopWalletService.recordTransaction({
            status: _database.TransactionStatus.Done,
            shopId: cart.shopId,
            currency: cart.order.currency,
            amount: refundable,
            transactionDate: new Date(),
            type: _database.TransactionType.Debit,
            debitType: _database.ShopTransactionDebitType.Refund,
            shopOrderCartId: cart.id
        });
        await this.sharedCustomerWalletService.rechargeWallet({
            status: _database.TransactionStatus.Done,
            currency: cart.order.currency,
            amount: refundable,
            action: _database.TransactionAction.Recharge,
            rechargeType: _database.RiderRechargeTransactionType.Correction,
            riderId: cart.order.customerId
        });
        await this.shopOrderCartRepository.save(cart);
    }
};
ShopService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(2, (0, _typeorm.InjectRepository)(_database.ShopEntity)),
    _ts_param._(3, (0, _typeorm.InjectRepository)(_database.ShopCategoryEntity)),
    _ts_param._(4, (0, _typeorm.InjectRepository)(_database.ShopDeliveryZoneEntity)),
    _ts_param._(5, (0, _typeorm.InjectRepository)(_database.RiderAddressEntity)),
    _ts_param._(6, (0, _typeorm.InjectRepository)(_database.ProductCategoryEntity)),
    _ts_param._(7, (0, _typeorm.InjectRepository)(_database.ShopProductPresetEntity)),
    _ts_param._(8, (0, _typeorm.InjectRepository)(_database.ShopOrderCartEntity)),
    _ts_param._(9, (0, _typeorm.InjectRepository)(_database.ShopOrderCartProductEntity)),
    _ts_param._(10, (0, _typeorm.InjectRepository)(_database.ProductVariantEntity)),
    _ts_param._(11, (0, _typeorm.InjectRepository)(_database.ProductOptionEntity)),
    _ts_param._(12, (0, _typeorm.InjectRepository)(_database.ShopOrderEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _shopwalletservice.ShopWalletService === "undefined" ? Object : _shopwalletservice.ShopWalletService,
        typeof _database.SharedCustomerWalletService === "undefined" ? Object : _database.SharedCustomerWalletService,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _database.DeliveryFeeService === "undefined" ? Object : _database.DeliveryFeeService
    ])
], ShopService);


/***/ }),
/* 278 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopWalletService", ({
    enumerable: true,
    get: function() {
        return ShopWalletService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let ShopWalletService = class ShopWalletService {
    constructor(shopWalletRepository, shopTransactionEntity){
        this.shopWalletRepository = shopWalletRepository;
        this.shopTransactionEntity = shopTransactionEntity;
    }
    async getShopWalletsByShopId(shopId) {
        return this.shopWalletRepository.find({
            where: {
                shopId
            }
        });
    }
    async getShopWalletByShopIdAndCurrency(shopId, currency) {
        return this.shopWalletRepository.findOne({
            where: {
                shopId,
                currency
            }
        });
    }
    async recordTransaction(transaction) {
        await this.shopWalletRepository.increment({
            shopId: transaction.shopId,
            currency: transaction.currency
        }, 'balance', transaction.amount);
        return this.shopTransactionEntity.save(transaction);
    }
};
ShopWalletService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ShopWalletEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.ShopTransactionEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], ShopWalletService);


/***/ }),
/* 279 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopResolver", ({
    enumerable: true,
    get: function() {
        return ShopResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _shopservice = __webpack_require__(277);
const _shopfiltersinput = __webpack_require__(280);
const _dispatchershopdto = __webpack_require__(281);
const _itemcategorydto = __webpack_require__(205);
const _itemcategoryfiltersinput = __webpack_require__(282);
const _shoporderdto = __webpack_require__(213);
const _shoporderinput = __webpack_require__(283);
const _calculatedeliveryfeedto = __webpack_require__(284);
const _calculatedeliveryfeeinput = __webpack_require__(285);
const _cancelshopordercartsinput = __webpack_require__(286);
const _removeitemfromcartinput = __webpack_require__(287);
const _apollo = __webpack_require__(3);
const _shoploginsessionservice = __webpack_require__(288);
let ShopResolver = class ShopResolver {
    constructor(shopService, shopLoginSessionService){
        this.shopService = shopService;
        this.shopLoginSessionService = shopLoginSessionService;
    }
    //   @Query(() => [ShopCategoryDTO])
    //   async shopCategories() {
    //     return this.shopService.getShopCategories();
    //   }
    async dispatcherShops(input) {
        return this.shopService.getShops(input);
    }
    async itemCategories(input) {
        return this.shopService.getItemCategories(input);
    }
    async calculateDeliveryFee(input) {
        return this.shopService.calculateDeliveryFee(input);
    }
    async createOrder(input) {
        return this.shopService.createOrder(input);
    }
    async cancelShopOrderCarts(input) {
        return this.shopService.cancelShopOrderCarts(input);
    }
    async removeItemFromCart(input) {
        return this.shopService.removeItemFromCart(input);
    }
    async terminateShopLoginSession(sessionId) {
        if (process.env.DEMO_MODE != null) {
            throw new _apollo.ForbiddenError('Action not allowed in demo mode.');
        }
        const result = await this.shopLoginSessionService.terminateLoginSession(sessionId);
        return result.affected > 0;
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _dispatchershopdto.DispatcherShopDTO
        ]),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_shopfiltersinput.ShopFiltersInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _shopfiltersinput.ShopFiltersInput === "undefined" ? Object : _shopfiltersinput.ShopFiltersInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopResolver.prototype, "dispatcherShops", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _itemcategorydto.ItemCategoryDTO
        ]),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_itemcategoryfiltersinput.ItemCategoryFiltersInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _itemcategoryfiltersinput.ItemCategoryFiltersInput === "undefined" ? Object : _itemcategoryfiltersinput.ItemCategoryFiltersInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopResolver.prototype, "itemCategories", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>_calculatedeliveryfeedto.CalculateDeliveryFeeDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_calculatedeliveryfeeinput.CalculateDeliveryFeeInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _calculatedeliveryfeeinput.CalculateDeliveryFeeInput === "undefined" ? Object : _calculatedeliveryfeeinput.CalculateDeliveryFeeInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopResolver.prototype, "calculateDeliveryFee", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_shoporderdto.ShopOrderDTO, {
        name: 'createShopOrder'
    }),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_shoporderinput.ShopOrderInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _shoporderinput.ShopOrderInput === "undefined" ? Object : _shoporderinput.ShopOrderInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopResolver.prototype, "createOrder", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_shoporderdto.ShopOrderDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_cancelshopordercartsinput.CancelShopOrderCartsInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _cancelshopordercartsinput.CancelShopOrderCartsInput === "undefined" ? Object : _cancelshopordercartsinput.CancelShopOrderCartsInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopResolver.prototype, "cancelShopOrderCarts", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_shoporderdto.ShopOrderDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_removeitemfromcartinput.RemoveItemFromCartInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _removeitemfromcartinput.RemoveItemFromCartInput === "undefined" ? Object : _removeitemfromcartinput.RemoveItemFromCartInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopResolver.prototype, "removeItemFromCart", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>Boolean),
    _ts_param._(0, (0, _graphql.Args)('sessionId', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopResolver.prototype, "terminateShopLoginSession", null);
ShopResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _shopservice.ShopService === "undefined" ? Object : _shopservice.ShopService,
        typeof _shoploginsessionservice.ShopLoginSessionService === "undefined" ? Object : _shoploginsessionservice.ShopLoginSessionService
    ])
], ShopResolver);


/***/ }),
/* 280 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopFiltersInput", ({
    enumerable: true,
    get: function() {
        return ShopFiltersInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let ShopFiltersInput = class ShopFiltersInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopFiltersInput.prototype, "categoryId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopFiltersInput.prototype, "addressId", void 0);
_ts_decorate._([
    (0, _graphql.Field)({
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ShopFiltersInput.prototype, "query", void 0);
ShopFiltersInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ShopFiltersInput);


/***/ }),
/* 281 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DispatcherShopDTO", ({
    enumerable: true,
    get: function() {
        return DispatcherShopDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _shopdto = __webpack_require__(203);
let DispatcherShopDTO = class DispatcherShopDTO extends _shopdto.ShopDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], DispatcherShopDTO.prototype, "deliveryFee", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], DispatcherShopDTO.prototype, "minDeliveryTime", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], DispatcherShopDTO.prototype, "maxDeliveryTime", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], DispatcherShopDTO.prototype, "minimumOrderAmount", void 0);
DispatcherShopDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('DispatcherShop')
], DispatcherShopDTO);


/***/ }),
/* 282 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ItemCategoryFiltersInput", ({
    enumerable: true,
    get: function() {
        return ItemCategoryFiltersInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let ItemCategoryFiltersInput = class ItemCategoryFiltersInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ItemCategoryFiltersInput.prototype, "shopId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ItemCategoryFiltersInput.prototype, "timeOfDay", void 0);
ItemCategoryFiltersInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ItemCategoryFiltersInput);


/***/ }),
/* 283 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    ShopOrderCartInput: function() {
        return ShopOrderCartInput;
    },
    ShopOrderCartItemInput: function() {
        return ShopOrderCartItemInput;
    },
    ShopOrderInput: function() {
        return ShopOrderInput;
    }
});
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let ShopOrderInput = class ShopOrderInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.DeliveryMethod),
    _ts_metadata._("design:type", typeof _database.DeliveryMethod === "undefined" ? Object : _database.DeliveryMethod)
], ShopOrderInput.prototype, "deliveryMethod", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopOrderInput.prototype, "deliveryAddressId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            ShopOrderCartInput
        ]),
    _ts_metadata._("design:type", Array)
], ShopOrderInput.prototype, "carts", void 0);
ShopOrderInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ShopOrderInput);
let ShopOrderCartInput = class ShopOrderCartInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopOrderCartInput.prototype, "shopId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            ShopOrderCartItemInput
        ]),
    _ts_metadata._("design:type", Array)
], ShopOrderCartInput.prototype, "items", void 0);
ShopOrderCartInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ShopOrderCartInput);
let ShopOrderCartItemInput = class ShopOrderCartItemInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopOrderCartItemInput.prototype, "productId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopOrderCartItemInput.prototype, "itemVariantId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _graphql.ID
        ]),
    _ts_metadata._("design:type", Array)
], ShopOrderCartItemInput.prototype, "itemOptionIds", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], ShopOrderCartItemInput.prototype, "quantity", void 0);
ShopOrderCartItemInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ShopOrderCartItemInput);


/***/ }),
/* 284 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CalculateDeliveryFeeDTO", ({
    enumerable: true,
    get: function() {
        return CalculateDeliveryFeeDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CalculateDeliveryFeeDTO = class CalculateDeliveryFeeDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], CalculateDeliveryFeeDTO.prototype, "batchDeliveryFee", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CalculateDeliveryFeeDTO.prototype, "batchDeliveryDuration", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], CalculateDeliveryFeeDTO.prototype, "splitDeliveryFee", void 0);
CalculateDeliveryFeeDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('CalculateDeliveryFee')
], CalculateDeliveryFeeDTO);


/***/ }),
/* 285 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CalculateDeliveryFeeInput", ({
    enumerable: true,
    get: function() {
        return CalculateDeliveryFeeInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _shoporderinput = __webpack_require__(283);
let CalculateDeliveryFeeInput = class CalculateDeliveryFeeInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _shoporderinput.ShopOrderCartInput
        ]),
    _ts_metadata._("design:type", Array)
], CalculateDeliveryFeeInput.prototype, "carts", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CalculateDeliveryFeeInput.prototype, "deliveryAddressId", void 0);
CalculateDeliveryFeeInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CalculateDeliveryFeeInput);


/***/ }),
/* 286 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CancelShopOrderCartsInput", ({
    enumerable: true,
    get: function() {
        return CancelShopOrderCartsInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CancelShopOrderCartsInput = class CancelShopOrderCartsInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _graphql.ID
        ]),
    _ts_metadata._("design:type", Array)
], CancelShopOrderCartsInput.prototype, "cartIds", void 0);
CancelShopOrderCartsInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CancelShopOrderCartsInput);


/***/ }),
/* 287 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    RemoveItemFromCartInput: function() {
        return RemoveItemFromCartInput;
    },
    RemoveItemFromCartItemQuantityPair: function() {
        return RemoveItemFromCartItemQuantityPair;
    }
});
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let RemoveItemFromCartInput = class RemoveItemFromCartInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RemoveItemFromCartInput.prototype, "cartId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            RemoveItemFromCartItemQuantityPair
        ]),
    _ts_metadata._("design:type", Array)
], RemoveItemFromCartInput.prototype, "cancelables", void 0);
RemoveItemFromCartInput = _ts_decorate._([
    (0, _graphql.InputType)()
], RemoveItemFromCartInput);
let RemoveItemFromCartItemQuantityPair = class RemoveItemFromCartItemQuantityPair {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], RemoveItemFromCartItemQuantityPair.prototype, "shopOrderCartItemId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], RemoveItemFromCartItemQuantityPair.prototype, "cancelQuantity", void 0);
RemoveItemFromCartItemQuantityPair = _ts_decorate._([
    (0, _graphql.InputType)()
], RemoveItemFromCartItemQuantityPair);


/***/ }),
/* 288 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopLoginSessionService", ({
    enumerable: true,
    get: function() {
        return ShopLoginSessionService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let ShopLoginSessionService = class ShopLoginSessionService {
    constructor(shopLoginSessionRepository){
        this.shopLoginSessionRepository = shopLoginSessionRepository;
    }
    async terminateLoginSession(id) {
        return this.shopLoginSessionRepository.delete(id);
    }
};
ShopLoginSessionService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ShopLoginSessionEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], ShopLoginSessionService);


/***/ }),
/* 289 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopSupportRequestModule", ({
    enumerable: true,
    get: function() {
        return ShopSupportRequestModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _shopsupportrequestdto = __webpack_require__(290);
const _shopsupportrequestactivitydto = __webpack_require__(291);
const _shopsupportrequestservice = __webpack_require__(292);
const _shopsupportrequestresolver = __webpack_require__(293);
let ShopSupportRequestModule = class ShopSupportRequestModule {
};
ShopSupportRequestModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.ShopSupportRequestEntity,
                        _database.ShopSupportRequestActivityEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.ShopSupportRequestEntity,
                        DTOClass: _shopsupportrequestdto.ShopSupportRequestDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        enableAggregate: true,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.ShopSupportRequestActivityEntity,
                        DTOClass: _shopsupportrequestactivitydto.ShopSupportRequestActivityDTO,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    }
                ]
            })
        ],
        providers: [
            _shopsupportrequestservice.ShopSupportRequestService,
            _shopsupportrequestresolver.ShopSupportRequestResolver
        ]
    })
], ShopSupportRequestModule);


/***/ }),
/* 290 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopSupportRequestDTO", ({
    enumerable: true,
    get: function() {
        return ShopSupportRequestDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _shoporderdto = __webpack_require__(213);
const _operatordto = __webpack_require__(65);
const _database = __webpack_require__(15);
const _shopsupportrequestactivitydto = __webpack_require__(291);
const _shopordercartdto = __webpack_require__(212);
let ShopSupportRequestDTO = class ShopSupportRequestDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopSupportRequestDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopSupportRequestDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>Boolean),
    _ts_metadata._("design:type", Boolean)
], ShopSupportRequestDTO.prototype, "requestedByShop", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ShopSupportRequestDTO.prototype, "subject", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ShopSupportRequestDTO.prototype, "content", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ComplaintStatus),
    _ts_metadata._("design:type", typeof _database.ComplaintStatus === "undefined" ? Object : _database.ComplaintStatus)
], ShopSupportRequestDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {}),
    _ts_metadata._("design:type", Number)
], ShopSupportRequestDTO.prototype, "orderId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ShopSupportRequestDTO.prototype, "cartId", void 0);
ShopSupportRequestDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopSupportRequest'),
    (0, _nestjsquerygraphql.FilterableRelation)('order', ()=>_shoporderdto.ShopOrderDTO),
    (0, _nestjsquerygraphql.Relation)('cart', ()=>_shopordercartdto.ShopOrderCartDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('assignedToStaffs', ()=>_operatordto.OperatorDTO, {
        disableFilter: true,
        disableSort: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('activities', ()=>_shopsupportrequestactivitydto.ShopSupportRequestActivityDTO)
], ShopSupportRequestDTO);


/***/ }),
/* 291 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopSupportRequestActivityDTO", ({
    enumerable: true,
    get: function() {
        return ShopSupportRequestActivityDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _operatordto = __webpack_require__(65);
let ShopSupportRequestActivityDTO = class ShopSupportRequestActivityDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopSupportRequestActivityDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopSupportRequestActivityDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ComplaintActivityType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ComplaintActivityType === "undefined" ? Object : _database.ComplaintActivityType)
], ShopSupportRequestActivityDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ShopSupportRequestActivityDTO.prototype, "comment", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ComplaintStatus, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ComplaintStatus === "undefined" ? Object : _database.ComplaintStatus)
], ShopSupportRequestActivityDTO.prototype, "statusFrom", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ComplaintStatus, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ComplaintStatus === "undefined" ? Object : _database.ComplaintStatus)
], ShopSupportRequestActivityDTO.prototype, "statusTo", void 0);
ShopSupportRequestActivityDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopSupportRequestActivity'),
    (0, _nestjsquerygraphql.Relation)('actor', ()=>_operatordto.OperatorDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('assignedToStaffs', ()=>_operatordto.OperatorDTO, {
        disableFilter: true,
        disableSort: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('unassignedFromStaffs', ()=>_operatordto.OperatorDTO, {
        disableFilter: true,
        disableSort: true
    })
], ShopSupportRequestActivityDTO);


/***/ }),
/* 292 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopSupportRequestService", ({
    enumerable: true,
    get: function() {
        return ShopSupportRequestService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let ShopSupportRequestService = class ShopSupportRequestService {
    constructor(shopSupportRequestRepository, shopSupportRequestActivityRepository){
        this.shopSupportRequestRepository = shopSupportRequestRepository;
        this.shopSupportRequestActivityRepository = shopSupportRequestActivityRepository;
    }
    async addCommentToShopSupportRequest(input) {
        const activity = this.shopSupportRequestActivityRepository.create();
        activity.actorId = input.staffId;
        activity.comment = input.input.comment;
        activity.supportRequestId = input.input.supportRequestId;
        activity.type = _database.ComplaintActivityType.Comment;
        return this.shopSupportRequestActivityRepository.save(activity);
    }
    async assignShopSupportRequestToStaff(input) {
        const activity = this.shopSupportRequestActivityRepository.create();
        activity.actorId = input.staffId;
        activity.assignedToStaffs = input.input.staffIds.map((id)=>({
                id
            }));
        activity.supportRequestId = input.input.supportRequestId;
        activity.type = _database.ComplaintActivityType.AssignToOperator;
        return this.shopSupportRequestActivityRepository.save(activity);
    }
    async changeShopSupportRequestStatus(input) {
        const supportRequest = await this.shopSupportRequestRepository.findOneBy({
            id: input.input.supportRequestId
        });
        const activity = this.shopSupportRequestActivityRepository.create();
        activity.actorId = input.staffId;
        activity.supportRequestId = input.input.supportRequestId;
        activity.type = _database.ComplaintActivityType.StatusChange;
        activity.statusFrom = supportRequest.status;
        activity.statusTo = input.input.status;
        return this.shopSupportRequestActivityRepository.save(activity);
    }
};
ShopSupportRequestService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ShopSupportRequestEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.ShopSupportRequestActivityEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], ShopSupportRequestService);


/***/ }),
/* 293 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopSupportRequestResolver", ({
    enumerable: true,
    get: function() {
        return ShopSupportRequestResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _shopsupportrequestservice = __webpack_require__(292);
const _common = __webpack_require__(7);
const _shopsupportrequestactivitydto = __webpack_require__(291);
const _createshopsupportrequestcommentinput = __webpack_require__(294);
const _assignshopsupportrequestinput = __webpack_require__(295);
const _changeshopsupportrequeststatusinput = __webpack_require__(296);
const _jwtauthguard = __webpack_require__(29);
let ShopSupportRequestResolver = class ShopSupportRequestResolver {
    constructor(shopSupportRequestService, context){
        this.shopSupportRequestService = shopSupportRequestService;
        this.context = context;
    }
    async addCommentToShopSupportRequest(input) {
        return this.shopSupportRequestService.addCommentToShopSupportRequest({
            staffId: this.context.req.user.id,
            input
        });
    }
    async assignShopSupportRequestToStaff(input) {
        return this.shopSupportRequestService.assignShopSupportRequestToStaff({
            staffId: this.context.req.user.id,
            input
        });
    }
    async changeShopSupportRequestStatus(input) {
        return this.shopSupportRequestService.changeShopSupportRequestStatus({
            staffId: this.context.req.user.id,
            input
        });
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_shopsupportrequestactivitydto.ShopSupportRequestActivityDTO),
    _ts_param._(0, (0, _graphql.Args)('input')),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _createshopsupportrequestcommentinput.CreateShopSupportRequestCommentInput === "undefined" ? Object : _createshopsupportrequestcommentinput.CreateShopSupportRequestCommentInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopSupportRequestResolver.prototype, "addCommentToShopSupportRequest", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_shopsupportrequestactivitydto.ShopSupportRequestActivityDTO),
    _ts_param._(0, (0, _graphql.Args)('input')),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _assignshopsupportrequestinput.AssignShopSupportRequestInput === "undefined" ? Object : _assignshopsupportrequestinput.AssignShopSupportRequestInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopSupportRequestResolver.prototype, "assignShopSupportRequestToStaff", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_shopsupportrequestactivitydto.ShopSupportRequestActivityDTO),
    _ts_param._(0, (0, _graphql.Args)('input')),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _changeshopsupportrequeststatusinput.ChangeShopSupportRequestStatusInput === "undefined" ? Object : _changeshopsupportrequeststatusinput.ChangeShopSupportRequestStatusInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopSupportRequestResolver.prototype, "changeShopSupportRequestStatus", null);
ShopSupportRequestResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(1, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _shopsupportrequestservice.ShopSupportRequestService === "undefined" ? Object : _shopsupportrequestservice.ShopSupportRequestService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], ShopSupportRequestResolver);


/***/ }),
/* 294 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateShopSupportRequestCommentInput", ({
    enumerable: true,
    get: function() {
        return CreateShopSupportRequestCommentInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CreateShopSupportRequestCommentInput = class CreateShopSupportRequestCommentInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateShopSupportRequestCommentInput.prototype, "supportRequestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateShopSupportRequestCommentInput.prototype, "comment", void 0);
CreateShopSupportRequestCommentInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateShopSupportRequestCommentInput);


/***/ }),
/* 295 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AssignShopSupportRequestInput", ({
    enumerable: true,
    get: function() {
        return AssignShopSupportRequestInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let AssignShopSupportRequestInput = class AssignShopSupportRequestInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], AssignShopSupportRequestInput.prototype, "supportRequestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _graphql.ID
        ]),
    _ts_metadata._("design:type", Array)
], AssignShopSupportRequestInput.prototype, "staffIds", void 0);
AssignShopSupportRequestInput = _ts_decorate._([
    (0, _graphql.InputType)()
], AssignShopSupportRequestInput);


/***/ }),
/* 296 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ChangeShopSupportRequestStatusInput", ({
    enumerable: true,
    get: function() {
        return ChangeShopSupportRequestStatusInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let ChangeShopSupportRequestStatusInput = class ChangeShopSupportRequestStatusInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ChangeShopSupportRequestStatusInput.prototype, "supportRequestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ComplaintStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ComplaintStatus === "undefined" ? Object : _database.ComplaintStatus)
], ChangeShopSupportRequestStatusInput.prototype, "status", void 0);
ChangeShopSupportRequestStatusInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ChangeShopSupportRequestStatusInput);


/***/ }),
/* 297 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateShopCategoryInput", ({
    enumerable: true,
    get: function() {
        return CreateShopCategoryInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CreateShopCategoryInput = class CreateShopCategoryInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateShopCategoryInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateShopCategoryInput.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateShopCategoryInput.prototype, "imageId", void 0);
CreateShopCategoryInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateShopCategoryInput);


/***/ }),
/* 298 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateShopCategoryInput", ({
    enumerable: true,
    get: function() {
        return UpdateShopCategoryInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let UpdateShopCategoryInput = class UpdateShopCategoryInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateShopCategoryInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateShopCategoryInput.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateShopCategoryInput.prototype, "imageId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ShopCategoryStatus, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ShopCategoryStatus === "undefined" ? Object : _database.ShopCategoryStatus)
], UpdateShopCategoryInput.prototype, "status", void 0);
UpdateShopCategoryInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateShopCategoryInput);


/***/ }),
/* 299 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopOrderNoteDTO", ({
    enumerable: true,
    get: function() {
        return ShopOrderNoteDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _shoporderdto = __webpack_require__(213);
const _notedto = __webpack_require__(300);
const _operatordto = __webpack_require__(65);
let ShopOrderNoteDTO = class ShopOrderNoteDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopOrderNoteDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_notedto.NoteDTO),
    _ts_metadata._("design:type", typeof _notedto.NoteDTO === "undefined" ? Object : _notedto.NoteDTO)
], ShopOrderNoteDTO.prototype, "note", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        filterRequired: true
    }),
    _ts_metadata._("design:type", Number)
], ShopOrderNoteDTO.prototype, "orderId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopOrderNoteDTO.prototype, "staffId", void 0);
ShopOrderNoteDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopOrderNote'),
    (0, _nestjsquerygraphql.Relation)('order', ()=>_shoporderdto.ShopOrderDTO),
    (0, _nestjsquerygraphql.Relation)('staff', ()=>_operatordto.OperatorDTO)
], ShopOrderNoteDTO);


/***/ }),
/* 300 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "NoteDTO", ({
    enumerable: true,
    get: function() {
        return NoteDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _operatordto = __webpack_require__(65);
let NoteDTO = class NoteDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], NoteDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], NoteDTO.prototype, "note", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], NoteDTO.prototype, "staffId", void 0);
NoteDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('Note'),
    (0, _graphql.InputType)('NoteInput'),
    (0, _nestjsquerygraphql.Relation)('staff', ()=>_operatordto.OperatorDTO)
], NoteDTO);


/***/ }),
/* 301 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateShopOrderNoteInput", ({
    enumerable: true,
    get: function() {
        return CreateShopOrderNoteInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
let CreateShopOrderNoteInput = class CreateShopOrderNoteInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateShopOrderNoteInput.prototype, "orderId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", String)
], CreateShopOrderNoteInput.prototype, "note", void 0);
CreateShopOrderNoteInput = _ts_decorate._([
    (0, _graphql.InputType)(),
    (0, _nestjsquerygraphql.BeforeCreateOne)((input, context)=>{
        return {
            input: {
                ...input.input,
                staffId: context.req.user.id
            }
        };
    })
], CreateShopOrderNoteInput);


/***/ }),
/* 302 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateShopTransactionInput", ({
    enumerable: true,
    get: function() {
        return CreateShopTransactionInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CreateShopTransactionInput = class CreateShopTransactionInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CreateShopTransactionInput.prototype, "transactionDate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.TransactionType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.TransactionType === "undefined" ? Object : _database.TransactionType)
], CreateShopTransactionInput.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ShopTransactionDebitType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ShopTransactionDebitType === "undefined" ? Object : _database.ShopTransactionDebitType)
], CreateShopTransactionInput.prototype, "debitType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ShopTransactionCreditType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ShopTransactionCreditType === "undefined" ? Object : _database.ShopTransactionCreditType)
], CreateShopTransactionInput.prototype, "creditType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CreateShopTransactionInput.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateShopTransactionInput.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateShopTransactionInput.prototype, "documentNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateShopTransactionInput.prototype, "shopId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateShopTransactionInput.prototype, "description", void 0);
CreateShopTransactionInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateShopTransactionInput);


/***/ }),
/* 303 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopFeedbackModule", ({
    enumerable: true,
    get: function() {
        return ShopFeedbackModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _nestjsquerygraphql = __webpack_require__(17);
const _jwtauthguard = __webpack_require__(29);
const _database = __webpack_require__(15);
const _shopfeedbackdto = __webpack_require__(210);
const _shopfeedbackparameterdto = __webpack_require__(211);
const _nestjsquerytypeorm = __webpack_require__(26);
const _shopfeedbackservice = __webpack_require__(304);
const _shopfeedbackresolver = __webpack_require__(305);
const _typeorm = __webpack_require__(14);
let ShopFeedbackModule = class ShopFeedbackModule {
};
ShopFeedbackModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.ShopEntity,
                _database.ShopFeedbackEntity,
                _database.ShopFeedbackParameterEntity
            ]),
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.ShopFeedbackEntity,
                        _database.ShopFeedbackParameterEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.ShopFeedbackEntity,
                        DTOClass: _shopfeedbackdto.ShopFeedbackDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        enableTotalCount: true,
                        create: {
                            disabled: true
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET
                    },
                    {
                        EntityClass: _database.ShopFeedbackParameterEntity,
                        DTOClass: _shopfeedbackparameterdto.ShopFeedbackParameterDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET
                    }
                ]
            })
        ],
        providers: [
            _shopfeedbackservice.ShopFeedbackService,
            _shopfeedbackresolver.ShopFeedbackResolver
        ]
    })
], ShopFeedbackModule);


/***/ }),
/* 304 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopFeedbackService", ({
    enumerable: true,
    get: function() {
        return ShopFeedbackService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let ShopFeedbackService = class ShopFeedbackService {
    constructor(shopRepository, shopFeedbackRepository){
        this.shopRepository = shopRepository;
        this.shopFeedbackRepository = shopFeedbackRepository;
    }
    async recalculateShopScore(shopId) {
        const feedbacks = await this.shopFeedbackRepository.find({
            where: {
                shopId,
                status: (0, _typeorm1.In)([
                    _database.ReviewStatus.Approved,
                    _database.ReviewStatus.ApprovedUnpublished
                ])
            }
        });
        const feedbackScores = feedbacks.map((feedback)=>feedback.score);
        const totalScore = feedbackScores.reduce((acc, score)=>acc + score, 0);
        const shopScore = totalScore / feedbackScores.length;
        await this.shopRepository.update(shopId, {
            ratingAggregate: {
                rating: shopScore
            }
        });
    }
    async changeFeedbackStatus(feedbackId, status) {
        const feedback = await this.shopFeedbackRepository.findOneByOrFail({
            id: feedbackId
        });
        feedback.status = status;
        await this.shopFeedbackRepository.save(feedback);
        await this.recalculateShopScore(feedback.shopId);
        return feedback;
    }
};
ShopFeedbackService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ShopEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.ShopFeedbackEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], ShopFeedbackService);


/***/ }),
/* 305 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopFeedbackResolver", ({
    enumerable: true,
    get: function() {
        return ShopFeedbackResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _shopfeedbackservice = __webpack_require__(304);
const _shopfeedbackdto = __webpack_require__(210);
const _database = __webpack_require__(15);
let ShopFeedbackResolver = class ShopFeedbackResolver {
    constructor(shopFeedbackService){
        this.shopFeedbackService = shopFeedbackService;
    }
    async updateShopFeedbackStatus(feedbackId, status) {
        return this.shopFeedbackService.changeFeedbackStatus(feedbackId, status);
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_shopfeedbackdto.ShopFeedbackDTO),
    _ts_param._(0, (0, _graphql.Args)('feedbackId', {
        type: ()=>_graphql.ID
    })),
    _ts_param._(1, (0, _graphql.Args)('status', {
        type: ()=>_database.ReviewStatus
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number,
        typeof _database.ReviewStatus === "undefined" ? Object : _database.ReviewStatus
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopFeedbackResolver.prototype, "updateShopFeedbackStatus", null);
ShopFeedbackResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _shopfeedbackservice.ShopFeedbackService === "undefined" ? Object : _shopfeedbackservice.ShopFeedbackService
    ])
], ShopFeedbackResolver);


/***/ }),
/* 306 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpsertShopInput", ({
    enumerable: true,
    get: function() {
        return UpsertShopInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _personalinfodto = __webpack_require__(219);
const _database = __webpack_require__(15);
let UpsertShopInput = class UpsertShopInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpsertShopInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ShopStatus, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ShopStatus === "undefined" ? Object : _database.ShopStatus)
], UpsertShopInput.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpsertShopInput.prototype, "mobileNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_personalinfodto.PersonalInfoDTO, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _personalinfodto.PersonalInfoDTO === "undefined" ? Object : _personalinfodto.PersonalInfoDTO)
], UpsertShopInput.prototype, "personalInfo", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpsertShopInput.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpsertShopInput.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpsertShopInput.prototype, "password", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.WeekdayScheduleDTO
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], UpsertShopInput.prototype, "weeklySchedule", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], UpsertShopInput.prototype, "isExpressDeliveryAvailable", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], UpsertShopInput.prototype, "isShopDeliveryAvailable", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true,
        description: 'The percentage of the delivery fee that shop pays so the delivery fee would be more appealing to the users.'
    }),
    _ts_metadata._("design:type", Number)
], UpsertShopInput.prototype, "expressDeliveryShopCommission", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], UpsertShopInput.prototype, "isOnlinePaymentAvailable", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], UpsertShopInput.prototype, "isCashOnDeliveryAvailable", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpsertShopInput.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], UpsertShopInput.prototype, "location", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpsertShopInput.prototype, "imageId", void 0);
UpsertShopInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpsertShopInput);


/***/ }),
/* 307 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopNoteDTO", ({
    enumerable: true,
    get: function() {
        return ShopNoteDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _notedto = __webpack_require__(300);
const _shopdto = __webpack_require__(203);
const _operatordto = __webpack_require__(65);
let ShopNoteDTO = class ShopNoteDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopNoteDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_notedto.NoteDTO),
    _ts_metadata._("design:type", typeof _notedto.NoteDTO === "undefined" ? Object : _notedto.NoteDTO)
], ShopNoteDTO.prototype, "note", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID, {
        filterRequired: true
    }),
    _ts_metadata._("design:type", Number)
], ShopNoteDTO.prototype, "shopId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopNoteDTO.prototype, "staffId", void 0);
ShopNoteDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopNote'),
    (0, _nestjsquerygraphql.Relation)('shop', ()=>_shopdto.ShopDTO),
    (0, _nestjsquerygraphql.Relation)('staff', ()=>_operatordto.OperatorDTO)
], ShopNoteDTO);


/***/ }),
/* 308 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateShopNoteInput", ({
    enumerable: true,
    get: function() {
        return CreateShopNoteInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
let CreateShopNoteInput = class CreateShopNoteInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateShopNoteInput.prototype, "shopId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", String)
], CreateShopNoteInput.prototype, "note", void 0);
CreateShopNoteInput = _ts_decorate._([
    (0, _graphql.InputType)(),
    (0, _nestjsquerygraphql.BeforeCreateOne)((input, context)=>{
        return {
            input: {
                ...input.input,
                staffId: context.req.user.id
            }
        };
    })
], CreateShopNoteInput);


/***/ }),
/* 309 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopLoginSessionDTO", ({
    enumerable: true,
    get: function() {
        return ShopLoginSessionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _sessioninfodto = __webpack_require__(68);
let ShopLoginSessionDTO = class ShopLoginSessionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopLoginSessionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_sessioninfodto.SessionInfoDTO),
    _ts_metadata._("design:type", typeof _sessioninfodto.SessionInfoDTO === "undefined" ? Object : _sessioninfodto.SessionInfoDTO)
], ShopLoginSessionDTO.prototype, "sessionInfo", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopLoginSessionDTO.prototype, "shopId", void 0);
ShopLoginSessionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopLoginSession')
], ShopLoginSessionDTO);


/***/ }),
/* 310 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopDeliveryZoneDTO", ({
    enumerable: true,
    get: function() {
        return ShopDeliveryZoneDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
let ShopDeliveryZoneDTO = class ShopDeliveryZoneDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopDeliveryZoneDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopDeliveryZoneDTO.prototype, "shopId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ShopDeliveryZoneDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ShopDeliveryZoneDTO.prototype, "deliveryFee", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], ShopDeliveryZoneDTO.prototype, "minDeliveryTimeMinutes", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], ShopDeliveryZoneDTO.prototype, "maxDeliveryTimeMinutes", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], ShopDeliveryZoneDTO.prototype, "minimumOrderAmount", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", Boolean)
], ShopDeliveryZoneDTO.prototype, "enabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            [
                _database.Point
            ]
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], ShopDeliveryZoneDTO.prototype, "location", void 0);
ShopDeliveryZoneDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopDeliveryZone')
], ShopDeliveryZoneDTO);


/***/ }),
/* 311 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateShopDeliveryZoneInput", ({
    enumerable: true,
    get: function() {
        return CreateShopDeliveryZoneInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CreateShopDeliveryZoneInput = class CreateShopDeliveryZoneInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateShopDeliveryZoneInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateShopDeliveryZoneInput.prototype, "shopId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CreateShopDeliveryZoneInput.prototype, "deliveryFee", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CreateShopDeliveryZoneInput.prototype, "minDeliveryTimeMinutes", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CreateShopDeliveryZoneInput.prototype, "maxDeliveryTimeMinutes", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CreateShopDeliveryZoneInput.prototype, "minimumOrderAmount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            [
                _database.Point
            ]
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], CreateShopDeliveryZoneInput.prototype, "location", void 0);
CreateShopDeliveryZoneInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateShopDeliveryZoneInput);


/***/ }),
/* 312 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateShopDeliveryZoneInput", ({
    enumerable: true,
    get: function() {
        return UpdateShopDeliveryZoneInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let UpdateShopDeliveryZoneInput = class UpdateShopDeliveryZoneInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateShopDeliveryZoneInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateShopDeliveryZoneInput.prototype, "deliveryFee", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], UpdateShopDeliveryZoneInput.prototype, "minDeliveryTimeMinutes", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], UpdateShopDeliveryZoneInput.prototype, "maxDeliveryTimeMinutes", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateShopDeliveryZoneInput.prototype, "minimumOrderAmount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            [
                _database.Point
            ]
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], UpdateShopDeliveryZoneInput.prototype, "location", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: true
    }),
    _ts_metadata._("design:type", Boolean)
], UpdateShopDeliveryZoneInput.prototype, "enabled", void 0);
UpdateShopDeliveryZoneInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateShopDeliveryZoneInput);


/***/ }),
/* 313 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateItemCategoryInput", ({
    enumerable: true,
    get: function() {
        return CreateItemCategoryInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CreateItemCategoryInput = class CreateItemCategoryInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateItemCategoryInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateItemCategoryInput.prototype, "shopId", void 0);
CreateItemCategoryInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateItemCategoryInput);


/***/ }),
/* 314 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateItemCategoryInput", ({
    enumerable: true,
    get: function() {
        return UpdateItemCategoryInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let UpdateItemCategoryInput = class UpdateItemCategoryInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateItemCategoryInput.prototype, "name", void 0);
UpdateItemCategoryInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateItemCategoryInput);


/***/ }),
/* 315 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateShopItemPresetInput", ({
    enumerable: true,
    get: function() {
        return CreateShopItemPresetInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CreateShopItemPresetInput = class CreateShopItemPresetInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateShopItemPresetInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateShopItemPresetInput.prototype, "shopId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.WeekdayScheduleDTO
        ], {
        nullable: false
    }),
    _ts_metadata._("design:type", Array)
], CreateShopItemPresetInput.prototype, "weeklySchedule", void 0);
CreateShopItemPresetInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateShopItemPresetInput);


/***/ }),
/* 316 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateShopItemPresetInput", ({
    enumerable: true,
    get: function() {
        return UpdateShopItemPresetInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let UpdateShopItemPresetInput = class UpdateShopItemPresetInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateShopItemPresetInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.WeekdayScheduleDTO
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], UpdateShopItemPresetInput.prototype, "weeklySchedule", void 0);
UpdateShopItemPresetInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateShopItemPresetInput);


/***/ }),
/* 317 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingModule", ({
    enumerable: true,
    get: function() {
        return ParkingModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _database = __webpack_require__(15);
const _parkspotdto = __webpack_require__(318);
const _jwtauthguard = __webpack_require__(29);
const _parkorderqueryservice = __webpack_require__(324);
const _createparkorderinput = __webpack_require__(325);
const _parkorderdto = __webpack_require__(319);
const _parkingservice = __webpack_require__(326);
const _parkingresolver = __webpack_require__(327);
const _parkspotnotedto = __webpack_require__(331);
const _parkordernotedto = __webpack_require__(320);
const _createparkspotnoteinput = __webpack_require__(332);
const _createparkordernoteinput = __webpack_require__(333);
const _parkorderactivitydto = __webpack_require__(321);
const _parkingwalletdto = __webpack_require__(114);
const _parkingtransactiondto = __webpack_require__(226);
const _createparkingtransactioninput = __webpack_require__(334);
const _parkingfeedbackmodule = __webpack_require__(335);
const _parkingsupportrequestmodule = __webpack_require__(338);
const _typeorm = __webpack_require__(14);
const _updateparkspotinput = __webpack_require__(346);
const _parkingloginsessiondto = __webpack_require__(347);
const _parkingloginsessionservice = __webpack_require__(329);
let ParkingModule = class ParkingModule {
};
ParkingModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _parkingfeedbackmodule.ParkingFeedbackModule,
            _parkingsupportrequestmodule.ParkingSupportRequestModule,
            _database.RegionModule,
            _typeorm.TypeOrmModule.forFeature([
                _database.CustomerEntity
            ]),
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.ParkSpotEntity,
                        _database.ParkOrderEntity,
                        _database.ParkingFeedbackEntity,
                        _database.ParkingFeedbackParameterEntity,
                        _database.ParkSpotNoteEntity,
                        _database.ParkOrderNoteEntity,
                        _database.ParkingSupportRequestEntity,
                        _database.ParkingSupportRequestActivityEntity,
                        _database.ParkingCustomerNotificationEntity,
                        _database.ParkOrderActivityEntity,
                        _database.ParkingTransactionEntity,
                        _database.ParkingWalletEntity,
                        _database.ParkingLoginSessionEntity
                    ])
                ],
                services: [
                    _parkorderqueryservice.ParkOrderQueryService
                ],
                resolvers: [
                    {
                        EntityClass: _database.ParkSpotEntity,
                        DTOClass: _parkspotdto.ParkSpotDTO,
                        UpdateDTOClass: _updateparkspotinput.UpdateParkSpotInput,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        enableAggregate: true,
                        create: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    },
                    {
                        EntityClass: _database.ParkingLoginSessionEntity,
                        DTOClass: _parkingloginsessiondto.ParkingLoginSessionDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE
                    },
                    {
                        EntityClass: _database.ParkOrderEntity,
                        DTOClass: _parkorderdto.ParkOrderDTO,
                        CreateDTOClass: _createparkorderinput.CreateParkOrderInput,
                        ServiceClass: _parkorderqueryservice.ParkOrderQueryService,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        enableAggregate: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.ParkOrderNoteEntity,
                        DTOClass: _parkordernotedto.ParkOrderNoteDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        CreateDTOClass: _createparkordernoteinput.CreateParkOrderNoteInput,
                        read: {
                            disabled: true
                        },
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        enableTotalCount: true,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET
                    },
                    {
                        EntityClass: _database.ParkSpotNoteEntity,
                        DTOClass: _parkspotnotedto.ParkSpotNoteDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        CreateDTOClass: _createparkspotnoteinput.CreateParkSpotNoteInput,
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        enableTotalCount: true,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE
                    },
                    {
                        EntityClass: _database.ParkOrderActivityEntity,
                        DTOClass: _parkorderactivitydto.ParkOrderActivityDTO,
                        create: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.ParkingWalletEntity,
                        DTOClass: _parkingwalletdto.ParkingWalletDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        enableAggregate: true,
                        create: {
                            disabled: true
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        }
                    },
                    {
                        EntityClass: _database.ParkingTransactionEntity,
                        DTOClass: _parkingtransactiondto.ParkingTransactionDTO,
                        CreateDTOClass: _createparkingtransactioninput.CreateParkingTransactionInput,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true
                    }
                ]
            })
        ],
        providers: [
            _parkingservice.ParkingService,
            _parkingresolver.ParkingResolver,
            _parkingloginsessionservice.ParkingLoginSessionService
        ]
    })
], ParkingModule);


/***/ }),
/* 318 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkSpotDTO", ({
    enumerable: true,
    get: function() {
        return ParkSpotDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _mediadto = __webpack_require__(66);
const _parkorderdto = __webpack_require__(319);
const _parkingfeedbackdto = __webpack_require__(322);
const _customerdto = __webpack_require__(110);
const _ratingaggregatedto = __webpack_require__(209);
let ParkSpotDTO = class ParkSpotDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkSpotDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ParkSpotStatus),
    _ts_metadata._("design:type", typeof _database.ParkSpotStatus === "undefined" ? Object : _database.ParkSpotStatus)
], ParkSpotDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ParkSpotType),
    _ts_metadata._("design:type", typeof _database.ParkSpotType === "undefined" ? Object : _database.ParkSpotType)
], ParkSpotDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkSpotDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], ParkSpotDTO.prototype, "location", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkSpotDTO.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkSpotDTO.prototype, "phoneNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkSpotDTO.prototype, "email", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_ratingaggregatedto.RatingAggregateDTO),
    _ts_metadata._("design:type", typeof _ratingaggregatedto.RatingAggregateDTO === "undefined" ? Object : _ratingaggregatedto.RatingAggregateDTO)
], ParkSpotDTO.prototype, "ratingAggregate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkSpotDTO.prototype, "openHour", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkSpotDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.WeekdayScheduleDTO
        ]),
    _ts_metadata._("design:type", Array)
], ParkSpotDTO.prototype, "weeklySchedule", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkSpotDTO.prototype, "lastActivityAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkSpotDTO.prototype, "closeHour", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], ParkSpotDTO.prototype, "acceptNewRequest", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], ParkSpotDTO.prototype, "acceptExtendRequest", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ParkSpotCarSize, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ParkSpotCarSize === "undefined" ? Object : _database.ParkSpotCarSize)
], ParkSpotDTO.prototype, "carSize", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ParkSpotDTO.prototype, "carPrice", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], ParkSpotDTO.prototype, "carSpaces", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ParkSpotDTO.prototype, "bikePrice", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], ParkSpotDTO.prototype, "bikeSpaces", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ParkSpotDTO.prototype, "truckPrice", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], ParkSpotDTO.prototype, "truckSpaces", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ParkSpotDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkSpotDTO.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkSpotDTO.prototype, "operatorName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkSpotDTO.prototype, "operatorPhoneCountryCode", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkSpotDTO.prototype, "operatorPhoneNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.ParkSpotFacility
        ]),
    _ts_metadata._("design:type", Array)
], ParkSpotDTO.prototype, "facilities", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], ParkSpotDTO.prototype, "mainImageId", void 0);
ParkSpotDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkSpot'),
    (0, _nestjsquerygraphql.UnPagedRelation)('images', ()=>_mediadto.MediaDTO),
    (0, _nestjsquerygraphql.Relation)('mainImage', ()=>_mediadto.MediaDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('owner', ()=>_customerdto.CustomerDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.OffsetConnection)('feedbacks', ()=>_parkingfeedbackdto.ParkingFeedbackDTO),
    (0, _nestjsquerygraphql.OffsetConnection)('parkOrders', ()=>_parkorderdto.ParkOrderDTO, {
        enableTotalCount: true
    })
], ParkSpotDTO);


/***/ }),
/* 319 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkOrderDTO", ({
    enumerable: true,
    get: function() {
        return ParkOrderDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _parkspotdto = __webpack_require__(318);
const _customerdto = __webpack_require__(110);
const _paymentgatewaydto = __webpack_require__(107);
const _savedpaymentmethoddto = __webpack_require__(115);
const _parkordernotedto = __webpack_require__(320);
const _ridertransactiondto = __webpack_require__(109);
const _providertransactiondto = __webpack_require__(42);
const _parkorderactivitydto = __webpack_require__(321);
const _parkingfeedbackdto = __webpack_require__(322);
let ParkOrderDTO = class ParkOrderDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkOrderDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.GraphQLISODateTime),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderDTO.prototype, "enterTime", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.GraphQLISODateTime),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderDTO.prototype, "exitTime", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderDTO.prototype, "extendedExitTime", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ParkSpotVehicleType),
    _ts_metadata._("design:type", typeof _database.ParkSpotVehicleType === "undefined" ? Object : _database.ParkSpotVehicleType)
], ParkOrderDTO.prototype, "vehicleType", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ParkSpotCarSize, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ParkSpotCarSize === "undefined" ? Object : _database.ParkSpotCarSize)
], ParkOrderDTO.prototype, "carSize", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.PaymentMode),
    _ts_metadata._("design:type", typeof _database.PaymentMode === "undefined" ? Object : _database.PaymentMode)
], ParkOrderDTO.prototype, "paymentMethod", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkOrderDTO.prototype, "parkSpotId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], ParkOrderDTO.prototype, "price", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(),
    _ts_metadata._("design:type", String)
], ParkOrderDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ParkOrderStatus),
    _ts_metadata._("design:type", typeof _database.ParkOrderStatus === "undefined" ? Object : _database.ParkOrderStatus)
], ParkOrderDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkOrderDTO.prototype, "carOwnerId", void 0);
ParkOrderDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkOrder'),
    (0, _nestjsquerygraphql.Relation)('parkSpot', ()=>_parkspotdto.ParkSpotDTO),
    (0, _nestjsquerygraphql.Relation)('spotOwner', ()=>_customerdto.CustomerDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('carOwner', ()=>_customerdto.CustomerDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('paymentGateway', ()=>_paymentgatewaydto.PaymentGatewayDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.Relation)('savedPaymentMethod', ()=>_savedpaymentmethoddto.SavedPaymentMethodDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('notes', ()=>_parkordernotedto.ParkOrderNoteDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('feedbacks', ()=>_parkingfeedbackdto.ParkingFeedbackDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('customerTransactions', ()=>_ridertransactiondto.RiderTransactionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('parkOwnerTransactions', ()=>_ridertransactiondto.RiderTransactionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('providerTransactions', ()=>_providertransactiondto.ProviderTransactionDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('activities', ()=>_parkorderactivitydto.ParkOrderActivityDTO)
], ParkOrderDTO);


/***/ }),
/* 320 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkOrderNoteDTO", ({
    enumerable: true,
    get: function() {
        return ParkOrderNoteDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _operatordto = __webpack_require__(65);
const _parkorderdto = __webpack_require__(319);
let ParkOrderNoteDTO = class ParkOrderNoteDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkOrderNoteDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderNoteDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkOrderNoteDTO.prototype, "parkOrderId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ParkOrderNoteDTO.prototype, "note", void 0);
ParkOrderNoteDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkOrderNote'),
    (0, _nestjsquerygraphql.Relation)('staff', ()=>_operatordto.OperatorDTO),
    (0, _nestjsquerygraphql.Relation)('parkOrder', ()=>_parkorderdto.ParkOrderDTO)
], ParkOrderNoteDTO);


/***/ }),
/* 321 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkOrderActivityDTO", ({
    enumerable: true,
    get: function() {
        return ParkOrderActivityDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
let ParkOrderActivityDTO = class ParkOrderActivityDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkOrderActivityDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderActivityDTO.prototype, "updatedAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ParkOrderStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ParkOrderStatus === "undefined" ? Object : _database.ParkOrderStatus)
], ParkOrderActivityDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkOrderActivityDTO.prototype, "expectedBy", void 0);
ParkOrderActivityDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkOrderActivity')
], ParkOrderActivityDTO);


/***/ }),
/* 322 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingFeedbackDTO", ({
    enumerable: true,
    get: function() {
        return ParkingFeedbackDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _parkingfeedbackparameterdto = __webpack_require__(323);
const _parkorderdto = __webpack_require__(319);
let ParkingFeedbackDTO = class ParkingFeedbackDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingFeedbackDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.Int, {
        description: 'The score of the review, from 0 to 100'
    }),
    _ts_metadata._("design:type", Number)
], ParkingFeedbackDTO.prototype, "score", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkingFeedbackDTO.prototype, "comment", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ReviewStatus),
    _ts_metadata._("design:type", typeof _database.ReviewStatus === "undefined" ? Object : _database.ReviewStatus)
], ParkingFeedbackDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingFeedbackDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingFeedbackDTO.prototype, "parkSpotId", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingFeedbackDTO.prototype, "customerId", void 0);
ParkingFeedbackDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkingFeedback'),
    (0, _nestjsquerygraphql.FilterableRelation)('order', ()=>_parkorderdto.ParkOrderDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('parameters', ()=>_parkingfeedbackparameterdto.ParkingFeedbackParameterDTO)
], ParkingFeedbackDTO);


/***/ }),
/* 323 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingFeedbackParameterDTO", ({
    enumerable: true,
    get: function() {
        return ParkingFeedbackParameterDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
let ParkingFeedbackParameterDTO = class ParkingFeedbackParameterDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingFeedbackParameterDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], ParkingFeedbackParameterDTO.prototype, "isGood", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ParkingFeedbackParameterDTO.prototype, "name", void 0);
ParkingFeedbackParameterDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkingFeedbackParameter'),
    (0, _nestjsquerygraphql.OffsetConnection)('feedbacks', ()=>ParkingFeedbackParameterDTO, {
        enableAggregate: true
    })
], ParkingFeedbackParameterDTO);


/***/ }),
/* 324 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkOrderQueryService", ({
    enumerable: true,
    get: function() {
        return ParkOrderQueryService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _nestjsquerycore = __webpack_require__(37);
const _nestjsquerytypeorm = __webpack_require__(26);
const _database = __webpack_require__(15);
const _typeorm = __webpack_require__(14);
const _typeorm1 = __webpack_require__(16);
const _parkorderdto = __webpack_require__(319);
let ParkOrderQueryService = class ParkOrderQueryService extends _nestjsquerytypeorm.TypeOrmQueryService {
    constructor(repo, notificationRepo, parkSpotRepo){
        super(repo);
        this.repo = repo;
        this.notificationRepo = notificationRepo;
        this.parkSpotRepo = parkSpotRepo;
    }
    async createOne(record) {
        const { paymentMethodId, ..._order } = record;
        const order = _order;
        if (order.paymentMode === _database.PaymentMode.SavedPaymentMethod) {
            order.savedPaymentMethodId = paymentMethodId;
        } else if (order.paymentMode === _database.PaymentMode.PaymentGateway) {
            order.paymentGatewayId = paymentMethodId;
        }
        await this.notificationRepo.save({
            type: _database.ParkingCustomerNotificationType.booked,
            parkOrderId: order.id,
            customerId: order.carOwnerId
        });
        const parkSpot = await this.parkSpotRepo.findOneByOrFail({
            id: _order.parkSpotId
        });
        order.spotOwnerId = parkSpot.ownerId;
        return super.createOne(order);
    }
};
ParkOrderQueryService = _ts_decorate._([
    (0, _nestjsquerycore.QueryService)(_parkorderdto.ParkOrderDTO),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ParkOrderEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.ParkingCustomerNotificationEntity)),
    _ts_param._(2, (0, _typeorm.InjectRepository)(_database.ParkSpotEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], ParkOrderQueryService);


/***/ }),
/* 325 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateParkOrderInput", ({
    enumerable: true,
    get: function() {
        return CreateParkOrderInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CreateParkOrderInput = class CreateParkOrderInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ParkSpotVehicleType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ParkSpotVehicleType === "undefined" ? Object : _database.ParkSpotVehicleType)
], CreateParkOrderInput.prototype, "vehicleType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CreateParkOrderInput.prototype, "enterTime", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CreateParkOrderInput.prototype, "exitTime", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateParkOrderInput.prototype, "parkSpotId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ParkSpotCarSize, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ParkSpotCarSize === "undefined" ? Object : _database.ParkSpotCarSize)
], CreateParkOrderInput.prototype, "carSize", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.PaymentMode, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.PaymentMode === "undefined" ? Object : _database.PaymentMode)
], CreateParkOrderInput.prototype, "paymentMode", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateParkOrderInput.prototype, "paymentMethodId", void 0);
CreateParkOrderInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateParkOrderInput);


/***/ }),
/* 326 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingService", ({
    enumerable: true,
    get: function() {
        return ParkingService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let ParkingService = class ParkingService {
    constructor(parkSpotRepository, customerRepository, regionService){
        this.parkSpotRepository = parkSpotRepository;
        this.customerRepository = customerRepository;
        this.regionService = regionService;
    }
    async getSpots({ point, maximumDistance, minimumRating, facilities, vehicleType, parkingType }) {
        const query = this.parkSpotRepository.createQueryBuilder('spot');
        query.where('ST_Distance(spot.location, ST_GeomFromText(:point)) < :distance', {
            point: `POINT(${point.lng} ${point.lat})`,
            distance: maximumDistance ?? 1000
        });
        if (minimumRating != null) {
            query.andWhere('spot.rating >= :rating', {
                rating: minimumRating
            });
        }
        if (facilities != null && facilities.length > 0) {
            query.andWhere('spot.facilities @> :facilities', {
                facilities
            });
        }
        if (vehicleType != null) {
            switch(vehicleType){
                case _database.ParkSpotVehicleType.Car:
                    query.andWhere('spot.carSpaces > 0');
                    break;
                case _database.ParkSpotVehicleType.Bike:
                    query.andWhere('spot.bikeSpaces > 0');
                    break;
                case _database.ParkSpotVehicleType.Truck:
                    query.andWhere('spot.truckSpaces > 0');
                    break;
            }
        }
        if (parkingType != null) {
            query.andWhere('spot.parkingType = :parkingType', {
                parkingType
            });
        }
        return query.getMany();
    }
    async createSpot(input) {
        const region = await this.regionService.getRegionWithPoint(input.location);
        if (region == null || region.length == 0) {
            throw new Error('Region not found');
        }
        let customer = await this.customerRepository.findOneBy({
            mobileNumber: input.ownerPhoneNumber
        });
        if (customer == null) {
            customer = this.customerRepository.create({
                firstName: input.ownerFirstName,
                lastName: input.ownerLastName,
                email: input.ownerEmail,
                mobileNumber: input.ownerPhoneNumber,
                gender: input.ownerGender
            });
            customer = await this.customerRepository.save(customer);
        }
        const parkSpot = this.parkSpotRepository.create({
            type: input.type,
            name: input.name,
            location: input.location,
            address: input.address,
            phoneNumber: input.phoneNumber,
            carSpaces: input.carSpaces,
            carPrice: input.carPrice,
            bikeSpaces: input.bikeSpaces,
            bikePrice: input.bikePrice,
            truckSpaces: input.truckSpaces,
            truckPrice: input.truckPrice,
            description: input.description,
            facilities: input.facilities,
            ownerId: customer.id,
            currency: region[0].currency,
            images: input.imageIds?.map((id)=>({
                    id
                }))
        });
        return this.parkSpotRepository.save(parkSpot);
    }
};
ParkingService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ParkSpotEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.CustomerEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _database.RegionService === "undefined" ? Object : _database.RegionService
    ])
], ParkingService);


/***/ }),
/* 327 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingResolver", ({
    enumerable: true,
    get: function() {
        return ParkingResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _parkingservice = __webpack_require__(326);
const _createparkspotinput = __webpack_require__(328);
const _parkspotdto = __webpack_require__(318);
const _apollo = __webpack_require__(3);
const _parkingloginsessionservice = __webpack_require__(329);
const _parkshopfilterinput = __webpack_require__(330);
let ParkingResolver = class ParkingResolver {
    constructor(parkingService, parkingLoginSessionService){
        this.parkingService = parkingService;
        this.parkingLoginSessionService = parkingLoginSessionService;
    }
    async parkings(input) {
        return this.parkingService.getSpots(input);
    }
    async createParkingSpot(input) {
        return this.parkingService.createSpot(input);
    }
    async terminateParkingLoginSession(sessionId) {
        if (process.env.DEMO_MODE != null) {
            throw new _apollo.ForbiddenError('Action not allowed in demo mode.');
        }
        const result = await this.parkingLoginSessionService.terminateParkingLoginSession(sessionId);
        return result.affected > 0;
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _parkspotdto.ParkSpotDTO
        ]),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_parkshopfilterinput.ParkSpotFilterInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _parkshopfilterinput.ParkSpotFilterInput === "undefined" ? Object : _parkshopfilterinput.ParkSpotFilterInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ParkingResolver.prototype, "parkings", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_parkspotdto.ParkSpotDTO),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_createparkspotinput.CreateParkSpotInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _createparkspotinput.CreateParkSpotInput === "undefined" ? Object : _createparkspotinput.CreateParkSpotInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ParkingResolver.prototype, "createParkingSpot", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>Boolean),
    _ts_param._(0, (0, _graphql.Args)('sessionId', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], ParkingResolver.prototype, "terminateParkingLoginSession", null);
ParkingResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _parkingservice.ParkingService === "undefined" ? Object : _parkingservice.ParkingService,
        typeof _parkingloginsessionservice.ParkingLoginSessionService === "undefined" ? Object : _parkingloginsessionservice.ParkingLoginSessionService
    ])
], ParkingResolver);


/***/ }),
/* 328 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateParkSpotInput", ({
    enumerable: true,
    get: function() {
        return CreateParkSpotInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
let CreateParkSpotInput = class CreateParkSpotInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ParkSpotType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ParkSpotType === "undefined" ? Object : _database.ParkSpotType)
], CreateParkSpotInput.prototype, "type", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>String),
    _ts_metadata._("design:type", String)
], CreateParkSpotInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], CreateParkSpotInput.prototype, "location", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateParkSpotInput.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateParkSpotInput.prototype, "phoneNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateParkSpotInput.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.WeekdayScheduleDTO
        ]),
    _ts_metadata._("design:type", Array)
], CreateParkSpotInput.prototype, "weekdaySchedule", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ParkSpotCarSize, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ParkSpotCarSize === "undefined" ? Object : _database.ParkSpotCarSize)
], CreateParkSpotInput.prototype, "carSize", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateParkSpotInput.prototype, "carPrice", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CreateParkSpotInput.prototype, "carSpaces", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateParkSpotInput.prototype, "bikePrice", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CreateParkSpotInput.prototype, "bikeSpaces", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateParkSpotInput.prototype, "truckPrice", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CreateParkSpotInput.prototype, "truckSpaces", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateParkSpotInput.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.ParkSpotFacility
        ]),
    _ts_metadata._("design:type", Array)
], CreateParkSpotInput.prototype, "facilities", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateParkSpotInput.prototype, "ownerFirstName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateParkSpotInput.prototype, "ownerLastName", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateParkSpotInput.prototype, "ownerEmail", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateParkSpotInput.prototype, "ownerPhoneNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Gender, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.Gender === "undefined" ? Object : _database.Gender)
], CreateParkSpotInput.prototype, "ownerGender", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _graphql.ID
        ]),
    _ts_metadata._("design:type", Array)
], CreateParkSpotInput.prototype, "imageIds", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], CreateParkSpotInput.prototype, "mainImageId", void 0);
CreateParkSpotInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateParkSpotInput);


/***/ }),
/* 329 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingLoginSessionService", ({
    enumerable: true,
    get: function() {
        return ParkingLoginSessionService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let ParkingLoginSessionService = class ParkingLoginSessionService {
    constructor(parkingLoginSessionRepository){
        this.parkingLoginSessionRepository = parkingLoginSessionRepository;
    }
    async terminateParkingLoginSession(id) {
        return this.parkingLoginSessionRepository.delete(id);
    }
};
ParkingLoginSessionService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ParkingLoginSessionEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], ParkingLoginSessionService);


/***/ }),
/* 330 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkSpotFilterInput", ({
    enumerable: true,
    get: function() {
        return ParkSpotFilterInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let ParkSpotFilterInput = class ParkSpotFilterInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], ParkSpotFilterInput.prototype, "point", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ParkSpotVehicleType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ParkSpotVehicleType === "undefined" ? Object : _database.ParkSpotVehicleType)
], ParkSpotFilterInput.prototype, "vehicleType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkSpotFilterInput.prototype, "fromTime", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkSpotFilterInput.prototype, "toTime", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], ParkSpotFilterInput.prototype, "maximumDistance", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], ParkSpotFilterInput.prototype, "minimumRating", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.ParkSpotFacility
        ]),
    _ts_metadata._("design:type", Array)
], ParkSpotFilterInput.prototype, "facilities", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ParkSpotType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ParkSpotType === "undefined" ? Object : _database.ParkSpotType)
], ParkSpotFilterInput.prototype, "parkingType", void 0);
ParkSpotFilterInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ParkSpotFilterInput);


/***/ }),
/* 331 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkSpotNoteDTO", ({
    enumerable: true,
    get: function() {
        return ParkSpotNoteDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _parkspotdto = __webpack_require__(318);
const _operatordto = __webpack_require__(65);
let ParkSpotNoteDTO = class ParkSpotNoteDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkSpotNoteDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkSpotNoteDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkSpotNoteDTO.prototype, "parkSpotId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ParkSpotNoteDTO.prototype, "note", void 0);
ParkSpotNoteDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkSpotNote'),
    (0, _nestjsquerygraphql.Relation)('parkSpot', ()=>_parkspotdto.ParkSpotDTO),
    (0, _nestjsquerygraphql.Relation)('staff', ()=>_operatordto.OperatorDTO)
], ParkSpotNoteDTO);


/***/ }),
/* 332 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateParkSpotNoteInput", ({
    enumerable: true,
    get: function() {
        return CreateParkSpotNoteInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
let CreateParkSpotNoteInput = class CreateParkSpotNoteInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateParkSpotNoteInput.prototype, "parkSpotId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateParkSpotNoteInput.prototype, "note", void 0);
CreateParkSpotNoteInput = _ts_decorate._([
    (0, _graphql.InputType)(),
    (0, _nestjsquerygraphql.BeforeCreateOne)((input, context)=>{
        return {
            input: {
                ...input.input,
                staffId: context.req.user.id
            }
        };
    })
], CreateParkSpotNoteInput);


/***/ }),
/* 333 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateParkOrderNoteInput", ({
    enumerable: true,
    get: function() {
        return CreateParkOrderNoteInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
let CreateParkOrderNoteInput = class CreateParkOrderNoteInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateParkOrderNoteInput.prototype, "parkOrderId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateParkOrderNoteInput.prototype, "note", void 0);
CreateParkOrderNoteInput = _ts_decorate._([
    (0, _graphql.InputType)(),
    (0, _nestjsquerygraphql.BeforeCreateOne)((input, context)=>{
        return {
            input: {
                ...input.input,
                staffId: context.req.user.id
            }
        };
    })
], CreateParkOrderNoteInput);


/***/ }),
/* 334 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateParkingTransactionInput", ({
    enumerable: true,
    get: function() {
        return CreateParkingTransactionInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CreateParkingTransactionInput = class CreateParkingTransactionInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], CreateParkingTransactionInput.prototype, "transactionDate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.TransactionType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.TransactionType === "undefined" ? Object : _database.TransactionType)
], CreateParkingTransactionInput.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ParkingTransactionDebitType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ParkingTransactionDebitType === "undefined" ? Object : _database.ParkingTransactionDebitType)
], CreateParkingTransactionInput.prototype, "debitType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ParkingTransactionCreditType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ParkingTransactionCreditType === "undefined" ? Object : _database.ParkingTransactionCreditType)
], CreateParkingTransactionInput.prototype, "creditType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], CreateParkingTransactionInput.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateParkingTransactionInput.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateParkingTransactionInput.prototype, "documentNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateParkingTransactionInput.prototype, "customerId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], CreateParkingTransactionInput.prototype, "description", void 0);
CreateParkingTransactionInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateParkingTransactionInput);


/***/ }),
/* 335 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingFeedbackModule", ({
    enumerable: true,
    get: function() {
        return ParkingFeedbackModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _nestjsquerygraphql = __webpack_require__(17);
const _jwtauthguard = __webpack_require__(29);
const _database = __webpack_require__(15);
const _parkingfeedbackdto = __webpack_require__(322);
const _parkingfeedbackparameterdto = __webpack_require__(323);
const _nestjsquerytypeorm = __webpack_require__(26);
const _parkingfeedbackservice = __webpack_require__(336);
const _parkingfeedbackresolver = __webpack_require__(337);
const _typeorm = __webpack_require__(14);
let ParkingFeedbackModule = class ParkingFeedbackModule {
};
ParkingFeedbackModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.ParkSpotEntity,
                _database.ParkingFeedbackEntity,
                _database.ParkingFeedbackParameterEntity
            ]),
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.ParkingFeedbackEntity,
                        _database.ParkingFeedbackParameterEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.ParkingFeedbackEntity,
                        DTOClass: _parkingfeedbackdto.ParkingFeedbackDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        enableTotalCount: true,
                        create: {
                            disabled: true
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableAggregate: true
                    },
                    {
                        EntityClass: _database.ParkingFeedbackParameterEntity,
                        DTOClass: _parkingfeedbackparameterdto.ParkingFeedbackParameterDTO,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        enableTotalCount: true
                    }
                ]
            })
        ],
        providers: [
            _parkingfeedbackservice.ParkingFeedbackService,
            _parkingfeedbackresolver.ParkingFeedbackResolver
        ]
    })
], ParkingFeedbackModule);


/***/ }),
/* 336 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingFeedbackService", ({
    enumerable: true,
    get: function() {
        return ParkingFeedbackService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let ParkingFeedbackService = class ParkingFeedbackService {
    constructor(parkingRepository, parkingFeedbackRepository){
        this.parkingRepository = parkingRepository;
        this.parkingFeedbackRepository = parkingFeedbackRepository;
    }
    async recalculateParkingScore(parkSpotId) {
        const feedbacks = await this.parkingFeedbackRepository.find({
            where: {
                parkSpotId: parkSpotId,
                status: (0, _typeorm1.In)([
                    _database.ReviewStatus.Approved,
                    _database.ReviewStatus.ApprovedUnpublished
                ])
            }
        });
        const feedbackScores = feedbacks.map((feedback)=>feedback.score);
        const totalScore = feedbackScores.reduce((acc, score)=>acc + score, 0);
        const parkingScore = totalScore / feedbackScores.length;
        await this.parkingRepository.update(parkSpotId, {
            ratingAggregate: {
                rating: parkingScore
            }
        });
    }
    async changeFeedbackStatus(feedbackId, status) {
        const feedback = await this.parkingFeedbackRepository.findOneByOrFail({
            id: feedbackId
        });
        feedback.status = status;
        await this.parkingFeedbackRepository.save(feedback);
        await this.recalculateParkingScore(feedback.parkSpotId);
        return feedback;
    }
};
ParkingFeedbackService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ParkSpotEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.ParkingFeedbackEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], ParkingFeedbackService);


/***/ }),
/* 337 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingFeedbackResolver", ({
    enumerable: true,
    get: function() {
        return ParkingFeedbackResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _parkingfeedbackservice = __webpack_require__(336);
const _parkingfeedbackdto = __webpack_require__(322);
const _database = __webpack_require__(15);
let ParkingFeedbackResolver = class ParkingFeedbackResolver {
    constructor(parkingFeedbackService){
        this.parkingFeedbackService = parkingFeedbackService;
    }
    async updateParkingFeedbackStatus(feedbackId, status) {
        return this.parkingFeedbackService.changeFeedbackStatus(feedbackId, status);
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_parkingfeedbackdto.ParkingFeedbackDTO),
    _ts_param._(0, (0, _graphql.Args)('feedbackId', {
        type: ()=>_graphql.ID
    })),
    _ts_param._(1, (0, _graphql.Args)('status', {
        type: ()=>_database.ReviewStatus
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number,
        typeof _database.ReviewStatus === "undefined" ? Object : _database.ReviewStatus
    ]),
    _ts_metadata._("design:returntype", Promise)
], ParkingFeedbackResolver.prototype, "updateParkingFeedbackStatus", null);
ParkingFeedbackResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _parkingfeedbackservice.ParkingFeedbackService === "undefined" ? Object : _parkingfeedbackservice.ParkingFeedbackService
    ])
], ParkingFeedbackResolver);


/***/ }),
/* 338 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingSupportRequestModule", ({
    enumerable: true,
    get: function() {
        return ParkingSupportRequestModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _parkingsupportrequestdto = __webpack_require__(339);
const _parkingsupportrequestactivitydto = __webpack_require__(340);
const _parkingsupportrequestservice = __webpack_require__(341);
const _parkingsupportrequestresolver = __webpack_require__(342);
let ParkingSupportRequestModule = class ParkingSupportRequestModule {
};
ParkingSupportRequestModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.ParkingSupportRequestEntity,
                        _database.ParkingSupportRequestActivityEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.ParkingSupportRequestEntity,
                        DTOClass: _parkingsupportrequestdto.ParkingSupportRequestDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        enableAggregate: true,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.ParkingSupportRequestActivityEntity,
                        DTOClass: _parkingsupportrequestactivitydto.ParkingSupportRequestActivityDTO,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    }
                ]
            })
        ],
        providers: [
            _parkingsupportrequestservice.ParkingSupportRequestService,
            _parkingsupportrequestresolver.ParkingSupportRequestResolver
        ]
    })
], ParkingSupportRequestModule);


/***/ }),
/* 339 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingSupportRequestDTO", ({
    enumerable: true,
    get: function() {
        return ParkingSupportRequestDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _operatordto = __webpack_require__(65);
const _parkorderdto = __webpack_require__(319);
const _parkingsupportrequestactivitydto = __webpack_require__(340);
let ParkingSupportRequestDTO = class ParkingSupportRequestDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingSupportRequestDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingSupportRequestDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>Boolean),
    _ts_metadata._("design:type", Boolean)
], ParkingSupportRequestDTO.prototype, "requestedByOwner", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ParkingSupportRequestDTO.prototype, "subject", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkingSupportRequestDTO.prototype, "content", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_database.ComplaintStatus),
    _ts_metadata._("design:type", typeof _database.ComplaintStatus === "undefined" ? Object : _database.ComplaintStatus)
], ParkingSupportRequestDTO.prototype, "status", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingSupportRequestDTO.prototype, "parkOrderId", void 0);
ParkingSupportRequestDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkingSupportRequest'),
    (0, _nestjsquerygraphql.FilterableRelation)('parkOrder', ()=>_parkorderdto.ParkOrderDTO),
    (0, _nestjsquerygraphql.UnPagedRelation)('assignedToStaffs', ()=>_operatordto.OperatorDTO, {
        disableFilter: true,
        disableSort: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('activities', ()=>_parkingsupportrequestactivitydto.ParkingSupportRequestActivityDTO)
], ParkingSupportRequestDTO);


/***/ }),
/* 340 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingSupportRequestActivityDTO", ({
    enumerable: true,
    get: function() {
        return ParkingSupportRequestActivityDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _operatordto = __webpack_require__(65);
let ParkingSupportRequestActivityDTO = class ParkingSupportRequestActivityDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingSupportRequestActivityDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ParkingSupportRequestActivityDTO.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ComplaintActivityType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ComplaintActivityType === "undefined" ? Object : _database.ComplaintActivityType)
], ParkingSupportRequestActivityDTO.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], ParkingSupportRequestActivityDTO.prototype, "comment", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ComplaintStatus, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ComplaintStatus === "undefined" ? Object : _database.ComplaintStatus)
], ParkingSupportRequestActivityDTO.prototype, "statusFrom", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ComplaintStatus, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ComplaintStatus === "undefined" ? Object : _database.ComplaintStatus)
], ParkingSupportRequestActivityDTO.prototype, "statusTo", void 0);
ParkingSupportRequestActivityDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkingSupportRequestActivity'),
    (0, _nestjsquerygraphql.Relation)('actor', ()=>_operatordto.OperatorDTO, {
        nullable: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('assignedToStaffs', ()=>_operatordto.OperatorDTO, {
        disableFilter: true,
        disableSort: true
    }),
    (0, _nestjsquerygraphql.UnPagedRelation)('unassignedFromStaffs', ()=>_operatordto.OperatorDTO, {
        disableFilter: true,
        disableSort: true
    })
], ParkingSupportRequestActivityDTO);


/***/ }),
/* 341 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingSupportRequestService", ({
    enumerable: true,
    get: function() {
        return ParkingSupportRequestService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let ParkingSupportRequestService = class ParkingSupportRequestService {
    constructor(parkingSupportRequestRepository, parkingSupportRequestActivityRepository){
        this.parkingSupportRequestRepository = parkingSupportRequestRepository;
        this.parkingSupportRequestActivityRepository = parkingSupportRequestActivityRepository;
    }
    async addCommentToParkingSupportRequest(input) {
        const activity = this.parkingSupportRequestActivityRepository.create();
        activity.actorId = input.staffId;
        activity.comment = input.input.comment;
        activity.supportRequestId = input.input.supportRequestId;
        activity.type = _database.ComplaintActivityType.Comment;
        return this.parkingSupportRequestActivityRepository.save(activity);
    }
    async assignParkingSupportRequestToStaff(input) {
        const activity = this.parkingSupportRequestActivityRepository.create();
        activity.actorId = input.staffId;
        activity.assignedToStaffs = input.input.staffIds.map((id)=>({
                id
            }));
        activity.supportRequestId = input.input.supportRequestId;
        activity.type = _database.ComplaintActivityType.AssignToOperator;
        return this.parkingSupportRequestActivityRepository.save(activity);
    }
    async changeParkingSupportRequestStatus(input) {
        const supportRequest = await this.parkingSupportRequestRepository.findOneBy({
            id: input.input.supportRequestId
        });
        const activity = this.parkingSupportRequestActivityRepository.create();
        activity.actorId = input.staffId;
        activity.supportRequestId = input.input.supportRequestId;
        activity.type = _database.ComplaintActivityType.StatusChange;
        activity.statusFrom = supportRequest.status;
        activity.statusTo = input.input.status;
        return this.parkingSupportRequestActivityRepository.save(activity);
    }
};
ParkingSupportRequestService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ParkingSupportRequestEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.ParkingSupportRequestActivityEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], ParkingSupportRequestService);


/***/ }),
/* 342 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingSupportRequestResolver", ({
    enumerable: true,
    get: function() {
        return ParkingSupportRequestResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _parkingsupportrequestservice = __webpack_require__(341);
const _common = __webpack_require__(7);
const _parkingsupportrequestactivitydto = __webpack_require__(340);
const _createparkingsupportrequestcommentinput = __webpack_require__(343);
const _assignparkingsupportrequestinput = __webpack_require__(344);
const _changeparkingsupportrequeststatusinput = __webpack_require__(345);
const _jwtauthguard = __webpack_require__(29);
let ParkingSupportRequestResolver = class ParkingSupportRequestResolver {
    constructor(parkingSupportRequestService, context){
        this.parkingSupportRequestService = parkingSupportRequestService;
        this.context = context;
    }
    async addCommentToParkingSupportRequest(input) {
        return this.parkingSupportRequestService.addCommentToParkingSupportRequest({
            staffId: this.context.req.user.id,
            input
        });
    }
    async assignParkingSupportRequestToStaff(input) {
        return this.parkingSupportRequestService.assignParkingSupportRequestToStaff({
            staffId: this.context.req.user.id,
            input
        });
    }
    async changeParkingSupportRequestStatus(input) {
        return this.parkingSupportRequestService.changeParkingSupportRequestStatus({
            staffId: this.context.req.user.id,
            input
        });
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_parkingsupportrequestactivitydto.ParkingSupportRequestActivityDTO),
    _ts_param._(0, (0, _graphql.Args)('input')),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _createparkingsupportrequestcommentinput.CreateParkingSupportRequestCommentInput === "undefined" ? Object : _createparkingsupportrequestcommentinput.CreateParkingSupportRequestCommentInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ParkingSupportRequestResolver.prototype, "addCommentToParkingSupportRequest", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_parkingsupportrequestactivitydto.ParkingSupportRequestActivityDTO),
    _ts_param._(0, (0, _graphql.Args)('input')),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _assignparkingsupportrequestinput.AssignParkingSupportRequestInput === "undefined" ? Object : _assignparkingsupportrequestinput.AssignParkingSupportRequestInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ParkingSupportRequestResolver.prototype, "assignParkingSupportRequestToStaff", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_parkingsupportrequestactivitydto.ParkingSupportRequestActivityDTO),
    _ts_param._(0, (0, _graphql.Args)('input')),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _changeparkingsupportrequeststatusinput.ChangeParkingSupportRequestStatusInput === "undefined" ? Object : _changeparkingsupportrequeststatusinput.ChangeParkingSupportRequestStatusInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ParkingSupportRequestResolver.prototype, "changeParkingSupportRequestStatus", null);
ParkingSupportRequestResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(1, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _parkingsupportrequestservice.ParkingSupportRequestService === "undefined" ? Object : _parkingsupportrequestservice.ParkingSupportRequestService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], ParkingSupportRequestResolver);


/***/ }),
/* 343 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateParkingSupportRequestCommentInput", ({
    enumerable: true,
    get: function() {
        return CreateParkingSupportRequestCommentInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CreateParkingSupportRequestCommentInput = class CreateParkingSupportRequestCommentInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateParkingSupportRequestCommentInput.prototype, "supportRequestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateParkingSupportRequestCommentInput.prototype, "comment", void 0);
CreateParkingSupportRequestCommentInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateParkingSupportRequestCommentInput);


/***/ }),
/* 344 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AssignParkingSupportRequestInput", ({
    enumerable: true,
    get: function() {
        return AssignParkingSupportRequestInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let AssignParkingSupportRequestInput = class AssignParkingSupportRequestInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], AssignParkingSupportRequestInput.prototype, "supportRequestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _graphql.ID
        ]),
    _ts_metadata._("design:type", Array)
], AssignParkingSupportRequestInput.prototype, "staffIds", void 0);
AssignParkingSupportRequestInput = _ts_decorate._([
    (0, _graphql.InputType)()
], AssignParkingSupportRequestInput);


/***/ }),
/* 345 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ChangeParkingSupportRequestStatusInput", ({
    enumerable: true,
    get: function() {
        return ChangeParkingSupportRequestStatusInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let ChangeParkingSupportRequestStatusInput = class ChangeParkingSupportRequestStatusInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ChangeParkingSupportRequestStatusInput.prototype, "supportRequestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ComplaintStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ComplaintStatus === "undefined" ? Object : _database.ComplaintStatus)
], ChangeParkingSupportRequestStatusInput.prototype, "status", void 0);
ChangeParkingSupportRequestStatusInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ChangeParkingSupportRequestStatusInput);


/***/ }),
/* 346 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UpdateParkSpotInput", ({
    enumerable: true,
    get: function() {
        return UpdateParkSpotInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let UpdateParkSpotInput = class UpdateParkSpotInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ParkSpotStatus, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ParkSpotStatus === "undefined" ? Object : _database.ParkSpotStatus)
], UpdateParkSpotInput.prototype, "status", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ParkSpotType, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ParkSpotType === "undefined" ? Object : _database.ParkSpotType)
], UpdateParkSpotInput.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateParkSpotInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Point, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.Point === "undefined" ? Object : _database.Point)
], UpdateParkSpotInput.prototype, "location", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateParkSpotInput.prototype, "address", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateParkSpotInput.prototype, "phoneNumber", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateParkSpotInput.prototype, "email", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.WeekdayScheduleDTO
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], UpdateParkSpotInput.prototype, "weeklySchedule", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ParkSpotCarSize, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof _database.ParkSpotCarSize === "undefined" ? Object : _database.ParkSpotCarSize)
], UpdateParkSpotInput.prototype, "carSize", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateParkSpotInput.prototype, "carPrice", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateParkSpotInput.prototype, "carSpaces", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateParkSpotInput.prototype, "bikePrice", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateParkSpotInput.prototype, "bikeSpaces", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateParkSpotInput.prototype, "truckPrice", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateParkSpotInput.prototype, "truckSpaces", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], UpdateParkSpotInput.prototype, "description", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.ParkSpotFacility
        ], {
        nullable: true
    }),
    _ts_metadata._("design:type", Array)
], UpdateParkSpotInput.prototype, "facilities", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], UpdateParkSpotInput.prototype, "mainImageId", void 0);
UpdateParkSpotInput = _ts_decorate._([
    (0, _graphql.InputType)()
], UpdateParkSpotInput);


/***/ }),
/* 347 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingLoginSessionDTO", ({
    enumerable: true,
    get: function() {
        return ParkingLoginSessionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _sessioninfodto = __webpack_require__(68);
let ParkingLoginSessionDTO = class ParkingLoginSessionDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingLoginSessionDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_sessioninfodto.SessionInfoDTO),
    _ts_metadata._("design:type", typeof _sessioninfodto.SessionInfoDTO === "undefined" ? Object : _sessioninfodto.SessionInfoDTO)
], ParkingLoginSessionDTO.prototype, "sessionInfo", void 0);
_ts_decorate._([
    (0, _nestjsquerygraphql.FilterableField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ParkingLoginSessionDTO.prototype, "customerId", void 0);
ParkingLoginSessionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkingLoginSession')
], ParkingLoginSessionDTO);


/***/ }),
/* 348 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "InsightsModule", ({
    enumerable: true,
    get: function() {
        return InsightsModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _customersinsightsmodule = __webpack_require__(349);
const _regioninsightsmodule = __webpack_require__(361);
const _taxifeedbackinsightsmodule = __webpack_require__(365);
const _cancelreasoninsightsmodule = __webpack_require__(368);
const _campaigninsightsmodule = __webpack_require__(372);
const _fleetinsightsmodule = __webpack_require__(376);
const _shoporderinsightsmodule = __webpack_require__(380);
const _taxiorderinsightsmodule = __webpack_require__(384);
const _providerwalletinsightsmodule = __webpack_require__(385);
const _parkinginsightsmodule = __webpack_require__(391);
const _driversinsightsmodule = __webpack_require__(394);
const _shopsinsightsmodule = __webpack_require__(397);
let InsightsModule = class InsightsModule {
};
InsightsModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _customersinsightsmodule.CustomerInsightsModule,
            _driversinsightsmodule.DriversInsightsModule,
            _shopsinsightsmodule.ShopsInsightsModule,
            _regioninsightsmodule.RegionInsightsModule,
            _taxifeedbackinsightsmodule.TaxiFeedbackInsightsModule,
            _cancelreasoninsightsmodule.CancelReasonInsightsModule,
            _campaigninsightsmodule.CampaignInsightsModule,
            _fleetinsightsmodule.FleetInsightsModule,
            _taxiorderinsightsmodule.TaxiOrderInsightsModule,
            _shoporderinsightsmodule.ShopOrderInsightsModule,
            _providerwalletinsightsmodule.ProviderWalletInsightsModule,
            _parkinginsightsmodule.ParkingInsightsModule
        ],
        exports: [],
        controllers: [],
        providers: []
    })
], InsightsModule);


/***/ }),
/* 349 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CustomerInsightsModule", ({
    enumerable: true,
    get: function() {
        return CustomerInsightsModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _customersinsightsservice = __webpack_require__(350);
const _customersinsightsresolver = __webpack_require__(352);
let CustomerInsightsModule = class CustomerInsightsModule {
};
CustomerInsightsModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.CustomerEntity,
                _database.CustomerSessionEntity,
                _database.ProviderTransactionEntity,
                _database.RiderTransactionEntity,
                _database.TaxiOrderEntity,
                _database.ShopOrderEntity,
                _database.ParkOrderEntity
            ])
        ],
        providers: [
            _customersinsightsservice.CustomersInsightsService,
            _customersinsightsresolver.CustomersInsightsResolver
        ],
        exports: []
    })
], CustomerInsightsModule);


/***/ }),
/* 350 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CustomersInsightsService", ({
    enumerable: true,
    get: function() {
        return CustomersInsightsService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
const _activeinactiveusersdto = __webpack_require__(351);
let CustomersInsightsService = class CustomersInsightsService {
    constructor(customerRepository, customerSessionRepository, providerTransactionRepository, riderTransactionRepository){
        this.customerRepository = customerRepository;
        this.customerSessionRepository = customerSessionRepository;
        this.providerTransactionRepository = providerTransactionRepository;
        this.riderTransactionRepository = riderTransactionRepository;
    }
    async getCustomersPerApp() {
        // Look through the customer session table and count the number of customers per app
        const customersPerApp = await this.customerSessionRepository.createQueryBuilder('session').select('session.appType as app').addSelect('COUNT(session.customerId) as count').groupBy('session.appType').getRawMany();
        // if appType not found set it to zero
        const appTypes = Object.values(_database.AppType);
        appTypes.forEach((appType)=>{
            if (!customersPerApp.find((customer)=>customer.app === appType)) {
                customersPerApp.push({
                    app: appType,
                    count: 0
                });
            }
        });
        return customersPerApp;
    }
    async revenuePerApp(input) {
        // Look through the provider transaction table and sum the revenue per app
        const revenuePerApp = await this.providerTransactionRepository.createQueryBuilder('admin_transaction').select('admin_transaction.appType as app').addSelect('SUM(admin_transaction.amount) as revenue').addSelect('ANY_VALUE(admin_transaction.createdAt) as date').where('admin_transaction.createdAt >= :startDate', {
            startDate: input.startDate
        }).andWhere('admin_transaction.createdAt <= :endDate', {
            endDate: input.endDate
        })// Group by the Date based on the interval
        .groupBy(this.getGroupByDate(input.interval, 'date').groupBy).addGroupBy('admin_transaction.appType').getRawMany();
        return revenuePerApp;
    }
    async customerPlatformDistribution() {
        // Look through the customer_sesson table and count the number of devices per platform
        const platformDistribution = await this.customerSessionRepository.createQueryBuilder('session').select('session.devicePlatform as device').addSelect('COUNT(session.id) as count').groupBy('session.devicePlatform').getRawMany();
        return platformDistribution;
    }
    async getTopSpendingCustomers() {
        // Look through the rider_transaction table and sum the total amount spent by each customer
        const topSpendingCustomers = await this.riderTransactionRepository.createQueryBuilder('rider_transaction').select('customer.id as id').addSelect('customer.firstName as firstName').addSelect('customer.lastName as lastName').addSelect('media.address as avatarUrl').addSelect('SUM(rider_transaction.amount) as totalAmount').addSelect('COUNT(rider_transaction.id) as totalTransactions').innerJoin('rider_transaction.rider', 'customer').innerJoin('customer.media', 'media').groupBy('customer.id').orderBy('totalAmount', 'DESC').limit(10).getRawMany();
        // join firstName and lastName to create a name field
        topSpendingCustomers.forEach((customer)=>{
            customer.name = `${customer.firstName} ${customer.lastName}`;
        });
        return topSpendingCustomers;
    }
    async genderDistribution() {
        // Look through the customer table and count the number of customers per gender
        const genderDistribution = await this.customerRepository.createQueryBuilder('customer').select('customer.gender as gender').addSelect('COUNT(customer.id) as count').groupBy('customer.gender').getRawMany();
        return genderDistribution;
    }
    async retentionRate(input) {
        // look through the taxi_order, shop_order, and park_order tables and count the number of active customers
        const activeUsers = await this._activeUsers(input);
        // Look through the customer table and count the number of total customers per date
        const totalUsers = await this.customerRepository.createQueryBuilder('customer').select('ANY_VALUE(customer.registrationTimestamp) as date').addSelect('COUNT(DISTINCT customer.id) as totalCustomers').groupBy(this.getGroupByDate(input.interval, 'date').groupBy).getRawMany();
        // Calculate the retention rate
        const retentionRate = totalUsers.map((totalUser)=>{
            const activeUser = activeUsers.find((activeUser)=>activeUser.date === totalUser.date);
            return {
                date: totalUser.date,
                retentionRate: activeUser.activeCustomers / totalUser.totalCustomers
            };
        });
        return retentionRate;
    }
    async activeInactiveUsers(input) {
        const activeUsers = await this._activeUsers(input);
        const inactiveUsers = await this._inactiveUsers(input);
        const activeInactiveUsers = activeUsers.map((activeUser)=>{
            return {
                count: activeUser.activeCustomers,
                date: activeUser.date,
                activityLevel: _activeinactiveusersdto.UserActivityLevel.Active
            };
        });
        inactiveUsers.forEach((inactiveUser)=>{
            activeInactiveUsers.push({
                count: inactiveUser.inactiveCustomers,
                date: inactiveUser.date,
                activityLevel: _activeinactiveusersdto.UserActivityLevel.Inactive
            });
        });
        return activeInactiveUsers;
    }
    async countryDistribution() {
        // Look through the customer table and count the number of customers per country
        const countryDistribution = await this.customerRepository.createQueryBuilder('customer').select('customer.countryIso as country').addSelect('COUNT(customer.id) as count').groupBy('country').getRawMany();
        return countryDistribution;
    }
    async _activeUsers(input) {
        return [];
        return this.customerRepository.createQueryBuilder('customer').select('ANY_VALUE(COALESCE(taxi_order.requestTimestamp, shop_order.createdAt, park_order.createdAt))', 'date').addSelect('taxi_order.requestTimestamp').addSelect('shop_order.createdAt').addSelect('park_order.createdAt').addSelect('COUNT(DISTINCT customer.id)', 'activeCustomers').leftJoin('customer.orders', 'taxi_order').leftJoin('customer.shopOrders', 'shop_order').leftJoin('customer.orderedParkOrders', 'park_order').where(`(taxi_order.requestTimestamp BETWEEN :startDate AND :endDate)
          OR (shop_order.createdAt BETWEEN :startDate AND :endDate)
          OR (park_order.createdAt BETWEEN :startDate AND :endDate)`, {
            startDate: input.startDate,
            endDate: input.endDate
        }).groupBy(this.getGroupByDate(input.interval, 'COALESCE(taxi_order.requestTimestamp, shop_order.createdAt, park_order.createdAt)').groupBy).getRawMany();
    }
    async _inactiveUsers(input) {
        return [];
        return this.customerRepository.createQueryBuilder('customer').select('ANY_VALUE(COALESCE(taxi_order.createdOn, shop_order.createdAt, park_order.createdAt))', 'date').addSelect('taxi_order.createdOn').addSelect('shop_order.createdAt').addSelect('park_order.createdAt').addSelect('COUNT(DISTINCT customer.id)', 'inactiveCustomers').leftJoin('customer.orders', 'taxi_order').leftJoin('customer.shopOrders', 'shop_order').leftJoin('customer.orderedParkOrders', 'park_order').where(`(taxi_order.createdOn < :startDate)
          AND (shop_order.createdAt < :startDate)
          AND (park_order.createdAt < :startDate)`, {
            startDate: input.startDate
        }).groupBy(this.getGroupByDate(input.interval, 'COALESCE(taxi_order.createdOn, shop_order.createdAt, park_order.createdAt)').groupBy).getRawMany();
    }
    getGroupByDate(query, timeField) {
        switch(query){
            case _database.ChartInterval.Daily:
                return {
                    groupBy: `DATE(${timeField}),TIME(${timeField})`
                };
            case _database.ChartInterval.Monthly:
                return {
                    groupBy: `DAYOFYEAR(${timeField}),YEAR(${timeField})`
                };
            case _database.ChartInterval.Quarterly:
                return {
                    groupBy: `QUARTER(${timeField}),YEAR(${timeField})`
                };
            case _database.ChartInterval.Yearly:
                return {
                    groupBy: `MONTH(${timeField}),YEAR(${timeField})`
                };
        }
    }
};
CustomersInsightsService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.CustomerEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.CustomerSessionEntity)),
    _ts_param._(2, (0, _typeorm.InjectRepository)(_database.ProviderTransactionEntity)),
    _ts_param._(3, (0, _typeorm.InjectRepository)(_database.RiderTransactionEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], CustomersInsightsService);


/***/ }),
/* 351 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    ActiveInactiveUsersDTO: function() {
        return ActiveInactiveUsersDTO;
    },
    UserActivityLevel: function() {
        return UserActivityLevel;
    }
});
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let ActiveInactiveUsersDTO = class ActiveInactiveUsersDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>Date, {
        description: 'Any date in the range of the data.'
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ActiveInactiveUsersDTO.prototype, "date", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], ActiveInactiveUsersDTO.prototype, "count", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>UserActivityLevel),
    _ts_metadata._("design:type", String)
], ActiveInactiveUsersDTO.prototype, "activityLevel", void 0);
ActiveInactiveUsersDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ActiveInactiveUsers')
], ActiveInactiveUsersDTO);
var UserActivityLevel;
(function(UserActivityLevel) {
    UserActivityLevel["Active"] = "active";
    UserActivityLevel["Inactive"] = "inactive";
})(UserActivityLevel || (UserActivityLevel = {}));
(0, _graphql.registerEnumType)(UserActivityLevel, {
    name: 'UserActivityLevel',
    description: 'The activity level of the user.'
});


/***/ }),
/* 352 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CustomersInsightsResolver", ({
    enumerable: true,
    get: function() {
        return CustomersInsightsResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _customersinsightsservice = __webpack_require__(350);
const _customersperappdto = __webpack_require__(353);
const _revenueperappinput = __webpack_require__(354);
const _chartfilterinput = __webpack_require__(355);
const _platformdistributiondto = __webpack_require__(356);
const _leaderboarditemdto = __webpack_require__(357);
const _genderdistributiondto = __webpack_require__(358);
const _retentionratedto = __webpack_require__(359);
const _activeinactiveusersdto = __webpack_require__(351);
const _countrydistributiondto = __webpack_require__(360);
let CustomersInsightsResolver = class CustomersInsightsResolver {
    constructor(customersInsightsService){
        this.customersInsightsService = customersInsightsService;
    }
    async customersPerApp() {
        return this.customersInsightsService.getCustomersPerApp();
    }
    async revenuePerApp(input) {
        return this.customersInsightsService.revenuePerApp(input);
    }
    async customerPlatformDistribution() {
        return this.customersInsightsService.customerPlatformDistribution();
    }
    async topSpendingCustomers() {
        return this.customersInsightsService.getTopSpendingCustomers();
    }
    async genderDistribution() {
        return this.customersInsightsService.genderDistribution();
    }
    async retentionRate(input) {
        return this.customersInsightsService.retentionRate(input);
    }
    async activeInactiveUsers(input) {
        return this.customersInsightsService.activeInactiveUsers(input);
    }
    async countryDistribution() {
        return this.customersInsightsService.countryDistribution();
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _customersperappdto.CustomersPerAppDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], CustomersInsightsResolver.prototype, "customersPerApp", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _revenueperappinput.RevenuePerApp
        ]),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_chartfilterinput.ChartFilterInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _chartfilterinput.ChartFilterInput === "undefined" ? Object : _chartfilterinput.ChartFilterInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], CustomersInsightsResolver.prototype, "revenuePerApp", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _platformdistributiondto.PlatformDistributionDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], CustomersInsightsResolver.prototype, "customerPlatformDistribution", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _leaderboarditemdto.LeaderboardItemDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], CustomersInsightsResolver.prototype, "topSpendingCustomers", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _genderdistributiondto.GenderDistributionDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], CustomersInsightsResolver.prototype, "genderDistribution", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _retentionratedto.RetentionRateDTO
        ]),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_chartfilterinput.ChartFilterInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _chartfilterinput.ChartFilterInput === "undefined" ? Object : _chartfilterinput.ChartFilterInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], CustomersInsightsResolver.prototype, "retentionRate", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _activeinactiveusersdto.ActiveInactiveUsersDTO
        ]),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_chartfilterinput.ChartFilterInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _chartfilterinput.ChartFilterInput === "undefined" ? Object : _chartfilterinput.ChartFilterInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], CustomersInsightsResolver.prototype, "activeInactiveUsers", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _countrydistributiondto.CountryDistributionDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], CustomersInsightsResolver.prototype, "countryDistribution", null);
CustomersInsightsResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _customersinsightsservice.CustomersInsightsService === "undefined" ? Object : _customersinsightsservice.CustomersInsightsService
    ])
], CustomersInsightsResolver);


/***/ }),
/* 353 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CustomersPerAppDTO", ({
    enumerable: true,
    get: function() {
        return CustomersPerAppDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let CustomersPerAppDTO = class CustomersPerAppDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AppType),
    _ts_metadata._("design:type", typeof _database.AppType === "undefined" ? Object : _database.AppType)
], CustomersPerAppDTO.prototype, "app", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CustomersPerAppDTO.prototype, "count", void 0);
CustomersPerAppDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('CustomerLoginPerApp')
], CustomersPerAppDTO);


/***/ }),
/* 354 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RevenuePerApp", ({
    enumerable: true,
    get: function() {
        return RevenuePerApp;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let RevenuePerApp = class RevenuePerApp {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AppType, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.AppType === "undefined" ? Object : _database.AppType)
], RevenuePerApp.prototype, "app", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], RevenuePerApp.prototype, "revenue", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Date, {
        description: 'Any date within the range of revenue interval.'
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], RevenuePerApp.prototype, "date", void 0);
RevenuePerApp = _ts_decorate._([
    (0, _graphql.ObjectType)('RevenuePerApp')
], RevenuePerApp);


/***/ }),
/* 355 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ChartFilterInput", ({
    enumerable: true,
    get: function() {
        return ChartFilterInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let ChartFilterInput = class ChartFilterInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ChartFilterInput.prototype, "startDate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ChartFilterInput.prototype, "endDate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ChartInterval),
    _ts_metadata._("design:type", typeof _database.ChartInterval === "undefined" ? Object : _database.ChartInterval)
], ChartFilterInput.prototype, "interval", void 0);
ChartFilterInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ChartFilterInput);


/***/ }),
/* 356 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PlatformDistributionDTO", ({
    enumerable: true,
    get: function() {
        return PlatformDistributionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let PlatformDistributionDTO = class PlatformDistributionDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.DevicePlatform),
    _ts_metadata._("design:type", typeof _database.DevicePlatform === "undefined" ? Object : _database.DevicePlatform)
], PlatformDistributionDTO.prototype, "platform", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], PlatformDistributionDTO.prototype, "count", void 0);
PlatformDistributionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('PlatformDistribution')
], PlatformDistributionDTO);


/***/ }),
/* 357 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "LeaderboardItemDTO", ({
    enumerable: true,
    get: function() {
        return LeaderboardItemDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
let LeaderboardItemDTO = class LeaderboardItemDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], LeaderboardItemDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], LeaderboardItemDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], LeaderboardItemDTO.prototype, "avatarUrl", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true
    }),
    _ts_metadata._("design:type", String)
], LeaderboardItemDTO.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], LeaderboardItemDTO.prototype, "totalAmount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], LeaderboardItemDTO.prototype, "totalCount", void 0);
LeaderboardItemDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('LeaderboardItem')
], LeaderboardItemDTO);


/***/ }),
/* 358 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "GenderDistributionDTO", ({
    enumerable: true,
    get: function() {
        return GenderDistributionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let GenderDistributionDTO = class GenderDistributionDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.Gender),
    _ts_metadata._("design:type", typeof _database.Gender === "undefined" ? Object : _database.Gender)
], GenderDistributionDTO.prototype, "gender", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], GenderDistributionDTO.prototype, "count", void 0);
GenderDistributionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('GenderDistribution')
], GenderDistributionDTO);


/***/ }),
/* 359 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RetentionRateDTO", ({
    enumerable: true,
    get: function() {
        return RetentionRateDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let RetentionRateDTO = class RetentionRateDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>Date, {
        description: 'Any date within the range of revenue interval.'
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], RetentionRateDTO.prototype, "date", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], RetentionRateDTO.prototype, "retentionRate", void 0);
RetentionRateDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('RetentionRate')
], RetentionRateDTO);


/***/ }),
/* 360 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CountryDistributionDTO", ({
    enumerable: true,
    get: function() {
        return CountryDistributionDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CountryDistributionDTO = class CountryDistributionDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CountryDistributionDTO.prototype, "country", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], CountryDistributionDTO.prototype, "count", void 0);
CountryDistributionDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('CountryDistribution')
], CountryDistributionDTO);


/***/ }),
/* 361 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RegionInsightsModule", ({
    enumerable: true,
    get: function() {
        return RegionInsightsModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _regioninsightsservice = __webpack_require__(362);
const _regioninsightsresolver = __webpack_require__(363);
let RegionInsightsModule = class RegionInsightsModule {
};
RegionInsightsModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.RegionEntity
            ])
        ],
        providers: [
            _regioninsightsservice.RegionInsightsService,
            _regioninsightsresolver.RegionInsightsResolver
        ]
    })
], RegionInsightsModule);


/***/ }),
/* 362 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RegionInsightsService", ({
    enumerable: true,
    get: function() {
        return RegionInsightsService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let RegionInsightsService = class RegionInsightsService {
    constructor(regionRepository){
        this.regionRepository = regionRepository;
    }
    async getPopularRegionsByTaxiOrders() {
        return this.regionRepository.createQueryBuilder('region').select('region.name', 'name').addSelect('COUNT(taxiOrder.id)', 'count').leftJoin('region.taxiOrders', 'taxiOrder').groupBy('region.id').orderBy('count', 'DESC').getRawOne();
    }
};
RegionInsightsService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.RegionEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], RegionInsightsService);


/***/ }),
/* 363 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RegionInsightsResolver", ({
    enumerable: true,
    get: function() {
        return RegionInsightsResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _regioninsightsservice = __webpack_require__(362);
const _namecountdto = __webpack_require__(364);
let RegionInsightsResolver = class RegionInsightsResolver {
    constructor(regionInsightsService){
        this.regionInsightsService = regionInsightsService;
    }
    async popularRegionsByTaxiOrders() {
        return this.regionInsightsService.getPopularRegionsByTaxiOrders();
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _namecountdto.NameCountDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], RegionInsightsResolver.prototype, "popularRegionsByTaxiOrders", null);
RegionInsightsResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _regioninsightsservice.RegionInsightsService === "undefined" ? Object : _regioninsightsservice.RegionInsightsService
    ])
], RegionInsightsResolver);


/***/ }),
/* 364 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "NameCountDTO", ({
    enumerable: true,
    get: function() {
        return NameCountDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let NameCountDTO = class NameCountDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], NameCountDTO.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], NameCountDTO.prototype, "count", void 0);
NameCountDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('NameCount')
], NameCountDTO);


/***/ }),
/* 365 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiFeedbackInsightsModule", ({
    enumerable: true,
    get: function() {
        return TaxiFeedbackInsightsModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _taxifeedbackinsightsresolver = __webpack_require__(366);
const _taxifeedbackinsightsservice = __webpack_require__(367);
let TaxiFeedbackInsightsModule = class TaxiFeedbackInsightsModule {
};
TaxiFeedbackInsightsModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.FeedbackParameterEntity
            ])
        ],
        providers: [
            _taxifeedbackinsightsservice.TaxiFeedbackInsightsService,
            _taxifeedbackinsightsresolver.TaxiFeedbackInsightsResolver
        ]
    })
], TaxiFeedbackInsightsModule);


/***/ }),
/* 366 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiFeedbackInsightsResolver", ({
    enumerable: true,
    get: function() {
        return TaxiFeedbackInsightsResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _taxifeedbackinsightsservice = __webpack_require__(367);
const _namecountdto = __webpack_require__(364);
let TaxiFeedbackInsightsResolver = class TaxiFeedbackInsightsResolver {
    constructor(taxiFeedbackInsightsService){
        this.taxiFeedbackInsightsService = taxiFeedbackInsightsService;
    }
    async ratingPointPopularities() {
        return this.taxiFeedbackInsightsService.ratingPointPopularities();
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _namecountdto.NameCountDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], TaxiFeedbackInsightsResolver.prototype, "ratingPointPopularities", null);
TaxiFeedbackInsightsResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _taxifeedbackinsightsservice.TaxiFeedbackInsightsService === "undefined" ? Object : _taxifeedbackinsightsservice.TaxiFeedbackInsightsService
    ])
], TaxiFeedbackInsightsResolver);


/***/ }),
/* 367 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiFeedbackInsightsService", ({
    enumerable: true,
    get: function() {
        return TaxiFeedbackInsightsService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let TaxiFeedbackInsightsService = class TaxiFeedbackInsightsService {
    constructor(feedbackParameterRepository){
        this.feedbackParameterRepository = feedbackParameterRepository;
    }
    async ratingPointPopularities() {
        return this.feedbackParameterRepository.createQueryBuilder('parameter').select('parameter.title', 'name').addSelect('COUNT(feedback.id)', 'count').innerJoin('parameter.feedbacks', 'feedback').groupBy('parameter.id').orderBy('count', 'DESC').getRawMany();
    }
};
TaxiFeedbackInsightsService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.FeedbackParameterEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], TaxiFeedbackInsightsService);


/***/ }),
/* 368 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CancelReasonInsightsModule", ({
    enumerable: true,
    get: function() {
        return CancelReasonInsightsModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _cancelreasoninsightsservice = __webpack_require__(369);
const _cancelreasoninsightsresolver = __webpack_require__(370);
let CancelReasonInsightsModule = class CancelReasonInsightsModule {
};
CancelReasonInsightsModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.OrderCancelReasonEntity,
                _database.TaxiOrderEntity
            ])
        ],
        providers: [
            _cancelreasoninsightsservice.CancelReasonInsightsService,
            _cancelreasoninsightsresolver.CancelReasonInsightsResolver
        ]
    })
], CancelReasonInsightsModule);


/***/ }),
/* 369 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CancelReasonInsightsService", ({
    enumerable: true,
    get: function() {
        return CancelReasonInsightsService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let CancelReasonInsightsService = class CancelReasonInsightsService {
    constructor(taxiOrderRepository){
        this.taxiOrderRepository = taxiOrderRepository;
    }
    async cancelReasonPopularityByName() {
        const result = await this.taxiOrderRepository.createQueryBuilder('order').select('order.cancelReasonId, COUNT(order.cancelReasonId) as count').select('cancelReason.name', 'name').leftJoin('order.cancelReason', 'cancelReason').groupBy('order.cancelReasonId').getRawMany();
        return result;
    }
    async cancelReasonPopularityByUserType() {
        const result = await this.taxiOrderRepository.createQueryBuilder('order').select('order.cancelReasonId, COUNT(order.cancelReasonId) as count').select('cancelReason.userType', 'userType').groupBy('order.cancelReasonId').getRawMany();
        return result;
    }
};
CancelReasonInsightsService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.TaxiOrderEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], CancelReasonInsightsService);


/***/ }),
/* 370 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CancelReasonInsightsResolver", ({
    enumerable: true,
    get: function() {
        return CancelReasonInsightsResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _cancelreasoninsightsservice = __webpack_require__(369);
const _namecountdto = __webpack_require__(364);
const _usertypecountpairdto = __webpack_require__(371);
let CancelReasonInsightsResolver = class CancelReasonInsightsResolver {
    constructor(cancelReasonInsightsService){
        this.cancelReasonInsightsService = cancelReasonInsightsService;
    }
    async cancelReasonPopularityByName() {
        return this.cancelReasonInsightsService.cancelReasonPopularityByName();
    }
    async cancelReasonPopularityByUserType() {
        return this.cancelReasonInsightsService.cancelReasonPopularityByUserType();
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _namecountdto.NameCountDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], CancelReasonInsightsResolver.prototype, "cancelReasonPopularityByName", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _usertypecountpairdto.UserTypeCountPairDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], CancelReasonInsightsResolver.prototype, "cancelReasonPopularityByUserType", null);
CancelReasonInsightsResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _cancelreasoninsightsservice.CancelReasonInsightsService === "undefined" ? Object : _cancelreasoninsightsservice.CancelReasonInsightsService
    ])
], CancelReasonInsightsResolver);


/***/ }),
/* 371 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UserTypeCountPairDTO", ({
    enumerable: true,
    get: function() {
        return UserTypeCountPairDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let UserTypeCountPairDTO = class UserTypeCountPairDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AnnouncementUserType),
    _ts_metadata._("design:type", typeof _database.AnnouncementUserType === "undefined" ? Object : _database.AnnouncementUserType)
], UserTypeCountPairDTO.prototype, "userType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], UserTypeCountPairDTO.prototype, "count", void 0);
UserTypeCountPairDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('UserTypeCountPair')
], UserTypeCountPairDTO);


/***/ }),
/* 372 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CampaignInsightsModule", ({
    enumerable: true,
    get: function() {
        return CampaignInsightsModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _campaigninsightsservice = __webpack_require__(373);
const _campaigninsightsresolver = __webpack_require__(374);
let CampaignInsightsModule = class CampaignInsightsModule {
};
CampaignInsightsModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.CampaignEntity,
                _database.CampaignCodeEntity
            ])
        ],
        providers: [
            _campaigninsightsservice.CampaignInsightsService,
            _campaigninsightsresolver.CampaignInsightsResolver
        ]
    })
], CampaignInsightsModule);


/***/ }),
/* 373 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CampaignInsightsService", ({
    enumerable: true,
    get: function() {
        return CampaignInsightsService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let CampaignInsightsService = class CampaignInsightsService {
    constructor(campaignCodeRepository){
        this.campaignCodeRepository = campaignCodeRepository;
    }
    async getUsedUnusedCountPair(input) {
        const used = await this.campaignCodeRepository.count({
            where: {
                campaignId: input.campaignId,
                customerId: (0, _typeorm1.Not)((0, _typeorm1.IsNull)())
            }
        });
        const unused = await this.campaignCodeRepository.count({
            where: {
                campaignId: input.campaignId,
                customerId: (0, _typeorm1.IsNull)()
            }
        });
        return {
            used,
            unused
        };
    }
};
CampaignInsightsService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.CampaignCodeEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], CampaignInsightsService);


/***/ }),
/* 374 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CampaignInsightsResolver", ({
    enumerable: true,
    get: function() {
        return CampaignInsightsResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _campaigninsightsservice = __webpack_require__(373);
const _usedunusedcountpairdto = __webpack_require__(375);
let CampaignInsightsResolver = class CampaignInsightsResolver {
    constructor(campaignInsightsService){
        this.campaignInsightsService = campaignInsightsService;
    }
    async getUsedUnusedCountPair(campaignId) {
        return this.campaignInsightsService.getUsedUnusedCountPair({
            campaignId
        });
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>_usedunusedcountpairdto.UsedUnusedCountPairDTO),
    _ts_param._(0, (0, _graphql.Args)('campaignId', {
        type: ()=>_graphql.ID
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number
    ]),
    _ts_metadata._("design:returntype", Promise)
], CampaignInsightsResolver.prototype, "getUsedUnusedCountPair", null);
CampaignInsightsResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _campaigninsightsservice.CampaignInsightsService === "undefined" ? Object : _campaigninsightsservice.CampaignInsightsService
    ])
], CampaignInsightsResolver);


/***/ }),
/* 375 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "UsedUnusedCountPairDTO", ({
    enumerable: true,
    get: function() {
        return UsedUnusedCountPairDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let UsedUnusedCountPairDTO = class UsedUnusedCountPairDTO {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], UsedUnusedCountPairDTO.prototype, "used", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], UsedUnusedCountPairDTO.prototype, "unused", void 0);
UsedUnusedCountPairDTO = _ts_decorate._([
    (0, _graphql.ObjectType)()
], UsedUnusedCountPairDTO);


/***/ }),
/* 376 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FleetInsightsModule", ({
    enumerable: true,
    get: function() {
        return FleetInsightsModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _fleetinsightsservice = __webpack_require__(377);
const _fleetinsightsresolver = __webpack_require__(378);
let FleetInsightsModule = class FleetInsightsModule {
};
FleetInsightsModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.FleetEntity
            ])
        ],
        providers: [
            _fleetinsightsservice.FleetInsightsService,
            _fleetinsightsresolver.FleetInsightsResolver
        ]
    })
], FleetInsightsModule);


/***/ }),
/* 377 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FleetInsightsService", ({
    enumerable: true,
    get: function() {
        return FleetInsightsService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let FleetInsightsService = class FleetInsightsService {
    constructor(fleetRepository){
        this.fleetRepository = fleetRepository;
    }
    getFleetIncome(fleetId, input) {
        const query = this.fleetRepository.createQueryBuilder('fleet').select('fleet.name', 'name').addSelect('SUM(transaction.amount)', 'amount').addSelect('DATE(transaction.transactionTimestamp)', 'date').leftJoin('fleet.transactions', 'transaction').where('transaction.transactionTimestamp >= :startDate', {
            startDate: input.startDate
        }).andWhere('transaction.transactionTimestamp <= :endDate', {
            endDate: input.endDate
        }).addGroupBy('date').groupBy('name').andWhere('fleet.id = :fleetId', {
            fleetId
        }).orderBy('date', 'ASC');
        return query.getRawMany();
    }
};
FleetInsightsService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.FleetEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], FleetInsightsService);


/***/ }),
/* 378 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FleetInsightsResolver", ({
    enumerable: true,
    get: function() {
        return FleetInsightsResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _fleetinsightsservice = __webpack_require__(377);
const _financialtimelinedto = __webpack_require__(379);
const _chartfilterinput = __webpack_require__(355);
let FleetInsightsResolver = class FleetInsightsResolver {
    constructor(fleetInsightsService){
        this.fleetInsightsService = fleetInsightsService;
    }
    async fleetIncome(fleetId, input) {
        return this.fleetInsightsService.getFleetIncome(fleetId, input);
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _financialtimelinedto.FinancialTimeline
        ]),
    _ts_param._(0, (0, _graphql.Args)('fleetId', {
        type: ()=>_graphql.ID
    })),
    _ts_param._(1, (0, _graphql.Args)('input', {
        type: ()=>_chartfilterinput.ChartFilterInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Number,
        typeof _chartfilterinput.ChartFilterInput === "undefined" ? Object : _chartfilterinput.ChartFilterInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], FleetInsightsResolver.prototype, "fleetIncome", null);
FleetInsightsResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _fleetinsightsservice.FleetInsightsService === "undefined" ? Object : _fleetinsightsservice.FleetInsightsService
    ])
], FleetInsightsResolver);


/***/ }),
/* 379 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "FinancialTimeline", ({
    enumerable: true,
    get: function() {
        return FinancialTimeline;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let FinancialTimeline = class FinancialTimeline {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        nullable: false
    }),
    _ts_metadata._("design:type", Number)
], FinancialTimeline.prototype, "amount", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Date, {
        description: 'Any date within the range of revenue interval.'
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], FinancialTimeline.prototype, "anyDate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], FinancialTimeline.prototype, "dateString", void 0);
FinancialTimeline = _ts_decorate._([
    (0, _graphql.ObjectType)('FinancialTimeline')
], FinancialTimeline);


/***/ }),
/* 380 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopOrderInsightsModule", ({
    enumerable: true,
    get: function() {
        return ShopOrderInsightsModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _shoporderinsightsservice = __webpack_require__(381);
const _shoporderinsightsresolver = __webpack_require__(382);
let ShopOrderInsightsModule = class ShopOrderInsightsModule {
};
ShopOrderInsightsModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.ShopOrderEntity
            ])
        ],
        providers: [
            _shoporderinsightsservice.ShopOrderInsightsService,
            _shoporderinsightsresolver.ShopOrderInsightsResolver
        ]
    })
], ShopOrderInsightsModule);


/***/ }),
/* 381 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopOrderInsightsService", ({
    enumerable: true,
    get: function() {
        return ShopOrderInsightsService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let ShopOrderInsightsService = class ShopOrderInsightsService {
    constructor(shopOrderRepository){
        this.shopOrderRepository = shopOrderRepository;
    }
    async shopAverageDeliveryTime(input) {
        const query = this.shopOrderRepository.createQueryBuilder('shop_order');
        // deduct fullfillmentTime from createdAt and convert to minutes
        query.select('AVG(TIMESTAMPDIFF(MINUTE, shopOrder.fullfillmentTime, shopOrder.createdAt))', 'averageDeliveryTime');
        query.where('shopOrder.fullfillmentTime IS NOT NULL');
        if (input.shopId) {
            query.andWhere('shopOrder.shopId = :shopId', {
                shopId: input.shopId
            });
        }
        if (input.startDate) {
            query.andWhere('shopOrder.createdAt >= :startDate', {
                startDate: input.startDate
            });
        }
        if (input.endDate) {
            query.andWhere('shopOrder.createdAt <= :endDate', {
                endDate: input.endDate
            });
        }
        return query[0].averageDeliveryTime;
    }
};
ShopOrderInsightsService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ShopOrderEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], ShopOrderInsightsService);


/***/ }),
/* 382 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopOrderInsightsResolver", ({
    enumerable: true,
    get: function() {
        return ShopOrderInsightsResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _shoporderinsightsservice = __webpack_require__(381);
const _shopdaterangepairinput = __webpack_require__(383);
let ShopOrderInsightsResolver = class ShopOrderInsightsResolver {
    constructor(shopOrderInsightsService){
        this.shopOrderInsightsService = shopOrderInsightsService;
    }
    async getShopAverageDeliveryTime(input) {
        return this.shopOrderInsightsService.shopAverageDeliveryTime(input);
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>_graphql.Float, {
        description: 'Get the average delivery time for a shop within a date range in minutes'
    }),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_shopdaterangepairinput.ShopDateRangePairInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _shopdaterangepairinput.ShopDateRangePairInput === "undefined" ? Object : _shopdaterangepairinput.ShopDateRangePairInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ShopOrderInsightsResolver.prototype, "getShopAverageDeliveryTime", null);
ShopOrderInsightsResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _shoporderinsightsservice.ShopOrderInsightsService === "undefined" ? Object : _shoporderinsightsservice.ShopOrderInsightsService
    ])
], ShopOrderInsightsResolver);


/***/ }),
/* 383 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopDateRangePairInput", ({
    enumerable: true,
    get: function() {
        return ShopDateRangePairInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let ShopDateRangePairInput = class ShopDateRangePairInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ShopDateRangePairInput.prototype, "shopId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopDateRangePairInput.prototype, "startDate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ShopDateRangePairInput.prototype, "endDate", void 0);
ShopDateRangePairInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ShopDateRangePairInput);


/***/ }),
/* 384 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiOrderInsightsModule", ({
    enumerable: true,
    get: function() {
        return TaxiOrderInsightsModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
let TaxiOrderInsightsModule = class TaxiOrderInsightsModule {
};
TaxiOrderInsightsModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.TaxiOrderEntity
            ])
        ]
    })
], TaxiOrderInsightsModule);


/***/ }),
/* 385 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ProviderWalletInsightsModule", ({
    enumerable: true,
    get: function() {
        return ProviderWalletInsightsModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _providerwalletinsightsservice = __webpack_require__(386);
const _providerwalletinsightsresolver = __webpack_require__(388);
const _insightshelperservice = __webpack_require__(387);
let ProviderWalletInsightsModule = class ProviderWalletInsightsModule {
};
ProviderWalletInsightsModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.ProviderWalletEntity,
                _database.ProviderTransactionEntity
            ])
        ],
        providers: [
            _providerwalletinsightsservice.ProviderWalletInsightsService,
            _providerwalletinsightsresolver.ProviderWalletInsightsResolver,
            _insightshelperservice.InsightsHelperService
        ]
    })
], ProviderWalletInsightsModule);


/***/ }),
/* 386 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ProviderWalletInsightsService", ({
    enumerable: true,
    get: function() {
        return ProviderWalletInsightsService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
const _insightshelperservice = __webpack_require__(387);
let ProviderWalletInsightsService = class ProviderWalletInsightsService {
    constructor(providerTransactionEntity, insightsHelperService){
        this.providerTransactionEntity = providerTransactionEntity;
        this.insightsHelperService = insightsHelperService;
    }
    async getProviderWalletBalanceHistory(currency, input) {
        let query = this.providerTransactionEntity.createQueryBuilder('transaction').select('currency', 'currency').select('SUM(transaction.amount)', 'amount').where('transaction.currency = :currency', {
            currency
        });
        query = this.insightsHelperService.getQueryBuilderForChartFilterInput(query, 'transaction', 'createdAt', input);
        return query.getRawMany();
    }
    async getProviderRevenueExpenseHistory(currency, input) {
        return [];
    }
    async getProviderExpenseBreakdownHistory(currency, input) {
        return [];
    }
};
ProviderWalletInsightsService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ProviderTransactionEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _insightshelperservice.InsightsHelperService === "undefined" ? Object : _insightshelperservice.InsightsHelperService
    ])
], ProviderWalletInsightsService);


/***/ }),
/* 387 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "InsightsHelperService", ({
    enumerable: true,
    get: function() {
        return InsightsHelperService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
let InsightsHelperService = class InsightsHelperService {
    getQueryBuilderForChartFilterInput(query, tableName, dateFieldName, input) {
        return query.select(this.selectField(tableName, dateFieldName, input), 'dateString').select(`ANY_VALUE(${tableName}.${dateFieldName})`, 'anyDate').where(`${tableName}.${dateFieldName} >= :startDate`, {
            startDate: input.startDate
        }).andWhere(`${tableName}.${dateFieldName} <= :endDate`, {
            endDate: input.endDate
        }).groupBy(this.selectField(tableName, dateFieldName, input));
    }
    selectField(tableName, dateFieldName, input) {
        _common.Logger.log(`interval: ${input.interval}`, 'InsightsHelperService');
        _common.Logger.log(`tableName: ${tableName}`, 'InsightsHelperService');
        _common.Logger.log(`dateFieldName: ${dateFieldName}`, 'InsightsHelperService');
        switch(input.interval){
            case _database.ChartInterval.Daily:
                return `DATE(${tableName}.${dateFieldName})`;
            case _database.ChartInterval.Monthly:
                return `DATE_FORMAT(${tableName}.${dateFieldName}, '%Y-%m')`;
            case _database.ChartInterval.Yearly:
                return `DATE_FORMAT(${tableName}.${dateFieldName}, '%Y')`;
            case _database.ChartInterval.Quarterly:
                return `CONCAT(YEAR(${tableName}.${dateFieldName}), '-', QUARTER(${tableName}.${dateFieldName}))`;
            default:
                throw new Error('Invalid interval');
        }
    }
};
InsightsHelperService = _ts_decorate._([
    (0, _common.Injectable)()
], InsightsHelperService);


/***/ }),
/* 388 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ProviderWalletInsightsResolver", ({
    enumerable: true,
    get: function() {
        return ProviderWalletInsightsResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _providerwalletinsightsservice = __webpack_require__(386);
const _financialtimelinedto = __webpack_require__(379);
const _chartfilterinput = __webpack_require__(355);
const _revenueexpensepairdto = __webpack_require__(389);
const _providerexpensebreakdownrecorddto = __webpack_require__(390);
let ProviderWalletInsightsResolver = class ProviderWalletInsightsResolver {
    constructor(providerWalletInsightsService){
        this.providerWalletInsightsService = providerWalletInsightsService;
    }
    async providerWalletBalanceHistory(currency, input) {
        return this.providerWalletInsightsService.getProviderWalletBalanceHistory(currency, input);
    }
    providerRevenueExpenseHistory(currency, input) {
        return this.providerWalletInsightsService.getProviderRevenueExpenseHistory(currency, input);
    }
    providerExpenseBreakdownHistory(currency, input) {
        return this.providerWalletInsightsService.getProviderExpenseBreakdownHistory(currency, input);
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _financialtimelinedto.FinancialTimeline
        ]),
    _ts_param._(0, (0, _graphql.Args)('currency')),
    _ts_param._(1, (0, _graphql.Args)('input', {
        type: ()=>_chartfilterinput.ChartFilterInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String,
        typeof _chartfilterinput.ChartFilterInput === "undefined" ? Object : _chartfilterinput.ChartFilterInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], ProviderWalletInsightsResolver.prototype, "providerWalletBalanceHistory", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _revenueexpensepairdto.RevenueExpensePair
        ]),
    _ts_param._(0, (0, _graphql.Args)('currency')),
    _ts_param._(1, (0, _graphql.Args)('input', {
        type: ()=>_chartfilterinput.ChartFilterInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String,
        typeof _chartfilterinput.ChartFilterInput === "undefined" ? Object : _chartfilterinput.ChartFilterInput
    ]),
    _ts_metadata._("design:returntype", typeof Promise === "undefined" ? Object : Promise)
], ProviderWalletInsightsResolver.prototype, "providerRevenueExpenseHistory", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _providerexpensebreakdownrecorddto.ProviderExpenseBreakdownRecord
        ]),
    _ts_param._(0, (0, _graphql.Args)('currency')),
    _ts_param._(1, (0, _graphql.Args)('input', {
        type: ()=>_chartfilterinput.ChartFilterInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String,
        typeof _chartfilterinput.ChartFilterInput === "undefined" ? Object : _chartfilterinput.ChartFilterInput
    ]),
    _ts_metadata._("design:returntype", typeof Promise === "undefined" ? Object : Promise)
], ProviderWalletInsightsResolver.prototype, "providerExpenseBreakdownHistory", null);
ProviderWalletInsightsResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _providerwalletinsightsservice.ProviderWalletInsightsService === "undefined" ? Object : _providerwalletinsightsservice.ProviderWalletInsightsService
    ])
], ProviderWalletInsightsResolver);


/***/ }),
/* 389 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "RevenueExpensePair", ({
    enumerable: true,
    get: function() {
        return RevenueExpensePair;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let RevenueExpensePair = class RevenueExpensePair {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], RevenueExpensePair.prototype, "revenue", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], RevenueExpensePair.prototype, "expense", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], RevenueExpensePair.prototype, "anyDate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], RevenueExpensePair.prototype, "dateString", void 0);
RevenueExpensePair = _ts_decorate._([
    (0, _graphql.ObjectType)('RevenueExpensePair')
], RevenueExpensePair);


/***/ }),
/* 390 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ProviderExpenseBreakdownRecord", ({
    enumerable: true,
    get: function() {
        return ProviderExpenseBreakdownRecord;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let ProviderExpenseBreakdownRecord = class ProviderExpenseBreakdownRecord {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ProviderExpenseType),
    _ts_metadata._("design:type", typeof _database.ProviderExpenseType === "undefined" ? Object : _database.ProviderExpenseType)
], ProviderExpenseBreakdownRecord.prototype, "expenseType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], ProviderExpenseBreakdownRecord.prototype, "value", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], ProviderExpenseBreakdownRecord.prototype, "dateString", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], ProviderExpenseBreakdownRecord.prototype, "anyDate", void 0);
ProviderExpenseBreakdownRecord = _ts_decorate._([
    (0, _graphql.ObjectType)('ProviderExpenseBreakdownRecord')
], ProviderExpenseBreakdownRecord);


/***/ }),
/* 391 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingInsightsModule", ({
    enumerable: true,
    get: function() {
        return ParkingInsightsModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _parkinginsightsservice = __webpack_require__(392);
const _parkinginsightsresolver = __webpack_require__(393);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
let ParkingInsightsModule = class ParkingInsightsModule {
};
ParkingInsightsModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.ParkSpotEntity,
                _database.ParkingWalletEntity,
                _database.ParkingTransactionEntity
            ])
        ],
        providers: [
            _parkinginsightsservice.ParkingInsightsService,
            _parkinginsightsresolver.ParkingInsightsResolver
        ]
    })
], ParkingInsightsModule);


/***/ }),
/* 392 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingInsightsService", ({
    enumerable: true,
    get: function() {
        return ParkingInsightsService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _typeorm1 = __webpack_require__(16);
const _database = __webpack_require__(15);
let ParkingInsightsService = class ParkingInsightsService {
    constructor(parkingTransactionRepository){
        this.parkingTransactionRepository = parkingTransactionRepository;
    }
    async topEarningParkSpots(input) {
        const topEarningParkSpots = await this.parkingTransactionRepository.createQueryBuilder('parkingTransaction').select('SUM(parkingTransaction.amount)', 'totalAmount').addSelect('COUNT(parkingTransaction.id)', 'totalTransactions').addSelect('ANY_VALUE(parkSpot.currency)', 'currency').addSelect('parkSpot.id', 'id').addSelect('media.address', 'avatarUrl').addSelect('parkSpot.name', 'name').innerJoin('parkingTransaction.parkSpot', 'parkSpot').innerJoin('parkSpot.media', 'media').where('parkingTransaction.currency = :currency', {
            currency: input.currency
        }).groupBy('parkSpot.id').orderBy('totalAmount', 'DESC').limit(10).getRawMany();
        return topEarningParkSpots;
    }
};
ParkingInsightsService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.ParkingTransactionEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], ParkingInsightsService);


/***/ }),
/* 393 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ParkingInsightsResolver", ({
    enumerable: true,
    get: function() {
        return ParkingInsightsResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _parkinginsightsservice = __webpack_require__(392);
const _leaderboarditemdto = __webpack_require__(357);
let ParkingInsightsResolver = class ParkingInsightsResolver {
    constructor(parkingInsightsService){
        this.parkingInsightsService = parkingInsightsService;
    }
    async topEarningParkSpots(currency) {
        return this.parkingInsightsService.topEarningParkSpots({
            currency
        });
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _leaderboarditemdto.LeaderboardItemDTO
        ]),
    _ts_param._(0, (0, _graphql.Args)('currency', {
        type: ()=>String
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], ParkingInsightsResolver.prototype, "topEarningParkSpots", null);
ParkingInsightsResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _parkinginsightsservice.ParkingInsightsService === "undefined" ? Object : _parkinginsightsservice.ParkingInsightsService
    ])
], ParkingInsightsResolver);


/***/ }),
/* 394 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriversInsightsModule", ({
    enumerable: true,
    get: function() {
        return DriversInsightsModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _driversinsightsresolver = __webpack_require__(395);
const _driversinsightsservice = __webpack_require__(396);
let DriversInsightsModule = class DriversInsightsModule {
};
DriversInsightsModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.DriverTransactionEntity,
                _database.DriverEntity
            ])
        ],
        providers: [
            _driversinsightsresolver.DriversInsightsResolver,
            _driversinsightsservice.DriversInsightsService
        ]
    })
], DriversInsightsModule);


/***/ }),
/* 395 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriversInsightsResolver", ({
    enumerable: true,
    get: function() {
        return DriversInsightsResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _driversinsightsservice = __webpack_require__(396);
const _leaderboarditemdto = __webpack_require__(357);
const _activeinactiveusersdto = __webpack_require__(351);
let DriversInsightsResolver = class DriversInsightsResolver {
    constructor(driversInsightsService){
        this.driversInsightsService = driversInsightsService;
    }
    async topEarningDrivers(currency) {
        return this.driversInsightsService.getTopEarningDrivers({
            currency
        });
    }
    async topTripsCompletedDrivers() {
        return this.driversInsightsService.topTripsCompletedDrivers();
    }
    async activeInactiveDrivers() {
        return this.driversInsightsService.getActiveInactiveDrivers();
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _leaderboarditemdto.LeaderboardItemDTO
        ]),
    _ts_param._(0, (0, _graphql.Args)('currency', {
        type: ()=>String
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        String
    ]),
    _ts_metadata._("design:returntype", Promise)
], DriversInsightsResolver.prototype, "topEarningDrivers", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _leaderboarditemdto.LeaderboardItemDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], DriversInsightsResolver.prototype, "topTripsCompletedDrivers", null);
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _activeinactiveusersdto.ActiveInactiveUsersDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], DriversInsightsResolver.prototype, "activeInactiveDrivers", null);
DriversInsightsResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _driversinsightsservice.DriversInsightsService === "undefined" ? Object : _driversinsightsservice.DriversInsightsService
    ])
], DriversInsightsResolver);


/***/ }),
/* 396 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriversInsightsService", ({
    enumerable: true,
    get: function() {
        return DriversInsightsService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(16);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(14);
const _activeinactiveusersdto = __webpack_require__(351);
let DriversInsightsService = class DriversInsightsService {
    constructor(driverRepository, driverTransactionRepository){
        this.driverRepository = driverRepository;
        this.driverTransactionRepository = driverTransactionRepository;
    }
    async getTopEarningDrivers(input) {
        // Look through the driver_transaction table and sum the total amount spent by each driver
        const topSpendingCustomers = await this.driverTransactionRepository.createQueryBuilder('driver_transaction').select('driver.id as id').addSelect('driver.firstName as firstName').addSelect('driver.lastName as lastName').addSelect('media.address as avatarUrl').addSelect('SUM(driver_transaction.amount) as totalAmount').addSelect('ANY_VALUE(driver_transaction.currency) as currency').innerJoin('driver_transaction.driver', 'driver').innerJoin('driver.media', 'media').where('driver_transaction.currency = :currency', {
            currency: input.currency
        }).groupBy('driver.id').orderBy('totalAmount', 'DESC').limit(10).getRawMany();
        // join firstName and lastName to create a name field
        topSpendingCustomers.forEach((driver)=>{
            driver.name = `${driver.firstName} ${driver.lastName}`;
        });
        return topSpendingCustomers;
    }
    topTripsCompletedDrivers() {
        // Look through the driver_transaction table and sum the total number of trips completed by each driver
        return this.driverTransactionRepository.createQueryBuilder('driver_transaction').select('driver.id as id').addSelect('driver.firstName as firstName').addSelect('driver.lastName as lastName').addSelect('media.address as avatarUrl').addSelect('COUNT(driver_transaction.id) as totalCount').innerJoin('driver_transaction.driver', 'driver').innerJoin('driver.media', 'media').groupBy('driver.id').orderBy('totalTransactions', 'DESC').limit(10).getRawMany();
    }
    async getActiveInactiveDrivers() {
        const thirteendDaysAgo = new Date(new Date().getTime() - 30 * 24 * 60 * 60 * 1000);
        const activeUsers = await this.driverRepository.count({
            where: {
                lastSeenTimestamp: (0, _typeorm.MoreThan)(thirteendDaysAgo)
            }
        });
        const inactiveUsers = await this.driverRepository.count({
            where: {
                lastSeenTimestamp: (0, _typeorm.LessThan)(thirteendDaysAgo)
            }
        });
        return [
            {
                count: activeUsers,
                date: new Date(),
                activityLevel: _activeinactiveusersdto.UserActivityLevel.Active
            },
            {
                count: inactiveUsers,
                date: new Date(new Date().getTime() - 30 * 24 * 60 * 60 * 1000),
                activityLevel: _activeinactiveusersdto.UserActivityLevel.Inactive
            }
        ];
    }
};
DriversInsightsService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm1.InjectRepository)(_database.DriverEntity)),
    _ts_param._(1, (0, _typeorm1.InjectRepository)(_database.DriverTransactionEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.Repository === "undefined" ? Object : _typeorm.Repository,
        typeof _typeorm.Repository === "undefined" ? Object : _typeorm.Repository
    ])
], DriversInsightsService);


/***/ }),
/* 397 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopsInsightsModule", ({
    enumerable: true,
    get: function() {
        return ShopsInsightsModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _shopsinsightsresolver = __webpack_require__(398);
const _shopsinsightsservice = __webpack_require__(399);
let ShopsInsightsModule = class ShopsInsightsModule {
};
ShopsInsightsModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.ShopTransactionEntity
            ])
        ],
        providers: [
            _shopsinsightsresolver.ShopsInsightsResolver,
            _shopsinsightsservice.ShopsInsightsService
        ]
    })
], ShopsInsightsModule);


/***/ }),
/* 398 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopsInsightsResolver", ({
    enumerable: true,
    get: function() {
        return ShopsInsightsResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _shopsinsightsservice = __webpack_require__(399);
const _leaderboarditemdto = __webpack_require__(357);
let ShopsInsightsResolver = class ShopsInsightsResolver {
    constructor(shopsInsightsService){
        this.shopsInsightsService = shopsInsightsService;
    }
    async topEarningShops() {
        return this.shopsInsightsService.getTopEarningShops();
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _leaderboarditemdto.LeaderboardItemDTO
        ]),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], ShopsInsightsResolver.prototype, "topEarningShops", null);
ShopsInsightsResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _shopsinsightsservice.ShopsInsightsService === "undefined" ? Object : _shopsinsightsservice.ShopsInsightsService
    ])
], ShopsInsightsResolver);


/***/ }),
/* 399 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ShopsInsightsService", ({
    enumerable: true,
    get: function() {
        return ShopsInsightsService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(16);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(14);
let ShopsInsightsService = class ShopsInsightsService {
    constructor(shopTransactionRepository){
        this.shopTransactionRepository = shopTransactionRepository;
    }
    async getTopEarningShops() {
        // Look through the shop_transaction table and sum the total amount spent by each shop
        const topSpendingCustomers = await this.shopTransactionRepository.createQueryBuilder('shop_transaction').select('shop.id as id').addSelect('shop.name').addSelect('media.address as avatarUrl').addSelect('SUM(shop_transaction.amount) as totalAmount').addSelect('COUNT(shop_transaction.id) as totalTransactions').innerJoin('shop_transaction.shop', 'shop').innerJoin('shop.image', 'media').groupBy('shop.id').orderBy('totalAmount', 'DESC').limit(10).getRawMany();
        return topSpendingCustomers;
    }
};
ShopsInsightsService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm1.InjectRepository)(_database.ShopTransactionEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm.Repository === "undefined" ? Object : _typeorm.Repository
    ])
], ShopsInsightsService);


/***/ }),
/* 400 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ZonePriceModule", ({
    enumerable: true,
    get: function() {
        return ZonePriceModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _zonepriceinput = __webpack_require__(401);
const _zonepricedto = __webpack_require__(130);
const _zonepricecategorydto = __webpack_require__(402);
const _zonepricecategoryinput = __webpack_require__(403);
let ZonePriceModule = class ZonePriceModule {
};
ZonePriceModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.ZonePriceEntity,
                        _database.ZonePriceCategoryEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.ZonePriceEntity,
                        DTOClass: _zonepricedto.ZonePriceDTO,
                        CreateDTOClass: _zonepriceinput.ZonePriceInput,
                        UpdateDTOClass: _zonepriceinput.ZonePriceInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.ZonePriceCategoryEntity,
                        DTOClass: _zonepricecategorydto.ZonePriceCategoryDTO,
                        CreateDTOClass: _zonepricecategoryinput.ZonePriceCategoryInput,
                        UpdateDTOClass: _zonepricecategoryinput.ZonePriceCategoryInput,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    }
                ]
            })
        ]
    })
], ZonePriceModule);


/***/ }),
/* 401 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ZonePriceInput", ({
    enumerable: true,
    get: function() {
        return ZonePriceInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let ZonePriceInput = class ZonePriceInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], ZonePriceInput.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            [
                _database.Point
            ]
        ]),
    _ts_metadata._("design:type", Array)
], ZonePriceInput.prototype, "from", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            [
                _database.Point
            ]
        ]),
    _ts_metadata._("design:type", Array)
], ZonePriceInput.prototype, "to", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float),
    _ts_metadata._("design:type", Number)
], ZonePriceInput.prototype, "cost", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _database.TimeMultiplier
        ]),
    _ts_metadata._("design:type", Array)
], ZonePriceInput.prototype, "timeMultipliers", void 0);
ZonePriceInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ZonePriceInput);


/***/ }),
/* 402 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ZonePriceCategoryDTO", ({
    enumerable: true,
    get: function() {
        return ZonePriceCategoryDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _nestjsquerygraphql = __webpack_require__(17);
const _zonepricedto = __webpack_require__(130);
const _graphql = __webpack_require__(13);
let ZonePriceCategoryDTO = class ZonePriceCategoryDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ZonePriceCategoryDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], ZonePriceCategoryDTO.prototype, "name", void 0);
ZonePriceCategoryDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('ZonePriceCategory'),
    (0, _nestjsquerygraphql.OffsetConnection)('zonePrices', ()=>_zonepricedto.ZonePriceDTO, {})
], ZonePriceCategoryDTO);


/***/ }),
/* 403 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ZonePriceCategoryInput", ({
    enumerable: true,
    get: function() {
        return ZonePriceCategoryInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let ZonePriceCategoryInput = class ZonePriceCategoryInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String),
    _ts_metadata._("design:type", String)
], ZonePriceCategoryInput.prototype, "name", void 0);
ZonePriceCategoryInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ZonePriceCategoryInput);


/***/ }),
/* 404 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverDocumentModule", ({
    enumerable: true,
    get: function() {
        return DriverDocumentModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _database = __webpack_require__(15);
const _driverdocumentdto = __webpack_require__(123);
const _jwtauthguard = __webpack_require__(29);
const _driverdocumentretentionpolicydto = __webpack_require__(124);
const _driverdocumentinput = __webpack_require__(405);
const _driverdocumentretentionpolicyinput = __webpack_require__(406);
const _drivertodriverdocumentdto = __webpack_require__(122);
const _drivertodriverdocumentinput = __webpack_require__(407);
let DriverDocumentModule = class DriverDocumentModule {
};
DriverDocumentModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.DriverDocumentEntity,
                        _database.DriverToDriverDocumentEntity,
                        _database.DriverDocumentRetentionPolicyEntity
                    ])
                ],
                resolvers: [
                    {
                        DTOClass: _driverdocumentdto.DriverDocumentDTO,
                        EntityClass: _database.DriverDocumentEntity,
                        CreateDTOClass: _driverdocumentinput.DriverDocumentInput,
                        UpdateDTOClass: _driverdocumentinput.DriverDocumentInput,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        DTOClass: _driverdocumentretentionpolicydto.DriverDocumentRetentionPolicyDTO,
                        EntityClass: _database.DriverDocumentRetentionPolicyEntity,
                        CreateDTOClass: _driverdocumentretentionpolicyinput.DriverDocumentRetentionPolicyInput,
                        UpdateDTOClass: _driverdocumentretentionpolicyinput.DriverDocumentRetentionPolicyInput,
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.DriverToDriverDocumentEntity,
                        DTOClass: _drivertodriverdocumentdto.DriverToDriverDocumentDTO,
                        CreateDTOClass: _drivertodriverdocumentinput.DriverToDriverDocumentInput,
                        UpdateDTOClass: _drivertodriverdocumentinput.DriverToDriverDocumentInput,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ],
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        delete: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        create: {
                            many: {
                                disabled: true
                            }
                        }
                    }
                ]
            })
        ]
    })
], DriverDocumentModule);


/***/ }),
/* 405 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverDocumentInput", ({
    enumerable: true,
    get: function() {
        return DriverDocumentInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let DriverDocumentInput = class DriverDocumentInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], DriverDocumentInput.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], DriverDocumentInput.prototype, "isEnabled", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], DriverDocumentInput.prototype, "isRequired", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>Boolean, {
        nullable: false
    }),
    _ts_metadata._("design:type", Boolean)
], DriverDocumentInput.prototype, "hasExpiryDate", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], DriverDocumentInput.prototype, "notificationDaysBeforeExpiry", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], DriverDocumentInput.prototype, "numberOfImages", void 0);
DriverDocumentInput = _ts_decorate._([
    (0, _graphql.InputType)()
], DriverDocumentInput);


/***/ }),
/* 406 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverDocumentRetentionPolicyInput", ({
    enumerable: true,
    get: function() {
        return DriverDocumentRetentionPolicyInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let DriverDocumentRetentionPolicyInput = class DriverDocumentRetentionPolicyInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], DriverDocumentRetentionPolicyInput.prototype, "title", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], DriverDocumentRetentionPolicyInput.prototype, "deleteAfterDays", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverDocumentRetentionPolicyInput.prototype, "driverDocumentId", void 0);
DriverDocumentRetentionPolicyInput = _ts_decorate._([
    (0, _graphql.InputType)()
], DriverDocumentRetentionPolicyInput);


/***/ }),
/* 407 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverToDriverDocumentInput", ({
    enumerable: true,
    get: function() {
        return DriverToDriverDocumentInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let DriverToDriverDocumentInput = class DriverToDriverDocumentInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverToDriverDocumentInput.prototype, "driverId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverToDriverDocumentInput.prototype, "driverDocumentId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverToDriverDocumentInput.prototype, "mediaId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverToDriverDocumentInput.prototype, "retentionPolicyId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.GraphQLISODateTime, {
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], DriverToDriverDocumentInput.prototype, "expiresAt", void 0);
DriverToDriverDocumentInput = _ts_decorate._([
    (0, _graphql.InputType)()
], DriverToDriverDocumentInput);


/***/ }),
/* 408 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverShiftRuleModule", ({
    enumerable: true,
    get: function() {
        return DriverShiftRuleModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _database = __webpack_require__(15);
const _drivershiftruledto = __webpack_require__(409);
const _jwtauthguard = __webpack_require__(29);
const _drivershiftruleinput = __webpack_require__(410);
let DriverShiftRuleModule = class DriverShiftRuleModule {
};
DriverShiftRuleModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.DriverShiftRuleEntity
                    ])
                ],
                resolvers: [
                    {
                        DTOClass: _drivershiftruledto.DriverShiftRuleDTO,
                        EntityClass: _database.DriverShiftRuleEntity,
                        CreateDTOClass: _drivershiftruleinput.DriverShiftRuleInput,
                        UpdateDTOClass: _drivershiftruleinput.DriverShiftRuleInput,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        read: {
                            one: {
                                disabled: true
                            }
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    }
                ]
            })
        ]
    })
], DriverShiftRuleModule);


/***/ }),
/* 409 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverShiftRuleDTO", ({
    enumerable: true,
    get: function() {
        return DriverShiftRuleDTO;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
let DriverShiftRuleDTO = class DriverShiftRuleDTO {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], DriverShiftRuleDTO.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.TimeFrequency, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.TimeFrequency === "undefined" ? Object : _database.TimeFrequency)
], DriverShiftRuleDTO.prototype, "timeFrequency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], DriverShiftRuleDTO.prototype, "maxHoursPerFrequency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], DriverShiftRuleDTO.prototype, "mandatoryBreakMinutes", void 0);
DriverShiftRuleDTO = _ts_decorate._([
    (0, _graphql.ObjectType)('DriverShiftRule')
], DriverShiftRuleDTO);


/***/ }),
/* 410 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "DriverShiftRuleInput", ({
    enumerable: true,
    get: function() {
        return DriverShiftRuleInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let DriverShiftRuleInput = class DriverShiftRuleInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.TimeFrequency, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.TimeFrequency === "undefined" ? Object : _database.TimeFrequency)
], DriverShiftRuleInput.prototype, "timeFrequency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], DriverShiftRuleInput.prototype, "maxHoursPerFrequency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Int),
    _ts_metadata._("design:type", Number)
], DriverShiftRuleInput.prototype, "mandatoryBreakMinutes", void 0);
DriverShiftRuleInput = _ts_decorate._([
    (0, _graphql.InputType)()
], DriverShiftRuleInput);


/***/ }),
/* 411 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ComplaintModule", ({
    enumerable: true,
    get: function() {
        return ComplaintModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _nestjsquerygraphql = __webpack_require__(17);
const _nestjsquerytypeorm = __webpack_require__(26);
const _common = __webpack_require__(7);
const _database = __webpack_require__(15);
const _jwtauthguard = __webpack_require__(29);
const _complaintsubscriptionservice = __webpack_require__(412);
const _taxisupportrequestactivitydto = __webpack_require__(101);
const _taxisupportrequestdto = __webpack_require__(100);
const _taxisupportrequestresolver = __webpack_require__(413);
const _taxisupportrequestservice = __webpack_require__(414);
let ComplaintModule = class ComplaintModule {
};
ComplaintModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _nestjsquerygraphql.NestjsQueryGraphQLModule.forFeature({
                imports: [
                    _nestjsquerytypeorm.NestjsQueryTypeOrmModule.forFeature([
                        _database.TaxiSupportRequestEntity,
                        _database.TaxiSupportRequestActivityEntity
                    ])
                ],
                resolvers: [
                    {
                        EntityClass: _database.TaxiSupportRequestEntity,
                        DTOClass: _taxisupportrequestdto.TaxiSupportRequestDTO,
                        create: {
                            disabled: true
                        },
                        update: {
                            many: {
                                disabled: true
                            }
                        },
                        delete: {
                            disabled: true
                        },
                        enableAggregate: true,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.OFFSET,
                        enableTotalCount: true,
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    },
                    {
                        EntityClass: _database.TaxiSupportRequestActivityEntity,
                        DTOClass: _taxisupportrequestactivitydto.TaxiSupportRequestActivityDTO,
                        pagingStrategy: _nestjsquerygraphql.PagingStrategies.NONE,
                        create: {
                            many: {
                                disabled: true
                            }
                        },
                        update: {
                            disabled: true
                        },
                        delete: {
                            disabled: true
                        },
                        read: {
                            disabled: true
                        },
                        guards: [
                            _jwtauthguard.JwtAuthGuard
                        ]
                    }
                ]
            })
        ],
        providers: [
            _complaintsubscriptionservice.ComplaintSubscriptionService,
            _database.RedisPubSubProvider.provider(),
            _taxisupportrequestresolver.TaxiSupportRequestResolver,
            _taxisupportrequestservice.TaxiSupportRequestService
        ]
    })
], ComplaintModule);


/***/ }),
/* 412 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ComplaintSubscriptionService", ({
    enumerable: true,
    get: function() {
        return ComplaintSubscriptionService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _nestjsquerygraphql = __webpack_require__(17);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _graphqlredissubscriptions = __webpack_require__(18);
const _taxisupportrequestdto = __webpack_require__(100);
let ComplaintSubscriptionService = class ComplaintSubscriptionService {
    constructor(pubSub){
        this.pubSub = pubSub;
    }
    complaintCreated() {
        return this.pubSub.asyncIterator('complaintCreated');
    }
};
_ts_decorate._([
    (0, _graphql.Subscription)(()=>_taxisupportrequestdto.TaxiSupportRequestDTO, {
        filter: (payload, variables, context)=>{
            return payload.adminIds.includes(context.req.user.id);
        }
    }),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", void 0)
], ComplaintSubscriptionService.prototype, "complaintCreated", null);
ComplaintSubscriptionService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _nestjsquerygraphql.InjectPubSub)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _graphqlredissubscriptions.RedisPubSub === "undefined" ? Object : _graphqlredissubscriptions.RedisPubSub
    ])
], ComplaintSubscriptionService);


/***/ }),
/* 413 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiSupportRequestResolver", ({
    enumerable: true,
    get: function() {
        return TaxiSupportRequestResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _taxisupportrequestservice = __webpack_require__(414);
const _common = __webpack_require__(7);
const _jwtauthguard = __webpack_require__(29);
const _createtaxisupportrequestcommentinput = __webpack_require__(415);
const _assigntaxisupportrequestinput = __webpack_require__(416);
const _changetaxisupportrequeststatusinput = __webpack_require__(417);
const _taxisupportrequestactivitydto = __webpack_require__(101);
let TaxiSupportRequestResolver = class TaxiSupportRequestResolver {
    constructor(taxiSupportRequestService, context){
        this.taxiSupportRequestService = taxiSupportRequestService;
        this.context = context;
    }
    async addCommentToTaxiSupportRequest(input) {
        return this.taxiSupportRequestService.addCommentToTaxiSupportRequest({
            staffId: this.context.req.user.id,
            input
        });
    }
    async assignTaxiSupportRequestToStaff(input) {
        return this.taxiSupportRequestService.assignTaxiSupportRequestToStaff({
            staffId: this.context.req.user.id,
            input
        });
    }
    async changeTaxiSupportRequestStatus(input) {
        return this.taxiSupportRequestService.changeTaxiSupportRequestStatus({
            staffId: this.context.req.user.id,
            input
        });
    }
};
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_taxisupportrequestactivitydto.TaxiSupportRequestActivityDTO),
    _ts_param._(0, (0, _graphql.Args)('input')),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _createtaxisupportrequestcommentinput.CreateTaxiSupportRequestCommentInput === "undefined" ? Object : _createtaxisupportrequestcommentinput.CreateTaxiSupportRequestCommentInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], TaxiSupportRequestResolver.prototype, "addCommentToTaxiSupportRequest", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_taxisupportrequestactivitydto.TaxiSupportRequestActivityDTO),
    _ts_param._(0, (0, _graphql.Args)('input')),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _assigntaxisupportrequestinput.AssignTaxiSupportRequestInput === "undefined" ? Object : _assigntaxisupportrequestinput.AssignTaxiSupportRequestInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], TaxiSupportRequestResolver.prototype, "assignTaxiSupportRequestToStaff", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>_taxisupportrequestactivitydto.TaxiSupportRequestActivityDTO),
    _ts_param._(0, (0, _graphql.Args)('input')),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _changetaxisupportrequeststatusinput.ChangeTaxiSupportRequestStatusInput === "undefined" ? Object : _changetaxisupportrequeststatusinput.ChangeTaxiSupportRequestStatusInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], TaxiSupportRequestResolver.prototype, "changeTaxiSupportRequestStatus", null);
TaxiSupportRequestResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(1, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _taxisupportrequestservice.TaxiSupportRequestService === "undefined" ? Object : _taxisupportrequestservice.TaxiSupportRequestService,
        typeof UserContext === "undefined" ? Object : UserContext
    ])
], TaxiSupportRequestResolver);


/***/ }),
/* 414 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "TaxiSupportRequestService", ({
    enumerable: true,
    get: function() {
        return TaxiSupportRequestService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let TaxiSupportRequestService = class TaxiSupportRequestService {
    constructor(taxiSupportRequestRepository, taxiSupportRequestActivityRepository){
        this.taxiSupportRequestRepository = taxiSupportRequestRepository;
        this.taxiSupportRequestActivityRepository = taxiSupportRequestActivityRepository;
    }
    async addCommentToTaxiSupportRequest(input) {
        const activity = this.taxiSupportRequestActivityRepository.create();
        activity.actorId = input.staffId;
        activity.comment = input.input.comment;
        activity.complaintId = input.input.supportRequestId;
        activity.type = _database.ComplaintActivityType.Comment;
        return this.taxiSupportRequestActivityRepository.save(activity);
    }
    async assignTaxiSupportRequestToStaff(input) {
        const activity = this.taxiSupportRequestActivityRepository.create();
        activity.actorId = input.staffId;
        activity.assignedToStaffs = input.input.staffIds.map((id)=>({
                id
            }));
        activity.complaintId = input.input.supportRequestId;
        activity.type = _database.ComplaintActivityType.AssignToOperator;
        return this.taxiSupportRequestActivityRepository.save(activity);
    }
    async changeTaxiSupportRequestStatus(input) {
        const supportRequest = await this.taxiSupportRequestRepository.findOneBy({
            id: input.input.supportRequestId
        });
        const activity = this.taxiSupportRequestActivityRepository.create();
        activity.actorId = input.staffId;
        activity.complaintId = input.input.supportRequestId;
        activity.type = _database.ComplaintActivityType.StatusChange;
        activity.statusFrom = supportRequest.status;
        activity.statusTo = input.input.status;
        return this.taxiSupportRequestActivityRepository.save(activity);
    }
};
TaxiSupportRequestService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.TaxiSupportRequestEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.TaxiSupportRequestActivityEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], TaxiSupportRequestService);


/***/ }),
/* 415 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "CreateTaxiSupportRequestCommentInput", ({
    enumerable: true,
    get: function() {
        return CreateTaxiSupportRequestCommentInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let CreateTaxiSupportRequestCommentInput = class CreateTaxiSupportRequestCommentInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], CreateTaxiSupportRequestCommentInput.prototype, "supportRequestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: false
    }),
    _ts_metadata._("design:type", String)
], CreateTaxiSupportRequestCommentInput.prototype, "comment", void 0);
CreateTaxiSupportRequestCommentInput = _ts_decorate._([
    (0, _graphql.InputType)()
], CreateTaxiSupportRequestCommentInput);


/***/ }),
/* 416 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "AssignTaxiSupportRequestInput", ({
    enumerable: true,
    get: function() {
        return AssignTaxiSupportRequestInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let AssignTaxiSupportRequestInput = class AssignTaxiSupportRequestInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], AssignTaxiSupportRequestInput.prototype, "supportRequestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            _graphql.ID
        ]),
    _ts_metadata._("design:type", Array)
], AssignTaxiSupportRequestInput.prototype, "staffIds", void 0);
AssignTaxiSupportRequestInput = _ts_decorate._([
    (0, _graphql.InputType)()
], AssignTaxiSupportRequestInput);


/***/ }),
/* 417 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "ChangeTaxiSupportRequestStatusInput", ({
    enumerable: true,
    get: function() {
        return ChangeTaxiSupportRequestStatusInput;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let ChangeTaxiSupportRequestStatusInput = class ChangeTaxiSupportRequestStatusInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], ChangeTaxiSupportRequestStatusInput.prototype, "supportRequestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.ComplaintStatus, {
        nullable: false
    }),
    _ts_metadata._("design:type", typeof _database.ComplaintStatus === "undefined" ? Object : _database.ComplaintStatus)
], ChangeTaxiSupportRequestStatusInput.prototype, "status", void 0);
ChangeTaxiSupportRequestStatusInput = _ts_decorate._([
    (0, _graphql.InputType)()
], ChangeTaxiSupportRequestStatusInput);


/***/ }),
/* 418 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "NotificationModule", ({
    enumerable: true,
    get: function() {
        return NotificationModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _notificationsubscriptionservice = __webpack_require__(419);
const _notificationresolver = __webpack_require__(421);
const _notificationservice = __webpack_require__(422);
let NotificationModule = class NotificationModule {
};
NotificationModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.AdminNotificationEntity
            ])
        ],
        providers: [
            _notificationservice.NotiifcationService,
            _notificationresolver.NotificationResolver,
            _notificationsubscriptionservice.NotificationSubscriptionService,
            _database.RedisPubSubProvider.provider()
        ],
        exports: [
            _notificationservice.NotiifcationService
        ]
    })
], NotificationModule);


/***/ }),
/* 419 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "NotificationSubscriptionService", ({
    enumerable: true,
    get: function() {
        return NotificationSubscriptionService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _graphqlredissubscriptions = __webpack_require__(18);
const _adminnotificationdto = __webpack_require__(420);
let NotificationSubscriptionService = class NotificationSubscriptionService {
    constructor(pubSub){
        this.pubSub = pubSub;
    }
    async notificationCreated() {
        return this.pubSub.asyncIterator('adminNotificationCreated');
    }
};
_ts_decorate._([
    (0, _graphql.Subscription)(()=>_adminnotificationdto.AdminNotificationUnion),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", []),
    _ts_metadata._("design:returntype", Promise)
], NotificationSubscriptionService.prototype, "notificationCreated", null);
NotificationSubscriptionService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _nestjsquerygraphql.InjectPubSub)()),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _graphqlredissubscriptions.RedisPubSub === "undefined" ? Object : _graphqlredissubscriptions.RedisPubSub
    ])
], NotificationSubscriptionService);


/***/ }),
/* 420 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    AdminNotificationBase: function() {
        return AdminNotificationBase;
    },
    AdminNotificationUnion: function() {
        return AdminNotificationUnion;
    },
    DriverPendingVerificationNotification: function() {
        return DriverPendingVerificationNotification;
    },
    ParkSpotPendingVerificationNotification: function() {
        return ParkSpotPendingVerificationNotification;
    },
    ParkingReviewPendingApprovalNotification: function() {
        return ParkingReviewPendingApprovalNotification;
    },
    ParkingSupportRequestNotification: function() {
        return ParkingSupportRequestNotification;
    },
    ShopPendingVerificationNotification: function() {
        return ShopPendingVerificationNotification;
    },
    ShopReviewPendingApprovalNotification: function() {
        return ShopReviewPendingApprovalNotification;
    },
    ShopSupportRequestNotification: function() {
        return ShopSupportRequestNotification;
    },
    TaxiSupportRequestNotification: function() {
        return TaxiSupportRequestNotification;
    }
});
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _nestjsquerygraphql = __webpack_require__(17);
const _database = __webpack_require__(15);
const _taxisupportrequestdto = __webpack_require__(100);
const _shopsupportrequestdto = __webpack_require__(290);
const _parkingsupportrequestdto = __webpack_require__(339);
const _driverdto = __webpack_require__(116);
const _shopdto = __webpack_require__(203);
const _parkspotdto = __webpack_require__(318);
const _shopfeedbackdto = __webpack_require__(210);
const _parkingfeedbackdto = __webpack_require__(322);
let AdminNotificationBase = class AdminNotificationBase {
};
_ts_decorate._([
    (0, _nestjsquerygraphql.IDField)(()=>_graphql.ID),
    _ts_metadata._("design:type", Number)
], AdminNotificationBase.prototype, "id", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AdminNotificationType),
    _ts_metadata._("design:type", typeof _database.AdminNotificationType === "undefined" ? Object : _database.AdminNotificationType)
], AdminNotificationBase.prototype, "type", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AppType),
    _ts_metadata._("design:type", typeof _database.AppType === "undefined" ? Object : _database.AppType)
], AdminNotificationBase.prototype, "appType", void 0);
_ts_decorate._([
    (0, _graphql.Field)(),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], AdminNotificationBase.prototype, "createdAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)({
        nullable: true
    }),
    _ts_metadata._("design:type", typeof Date === "undefined" ? Object : Date)
], AdminNotificationBase.prototype, "readAt", void 0);
_ts_decorate._([
    (0, _graphql.Field)({
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], AdminNotificationBase.prototype, "taxiSupportRequestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)({
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], AdminNotificationBase.prototype, "shopSupportRequestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)({
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], AdminNotificationBase.prototype, "parkingSupportRequestId", void 0);
_ts_decorate._([
    (0, _graphql.Field)({
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], AdminNotificationBase.prototype, "driverPendingVerificationId", void 0);
_ts_decorate._([
    (0, _graphql.Field)({
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], AdminNotificationBase.prototype, "shopPendingVerificationId", void 0);
_ts_decorate._([
    (0, _graphql.Field)({
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], AdminNotificationBase.prototype, "parkSpotPendingVerificationId", void 0);
_ts_decorate._([
    (0, _graphql.Field)({
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], AdminNotificationBase.prototype, "shopReviewPendingApprovalId", void 0);
_ts_decorate._([
    (0, _graphql.Field)({
        nullable: true
    }),
    _ts_metadata._("design:type", Number)
], AdminNotificationBase.prototype, "parkingReviewPendingApprovalId", void 0);
AdminNotificationBase = _ts_decorate._([
    (0, _graphql.ObjectType)('AdminNotificationBase')
], AdminNotificationBase);
let TaxiSupportRequestNotification = class TaxiSupportRequestNotification extends (0, _graphql.PickType)(AdminNotificationBase, [
    'id',
    'type',
    'appType',
    'createdAt',
    'readAt'
]) {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_taxisupportrequestdto.TaxiSupportRequestDTO),
    _ts_metadata._("design:type", typeof _taxisupportrequestdto.TaxiSupportRequestDTO === "undefined" ? Object : _taxisupportrequestdto.TaxiSupportRequestDTO)
], TaxiSupportRequestNotification.prototype, "taxiSupportRequest", void 0);
TaxiSupportRequestNotification = _ts_decorate._([
    (0, _graphql.ObjectType)('TaxiSupportRequestNotification')
], TaxiSupportRequestNotification);
let ShopSupportRequestNotification = class ShopSupportRequestNotification extends (0, _graphql.PickType)(AdminNotificationBase, [
    'id',
    'type',
    'appType',
    'createdAt',
    'readAt'
]) {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_shopsupportrequestdto.ShopSupportRequestDTO),
    _ts_metadata._("design:type", typeof _shopsupportrequestdto.ShopSupportRequestDTO === "undefined" ? Object : _shopsupportrequestdto.ShopSupportRequestDTO)
], ShopSupportRequestNotification.prototype, "shopSupportRequest", void 0);
ShopSupportRequestNotification = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopSupportRequestNotification')
], ShopSupportRequestNotification);
let ParkingSupportRequestNotification = class ParkingSupportRequestNotification extends (0, _graphql.PickType)(AdminNotificationBase, [
    'id',
    'type',
    'appType',
    'createdAt',
    'readAt'
]) {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_parkingsupportrequestdto.ParkingSupportRequestDTO),
    _ts_metadata._("design:type", typeof _parkingsupportrequestdto.ParkingSupportRequestDTO === "undefined" ? Object : _parkingsupportrequestdto.ParkingSupportRequestDTO)
], ParkingSupportRequestNotification.prototype, "parkingSupportRequest", void 0);
ParkingSupportRequestNotification = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkingSupportRequestNotification')
], ParkingSupportRequestNotification);
let DriverPendingVerificationNotification = class DriverPendingVerificationNotification extends (0, _graphql.PickType)(AdminNotificationBase, [
    'id',
    'type',
    'appType',
    'createdAt',
    'readAt'
]) {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_driverdto.DriverDTO),
    _ts_metadata._("design:type", typeof _driverdto.DriverDTO === "undefined" ? Object : _driverdto.DriverDTO)
], DriverPendingVerificationNotification.prototype, "driverPendingVerification", void 0);
DriverPendingVerificationNotification = _ts_decorate._([
    (0, _graphql.ObjectType)('DriverPendingVerificationNotification')
], DriverPendingVerificationNotification);
let ShopPendingVerificationNotification = class ShopPendingVerificationNotification extends (0, _graphql.PickType)(AdminNotificationBase, [
    'id',
    'type',
    'appType',
    'createdAt',
    'readAt'
]) {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_shopdto.ShopDTO),
    _ts_metadata._("design:type", typeof _shopdto.ShopDTO === "undefined" ? Object : _shopdto.ShopDTO)
], ShopPendingVerificationNotification.prototype, "shopPendingVerification", void 0);
ShopPendingVerificationNotification = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopPendingVerificationNotification')
], ShopPendingVerificationNotification);
let ParkSpotPendingVerificationNotification = class ParkSpotPendingVerificationNotification extends (0, _graphql.PickType)(AdminNotificationBase, [
    'id',
    'type',
    'appType',
    'createdAt',
    'readAt'
]) {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_parkspotdto.ParkSpotDTO),
    _ts_metadata._("design:type", typeof _parkspotdto.ParkSpotDTO === "undefined" ? Object : _parkspotdto.ParkSpotDTO)
], ParkSpotPendingVerificationNotification.prototype, "parkSpotPendingVerification", void 0);
ParkSpotPendingVerificationNotification = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkSpotPendingVerificationNotification')
], ParkSpotPendingVerificationNotification);
let ShopReviewPendingApprovalNotification = class ShopReviewPendingApprovalNotification extends (0, _graphql.PickType)(AdminNotificationBase, [
    'id',
    'type',
    'appType',
    'createdAt',
    'readAt'
]) {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_shopfeedbackdto.ShopFeedbackDTO),
    _ts_metadata._("design:type", typeof _shopfeedbackdto.ShopFeedbackDTO === "undefined" ? Object : _shopfeedbackdto.ShopFeedbackDTO)
], ShopReviewPendingApprovalNotification.prototype, "shopReviewPendingApproval", void 0);
ShopReviewPendingApprovalNotification = _ts_decorate._([
    (0, _graphql.ObjectType)('ShopReviewPendingApprovalNotification')
], ShopReviewPendingApprovalNotification);
let ParkingReviewPendingApprovalNotification = class ParkingReviewPendingApprovalNotification extends (0, _graphql.PickType)(AdminNotificationBase, [
    'id',
    'type',
    'appType',
    'createdAt',
    'readAt'
]) {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_parkingfeedbackdto.ParkingFeedbackDTO),
    _ts_metadata._("design:type", typeof _parkingfeedbackdto.ParkingFeedbackDTO === "undefined" ? Object : _parkingfeedbackdto.ParkingFeedbackDTO)
], ParkingReviewPendingApprovalNotification.prototype, "parkingReviewPendingApproval", void 0);
ParkingReviewPendingApprovalNotification = _ts_decorate._([
    (0, _graphql.ObjectType)('ParkingReviewPendingApprovalNotification')
], ParkingReviewPendingApprovalNotification);
const AdminNotificationUnion = (0, _graphql.createUnionType)({
    name: 'AdminNotificationUnion',
    types: ()=>[
            TaxiSupportRequestNotification,
            ShopSupportRequestNotification,
            ParkingSupportRequestNotification,
            DriverPendingVerificationNotification,
            ShopPendingVerificationNotification,
            ParkSpotPendingVerificationNotification,
            ShopReviewPendingApprovalNotification,
            ParkingReviewPendingApprovalNotification
        ],
    resolveType (value) {
        if (value.taxiSupportRequestId) return TaxiSupportRequestNotification;
        if (value.shopSupportRequestId) return ShopSupportRequestNotification;
        if (value.parkingSupportRequestId) return ParkingSupportRequestNotification;
        if (value.driverPendingVerificationId) return DriverPendingVerificationNotification;
        if (value.shopPendingVerificationId) return ShopPendingVerificationNotification;
        if (value.parkSpotPendingVerificationId) return ParkSpotPendingVerificationNotification;
        if (value.shopReviewPendingApprovalId) return ShopReviewPendingApprovalNotification;
        if (value.parkingReviewPendingApprovalId) return ParkingReviewPendingApprovalNotification;
        return null;
    }
});


/***/ }),
/* 421 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "NotificationResolver", ({
    enumerable: true,
    get: function() {
        return NotificationResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _notificationservice = __webpack_require__(422);
const _common = __webpack_require__(7);
const _jwtauthguard = __webpack_require__(29);
const _adminnotificationdto = __webpack_require__(420);
const _database = __webpack_require__(15);
let NotificationResolver = class NotificationResolver {
    constructor(context, notificationService){
        this.context = context;
        this.notificationService = notificationService;
    }
    async notifications(type) {
        _common.Logger.log(`Notifications for ${this.context.req.user.id}`, 'NotificationResolver');
        const notifications = await this.notificationService.getNotifications({
            operatorId: this.context.req.user.id,
            type
        });
        return notifications;
    }
    async markAsRead(notificationIds) {
        return this.notificationService.markAsRead({
            operatorId: this.context.req.user.id,
            notificationIds
        });
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>[
            _adminnotificationdto.AdminNotificationUnion
        ]),
    _ts_param._(0, (0, _graphql.Args)('type', {
        nullable: true,
        type: ()=>_database.AdminNotificationType
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _database.AdminNotificationType === "undefined" ? Object : _database.AdminNotificationType
    ]),
    _ts_metadata._("design:returntype", Promise)
], NotificationResolver.prototype, "notifications", null);
_ts_decorate._([
    (0, _graphql.Mutation)(()=>Boolean),
    _ts_param._(0, (0, _graphql.Args)('notificationIds', {
        type: ()=>[
                _graphql.ID
            ]
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        Array
    ]),
    _ts_metadata._("design:returntype", Promise)
], NotificationResolver.prototype, "markAsRead", null);
NotificationResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_param._(0, (0, _common.Inject)(_graphql.CONTEXT)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof UserContext === "undefined" ? Object : UserContext,
        typeof _notificationservice.NotiifcationService === "undefined" ? Object : _notificationservice.NotiifcationService
    ])
], NotificationResolver);


/***/ }),
/* 422 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "NotiifcationService", ({
    enumerable: true,
    get: function() {
        return NotiifcationService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
const _typeorm1 = __webpack_require__(16);
let NotiifcationService = class NotiifcationService {
    constructor(shopNotificationRepository){
        this.shopNotificationRepository = shopNotificationRepository;
    }
    async getNotifications(input) {
        return this.shopNotificationRepository.find({
            where: {
                operatorId: input.operatorId,
                type: input.type
            },
            relations: {
                taxiSupportRequest: true,
                shopSupportRequest: true,
                parkingSupportRequest: true,
                shopPendingVerification: true,
                parkSpotPendingVerification: true,
                parkingReviewPendingApproval: true,
                shopReviewPendingApproval: true
            }
        });
    }
    async markAsRead(input) {
        await this.shopNotificationRepository.update({
            operatorId: input.operatorId,
            id: (0, _typeorm1.In)(input.notificationIds)
        }, {
            readAt: new Date()
        });
        return true;
    }
};
NotiifcationService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.AdminNotificationEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], NotiifcationService);


/***/ }),
/* 423 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PlatformOverviewModule", ({
    enumerable: true,
    get: function() {
        return PlatformOverviewModule;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _common = __webpack_require__(7);
const _platformoverviewservice = __webpack_require__(424);
const _platformoverviewresolver = __webpack_require__(426);
const _typeorm = __webpack_require__(14);
const _database = __webpack_require__(15);
let PlatformOverviewModule = class PlatformOverviewModule {
};
PlatformOverviewModule = _ts_decorate._([
    (0, _common.Module)({
        imports: [
            _typeorm.TypeOrmModule.forFeature([
                _database.TaxiOrderEntity,
                _database.ShopOrderEntity,
                _database.ParkOrderEntity
            ])
        ],
        providers: [
            _platformoverviewservice.PlatformOverviewService,
            _platformoverviewresolver.PlatformOverviewResolver
        ]
    })
], PlatformOverviewModule);


/***/ }),
/* 424 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PlatformOverviewService", ({
    enumerable: true,
    get: function() {
        return PlatformOverviewService;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _common = __webpack_require__(7);
const _platformkpiinput = __webpack_require__(425);
const _typeorm = __webpack_require__(14);
const _typeorm1 = __webpack_require__(16);
const _database = __webpack_require__(15);
let PlatformOverviewService = class PlatformOverviewService {
    constructor(taxiOrderRepository, shopOrderRepository, parkOrderRepository){
        this.taxiOrderRepository = taxiOrderRepository;
        this.shopOrderRepository = shopOrderRepository;
        this.parkOrderRepository = parkOrderRepository;
    }
    getDateRange(period) {
        const now = new Date();
        let days;
        switch(period){
            case _platformkpiinput.KPIPeriod.Last7Days:
                days = 7;
                break;
            case _platformkpiinput.KPIPeriod.Last30Days:
                days = 30;
                break;
            case _platformkpiinput.KPIPeriod.Last90Days:
                days = 90;
                break;
            case _platformkpiinput.KPIPeriod.Last365Days:
                days = 365;
                break;
            case _platformkpiinput.KPIPeriod.AllTime:
                return {
                    start: new Date(0),
                    end: now
                };
            default:
                throw new Error('Invalid KPI period');
        }
        return {
            start: new Date(now.getTime() - days * 86400000),
            end: now
        };
    }
    getLastDateRange(period) {
        const now = new Date();
        let days;
        switch(period){
            case _platformkpiinput.KPIPeriod.Last7Days:
                days = 7;
                break;
            case _platformkpiinput.KPIPeriod.Last30Days:
                days = 30;
                break;
            case _platformkpiinput.KPIPeriod.Last90Days:
                days = 90;
                break;
            case _platformkpiinput.KPIPeriod.Last365Days:
                days = 365;
                break;
            case _platformkpiinput.KPIPeriod.AllTime:
                return {
                    start: new Date(0),
                    end: new Date(0)
                };
            default:
                throw new Error('Invalid KPI period');
        }
        return {
            start: new Date(now.getTime() - days * 2 * 86400000),
            end: new Date(now.getTime() - days * 86400000)
        };
    }
    async getCount(repo, alias, currency, range) {
        return repo.createQueryBuilder(alias).where(`${alias}.createdAt >= :start`, {
            start: range.start
        }).andWhere(`${alias}.createdAt <= :end`, {
            end: range.end
        }).andWhere(`${alias}.currency = :currency`, {
            currency
        }).getCount();
    }
    async getSum(repo, alias, field, currency, range) {
        const result = await repo.createQueryBuilder(alias).select(`SUM(${alias}.${field})`, 'total').where(`${alias}.createdAt >= :start`, {
            start: range.start
        }).andWhere(`${alias}.createdAt <= :end`, {
            end: range.end
        }).andWhere(`${alias}.currency = :currency`, {
            currency
        }).getRawOne();
        return Number(result.total) || 0;
    }
    async getActiveUsers(repo, alias, currency, range) {
        const result = await repo.createQueryBuilder(alias).select(`COUNT(DISTINCT ${alias}.userId)`, 'count').where(`${alias}.createdAt >= :start`, {
            start: range.start
        }).andWhere(`${alias}.createdAt <= :end`, {
            end: range.end
        }).andWhere(`${alias}.currency = :currency`, {
            currency
        }).getRawOne();
        return Number(result.count) || 0;
    }
    async platformKPI({ period, currency }) {
        const range = this.getDateRange(period);
        const lastRange = this.getLastDateRange(period);
        const data = await Promise.all([
            this.getCount(this.taxiOrderRepository, 'taxiOrder', currency, range),
            this.getCount(this.shopOrderRepository, 'shopOrder', currency, range),
            this.getCount(this.parkOrderRepository, 'parkOrder', currency, range),
            this.getCount(this.taxiOrderRepository, 'taxiOrder', currency, lastRange),
            this.getCount(this.shopOrderRepository, 'shopOrder', currency, lastRange),
            this.getCount(this.parkOrderRepository, 'parkOrder', currency, lastRange),
            this.getSum(this.taxiOrderRepository, 'taxiOrder', 'totalCost', currency, range),
            this.getSum(this.shopOrderRepository, 'shopOrder', 'totalCost', currency, range),
            this.getSum(this.parkOrderRepository, 'parkOrder', 'totalCost', currency, range),
            this.getSum(this.taxiOrderRepository, 'taxiOrder', 'totalCost', currency, lastRange),
            this.getSum(this.shopOrderRepository, 'shopOrder', 'totalCost', currency, lastRange),
            this.getSum(this.parkOrderRepository, 'parkOrder', 'totalCost', currency, lastRange),
            this.getActiveUsers(this.taxiOrderRepository, 'taxiOrder', currency, range),
            this.getActiveUsers(this.shopOrderRepository, 'shopOrder', currency, range),
            this.getActiveUsers(this.parkOrderRepository, 'parkOrder', currency, range),
            this.getActiveUsers(this.taxiOrderRepository, 'taxiOrder', currency, lastRange),
            this.getActiveUsers(this.shopOrderRepository, 'shopOrder', currency, lastRange),
            this.getActiveUsers(this.parkOrderRepository, 'parkOrder', currency, lastRange)
        ]);
        const [taxiOrders, shopOrders, parkOrders, lastTaxiOrders, lastShopOrders, lastParkOrders, taxiRevenue, shopRevenue, parkRevenue, lastTaxiRevenue, lastShopRevenue, lastParkRevenue, taxiUsers, shopUsers, parkUsers, lastTaxiUsers, lastShopUsers, lastParkUsers] = data;
        const totalOrders = taxiOrders + shopOrders + parkOrders;
        const lastTotalOrders = lastTaxiOrders + lastShopOrders + lastParkOrders;
        const totalRevenue = taxiRevenue + shopRevenue + parkRevenue;
        const lastTotalRevenue = lastTaxiRevenue + lastShopRevenue + lastParkRevenue;
        const totalUsers = taxiUsers + shopUsers + parkUsers;
        const lastTotalUsers = lastTaxiUsers + lastShopUsers + lastParkUsers;
        const toItem = (name, unit, total, last, breakdown)=>({
                name,
                unit,
                total,
                change: last ? (total - last) / last * 100 : 0,
                breakdown: breakdown.map((b)=>({
                        app: b.app,
                        value: b.value,
                        percentage: total ? b.value / total * 100 : 0
                    }))
            });
        return {
            totalOrders: toItem('Total Orders', 'orders', totalOrders, lastTotalOrders, [
                {
                    app: _database.AppType.Taxi,
                    value: taxiOrders
                },
                {
                    app: _database.AppType.Shop,
                    value: shopOrders
                },
                {
                    app: _database.AppType.Parking,
                    value: parkOrders
                }
            ]),
            totalRevenue: toItem('Total Revenue', currency, totalRevenue, lastTotalRevenue, [
                {
                    app: _database.AppType.Taxi,
                    value: taxiRevenue
                },
                {
                    app: _database.AppType.Shop,
                    value: shopRevenue
                },
                {
                    app: _database.AppType.Parking,
                    value: parkRevenue
                }
            ]),
            activeCustomers: toItem('Active Customers', 'users', totalUsers, lastTotalUsers, [
                {
                    app: _database.AppType.Taxi,
                    value: taxiUsers
                },
                {
                    app: _database.AppType.Shop,
                    value: shopUsers
                },
                {
                    app: _database.AppType.Parking,
                    value: parkUsers
                }
            ])
        };
    }
};
PlatformOverviewService = _ts_decorate._([
    (0, _common.Injectable)(),
    _ts_param._(0, (0, _typeorm.InjectRepository)(_database.TaxiOrderEntity)),
    _ts_param._(1, (0, _typeorm.InjectRepository)(_database.ShopOrderEntity)),
    _ts_param._(2, (0, _typeorm.InjectRepository)(_database.ParkOrderEntity)),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository,
        typeof _typeorm1.Repository === "undefined" ? Object : _typeorm1.Repository
    ])
], PlatformOverviewService);


/***/ }),
/* 425 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    KPIPeriod: function() {
        return KPIPeriod;
    },
    PlatformKPIInput: function() {
        return PlatformKPIInput;
    }
});
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
let PlatformKPIInput = class PlatformKPIInput {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        description: 'The currency for the KPI'
    }),
    _ts_metadata._("design:type", String)
], PlatformKPIInput.prototype, "currency", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>KPIPeriod, {
        description: 'The period for the KPI'
    }),
    _ts_metadata._("design:type", String)
], PlatformKPIInput.prototype, "period", void 0);
PlatformKPIInput = _ts_decorate._([
    (0, _graphql.InputType)()
], PlatformKPIInput);
var KPIPeriod;
(function(KPIPeriod) {
    KPIPeriod["Last7Days"] = "last7Days";
    KPIPeriod["Last30Days"] = "last30Days";
    KPIPeriod["Last90Days"] = "last90Days";
    KPIPeriod["Last365Days"] = "last365Days";
    KPIPeriod["AllTime"] = "allTime";
})(KPIPeriod || (KPIPeriod = {}));
(0, _graphql.registerEnumType)(KPIPeriod, {
    name: 'KPIPeriod',
    description: 'KPI period for the platform overview'
});


/***/ }),
/* 426 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PlatformOverviewResolver", ({
    enumerable: true,
    get: function() {
        return PlatformOverviewResolver;
    }
}));
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _ts_param = __webpack_require__(28);
const _graphql = __webpack_require__(13);
const _platformkpidto = __webpack_require__(427);
const _platformoverviewservice = __webpack_require__(424);
const _platformkpiinput = __webpack_require__(425);
const _common = __webpack_require__(7);
const _jwtauthguard = __webpack_require__(29);
let PlatformOverviewResolver = class PlatformOverviewResolver {
    constructor(platformOverviewService){
        this.platformOverviewService = platformOverviewService;
    }
    async platformKPI(input) {
        return this.platformOverviewService.platformKPI(input);
    }
};
_ts_decorate._([
    (0, _graphql.Query)(()=>_platformkpidto.PlatformKPI),
    _ts_param._(0, (0, _graphql.Args)('input', {
        type: ()=>_platformkpiinput.PlatformKPIInput
    })),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _platformkpiinput.PlatformKPIInput === "undefined" ? Object : _platformkpiinput.PlatformKPIInput
    ]),
    _ts_metadata._("design:returntype", Promise)
], PlatformOverviewResolver.prototype, "platformKPI", null);
PlatformOverviewResolver = _ts_decorate._([
    (0, _graphql.Resolver)(),
    (0, _common.UseGuards)(_jwtauthguard.JwtAuthGuard),
    _ts_metadata._("design:type", Function),
    _ts_metadata._("design:paramtypes", [
        typeof _platformoverviewservice.PlatformOverviewService === "undefined" ? Object : _platformoverviewservice.PlatformOverviewService
    ])
], PlatformOverviewResolver);


/***/ }),
/* 427 */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({
    value: true
}));
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    KPIAppBreakdown: function() {
        return KPIAppBreakdown;
    },
    PlatformKPI: function() {
        return PlatformKPI;
    },
    PlatformKPIItem: function() {
        return PlatformKPIItem;
    }
});
const _ts_decorate = __webpack_require__(10);
const _ts_metadata = __webpack_require__(11);
const _graphql = __webpack_require__(13);
const _database = __webpack_require__(15);
let KPIAppBreakdown = class KPIAppBreakdown {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>_database.AppType, {
        description: 'Application key or enum value (e.g., "taxi")'
    }),
    _ts_metadata._("design:type", typeof _database.AppType === "undefined" ? Object : _database.AppType)
], KPIAppBreakdown.prototype, "app", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        description: 'Value for this app in the current time period'
    }),
    _ts_metadata._("design:type", Number)
], KPIAppBreakdown.prototype, "value", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        description: 'Percentage share of the KPI that belongs to this app'
    }),
    _ts_metadata._("design:type", Number)
], KPIAppBreakdown.prototype, "percentage", void 0);
KPIAppBreakdown = _ts_decorate._([
    (0, _graphql.ObjectType)()
], KPIAppBreakdown);
let PlatformKPIItem = class PlatformKPIItem {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        description: 'Display name of the KPI (e.g., "Total Orders")'
    }),
    _ts_metadata._("design:type", String)
], PlatformKPIItem.prototype, "name", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>String, {
        nullable: true,
        description: 'Unit of measurement (e.g., "orders", "$")'
    }),
    _ts_metadata._("design:type", String)
], PlatformKPIItem.prototype, "unit", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        description: 'Total value for the current time period'
    }),
    _ts_metadata._("design:type", Number)
], PlatformKPIItem.prototype, "total", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>_graphql.Float, {
        description: 'Percentage change compared to the previous time period'
    }),
    _ts_metadata._("design:type", Number)
], PlatformKPIItem.prototype, "change", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>[
            KPIAppBreakdown
        ], {
        description: 'Breakdown of KPI value by sub-application (e.g., taxi, shop)'
    }),
    _ts_metadata._("design:type", Array)
], PlatformKPIItem.prototype, "breakdown", void 0);
PlatformKPIItem = _ts_decorate._([
    (0, _graphql.ObjectType)()
], PlatformKPIItem);
let PlatformKPI = class PlatformKPI {
};
_ts_decorate._([
    (0, _graphql.Field)(()=>PlatformKPIItem),
    _ts_metadata._("design:type", typeof PlatformKPIItem === "undefined" ? Object : PlatformKPIItem)
], PlatformKPI.prototype, "totalOrders", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>PlatformKPIItem),
    _ts_metadata._("design:type", typeof PlatformKPIItem === "undefined" ? Object : PlatformKPIItem)
], PlatformKPI.prototype, "totalRevenue", void 0);
_ts_decorate._([
    (0, _graphql.Field)(()=>PlatformKPIItem),
    _ts_metadata._("design:type", typeof PlatformKPIItem === "undefined" ? Object : PlatformKPIItem)
], PlatformKPI.prototype, "activeCustomers", void 0);
PlatformKPI = _ts_decorate._([
    (0, _graphql.ObjectType)()
], PlatformKPI);


/***/ }),
/* 428 */
/***/ ((module) => {

module.exports = require("@sentry/nestjs/setup");

/***/ }),
/* 429 */
/***/ ((module) => {

module.exports = require("@nestjs/config/dist/config.module");

/***/ })
/******/ 	]);
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other modules in the chunk.
(() => {
var exports = __webpack_exports__;

Object.defineProperty(exports, "__esModule", ({
    value: true
}));
__webpack_require__(1);
const _common = __webpack_require__(7);
const _core = __webpack_require__(8);
const _adminapimodule = __webpack_require__(9);
async function bootstrap() {
    const app = await _core.NestFactory.create(_adminapimodule.AdminAPIModule.register());
    const port = parseInt(process.env.ADMIN_API_PORT || '3000', 10);
    app.enableShutdownHooks();
    app.enableCors();
    await app.listen(port, ()=>{
        _common.Logger.log(`Listening at http://localhost:${port}`, 'Admin API');
    });
}
bootstrap();

})();

/******/ })()
;
//# sourceMappingURL=main.js.map