{"version":3,"sources":["../../../../../../../../../libs/database/src/lib/migration/1702631792481-park-notification-center.ts"],"sourcesContent":["import { MigrationInterface, QueryRunner, Table } from 'typeorm';\nexport enum ParkingCustomerNotificationType {\n  booked = 'booked',\n  cancelled = 'cancelled',\n  expiring = 'expiring',\n  rate = 'rate',\n}\nexport enum ParkingProviderNotificationType {\n  booked = 'booked',\n  cancelled = 'cancelled',\n  expiring = 'expiring',\n}\nexport class ParkNotificationCenter1702631792481 implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise<void> {\n    try {\n      await queryRunner.createTable(\n        new Table({\n          name: 'parking_customer_notification',\n          columns: [\n            {\n              name: 'id',\n              type: 'int',\n              isPrimary: true,\n              isGenerated: true,\n              generationStrategy: 'increment',\n            },\n            {\n              name: 'type',\n              type: 'enum',\n              enum: Object.values(ParkingCustomerNotificationType),\n            },\n            {\n              name: 'createdAt',\n              type: 'datetime',\n            },\n            {\n              name: 'expireAt',\n              type: 'datetime',\n              isNullable: true,\n            },\n            {\n              name: 'parkOrderId',\n              type: 'int',\n            },\n            {\n              name: 'customerId',\n              type: 'int',\n            },\n          ],\n          foreignKeys: [\n            {\n              name: 'parking_customer_notification_park_order_id_fk',\n              columnNames: ['parkOrderId'],\n              referencedTableName: 'park_order',\n              referencedColumnNames: ['id'],\n              onDelete: 'CASCADE',\n            },\n            {\n              name: 'parking_customer_notification_customer_id_fk',\n              columnNames: ['customerId'],\n              referencedTableName: 'rider',\n              referencedColumnNames: ['id'],\n              onDelete: 'CASCADE',\n            },\n          ],\n          indices: [\n            {\n              name: 'parking_customer_notification_park_order_id_idx',\n              columnNames: ['parkOrderId'],\n            },\n            {\n              name: 'parking_customer_notification_customer_id_idx',\n              columnNames: ['customerId'],\n            },\n          ],\n        }),\n      );\n    } catch (error) {\n      console.error(error);\n    }\n    try {\n      await queryRunner.createTable(\n        new Table({\n          name: 'parking_provider_notification',\n          columns: [\n            {\n              name: 'id',\n              type: 'int',\n              isPrimary: true,\n              isGenerated: true,\n              generationStrategy: 'increment',\n            },\n            {\n              name: 'type',\n              type: 'enum',\n              enum: Object.values(ParkingProviderNotificationType),\n            },\n            {\n              name: 'createdAt',\n              type: 'datetime',\n            },\n            {\n              name: 'expireAt',\n              type: 'datetime',\n              isNullable: true,\n            },\n            {\n              name: 'parkOrderId',\n              type: 'int',\n            },\n            {\n              name: 'providerId',\n              type: 'int',\n            },\n          ],\n          foreignKeys: [\n            {\n              name: 'parking_provider_notification_park_order_id_fk',\n              columnNames: ['parkOrderId'],\n              referencedTableName: 'park_order',\n              referencedColumnNames: ['id'],\n              onDelete: 'CASCADE',\n            },\n            {\n              name: 'parking_provider_notification_provider_id_fk',\n              columnNames: ['providerId'],\n              referencedTableName: 'driver',\n              referencedColumnNames: ['id'],\n              onDelete: 'CASCADE',\n            },\n          ],\n          indices: [\n            {\n              name: 'parking_provider_notification_park_order_id_idx',\n              columnNames: ['parkOrderId'],\n            },\n            {\n              name: 'parking_provider_notification_provider_id_idx',\n              columnNames: ['providerId'],\n            },\n          ],\n        }),\n        true,\n        true,\n        true,\n      );\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  public async down(): Promise<void> {}\n}\n"],"names":["ParkNotificationCenter1702631792481","ParkingCustomerNotificationType","ParkingProviderNotificationType","up","queryRunner","createTable","Table","name","columns","type","isPrimary","isGenerated","generationStrategy","enum","Object","values","isNullable","foreignKeys","columnNames","referencedTableName","referencedColumnNames","onDelete","indices","error","console","down"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAYaA,mCAAmC;eAAnCA;;;;;;;;;yBAZ0C;;UAC3CC;;;;;GAAAA,oCAAAA;;UAMAC;;;;GAAAA,oCAAAA;AAKL,IAAA,AAAMF,sCAAN,MAAMA;IACX,MAAaG,GAAGC,WAAwB,EAAiB;QACvD,IAAI;YACF,MAAMA,YAAYC,WAAW,CAC3B,IAAIC,cAAK,CAAC;gBACRC,MAAM;gBACNC,SAAS;oBACP;wBACED,MAAM;wBACNE,MAAM;wBACNC,WAAW;wBACXC,aAAa;wBACbC,oBAAoB;oBACtB;oBACA;wBACEL,MAAM;wBACNE,MAAM;wBACNI,MAAMC,OAAOC,MAAM,CAACd;oBACtB;oBACA;wBACEM,MAAM;wBACNE,MAAM;oBACR;oBACA;wBACEF,MAAM;wBACNE,MAAM;wBACNO,YAAY;oBACd;oBACA;wBACET,MAAM;wBACNE,MAAM;oBACR;oBACA;wBACEF,MAAM;wBACNE,MAAM;oBACR;iBACD;gBACDQ,aAAa;oBACX;wBACEV,MAAM;wBACNW,aAAa;4BAAC;yBAAc;wBAC5BC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;oBACA;wBACEd,MAAM;wBACNW,aAAa;4BAAC;yBAAa;wBAC3BC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;iBACD;gBACDC,SAAS;oBACP;wBACEf,MAAM;wBACNW,aAAa;4BAAC;yBAAc;oBAC9B;oBACA;wBACEX,MAAM;wBACNW,aAAa;4BAAC;yBAAa;oBAC7B;iBACD;YACH;QAEJ,EAAE,OAAOK,OAAO;YACdC,QAAQD,KAAK,CAACA;QAChB;QACA,IAAI;YACF,MAAMnB,YAAYC,WAAW,CAC3B,IAAIC,cAAK,CAAC;gBACRC,MAAM;gBACNC,SAAS;oBACP;wBACED,MAAM;wBACNE,MAAM;wBACNC,WAAW;wBACXC,aAAa;wBACbC,oBAAoB;oBACtB;oBACA;wBACEL,MAAM;wBACNE,MAAM;wBACNI,MAAMC,OAAOC,MAAM,CAACb;oBACtB;oBACA;wBACEK,MAAM;wBACNE,MAAM;oBACR;oBACA;wBACEF,MAAM;wBACNE,MAAM;wBACNO,YAAY;oBACd;oBACA;wBACET,MAAM;wBACNE,MAAM;oBACR;oBACA;wBACEF,MAAM;wBACNE,MAAM;oBACR;iBACD;gBACDQ,aAAa;oBACX;wBACEV,MAAM;wBACNW,aAAa;4BAAC;yBAAc;wBAC5BC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;oBACA;wBACEd,MAAM;wBACNW,aAAa;4BAAC;yBAAa;wBAC3BC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;iBACD;gBACDC,SAAS;oBACP;wBACEf,MAAM;wBACNW,aAAa;4BAAC;yBAAc;oBAC9B;oBACA;wBACEX,MAAM;wBACNW,aAAa;4BAAC;yBAAa;oBAC7B;iBACD;YACH,IACA,MACA,MACA;QAEJ,EAAE,OAAOK,OAAO;YACdC,QAAQD,KAAK,CAACA;QAChB;IACF;IAEA,MAAaE,OAAsB,CAAC;AACtC"}