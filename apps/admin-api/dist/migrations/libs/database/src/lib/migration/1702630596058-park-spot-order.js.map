{"version":3,"sources":["../../../../../../../../../libs/database/src/lib/migration/1702630596058-park-spot-order.ts"],"sourcesContent":["import { MigrationInterface, QueryRunner, Table } from 'typeorm';\nexport enum ParkOrderStatus {\n  PENDING = 'pending',\n  PAID = 'paid',\n  CANCELLED = 'cancelled',\n  ACCEPTED = 'accepted',\n  REJECTED = 'rejected',\n  COMPLETED = 'completed',\n}\nexport enum ParkSpotCarSize {\n  SMALL = 'small',\n  MEDIUM = 'medium',\n  LARGE = 'large',\n  VERY_LARGE = 'very_large',\n}\nexport enum ParkSpotVehicleType {\n  Car = 'car',\n  Bike = 'bike',\n  Truck = 'truck',\n}\nexport enum PaymentMode {\n  Cash = 'cash',\n  SavedPaymentMethod = 'savedPaymentMethod',\n  PaymentGateway = 'paymentGateway',\n  Wallet = 'wallet',\n}\nexport class ParkSpotOrder1702630596058 implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise<void> {\n    try {\n      await queryRunner.createTable(\n        new Table({\n          name: 'park_order',\n          columns: [\n            {\n              name: 'id',\n              type: 'int',\n              isPrimary: true,\n              isGenerated: true,\n              generationStrategy: 'increment',\n            },\n            {\n              name: 'spotOwnerId',\n              type: 'int',\n            },\n            {\n              name: 'carOwnerId',\n              type: 'int',\n            },\n            {\n              name: 'parkSpotId',\n              type: 'int',\n            },\n            {\n              name: 'vehicleType',\n              type: 'enum',\n              enum: Object.values(ParkSpotVehicleType),\n              default: \"'Car'\",\n            },\n            {\n              name: 'carSize',\n              type: 'enum',\n              enum: Object.values(ParkSpotCarSize),\n              isNullable: true,\n            },\n            {\n              name: 'enterTime',\n              type: 'datetime',\n            },\n            {\n              name: 'exitTime',\n              type: 'datetime',\n            },\n            {\n              name: 'paymentMode',\n              type: 'enum',\n              enum: Object.values(PaymentMode),\n            },\n            {\n              name: 'price',\n              type: 'float',\n              default: 0,\n              precision: 12,\n              scale: 2,\n            },\n            {\n              name: 'extendedExitTime',\n              type: 'datetime',\n            },\n            {\n              name: 'savedPaymentMethodId',\n              type: 'int',\n              isNullable: true,\n            },\n            {\n              name: 'paymentGatewayId',\n              type: 'int',\n              isNullable: true,\n            },\n            {\n              name: 'status',\n              type: 'enum',\n              enum: Object.values(ParkOrderStatus),\n            },\n            {\n              name: 'createdAt',\n              type: 'datetime',\n            },\n          ],\n          foreignKeys: [\n            {\n              name: 'park_order_spot_owner_id',\n              columnNames: ['spotOwnerId'],\n              referencedTableName: 'park_spot',\n              referencedColumnNames: ['id'],\n              onDelete: 'SET NULL',\n            },\n            {\n              name: 'park_order_car_owner_id',\n              columnNames: ['carOwnerId'],\n              referencedTableName: 'rider',\n              referencedColumnNames: ['id'],\n              onDelete: 'SET NULL',\n            },\n            {\n              name: 'park_order_park_spot_id',\n              columnNames: ['parkSpotId'],\n              referencedTableName: 'park_spot',\n              referencedColumnNames: ['id'],\n              onDelete: 'CASCADE',\n            },\n            {\n              name: 'park_order_saved_payment_method_id',\n              columnNames: ['savedPaymentMethodId'],\n              referencedTableName: 'saved_payment_method',\n              referencedColumnNames: ['id'],\n              onDelete: 'SET NULL',\n            },\n            {\n              name: 'park_order_payment_gateway_id',\n              columnNames: ['paymentGatewayId'],\n              referencedTableName: 'payment_gateway',\n              referencedColumnNames: ['id'],\n              onDelete: 'SET NULL',\n            },\n          ],\n          indices: [\n            {\n              name: 'park_order_spot_owner_id',\n              columnNames: ['spotOwnerId'],\n            },\n            {\n              name: 'park_order_car_owner_id',\n              columnNames: ['carOwnerId'],\n            },\n            {\n              name: 'park_order_park_spot_id',\n              columnNames: ['parkSpotId'],\n            },\n            {\n              name: 'park_order_saved_payment_method_id',\n              columnNames: ['savedPaymentMethodId'],\n            },\n            {\n              name: 'park_order_payment_gateway_id',\n              columnNames: ['paymentGatewayId'],\n            },\n          ],\n        }),\n        true,\n        true,\n        true,\n      );\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  public async down(): Promise<void> {}\n}\n"],"names":["ParkSpotOrder1702630596058","ParkOrderStatus","ParkSpotCarSize","ParkSpotVehicleType","PaymentMode","up","queryRunner","createTable","Table","name","columns","type","isPrimary","isGenerated","generationStrategy","enum","Object","values","default","isNullable","precision","scale","foreignKeys","columnNames","referencedTableName","referencedColumnNames","onDelete","indices","error","console","down"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;;;;;;;IA0BaA,0BAA0B;eAA1BA;;;;;;;;;yBA1B0C;;UAC3CC;;;;;;;GAAAA,oBAAAA;;UAQAC;;;;;GAAAA,oBAAAA;;UAMAC;;;;GAAAA,wBAAAA;;UAKAC;;;;;GAAAA,gBAAAA;AAML,IAAA,AAAMJ,6BAAN,MAAMA;IACX,MAAaK,GAAGC,WAAwB,EAAiB;QACvD,IAAI;YACF,MAAMA,YAAYC,WAAW,CAC3B,IAAIC,cAAK,CAAC;gBACRC,MAAM;gBACNC,SAAS;oBACP;wBACED,MAAM;wBACNE,MAAM;wBACNC,WAAW;wBACXC,aAAa;wBACbC,oBAAoB;oBACtB;oBACA;wBACEL,MAAM;wBACNE,MAAM;oBACR;oBACA;wBACEF,MAAM;wBACNE,MAAM;oBACR;oBACA;wBACEF,MAAM;wBACNE,MAAM;oBACR;oBACA;wBACEF,MAAM;wBACNE,MAAM;wBACNI,MAAMC,OAAOC,MAAM,CAACd;wBACpBe,SAAS;oBACX;oBACA;wBACET,MAAM;wBACNE,MAAM;wBACNI,MAAMC,OAAOC,MAAM,CAACf;wBACpBiB,YAAY;oBACd;oBACA;wBACEV,MAAM;wBACNE,MAAM;oBACR;oBACA;wBACEF,MAAM;wBACNE,MAAM;oBACR;oBACA;wBACEF,MAAM;wBACNE,MAAM;wBACNI,MAAMC,OAAOC,MAAM,CAACb;oBACtB;oBACA;wBACEK,MAAM;wBACNE,MAAM;wBACNO,SAAS;wBACTE,WAAW;wBACXC,OAAO;oBACT;oBACA;wBACEZ,MAAM;wBACNE,MAAM;oBACR;oBACA;wBACEF,MAAM;wBACNE,MAAM;wBACNQ,YAAY;oBACd;oBACA;wBACEV,MAAM;wBACNE,MAAM;wBACNQ,YAAY;oBACd;oBACA;wBACEV,MAAM;wBACNE,MAAM;wBACNI,MAAMC,OAAOC,MAAM,CAAChB;oBACtB;oBACA;wBACEQ,MAAM;wBACNE,MAAM;oBACR;iBACD;gBACDW,aAAa;oBACX;wBACEb,MAAM;wBACNc,aAAa;4BAAC;yBAAc;wBAC5BC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;oBACA;wBACEjB,MAAM;wBACNc,aAAa;4BAAC;yBAAa;wBAC3BC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;oBACA;wBACEjB,MAAM;wBACNc,aAAa;4BAAC;yBAAa;wBAC3BC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;oBACA;wBACEjB,MAAM;wBACNc,aAAa;4BAAC;yBAAuB;wBACrCC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;oBACA;wBACEjB,MAAM;wBACNc,aAAa;4BAAC;yBAAmB;wBACjCC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;iBACD;gBACDC,SAAS;oBACP;wBACElB,MAAM;wBACNc,aAAa;4BAAC;yBAAc;oBAC9B;oBACA;wBACEd,MAAM;wBACNc,aAAa;4BAAC;yBAAa;oBAC7B;oBACA;wBACEd,MAAM;wBACNc,aAAa;4BAAC;yBAAa;oBAC7B;oBACA;wBACEd,MAAM;wBACNc,aAAa;4BAAC;yBAAuB;oBACvC;oBACA;wBACEd,MAAM;wBACNc,aAAa;4BAAC;yBAAmB;oBACnC;iBACD;YACH,IACA,MACA,MACA;QAEJ,EAAE,OAAOK,OAAO;YACdC,QAAQD,KAAK,CAACA;QAChB;IACF;IAEA,MAAaE,OAAsB,CAAC;AACtC"}