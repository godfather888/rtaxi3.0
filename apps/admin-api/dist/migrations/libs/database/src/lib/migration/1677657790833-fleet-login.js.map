{"version":3,"sources":["../../../../../../../../../libs/database/src/lib/migration/1677657790833-fleet-login.ts"],"sourcesContent":["import { MigrationInterface, QueryRunner } from 'typeorm';\n\nexport class fleetLogin1677657790833 implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise<void> {\n    try {\n      await queryRunner.query(\n        'ALTER TABLE `fleet` ADD `userName` varchar(255) NOT NULL',\n      );\n      await queryRunner.query(\n        'ALTER TABLE `fleet` ADD `password` varchar(255) NOT NULL',\n      );\n    } catch (error) {\n      console.error(error);\n    }\n    try {\n      await queryRunner.query(\n        'ALTER TABLE `fleet` ADD UNIQUE INDEX `IDX_8d1e1b0e8f0b0b1e9b1c8c8a5e` (`userName`)',\n      );\n    } catch (error) {\n      console.error(error);\n    }\n    try {\n      await queryRunner.query(\n        \"CREATE TABLE `fleet_device` (`id` int NOT NULL AUTO_INCREMENT, `devicePlatform` enum ('ANDROID', 'IOS', 'WEB', 'MACOS', 'WINDOWS', 'LINUX') NULL, `deviceName` varchar(255) NOT NULL, `ipAddress` varchar(255) NOT NULL, `jwt` varchar(255) NOT NULL, `lastSeenAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP, `isTerminated` tinyint NOT NULL DEFAULT 0, `fleeetId` int NOT NULL, PRIMARY KEY (`id`))\",\n      );\n    } catch (error) {\n      console.error(error);\n    }\n    try {\n      await queryRunner.query(\n        'ALTER TABLE `fleet_device` ADD CONSTRAINT `FK_ab48871aed3c43fbeb2411eb8c0` FOREIGN KEY (`fleetId`) REFERENCES `fleet`(`id`) ON DELETE NO ACTION ON UPDATE NO ACTION',\n      );\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  public async down(queryRunner: QueryRunner): Promise<void> {}\n}\n"],"names":["fleetLogin1677657790833","up","queryRunner","query","error","console","down"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAEaA;;;eAAAA;;;AAAN,IAAA,AAAMA,0BAAN,MAAMA;IACX,MAAaC,GAAGC,WAAwB,EAAiB;QACvD,IAAI;YACF,MAAMA,YAAYC,KAAK,CACrB;YAEF,MAAMD,YAAYC,KAAK,CACrB;QAEJ,EAAE,OAAOC,OAAO;YACdC,QAAQD,KAAK,CAACA;QAChB;QACA,IAAI;YACF,MAAMF,YAAYC,KAAK,CACrB;QAEJ,EAAE,OAAOC,OAAO;YACdC,QAAQD,KAAK,CAACA;QAChB;QACA,IAAI;YACF,MAAMF,YAAYC,KAAK,CACrB;QAEJ,EAAE,OAAOC,OAAO;YACdC,QAAQD,KAAK,CAACA;QAChB;QACA,IAAI;YACF,MAAMF,YAAYC,KAAK,CACrB;QAEJ,EAAE,OAAOC,OAAO;YACdC,QAAQD,KAAK,CAACA;QAChB;IACF;IAEA,MAAaE,KAAKJ,WAAwB,EAAiB,CAAC;AAC9D"}