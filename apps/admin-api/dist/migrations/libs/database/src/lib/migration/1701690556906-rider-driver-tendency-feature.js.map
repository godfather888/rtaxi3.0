{"version":3,"sources":["../../../../../../../../../libs/database/src/lib/migration/1701690556906-rider-driver-tendency-feature.ts"],"sourcesContent":["import { MigrationInterface, QueryRunner, Table } from 'typeorm';\n\nexport class RiderDriverTendencyFeature1701690556906\n  implements MigrationInterface\n{\n  public async up(queryRunner: QueryRunner): Promise<void> {\n    try {\n      await queryRunner.createTable(\n        new Table({\n          name: 'rider_favorite_drivers_driver',\n          columns: [\n            {\n              name: 'riderId',\n              type: 'int',\n              isPrimary: true,\n            },\n            {\n              name: 'driverId',\n              type: 'int',\n              isPrimary: true,\n            },\n          ],\n          foreignKeys: [\n            {\n              columnNames: ['riderId'],\n              referencedTableName: 'rider',\n              referencedColumnNames: ['id'],\n              onDelete: 'CASCADE',\n            },\n            {\n              columnNames: ['driverId'],\n              referencedTableName: 'driver',\n              referencedColumnNames: ['id'],\n              onDelete: 'CASCADE',\n            },\n          ],\n          indices: [\n            {\n              columnNames: ['riderId', 'driverId'],\n              isUnique: true,\n            },\n          ],\n        }),\n        true,\n        true,\n        true,\n      );\n      await queryRunner.createTable(\n        new Table({\n          name: 'rider_blocked_drivers_driver',\n          columns: [\n            {\n              name: 'riderId',\n              type: 'int',\n              isPrimary: true,\n            },\n            {\n              name: 'driverId',\n              type: 'int',\n              isPrimary: true,\n            },\n          ],\n          foreignKeys: [\n            {\n              columnNames: ['riderId'],\n              referencedTableName: 'rider',\n              referencedColumnNames: ['id'],\n              onDelete: 'CASCADE',\n            },\n            {\n              columnNames: ['driverId'],\n              referencedTableName: 'driver',\n              referencedColumnNames: ['id'],\n              onDelete: 'CASCADE',\n            },\n          ],\n          indices: [\n            {\n              columnNames: ['riderId', 'driverId'],\n              isUnique: true,\n            },\n          ],\n        }),\n      );\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  public async down(queryRunner: QueryRunner): Promise<void> {\n    try {\n      await queryRunner.dropTable('rider_favorite_drivers_driver');\n      await queryRunner.dropTable('rider_blocked_drivers_driver');\n    } catch (error) {\n      console.error(error);\n    }\n  }\n}\n"],"names":["RiderDriverTendencyFeature1701690556906","up","queryRunner","createTable","Table","name","columns","type","isPrimary","foreignKeys","columnNames","referencedTableName","referencedColumnNames","onDelete","indices","isUnique","error","console","down","dropTable"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAEaA;;;eAAAA;;;yBAF0C;AAEhD,IAAA,AAAMA,0CAAN,MAAMA;IAGX,MAAaC,GAAGC,WAAwB,EAAiB;QACvD,IAAI;YACF,MAAMA,YAAYC,WAAW,CAC3B,IAAIC,cAAK,CAAC;gBACRC,MAAM;gBACNC,SAAS;oBACP;wBACED,MAAM;wBACNE,MAAM;wBACNC,WAAW;oBACb;oBACA;wBACEH,MAAM;wBACNE,MAAM;wBACNC,WAAW;oBACb;iBACD;gBACDC,aAAa;oBACX;wBACEC,aAAa;4BAAC;yBAAU;wBACxBC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;oBACA;wBACEH,aAAa;4BAAC;yBAAW;wBACzBC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;iBACD;gBACDC,SAAS;oBACP;wBACEJ,aAAa;4BAAC;4BAAW;yBAAW;wBACpCK,UAAU;oBACZ;iBACD;YACH,IACA,MACA,MACA;YAEF,MAAMb,YAAYC,WAAW,CAC3B,IAAIC,cAAK,CAAC;gBACRC,MAAM;gBACNC,SAAS;oBACP;wBACED,MAAM;wBACNE,MAAM;wBACNC,WAAW;oBACb;oBACA;wBACEH,MAAM;wBACNE,MAAM;wBACNC,WAAW;oBACb;iBACD;gBACDC,aAAa;oBACX;wBACEC,aAAa;4BAAC;yBAAU;wBACxBC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;oBACA;wBACEH,aAAa;4BAAC;yBAAW;wBACzBC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;iBACD;gBACDC,SAAS;oBACP;wBACEJ,aAAa;4BAAC;4BAAW;yBAAW;wBACpCK,UAAU;oBACZ;iBACD;YACH;QAEJ,EAAE,OAAOC,OAAO;YACdC,QAAQD,KAAK,CAACA;QAChB;IACF;IAEA,MAAaE,KAAKhB,WAAwB,EAAiB;QACzD,IAAI;YACF,MAAMA,YAAYiB,SAAS,CAAC;YAC5B,MAAMjB,YAAYiB,SAAS,CAAC;QAC9B,EAAE,OAAOH,OAAO;YACdC,QAAQD,KAAK,CAACA;QAChB;IACF;AACF"}