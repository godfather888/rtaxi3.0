{"version":3,"sources":["../../../../../../../../../libs/database/src/lib/migration/1701623200931-rider-review-feature.ts"],"sourcesContent":["import { MigrationInterface, QueryRunner, Table, TableColumn } from 'typeorm';\n\nexport class RiderReviewFeature1701623200931 implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise<void> {\n    try {\n      await queryRunner.createTable(\n        new Table({\n          name: 'rider_review',\n          columns: [\n            new TableColumn({\n              name: 'id',\n              type: 'int',\n              isPrimary: true,\n              isGenerated: true,\n              generationStrategy: 'increment',\n            }),\n            new TableColumn({\n              name: 'score',\n              type: 'tinyint',\n            }),\n            new TableColumn({\n              name: 'review',\n              type: 'varchar',\n              isNullable: true,\n            }),\n            new TableColumn({\n              name: 'riderId',\n              type: 'int',\n            }),\n            new TableColumn({\n              name: 'driverId',\n              type: 'int',\n            }),\n            new TableColumn({\n              name: 'orderId',\n              type: 'int',\n            }),\n          ],\n          foreignKeys: [\n            {\n              columnNames: ['riderId'],\n              referencedTableName: 'rider',\n              referencedColumnNames: ['id'],\n              onDelete: 'CASCADE',\n            },\n            {\n              columnNames: ['driverId'],\n              referencedTableName: 'driver',\n              referencedColumnNames: ['id'],\n              onDelete: 'CASCADE',\n            },\n            {\n              columnNames: ['orderId'],\n              referencedTableName: 'request',\n              referencedColumnNames: ['id'],\n              onDelete: 'CASCADE',\n            },\n          ],\n          indices: [\n            {\n              columnNames: ['riderId'],\n            },\n            {\n              columnNames: ['driverId'],\n            },\n            {\n              columnNames: ['orderId'],\n            },\n          ],\n        }),\n        true,\n        true,\n        true,\n      );\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  public async down(queryRunner: QueryRunner): Promise<void> {\n    try {\n      await queryRunner.dropTable('rider_review');\n    } catch (error) {\n      console.error(error);\n    }\n  }\n}\n"],"names":["RiderReviewFeature1701623200931","up","queryRunner","createTable","Table","name","columns","TableColumn","type","isPrimary","isGenerated","generationStrategy","isNullable","foreignKeys","columnNames","referencedTableName","referencedColumnNames","onDelete","indices","error","console","down","dropTable"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAEaA;;;eAAAA;;;yBAFuD;AAE7D,IAAA,AAAMA,kCAAN,MAAMA;IACX,MAAaC,GAAGC,WAAwB,EAAiB;QACvD,IAAI;YACF,MAAMA,YAAYC,WAAW,CAC3B,IAAIC,cAAK,CAAC;gBACRC,MAAM;gBACNC,SAAS;oBACP,IAAIC,oBAAW,CAAC;wBACdF,MAAM;wBACNG,MAAM;wBACNC,WAAW;wBACXC,aAAa;wBACbC,oBAAoB;oBACtB;oBACA,IAAIJ,oBAAW,CAAC;wBACdF,MAAM;wBACNG,MAAM;oBACR;oBACA,IAAID,oBAAW,CAAC;wBACdF,MAAM;wBACNG,MAAM;wBACNI,YAAY;oBACd;oBACA,IAAIL,oBAAW,CAAC;wBACdF,MAAM;wBACNG,MAAM;oBACR;oBACA,IAAID,oBAAW,CAAC;wBACdF,MAAM;wBACNG,MAAM;oBACR;oBACA,IAAID,oBAAW,CAAC;wBACdF,MAAM;wBACNG,MAAM;oBACR;iBACD;gBACDK,aAAa;oBACX;wBACEC,aAAa;4BAAC;yBAAU;wBACxBC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;oBACA;wBACEH,aAAa;4BAAC;yBAAW;wBACzBC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;oBACA;wBACEH,aAAa;4BAAC;yBAAU;wBACxBC,qBAAqB;wBACrBC,uBAAuB;4BAAC;yBAAK;wBAC7BC,UAAU;oBACZ;iBACD;gBACDC,SAAS;oBACP;wBACEJ,aAAa;4BAAC;yBAAU;oBAC1B;oBACA;wBACEA,aAAa;4BAAC;yBAAW;oBAC3B;oBACA;wBACEA,aAAa;4BAAC;yBAAU;oBAC1B;iBACD;YACH,IACA,MACA,MACA;QAEJ,EAAE,OAAOK,OAAO;YACdC,QAAQD,KAAK,CAACA;QAChB;IACF;IAEA,MAAaE,KAAKnB,WAAwB,EAAiB;QACzD,IAAI;YACF,MAAMA,YAAYoB,SAAS,CAAC;QAC9B,EAAE,OAAOH,OAAO;YACdC,QAAQD,KAAK,CAACA;QAChB;IACF;AACF"}