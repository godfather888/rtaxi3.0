{"version":3,"sources":["../../../../../../../../../libs/database/src/lib/migration/1659272213700-sos.ts"],"sourcesContent":["import {MigrationInterface, QueryRunner} from \"typeorm\";\n\nexport class sos1659272213700 implements MigrationInterface {\n\n    public async up(queryRunner: QueryRunner): Promise<void> {\n        try {\n            await queryRunner.query(\"CREATE TABLE `sos` (`id` int NOT NULL PRIMARY KEY AUTO_INCREMENT, `createdAt` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), `status` enum('Submitted','UnderReview','FalseAlarm','Resolved') NOT NULL DEFAULT 'Submitted', `requestId` int NOT NULL, `location` point DEFAULT NULL, `submittedByRider` tinyint NOT NULL, FOREIGN KEY (`requestId`) REFERENCES `request` (`id`));\");\n        } catch(error) {}\n        try {\n            await queryRunner.query(\"CREATE TABLE `sos_activity` ( `id` int NOT NULL PRIMARY KEY AUTO_INCREMENT, `createdAt` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), `action` enum('Submitted','Seen','ContactDriver','ContactAuthorities','MarkedAsResolved','MarkedAsFalseAlarm') NOT NULL, `note` varchar(2000) NOT NULL, `operatorId` int DEFAULT NULL, `sosId` int NOT NULL, FOREIGN KEY (`operatorId`) REFERENCES `operator` (`id`), FOREIGN KEY (`sosId`) REFERENCES `sos` (`id`))\");\n        } catch(error) {}\n    }\n\n    public async down(queryRunner: QueryRunner): Promise<void> {\n    }\n}\n"],"names":["sos1659272213700","up","queryRunner","query","error","down"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAEaA;;;eAAAA;;;AAAN,IAAA,AAAMA,mBAAN,MAAMA;IAET,MAAaC,GAAGC,WAAwB,EAAiB;QACrD,IAAI;YACA,MAAMA,YAAYC,KAAK,CAAC;QAC5B,EAAE,OAAMC,OAAO,CAAC;QAChB,IAAI;YACA,MAAMF,YAAYC,KAAK,CAAC;QAC5B,EAAE,OAAMC,OAAO,CAAC;IACpB;IAEA,MAAaC,KAAKH,WAAwB,EAAiB,CAC3D;AACJ"}