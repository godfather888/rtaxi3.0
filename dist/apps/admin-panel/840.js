"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[840],{1840:(I,v,s)=>{s.r(v),s.d(v,{SOSModule:()=>R});var h=s(8434),m=s(7624),S=s(3241),y=s(2067),C=s(6354),g=s(6807),T=s(9933),t=s(1360),r=s(2209),a=s(3359),n=s(5699),o=s(3062),d=s(8018),l=s(3409);function c(e,j){if(1&e&&(t.j41(0,"tr",5)(1,"td"),t.EFF(2),t.nI1(3,"timeago"),t.k0s(),t.j41(4,"td")(5,"nz-tag",6),t.EFF(6),t.nI1(7,"translate"),t.k0s()()()),2&e){const i=j.$implicit,u=t.XpG(2);t.Y8G("routerLink","view/"+i.id),t.R7$(2),t.JRh(t.bMT(3,5,i.createdAt)),t.R7$(3),t.Y8G("nzColor",u.tagColor.sosStatus(i.status))("nzBordered",!1),t.R7$(),t.JRh(t.bMT(7,7,"enum.sosStatus."+u.camelCase(i.status)))}}function f(e,j){if(1&e){const i=t.RV6();t.j41(0,"nz-table",3,0),t.bIt("nzQueryParams",function(p){t.eBV(i);const z=t.XpG();return t.Njj(z.tableService.onTableQueryParamsChange(p))}),t.j41(2,"thead")(3,"tr")(4,"th"),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"th"),t.EFF(8),t.nI1(9,"translate"),t.k0s()()(),t.j41(10,"tbody"),t.DNE(11,c,8,9,"tr",4),t.k0s()()}if(2&e){const i=j.ngIf,u=t.sdS(1);t.Y8G("nzFrontPagination",!1)("nzData",i.nodes)("nzTotal",i.totalCount),t.R7$(5),t.JRh(t.bMT(6,6,"profile.dateTime")),t.R7$(3),t.JRh(t.bMT(9,8,"profile.status")),t.R7$(3),t.Y8G("ngForOf",u.data)}}let b=(()=>{class e{route;router;tagColor;tableService;query;complaintStatus=S.ywf;camelCase=T.xQ;constructor(i,u,p,z){this.route=i,this.router=u,this.tagColor=p,this.tableService=z}ngOnInit(){this.query=this.route.data.pipe((0,C.T)(i=>i.sos))}static \u0275fac=function(u){return new(u||e)(t.rXU(r.nX),t.rXU(r.Ix),t.rXU(y.t),t.rXU(g.a))};static \u0275cmp=t.VBU({type:e,selectors:[["app-sos-list"]],standalone:!1,decls:4,vars:4,consts:[["table",""],["nzBackIcon","","nzTitle","SOS","nzSubtitle","Distress Signals submitted by users",3,"nzGhost"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],["nzShowSizeChanger","","nzBordered","",3,"nzQueryParams","nzFrontPagination","nzData","nzTotal"],["class","group cursor-pointer",3,"routerLink",4,"ngFor","ngForOf"],[1,"group","cursor-pointer",3,"routerLink"],[3,"nzColor","nzBordered"]],template:function(u,p){if(1&u&&(t.j41(0,"nz-page-header",1)(1,"nz-page-header-content"),t.DNE(2,f,12,10,"nz-table",2),t.nI1(3,"async"),t.k0s()()),2&u){let z;t.Y8G("nzGhost",!1),t.R7$(2),t.Y8G("ngIf",null==(z=t.bMT(3,2,p.query))||null==z.data?null:z.data.distressSignals)}},dependencies:[h.Sq,h.bT,m.Wk,a.CP,a.SO,a._4,a.IL,a.aj,a.kt,n.s,o.WB,o.zR,h.Jj,d.D9,l.PZ],encapsulation:2})}return e})(),O=(()=>{class e{paging;gql;constructor(i,u){this.paging=i,this.gql=u}resolve(i,u){const p=this.paging.deserializeQueryParams(i.queryParams);return this.gql.fetch(p)}static \u0275fac=function(u){return new(u||e)(t.KVO(g.a),t.KVO(S.W2x))};static \u0275prov=t.jDH({token:e,factory:e.\u0275fac})}return e})();const F=[{path:"",component:b,resolve:{sos:O},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"view/:id",loadChildren:()=>Promise.all([s.e(76),s.e(335)]).then(s.bind(s,335)).then(e=>e.SOSViewModule)}];let P=(()=>{class e{static \u0275fac=function(u){return new(u||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({providers:[O],imports:[m.iI.forChild(F),m.iI]})}return e})();var $=s(5885);let R=(()=>{class e{static \u0275fac=function(u){return new(u||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({providers:[y.t],imports:[h.MD,P,$.G]})}return e})()},6807:(I,v,s)=>{s.d(v,{a:()=>S});var h=s(1360),m=s(2209);let S=(()=>{class g{router;route;constructor(t,r){this.router=t,this.route=r}serializeQueryParams(t,r){const a={};if(a.pageIndex=t.pageIndex,a.pageSize=t.pageSize,null!=t.filter){const n=t.filter.filter(o=>null!=o.value&&o.value.length>0).map(o=>`${o.key}|${Array.isArray(o.value)?"in":"eq"}|${Array.isArray(o.value)?o.value.join("-"):o.value}`);null!=r.filter&&n.push(...r.filter.split(",")),a.filter=n.length>0?n.join(","):void 0}if(null!=t.sort&&t.sort.length>0){const n=t.sort.filter(o=>null!=o.value).map(o=>`${o.key}|${"ascend"==o.value?"ASC":"DESC"}`);null!=r.sort&&n.push(...r.sort.split(",")),a.sort=n.length>0?n.join(","):void 0}return a}onTableQueryParamsChange(t){const r=this.serializeQueryParams(t,this.route.snapshot.queryParams);this.router.navigate([],{relativeTo:this.route,queryParams:r,queryParamsHandling:"merge"})}filterText(t,r){const n=this.deserializeQueryParams(this.route).filter??{};n[t]=null!=r?{like:r}:{};const o=Object.keys(n).map(l=>{if(Object.keys(n[l]).length<1)return null;const c=Object.keys(n[l])[0];return`${l}|${c}|${"in"==c?n[l][c].join("-"):n[l][c]}`}).filter(l=>null!=l),d=o.length>0?o.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:d},queryParamsHandling:"merge"})}filterRange(t,r){const n=this.deserializeQueryParams(this.route).filter??{};n[t]=null!=r?{between:r}:{};const o=Object.keys(n).map(l=>{if(Object.keys(n[l]).length<1)return null;const c=Object.keys(n[l])[0];return`${l}|${c}|${"in"==c||"between"==c?n[l][c].join("-"):n[l][c]}`}).filter(l=>null!=l),d=o.length>0?o.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:d},queryParamsHandling:"merge"})}resetFilter(t,r){this.filterText(t,void 0),r.value=""}downloadURI(t,r){const a=document.createElement("a");a.download=r,a.href=t,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)}deserializeQueryParams(t){const r=t.sort?t.sort.split(",").map(d=>({field:d.split("|")[0],direction:d.split("|")[1]})):[],a={};null!=t.filter&&t.filter.split(",").forEach(d=>{const l={},c=d.split("|")[1];if("in"==c){const f=d.split("|")[2].split("-");l[c]=f}else if("between"==c){const f=d.split("|")[2].split("-");l[c]={lower:f[0],upper:f[1]}}else l[c]=d.split("|")[2];a[d.split("|")[0]]=l});const n=null!=t.pageIndex?parseInt(t.pageIndex):1,o=null!=t.pageSize?parseInt(t.pageSize):10;return{sorting:r.length>0?r:void 0,paging:{offset:(n-1)*o,limit:o},filter:null!=a&&Object.keys(a).length>0?a:void 0}}static \u0275fac=function(r){return new(r||g)(h.KVO(m.Ix),h.KVO(m.nX))};static \u0275prov=h.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()}}]);