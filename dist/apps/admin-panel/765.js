"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[765],{6765:(D,R,l)=>{l.r(R),l.d(R,{DriverWalletsModule:()=>A});var y=l(5885),v=l(7624),T=l(467),b=l(3241),F=l(8204),g=l(6354),S=l(4843),t=l(6807),n=l(1360),c=l(2209),a=l(8434),i=l(9417),d=l(3359),u=l(1011),p=l(1868),m=l(2602),M=l(513),$=l(6389),E=l(5930),W=l(1951),C=l(3062),G=l(8018);const O=()=>[];function _(o,j){if(1&o&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.k0s(),n.j41(3,"td"),n.EFF(4),n.nI1(5,"currency"),n.k0s(),n.j41(6,"td"),n.EFF(7),n.k0s(),n.j41(8,"td")(9,"a",22),n.EFF(10),n.nI1(11,"translate"),n.k0s()()()),2&o){let r;const e=j.$implicit;n.R7$(2),n.JRh(null==e.driver?"Driver not found":null!==(r=e.driver.firstName)&&void 0!==r?r:""+e.driver.lastName),n.R7$(2),n.JRh(n.i5U(5,5,e.balance,e.currency)),n.R7$(3),n.JRh(e.currency),n.R7$(2),n.Y8G("routerLink","/drivers/view/"+e.driverId),n.R7$(),n.JRh(n.bMT(11,8,"table.viewDriver"))}}function x(o,j){if(1&o){const r=n.RV6();n.j41(0,"nz-table",16,2),n.bIt("nzQueryParams",function(s){n.eBV(r);const f=n.XpG(2);return n.Njj(f.tableService.onTableQueryParamsChange(s))}),n.j41(2,"thead")(3,"tr")(4,"th"),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.j41(7,"th",17),n.EFF(8),n.nI1(9,"translate"),n.j41(10,"nz-filter-trigger",18),n.nrm(11,"i",19),n.k0s()(),n.j41(12,"th",20),n.nI1(13,"async"),n.EFF(14),n.nI1(15,"translate"),n.k0s(),n.j41(16,"th"),n.EFF(17),n.nI1(18,"translate"),n.k0s()()(),n.j41(19,"tbody"),n.DNE(20,_,12,10,"tr",21),n.k0s()()}if(2&o){let r;const e=j.ngIf,s=n.sdS(1),f=n.XpG(2),h=n.sdS(15);n.Y8G("nzFrontPagination",!1)("nzData",e.nodes)("nzTotal",e.totalCount),n.R7$(5),n.JRh(n.bMT(6,12,"profile.name")),n.R7$(3),n.SpI("",n.bMT(9,14,"profile.amount")," "),n.R7$(2),n.Y8G("nzActive",-1!==f.amountRange[0])("nzDropdownMenu",h),n.R7$(2),n.Y8G("nzFilters",null!==(r=n.bMT(13,16,f.currencies))&&void 0!==r?r:n.lJ4(22,O))("nzFilterFn",!0),n.R7$(2),n.JRh(n.bMT(15,18,"profile.currency")),n.R7$(3),n.JRh(n.bMT(18,20,"profile.actions")),n.R7$(3),n.Y8G("ngForOf",s.data)}}function P(o,j){if(1&o&&(n.j41(0,"nz-page-header-content"),n.DNE(1,x,21,23,"nz-table",15),n.nI1(2,"async"),n.k0s()),2&o){let r;const e=n.XpG();n.R7$(),n.Y8G("ngIf",null==(r=n.bMT(2,1,e.query))||null==r.data?null:r.data.driverWallets)}}let L=(()=>{class o{route;exportGql;tableService;query;amountRange=[-1,-1];currencies;constructor(r,e,s){this.route=r,this.exportGql=e,this.tableService=s}ngOnInit(){this.query=this.route.data.pipe((0,g.T)(r=>r.driverWallet)),this.currencies=this.query.pipe((0,g.T)(r=>this.distinctCurrency(r.data.regions.nodes).map(e=>({text:e,value:e}))))}exportTo(r){var e=this;return(0,T.A)(function*(){const s=yield(0,S._)(e.exportGql.fetch({input:{table:b.Tln.DriverWallet,type:b.vYz.Csv,relations:["driver"]}}));e.tableService.downloadURI(F.c.root+s.data.export.url,`export-${(new Date).getTime()}.csv`)})()}distinctCurrency(r){return r.map(e=>e.currency).filter((e,s,f)=>f.indexOf(e)===s)}static \u0275fac=function(e){return new(e||o)(n.rXU(c.nX),n.rXU(b.dW1),n.rXU(t.a))};static \u0275cmp=n.VBU({type:o,selectors:[["app-driver-wallets-list"]],standalone:!1,decls:28,vars:22,consts:[["menuExport","nzDropdownMenu"],["filteramount","nzDropdownMenu"],["table",""],["nzBackIcon","","nzTitle","Driver Wallets","nzSubtitle","List of drivers current wallet balance",3,"nzGhost"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],["nz-icon","","nzType","export"],["nz-icon","","nzType","down"],["nz-menu",""],["nz-menu-item","",3,"click"],[4,"ngIf"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["nz-input","","type","number",3,"ngModelChange","placeholder","ngModel"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],["nzShowSizeChanger","","nzBordered","",3,"nzQueryParams","nzFrontPagination","nzData","nzTotal"],["nzShowSort","","nzColumnKey","amount","nzCustomFilter",""],[3,"nzActive","nzDropdownMenu"],["nz-icon","","nzType","search"],["nzShowSort","","nzColumnKey","currency","nzShowFilter","",3,"nzFilters","nzFilterFn"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(e,s){if(1&e){const f=n.RV6();n.j41(0,"nz-page-header",3)(1,"nz-page-header-extra")(2,"button",4),n.nrm(3,"i",5),n.EFF(4),n.nI1(5,"translate"),n.nrm(6,"i",6),n.k0s(),n.j41(7,"nz-dropdown-menu",null,0)(9,"ul",7)(10,"li",8),n.bIt("click",function(){return n.eBV(f),n.Njj(s.exportTo("csv"))}),n.EFF(11,"CSV"),n.k0s()()()(),n.DNE(12,P,3,3,"nz-page-header-content",9),n.nI1(13,"async"),n.k0s(),n.j41(14,"nz-dropdown-menu",null,1)(16,"div",10)(17,"div",11)(18,"input",12),n.nI1(19,"translate"),n.mxI("ngModelChange",function(z){return n.eBV(f),n.DH7(s.amountRange[0],z)||(s.amountRange[0]=z),n.Njj(z)}),n.k0s(),n.j41(20,"input",12),n.nI1(21,"translate"),n.mxI("ngModelChange",function(z){return n.eBV(f),n.DH7(s.amountRange[1],z)||(s.amountRange[1]=z),n.Njj(z)}),n.k0s(),n.j41(22,"button",13),n.bIt("click",function(){return n.eBV(f),n.Njj(s.tableService.filterRange("balance",s.amountRange))}),n.EFF(23),n.nI1(24,"translate"),n.k0s(),n.j41(25,"button",14),n.bIt("click",function(){return n.eBV(f),n.Njj(s.tableService.filterRange("balance",void 0))}),n.EFF(26),n.nI1(27,"translate"),n.k0s()()()()}if(2&e){let f;const h=n.sdS(8);n.Y8G("nzGhost",!1),n.R7$(2),n.Y8G("nzDropdownMenu",h),n.R7$(2),n.SpI(" ",n.bMT(5,10,"profile.export")," "),n.R7$(8),n.Y8G("ngIf",null==(f=n.bMT(13,12,s.query))?null:f.data),n.R7$(6),n.FS9("placeholder",n.bMT(19,14,"table.min")),n.R50("ngModel",s.amountRange[0]),n.R7$(2),n.FS9("placeholder",n.bMT(21,16,"table.max")),n.R50("ngModel",s.amountRange[1]),n.R7$(3),n.JRh(n.bMT(24,18,"profile.search")),n.R7$(3),n.JRh(n.bMT(27,20,"profile.reset"))}},dependencies:[v.Wk,a.Sq,a.bT,i.me,i.Q0,i.BC,i.vS,d.CP,d.Cc,d.SO,d._4,d.IL,d.aj,d.kt,d.Kg,u.Sy,p.jS,p.CU,m.j3,m.wQ,m.h4,M.aO,$.c,E.p,W.Dn,C.WB,C.zR,C.ov,a.Jj,a.oe,G.D9],encapsulation:2})}return o})(),I=(()=>{class o{paging;gql;constructor(r,e){this.paging=r,this.gql=e}resolve(r,e){const s=this.paging.deserializeQueryParams(r.queryParams);return this.gql.fetch(s)}static \u0275fac=function(e){return new(e||o)(n.KVO(t.a),n.KVO(b.HRH))};static \u0275prov=n.jDH({token:o,factory:o.\u0275fac})}return o})();const k=[{path:"",component:L,resolve:{driverWallet:I},runGuardsAndResolvers:"paramsOrQueryParamsChange"}];let V=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=n.$C({type:o});static \u0275inj=n.G2t({providers:[I],imports:[v.iI.forChild(k),v.iI]})}return o})(),A=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=n.$C({type:o});static \u0275inj=n.G2t({imports:[V,y.G]})}return o})()},6807:(D,R,l)=>{l.d(R,{a:()=>T});var y=l(1360),v=l(2209);let T=(()=>{class g{router;route;constructor(t,n){this.router=t,this.route=n}serializeQueryParams(t,n){const c={};if(c.pageIndex=t.pageIndex,c.pageSize=t.pageSize,null!=t.filter){const a=t.filter.filter(i=>null!=i.value&&i.value.length>0).map(i=>`${i.key}|${Array.isArray(i.value)?"in":"eq"}|${Array.isArray(i.value)?i.value.join("-"):i.value}`);null!=n.filter&&a.push(...n.filter.split(",")),c.filter=a.length>0?a.join(","):void 0}if(null!=t.sort&&t.sort.length>0){const a=t.sort.filter(i=>null!=i.value).map(i=>`${i.key}|${"ascend"==i.value?"ASC":"DESC"}`);null!=n.sort&&a.push(...n.sort.split(",")),c.sort=a.length>0?a.join(","):void 0}return c}onTableQueryParamsChange(t){const n=this.serializeQueryParams(t,this.route.snapshot.queryParams);this.router.navigate([],{relativeTo:this.route,queryParams:n,queryParamsHandling:"merge"})}filterText(t,n){const a=this.deserializeQueryParams(this.route).filter??{};a[t]=null!=n?{like:n}:{};const i=Object.keys(a).map(u=>{if(Object.keys(a[u]).length<1)return null;const p=Object.keys(a[u])[0];return`${u}|${p}|${"in"==p?a[u][p].join("-"):a[u][p]}`}).filter(u=>null!=u),d=i.length>0?i.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:d},queryParamsHandling:"merge"})}filterRange(t,n){const a=this.deserializeQueryParams(this.route).filter??{};a[t]=null!=n?{between:n}:{};const i=Object.keys(a).map(u=>{if(Object.keys(a[u]).length<1)return null;const p=Object.keys(a[u])[0];return`${u}|${p}|${"in"==p||"between"==p?a[u][p].join("-"):a[u][p]}`}).filter(u=>null!=u),d=i.length>0?i.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:d},queryParamsHandling:"merge"})}resetFilter(t,n){this.filterText(t,void 0),n.value=""}downloadURI(t,n){const c=document.createElement("a");c.download=n,c.href=t,c.target="_blank",document.body.appendChild(c),c.click(),document.body.removeChild(c)}deserializeQueryParams(t){const n=t.sort?t.sort.split(",").map(d=>({field:d.split("|")[0],direction:d.split("|")[1]})):[],c={};null!=t.filter&&t.filter.split(",").forEach(d=>{const u={},p=d.split("|")[1];if("in"==p){const m=d.split("|")[2].split("-");u[p]=m}else if("between"==p){const m=d.split("|")[2].split("-");u[p]={lower:m[0],upper:m[1]}}else u[p]=d.split("|")[2];c[d.split("|")[0]]=u});const a=null!=t.pageIndex?parseInt(t.pageIndex):1,i=null!=t.pageSize?parseInt(t.pageSize):10;return{sorting:n.length>0?n:void 0,paging:{offset:(a-1)*i,limit:i},filter:null!=c&&Object.keys(c).length>0?c:void 0}}static \u0275fac=function(n){return new(n||g)(y.KVO(v.Ix),y.KVO(v.nX))};static \u0275prov=y.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()}}]);