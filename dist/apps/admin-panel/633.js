"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[633],{3633:(I,u,r)=>{r.r(u),r.d(u,{ManagementSettingsModule:()=>T});var y=r(8434),f=r(7624),p=r(467),s=r(9417),l=r(3241),c=r(4843),t=r(1360),P=r(2209),w=r(7094),v=r(1011),b=r(513),S=r(6389),A=r(5930),g=r(7529),i=r(8927),z=r(6057),G=r(3062),C=r(5703),F=r(8018);let j=(()=>{class e{route;message;updatePasswordGql;updateConfigGql;fb;form;formApiKey;subscription;constructor(n,o,a,d,m){this.route=n,this.message=o,this.updatePasswordGql=a,this.updateConfigGql=d,this.fb=m,this.formApiKey=this.fb.group({backendMapsAPIKey:[null,s.k0.required],twilioAccountSid:[null,s.k0.required],twilioAuthToken:[null,s.k0.required],twilioFromNumber:[null,s.k0.required],twilioVerificationCodeSMSTemplate:[null,s.k0.required]}),this.form=this.fb.group({oldPassword:[null,s.k0.required],newPassword:[null,s.k0.required],newPasswordRepeat:[null,s.k0.required]})}ngOnInit(){this.subscription=this.route.data.subscribe(n=>{this.formApiKey.patchValue(n.data.data.currentConfiguration)})}ngOnDestroy(){this.subscription?.unsubscribe()}onSubmit(){var n=this;return(0,p.A)(function*(){if(n.form.value.newPassword==n.form.value.newPasswordRepeat)try{yield(0,c._)(n.updatePasswordGql.mutate({input:{oldPassword:n.form.value.oldPassword,newPassword:n.form.value.newPassword}})),n.message.success("Password Updated Successfully."),n.form.reset()}catch{n.message.error("Action is not allowed.")}else n.message.error("Passwords don't match.")})()}onSubmitApiKey(){var n=this;return(0,p.A)(function*(){try{yield(0,c._)(n.updateConfigGql.mutate({input:n.formApiKey.value})),n.message.success("API Key Updated Successfully.")}catch(o){n.message.error(o.message)}})()}static \u0275fac=function(o){return new(o||e)(t.rXU(P.nX),t.rXU(w.xh),t.rXU(l.xpg),t.rXU(l.wGh),t.rXU(s.ze))};static \u0275cmp=t.VBU({type:e,selectors:[["app-management-settings"]],standalone:!1,decls:36,vars:9,consts:[["frm",""],["frmApi",""],["nzTabPosition","left"],[3,"nzTitle"],["nzTitle","Change Password","nzSubtitle","Update your password used to access this panel",3,"nzGhost"],["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","oldPassword"],["nzErrorTip","Password is incorrect"],["nz-input","","formControlName","oldPassword","id","oldPassword","type","password"],["nzRequired","","nzFor","newPassword"],["nz-input","","formControlName","newPassword","id","newPassword","type","password"],["nzRequired","","nzFor","newPasswordRepeat"],["nz-input","","formControlName","newPasswordRepeat","id","newPasswordRepeat","type","password"],["nz-button","","nzType","primary","type","submit",1,"float-right",3,"disabled"],["nzTitle","API Keys"],["nzTitle","API Keys","nzSubtitle","Manage your API keys",3,"nzGhost"],["nzRequired","","nzFor","backendMapsAPIKey"],["nz-input","","formControlName","backendMapsAPIKey","id","backendMapsAPIKey"],["nz-button","","nzType","primary","type","submit",1,"float-right","mt-4",3,"disabled"]],template:function(o,a){if(1&o){const d=t.RV6();t.j41(0,"nz-tabset",2)(1,"nz-tab",3),t.nI1(2,"translate"),t.nrm(3,"nz-page-header",4),t.j41(4,"nz-card")(5,"form",5,0),t.bIt("ngSubmit",function(){return t.eBV(d),t.Njj(a.onSubmit())}),t.j41(7,"nz-form-item")(8,"nz-form-label",6),t.EFF(9,"Old Password"),t.k0s(),t.j41(10,"nz-form-control",7),t.nrm(11,"input",8),t.k0s()(),t.j41(12,"nz-form-item")(13,"nz-form-label",9),t.EFF(14,"New Password"),t.k0s(),t.j41(15,"nz-form-control",7),t.nrm(16,"input",10),t.k0s()(),t.j41(17,"nz-form-item")(18,"nz-form-label",11),t.EFF(19,"New Password Repeat"),t.k0s(),t.j41(20,"nz-form-control",7),t.nrm(21,"input",12),t.k0s()(),t.j41(22,"button",13),t.EFF(23,"Save"),t.k0s()()()(),t.j41(24,"nz-tab",14),t.nrm(25,"nz-page-header",15),t.j41(26,"nz-card")(27,"form",5,1),t.bIt("ngSubmit",function(){return t.eBV(d),t.Njj(a.onSubmitApiKey())}),t.j41(29,"nz-form-item")(30,"nz-form-label",16),t.EFF(31,"Google Maps Backend API Key"),t.k0s(),t.j41(32,"nz-form-control"),t.nrm(33,"input",17),t.k0s()(),t.j41(34,"button",18),t.EFF(35,"Save"),t.k0s()()()()()}2&o&&(t.R7$(),t.FS9("nzTitle",t.bMT(2,7,"settings.generalSettings")),t.R7$(2),t.Y8G("nzGhost",!1),t.R7$(2),t.Y8G("formGroup",a.form),t.R7$(17),t.Y8G("disabled",a.form.invalid),t.R7$(3),t.Y8G("nzGhost",!1),t.R7$(2),t.Y8G("formGroup",a.formApiKey),t.R7$(7),t.Y8G("disabled",a.formApiKey.invalid))},dependencies:[s.qT,s.me,s.BC,s.cb,s.j4,s.JD,v.Sy,b.aO,S.c,A.p,g.Uq,g.e,i.CA,i.Ls,i.Mo,i.zS,z.JZ,z.rE,G.WB,C.cK,F.D9],encapsulation:2})}return e})(),h=(()=>{class e{gql;constructor(n){this.gql=n}resolve(n,o){return this.gql.fetch({})}static \u0275fac=function(o){return new(o||e)(t.KVO(l.pCh))};static \u0275prov=t.jDH({token:e,factory:e.\u0275fac})}return e})();const M=[{path:"",component:j,resolve:{data:h}}];let R=(()=>{class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({providers:[h],imports:[f.iI.forChild(M),f.iI]})}return e})();var K=r(5885);let T=(()=>{class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({imports:[y.MD,R,K.G]})}return e})()}}]);