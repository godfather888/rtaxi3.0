"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[752],{6807:(_,b,o)=>{o.d(b,{a:()=>j});var y=o(1360),T=o(2209);let j=(()=>{class g{router;route;constructor(a,n){this.router=a,this.route=n}serializeQueryParams(a,n){const d={};if(d.pageIndex=a.pageIndex,d.pageSize=a.pageSize,null!=a.filter){const r=a.filter.filter(l=>null!=l.value&&l.value.length>0).map(l=>`${l.key}|${Array.isArray(l.value)?"in":"eq"}|${Array.isArray(l.value)?l.value.join("-"):l.value}`);null!=n.filter&&r.push(...n.filter.split(",")),d.filter=r.length>0?r.join(","):void 0}if(null!=a.sort&&a.sort.length>0){const r=a.sort.filter(l=>null!=l.value).map(l=>`${l.key}|${"ascend"==l.value?"ASC":"DESC"}`);null!=n.sort&&r.push(...n.sort.split(",")),d.sort=r.length>0?r.join(","):void 0}return d}onTableQueryParamsChange(a){const n=this.serializeQueryParams(a,this.route.snapshot.queryParams);this.router.navigate([],{relativeTo:this.route,queryParams:n,queryParamsHandling:"merge"})}filterText(a,n){const r=this.deserializeQueryParams(this.route).filter??{};r[a]=null!=n?{like:n}:{};const l=Object.keys(r).map(c=>{if(Object.keys(r[c]).length<1)return null;const p=Object.keys(r[c])[0];return`${c}|${p}|${"in"==p?r[c][p].join("-"):r[c][p]}`}).filter(c=>null!=c),u=l.length>0?l.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:u},queryParamsHandling:"merge"})}filterRange(a,n){const r=this.deserializeQueryParams(this.route).filter??{};r[a]=null!=n?{between:n}:{};const l=Object.keys(r).map(c=>{if(Object.keys(r[c]).length<1)return null;const p=Object.keys(r[c])[0];return`${c}|${p}|${"in"==p||"between"==p?r[c][p].join("-"):r[c][p]}`}).filter(c=>null!=c),u=l.length>0?l.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:u},queryParamsHandling:"merge"})}resetFilter(a,n){this.filterText(a,void 0),n.value=""}downloadURI(a,n){const d=document.createElement("a");d.download=n,d.href=a,d.target="_blank",document.body.appendChild(d),d.click(),document.body.removeChild(d)}deserializeQueryParams(a){const n=a.sort?a.sort.split(",").map(u=>({field:u.split("|")[0],direction:u.split("|")[1]})):[],d={};null!=a.filter&&a.filter.split(",").forEach(u=>{const c={},p=u.split("|")[1];if("in"==p){const f=u.split("|")[2].split("-");c[p]=f}else if("between"==p){const f=u.split("|")[2].split("-");c[p]={lower:f[0],upper:f[1]}}else c[p]=u.split("|")[2];d[u.split("|")[0]]=c});const r=null!=a.pageIndex?parseInt(a.pageIndex):1,l=null!=a.pageSize?parseInt(a.pageSize):10;return{sorting:n.length>0?n:void 0,paging:{offset:(r-1)*l,limit:l},filter:null!=d&&Object.keys(d).length>0?d:void 0}}static \u0275fac=function(n){return new(n||g)(y.KVO(T.Ix),y.KVO(T.nX))};static \u0275prov=y.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},8752:(_,b,o)=>{o.r(b),o.d(b,{AdminTransactionsModule:()=>w});var y=o(5885),T=o(7624),j=o(467),R=o(3241),I=o(8204),g=o(6354),$=o(4843),a=o(6807),n=o(1360),d=o(2209),r=o(8434),l=o(9417),u=o(3359),c=o(1011),p=o(1868),f=o(2602),S=o(513),M=o(6389),E=o(5930),A=o(1951),F=o(3062),D=o(5154),G=o(8018),O=o(3409);function k(e,h){if(1&e&&(n.j41(0,"a",24),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&e){const t=n.XpG().$implicit;n.Y8G("routerLink","/management/users/view/"+t.operatorId),n.R7$(),n.JRh(n.bMT(2,2,"table.viewOperator"))}}function P(e,h){if(1&e&&(n.j41(0,"a",24),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&e){const t=n.XpG().$implicit;n.Y8G("routerLink","/requests/view/"+t.requestId),n.R7$(),n.JRh(n.bMT(2,2,"table.viewRequest"))}}function x(e,h){if(1&e&&(n.j41(0,"tr")(1,"td",22),n.nI1(2,"date"),n.EFF(3),n.nI1(4,"timeago"),n.k0s(),n.j41(5,"td"),n.EFF(6),n.nI1(7,"translate"),n.nI1(8,"translate"),n.k0s(),n.j41(9,"td"),n.EFF(10),n.nI1(11,"currency"),n.k0s(),n.j41(12,"td"),n.EFF(13),n.k0s(),n.j41(14,"td"),n.DNE(15,k,3,4,"a",23)(16,P,3,4,"a",23),n.k0s()()),2&e){const t=h.$implicit;n.R7$(),n.Y8G("nz-tooltip",n.i5U(2,7,t.createdAt,"short")),n.R7$(2),n.JRh(n.bMT(4,10,t.createdAt)),n.R7$(3),n.JRh("Deduct"===t.action?n.bMT(7,12,"enum.transactionType."+t.deductType):n.bMT(8,14,"enum.transactionType."+t.rechargeType)),n.R7$(4),n.JRh(n.i5U(11,16,t.amount,t.currency)),n.R7$(3),n.JRh(t.description),n.R7$(2),n.Y8G("ngIf",null!==t.operatorId),n.R7$(),n.Y8G("ngIf",null!==t.requestId)}}function B(e,h){if(1&e){const t=n.RV6();n.j41(0,"nz-table",19,3),n.bIt("nzQueryParams",function(s){n.eBV(t);const m=n.XpG(2);return n.Njj(m.tableService.onTableQueryParamsChange(s))}),n.j41(2,"thead")(3,"tr")(4,"th",20),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.j41(7,"th",21),n.EFF(8),n.nI1(9,"translate"),n.k0s(),n.j41(10,"th"),n.EFF(11),n.nI1(12,"translate"),n.k0s(),n.j41(13,"th"),n.EFF(14),n.nI1(15,"translate"),n.k0s(),n.j41(16,"th"),n.EFF(17),n.nI1(18,"translate"),n.k0s()()(),n.j41(19,"tbody"),n.DNE(20,x,17,19,"tr",18),n.k0s()()}if(2&e){const t=h.ngIf,i=n.sdS(1);n.Y8G("nzFrontPagination",!1)("nzData",t.nodes)("nzTotal",t.totalCount),n.R7$(5),n.JRh(n.bMT(6,9,"profile.dateTime")),n.R7$(3),n.JRh(n.bMT(9,11,"profile.transactionType")),n.R7$(3),n.JRh(n.bMT(12,13,"profile.amount")),n.R7$(3),n.JRh(n.bMT(15,15,"profile.details")),n.R7$(3),n.JRh(n.bMT(18,17,"profile.actions")),n.R7$(3),n.Y8G("ngForOf",i.data)}}function J(e,h){if(1&e&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.nI1(3,"currency"),n.k0s()()),2&e){const t=h.$implicit;n.R7$(2),n.JRh(n.i5U(3,1,t.balance,t.currency))}}function V(e,h){if(1&e&&(n.j41(0,"nz-page-header-content"),n.DNE(1,B,21,19,"nz-table",16),n.nI1(2,"async"),n.j41(3,"nz-table",17,2)(5,"thead")(6,"tr")(7,"th"),n.EFF(8),n.nI1(9,"translate"),n.k0s()()(),n.j41(10,"tbody"),n.DNE(11,J,4,4,"tr",18),n.k0s()()()),2&e){let t;const i=h.ngIf,s=n.sdS(4),m=n.XpG();n.R7$(),n.Y8G("ngIf",null==(t=n.bMT(2,4,m.query))||null==t.data?null:t.data.providerTransactions),n.R7$(2),n.Y8G("nzData",i.providerWallets),n.R7$(5),n.JRh(n.bMT(9,6,"profile.total")),n.R7$(3),n.Y8G("ngForOf",s.data)}}let Q=(()=>{class e{route;tableService;exportGql;query;amountRange=[-1,-1];currencies;constructor(t,i,s){this.route=t,this.tableService=i,this.exportGql=s}ngOnInit(){this.query=this.route.data.pipe((0,g.T)(t=>t.providerWallet)),this.currencies=this.query.pipe((0,g.T)(t=>this.distinctCurrency(t.data.regions.nodes).map(i=>({text:i,value:i}))))}exportTo(t){var i=this;return(0,j.A)(function*(){const s=yield(0,$._)(i.exportGql.fetch({input:{table:R.Tln.ProviderWallet,type:R.vYz.Csv}}));i.tableService.downloadURI(I.c.root+s.data.export.url,`export-${(new Date).getTime()}.csv`)})()}distinctCurrency(t){return t.map(i=>i.currency).filter((i,s,m)=>m.indexOf(i)===s)}static \u0275fac=function(i){return new(i||e)(n.rXU(d.nX),n.rXU(a.a),n.rXU(R.dW1))};static \u0275cmp=n.VBU({type:e,selectors:[["app-admin-transactions"]],standalone:!1,decls:28,vars:22,consts:[["menuExport","nzDropdownMenu"],["filteramount","nzDropdownMenu"],["summaryTable",""],["table",""],["nzBackIcon","","nzTitle","Provider Wallet","nzSubtitle","List of system provider (you) income of services.",3,"nzGhost"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],["nz-icon","","nzType","export"],["nz-icon","","nzType","down"],["nz-menu",""],["nz-menu-item","",3,"click"],[4,"ngIf"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["nz-input","","type","number",3,"ngModelChange","placeholder","ngModel"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],["nzBordered","",1,"mt-2",3,"nzData"],[4,"ngFor","ngForOf"],["nzShowSizeChanger","","nzBordered","",3,"nzQueryParams","nzFrontPagination","nzData","nzTotal"],["nzShowSort","","nzColumnKey","createdAt"],["nzShowSort","","nzColumnKey","action"],[3,"nz-tooltip"],[3,"routerLink",4,"ngIf"],[3,"routerLink"]],template:function(i,s){if(1&i){const m=n.RV6();n.j41(0,"nz-page-header",4)(1,"nz-page-header-extra")(2,"button",5),n.nrm(3,"i",6),n.EFF(4),n.nI1(5,"translate"),n.nrm(6,"i",7),n.k0s(),n.j41(7,"nz-dropdown-menu",null,0)(9,"ul",8)(10,"li",9),n.bIt("click",function(){return n.eBV(m),n.Njj(s.exportTo("csv"))}),n.EFF(11,"CSV"),n.k0s()()()(),n.DNE(12,V,12,8,"nz-page-header-content",10),n.nI1(13,"async"),n.k0s(),n.j41(14,"nz-dropdown-menu",null,1)(16,"div",11)(17,"div",12)(18,"input",13),n.nI1(19,"translate"),n.mxI("ngModelChange",function(z){return n.eBV(m),n.DH7(s.amountRange[0],z)||(s.amountRange[0]=z),n.Njj(z)}),n.k0s(),n.j41(20,"input",13),n.nI1(21,"translate"),n.mxI("ngModelChange",function(z){return n.eBV(m),n.DH7(s.amountRange[1],z)||(s.amountRange[1]=z),n.Njj(z)}),n.k0s(),n.j41(22,"button",14),n.bIt("click",function(){return n.eBV(m),n.Njj(s.tableService.filterRange("balance",s.amountRange))}),n.EFF(23),n.nI1(24,"translate"),n.k0s(),n.j41(25,"button",15),n.bIt("click",function(){return n.eBV(m),n.Njj(s.tableService.filterRange("balance",void 0))}),n.EFF(26),n.nI1(27,"translate"),n.k0s()()()()}if(2&i){let m;const v=n.sdS(8);n.Y8G("nzGhost",!1),n.R7$(2),n.Y8G("nzDropdownMenu",v),n.R7$(2),n.SpI(" ",n.bMT(5,10,"profile.export")," "),n.R7$(8),n.Y8G("ngIf",null==(m=n.bMT(13,12,s.query))?null:m.data),n.R7$(6),n.FS9("placeholder",n.bMT(19,14,"table.min")),n.R50("ngModel",s.amountRange[0]),n.R7$(2),n.FS9("placeholder",n.bMT(21,16,"table.max")),n.R50("ngModel",s.amountRange[1]),n.R7$(3),n.JRh(n.bMT(24,18,"profile.search")),n.R7$(3),n.JRh(n.bMT(27,20,"profile.reset"))}},dependencies:[T.Wk,r.Sq,r.bT,l.me,l.Q0,l.BC,l.vS,u.CP,u.Cc,u.SO,u._4,u.IL,u.aj,u.kt,c.Sy,p.jS,p.CU,f.j3,f.wQ,f.h4,S.aO,M.c,E.p,A.Dn,F.WB,F.zR,F.ov,D.LH,r.Jj,r.oe,r.vh,G.D9,O.PZ],encapsulation:2})}return e})(),C=(()=>{class e{paging;gql;constructor(t,i){this.paging=t,this.gql=i}resolve(t,i){const s=this.paging.deserializeQueryParams(t.queryParams);return this.gql.fetch(s)}static \u0275fac=function(i){return new(i||e)(n.KVO(a.a),n.KVO(R.w8E))};static \u0275prov=n.jDH({token:e,factory:e.\u0275fac})}return e})();const Y=[{path:"",component:Q,resolve:{providerWallet:C},runGuardsAndResolvers:"paramsOrQueryParamsChange"}];let U=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=n.$C({type:e});static \u0275inj=n.G2t({providers:[C],imports:[T.iI.forChild(Y),T.iI]})}return e})(),w=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=n.$C({type:e});static \u0275inj=n.G2t({imports:[U,y.G]})}return e})()}}]);