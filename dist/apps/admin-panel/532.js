"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[532],{532:(S,R,e)=>{e.r(R),e.d(R,{RequestsModule:()=>x});var v=e(5885),m=e(7624),C=e(6603),h=e(3241),T=e(6807),t=e(1360);let j=(()=>{class s{paging;gql;constructor(l,d){this.paging=l,this.gql=d}resolve(l,d){const f=this.paging.deserializeQueryParams(l.queryParams);return this.gql.fetch(f)}static \u0275fac=function(d){return new(d||s)(t.KVO(T.a),t.KVO(h.eyo))};static \u0275prov=t.jDH({token:s,factory:s.\u0275fac})}return s})();var n=e(2067),i=e(6354),u=e(2209),r=e(8018),o=e(8434),g=e(9417),a=e(3359),c=e(2602),z=e(513),$=e(6389),M=e(5930),O=e(8960),E=e(5699),I=e(3062),P=e(5154),D=e(3409);function L(s,F){if(1&s&&(t.j41(0,"tr",12)(1,"td",13),t.nI1(2,"date"),t.EFF(3),t.nI1(4,"timeago"),t.nI1(5,"timeago"),t.k0s(),t.j41(6,"td"),t.EFF(7),t.nI1(8,"currency"),t.k0s(),t.j41(9,"td")(10,"nz-tag",14),t.EFF(11),t.nI1(12,"translate"),t.k0s()()()),2&s){const l=F.$implicit,d=t.XpG(2);t.Y8G("routerLink","view/"+l.id),t.R7$(),t.Y8G("nz-tooltip",t.i5U(2,8,l.expectedTimestamp,"short")),t.R7$(2),t.Lme("",t.bMT(4,11,l.createdOn)," ",l.status===d.orderStatus.Booked?"(Booked for "+t.bMT(5,13,l.expectedTimestamp)+")":"",""),t.R7$(4),t.JRh(t.i5U(8,15,l.costAfterCoupon,l.currency)),t.R7$(3),t.Y8G("nzColor",d.tagColor.orderStatus(l.status))("nzBordered",!1),t.R7$(),t.SpI("",t.bMT(12,18,"enum.request."+l.status)," ")}}function B(s,F){if(1&s){const l=t.RV6();t.j41(0,"nz-table",9,1),t.bIt("nzQueryParams",function(f){t.eBV(l);const p=t.XpG();return t.Njj(p.tableService.onTableQueryParamsChange(f))}),t.j41(2,"thead")(3,"tr")(4,"th"),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"th"),t.EFF(8),t.nI1(9,"translate"),t.k0s(),t.j41(10,"th",10),t.EFF(11),t.nI1(12,"translate"),t.k0s()()(),t.j41(13,"tbody"),t.DNE(14,L,13,20,"tr",11),t.k0s()()}if(2&s){const l=F.ngIf,d=t.sdS(1),f=t.XpG();t.Y8G("nzFrontPagination",!1)("nzData",l.nodes)("nzTotal",l.totalCount),t.R7$(5),t.SpI(" ",t.bMT(6,10,"profile.dateTime")," "),t.R7$(3),t.SpI(" ",t.bMT(9,12,"profile.cost")," "),t.R7$(2),t.Y8G("nzSortFn",!0)("nzFilters",f.statuses)("nzFilterFn",!0),t.R7$(),t.JRh(t.bMT(12,14,"profile.status")),t.R7$(3),t.Y8G("ngForOf",d.data)}}const G=[{path:"",component:(()=>{class s{tagColor;route;tableService;translate;statuses;query;dateRanges=[];orderStatus=h.Re4;constructor(l,d,f,p){this.tagColor=l,this.route=d,this.tableService=f,this.translate=p,this.statuses=Object.values(h.Re4).map(y=>({text:this.translate.instant(`enum.order.status.${y}`),value:y}))}ngOnInit(){this.query=this.route.data.pipe((0,i.T)(l=>l.orders))}static \u0275fac=function(d){return new(d||s)(t.rXU(n.t),t.rXU(u.nX),t.rXU(T.a),t.rXU(r.c$))};static \u0275cmp=t.VBU({type:s,selectors:[["app-requests-list"]],standalone:!1,decls:17,vars:11,consts:[["filterDateRange","nzDropdownMenu"],["table",""],["nzBackIcon","","nzTitle","Requests","nzSubtitle","List of all the order requests",3,"nzGhost"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],[1,"ant-table-filter-dropdown"],[1,"search-box"],[3,"ngModelChange","ngModel"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],["nzShowSizeChanger","","nzBordered","",3,"nzQueryParams","nzFrontPagination","nzData","nzTotal"],["nzColumnKey","status",3,"nzSortFn","nzFilters","nzFilterFn"],["class","group cursor-pointer",3,"routerLink",4,"ngFor","ngForOf"],[1,"group","cursor-pointer",3,"routerLink"],[3,"nz-tooltip"],[3,"nzColor","nzBordered"]],template:function(d,f){if(1&d){const p=t.RV6();t.j41(0,"nz-page-header",2),t.nrm(1,"nz-page-header-extra"),t.j41(2,"nz-page-header-content"),t.DNE(3,B,15,16,"nz-table",3),t.nI1(4,"async"),t.j41(5,"nz-dropdown-menu",null,0)(7,"div",4)(8,"div",5)(9,"nz-range-picker",6),t.mxI("ngModelChange",function(b){return t.eBV(p),t.DH7(f.dateRanges,b)||(f.dateRanges=b),t.Njj(b)}),t.k0s(),t.nrm(10,"br"),t.j41(11,"button",7),t.bIt("click",function(){return t.eBV(p),t.Njj(f.tableService.filterText("createdOn",void 0))}),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.j41(14,"button",8),t.bIt("click",function(){return t.eBV(p),t.Njj(f.tableService.filterText("createdOn",void 0))}),t.EFF(15),t.nI1(16,"translate"),t.k0s()()()()()()}if(2&d){let p;t.Y8G("nzGhost",!1),t.R7$(3),t.Y8G("ngIf",null==(p=t.bMT(4,5,f.query))||null==p.data?null:p.data.orders),t.R7$(6),t.R50("ngModel",f.dateRanges),t.R7$(3),t.JRh(t.bMT(13,7,"profile.search")),t.R7$(3),t.JRh(t.bMT(16,9,"profile.reset"))}},dependencies:[m.Wk,o.Sq,o.bT,g.BC,g.vS,a.CP,a.Cc,a.SO,a._4,a.IL,a.aj,a.kt,c.wQ,z.aO,$.c,M.p,O.SN,O.vw,E.s,I.WB,I.zR,I.ov,P.LH,o.Jj,o.oe,o.vh,r.D9,D.PZ],encapsulation:2})}return s})(),resolve:{orders:j},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"view/:id",loadChildren:()=>Promise.all([e.e(76),e.e(38)]).then(e.bind(e,4038)).then(s=>s.RequestViewModule)}];let A=(()=>{class s{static \u0275fac=function(d){return new(d||s)};static \u0275mod=t.$C({type:s});static \u0275inj=t.G2t({providers:[j,C.Y],imports:[m.iI.forChild(G),m.iI]})}return s})(),x=(()=>{class s{static \u0275fac=function(d){return new(d||s)};static \u0275mod=t.$C({type:s});static \u0275inj=t.G2t({imports:[A,v.G]})}return s})()},6603:(S,R,e)=>{e.d(R,{Y:()=>C});var v=e(3241),m=e(1360);let C=(()=>{class h{gql;constructor(t){this.gql=t}resolve(t,j){return this.gql.fetch({id:t.params.id})}static \u0275fac=function(j){return new(j||h)(m.KVO(v.Coj))};static \u0275prov=m.jDH({token:h,factory:h.\u0275fac})}return h})()},6807:(S,R,e)=>{e.d(R,{a:()=>C});var v=e(1360),m=e(2209);let C=(()=>{class t{router;route;constructor(n,i){this.router=n,this.route=i}serializeQueryParams(n,i){const u={};if(u.pageIndex=n.pageIndex,u.pageSize=n.pageSize,null!=n.filter){const r=n.filter.filter(o=>null!=o.value&&o.value.length>0).map(o=>`${o.key}|${Array.isArray(o.value)?"in":"eq"}|${Array.isArray(o.value)?o.value.join("-"):o.value}`);null!=i.filter&&r.push(...i.filter.split(",")),u.filter=r.length>0?r.join(","):void 0}if(null!=n.sort&&n.sort.length>0){const r=n.sort.filter(o=>null!=o.value).map(o=>`${o.key}|${"ascend"==o.value?"ASC":"DESC"}`);null!=i.sort&&r.push(...i.sort.split(",")),u.sort=r.length>0?r.join(","):void 0}return u}onTableQueryParamsChange(n){const i=this.serializeQueryParams(n,this.route.snapshot.queryParams);this.router.navigate([],{relativeTo:this.route,queryParams:i,queryParamsHandling:"merge"})}filterText(n,i){const r=this.deserializeQueryParams(this.route).filter??{};r[n]=null!=i?{like:i}:{};const o=Object.keys(r).map(a=>{if(Object.keys(r[a]).length<1)return null;const c=Object.keys(r[a])[0];return`${a}|${c}|${"in"==c?r[a][c].join("-"):r[a][c]}`}).filter(a=>null!=a),g=o.length>0?o.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:g},queryParamsHandling:"merge"})}filterRange(n,i){const r=this.deserializeQueryParams(this.route).filter??{};r[n]=null!=i?{between:i}:{};const o=Object.keys(r).map(a=>{if(Object.keys(r[a]).length<1)return null;const c=Object.keys(r[a])[0];return`${a}|${c}|${"in"==c||"between"==c?r[a][c].join("-"):r[a][c]}`}).filter(a=>null!=a),g=o.length>0?o.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:g},queryParamsHandling:"merge"})}resetFilter(n,i){this.filterText(n,void 0),i.value=""}downloadURI(n,i){const u=document.createElement("a");u.download=i,u.href=n,u.target="_blank",document.body.appendChild(u),u.click(),document.body.removeChild(u)}deserializeQueryParams(n){const i=n.sort?n.sort.split(",").map(g=>({field:g.split("|")[0],direction:g.split("|")[1]})):[],u={};null!=n.filter&&n.filter.split(",").forEach(g=>{const a={},c=g.split("|")[1];if("in"==c){const z=g.split("|")[2].split("-");a[c]=z}else if("between"==c){const z=g.split("|")[2].split("-");a[c]={lower:z[0],upper:z[1]}}else a[c]=g.split("|")[2];u[g.split("|")[0]]=a});const r=null!=n.pageIndex?parseInt(n.pageIndex):1,o=null!=n.pageSize?parseInt(n.pageSize):10;return{sorting:i.length>0?i:void 0,paging:{offset:(r-1)*o,limit:o},filter:null!=u&&Object.keys(u).length>0?u:void 0}}static \u0275fac=function(i){return new(i||t)(v.KVO(m.Ix),v.KVO(m.nX))};static \u0275prov=v.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);