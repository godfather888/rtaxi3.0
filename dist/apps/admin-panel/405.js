"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[405],{2405:(_,F,r)=>{r.r(F),r.d(F,{ManagementFleetsModule:()=>q});var M=r(5885),g=r(7624),b=r(467),i=r(9417),N=r(3241),I=r(9923),k=r(4843),n=r(1360),$=r(7094),d=r(2209),z=r(8434),h=r(1011),v=r(513),C=r(6389),S=r(5930),j=r(7529),f=r(8927),y=r(1997),p=r(3062),P=r(5703),E=r(2047);function V(t,m){if(1&t&&n.nrm(0,"nz-option",29),2&t){const e=m.$implicit;n.Y8G("nzLabel",e.name+" ("+e.dial_code+")")("nzValue",e.dial_code)}}function B(t,m){if(1&t&&(n.j41(0,"nz-select",27),n.DNE(1,V,1,2,"nz-option",28),n.k0s()),2&t){const e=n.XpG();n.R7$(),n.Y8G("ngForOf",e.countryCodes)}}function L(t,m){if(1&t&&n.nrm(0,"nz-option",29),2&t){const e=m.$implicit;n.Y8G("nzLabel",e.name+" ("+e.dial_code+")")("nzValue",e.dial_code)}}function Y(t,m){if(1&t&&(n.j41(0,"nz-select",30),n.DNE(1,L,1,2,"nz-option",28),n.k0s()),2&t){const e=n.XpG();n.R7$(),n.Y8G("ngForOf",e.countryCodes)}}let D=(()=>{class t{fb;createRiderGQL;messageService;router;route;form;countryCodes=I.o;constructor(e,o,a,l,s){this.fb=e,this.createRiderGQL=o,this.messageService=a,this.router=l,this.route=s,this.form=this.fb.group({name:[null,i.k0.required],phoneNumberPrefix:["+1",i.k0.required],phoneNumber:[null,i.k0.required],mobileNumberPrefix:["+1",i.k0.required],mobileNumber:[null,i.k0.required],accountNumber:[null,i.k0.required],userName:[null,i.k0.required],password:[null,i.k0.required],commissionSharePercent:[0,i.k0.required],commissionShareFlat:[0,i.k0.required],address:[null]})}submitForm(){var e=this;return(0,b.A)(function*(){const{phoneNumber:o,phoneNumberPrefix:a,mobileNumber:l,mobileNumberPrefix:s,...c}=e.form.value,G=yield(0,k._)(e.createRiderGQL.mutate({input:{phoneNumber:`${a.substring(1)}${o}`,mobileNumber:`${s.substring(1)}${l}`,...c}}));(G.errors?.length??0)>0?e.messageService.error((G.errors??[]).map(Z=>Z.message).join(",")):e.messageService.success("Success"),e.router.navigateByUrl("/management/fleets")})()}static \u0275fac=function(o){return new(o||t)(n.rXU(i.ze),n.rXU(N.V8w),n.rXU($.xh),n.rXU(d.Ix),n.rXU(d.nX))};static \u0275cmp=n.VBU({type:t,selectors:[["app-fleet-new"]],standalone:!1,decls:57,vars:9,consts:[["frm",""],["addOnBeforeTemplate",""],["nzBackIcon","","nzTitle","New Fleet","nzSubtitle","Input new Fleet's details below.",3,"nzGhost"],["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","","nzFor","name"],["nzErrorTip","The input is not valid Name"],["nz-input","","formControlName","name","id","name"],["nzFor","phoneNumber","nzRequired",""],[3,"nzAddOnBefore"],["formControlName","phoneNumber","id","phoneNumber",1,"w-full"],["nzFor","mobileNumber","nzRequired",""],["formControlName","mobileNumber","id","mobileNumber",1,"w-full"],["nzRequired","","nzFor","userName"],["nzErrorTip","Username is not valid"],["nz-input","","formControlName","userName","id","userName"],["nzRequired","","nzFor","password"],["nzErrorTip","The input is not valid"],["nz-input","","formControlName","password","id","password"],["nzRequired","","nzFor","commissionSharePercent"],["required","","id","commissionSharePercent","formControlName","commissionSharePercent",1,"w-full",3,"nzMin","nzMax"],["nzRequired","","nzFor","commissionShareFlat"],["required","","id","commissionShareFlat","formControlName","commissionShareFlat",1,"w-full",3,"nzMin","nzMax"],["nzRequired","","nzFor","accountNumber"],["nz-input","","required","","id","accountNumber","formControlName","accountNumber"],["nzFor","address"],["nz-input","","id","address","formControlName","address"],["nz-button","","nzType","primary","type","submit",1,"float-right",3,"disabled"],["formControlName","phoneNumberPrefix",1,"phone-select"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["formControlName","mobileNumberPrefix",1,"phone-select"]],template:function(o,a){if(1&o){const l=n.RV6();n.nrm(0,"nz-page-header",2),n.j41(1,"nz-card")(2,"form",3,0),n.bIt("ngSubmit",function(){return n.eBV(l),n.Njj(a.submitForm())}),n.j41(4,"nz-form-item")(5,"nz-form-label",4),n.EFF(6,"Name"),n.k0s(),n.j41(7,"nz-form-control",5),n.nrm(8,"input",6),n.k0s()(),n.j41(9,"nz-form-item")(10,"nz-form-label",7),n.EFF(11,"Phone Number"),n.k0s(),n.j41(12,"nz-form-control")(13,"nz-input-group",8),n.DNE(14,B,2,1,"ng-template",null,1,n.C5r),n.nrm(16,"nz-input-number",9),n.k0s()()(),n.j41(17,"nz-form-item")(18,"nz-form-label",10),n.EFF(19,"Mobile Number"),n.k0s(),n.j41(20,"nz-form-control")(21,"nz-input-group",8),n.DNE(22,Y,2,1,"ng-template",null,1,n.C5r),n.nrm(24,"nz-input-number",11),n.k0s()()(),n.j41(25,"nz-form-item")(26,"nz-form-label",12),n.EFF(27,"Username"),n.k0s(),n.j41(28,"nz-form-control",13),n.nrm(29,"input",14),n.k0s()(),n.j41(30,"nz-form-item")(31,"nz-form-label",15),n.EFF(32,"Password"),n.k0s(),n.j41(33,"nz-form-control",16),n.nrm(34,"input",17),n.k0s()(),n.j41(35,"nz-form-item")(36,"nz-form-label",18),n.EFF(37,"Commission Percentage"),n.k0s(),n.j41(38,"nz-form-control"),n.nrm(39,"nz-input-number",19),n.k0s()(),n.j41(40,"nz-form-item")(41,"nz-form-label",20),n.EFF(42,"Commission Flat"),n.k0s(),n.j41(43,"nz-form-control"),n.nrm(44,"nz-input-number",21),n.k0s()(),n.j41(45,"nz-form-item")(46,"nz-form-label",22),n.EFF(47,"Bank Account Info"),n.k0s(),n.j41(48,"nz-form-control"),n.nrm(49,"input",23),n.k0s()(),n.j41(50,"nz-form-item")(51,"nz-form-label",24),n.EFF(52,"Address"),n.k0s(),n.j41(53,"nz-form-control"),n.nrm(54,"input",25),n.k0s()(),n.j41(55,"button",26),n.EFF(56,"Register"),n.k0s()()()}if(2&o){const l=n.sdS(15);n.Y8G("nzGhost",!1),n.R7$(2),n.Y8G("formGroup",a.form),n.R7$(11),n.Y8G("nzAddOnBefore",l),n.R7$(8),n.Y8G("nzAddOnBefore",l),n.R7$(18),n.Y8G("nzMin",0)("nzMax",100),n.R7$(5),n.Y8G("nzMin",0)("nzMax",100),n.R7$(11),n.Y8G("disabled",a.form.invalid)}},dependencies:[z.Sq,i.qT,i.me,i.BC,i.cb,i.YS,i.j4,i.JD,h.Sy,h.tg,v.aO,C.c,S.p,j.Uq,j.e,f.CA,f.Ls,f.Mo,f.zS,y.ld,y.WI,p.WB,P.cK,E.F],encapsulation:2})}return t})();var T=r(6807),O=r(2067),x=r(6354),u=r(3359),X=r(2602),U=r(1951),A=r(314),w=r(8018);function Q(t,m){if(1&t&&(n.j41(0,"tr",18)(1,"td"),n.EFF(2),n.k0s(),n.j41(3,"td"),n.EFF(4),n.nI1(5,"phone"),n.k0s()()),2&t){const e=m.$implicit;n.Y8G("routerLink","view/"+e.id),n.R7$(2),n.JRh(e.name),n.R7$(2),n.JRh(n.bMT(5,3,e.phoneNumber))}}function J(t,m){if(1&t){const e=n.RV6();n.j41(0,"nz-table",11,1),n.bIt("nzQueryParams",function(a){n.eBV(e);const l=n.XpG();return n.Njj(l.tableService.onTableQueryParamsChange(a))}),n.j41(2,"thead")(3,"tr")(4,"th",12),n.EFF(5),n.nI1(6,"translate"),n.j41(7,"nz-filter-trigger",13),n.nI1(8,"async"),n.nrm(9,"i",14),n.k0s()(),n.j41(10,"th",15),n.EFF(11),n.nI1(12,"translate"),n.j41(13,"nz-filter-trigger",16),n.nI1(14,"async"),n.nrm(15,"i",14),n.k0s()()()(),n.j41(16,"tbody"),n.DNE(17,Q,6,5,"tr",17),n.k0s()()}if(2&t){let e,o;const a=m.ngIf,l=n.sdS(1),s=n.XpG(),c=n.sdS(10);n.Y8G("nzFrontPagination",!1)("nzData",a.nodes)("nzTotal",a.totalCount),n.R7$(4),n.Y8G("nzSortFn",!0),n.R7$(),n.SpI(" ",n.bMT(6,11,"profile.name")," "),n.R7$(2),n.Y8G("nzActive",!0===(null==(e=n.bMT(8,13,s.route.params))||null==e.filter?null:e.filter.includes("lastName")))("nzDropdownMenu",c),n.R7$(3),n.Y8G("nzSortFn",!0),n.R7$(),n.SpI(" ",n.bMT(12,15,"profile.mobileNumber")," "),n.R7$(2),n.Y8G("nzActive",!0===(null==(o=n.bMT(14,17,s.route.params))||null==o.filter?null:o.filter.includes("mobileNumber"))),n.R7$(4),n.Y8G("ngForOf",l.data)}}let K=(()=>{class t{route;router;tagColor;tableService;query;nameSearchValue;constructor(e,o,a,l){this.route=e,this.router=o,this.tagColor=a,this.tableService=l}ngOnInit(){this.query=this.route.data.pipe((0,x.T)(e=>e.fleets))}filter(){var e=this;return(0,b.A)(function*(){e.router.navigate([],{relativeTo:e.route,queryParams:{search:JSON.stringify({name:e.nameSearchValue?{like:e.nameSearchValue}:void 0})},queryParamsHandling:"merge"})})()}static \u0275fac=function(o){return new(o||t)(n.rXU(d.nX),n.rXU(d.Ix),n.rXU(O.t),n.rXU(T.a))};static \u0275cmp=n.VBU({type:t,selectors:[["app-fleets-list"]],standalone:!1,decls:21,vars:17,consts:[["filtername","nzDropdownMenu"],["table",""],["nzBackIcon","","nzTitle","Fleets","nzSubtitle","List of all the fleets registered",3,"nzGhost"],["nz-button","","nzType","primary","routerLink","new"],["nz-icon","","nzType","plus"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","",3,"ngModelChange","placeholder","ngModel"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],["nzShowSizeChanger","","nzBordered","",3,"nzQueryParams","nzFrontPagination","nzData","nzTotal"],["nzCustomFilter","","nzColumnKey","lastName",3,"nzSortFn"],[3,"nzActive","nzDropdownMenu"],["nz-icon","","nzType","search"],["nzCustomFilter","","nzColumnKey","mobileNumber",3,"nzSortFn"],[3,"nzActive"],["class","group cursor-pointer",3,"routerLink",4,"ngFor","ngForOf"],[1,"group","cursor-pointer",3,"routerLink"]],template:function(o,a){if(1&o){const l=n.RV6();n.j41(0,"nz-page-header",2)(1,"nz-page-header-extra")(2,"button",3),n.nrm(3,"i",4),n.EFF(4),n.nI1(5,"translate"),n.k0s()(),n.j41(6,"nz-page-header-content"),n.DNE(7,J,18,19,"nz-table",5),n.nI1(8,"async"),n.k0s()(),n.j41(9,"nz-dropdown-menu",null,0)(11,"div",6)(12,"div",7)(13,"input",8),n.nI1(14,"translate"),n.mxI("ngModelChange",function(c){return n.eBV(l),n.DH7(a.nameSearchValue,c)||(a.nameSearchValue=c),n.Njj(c)}),n.k0s(),n.j41(15,"button",9),n.bIt("click",function(){return n.eBV(l),n.Njj(a.filter())}),n.EFF(16),n.nI1(17,"translate"),n.k0s(),n.j41(18,"button",10),n.bIt("click",function(){return n.eBV(l),n.Njj(a.filter())}),n.EFF(19),n.nI1(20,"translate"),n.k0s()()()()}if(2&o){let l;n.Y8G("nzGhost",!1),n.R7$(4),n.JRh(n.bMT(5,7,"profile.add")),n.R7$(3),n.Y8G("ngIf",null==(l=n.bMT(8,9,a.query))||null==l.data?null:l.data.fleets),n.R7$(6),n.FS9("placeholder",n.bMT(14,11,"profile.name")),n.R50("ngModel",a.nameSearchValue),n.R7$(3),n.SpI(" ",n.bMT(17,13,"profile.view")," "),n.R7$(3),n.JRh(n.bMT(20,15,"profile.reset"))}},dependencies:[g.Wk,z.Sq,z.bT,i.me,i.BC,i.vS,u.CP,u.Cc,u.SO,u._4,u.IL,u.aj,u.kt,u.Kg,h.Sy,X.wQ,v.aO,C.c,S.p,U.Dn,p.WB,p.zR,p.ov,z.Jj,A.X,w.D9],encapsulation:2})}return t})(),R=(()=>{class t{paging;gql;constructor(e,o){this.paging=e,this.gql=o}resolve(e,o){const a=this.paging.deserializeQueryParams(e.queryParams);return this.gql.fetch(a)}static \u0275fac=function(o){return new(o||t)(n.KVO(T.a),n.KVO(N.Mzi))};static \u0275prov=n.jDH({token:t,factory:t.\u0275fac})}return t})();const W=[{path:"",component:K,resolve:{fleets:R}},{path:"view/:id",loadChildren:()=>Promise.all([r.e(76),r.e(483)]).then(r.bind(r,8483)).then(t=>t.FleetViewModule)},{path:"new",component:D}];let H=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=n.$C({type:t});static \u0275inj=n.G2t({providers:[R],imports:[g.iI.forChild(W),g.iI]})}return t})(),q=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=n.$C({type:t});static \u0275inj=n.G2t({imports:[H,M.G]})}return t})()}}]);