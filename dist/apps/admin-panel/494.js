"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[494],{4113:(Pn,V,o)=>{o.r(V),o.d(V,{RiderViewModule:()=>Yn});var B=o(5885),h=o(7624),g=o(6807),T=o(6354),n=o(1360),z=o(2209),c=o(8434),d=o(3359),R=o(8018);function A(t,i){if(1&t){const e=n.RV6();n.j41(0,"tr")(1,"td"),n.EFF(2),n.k0s(),n.j41(3,"td",3),n.EFF(4),n.k0s(),n.j41(5,"td")(6,"a",5),n.bIt("click",function(){const a=n.eBV(e).$implicit,s=n.XpG(2);return n.Njj(s.openMap(a.location))}),n.EFF(7,"Open In Google Maps"),n.k0s()()()}if(2&t){const e=i.$implicit;n.R7$(2),n.JRh(e.title),n.R7$(2),n.JRh(e.details)}}function x(t,i){if(1&t){const e=n.RV6();n.j41(0,"nz-table",2,0),n.bIt("nzQueryParams",function(){n.eBV(e);const a=n.XpG();return n.Njj(a.tableService.onTableQueryParamsChange)}),n.j41(2,"thead")(3,"tr")(4,"th"),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.j41(7,"th",3),n.EFF(8),n.nI1(9,"translate"),n.k0s(),n.j41(10,"th"),n.EFF(11),n.nI1(12,"translate"),n.k0s()()(),n.j41(13,"tbody"),n.DNE(14,A,8,2,"tr",4),n.k0s()()}if(2&t){const e=i.ngIf,r=n.sdS(1);n.Y8G("nzFrontPagination",!1)("nzData",e.nodes),n.R7$(5),n.SpI(" ",n.bMT(6,6,"profile.title")," "),n.R7$(3),n.SpI(" ",n.bMT(9,8,"profile.address")," "),n.R7$(3),n.SpI(" ",n.bMT(12,10,"profile.location")," "),n.R7$(3),n.Y8G("ngForOf",r.data)}}let q=(()=>{class t{route;tableService;query;constructor(e,r){this.route=e,this.tableService=r}ngOnInit(){this.query=this.route.data.pipe((0,T.T)(e=>e.addresses))}openMap(e){window.open("https://maps.google.com/?q="+e.lat+","+e.lng)}static \u0275fac=function(r){return new(r||t)(n.rXU(z.nX),n.rXU(g.a))};static \u0275cmp=n.VBU({type:t,selectors:[["app-rider-view-addresses"]],standalone:!1,decls:2,vars:3,consts:[["table",""],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzQueryParams",4,"ngIf"],["nzShowSizeChanger","","nzBordered","",3,"nzQueryParams","nzFrontPagination","nzData"],[1,"hidden","md:table-cell"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(r,a){if(1&r&&(n.DNE(0,x,15,12,"nz-table",1),n.nI1(1,"async")),2&r){let s;n.Y8G("ngIf",null==(s=n.bMT(1,1,a.query))||null==s.data?null:s.data.riderAddresses)}},dependencies:[c.Sq,c.bT,d.CP,d.SO,d._4,d.IL,d.aj,d.kt,c.Jj,R.D9],encapsulation:2})}return t})();var u=o(3241);let M=(()=>{class t{gql;tableService;constructor(e,r){this.gql=e,this.tableService=r}resolve(e,r){const a=this.tableService.deserializeQueryParams(e.queryParams);return this.gql.fetch({riderId:e.parent?.params.id,paging:a.paging})}static \u0275fac=function(r){return new(r||t)(n.KVO(u.tt5),n.KVO(g.a))};static \u0275prov=n.jDH({token:t,factory:t.\u0275fac})}return t})();var F=o(467),l=o(9417),j=o(2067),_=o(4843),D=o(712),C=o(7094),O=o(1011),k=o(513),S=o(6389),$=o(5930),I=o(7529),f=o(8927),y=o(1997),G=o(5699),w=o(5703),H=o(2047),Y=o(5154),L=o(3409);function K(t,i){if(1&t&&(n.j41(0,"nz-tag",30),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&t){const e=n.XpG().$implicit,r=n.XpG(2);n.Y8G("nzColor",r.tagColor.getTransactionStatusStatusColor(e.status))("nzBordered",!1),n.R7$(),n.JRh(n.bMT(2,3,"enum.transactionStatus."+e.status))}}function W(t,i){if(1&t&&(n.j41(0,"a",31),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&t){const e=n.XpG().$implicit;n.Y8G("routerLink","/management/users/view/"+e.operatorId),n.R7$(),n.JRh(n.bMT(2,2,"table.viewOperator"))}}function Z(t,i){if(1&t&&(n.j41(0,"a",31),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&t){const e=n.XpG().$implicit;n.Y8G("routerLink","/management/payment-gateways/view/"+e.paymentGatewayId),n.R7$(),n.JRh(n.bMT(2,2,"table.viewGateway"))}}function nn(t,i){if(1&t&&(n.j41(0,"a",31),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&t){const e=n.XpG().$implicit;n.Y8G("routerLink","/requests/view/"+e.requestId),n.R7$(),n.JRh(n.bMT(2,2,"table.viewRequest"))}}function en(t,i){if(1&t&&(n.j41(0,"tr")(1,"td",26),n.nI1(2,"date"),n.EFF(3),n.nI1(4,"timeago"),n.k0s(),n.j41(5,"td"),n.EFF(6),n.nI1(7,"translate"),n.nI1(8,"translate"),n.DNE(9,K,3,5,"nz-tag",27),n.k0s(),n.j41(10,"td",28),n.EFF(11),n.nI1(12,"currency"),n.k0s(),n.j41(13,"td",23),n.EFF(14),n.k0s(),n.j41(15,"td",24),n.EFF(16),n.k0s(),n.j41(17,"td"),n.DNE(18,W,3,4,"a",29)(19,Z,3,4,"a",29)(20,nn,3,4,"a",29),n.k0s()()),2&t){const e=i.$implicit;n.R7$(),n.Y8G("nz-tooltip",n.i5U(2,12,e.createdAt,"short")),n.R7$(2),n.JRh(n.bMT(4,15,e.createdAt)),n.R7$(3),n.SpI("","Deduct"===e.action?n.bMT(7,17,"enum.transactionType."+e.deductType):n.bMT(8,19,"enum.transactionType."+e.rechargeType)," "),n.R7$(3),n.Y8G("ngIf","Done"!=e.status),n.R7$(),n.Y8G("ngClass","Recharge"===e.action?"text-green-500":"text-red-500"),n.R7$(),n.Lme("","Recharge"===e.action?"+":"","",n.i5U(12,21,e.amount,e.currency),""),n.R7$(3),n.JRh(e.refrenceNumber),n.R7$(2),n.JRh(e.description),n.R7$(2),n.Y8G("ngIf",null!==e.operatorId),n.R7$(),n.Y8G("ngIf",null!==e.paymentGatewayId),n.R7$(),n.Y8G("ngIf",null!==e.requestId)}}function tn(t,i){if(1&t){const e=n.RV6();n.j41(0,"nz-table",21,0),n.bIt("nzQueryParams",function(a){n.eBV(e);const s=n.XpG();return n.Njj(s.tableService.onTableQueryParamsChange(a))}),n.j41(2,"thead")(3,"tr")(4,"th",22),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.j41(7,"th"),n.EFF(8),n.nI1(9,"translate"),n.k0s(),n.j41(10,"th"),n.EFF(11),n.nI1(12,"translate"),n.k0s(),n.j41(13,"th",23),n.EFF(14),n.nI1(15,"translate"),n.k0s(),n.j41(16,"th",24),n.EFF(17),n.nI1(18,"translate"),n.k0s(),n.j41(19,"th"),n.EFF(20),n.nI1(21,"translate"),n.k0s()()(),n.j41(22,"tbody"),n.DNE(23,en,21,24,"tr",25),n.k0s()()}if(2&t){const e=i.ngIf,r=n.sdS(1);n.Y8G("nzFrontPagination",!1)("nzData",e.nodes)("nzTotal",e.totalCount),n.R7$(4),n.Y8G("nzSortFn",!0),n.R7$(),n.SpI(" ",n.bMT(6,11,"profile.dateTime")," "),n.R7$(3),n.SpI(" ",n.bMT(9,13,"profile.transactionType")," "),n.R7$(3),n.SpI(" ",n.bMT(12,15,"profile.amount")," "),n.R7$(3),n.SpI(" ",n.bMT(15,17,"profile.documentNumber")," "),n.R7$(3),n.SpI(" ",n.bMT(18,19,"profile.details")," "),n.R7$(3),n.JRh(n.bMT(21,21,"profile.actions")),n.R7$(3),n.Y8G("ngForOf",r.data)}}function rn(t,i){if(1&t&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.nI1(3,"currency"),n.k0s()()),2&t){const e=i.$implicit;n.R7$(2),n.JRh(n.i5U(3,1,e.balance,e.currency))}}function an(t,i){if(1&t&&(n.j41(0,"nz-table",32,1)(2,"thead")(3,"tr")(4,"th"),n.EFF(5,"Amount"),n.k0s()()(),n.j41(6,"tbody"),n.DNE(7,rn,4,4,"tr",25),n.k0s()()),2&t){const e=i.ngIf,r=n.sdS(1);n.Y8G("nzData",e)("nzTotal",e.length),n.R7$(7),n.Y8G("ngForOf",r.data)}}function on(t,i){1&t&&n.nrm(0,"div")}function sn(t,i){if(1&t&&(n.nrm(0,"nz-option",34),n.nI1(1,"translate")),2&t){const e=i.$implicit;n.Y8G("nzLabel",n.bMT(1,2,"enum.transactionType."+e))("nzValue",e)}}function ln(t,i){if(1&t&&(n.j41(0,"nz-form-item")(1,"nz-form-label"),n.EFF(2,"Recharge Type"),n.k0s(),n.j41(3,"nz-form-control")(4,"nz-select",33),n.DNE(5,sn,2,4,"nz-option",15),n.k0s()()()),2&t){const e=n.XpG();n.R7$(5),n.Y8G("ngForOf",e.rechargeTypes)}}function dn(t,i){if(1&t&&(n.nrm(0,"nz-option",34),n.nI1(1,"translate")),2&t){const e=i.$implicit;n.Y8G("nzLabel",n.bMT(1,2,"enum.transactionType."+e))("nzValue",e)}}function cn(t,i){if(1&t&&(n.j41(0,"nz-form-item")(1,"nz-form-label"),n.EFF(2,"Deduct Type"),n.k0s(),n.j41(3,"nz-form-control")(4,"nz-select",35),n.DNE(5,dn,2,4,"nz-option",15),n.k0s()()()),2&t){const e=n.XpG();n.R7$(5),n.Y8G("ngForOf",e.deductTypes)}}function mn(t,i){if(1&t&&n.nrm(0,"nz-option",34),2&t){const e=i.$implicit;n.Y8G("nzLabel",e.currency)("nzValue",e.currency)}}let un=(()=>{class t{route;tableService;tagColor;fb;createTransactionGQL;routerHelper;msg;formTransaction;query;deductTypes=Object.keys(u.moR);rechargeTypes=Object.keys(u.qTl);constructor(e,r,a,s,m,p,N){this.route=e,this.tableService=r,this.tagColor=a,this.fb=s,this.createTransactionGQL=m,this.routerHelper=p,this.msg=N}ngOnInit(){this.query=this.route.data.pipe((0,T.T)(e=>e.financials)),this.formTransaction=this.fb.group({action:[null,l.k0.required],rechargeType:[null],deductType:[null],amount:[0,l.k0.required],currency:[null,l.k0.required],description:[null],refrenceNumber:[null]})}onSubmitTransaction(){var e=this;return(0,F.A)(function*(){if(e.formTransaction.value.riderId=e.route.parent?.snapshot.params.id,"Recharge"!=e.formTransaction.value.action||null!=e.formTransaction.value.rechargeType)if("Deduct"!=e.formTransaction.value.action||null!=e.formTransaction.value.deductType)try{yield(0,_._)(e.createTransactionGQL.mutate({input:e.formTransaction.value})),e.msg.success("Transaction Submitted."),e.routerHelper.refresh(e.route),e.formTransaction.patchValue({})}catch(r){e.msg.error(r.message)}else e.msg.error("Please select the transaction type.");else e.msg.error("Please select the transaction type.")})()}getUniquieCurrencies(e){return null==e?[]:[...new Set(e)]}static \u0275fac=function(r){return new(r||t)(n.rXU(z.nX),n.rXU(g.a),n.rXU(j.t),n.rXU(l.ze),n.rXU(u.RZ9),n.rXU(D.T),n.rXU(C.xh))};static \u0275cmp=n.VBU({type:t,selectors:[["app-rider-view-financials"]],standalone:!1,decls:43,vars:20,consts:[["table",""],["walletTable",""],["nzTitle","Transactions Records","nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],["nzTitle","Wallet Summary","nzBordered","",3,"nzFrontPagination","nzData","nzTotal",4,"ngIf"],[3,"nzTitle"],["nz-form","",3,"ngSubmit","formGroup"],[1,"lg:grid","lg:grid-cols-2","lg:gap-2"],["nzRequired",""],["formControlName","action","nzRequired",""],["nzLabel","Deduct","nzValue","Deduct"],["nzLabel","Recharge","nzValue","Recharge"],[4,"ngIf"],["nzRequired","","nzFor","amount"],["formControlName","amount","id","amount","required","",1,"w-full"],["formControlName","currency","id","currency","required",""],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzFor","refrenceNumber"],["nz-input","","formControlName","refrenceNumber","id","refrenceNumber"],["nzFor","description"],["nz-input","","formControlName","description","id","description"],["nz-button","","nzType","primary","type","submit",1,"float-right","mt-2",3,"disabled"],["nzTitle","Transactions Records","nzShowSizeChanger","","nzBordered","",3,"nzQueryParams","nzFrontPagination","nzData","nzTotal"],["nzColumnKey","createdAt",3,"nzSortFn"],[1,"hidden","lg:table-cell"],[1,"hidden","xl:table-cell"],[4,"ngFor","ngForOf"],[3,"nz-tooltip"],["class","ml-1",3,"nzColor","nzBordered",4,"ngIf"],[3,"ngClass"],[3,"routerLink",4,"ngIf"],[1,"ml-1",3,"nzColor","nzBordered"],[3,"routerLink"],["nzTitle","Wallet Summary","nzBordered","",3,"nzFrontPagination","nzData","nzTotal"],["formControlName","rechargeType"],[3,"nzLabel","nzValue"],["formControlName","deductType"]],template:function(r,a){if(1&r&&(n.DNE(0,tn,24,23,"nz-table",2),n.nI1(1,"async"),n.DNE(2,an,8,3,"nz-table",3),n.nI1(3,"async"),n.j41(4,"nz-card",4),n.nI1(5,"translate"),n.j41(6,"form",5),n.bIt("ngSubmit",function(){return a.onSubmitTransaction()}),n.j41(7,"div",6)(8,"nz-form-item")(9,"nz-form-label",7),n.EFF(10,"Type"),n.k0s(),n.j41(11,"nz-form-control")(12,"nz-select",8),n.nrm(13,"nz-option",9)(14,"nz-option",10),n.k0s()()(),n.DNE(15,on,1,0,"div",11)(16,ln,6,1,"nz-form-item",11)(17,cn,6,1,"nz-form-item",11),n.j41(18,"nz-form-item")(19,"nz-form-label",12),n.EFF(20,"Amount"),n.k0s(),n.j41(21,"nz-form-control"),n.nrm(22,"nz-input-number",13),n.k0s()(),n.j41(23,"nz-form-item")(24,"nz-form-label",7),n.EFF(25,"Currency"),n.k0s(),n.j41(26,"nz-form-control")(27,"nz-select",14),n.DNE(28,mn,1,2,"nz-option",15),n.nI1(29,"async"),n.k0s()()(),n.j41(30,"nz-form-item")(31,"nz-form-label",16),n.EFF(32,"Document Number"),n.k0s(),n.j41(33,"nz-form-control"),n.nrm(34,"input",17),n.k0s()(),n.j41(35,"nz-form-item")(36,"nz-form-label",18),n.EFF(37,"Description"),n.k0s(),n.j41(38,"nz-form-control"),n.nrm(39,"input",19),n.k0s()()(),n.j41(40,"button",20),n.EFF(41),n.nI1(42,"translate"),n.k0s()()()),2&r){let s,m,p;n.Y8G("ngIf",null==(s=n.bMT(1,10,a.query))||null==s.data||null==s.data.rider?null:s.data.rider.transactions),n.R7$(2),n.Y8G("ngIf",null==(m=n.bMT(3,12,a.query))||null==m.data||null==m.data.rider?null:m.data.rider.wallet),n.R7$(2),n.FS9("nzTitle",n.bMT(5,14,"profile.insertTransaction")),n.R7$(2),n.Y8G("formGroup",a.formTransaction),n.R7$(9),n.Y8G("ngIf",null===a.formTransaction.value.action),n.R7$(),n.Y8G("ngIf","Recharge"===a.formTransaction.value.action),n.R7$(),n.Y8G("ngIf","Deduct"===a.formTransaction.value.action),n.R7$(11),n.Y8G("ngForOf",a.getUniquieCurrencies(null==(p=n.bMT(29,16,a.query))||null==p.data||null==p.data.regions?null:p.data.regions.nodes)),n.R7$(12),n.Y8G("disabled",!a.formTransaction.valid),n.R7$(),n.JRh(n.bMT(42,18,"profile.submit"))}},dependencies:[h.Wk,c.YU,c.Sq,c.bT,l.qT,l.me,l.BC,l.cb,l.YS,l.j4,l.JD,d.CP,d.Cc,d.SO,d._4,d.IL,d.aj,d.kt,O.Sy,k.aO,S.c,$.p,I.Uq,I.e,f.CA,f.Ls,f.Mo,f.zS,y.ld,y.WI,G.s,w.cK,H.F,Y.LH,c.Jj,c.oe,c.vh,R.D9,L.PZ],encapsulation:2})}return t})(),P=(()=>{class t{gql;tableService;constructor(e,r){this.gql=e,this.tableService=r}resolve(e,r){const a=this.tableService.deserializeQueryParams(e.queryParams);return this.gql.fetch({riderId:e.parent?.params.id,...a})}static \u0275fac=function(r){return new(r||t)(n.KVO(u.OvT),n.KVO(g.a))};static \u0275prov=n.jDH({token:t,factory:t.\u0275fac})}return t})();var pn=o(2986);let zn=(()=>{class t{route;router;fb;updateRiderGQL;routerHelper;msg;form;valObserver;gender=u.YT8;constructor(e,r,a,s,m,p){this.route=e,this.router=r,this.fb=a,this.updateRiderGQL=s,this.routerHelper=m,this.msg=p,this.form=this.fb.group({id:[null,l.k0.required],firstName:[null,l.k0.required],lastName:[null,l.k0.required],mobileNumber:[null,l.k0.required],gender:[null],email:[null],isResident:[null],idNumber:[null]})}ngOnDestroy(){this.valObserver?.unsubscribe()}ngOnInit(){this.valObserver=this.route.parent?.data.subscribe(e=>{e?.rider?.data?.rider&&(this.form.patchValue(e.rider.data.rider),console.log(e.rider.data.rider))})}onSubmit(){var e=this;return(0,F.A)(function*(){const{id:r,mobileNumber:a,...s}=e.form.value;try{yield(0,_._)(e.updateRiderGQL.mutate({id:r,update:s})),e.msg.success("Updated!"),e.routerHelper.refresh(e.route)}catch(m){console.log(m)}})()}static \u0275fac=function(r){return new(r||t)(n.rXU(z.nX),n.rXU(z.Ix),n.rXU(l.ze),n.rXU(u.GUO),n.rXU(D.T),n.rXU(C.xh))};static \u0275cmp=n.VBU({type:t,selectors:[["app-rider-view-info"]],standalone:!1,decls:46,vars:25,consts:[["nz-form","",1,"lg:grid","lg:grid-cols-3","lg:gap-2",3,"ngSubmit","nzLayout","formGroup"],["formControlName","id","type","hidden","hidden",""],["nzRequired","","nzFor","firstName"],["nzErrorTip","The input is not valid First Name"],["nz-input","","formControlName","firstName","id","firstName"],["nzRequired","","nzFor","lastName"],["nzErrorTip","The input is not valid Last Name"],["nz-input","","formControlName","lastName","id","lastName"],["nzFor","mobileNumber","nzRequired",""],["nzErrorTip","The input is not valid Mobile Number"],["nz-input","","formControlName","mobileNumber","id","mobileNumber"],["nzFor","gender"],["formControlName","gender"],["nzLabel","Male",3,"nzValue"],["nzLabel","Female",3,"nzValue"],["nzFor","email","nzRequired",""],["nz-input","","formControlName","email","id","email"],[3,"hidden"],["nz-checkbox","","id","isResident","formControlName","isResident"],["nzFor","idNumber","nzRequired",""],["nz-input","","formControlName","idNumber","id","idNumber"],["nz-button","","nzType","primary",1,"float-right",3,"click","disabled"]],template:function(r,a){1&r&&(n.j41(0,"form",0),n.bIt("ngSubmit",function(){return a.onSubmit()}),n.nrm(1,"input",1),n.j41(2,"nz-form-item")(3,"nz-form-label",2),n.EFF(4),n.nI1(5,"translate"),n.k0s(),n.j41(6,"nz-form-control",3),n.nrm(7,"input",4),n.k0s()(),n.j41(8,"nz-form-item")(9,"nz-form-label",5),n.EFF(10),n.nI1(11,"translate"),n.k0s(),n.j41(12,"nz-form-control",6),n.nrm(13,"input",7),n.k0s()(),n.j41(14,"nz-form-item")(15,"nz-form-label",8),n.EFF(16),n.nI1(17,"translate"),n.k0s(),n.j41(18,"nz-form-control",9),n.nrm(19,"input",10),n.k0s()(),n.j41(20,"nz-form-item")(21,"nz-form-label",11),n.EFF(22),n.nI1(23,"translate"),n.k0s(),n.j41(24,"nz-form-control")(25,"nz-select",12),n.nrm(26,"nz-option",13)(27,"nz-option",14),n.k0s()()(),n.j41(28,"nz-form-item")(29,"nz-form-label",15),n.EFF(30),n.nI1(31,"translate"),n.k0s(),n.j41(32,"nz-form-control"),n.nrm(33,"input",16),n.k0s()(),n.j41(34,"nz-form-item",17)(35,"nz-form-control")(36,"label",18),n.EFF(37,"Is Resident?"),n.k0s()()(),n.j41(38,"nz-form-item",17)(39,"nz-form-label",19),n.EFF(40,"ID Number"),n.k0s(),n.j41(41,"nz-form-control"),n.nrm(42,"input",20),n.k0s()()(),n.j41(43,"button",21),n.bIt("click",function(){return a.onSubmit()}),n.EFF(44),n.nI1(45,"translate"),n.k0s()),2&r&&(n.Y8G("nzLayout","vertical")("formGroup",a.form),n.R7$(4),n.JRh(n.bMT(5,13,"profile.firstName")),n.R7$(6),n.JRh(n.bMT(11,15,"profile.lastName")),n.R7$(6),n.JRh(n.bMT(17,17,"profile.mobileNumber")),n.R7$(6),n.JRh(n.bMT(23,19,"profile.gender")),n.R7$(4),n.Y8G("nzValue",a.gender.Male),n.R7$(),n.Y8G("nzValue",a.gender.Female),n.R7$(3),n.JRh(n.bMT(31,21,"profile.email")),n.R7$(4),n.Y8G("hidden",!a.form||null==(null==a.form.value?null:a.form.value.isResident)),n.R7$(4),n.Y8G("hidden",!a.form||null==(null==a.form.value?null:a.form.value.isResident)),n.R7$(5),n.Y8G("disabled",a.form.invalid),n.R7$(),n.JRh(n.bMT(45,23,"profile.save")))},dependencies:[l.qT,l.me,l.BC,l.cb,l.j4,l.JD,O.Sy,k.aO,S.c,$.p,I.Uq,I.e,f.CA,f.Ls,f.Mo,f.zS,y.ld,y.WI,pn.$g,R.D9],encapsulation:2})}return t})();function fn(t,i){if(1&t&&(n.j41(0,"tr")(1,"td",6),n.nI1(2,"date"),n.EFF(3),n.nI1(4,"timeago"),n.k0s(),n.j41(5,"td",4),n.EFF(6),n.k0s(),n.j41(7,"td"),n.EFF(8),n.nI1(9,"currency"),n.k0s(),n.j41(10,"td")(11,"nz-tag",7),n.EFF(12),n.nI1(13,"translate"),n.k0s()(),n.j41(14,"td")(15,"a",8),n.EFF(16),n.nI1(17,"translate"),n.k0s()()()),2&t){const e=i.$implicit,r=n.XpG(2);n.R7$(),n.Y8G("nz-tooltip",n.i5U(2,9,e.createdOn,"short")),n.R7$(2),n.JRh(n.bMT(4,12,e.createdOn)),n.R7$(3),n.JRh(e.addresses[0]),n.R7$(2),n.JRh(n.i5U(9,14,e.costAfterCoupon,e.currency)),n.R7$(3),n.Y8G("nzColor",r.tagColor.orderStatus(e.status))("nzBordered",!1),n.R7$(),n.JRh(n.bMT(13,17,"enum.request."+e.status)),n.R7$(3),n.Y8G("routerLink","/requests/view/"+e.id),n.R7$(),n.JRh(n.bMT(17,19,"profile.view"))}}function gn(t,i){if(1&t){const e=n.RV6();n.j41(0,"nz-table",2,0),n.bIt("nzQueryParams",function(a){n.eBV(e);const s=n.XpG();return n.Njj(s.tableService.onTableQueryParamsChange(a))}),n.j41(2,"thead")(3,"tr")(4,"th",3),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.j41(7,"th",4),n.EFF(8),n.nI1(9,"translate"),n.k0s(),n.j41(10,"th"),n.EFF(11),n.nI1(12,"translate"),n.k0s(),n.j41(13,"th"),n.EFF(14),n.nI1(15,"translate"),n.k0s(),n.j41(16,"th"),n.EFF(17),n.nI1(18,"translate"),n.k0s()()(),n.j41(19,"tbody"),n.DNE(20,fn,18,21,"tr",5),n.k0s()()}if(2&t){const e=i.ngIf,r=n.sdS(1);n.Y8G("nzFrontPagination",!1)("nzData",e.nodes)("nzTotal",e.totalCount),n.R7$(4),n.Y8G("nzSortFn",!0),n.R7$(),n.SpI(" ",n.bMT(6,10,"profile.dateTime")," "),n.R7$(3),n.SpI(" ",n.bMT(9,12,"profile.locations")," "),n.R7$(3),n.SpI(" ",n.bMT(12,14,"profile.cost")," "),n.R7$(3),n.SpI(" ",n.bMT(15,16,"profile.status")," "),n.R7$(3),n.JRh(n.bMT(18,18,"profile.actions")),n.R7$(3),n.Y8G("ngForOf",r.data)}}let Rn=(()=>{class t{route;tagColor;tableService;query;statuses=Object.keys(u.Re4).map(e=>({text:e,value:e}));constructor(e,r,a){this.route=e,this.tagColor=r,this.tableService=a}ngOnInit(){this.query=this.route.data.pipe((0,T.T)(e=>e.orders))}static \u0275fac=function(r){return new(r||t)(n.rXU(z.nX),n.rXU(j.t),n.rXU(g.a))};static \u0275cmp=n.VBU({type:t,selectors:[["app-rider-view-orders"]],standalone:!1,decls:2,vars:3,consts:[["table",""],["nzShowSizeChanger","","class","mt-4","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],["nzShowSizeChanger","","nzBordered","",1,"mt-4",3,"nzQueryParams","nzFrontPagination","nzData","nzTotal"],["nzColumnKey","createdOn",3,"nzSortFn"],[1,"hidden","lg:table-cell"],[4,"ngFor","ngForOf"],[3,"nz-tooltip"],[3,"nzColor","nzBordered"],[3,"routerLink"]],template:function(r,a){if(1&r&&(n.DNE(0,gn,21,20,"nz-table",1),n.nI1(1,"async")),2&r){let s;n.Y8G("ngIf",null==(s=n.bMT(1,1,a.query))||null==s.data||null==s.data.rider?null:s.data.rider.orders)}},dependencies:[h.Wk,c.Sq,c.bT,d.CP,d.Cc,d.SO,d._4,d.IL,d.aj,d.kt,G.s,Y.LH,c.Jj,c.oe,c.vh,R.D9,L.PZ],encapsulation:2})}return t})(),U=(()=>{class t{gql;tableService;constructor(e,r){this.gql=e,this.tableService=r}resolve(e,r){const a=this.tableService.deserializeQueryParams(e.queryParams);return this.gql.fetch({riderId:e.parent?.params.id,...a})}static \u0275fac=function(r){return new(r||t)(n.KVO(u.qJQ),n.KVO(g.a))};static \u0275prov=n.jDH({token:t,factory:t.\u0275fac})}return t})();var bn=o(8204),hn=o(6501),X=o(1868),E=o(2602),Tn=o(1951),v=o(6057),b=o(3062),J=o(2e3),Fn=o(3146),_n=o(9438),In=o(1672),yn=o(314);function vn(t,i){1&t&&(n.j41(0,"span"),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&t&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"riders.notFoundMessage")," "))}function jn(t,i){1&t&&(n.j41(0,"button",5),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&t&&(n.R7$(),n.JRh(n.bMT(2,1,"profile.goToList")))}function Cn(t,i){if(1&t&&(n.j41(0,"nz-card")(1,"nz-empty",4),n.DNE(2,vn,3,3,"ng-template",null,0,n.C5r)(4,jn,3,3,"ng-template",null,1,n.C5r),n.k0s()()),2&t){const e=n.sdS(3),r=n.sdS(5);n.R7$(),n.Y8G("nzNotFoundContent",e)("nzNotFoundFooter",r)}}function kn(t,i){1&t&&(n.j41(0,"nz-tag",22),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&t&&(n.Y8G("nzColor","red")("nzBordered",!1),n.R7$(),n.JRh(n.bMT(2,3,"enum.rider.status.blocked")))}function Sn(t,i){if(1&t){const e=n.RV6();n.j41(0,"li",23),n.bIt("click",function(){n.eBV(e);const a=n.XpG(2);return n.Njj(a.changeStatus(a.riderStatus.Disabled))}),n.EFF(1),n.nI1(2,"translate"),n.k0s()}2&t&&(n.R7$(),n.JRh(n.bMT(2,1,"enum.rider.status.blocked")))}function $n(t,i){if(1&t){const e=n.RV6();n.j41(0,"li",23),n.bIt("click",function(){n.eBV(e);const a=n.XpG(2);return n.Njj(a.changeStatus(a.riderStatus.Enabled))}),n.EFF(1),n.nI1(2,"translate"),n.k0s()}2&t&&(n.R7$(),n.JRh(n.bMT(2,1,"enum.rider.status.enabled")))}function Gn(t,i){1&t&&(n.j41(0,"a",24),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&t&&(n.R7$(),n.JRh(n.bMT(2,1,"riders.tab.details")))}function En(t,i){1&t&&(n.j41(0,"a",25),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&t&&(n.R7$(),n.JRh(n.bMT(2,1,"riders.tab.creditrecords")))}function Nn(t,i){1&t&&(n.j41(0,"a",26),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&t&&(n.R7$(),n.JRh(n.bMT(2,1,"riders.tab.orders")))}function Vn(t,i){1&t&&(n.j41(0,"a",27),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&t&&(n.R7$(),n.JRh(n.bMT(2,1,"riders.tab.addresses")))}function Mn(t,i){if(1&t){const e=n.RV6();n.j41(0,"nz-card")(1,"nz-page-header")(2,"nz-page-header-title"),n.nrm(3,"nz-avatar",6),n.EFF(4),n.k0s(),n.j41(5,"nz-page-header-tags"),n.DNE(6,kn,3,5,"nz-tag",7),n.k0s(),n.j41(7,"nz-page-header-extra")(8,"button",8),n.bIt("click",function(){const a=n.eBV(e).ngIf,s=n.XpG();return n.Njj(s.deleteRider(a.id))}),n.nrm(9,"i",9),n.k0s(),n.j41(10,"button",10),n.EFF(11),n.nI1(12,"translate"),n.nrm(13,"i",11),n.k0s(),n.j41(14,"nz-dropdown-menu",null,2)(16,"ul",12),n.DNE(17,Sn,3,3,"li",13)(18,$n,3,3,"li",13),n.k0s()()(),n.j41(19,"nz-page-header-content")(20,"nz-descriptions")(21,"nz-descriptions-item",14),n.nI1(22,"translate"),n.EFF(23),n.nI1(24,"phone"),n.k0s(),n.j41(25,"nz-descriptions-item",15),n.nI1(26,"translate"),n.EFF(27),n.nI1(28,"date"),n.k0s(),n.j41(29,"nz-descriptions-item",15),n.nI1(30,"translate"),n.nrm(31,"nz-badge",16),n.k0s()()(),n.j41(32,"nz-page-header-footer")(33,"nz-tabset",17)(34,"nz-tab"),n.DNE(35,Gn,3,3,"a",18),n.k0s(),n.j41(36,"nz-tab"),n.DNE(37,En,3,3,"a",19),n.k0s(),n.j41(38,"nz-tab"),n.DNE(39,Nn,3,3,"a",20),n.k0s(),n.j41(40,"nz-tab"),n.DNE(41,Vn,3,3,"a",21),n.k0s()(),n.nrm(42,"router-outlet"),n.k0s()()()}if(2&t){const e=i.ngIf,r=n.sdS(15),a=n.XpG();n.R7$(3),n.Y8G("nzSrc",a.environment.root+(null==e.media?null:e.media.address)),n.R7$(),n.Lme("",e.firstName," ",e.lastName,""),n.R7$(2),n.Y8G("ngIf",e.status==a.riderStatus.Disabled),n.R7$(2),n.Y8G("nzType","dashed"),n.R7$(2),n.Y8G("nzDropdownMenu",r),n.R7$(),n.SpI(" ",n.bMT(12,18,"driver.profile.changeStatus")," "),n.R7$(6),n.Y8G("ngIf","Enabled"===e.status),n.R7$(),n.Y8G("ngIf","Disabled"===e.status),n.R7$(3),n.FS9("nzTitle",n.bMT(22,20,"profile.mobileNumber")),n.Y8G("nzSpan",1),n.R7$(2),n.JRh(n.bMT(24,22,e.mobileNumber)),n.R7$(2),n.FS9("nzTitle",n.bMT(26,24,"profile.registeredOn")),n.R7$(2),n.JRh(n.i5U(28,26,e.registrationTimestamp,"short")),n.R7$(2),n.FS9("nzTitle",n.bMT(30,29,"profile.status")),n.R7$(2),n.Y8G("nzStatus","Enabled"===e.status?"success":"error")("nzText",e.status),n.R7$(2),n.Y8G("nzLinkExact",!1)}}let Dn=(()=>{class t{route;tagColor;updateRiderGQL;deleteGQL;modal;message;translate;router;query;environment;riderStatus=u.vnI;constructor(e,r,a,s,m,p,N,Ln){this.route=e,this.tagColor=r,this.updateRiderGQL=a,this.deleteGQL=s,this.modal=m,this.message=p,this.translate=N,this.router=Ln,this.environment=bn.c}ngOnInit(){this.query=this.route.data.pipe((0,T.T)(e=>e.rider))}getImageUrl(e){if(!e)return;const r=e.replace(/^\/+/,"");return this.environment.root+r}changeStatus(e){var r=this;return(0,F.A)(function*(){try{yield(0,_._)(r.updateRiderGQL.mutate({id:r.route.snapshot.params.id,update:{status:e}})),r.message.success(r.translate.instant("done")),r.router.navigate([],{relativeTo:r.route,queryParams:{refresh:(new Date).getTime()},queryParamsHandling:"merge"})}catch(a){r.message.error("PERMISSION_NOT_GRANTED"==a.message?r.translate.instant("error.PERMISSION_NOT_GRANTED"):a.message)}})()}deleteRider(e){var a,r=this;this.modal.confirm({nzTitle:this.translate.instant("message.deleteConfirmation.title"),nzContent:this.translate.instant("message.deleteRiderConfirmation.content"),nzOnOk:(a=(0,F.A)(function*(){try{yield(0,_._)(r.deleteGQL.mutate({id:e})),r.message.success(r.translate.instant("message.deleteRiderCofirmAlert")),r.router.navigateByUrl("/riders")}catch(s){r.message.error("PERMISSION_NOT_GRANTED"==s.message?r.translate.instant("error.PERMISSION_NOT_GRANTED"):s.message)}}),function(){return a.apply(this,arguments)})})}static \u0275fac=function(r){return new(r||t)(n.rXU(z.nX),n.rXU(j.t),n.rXU(u.GUO),n.rXU(u.apV),n.rXU(hn.N_),n.rXU(C.xh),n.rXU(R.c$),n.rXU(z.Ix))};static \u0275cmp=n.VBU({type:t,selectors:[["app-rider-view"]],standalone:!1,decls:4,vars:6,consts:[["contentTpl",""],["footerTpl",""],["menu4","nzDropdownMenu"],[4,"ngIf"],[3,"nzNotFoundContent","nzNotFoundFooter"],["nz-button","","nzType","primary","routerLink","/riders"],["nzIcon","user",3,"nzSrc"],[3,"nzColor","nzBordered",4,"ngIf"],["nz-button","","nzDanger","",1,"mr-2",3,"click","nzType"],["nz-icon","","nzType","delete"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["nz-menu",""],["nz-menu-item","",3,"click",4,"ngIf"],[3,"nzTitle","nzSpan"],[3,"nzTitle"],[3,"nzStatus","nzText"],["nzLinkRouter","",1,"mb-4",3,"nzLinkExact"],["nz-tab-link","","routerLink","details",4,"nzTabLink"],["nz-tab-link","","routerLink","financials",4,"nzTabLink"],["nz-tab-link","","routerLink","orders",4,"nzTabLink"],["nz-tab-link","","routerLink","addresses",4,"nzTabLink"],[3,"nzColor","nzBordered"],["nz-menu-item","",3,"click"],["nz-tab-link","","routerLink","details"],["nz-tab-link","","routerLink","financials"],["nz-tab-link","","routerLink","orders"],["nz-tab-link","","routerLink","addresses"]],template:function(r,a){if(1&r&&(n.DNE(0,Cn,6,2,"nz-card",3),n.nI1(1,"async"),n.DNE(2,Mn,43,31,"nz-card",3),n.nI1(3,"async")),2&r){let s,m;n.Y8G("ngIf",null==(null==(s=n.bMT(1,2,a.query))||null==s.data?null:s.data.rider)),n.R7$(2),n.Y8G("ngIf",null==(m=n.bMT(3,4,a.query))||null==m.data?null:m.data.rider)}},dependencies:[z.n3,h.Wk,c.bT,X.jS,X.CU,E.j3,E.wQ,E.h4,k.aO,S.c,$.p,Tn.Dn,v.JZ,v.rE,v.v3,v.rM,G.s,b.WB,b.k9,b.zR,b.cC,b.ov,b.F0,J.xA,J.gr,Fn.dz,_n.PM,In.RW,w.cK,c.Jj,c.vh,yn.X,R.D9],encapsulation:2})}return t})(),Q=(()=>{class t{gql;constructor(e){this.gql=e}resolve(e,r){return this.gql.fetch({id:e.params.id})}static \u0275fac=function(r){return new(r||t)(n.KVO(u.YfN))};static \u0275prov=n.jDH({token:t,factory:t.\u0275fac})}return t})();const On=[{path:"",component:Dn,resolve:{rider:Q},runGuardsAndResolvers:"paramsOrQueryParamsChange",children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:zn},{path:"financials",component:un,resolve:{financials:P},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"orders",component:Rn,resolve:{orders:U},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"addresses",component:q,resolve:{addresses:M}}]}];let wn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=n.$C({type:t});static \u0275inj=n.G2t({providers:[Q,P,U,M],imports:[h.iI.forChild(On),h.iI]})}return t})(),Yn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=n.$C({type:t});static \u0275inj=n.G2t({imports:[wn,B.G]})}return t})()}}]);