"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[217],{2217:(G,v,i)=>{i.r(v),i.d(v,{ManagementCarsModule:()=>N});var b=i(7624),z=i(467),M=i(3241),T=i(6807),I=i(6354),_=i(4843),t=i(1360),o=i(2209),d=i(712),u=i(8434),l=i(9417),c=i(3617),m=i(3359),p=i(1011),f=i(513),C=i(6389),L=i(5930),$=i(1951),j=i(3062),R=i(2874),E=i(8018);function F(r,g){if(1&r&&(t.j41(0,"div",16)(1,"div",17),t.EFF(2),t.k0s()()),2&r){const e=t.XpG().$implicit;t.R7$(2),t.SpI(" ",e.name," ")}}function S(r,g){if(1&r){const e=t.RV6();t.j41(0,"input",18),t.mxI("ngModelChange",function(a){t.eBV(e);const s=t.XpG().$implicit;return t.DH7(s.name,a)||(s.name=a),t.Njj(a)}),t.bIt("keyup.enter",function(){t.eBV(e);const a=t.XpG().$implicit,s=t.XpG(2);return t.Njj(s.onSubmitEditModel(a.id,a.name))}),t.k0s()}if(2&r){const e=t.XpG().$implicit;t.R50("ngModel",e.name)}}function D(r,g){if(1&r){const e=t.RV6();t.j41(0,"tr",13),t.bIt("click",function(a){const s=t.eBV(e).$implicit,h=t.XpG(2);return t.Njj(h.startEdit(s.id,a))}),t.j41(1,"td"),t.DNE(2,F,3,1,"div",14)(3,S,1,1,"ng-template",null,1,t.C5r),t.k0s(),t.j41(5,"td")(6,"a",15),t.nI1(7,"translate"),t.bIt("nzOnConfirm",function(){const a=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.onDeleteModel(a.id))}),t.EFF(8),t.nI1(9,"translate"),t.k0s()()()}if(2&r){const e=g.$implicit,n=t.sdS(4),a=t.XpG(2);t.R7$(2),t.Y8G("ngIf",a.editId!==e.id)("ngIfElse",n),t.R7$(4),t.FS9("nzPopconfirmTitle",t.bMT(7,4,"message.areYouSure")),t.R7$(2),t.JRh(t.bMT(9,6,"profile.delete"))}}function O(r,g){if(1&r&&(t.j41(0,"nz-table",10,0)(2,"thead")(3,"tr")(4,"th",11),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"th"),t.EFF(8),t.nI1(9,"translate"),t.k0s()()(),t.j41(10,"tbody"),t.DNE(11,D,10,8,"tr",12),t.k0s()()),2&r){const e=g.ngIf,n=t.sdS(1);t.Y8G("nzData",e),t.R7$(5),t.JRh(t.bMT(6,4,"profile.name")),t.R7$(3),t.JRh(t.bMT(9,6,"profile.actions")),t.R7$(3),t.Y8G("ngForOf",n.data)}}function X(r,g){if(1&r&&(t.j41(0,"div",16)(1,"div",17),t.EFF(2),t.k0s()()),2&r){const e=t.XpG().$implicit;t.R7$(2),t.SpI(" ",e.name," ")}}function Q(r,g){if(1&r){const e=t.RV6();t.j41(0,"input",18),t.mxI("ngModelChange",function(a){t.eBV(e);const s=t.XpG().$implicit;return t.DH7(s.name,a)||(s.name=a),t.Njj(a)}),t.bIt("keyup.enter",function(){t.eBV(e);const a=t.XpG().$implicit,s=t.XpG(2);return t.Njj(s.onSubmitEditColor(a.id,a.name))}),t.k0s()}if(2&r){const e=t.XpG().$implicit;t.R50("ngModel",e.name)}}function k(r,g){if(1&r){const e=t.RV6();t.j41(0,"tr",13),t.bIt("click",function(a){const s=t.eBV(e).$implicit,h=t.XpG(2);return t.Njj(h.startEditColor(s.id,a))}),t.j41(1,"td"),t.DNE(2,X,3,1,"div",14)(3,Q,1,1,"ng-template",null,1,t.C5r),t.k0s(),t.j41(5,"td")(6,"a",15),t.nI1(7,"translate"),t.bIt("nzOnConfirm",function(){const a=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.onDeleteColor(a.id))}),t.EFF(8),t.nI1(9,"translate"),t.k0s()()()}if(2&r){const e=g.$implicit,n=t.sdS(4),a=t.XpG(2);t.R7$(2),t.Y8G("ngIf",a.editColorId!==e.id)("ngIfElse",n),t.R7$(4),t.FS9("nzPopconfirmTitle",t.bMT(7,4,"message.areYouSure")),t.R7$(2),t.JRh(t.bMT(9,6,"profile.delete"))}}function x(r,g){if(1&r&&(t.j41(0,"nz-table",19,2)(2,"thead")(3,"tr")(4,"th",11),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"th"),t.EFF(8),t.nI1(9,"translate"),t.k0s()()(),t.j41(10,"tbody"),t.DNE(11,k,10,8,"tr",12),t.k0s()()),2&r){const e=g.ngIf,n=t.sdS(1);t.Y8G("nzData",e),t.R7$(5),t.JRh(t.bMT(6,4,"profile.name")),t.R7$(3),t.JRh(t.bMT(9,6,"profile.actions")),t.R7$(3),t.Y8G("ngForOf",n.data)}}let A=(()=>{class r{route;routerHelper;tableService;deleteCarModelGQL;deleteCarColorGQL;updateCarModelGQL;updateCarColorGQL;createCarModelGQL;createCarColorGQL;query;editId;editColorId;constructor(e,n,a,s,h,H,U,Y,J){this.route=e,this.routerHelper=n,this.tableService=a,this.deleteCarModelGQL=s,this.deleteCarColorGQL=h,this.updateCarModelGQL=H,this.updateCarColorGQL=U,this.createCarModelGQL=Y,this.createCarColorGQL=J}ngOnInit(){this.query=this.route.data.pipe((0,I.T)(e=>e.cars))}startEdit(e,n){n.preventDefault(),n.stopPropagation(),this.editId=e}onSubmitEditModel(e,n){var a=this;return(0,z.A)(function*(){yield(0,_._)(a.updateCarModelGQL.mutate({id:e,input:{name:n}})),a.editId=void 0})()}onAddModel(){var e=this;return(0,z.A)(function*(){yield(0,_._)(e.createCarModelGQL.mutate({input:{name:""}})),e.routerHelper.refresh(e.route)})()}onDeleteModel(e){var n=this;return(0,z.A)(function*(){yield(0,_._)(n.deleteCarModelGQL.mutate({id:e})),n.routerHelper.refresh(n.route)})()}startEditColor(e,n){n.preventDefault(),n.stopPropagation(),this.editColorId=e}onSubmitEditColor(e,n){var a=this;return(0,z.A)(function*(){yield(0,_._)(a.updateCarColorGQL.mutate({id:e,input:{name:n}})),a.editColorId=void 0})()}onAddColor(){var e=this;return(0,z.A)(function*(){yield(0,_._)(e.createCarColorGQL.mutate({input:{name:""}})),e.routerHelper.refresh(e.route)})()}onDeleteColor(e){var n=this;return(0,z.A)(function*(){yield(0,_._)(n.deleteCarColorGQL.mutate({id:e})),n.routerHelper.refresh(n.route)})()}static \u0275fac=function(n){return new(n||r)(t.rXU(o.nX),t.rXU(d.T),t.rXU(T.a),t.rXU(M.LeH),t.rXU(M.rh5),t.rXU(M.lIg),t.rXU(M.LUK),t.rXU(M.Mcu),t.rXU(M.u8I))};static \u0275cmp=t.VBU({type:r,selectors:[["app-management-cars-list"]],standalone:!1,decls:16,vars:13,consts:[["ajaxTable",""],["editTpl",""],["colorTable",""],["nzBackIcon","","nzTitle","Cars","nzSubtitle","Basic car info definitions",3,"nzGhost"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],["nzMessage","For the time being, the list of car models/makes and colors is limited to 100 records. The list will be extended in the future.","nzType","warning","nzShowIcon",""],["nzBordered","","nzTitle","Models",3,"nzData",4,"ngIf"],["nz-button","","nzType","primary",1,"float-right","mb-2",3,"click"],["nzBordered","","nzTitle","Colors",3,"nzData",4,"ngIf"],["nzBordered","","nzTitle","Models",3,"nzData"],["nzWidth","80%"],["class","editable-row",3,"click",4,"ngFor","ngForOf"],[1,"editable-row",3,"click"],["class","editable-cell",4,"ngIf","ngIfElse"],["nz-popconfirm","",3,"nzOnConfirm","nzPopconfirmTitle"],[1,"editable-cell"],[1,"editable-cell-value-wrap"],["nz-input","",3,"ngModelChange","keyup.enter","ngModel"],["nzBordered","","nzTitle","Colors",3,"nzData"]],template:function(n,a){if(1&n&&(t.j41(0,"nz-page-header",3)(1,"nz-page-header-extra")(2,"button",4),t.bIt("click",function(){return a.onAddModel()}),t.nrm(3,"i",5),t.EFF(4),t.nI1(5,"translate"),t.k0s()(),t.j41(6,"nz-page-header-content"),t.nrm(7,"nz-alert",6),t.DNE(8,O,12,8,"nz-table",7),t.nI1(9,"async"),t.j41(10,"button",8),t.bIt("click",function(){return a.onAddColor()}),t.nrm(11,"i",5),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.DNE(14,x,12,8,"nz-table",9),t.nI1(15,"async"),t.k0s()()),2&n){let s,h;t.Y8G("nzGhost",!1),t.R7$(4),t.JRh(t.bMT(5,5,"profile.add")),t.R7$(4),t.Y8G("ngIf",null==(s=t.bMT(9,7,a.query))||null==s.data||null==s.data.carModels?null:s.data.carModels.nodes),t.R7$(4),t.JRh(t.bMT(13,9,"profile.add")),t.R7$(2),t.Y8G("ngIf",null==(h=t.bMT(15,11,a.query))||null==h.data||null==h.data.carColors?null:h.data.carColors.nodes)}},dependencies:[u.Sq,u.bT,l.me,l.BC,l.vS,c.Y,m.CP,m.SO,m._4,m.IL,m.aj,m.kt,p.Sy,f.aO,C.c,L.p,$.Dn,j.WB,j.zR,j.ov,R.PV,u.Jj,E.D9],encapsulation:2})}return r})(),y=(()=>{class r{paging;gql;constructor(e,n){this.paging=e,this.gql=n}resolve(e,n){return this.paging.deserializeQueryParams(e.queryParams),this.gql.fetch({})}static \u0275fac=function(n){return new(n||r)(t.KVO(T.a),t.KVO(M.u7N))};static \u0275prov=t.jDH({token:r,factory:r.\u0275fac})}return r})();const B=[{path:"",component:A,resolve:{cars:y},runGuardsAndResolvers:"paramsOrQueryParamsChange"}];let V=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=t.$C({type:r});static \u0275inj=t.G2t({providers:[y],imports:[b.iI.forChild(B),b.iI]})}return r})();var P=i(5885);let N=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=t.$C({type:r});static \u0275inj=t.G2t({imports:[V,P.G]})}return r})()},6807:(G,v,i)=>{i.d(v,{a:()=>M});var b=i(1360),z=i(2209);let M=(()=>{class _{router;route;constructor(o,d){this.router=o,this.route=d}serializeQueryParams(o,d){const u={};if(u.pageIndex=o.pageIndex,u.pageSize=o.pageSize,null!=o.filter){const l=o.filter.filter(c=>null!=c.value&&c.value.length>0).map(c=>`${c.key}|${Array.isArray(c.value)?"in":"eq"}|${Array.isArray(c.value)?c.value.join("-"):c.value}`);null!=d.filter&&l.push(...d.filter.split(",")),u.filter=l.length>0?l.join(","):void 0}if(null!=o.sort&&o.sort.length>0){const l=o.sort.filter(c=>null!=c.value).map(c=>`${c.key}|${"ascend"==c.value?"ASC":"DESC"}`);null!=d.sort&&l.push(...d.sort.split(",")),u.sort=l.length>0?l.join(","):void 0}return u}onTableQueryParamsChange(o){const d=this.serializeQueryParams(o,this.route.snapshot.queryParams);this.router.navigate([],{relativeTo:this.route,queryParams:d,queryParamsHandling:"merge"})}filterText(o,d){const l=this.deserializeQueryParams(this.route).filter??{};l[o]=null!=d?{like:d}:{};const c=Object.keys(l).map(p=>{if(Object.keys(l[p]).length<1)return null;const f=Object.keys(l[p])[0];return`${p}|${f}|${"in"==f?l[p][f].join("-"):l[p][f]}`}).filter(p=>null!=p),m=c.length>0?c.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:m},queryParamsHandling:"merge"})}filterRange(o,d){const l=this.deserializeQueryParams(this.route).filter??{};l[o]=null!=d?{between:d}:{};const c=Object.keys(l).map(p=>{if(Object.keys(l[p]).length<1)return null;const f=Object.keys(l[p])[0];return`${p}|${f}|${"in"==f||"between"==f?l[p][f].join("-"):l[p][f]}`}).filter(p=>null!=p),m=c.length>0?c.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:m},queryParamsHandling:"merge"})}resetFilter(o,d){this.filterText(o,void 0),d.value=""}downloadURI(o,d){const u=document.createElement("a");u.download=d,u.href=o,u.target="_blank",document.body.appendChild(u),u.click(),document.body.removeChild(u)}deserializeQueryParams(o){const d=o.sort?o.sort.split(",").map(m=>({field:m.split("|")[0],direction:m.split("|")[1]})):[],u={};null!=o.filter&&o.filter.split(",").forEach(m=>{const p={},f=m.split("|")[1];if("in"==f){const C=m.split("|")[2].split("-");p[f]=C}else if("between"==f){const C=m.split("|")[2].split("-");p[f]={lower:C[0],upper:C[1]}}else p[f]=m.split("|")[2];u[m.split("|")[0]]=p});const l=null!=o.pageIndex?parseInt(o.pageIndex):1,c=null!=o.pageSize?parseInt(o.pageSize):10;return{sorting:d.length>0?d:void 0,paging:{offset:(l-1)*c,limit:c},filter:null!=u&&Object.keys(u).length>0?u:void 0}}static \u0275fac=function(d){return new(d||_)(b.KVO(z.Ix),b.KVO(z.nX))};static \u0275prov=b.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()}}]);