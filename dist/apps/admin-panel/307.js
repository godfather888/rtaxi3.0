"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[307],{307:(ln,O,l)=>{l.r(O),l.d(O,{DriverProfileModule:()=>rn});var K=l(5885),_=l(7624),T=l(467),s=l(9417),u=l(3241),$=l(8204),X=l(9933),Z=l(1985),g=l(6354),I=l(4843),e=l(1360),f=l(2209),G=l(7094),P=l(712),c=l(8434),J=l(1011),N=l(513),k=l(6389),E=l(5930),M=l(1951),C=l(7529),z=l(8927),j=l(1997),R=l(5699),x=l(2358),U=l(2047),v=l(8018);const ee=t=>({Authorization:t});function ne(t,o){if(1&t&&(e.nrm(0,"nz-option",46),e.nI1(1,"translate")),2&t){const n=o.$implicit,r=e.XpG(2);e.Y8G("nzLabel",e.bMT(1,2,"enum.gender."+r.camelCase(n)))("nzValue",n)}}function te(t,o){if(1&t&&e.nrm(0,"nz-option",47),2&t){const n=o.$implicit;e.Y8G("nzValue",n.id)("nzLabel",n.name)}}function re(t,o){if(1&t&&e.nrm(0,"nz-option",47),2&t){const n=o.$implicit;e.Y8G("nzValue",n.id)("nzLabel",n.name)}}function ae(t,o){if(1&t&&e.nrm(0,"nz-option",47),2&t){const n=o.$implicit;e.Y8G("nzValue",n.id)("nzLabel",n.name)}}function oe(t,o){if(1&t){const n=e.RV6();e.j41(0,"nz-tag",48),e.bIt("nzCheckedChange",function(a){const i=e.eBV(n).$implicit,m=e.XpG(2);return e.Njj(m.handleServiceCheckChange(a,i))}),e.EFF(1),e.k0s()}if(2&t){const n=o.$implicit,r=e.XpG(2);e.Y8G("nzBordered",!1)("nzChecked",r.form.value.enabledServices.indexOf(n.id)>-1),e.R7$(),e.SpI(" ",n.name," ")}}function ie(t,o){if(1&t&&(e.qex(0),e.nrm(1,"i",49),e.j41(2,"div",50),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.bVm()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("nzType",n.loadingUpload?"loading":"plus"),e.R7$(2),e.JRh(e.bMT(4,2,"profile.upload"))}}function le(t,o){if(1&t&&e.nrm(0,"img",51),2&t){const n=e.XpG(2);e.Y8G("src",n.avatarUrl,e.B4B)}}function se(t,o){if(1&t){const n=e.RV6();e.j41(0,"form",1),e.bIt("ngSubmit",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.onSubmit())}),e.nrm(1,"input",2)(2,"input",3)(3,"input",4),e.j41(4,"div",5)(5,"nz-form-item")(6,"nz-form-label",6),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"nz-form-control"),e.nrm(10,"input",7),e.k0s()(),e.j41(11,"nz-form-item")(12,"nz-form-label",8),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.j41(15,"nz-form-control"),e.nrm(16,"input",9),e.k0s()(),e.j41(17,"nz-form-item")(18,"nz-form-label",10),e.EFF(19),e.nI1(20,"translate"),e.k0s(),e.j41(21,"nz-select",11),e.DNE(22,ne,2,4,"nz-option",12),e.k0s()(),e.j41(23,"nz-form-item")(24,"nz-form-label",13),e.EFF(25),e.nI1(26,"translate"),e.k0s(),e.j41(27,"nz-form-control"),e.nrm(28,"nz-input-number",14),e.k0s()(),e.j41(29,"nz-form-item")(30,"nz-form-label",15),e.EFF(31),e.nI1(32,"translate"),e.k0s(),e.j41(33,"nz-form-control"),e.nrm(34,"input",16),e.k0s()(),e.j41(35,"nz-form-item")(36,"nz-form-label",17),e.EFF(37),e.nI1(38,"translate"),e.k0s(),e.j41(39,"nz-form-control")(40,"nz-select",18),e.nrm(41,"nz-option",19),e.DNE(42,te,1,2,"nz-option",20),e.k0s()()(),e.j41(43,"nz-form-item")(44,"nz-form-label",21),e.EFF(45),e.nI1(46,"translate"),e.k0s(),e.j41(47,"nz-form-control")(48,"nz-select",22),e.DNE(49,re,1,2,"nz-option",20),e.k0s()()(),e.j41(50,"nz-form-item")(51,"nz-form-label",23),e.EFF(52),e.nI1(53,"translate"),e.k0s(),e.j41(54,"nz-form-control")(55,"nz-select",24),e.DNE(56,ae,1,2,"nz-option",20),e.k0s()()(),e.j41(57,"nz-form-item")(58,"nz-form-label",25),e.EFF(59),e.nI1(60,"translate"),e.k0s(),e.j41(61,"nz-form-control"),e.nrm(62,"nz-input-number",26),e.k0s()(),e.j41(63,"nz-form-item")(64,"nz-form-label",27),e.EFF(65),e.nI1(66,"translate"),e.k0s(),e.j41(67,"nz-form-control"),e.nrm(68,"input",28),e.k0s()(),e.j41(69,"nz-form-item")(70,"nz-form-label",29),e.EFF(71),e.nI1(72,"translate"),e.k0s(),e.j41(73,"nz-form-control"),e.nrm(74,"input",30),e.k0s()(),e.j41(75,"nz-form-item")(76,"nz-form-label",31),e.EFF(77),e.nI1(78,"translate"),e.k0s(),e.j41(79,"nz-form-control"),e.nrm(80,"input",32),e.k0s()(),e.j41(81,"nz-form-item")(82,"nz-form-label",33),e.EFF(83),e.nI1(84,"translate"),e.k0s(),e.j41(85,"nz-form-control"),e.nrm(86,"input",34),e.k0s()(),e.j41(87,"nz-form-item")(88,"nz-form-label",35),e.EFF(89),e.nI1(90,"translate"),e.k0s(),e.j41(91,"nz-form-control"),e.nrm(92,"input",36),e.k0s()(),e.j41(93,"nz-form-item")(94,"nz-form-label",37),e.EFF(95),e.nI1(96,"translate"),e.k0s(),e.j41(97,"nz-form-control"),e.nrm(98,"input",38),e.k0s()(),e.j41(99,"nz-form-item",39)(100,"nz-form-label",40),e.EFF(101),e.nI1(102,"translate"),e.k0s(),e.j41(103,"nz-form-control"),e.DNE(104,oe,2,3,"nz-tag",41),e.k0s()(),e.j41(105,"nz-form-item")(106,"nz-form-label"),e.EFF(107),e.nI1(108,"translate"),e.k0s(),e.j41(109,"nz-form-control")(110,"nz-upload",42),e.bIt("nzChange",function(a){e.eBV(n);const i=e.XpG();return e.Njj(i.handleUploadChange(a))}),e.DNE(111,ie,5,4,"ng-container",43)(112,le,1,1,"img",44),e.k0s()()()(),e.j41(113,"button",45),e.EFF(114),e.nI1(115,"translate"),e.k0s()()}if(2&t){const n=o.ngIf,r=e.XpG();e.Y8G("formGroup",r.form),e.R7$(7),e.JRh(e.bMT(8,32,"profile.firstName")),e.R7$(6),e.JRh(e.bMT(14,34,"profile.lastName")),e.R7$(6),e.JRh(e.bMT(20,36,"profile.gender")),e.R7$(3),e.Y8G("ngForOf",r.genders),e.R7$(3),e.JRh(e.bMT(26,38,"profile.mobileNumber")),e.R7$(6),e.JRh(e.bMT(32,40,"profile.email")),e.R7$(6),e.JRh(e.bMT(38,42,"profile.fleet")),e.R7$(4),e.Y8G("nzValue",null),e.R7$(),e.Y8G("ngForOf",n.fleets.nodes),e.R7$(3),e.JRh(e.bMT(46,44,"profile.carModel")),e.R7$(4),e.Y8G("ngForOf",n.carModels.nodes),e.R7$(3),e.JRh(e.bMT(53,46,"profile.carColor")),e.R7$(4),e.Y8G("ngForOf",n.carColors.nodes),e.R7$(3),e.JRh(e.bMT(60,48,"profile.carProductionYear")),e.R7$(6),e.JRh(e.bMT(66,50,"profile.carPlateNumber")),e.R7$(6),e.JRh(e.bMT(72,52,"profile.accountNumber")),e.R7$(6),e.JRh(e.bMT(78,54,"profile.bankName")),e.R7$(6),e.JRh(e.bMT(84,56,"profile.bankRoutingNumber")),e.R7$(6),e.JRh(e.bMT(90,58,"profile.bankSwift")),e.R7$(6),e.JRh(e.bMT(96,60,"profile.address")),e.R7$(6),e.SpI(" ",e.bMT(102,62,"profile.services")," "),e.R7$(3),e.Y8G("ngForOf",n.services),e.R7$(3),e.JRh(e.bMT(108,64,"profile.avatarImage")),e.R7$(3),e.Y8G("nzAction",r.root+"upload")("nzHeaders",e.eq3(68,ee,"Bearer "+r.jwt))("nzBeforeUpload",r.beforeUpload)("nzShowUploadList",!1),e.R7$(),e.Y8G("ngIf",!r.avatarUrl),e.R7$(),e.Y8G("ngIf",r.avatarUrl),e.R7$(),e.Y8G("disabled",!r.form.valid),e.R7$(),e.JRh(e.bMT(115,66,"profile.save"))}}let ce=(()=>{class t{route;msg;updateGQL;routerHelper;fb;form;root=$.c.root;subscription;query;genders=Object.values(u.YT8);gender=u.YT8;camelCase=X.xQ;jwt=localStorage.getItem("ridy_admin_token");loadingUpload=!1;avatarUrl;beforeUpload=(n,r)=>new Z.c(a=>{const i="image/jpeg"===n.type||"image/png"===n.type;if(!i)return this.msg.error("You can only upload JPG file!"),void a.complete();const m=(n.size??0)/1024/1024<2;if(!m)return this.msg.error("Image must smaller than 2MB!"),void a.complete();a.next(i&&m),a.complete()});constructor(n,r,a,i,m){this.route=n,this.msg=r,this.updateGQL=a,this.routerHelper=i,this.fb=m,this.form=this.fb.group({id:[null,s.k0.required],firstName:[null,s.k0.required],lastName:[null,s.k0.required],mobileNumber:[null,s.k0.required],gender:[null],email:[null],fleetId:[null],carId:[null],carColorId:[null],carProductionYear:[null],carPlate:[null],accountNumber:[null],bankName:[null],bankRoutingNumber:[null],bankSwift:[null],address:[null],mediaId:[null],enabledServices:[[],s.k0.required]})}ngOnInit(){this.query=this.route.parent?.data.pipe((0,g.T)(n=>n.driver)),this.subscription=this.route.parent?.data.subscribe(n=>{n.driver.data.driver.enabledServices=n.driver.data.driver.enabledServices.map(r=>r.id),this.form.patchValue(n.driver.data.driver),this.avatarUrl=n.driver.data.driver.media?.address?this.root+n.driver.data.driver.media.address.replace(/^\/+/,""):void 0})}ngOnDestroy(){this.subscription?.unsubscribe()}onSubmit(){var n=this;return(0,T.A)(function*(){const{id:r,enabledServices:a,mobileNumber:i,...m}=n.form.value,p=(a||[]).filter(F=>null!=F&&""!==F);yield(0,I._)(n.updateGQL.mutate({id:r,update:{...m,mobileNumber:i.toString()},serviceIds:p})),n.msg.success("Updated!"),n.routerHelper.refresh(n.route)})()}handleServiceCheckChange(n,r){const a=this.form.value.enabledServices||[];if(n){if(a.indexOf(r.id)<0){const i=[...a,r.id];this.form.patchValue({enabledServices:i})}}else{const i=a.filter(m=>m!==r.id);this.form.patchValue({enabledServices:i})}}handleUploadChange(n){switch(n.file.status){case"uploading":break;case"done":this.form.patchValue({mediaId:n.file.response.id}),this.avatarUrl=n.file.response.address?this.root+n.file.response.address.replace(/^\/+/,""):void 0;break;case"error":this.msg.error("Network error")}}static \u0275fac=function(r){return new(r||t)(e.rXU(f.nX),e.rXU(G.xh),e.rXU(u.lIL),e.rXU(P.T),e.rXU(s.ze))};static \u0275cmp=e.VBU({type:t,selectors:[["app-driver-profile-details"]],standalone:!1,decls:2,vars:3,consts:[["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit",4,"ngIf"],["nz-form","","nzLayout","vertical",3,"ngSubmit","formGroup"],["formControlName","id","type","hidden","hidden",""],["formControlName","mediaId","type","hidden","hidden",""],["formControlName","enabledServices","type","hidden","hidden",""],[1,"lg:grid","lg:grid-cols-4","lg:gap-2"],["nzRequired","","nzFor","firstName"],["nz-input","","required","","formControlName","firstName","id","firstName"],["nzRequired","","nzFor","lastName"],["nz-input","","required","","formControlName","lastName","id","lastName"],["nzFor","gender"],["formControlName","gender","id","gender"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzRequired","","nzFor","mobileNumber"],["required","","formControlName","mobileNumber","id","mobileNumber"],["nzFor","email"],["nz-input","","formControlName","email","id","email"],["nzFor","fleet"],["id","fleet","formControlName","fleetId"],["nzLabel","",3,"nzValue"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzFor","carId"],["id","carId","formControlName","carId"],["nzFor","carColorId"],["id","carColorId","formControlName","carColorId"],["nzFor","carProductionYear"],["formControlName","carProductionYear","id","carProductionYear"],["nzFor","carPlate"],["nz-input","","formControlName","carPlate","id","carPlate"],["nzFor","accountNumber"],["nz-input","","formControlName","accountNumber","id","accountNumber"],["nzFor","bankName"],["nz-input","","formControlName","bankName","id","bankName"],["nzFor","bankRoutingNumber"],["nz-input","","formControlName","bankRoutingNumber","id","bankRoutingNumber"],["nzFor","bankSwift"],["nz-input","","formControlName","bankSwift","id","bankSwift"],["nzFor","address"],["nz-input","","formControlName","address","id","address"],[1,"lg:col-span-4"],["nzRequired",""],["nzMode","checkable",3,"nzBordered","nzChecked","nzCheckedChange",4,"ngFor","ngForOf"],["nzListType","picture-card",3,"nzChange","nzAction","nzHeaders","nzBeforeUpload","nzShowUploadList"],[4,"ngIf"],["style","width: 100%",3,"src",4,"ngIf"],["nz-button","","nzType","primary",3,"disabled"],[3,"nzLabel","nzValue"],[3,"nzValue","nzLabel"],["nzMode","checkable",3,"nzCheckedChange","nzBordered","nzChecked"],["nz-icon","",1,"upload-icon",3,"nzType"],[1,"ant-upload-text"],[2,"width","100%",3,"src"]],template:function(r,a){if(1&r&&(e.DNE(0,se,116,70,"form",0),e.nI1(1,"async")),2&r){let i;e.Y8G("ngIf",null==(i=e.bMT(1,1,a.query))?null:i.data)}},dependencies:[c.Sq,c.bT,s.qT,s.me,s.BC,s.cb,s.YS,s.j4,s.JD,J.Sy,N.aO,k.c,E.p,M.Dn,C.Uq,C.e,z.CA,z.Ls,z.Mo,z.zS,j.ld,j.WI,R.s,x.$W,U.F,c.Jj,v.D9],styles:["nz-input-number[_ngcontent-%COMP%]{width:100%}"]})}return t})();var w=l(6501);const me=()=>({showRemoveIcon:!1,showPreviewIcon:!0,showDownloadIcon:!0}),de=()=>({width:"100%"});function ue(t,o){if(1&t&&e.nrm(0,"img",7),2&t){const n=e.XpG(2);e.Y8G("src",n.previewImage,e.B4B)("ngStyle",e.lJ4(2,de))}}function pe(t,o){if(1&t){const n=e.RV6();e.j41(0,"div",2)(1,"nz-upload",3)(2,"div"),e.nrm(3,"span",4),e.j41(4,"div",5),e.EFF(5,"Upload"),e.k0s()()(),e.j41(6,"nz-modal",6),e.bIt("nzOnCancel",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.previewVisible=!1)}),e.DNE(7,ue,1,3,"ng-template",null,0,e.C5r),e.k0s()()}if(2&t){const n=e.sdS(8),r=e.XpG();e.R7$(),e.Y8G("nzFileList",r.files)("nzShowButton",!1)("nzPreview",r.handlePreview)("nzShowUploadList",e.lJ4(7,me)),e.R7$(5),e.Y8G("nzVisible",r.previewVisible)("nzContent",n)("nzFooter",null)}}let fe=(()=>{class t{route;query;root=$.c.root;previewImage="";previewVisible=!1;files=[];subscription;handlePreview=(()=>{var r,n=this;return r=(0,T.A)(function*(a){!a.url&&!a.preview&&(a.preview=yield ze(a.originFileObj)),n.previewImage=a.url||a.preview,n.previewVisible=!0}),function(a){return r.apply(this,arguments)}})();constructor(n){this.route=n}ngOnDestroy(){this.subscription?.unsubscribe()}ngOnInit(){this.query=this.route.parent?.data.pipe((0,g.T)(n=>n.driver)),this.subscription=this.query?.subscribe(n=>{null!=n.data?.driver?.driverToDriverDocuments&&(this.files=this.getFileListFromDocuments(n.data?.driver))})}getFileListFromDocuments(n){return null==n?[]:n.driverToDriverDocuments.map(a=>({uid:"-1",name:"image.png",status:"done",url:a.media.address?this.root+a.media.address.replace(/^\/+/,""):void 0}))}static \u0275fac=function(r){return new(r||t)(e.rXU(f.nX))};static \u0275cmp=e.VBU({type:t,selectors:[["app-driver-profile-documents"]],standalone:!1,decls:2,vars:3,consts:[["modalContent",""],["style","overflow: auto;",4,"ngIf"],[2,"overflow","auto"],["nzListType","picture-card",3,"nzFileList","nzShowButton","nzPreview","nzShowUploadList"],["nz-icon","","nzType","plus"],[2,"margin-top","8px"],[3,"nzOnCancel","nzVisible","nzContent","nzFooter"],[3,"src","ngStyle"]],template:function(r,a){if(1&r&&(e.DNE(0,pe,9,8,"div",1),e.nI1(1,"async")),2&r){let i;e.Y8G("ngIf",null==(i=e.bMT(1,1,a.query))||null==i.data?null:i.data.driver)}},dependencies:[c.bT,c.B3,k.c,M.Dn,x.$W,w.F2,c.Jj],encapsulation:2})}return t})();const ze=t=>new Promise((o,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>o(r.result),r.onerror=a=>n(a)});var b=l(6807),y=l(2067),d=l(3359),Y=l(5154),_e=l(4327),D=l(3409);function ge(t,o){if(1&t&&(e.j41(0,"nz-tag",12),e.EFF(1),e.k0s()),2&t){const n=o.$implicit,r=e.XpG(3);e.Y8G("nzBordered",!1)("nzColor",r.tagColor.boolean(n.isGood)),e.R7$(),e.JRh(n.title)}}function ve(t,o){if(1&t&&(e.j41(0,"a",13),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t){const n=e.XpG().$implicit;e.Y8G("routerLink","/requests/view/"+n.requestId),e.R7$(),e.JRh(e.bMT(2,2,"table.viewRequest"))}}function be(t,o){if(1&t&&(e.j41(0,"tr")(1,"td",8),e.nI1(2,"date"),e.EFF(3),e.nI1(4,"timeago"),e.k0s(),e.j41(5,"td"),e.nrm(6,"nz-rate",9),e.k0s(),e.j41(7,"td",5),e.EFF(8),e.k0s(),e.j41(9,"td",6),e.DNE(10,ge,2,3,"nz-tag",10),e.k0s(),e.j41(11,"td"),e.DNE(12,ve,3,4,"a",11),e.k0s()()),2&t){const n=o.$implicit;e.R7$(),e.Y8G("nz-tooltip",e.i5U(2,6,n.reviewTimestamp,"short")),e.R7$(2),e.JRh(e.bMT(4,9,n.reviewTimestamp)),e.R7$(3),e.Y8G("ngModel",n.score/20),e.R7$(2),e.JRh(n.description),e.R7$(2),e.Y8G("ngForOf",n.parameters),e.R7$(2),e.Y8G("ngIf",null!==n.requestId)}}function he(t,o){if(1&t){const n=e.RV6();e.j41(0,"nz-table",2,0),e.bIt("nzQueryParams",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.tableService.onTableQueryParamsChange)}),e.j41(2,"thead")(3,"tr")(4,"th",3),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"th",4),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"th",5),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"th",6),e.EFF(14,"Parameters"),e.k0s(),e.j41(15,"th"),e.EFF(16),e.nI1(17,"translate"),e.k0s()()(),e.j41(18,"tbody"),e.DNE(19,be,13,11,"tr",7),e.k0s()()}if(2&t){const n=o.ngIf,r=e.sdS(1);e.Y8G("nzFrontPagination",!1)("nzData",n.nodes),e.R7$(5),e.JRh(e.bMT(6,7,"profile.dateTime")),e.R7$(3),e.JRh(e.bMT(9,9,"profile.rating")),e.R7$(3),e.JRh(e.bMT(12,11,"profile.review")),e.R7$(5),e.JRh(e.bMT(17,13,"profile.actions")),e.R7$(3),e.Y8G("ngForOf",r.data)}}let Fe=(()=>{class t{tagColor;route;tableService;query;constructor(n,r,a){this.tagColor=n,this.route=r,this.tableService=a}ngOnInit(){this.query=this.route.data.pipe((0,g.T)(n=>n.feedbacks))}static \u0275fac=function(r){return new(r||t)(e.rXU(y.t),e.rXU(f.nX),e.rXU(b.a))};static \u0275cmp=e.VBU({type:t,selectors:[["app-driver-profile-feedbacks"]],standalone:!1,decls:2,vars:3,consts:[["table",""],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzQueryParams",4,"ngIf"],["nzShowSizeChanger","","nzBordered","",3,"nzQueryParams","nzFrontPagination","nzData"],["nzShowSort","","nzColumnKey","reviewTimestamp"],["nzShowSort","","nzColumnKey","score"],[1,"hidden","md:table-cell"],[1,"hidden","lg:table-cell"],[4,"ngFor","ngForOf"],[3,"nz-tooltip"],["nzDisabled","","nzAllowHalf","",3,"ngModel"],[3,"nzBordered","nzColor",4,"ngFor","ngForOf"],[3,"routerLink",4,"ngIf"],[3,"nzBordered","nzColor"],[3,"routerLink"]],template:function(r,a){if(1&r&&(e.DNE(0,he,20,15,"nz-table",1),e.nI1(1,"async")),2&r){let i;e.Y8G("ngIf",null==(i=e.bMT(1,1,a.query))||null==i.data?null:i.data.feedbacks)}},dependencies:[_.Wk,c.Sq,c.bT,s.BC,s.vS,d.CP,d.Cc,d.SO,d._4,d.IL,d.aj,d.kt,R.s,Y.LH,_e.GF,c.Jj,c.vh,v.D9,D.PZ],encapsulation:2})}return t})(),V=(()=>{class t{gql;tableService;constructor(n,r){this.gql=n,this.tableService=r}resolve(n,r){const a=this.tableService.deserializeQueryParams(n.queryParams);return this.gql.fetch({id:n.parent?.params.id,paging:a.paging})}static \u0275fac=function(r){return new(r||t)(e.KVO(u.xV9),e.KVO(b.a))};static \u0275prov=e.jDH({token:t,factory:t.\u0275fac})}return t})();var B=l(5703);function Te(t,o){if(1&t&&(e.j41(0,"nz-tag",31),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t){const n=e.XpG().$implicit,r=e.XpG(2);e.Y8G("nzBordered",!1)("nzColor",r.tagColor.getTransactionStatusStatusColor(n.status)),e.R7$(),e.JRh(e.bMT(2,3,"enum.transactionStatus."+n.status))}}function Re(t,o){if(1&t&&(e.j41(0,"a",32),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t){const n=e.XpG().$implicit;e.Y8G("routerLink","/management/users/view/"+n.operatorId),e.R7$(),e.JRh(e.bMT(2,2,"table.viewOperator"))}}function Ie(t,o){if(1&t&&(e.j41(0,"a",32),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t){const n=e.XpG().$implicit;e.Y8G("routerLink","/management/payment-gateways/view/"+n.paymentGatewayId),e.R7$(),e.JRh(e.bMT(2,2,"table.viewGateway"))}}function ke(t,o){if(1&t&&(e.j41(0,"a",32),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t){const n=e.XpG().$implicit;e.Y8G("routerLink","/requests/view/"+n.requestId),e.R7$(),e.JRh(e.bMT(2,2,"table.viewRequest"))}}function Ce(t,o){if(1&t&&(e.j41(0,"tr")(1,"td",27),e.nI1(2,"date"),e.EFF(3),e.nI1(4,"timeago"),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"translate"),e.nI1(8,"translate"),e.DNE(9,Te,3,5,"nz-tag",28),e.k0s(),e.j41(10,"td",29),e.EFF(11),e.nI1(12,"currency"),e.k0s(),e.j41(13,"td",24),e.EFF(14),e.k0s(),e.j41(15,"td",25),e.EFF(16),e.k0s(),e.j41(17,"td"),e.DNE(18,Re,3,4,"a",30)(19,Ie,3,4,"a",30)(20,ke,3,4,"a",30),e.k0s()()),2&t){const n=o.$implicit;e.R7$(),e.Y8G("nz-tooltip",e.i5U(2,12,n.createdAt,"short")),e.R7$(2),e.JRh(e.bMT(4,15,n.createdAt)),e.R7$(3),e.SpI("","Deduct"===n.action?e.bMT(7,17,"enum.transactionType."+n.deductType):e.bMT(8,19,"enum.transactionType."+n.rechargeType)," "),e.R7$(3),e.Y8G("ngIf","Done"!=n.status),e.R7$(),e.Y8G("ngClass","Recharge"===n.action?"text-green-500":"text-red-500"),e.R7$(),e.Lme("","Recharge"===n.action?"+":"","",e.i5U(12,21,n.amount,n.currency),""),e.R7$(3),e.JRh(n.refrenceNumber),e.R7$(2),e.JRh(n.description),e.R7$(2),e.Y8G("ngIf",null!==n.operatorId),e.R7$(),e.Y8G("ngIf",null!==n.paymentGatewayId),e.R7$(),e.Y8G("ngIf",null!==n.requestId)}}function je(t,o){if(1&t){const n=e.RV6();e.j41(0,"nz-table",22,0),e.bIt("nzQueryParams",function(a){e.eBV(n);const i=e.XpG();return e.Njj(i.tableService.onTableQueryParamsChange(a))}),e.j41(2,"thead")(3,"tr")(4,"th",23),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"th"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"th"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"th",24),e.EFF(14),e.nI1(15,"translate"),e.k0s(),e.j41(16,"th",25),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.j41(19,"th"),e.EFF(20),e.nI1(21,"translate"),e.k0s()()(),e.j41(22,"tbody"),e.DNE(23,Ce,21,24,"tr",26),e.k0s()()}if(2&t){const n=o.ngIf,r=e.sdS(1);e.Y8G("nzFrontPagination",!1)("nzData",n.nodes)("nzTotal",n.totalCount),e.R7$(4),e.Y8G("nzSortFn",!0),e.R7$(),e.SpI(" ",e.bMT(6,11,"profile.dateTime")," "),e.R7$(3),e.SpI(" ",e.bMT(9,13,"profile.transactionType")," "),e.R7$(3),e.SpI(" ",e.bMT(12,15,"profile.amount")," "),e.R7$(3),e.SpI(" ",e.bMT(15,17,"profile.documentNumber")," "),e.R7$(3),e.SpI(" ",e.bMT(18,19,"profile.details")," "),e.R7$(3),e.JRh(e.bMT(21,21,"profile.actions")),e.R7$(3),e.Y8G("ngForOf",r.data)}}function ye(t,o){if(1&t&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"currency"),e.k0s()()),2&t){const n=o.$implicit;e.R7$(2),e.JRh(e.i5U(3,1,n.balance,n.currency))}}function De(t,o){if(1&t&&(e.j41(0,"nz-table",33,1)(2,"thead")(3,"tr")(4,"th"),e.EFF(5,"Amount"),e.k0s()()(),e.j41(6,"tbody"),e.DNE(7,ye,4,4,"tr",26),e.k0s()()),2&t){const n=o.ngIf,r=e.sdS(1);e.Y8G("nzData",n)("nzTotal",n.length),e.R7$(7),e.Y8G("ngForOf",r.data)}}function Se(t,o){1&t&&e.nrm(0,"div")}function $e(t,o){if(1&t&&(e.nrm(0,"nz-option",35),e.nI1(1,"translate")),2&t){const n=o.$implicit;e.Y8G("nzLabel",e.bMT(1,2,"enum.transactionType."+n))("nzValue",n)}}function Ge(t,o){if(1&t&&(e.j41(0,"nz-form-item")(1,"nz-form-label"),e.EFF(2,"Recharge Type"),e.k0s(),e.j41(3,"nz-form-control")(4,"nz-select",34),e.DNE(5,$e,2,4,"nz-option",16),e.k0s()()()),2&t){const n=e.XpG();e.R7$(5),e.Y8G("ngForOf",n.rechargeTypes)}}function Pe(t,o){if(1&t&&(e.nrm(0,"nz-option",35),e.nI1(1,"translate")),2&t){const n=o.$implicit;e.Y8G("nzLabel",e.bMT(1,2,"enum.transactionType."+n))("nzValue",n)}}function Ne(t,o){if(1&t&&(e.j41(0,"nz-form-item")(1,"nz-form-label"),e.EFF(2,"Deduct Type"),e.k0s(),e.j41(3,"nz-form-control")(4,"nz-select",36),e.DNE(5,Pe,2,4,"nz-option",16),e.k0s()()()),2&t){const n=e.XpG();e.R7$(5),e.Y8G("ngForOf",n.deductTypes)}}function Ee(t,o){if(1&t&&e.nrm(0,"nz-option",35),2&t){const n=o.$implicit;e.Y8G("nzLabel",n.currency)("nzValue",n.currency)}}let Me=(()=>{class t{route;tableService;tagColor;fb;createTransactionGQL;routerHelper;msg;formTransaction;query;deductTypes=Object.values(u.mQ4);rechargeTypes=Object.values(u.kAr);constructor(n,r,a,i,m,p,F){this.route=n,this.tableService=r,this.tagColor=a,this.fb=i,this.createTransactionGQL=m,this.routerHelper=p,this.msg=F}ngOnInit(){this.query=this.route.data.pipe((0,g.T)(n=>n.financials)),this.formTransaction=this.fb.group({action:[null,s.k0.required],rechargeType:[null],deductType:[null],amount:[0,s.k0.required],currency:[null,s.k0.required],description:[null],refrenceNumber:[null]})}onSubmitTransaction(){var n=this;return(0,T.A)(function*(){if("Recharge"!=n.formTransaction.value.action||null!=n.formTransaction.value.rechargeType)if("Deduct"!=n.formTransaction.value.action||null!=n.formTransaction.value.deductType){n.formTransaction.value.driverId=n.route.parent?.snapshot.params.id;try{yield(0,I._)(n.createTransactionGQL.mutate({input:n.formTransaction.value})),n.msg.success("Transaction Submitted."),n.routerHelper.refresh(n.route),n.formTransaction.patchValue({})}catch(r){n.msg.error(r.message)}}else n.msg.error("Please select the transaction type.");else n.msg.error("Please select the transaction type.")})()}getUniquieCurrencies(n){return null==n?[]:[...new Set(n)]}static \u0275fac=function(r){return new(r||t)(e.rXU(f.nX),e.rXU(b.a),e.rXU(y.t),e.rXU(s.ze),e.rXU(u.X2j),e.rXU(P.T),e.rXU(G.xh))};static \u0275cmp=e.VBU({type:t,selectors:[["app-driver-profile-financial"]],standalone:!1,decls:44,vars:20,consts:[["table",""],["walletTable",""],["fxLayout","row","fxLayoutGap","4px",1,"dt-actionbar"],["nzTitle","Transactions Records","nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],["nzTitle","Wallet Summary","nzBordered","","class","mt-2",3,"nzFrontPagination","nzData","nzTotal",4,"ngIf"],[1,"mt-2",3,"nzTitle"],["nz-form","",3,"ngSubmit","formGroup"],[1,"lg:grid","lg:grid-cols-2","lg:gap-2"],["nzRequired",""],["formControlName","action","nzRequired",""],["nzLabel","Deduct","nzValue","Deduct"],["nzLabel","Recharge","nzValue","Recharge"],[4,"ngIf"],["nzRequired","","nzFor","amount"],["formControlName","amount","id","amount","required","",1,"w-full"],["formControlName","currency","id","currency","required",""],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzFor","refrenceNumber"],["nz-input","","formControlName","refrenceNumber","id","refrenceNumber"],["nzFor","description"],["nz-input","","formControlName","description","id","description"],["nz-button","","nzType","primary","type","submit",1,"float-right","mt-2",3,"disabled"],["nzTitle","Transactions Records","nzShowSizeChanger","","nzBordered","",3,"nzQueryParams","nzFrontPagination","nzData","nzTotal"],["nzColumnKey","createdAt",3,"nzSortFn"],[1,"hidden","lg:table-cell"],[1,"hidden","xl:table-cell"],[4,"ngFor","ngForOf"],[3,"nz-tooltip"],[3,"nzBordered","nzColor",4,"ngIf"],[3,"ngClass"],[3,"routerLink",4,"ngIf"],[3,"nzBordered","nzColor"],[3,"routerLink"],["nzTitle","Wallet Summary","nzBordered","",1,"mt-2",3,"nzFrontPagination","nzData","nzTotal"],["formControlName","rechargeType"],[3,"nzLabel","nzValue"],["formControlName","deductType"]],template:function(r,a){if(1&r&&(e.nrm(0,"div",2),e.DNE(1,je,24,23,"nz-table",3),e.nI1(2,"async"),e.DNE(3,De,8,3,"nz-table",4),e.nI1(4,"async"),e.j41(5,"nz-card",5),e.nI1(6,"translate"),e.j41(7,"form",6),e.bIt("ngSubmit",function(){return a.onSubmitTransaction()}),e.j41(8,"div",7)(9,"nz-form-item")(10,"nz-form-label",8),e.EFF(11,"Type"),e.k0s(),e.j41(12,"nz-form-control")(13,"nz-select",9),e.nrm(14,"nz-option",10)(15,"nz-option",11),e.k0s()()(),e.DNE(16,Se,1,0,"div",12)(17,Ge,6,1,"nz-form-item",12)(18,Ne,6,1,"nz-form-item",12),e.j41(19,"nz-form-item")(20,"nz-form-label",13),e.EFF(21,"Amount"),e.k0s(),e.j41(22,"nz-form-control"),e.nrm(23,"nz-input-number",14),e.k0s()(),e.j41(24,"nz-form-item")(25,"nz-form-label",8),e.EFF(26,"Currency"),e.k0s(),e.j41(27,"nz-form-control")(28,"nz-select",15),e.DNE(29,Ee,1,2,"nz-option",16),e.nI1(30,"async"),e.k0s()()(),e.j41(31,"nz-form-item")(32,"nz-form-label",17),e.EFF(33,"Document Number"),e.k0s(),e.j41(34,"nz-form-control"),e.nrm(35,"input",18),e.k0s()(),e.j41(36,"nz-form-item")(37,"nz-form-label",19),e.EFF(38,"Description"),e.k0s(),e.j41(39,"nz-form-control"),e.nrm(40,"input",20),e.k0s()()(),e.j41(41,"button",21),e.EFF(42),e.nI1(43,"translate"),e.k0s()()()),2&r){let i,m,p;e.R7$(),e.Y8G("ngIf",null==(i=e.bMT(2,10,a.query))||null==i.data||null==i.data.driver?null:i.data.driver.transactions),e.R7$(2),e.Y8G("ngIf",null==(m=e.bMT(4,12,a.query))||null==m.data||null==m.data.driver?null:m.data.driver.wallet),e.R7$(2),e.FS9("nzTitle",e.bMT(6,14,"profile.insertTransaction")),e.R7$(2),e.Y8G("formGroup",a.formTransaction),e.R7$(9),e.Y8G("ngIf",null===a.formTransaction.value.action),e.R7$(),e.Y8G("ngIf","Recharge"===a.formTransaction.value.action),e.R7$(),e.Y8G("ngIf","Deduct"===a.formTransaction.value.action),e.R7$(11),e.Y8G("ngForOf",a.getUniquieCurrencies(null==(p=e.bMT(30,16,a.query))||null==p.data||null==p.data.regions?null:p.data.regions.nodes)),e.R7$(12),e.Y8G("disabled",!a.formTransaction.valid),e.R7$(),e.JRh(e.bMT(43,18,"profile.submit"))}},dependencies:[_.Wk,c.YU,c.Sq,c.bT,s.qT,s.me,s.BC,s.cb,s.YS,s.j4,s.JD,d.CP,d.Cc,d.SO,d._4,d.IL,d.aj,d.kt,J.Sy,N.aO,k.c,E.p,C.Uq,C.e,z.CA,z.Ls,z.Mo,z.zS,j.ld,j.WI,R.s,B.cK,U.F,Y.LH,c.Jj,c.oe,c.vh,v.D9,D.PZ],encapsulation:2})}return t})(),q=(()=>{class t{gql;tableService;constructor(n,r){this.gql=n,this.tableService=r}resolve(n,r){const a=this.tableService.deserializeQueryParams(n.queryParams);return this.gql.fetch({id:n.parent?.params.id,...a})}static \u0275fac=function(r){return new(r||t)(e.KVO(u.zlu),e.KVO(b.a))};static \u0275prov=e.jDH({token:t,factory:t.\u0275fac})}return t})();function Ye(t,o){if(1&t&&(e.j41(0,"tr")(1,"td",6),e.nI1(2,"date"),e.EFF(3),e.nI1(4,"timeago"),e.k0s(),e.j41(5,"td",4),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.nI1(9,"currency"),e.k0s(),e.j41(10,"td")(11,"nz-tag",7),e.EFF(12),e.nI1(13,"translate"),e.k0s()(),e.j41(14,"td")(15,"a",8),e.EFF(16),e.nI1(17,"translate"),e.k0s()()()),2&t){const n=o.$implicit,r=e.XpG(2);e.R7$(),e.Y8G("nz-tooltip",e.i5U(2,9,n.createdOn,"short")),e.R7$(2),e.JRh(e.bMT(4,12,n.createdOn)),e.R7$(3),e.JRh(n.addresses[0]),e.R7$(2),e.JRh(e.i5U(9,14,n.costAfterCoupon,n.currency)),e.R7$(3),e.Y8G("nzColor",r.tagColor.orderStatus(n.status))("nzBordered",!1),e.R7$(),e.JRh(e.bMT(13,17,"enum.request."+n.status)),e.R7$(3),e.Y8G("routerLink","/requests/view/"+n.id),e.R7$(),e.JRh(e.bMT(17,19,"profile.view"))}}function Le(t,o){if(1&t){const n=e.RV6();e.j41(0,"nz-table",2,0),e.nI1(2,"async"),e.bIt("nzQueryParams",function(a){e.eBV(n);const i=e.XpG();return e.Njj(i.tableService.onTableQueryParamsChange(a))}),e.j41(3,"thead")(4,"tr")(5,"th",3),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"th",4),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.j41(11,"th"),e.EFF(12),e.nI1(13,"translate"),e.k0s(),e.j41(14,"th"),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.j41(17,"th"),e.EFF(18),e.nI1(19,"translate"),e.k0s()()(),e.j41(20,"tbody"),e.DNE(21,Ye,18,21,"tr",5),e.k0s()()}if(2&t){let n;const r=o.ngIf,a=e.sdS(1),i=e.XpG();e.Y8G("nzFrontPagination",!1)("nzData",r)("nzTotal",null!==(n=null==(n=e.bMT(2,10,i.query))||null==n.data||null==n.data.driver||null==n.data.driver.orders?null:n.data.driver.orders.totalCount)&&void 0!==n?n:0),e.R7$(5),e.Y8G("nzSortFn",!0),e.R7$(),e.SpI(" ",e.bMT(7,12,"profile.dateTime")," "),e.R7$(3),e.SpI(" ",e.bMT(10,14,"profile.locations")," "),e.R7$(3),e.SpI(" ",e.bMT(13,16,"profile.cost")," "),e.R7$(3),e.SpI(" ",e.bMT(16,18,"profile.status")," "),e.R7$(3),e.JRh(e.bMT(19,20,"profile.actions")),e.R7$(3),e.Y8G("ngForOf",a.data)}}let Oe=(()=>{class t{route;tagColor;tableService;query;statuses=Object.keys(u.Re4).map(n=>({text:n,value:n}));constructor(n,r,a){this.route=n,this.tagColor=r,this.tableService=a}ngOnInit(){this.query=this.route.data.pipe((0,g.T)(n=>n.orders))}static \u0275fac=function(r){return new(r||t)(e.rXU(f.nX),e.rXU(y.t),e.rXU(b.a))};static \u0275cmp=e.VBU({type:t,selectors:[["app-driver-profile-orders"]],standalone:!1,decls:2,vars:3,consts:[["table",""],["nzShowSizeChanger","","class","mt-4","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],["nzShowSizeChanger","","nzBordered","",1,"mt-4",3,"nzQueryParams","nzFrontPagination","nzData","nzTotal"],["nzColumnKey","createdOn",3,"nzSortFn"],[1,"hidden","lg:table-cell"],[4,"ngFor","ngForOf"],[3,"nz-tooltip"],[3,"nzColor","nzBordered"],[3,"routerLink"]],template:function(r,a){if(1&r&&(e.DNE(0,Le,22,22,"nz-table",1),e.nI1(1,"async")),2&r){let i;e.Y8G("ngIf",null==(i=e.bMT(1,1,a.query))||null==i.data||null==i.data.driver||null==i.data.driver.orders?null:i.data.driver.orders.nodes)}},dependencies:[_.Wk,c.Sq,c.bT,d.CP,d.Cc,d.SO,d._4,d.IL,d.aj,d.kt,R.s,Y.LH,c.Jj,c.oe,c.vh,v.D9,D.PZ],encapsulation:2})}return t})(),Q=(()=>{class t{gql;tableService;constructor(n,r){this.gql=n,this.tableService=r}resolve(n,r){const a=this.tableService.deserializeQueryParams(n.queryParams);return this.gql.fetch({driverId:n.parent?.params.id,...a})}static \u0275fac=function(r){return new(r||t)(e.KVO(u.QWH),e.KVO(b.a))};static \u0275prov=e.jDH({token:t,factory:t.\u0275fac})}return t})();var A=l(1868),L=l(2602),S=l(6057),h=l(3062),H=l(2e3),Xe=l(9438),Je=l(1672);function xe(t,o){1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"drivers.notFoundMessage")," "))}function Ue(t,o){1&t&&(e.j41(0,"button",6),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"profile.goToList")))}function we(t,o){if(1&t&&(e.j41(0,"nz-empty",5),e.DNE(1,xe,3,3,"ng-template",null,0,e.C5r)(3,Ue,3,3,"ng-template",null,1,e.C5r),e.k0s()),2&t){const n=e.sdS(2),r=e.sdS(4);e.Y8G("nzNotFoundContent",n)("nzNotFoundFooter",r)}}function Ve(t,o){if(1&t&&(e.j41(0,"nz-descriptions-item",16),e.nI1(1,"translate"),e.EFF(2),e.nI1(3,"timeago"),e.k0s()),2&t){const n=e.XpG().ngIf;e.Y8G("nzTitle",e.bMT(1,2,"driver.profile.lastSeenAt")),e.R7$(2),e.JRh(null!==n.lastSeenTimestamp?e.bMT(3,4,n.lastSeenTimestamp):"-")}}function Be(t,o){if(1&t&&(e.j41(0,"nz-tag",28),e.EFF(1),e.k0s()),2&t){const n=o.$implicit,r=e.XpG(3);e.Y8G("nzBordered",!1)("nzColor",r.tagColor.boolean(n.isGood)),e.R7$(),e.Lme(" ",n.count," x ",n.title," ")}}function qe(t,o){if(1&t&&(e.j41(0,"nz-descriptions-item",25)(1,"div",26),e.DNE(2,Be,2,4,"nz-tag",27),e.k0s()()),2&t){const n=o.ngIf;e.R7$(2),e.Y8G("ngForOf",n)}}function Qe(t,o){1&t&&(e.j41(0,"a",29),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"driver.profile.details")))}function Ae(t,o){1&t&&(e.j41(0,"a",30),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"driver.profile.orders")))}function He(t,o){1&t&&(e.j41(0,"a",31),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"driver.profile.financials")))}function We(t,o){1&t&&(e.j41(0,"a",32),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"driver.profile.reviews")))}function Ke(t,o){1&t&&(e.j41(0,"a",33),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"driver.profile.documents")))}function Ze(t,o){if(1&t){const n=e.RV6();e.j41(0,"nz-page-header")(1,"nz-page-header-title"),e.nrm(2,"nz-avatar",7),e.EFF(3),e.k0s(),e.j41(4,"nz-page-header-tags")(5,"nz-tag",8),e.EFF(6),e.nI1(7,"translate"),e.k0s()(),e.j41(8,"nz-page-header-extra")(9,"button",9),e.bIt("click",function(){const a=e.eBV(n).ngIf,i=e.XpG();return e.Njj(i.deleteDriver(a.id))}),e.nrm(10,"i",10),e.k0s(),e.j41(11,"button",11),e.EFF(12),e.nI1(13,"translate"),e.nrm(14,"i",12),e.k0s(),e.j41(15,"nz-dropdown-menu",null,2)(17,"ul",13)(18,"li",14),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.changeStatus(a.driverStatus.PendingApproval))}),e.EFF(19),e.nI1(20,"translate"),e.k0s(),e.j41(21,"li",14),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.changeStatus(a.driverStatus.Offline))}),e.EFF(22),e.nI1(23,"translate"),e.k0s(),e.j41(24,"li",14),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.changeStatus(a.driverStatus.Blocked))}),e.EFF(25),e.nI1(26,"translate"),e.k0s(),e.j41(27,"li",14),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.changeStatus(a.driverStatus.SoftReject))}),e.EFF(28),e.nI1(29,"translate"),e.k0s(),e.j41(30,"li",14),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.changeStatus(a.driverStatus.HardReject))}),e.EFF(31),e.nI1(32,"translate"),e.k0s(),e.j41(33,"li",14),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.changeStatus(a.driverStatus.Offline))}),e.EFF(34),e.nI1(35,"translate"),e.k0s(),e.j41(36,"li",14),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.changeStatus(a.driverStatus.WaitingDocuments))}),e.EFF(37),e.nI1(38,"translate"),e.k0s(),e.j41(39,"li",15),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.changeStatus(a.driverStatus.InService))}),e.EFF(40),e.nI1(41,"translate"),e.k0s(),e.j41(42,"li",15),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.changeStatus(a.driverStatus.Online))}),e.EFF(43),e.nI1(44,"translate"),e.k0s()()()(),e.j41(45,"nz-page-header-content")(46,"nz-descriptions")(47,"nz-descriptions-item",16),e.nI1(48,"translate"),e.EFF(49),e.nI1(50,"timeago"),e.k0s(),e.DNE(51,Ve,4,6,"nz-descriptions-item",17),e.j41(52,"nz-descriptions-item",16),e.nI1(53,"translate"),e.EFF(54),e.k0s(),e.DNE(55,qe,3,1,"nz-descriptions-item",18),e.nI1(56,"async"),e.k0s()(),e.j41(57,"nz-page-header-footer")(58,"nz-tabset",19)(59,"nz-tab"),e.DNE(60,Qe,3,3,"a",20),e.k0s(),e.j41(61,"nz-tab"),e.DNE(62,Ae,3,3,"a",21),e.k0s(),e.j41(63,"nz-tab"),e.DNE(64,He,3,3,"a",22),e.k0s(),e.j41(65,"nz-tab"),e.DNE(66,We,3,3,"a",23),e.k0s(),e.j41(67,"nz-tab"),e.DNE(68,Ke,3,3,"a",24),e.k0s()(),e.nrm(69,"router-outlet"),e.k0s()()}if(2&t){let n;const r=o.ngIf,a=e.sdS(16),i=e.XpG();e.R7$(2),e.Y8G("nzSrc",null!=r.media&&r.media.address?i.root+(null==r.media?null:r.media.address):void 0),e.R7$(),e.Lme("",r.firstName," ",r.lastName," "),e.R7$(2),e.Y8G("nzColor",i.tagColor.driver(r.status))("nzBordered",!1),e.R7$(),e.JRh(e.bMT(7,25,"enum.driver.status."+i.toCamelCase(r.status))),e.R7$(3),e.Y8G("nzType","dashed"),e.R7$(2),e.Y8G("nzDropdownMenu",a),e.R7$(),e.SpI(" ",e.bMT(13,27,"driver.profile.changeStatus")," "),e.R7$(7),e.JRh(e.bMT(20,29,"enum.driver.status.pendingApproval")),e.R7$(3),e.SpI("",e.bMT(23,31,"enum.driver.status.approved")," "),e.R7$(3),e.SpI("",e.bMT(26,33,"enum.driver.status.blocked")," "),e.R7$(3),e.JRh(e.bMT(29,35,"enum.driver.status.softReject")),e.R7$(3),e.JRh(e.bMT(32,37,"enum.driver.status.hardReject")),e.R7$(3),e.SpI("",e.bMT(35,39,"enum.driver.status.offline")," "),e.R7$(3),e.JRh(e.bMT(38,41,"enum.driver.status.waitingDocuments")),e.R7$(3),e.JRh(e.bMT(41,43,"enum.driver.status.inService")),e.R7$(3),e.JRh(e.bMT(44,45,"enum.driver.status.online")),e.R7$(4),e.Y8G("nzTitle",e.bMT(48,47,"profile.registeredOn")),e.R7$(2),e.JRh(e.bMT(50,49,r.registrationTimestamp)),e.R7$(2),e.Y8G("ngIf","Online"!==r.status),e.R7$(),e.Y8G("nzTitle",e.bMT(53,51,"driver.profile.rating")),e.R7$(2),e.JRh(null!==r.rating?r.rating+"%("+r.reviewCount+" reviews)":"N/A"),e.R7$(),e.Y8G("ngIf",null==(n=e.bMT(56,53,i.query))||null==n.data?null:n.data.driverFeedbackParametersSummary),e.R7$(3),e.Y8G("nzLinkExact",!1)}}let en=(()=>{class t{route;tagColor;message;modal;deleteGQL;updateGQL;routerHelper;router;translate;driverStatus=u.ZSe;query;root=$.c.root;toCamelCase=X.xQ;constructor(n,r,a,i,m,p,F,an,on){this.route=n,this.tagColor=r,this.message=a,this.modal=i,this.deleteGQL=m,this.updateGQL=p,this.routerHelper=F,this.router=an,this.translate=on}ngOnInit(){this.query=this.route.data.pipe((0,g.T)(n=>n.driver))}getImageUrl(n){if(!n)return;const r=n.replace(/^\/+/,"");return this.root+r}changeStatus(n){var r=this;return(0,T.A)(function*(){const a=r.route.snapshot.params.id??0;yield(0,I._)(r.updateGQL.mutate({id:a,status:n})),r.routerHelper.refresh(r.route)})()}deleteDriver(n){var a,r=this;this.modal.confirm({nzTitle:this.translate.instant("message.deleteDriverConfirmation.title"),nzContent:this.translate.instant("message.deleteDriverConfirmation.content"),nzOnOk:(a=(0,T.A)(function*(){try{yield(0,I._)(r.deleteGQL.mutate({id:n})),r.message.success(r.translate.instant("message.deleteDriverCofirmAlert")),r.router.navigateByUrl("/drivers")}catch(i){r.message.error("PERMISSION_NOT_GRANTED"==i.message?r.translate.instant("error.PERMISSION_NOT_GRANTED"):i.message)}}),function(){return a.apply(this,arguments)})})}static \u0275fac=function(r){return new(r||t)(e.rXU(f.nX),e.rXU(y.t),e.rXU(G.xh),e.rXU(w.N_),e.rXU(u.qwF),e.rXU(u.Mfr),e.rXU(P.T),e.rXU(f.Ix),e.rXU(v.c$))};static \u0275cmp=e.VBU({type:t,selectors:[["app-driver-profile"]],standalone:!1,decls:5,vars:6,consts:[["contentTpl",""],["footerTpl",""],["menu4","nzDropdownMenu"],[3,"nzNotFoundContent","nzNotFoundFooter",4,"ngIf"],[4,"ngIf"],[3,"nzNotFoundContent","nzNotFoundFooter"],["nz-button","","nzType","primary","routerLink","/drivers"],["nzIcon","user",3,"nzSrc"],[3,"nzColor","nzBordered"],["nz-button","","nzDanger","",1,"mr-2",3,"click","nzType"],["nz-icon","","nzType","delete"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["nz-menu",""],["nz-menu-item","",3,"click"],["nz-menu-item","","hidden","",3,"click"],[3,"nzTitle"],[3,"nzTitle",4,"ngIf"],["nzTitle","Rating summary",4,"ngIf"],["nzLinkRouter","",1,"mb-2",3,"nzLinkExact"],["nz-tab-link","","routerLink","details",4,"nzTabLink"],["nz-tab-link","","routerLink","orders",4,"nzTabLink"],["nz-tab-link","","routerLink","financial",4,"nzTabLink"],["nz-tab-link","","routerLink","reviews",4,"nzTabLink"],["nz-tab-link","","routerLink","documents",4,"nzTabLink"],["nzTitle","Rating summary"],[1,"grid-flow-row"],[3,"nzBordered","nzColor",4,"ngFor","ngForOf"],[3,"nzBordered","nzColor"],["nz-tab-link","","routerLink","details"],["nz-tab-link","","routerLink","orders"],["nz-tab-link","","routerLink","financial"],["nz-tab-link","","routerLink","reviews"],["nz-tab-link","","routerLink","documents"]],template:function(r,a){if(1&r&&(e.j41(0,"nz-card"),e.DNE(1,we,5,2,"nz-empty",3),e.nI1(2,"async"),e.DNE(3,Ze,70,55,"nz-page-header",4),e.nI1(4,"async"),e.k0s()),2&r){let i,m;e.R7$(),e.Y8G("ngIf",null==(null==(i=e.bMT(2,2,a.query))||null==i.data?null:i.data.driver)),e.R7$(2),e.Y8G("ngIf",null==(m=e.bMT(4,4,a.query))||null==m.data?null:m.data.driver)}},dependencies:[f.n3,_.Wk,c.Sq,c.bT,A.jS,A.CU,L.j3,L.wQ,L.h4,N.aO,k.c,E.p,M.Dn,S.JZ,S.rE,S.v3,S.rM,R.s,h.WB,h.k9,h.zR,h.cC,h.ov,h.F0,H.xA,H.gr,Xe.PM,Je.RW,B.cK,c.Jj,v.D9,D.PZ],encapsulation:2})}return t})(),W=(()=>{class t{gql;constructor(n){this.gql=n}resolve(n,r){return this.gql.fetch({id:n.params.id})}static \u0275fac=function(r){return new(r||t)(e.KVO(u.oAh))};static \u0275prov=e.jDH({token:t,factory:t.\u0275fac})}return t})();const nn=[{path:"",component:en,resolve:{driver:W},runGuardsAndResolvers:"paramsOrQueryParamsChange",children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:ce},{path:"orders",component:Oe,resolve:{orders:Q},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"financial",component:Me,resolve:{financials:q},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"reviews",component:Fe,resolve:{feedbacks:V},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"documents",component:fe}]}];let tn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=e.$C({type:t});static \u0275inj=e.G2t({providers:[W,q,V,Q],imports:[_.iI.forChild(nn),_.iI]})}return t})(),rn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=e.$C({type:t});static \u0275inj=e.G2t({imports:[tn,K.G]})}return t})()}}]);