"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[346],{4346:(D,b,a)=>{a.r(b),a.d(b,{ManagementOrderCancelReasonModule:()=>H});var v=a(7624),C=a(3241),e=a(1360);let j=(()=>{class t{gql;constructor(n){this.gql=n}resolve(n,r){return this.gql.fetch({id:n.params.id})}static \u0275fac=function(r){return new(r||t)(e.KVO(C.ymX))};static \u0275prov=e.jDH({token:t,factory:t.\u0275fac})}return t})();var y=a(2067),z=a(6354),I=a(6807),o=a(2209),s=a(8434),i=a(3359),l=a(513),c=a(6389),p=a(5930),d=a(1951),f=a(5699),m=a(3062),F=a(8018);const V=()=>[];function L(t,R){1&t&&(e.j41(0,"nz-tag",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.Y8G("nzBordered",!1),e.R7$(),e.JRh(e.bMT(2,2,"profile.disabled")))}function A(t,R){if(1&t&&(e.j41(0,"tr",7)(1,"td")(2,"span",8),e.EFF(3),e.k0s(),e.DNE(4,L,3,4,"nz-tag",9),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&t){const n=R.$implicit;e.Y8G("routerLink","view/"+n.id),e.R7$(3),e.JRh(n.title),e.R7$(),e.Y8G("ngIf",0==n.isEnabled),e.R7$(2),e.SpI(" ",n.userType," ")}}function B(t,R){if(1&t&&(e.j41(0,"nz-table",5,0)(2,"thead")(3,"tr")(4,"th"),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"th"),e.EFF(8),e.nI1(9,"translate"),e.k0s()()(),e.j41(10,"tbody"),e.DNE(11,A,7,4,"tr",6),e.k0s()()),2&t){let n,r;const u=R.ngIf,h=e.sdS(1);e.Y8G("nzFrontPagination",!1)("nzData",null!==(n=null==u?null:u.nodes)&&void 0!==n?n:e.lJ4(10,V))("nzTotal",null!==(r=null==u?null:u.totalCount)&&void 0!==r?r:0),e.R7$(5),e.JRh(e.bMT(6,6,"profile.name")),e.R7$(3),e.JRh(e.bMT(9,8,"profile.userType")),e.R7$(3),e.Y8G("ngForOf",h.data)}}let P=(()=>{class t{route;tableService;tagColor;query;constructor(n,r,u){this.route=n,this.tableService=r,this.tagColor=u}ngOnInit(){this.query=this.route.data.pipe((0,z.T)(n=>n.orderCancelReasons))}static \u0275fac=function(r){return new(r||t)(e.rXU(o.nX),e.rXU(I.a),e.rXU(y.t))};static \u0275cmp=e.VBU({type:t,selectors:[["app-review-parameters-list"]],standalone:!1,decls:11,vars:13,consts:[["table",""],["nzBackIcon","",3,"nzGhost","nzTitle","nzSubtitle"],["nz-button","","nzType","primary","routerLink","new"],["nz-icon","","nzType","plus"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal",4,"ngIf"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal"],["class","group cursor-pointer",3,"routerLink",4,"ngFor","ngForOf"],[1,"group","cursor-pointer",3,"routerLink"],[1,"mr-2"],["nzColor","error",3,"nzBordered",4,"ngIf"],["nzColor","error",3,"nzBordered"]],template:function(r,u){if(1&r&&(e.j41(0,"nz-page-header",1),e.nI1(1,"translate"),e.nI1(2,"translate"),e.j41(3,"nz-page-header-extra")(4,"button",2),e.nrm(5,"i",3),e.EFF(6),e.nI1(7,"translate"),e.k0s()(),e.j41(8,"nz-page-header-content"),e.DNE(9,B,12,11,"nz-table",4),e.nI1(10,"async"),e.k0s()()),2&r){let h;e.Y8G("nzGhost",!1)("nzTitle",e.bMT(1,5,"cancelReasons.title"))("nzSubtitle",e.bMT(2,7,"cancelReasons.subtitle")),e.R7$(6),e.JRh(e.bMT(7,9,"profile.add")),e.R7$(3),e.Y8G("ngIf",null==(h=e.bMT(10,11,u.query))||null==h.data?null:h.data.orderCancelReasons)}},dependencies:[v.Wk,s.Sq,s.bT,i.CP,i.SO,i._4,i.IL,i.aj,i.kt,l.aO,c.c,p.p,d.Dn,f.s,m.WB,m.zR,m.ov,s.Jj,F.D9],encapsulation:2})}return t})(),O=(()=>{class t{tableService;gql;constructor(n,r){this.tableService=n,this.gql=r}resolve(n,r){const u=this.tableService.deserializeQueryParams(n.queryParams);return this.gql.fetch(u)}static \u0275fac=function(r){return new(r||t)(e.KVO(I.a),e.KVO(C.Pc))};static \u0275prov=e.jDH({token:t,factory:t.\u0275fac})}return t})();var U=a(467),g=a(9417),S=a(4843),X=a(7094),x=a(1011),E=a(7529),T=a(8927),G=a(1997),Q=a(5703),Y=a(7481);const k=t=>[t];function J(t,R){if(1&t){const n=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(n);const u=e.XpG();return e.Njj(u.onSubmit())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("disabled",n.form.invalid),e.R7$(),e.JRh(e.bMT(2,2,"profile.submit"))}}let $=(()=>{class t{route;router;fb;createGQL;updateGQL;msg;form;constructor(n,r,u,h,M,W){this.route=n,this.router=r,this.fb=u,this.createGQL=h,this.updateGQL=M,this.msg=W,this.form=this.fb.group({id:[null],title:[null,g.k0.required],userType:[null,g.k0.required],isEnabled:[!0,g.k0.required]})}ngAfterViewInit(){this.initializeDrawingManager()}initializeDrawingManager(){this.route.data.subscribe(n=>{if(null!=n.orderCancelReason){const u=n.orderCancelReason.data.orderCancelReason;null!=u&&this.form.patchValue(u)}})}onSubmit(){var n=this;return(0,U.A)(function*(){try{const{id:r,...u}=n.form.value;null==r?yield(0,S._)(n.createGQL.mutate({input:u})):yield(0,S._)(n.updateGQL.mutate({id:r,update:u})),n.router.navigate(["management/order-cancel-reasons"],{relativeTo:n.route.root})}catch(r){n.msg.error(r.message)}})()}static \u0275fac=function(r){return new(r||t)(e.rXU(o.nX),e.rXU(o.Ix),e.rXU(g.ze),e.rXU(C.vs5),e.rXU(C.OX8),e.rXU(X.xh))};static \u0275cmp=e.VBU({type:t,selectors:[["app-review-parameter-view"]],standalone:!1,decls:28,vars:20,consts:[["tmplActions",""],["nzBackIcon","",3,"nzGhost","nzTitle","nzSubtitle"],[3,"nzActions"],["nz-form","",3,"ngSubmit","formGroup"],["formControlName","id","type","hidden","hidden",""],["nzRequired","","nzFor","title"],[3,"nzErrorTip"],["nz-input","","formControlName","title","id","title"],["nzFor","userType"],["nzMode","default","nzPlaceHolder","Please select","formControlName","userType"],["nzLabel","Driver","nzValue","Driver"],["nzLabel","Rider","nzValue","Rider"],["nzRequired","","nzFor","isEnabled"],["required","","id","isEnabled","formControlName","isEnabled"],["nz-button","","nzType","primary",3,"click","disabled"]],template:function(r,u){if(1&r){const h=e.RV6();e.nrm(0,"nz-page-header",1),e.nI1(1,"translate"),e.nI1(2,"translate"),e.j41(3,"nz-card",2)(4,"form",3),e.bIt("ngSubmit",function(){return e.eBV(h),e.Njj(u.onSubmit())}),e.nrm(5,"input",4),e.j41(6,"nz-form-item")(7,"nz-form-label",5),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"nz-form-control",6),e.nI1(11,"translate"),e.nrm(12,"input",7),e.k0s()(),e.j41(13,"nz-form-item")(14,"nz-form-label",8),e.EFF(15,"User Type"),e.k0s(),e.j41(16,"nz-form-control")(17,"nz-select",9),e.nrm(18,"nz-option",10)(19,"nz-option",11),e.k0s()()(),e.j41(20,"nz-form-item")(21,"nz-form-label",12),e.EFF(22),e.nI1(23,"translate"),e.k0s(),e.j41(24,"nz-form-control"),e.nrm(25,"nz-switch",13),e.k0s()(),e.DNE(26,J,3,4,"ng-template",null,0,e.C5r),e.k0s()()}if(2&r){const h=e.sdS(27);e.Y8G("nzGhost",!1)("nzTitle",e.bMT(1,8,"cancelReason.title"))("nzSubtitle",e.bMT(2,10,"cancelReason.subtitle")),e.R7$(3),e.Y8G("nzActions",e.eq3(18,k,h)),e.R7$(),e.Y8G("formGroup",u.form),e.R7$(4),e.JRh(e.bMT(9,12,"profile.title")),e.R7$(2),e.Y8G("nzErrorTip",e.bMT(11,14,"error.titleInvalid")),e.R7$(12),e.JRh(e.bMT(23,16,"profile.visibilityStatus"))}},dependencies:[g.qT,g.me,g.BC,g.cb,g.YS,g.j4,g.JD,x.Sy,l.aO,c.c,p.p,E.Uq,E.e,T.CA,T.Ls,T.Mo,T.zS,G.ld,G.WI,m.WB,Q.cK,Y.u,F.D9],encapsulation:2})}return t})();const N=[{path:"",component:P,resolve:{orderCancelReasons:O},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"view/:id",component:$,resolve:{orderCancelReason:j}},{path:"new",component:$}];let K=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=e.$C({type:t});static \u0275inj=e.G2t({providers:[j,O],imports:[v.iI.forChild(N),v.iI]})}return t})();var w=a(5885);let H=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=e.$C({type:t});static \u0275inj=e.G2t({providers:[y.t],imports:[K,w.G]})}return t})()},6807:(D,b,a)=>{a.d(b,{a:()=>e});var v=a(1360),C=a(2209);let e=(()=>{class z{router;route;constructor(o,s){this.router=o,this.route=s}serializeQueryParams(o,s){const i={};if(i.pageIndex=o.pageIndex,i.pageSize=o.pageSize,null!=o.filter){const l=o.filter.filter(c=>null!=c.value&&c.value.length>0).map(c=>`${c.key}|${Array.isArray(c.value)?"in":"eq"}|${Array.isArray(c.value)?c.value.join("-"):c.value}`);null!=s.filter&&l.push(...s.filter.split(",")),i.filter=l.length>0?l.join(","):void 0}if(null!=o.sort&&o.sort.length>0){const l=o.sort.filter(c=>null!=c.value).map(c=>`${c.key}|${"ascend"==c.value?"ASC":"DESC"}`);null!=s.sort&&l.push(...s.sort.split(",")),i.sort=l.length>0?l.join(","):void 0}return i}onTableQueryParamsChange(o){const s=this.serializeQueryParams(o,this.route.snapshot.queryParams);this.router.navigate([],{relativeTo:this.route,queryParams:s,queryParamsHandling:"merge"})}filterText(o,s){const l=this.deserializeQueryParams(this.route).filter??{};l[o]=null!=s?{like:s}:{};const c=Object.keys(l).map(d=>{if(Object.keys(l[d]).length<1)return null;const f=Object.keys(l[d])[0];return`${d}|${f}|${"in"==f?l[d][f].join("-"):l[d][f]}`}).filter(d=>null!=d),p=c.length>0?c.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:p},queryParamsHandling:"merge"})}filterRange(o,s){const l=this.deserializeQueryParams(this.route).filter??{};l[o]=null!=s?{between:s}:{};const c=Object.keys(l).map(d=>{if(Object.keys(l[d]).length<1)return null;const f=Object.keys(l[d])[0];return`${d}|${f}|${"in"==f||"between"==f?l[d][f].join("-"):l[d][f]}`}).filter(d=>null!=d),p=c.length>0?c.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:p},queryParamsHandling:"merge"})}resetFilter(o,s){this.filterText(o,void 0),s.value=""}downloadURI(o,s){const i=document.createElement("a");i.download=s,i.href=o,i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i)}deserializeQueryParams(o){const s=o.sort?o.sort.split(",").map(p=>({field:p.split("|")[0],direction:p.split("|")[1]})):[],i={};null!=o.filter&&o.filter.split(",").forEach(p=>{const d={},f=p.split("|")[1];if("in"==f){const m=p.split("|")[2].split("-");d[f]=m}else if("between"==f){const m=p.split("|")[2].split("-");d[f]={lower:m[0],upper:m[1]}}else d[f]=p.split("|")[2];i[p.split("|")[0]]=d});const l=null!=o.pageIndex?parseInt(o.pageIndex):1,c=null!=o.pageSize?parseInt(o.pageSize):10;return{sorting:s.length>0?s:void 0,paging:{offset:(l-1)*c,limit:c},filter:null!=i&&Object.keys(i).length>0?i:void 0}}static \u0275fac=function(s){return new(s||z)(v.KVO(C.Ix),v.KVO(C.nX))};static \u0275prov=v.jDH({token:z,factory:z.\u0275fac,providedIn:"root"})}return z})()}}]);