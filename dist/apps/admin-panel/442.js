"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[442],{1442:(L,F,i)=>{i.r(F),i.d(F,{ManagementServiceOptionsModule:()=>W});var y=i(7624),j=i(467),m=i(9417),h=i(3241),S=i(4843),t=i(1360),I=i(2209),r=i(7094),a=i(8434),u=i(1011),s=i(513),l=i(6389),f=i(5930),c=i(7529),p=i(8927),g=i(1997),T=i(3062),D=i(5703);const A=n=>[n];function k(n,v){if(1&n&&t.nrm(0,"nz-option",14),2&n){const e=v.$implicit;t.Y8G("nzLabel",e)("nzValue",e)}}function M(n,v){if(1&n&&t.nrm(0,"nz-option",14),2&n){const e=v.$implicit;t.Y8G("nzLabel",e)("nzValue",e)}}function P(n,v){1&n&&(t.j41(0,"nz-form-item")(1,"nz-form-label",15),t.EFF(2,"Additional fee"),t.k0s(),t.j41(3,"nz-form-control"),t.nrm(4,"input",16),t.k0s()())}function Y(n,v){if(1&n){const e=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(e);const d=t.XpG();return t.Njj(d.onSubmit())}),t.EFF(1,"Save"),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("disabled",e.form.invalid)}}let G=(()=>{class n{route;router;fb;createGQL;updateGQL;msg;form;subscription;types=Object.keys(h.JcZ);icons=Object.keys(h.q0f);type=h.JcZ;constructor(e,o,d,z,b,C){this.route=e,this.router=o,this.fb=d,this.createGQL=z,this.updateGQL=b,this.msg=C,this.form=this.fb.group({id:[null],name:[null,m.k0.required],icon:[null,m.k0.required],type:[null,m.k0.required],additionalFee:[null]})}ngOnInit(){this.subscription=this.route.data.subscribe(e=>{if(null!=e.serviceOption){const d=e.serviceOption.data.serviceOption;null!=d&&this.form.patchValue(d)}})}ngOnDestroy(){this.subscription?.unsubscribe()}onSubmit(){var e=this;return(0,j.A)(function*(){try{console.log(e.form.value);const{id:o,name:d,icon:z,type:b,additionalFee:C}=e.form.value;null==o?yield(0,S._)(e.createGQL.mutate({input:{name:d,icon:z,type:b,additionalFee:parseFloat(C)}})):yield(0,S._)(e.updateGQL.mutate({id:o,update:{name:d,icon:z,type:b,additionalFee:parseFloat(C)}})),e.router.navigate(["management/service-options"],{relativeTo:e.route.root})}catch(o){e.msg.error(o.message)}})()}static \u0275fac=function(o){return new(o||n)(t.rXU(I.nX),t.rXU(I.Ix),t.rXU(m.ze),t.rXU(h.R5Y),t.rXU(h.wW6),t.rXU(r.xh))};static \u0275cmp=t.VBU({type:n,selectors:[["app-service-option-view"]],standalone:!1,decls:24,vars:8,consts:[["tmplActions",""],["nzBackIcon","","nzTitle","Service option definition","nzSubtitle","Options that can be enabled on specific services.",3,"nzGhost"],[3,"nzActions"],["nz-form","",3,"ngSubmit","formGroup"],["formControlName","id","type","hidden","hidden",""],["nzRequired","","nzFor","name"],["nzErrorTip","The input is not valid name"],["nz-input","","formControlName","name","id","name"],["nzFor","type","nzRequired",""],["formControlName","type","id","type"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzFor","icon","nzRequired",""],["formControlName","icon","id","icon"],[4,"ngIf"],[3,"nzLabel","nzValue"],["nzRequired","","nzFor","additionalFee"],["nz-input","","formControlName","additionalFee","id","additionalFee"],["nz-button","","nzType","primary",3,"click","disabled"]],template:function(o,d){if(1&o){const z=t.RV6();t.nrm(0,"nz-page-header",1),t.j41(1,"nz-card",2)(2,"form",3),t.bIt("ngSubmit",function(){return t.eBV(z),t.Njj(d.onSubmit())}),t.nrm(3,"input",4),t.j41(4,"nz-form-item")(5,"nz-form-label",5),t.EFF(6,"Name"),t.k0s(),t.j41(7,"nz-form-control",6),t.nrm(8,"input",7),t.k0s()(),t.j41(9,"nz-form-item")(10,"nz-form-label",8),t.EFF(11,"Type"),t.k0s(),t.j41(12,"nz-form-control")(13,"nz-select",9),t.DNE(14,k,1,2,"nz-option",10),t.k0s()()(),t.j41(15,"nz-form-item")(16,"nz-form-label",11),t.EFF(17,"Icon"),t.k0s(),t.j41(18,"nz-form-control")(19,"nz-select",12),t.DNE(20,M,1,2,"nz-option",10),t.k0s()()(),t.DNE(21,P,5,0,"nz-form-item",13)(22,Y,2,1,"ng-template",null,0,t.C5r),t.k0s()()}if(2&o){const z=t.sdS(23);t.Y8G("nzGhost",!1),t.R7$(),t.Y8G("nzActions",t.eq3(6,A,z)),t.R7$(),t.Y8G("formGroup",d.form),t.R7$(12),t.Y8G("ngForOf",d.types),t.R7$(6),t.Y8G("ngForOf",d.icons),t.R7$(),t.Y8G("ngIf",d.form.value.type==d.type.Paid)}},dependencies:[a.Sq,a.bT,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,u.Sy,s.aO,l.c,f.p,c.Uq,c.e,p.CA,p.Ls,p.Mo,p.zS,g.ld,g.WI,T.WB,D.cK],encapsulation:2})}return n})(),R=(()=>{class n{gql;constructor(e){this.gql=e}resolve(e,o){return this.gql.fetch({id:e.params.id})}static \u0275fac=function(o){return new(o||n)(t.KVO(h.iSX))};static \u0275prov=t.jDH({token:n,factory:n.\u0275fac})}return n})();var V=i(2067),B=i(6354),$=i(6807),O=i(3359),U=i(1951),X=i(8018);function N(n,v){if(1&n&&(t.j41(0,"tr",7)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s()()),2&n){const e=v.$implicit;t.Y8G("routerLink","view/"+e.id),t.R7$(2),t.JRh(e.name),t.R7$(2),t.Lme(" ",e.type," \u2022 ",e.icon," ")}}function Q(n,v){if(1&n&&(t.j41(0,"nz-table",5,0)(2,"thead")(3,"tr")(4,"th"),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Type"),t.k0s()()(),t.j41(9,"tbody"),t.DNE(10,N,5,4,"tr",6),t.k0s()()),2&n){const e=v.ngIf,o=t.sdS(1);t.Y8G("nzFrontPagination",!1)("nzData",e)("nzTotal",e.length),t.R7$(5),t.JRh(t.bMT(6,5,"profile.name")),t.R7$(5),t.Y8G("ngForOf",o.data)}}let x=(()=>{class n{route;tableService;tagColor;query;constructor(e,o,d){this.route=e,this.tableService=o,this.tagColor=d}ngOnInit(){this.query=this.route.data.pipe((0,B.T)(e=>e.serviceOptions))}static \u0275fac=function(o){return new(o||n)(t.rXU(I.nX),t.rXU($.a),t.rXU(V.t))};static \u0275cmp=t.VBU({type:n,selectors:[["app-service-options-list"]],standalone:!1,decls:11,vars:13,consts:[["ajaxTable",""],["nzBackIcon","",3,"nzGhost","nzTitle","nzSubtitle"],["nz-button","","nzType","primary","routerLink","new"],["nz-icon","","nzType","plus"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal",4,"ngIf"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal"],["class","group cursor-pointer",3,"routerLink",4,"ngFor","ngForOf"],[1,"group","cursor-pointer",3,"routerLink"]],template:function(o,d){if(1&o&&(t.j41(0,"nz-page-header",1),t.nI1(1,"translate"),t.nI1(2,"translate"),t.j41(3,"nz-page-header-extra")(4,"button",2),t.nrm(5,"i",3),t.EFF(6),t.nI1(7,"translate"),t.k0s()(),t.j41(8,"nz-page-header-content"),t.DNE(9,Q,11,7,"nz-table",4),t.nI1(10,"async"),t.k0s()()),2&o){let z;t.Y8G("nzGhost",!1)("nzTitle",t.bMT(1,5,"reviewParameters.title"))("nzSubtitle",t.bMT(2,7,"reviewParameters.subtitle")),t.R7$(6),t.JRh(t.bMT(7,9,"profile.add")),t.R7$(3),t.Y8G("ngIf",null==(z=t.bMT(10,11,d.query))||null==z.data?null:z.data.serviceOptions)}},dependencies:[y.Wk,a.Sq,a.bT,O.CP,O.SO,O._4,O.IL,O.aj,O.kt,s.aO,l.c,f.p,U.Dn,T.WB,T.zR,T.ov,a.Jj,X.D9],encapsulation:2})}return n})(),E=(()=>{class n{paging;gql;constructor(e,o){this.paging=e,this.gql=o}resolve(e,o){return this.gql.fetch()}static \u0275fac=function(o){return new(o||n)(t.KVO($.a),t.KVO(h.Mod))};static \u0275prov=t.jDH({token:n,factory:n.\u0275fac})}return n})();const J=[{path:"",component:x,resolve:{serviceOptions:E},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"view/:id",component:G,resolve:{serviceOption:R}},{path:"new",component:G}];let K=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=t.$C({type:n});static \u0275inj=t.G2t({providers:[E,R],imports:[y.iI.forChild(J),y.iI]})}return n})();var w=i(5885);let W=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=t.$C({type:n});static \u0275inj=t.G2t({providers:[V.t],imports:[K,w.G]})}return n})()},6807:(L,F,i)=>{i.d(F,{a:()=>m});var y=i(1360),j=i(2209);let m=(()=>{class t{router;route;constructor(r,a){this.router=r,this.route=a}serializeQueryParams(r,a){const u={};if(u.pageIndex=r.pageIndex,u.pageSize=r.pageSize,null!=r.filter){const s=r.filter.filter(l=>null!=l.value&&l.value.length>0).map(l=>`${l.key}|${Array.isArray(l.value)?"in":"eq"}|${Array.isArray(l.value)?l.value.join("-"):l.value}`);null!=a.filter&&s.push(...a.filter.split(",")),u.filter=s.length>0?s.join(","):void 0}if(null!=r.sort&&r.sort.length>0){const s=r.sort.filter(l=>null!=l.value).map(l=>`${l.key}|${"ascend"==l.value?"ASC":"DESC"}`);null!=a.sort&&s.push(...a.sort.split(",")),u.sort=s.length>0?s.join(","):void 0}return u}onTableQueryParamsChange(r){const a=this.serializeQueryParams(r,this.route.snapshot.queryParams);this.router.navigate([],{relativeTo:this.route,queryParams:a,queryParamsHandling:"merge"})}filterText(r,a){const s=this.deserializeQueryParams(this.route).filter??{};s[r]=null!=a?{like:a}:{};const l=Object.keys(s).map(c=>{if(Object.keys(s[c]).length<1)return null;const p=Object.keys(s[c])[0];return`${c}|${p}|${"in"==p?s[c][p].join("-"):s[c][p]}`}).filter(c=>null!=c),f=l.length>0?l.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:f},queryParamsHandling:"merge"})}filterRange(r,a){const s=this.deserializeQueryParams(this.route).filter??{};s[r]=null!=a?{between:a}:{};const l=Object.keys(s).map(c=>{if(Object.keys(s[c]).length<1)return null;const p=Object.keys(s[c])[0];return`${c}|${p}|${"in"==p||"between"==p?s[c][p].join("-"):s[c][p]}`}).filter(c=>null!=c),f=l.length>0?l.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:f},queryParamsHandling:"merge"})}resetFilter(r,a){this.filterText(r,void 0),a.value=""}downloadURI(r,a){const u=document.createElement("a");u.download=a,u.href=r,u.target="_blank",document.body.appendChild(u),u.click(),document.body.removeChild(u)}deserializeQueryParams(r){const a=r.sort?r.sort.split(",").map(f=>({field:f.split("|")[0],direction:f.split("|")[1]})):[],u={};null!=r.filter&&r.filter.split(",").forEach(f=>{const c={},p=f.split("|")[1];if("in"==p){const g=f.split("|")[2].split("-");c[p]=g}else if("between"==p){const g=f.split("|")[2].split("-");c[p]={lower:g[0],upper:g[1]}}else c[p]=f.split("|")[2];u[f.split("|")[0]]=c});const s=null!=r.pageIndex?parseInt(r.pageIndex):1,l=null!=r.pageSize?parseInt(r.pageSize):10;return{sorting:a.length>0?a:void 0,paging:{offset:(s-1)*l,limit:l},filter:null!=u&&Object.keys(u).length>0?u:void 0}}static \u0275fac=function(a){return new(a||t)(y.KVO(j.Ix),y.KVO(j.nX))};static \u0275prov=y.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);