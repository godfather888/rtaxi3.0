"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[293],{6807:(E,j,o)=>{o.d(j,{a:()=>G});var z=o(1360),y=o(2209);let G=(()=>{class f{router;route;constructor(r,s){this.router=r,this.route=s}serializeQueryParams(r,s){const u={};if(u.pageIndex=r.pageIndex,u.pageSize=r.pageSize,null!=r.filter){const i=r.filter.filter(c=>null!=c.value&&c.value.length>0).map(c=>`${c.key}|${Array.isArray(c.value)?"in":"eq"}|${Array.isArray(c.value)?c.value.join("-"):c.value}`);null!=s.filter&&i.push(...s.filter.split(",")),u.filter=i.length>0?i.join(","):void 0}if(null!=r.sort&&r.sort.length>0){const i=r.sort.filter(c=>null!=c.value).map(c=>`${c.key}|${"ascend"==c.value?"ASC":"DESC"}`);null!=s.sort&&i.push(...s.sort.split(",")),u.sort=i.length>0?i.join(","):void 0}return u}onTableQueryParamsChange(r){const s=this.serializeQueryParams(r,this.route.snapshot.queryParams);this.router.navigate([],{relativeTo:this.route,queryParams:s,queryParamsHandling:"merge"})}filterText(r,s){const i=this.deserializeQueryParams(this.route).filter??{};i[r]=null!=s?{like:s}:{};const c=Object.keys(i).map(l=>{if(Object.keys(i[l]).length<1)return null;const d=Object.keys(i[l])[0];return`${l}|${d}|${"in"==d?i[l][d].join("-"):i[l][d]}`}).filter(l=>null!=l),p=c.length>0?c.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:p},queryParamsHandling:"merge"})}filterRange(r,s){const i=this.deserializeQueryParams(this.route).filter??{};i[r]=null!=s?{between:s}:{};const c=Object.keys(i).map(l=>{if(Object.keys(i[l]).length<1)return null;const d=Object.keys(i[l])[0];return`${l}|${d}|${"in"==d||"between"==d?i[l][d].join("-"):i[l][d]}`}).filter(l=>null!=l),p=c.length>0?c.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:p},queryParamsHandling:"merge"})}resetFilter(r,s){this.filterText(r,void 0),s.value=""}downloadURI(r,s){const u=document.createElement("a");u.download=s,u.href=r,u.target="_blank",document.body.appendChild(u),u.click(),document.body.removeChild(u)}deserializeQueryParams(r){const s=r.sort?r.sort.split(",").map(p=>({field:p.split("|")[0],direction:p.split("|")[1]})):[],u={};null!=r.filter&&r.filter.split(",").forEach(p=>{const l={},d=p.split("|")[1];if("in"==d){const h=p.split("|")[2].split("-");l[d]=h}else if("between"==d){const h=p.split("|")[2].split("-");l[d]={lower:h[0],upper:h[1]}}else l[d]=p.split("|")[2];u[p.split("|")[0]]=l});const i=null!=r.pageIndex?parseInt(r.pageIndex):1,c=null!=r.pageSize?parseInt(r.pageSize):10;return{sorting:s.length>0?s:void 0,paging:{offset:(i-1)*c,limit:c},filter:null!=u&&Object.keys(u).length>0?u:void 0}}static \u0275fac=function(s){return new(s||f)(z.KVO(y.Ix),z.KVO(y.nX))};static \u0275prov=z.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},9293:(E,j,o)=>{o.r(j),o.d(j,{ManagementReviewParametersModule:()=>N});var z=o(7624),y=o(2067),G=o(6354),P=o(6807),t=o(1360),f=o(2209),R=o(8434),r=o(3359),s=o(513),u=o(6389),i=o(5930),c=o(1951),p=o(5699),l=o(3062),d=o(8018);function h(e,C){if(1&e&&(t.j41(0,"tr",7)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"nz-tag",8),t.EFF(5),t.k0s()()()),2&e){const n=C.$implicit,a=t.XpG(2);t.Y8G("routerLink","view/"+n.id),t.R7$(2),t.JRh(n.title),t.R7$(2),t.Y8G("nzColor",a.tagColor.boolean(n.isGood))("nzBordered",!1),t.R7$(),t.JRh(n.isGood?"Good":"Bad")}}function V(e,C){if(1&e&&(t.j41(0,"nz-table",5,0)(2,"thead")(3,"tr")(4,"th"),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Type"),t.k0s()()(),t.j41(9,"tbody"),t.DNE(10,h,6,5,"tr",6),t.k0s()()),2&e){const n=C.ngIf,a=t.sdS(1);t.Y8G("nzFrontPagination",!1)("nzData",n)("nzTotal",n.length),t.R7$(5),t.JRh(t.bMT(6,5,"profile.name")),t.R7$(5),t.Y8G("ngForOf",a.data)}}let A=(()=>{class e{route;tableService;router;tagColor;query;constructor(n,a,m,g){this.route=n,this.tableService=a,this.router=m,this.tagColor=g}ngOnInit(){this.query=this.route.data.pipe((0,G.T)(n=>n.reviewParameters))}static \u0275fac=function(a){return new(a||e)(t.rXU(f.nX),t.rXU(P.a),t.rXU(f.Ix),t.rXU(y.t))};static \u0275cmp=t.VBU({type:e,selectors:[["app-review-parameters-list"]],standalone:!1,decls:11,vars:13,consts:[["ajaxTable",""],["nzBackIcon","",3,"nzGhost","nzTitle","nzSubtitle"],["nz-button","","nzType","primary","routerLink","new"],["nz-icon","","nzType","plus"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal",4,"ngIf"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal"],["class","group cursor-pointer",3,"routerLink",4,"ngFor","ngForOf"],[1,"group","cursor-pointer",3,"routerLink"],[3,"nzColor","nzBordered"]],template:function(a,m){if(1&a&&(t.j41(0,"nz-page-header",1),t.nI1(1,"translate"),t.nI1(2,"translate"),t.j41(3,"nz-page-header-extra")(4,"button",2),t.nrm(5,"i",3),t.EFF(6),t.nI1(7,"translate"),t.k0s()(),t.j41(8,"nz-page-header-content"),t.DNE(9,V,11,7,"nz-table",4),t.nI1(10,"async"),t.k0s()()),2&a){let g;t.Y8G("nzGhost",!1)("nzTitle",t.bMT(1,5,"reviewParameters.title"))("nzSubtitle",t.bMT(2,7,"reviewParameters.subtitle")),t.R7$(6),t.JRh(t.bMT(7,9,"profile.add")),t.R7$(3),t.Y8G("ngIf",null==(g=t.bMT(10,11,m.query))||null==g.data?null:g.data.feedbackParameters)}},dependencies:[z.Wk,R.Sq,R.bT,r.CP,r.SO,r._4,r.IL,r.aj,r.kt,s.aO,u.c,i.p,c.Dn,p.s,l.WB,l.zR,l.ov,R.Jj,d.D9],encapsulation:2})}return e})();var T=o(3241);let F=(()=>{class e{paging;gql;constructor(n,a){this.paging=n,this.gql=a}resolve(n,a){return this.gql.fetch()}static \u0275fac=function(a){return new(a||e)(t.KVO(P.a),t.KVO(T.XcC))};static \u0275prov=t.jDH({token:e,factory:e.\u0275fac})}return e})();var D=o(467),v=o(9417),I=o(4843),B=o(7094),L=o(1011),w=o(7529),b=o(8927),X=o(5703),M=o(7481);const x=e=>[e];function U(e,C){if(1&e){const n=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(n);const m=t.XpG();return t.Njj(m.onSubmit())}),t.EFF(1,"Save"),t.k0s()}if(2&e){const n=t.XpG();t.Y8G("disabled",n.form.invalid)}}let S=(()=>{class e{route;router;fb;createGQL;updateGQL;msg;form;constructor(n,a,m,g,$,K){this.route=n,this.router=a,this.fb=m,this.createGQL=g,this.updateGQL=$,this.msg=K,this.form=this.fb.group({id:[null],title:[null,v.k0.required],isGood:[null,v.k0.required]})}ngAfterViewInit(){this.initializeDrawingManager()}initializeDrawingManager(){this.route.data.subscribe(n=>{if(null!=n.reviewParameter){const m=n.reviewParameter.data.feedbackParameter;null!=m&&this.form.patchValue(m)}})}onSubmit(){var n=this;return(0,D.A)(function*(){try{const{id:a,...m}=n.form.value;null==a?yield(0,I._)(n.createGQL.mutate({input:m})):yield(0,I._)(n.updateGQL.mutate({id:a,update:m})),n.router.navigate(["management/review-parameters"],{relativeTo:n.route.root})}catch(a){n.msg.error(a.message)}})()}static \u0275fac=function(a){return new(a||e)(t.rXU(f.nX),t.rXU(f.Ix),t.rXU(v.ze),t.rXU(T.miB),t.rXU(T.XXU),t.rXU(B.xh))};static \u0275cmp=t.VBU({type:e,selectors:[["app-review-parameter-view"]],standalone:!1,decls:16,vars:5,consts:[["tmplActions",""],["nzBackIcon","","nzTitle","New Review Parameter","nzSubtitle","Pramaters of reviews that rider can select for his rating.",3,"nzGhost"],[3,"nzActions"],["nz-form","",3,"ngSubmit","formGroup"],["formControlName","id","type","hidden","hidden",""],["nzRequired","","nzFor","title"],["nzErrorTip","The input is not valid name"],["nz-input","","formControlName","title","id","title"],["nzFor","isGood","nzRequired",""],["formControlName","isGood","id","isGood"],["nz-button","","nzType","primary",3,"click","disabled"]],template:function(a,m){if(1&a){const g=t.RV6();t.nrm(0,"nz-page-header",1),t.j41(1,"nz-card",2)(2,"form",3),t.bIt("ngSubmit",function(){return t.eBV(g),t.Njj(m.onSubmit())}),t.nrm(3,"input",4),t.j41(4,"nz-form-item")(5,"nz-form-label",5),t.EFF(6,"Title"),t.k0s(),t.j41(7,"nz-form-control",6),t.nrm(8,"input",7),t.k0s()(),t.j41(9,"nz-form-item")(10,"nz-form-label",8),t.EFF(11,"Is Good"),t.k0s(),t.j41(12,"nz-form-control"),t.nrm(13,"nz-switch",9),t.k0s()(),t.DNE(14,U,2,1,"ng-template",null,0,t.C5r),t.k0s()()}if(2&a){const g=t.sdS(15);t.Y8G("nzGhost",!1),t.R7$(),t.Y8G("nzActions",t.eq3(3,x,g)),t.R7$(),t.Y8G("formGroup",m.form)}},dependencies:[v.qT,v.me,v.BC,v.cb,v.j4,v.JD,L.Sy,s.aO,u.c,i.p,w.Uq,w.e,b.CA,b.Ls,b.Mo,b.zS,l.WB,X.cK,M.u],encapsulation:2})}return e})(),O=(()=>{class e{gql;constructor(n){this.gql=n}resolve(n,a){return this.gql.fetch({id:n.params.id})}static \u0275fac=function(a){return new(a||e)(t.KVO(T.POF))};static \u0275prov=t.jDH({token:e,factory:e.\u0275fac})}return e})();const Q=[{path:"",component:A,resolve:{reviewParameters:F},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"view/:id",component:S,resolve:{reviewParameter:O}},{path:"new",component:S}];let k=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({providers:[F,O],imports:[z.iI.forChild(Q),z.iI]})}return e})();var Y=o(5885);let N=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({providers:[y.t],imports:[k,Y.G]})}return e})()}}]);