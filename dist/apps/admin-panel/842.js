"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[842],{1842:(A,F,o)=>{o.r(F),o.d(F,{DispatcherModule:()=>me});var T=o(5885),e=o(1360),_=o(2209),j=o(7094),k=o(6501),f=o(8018),G=o(5703),a=o(8182);let d=(()=>{class r{router;route;messageService;modal;translate;current=0;selectedRiderId;services=[];currency;tripDistance=0;tripDuration=0;isLoadingRiders=!1;constructor(t,n,i,s,l){this.router=t,this.route=n,this.messageService=i,this.modal=s,this.translate=l}ngOnInit(){this.route.queryParams.subscribe(t=>{null!=t.serviceId?this.current=3:null!=t.points?this.current=2:null!=t.riderId&&(this.selectedRiderId=parseInt(t.riderId),this.current=1)})}viewRequest(t){this.router.navigate(["../../../requests/view",t],{relativeTo:this.route})}refreshDrivers(){}static \u0275fac=function(n){return new(n||r)(e.rXU(_.Ix),e.rXU(_.nX),e.rXU(j.xh),e.rXU(k.N_),e.rXU(f.c$))};static \u0275cmp=e.VBU({type:r,selectors:[["app-dispatcher"]],standalone:!1,decls:17,vars:25,consts:[[1,"grid","grid-cols-1"],[3,"nzCurrent"],[3,"nzTitle","nzDescription"],[1,"h-4","w-full"]],template:function(n,i){1&n&&(e.j41(0,"nz-card"),e.nrm(1,"div",0),e.j41(2,"nz-steps",1),e.nrm(3,"nz-step",2),e.nI1(4,"translate"),e.nI1(5,"translate"),e.nrm(6,"nz-step",2),e.nI1(7,"translate"),e.nI1(8,"translate"),e.nrm(9,"nz-step",2),e.nI1(10,"translate"),e.nI1(11,"translate"),e.nrm(12,"nz-step",2),e.nI1(13,"translate"),e.nI1(14,"translate"),e.k0s(),e.nrm(15,"div",3)(16,"router-outlet"),e.k0s()),2&n&&(e.R7$(2),e.Y8G("nzCurrent",i.current),e.R7$(),e.FS9("nzTitle",e.bMT(4,9,"dispatcher.rider.title")),e.FS9("nzDescription",e.bMT(5,11,"dispatcher.rider.description")),e.R7$(3),e.FS9("nzTitle",e.bMT(7,13,"dispatcher.location.title")),e.FS9("nzDescription",e.bMT(8,15,"dispatcher.location.description")),e.R7$(3),e.FS9("nzTitle",e.bMT(10,17,"dispatcher.service.title")),e.FS9("nzDescription",e.bMT(11,19,"dispatcher.service.description")),e.R7$(3),e.FS9("nzTitle",e.bMT(13,21,"dispatcher.looking.title")),e.FS9("nzDescription",e.bMT(14,23,"dispatcher.looking.description")))},dependencies:[_.n3,G.cK,a.XM,a.oM,f.D9],encapsulation:2})}return r})();var m=o(7624),c=o(8819),u=o(467),v=o(3350),p=o(9417),g=o(1011);const b=["addresstext"];let N=(()=>{class r{adressType;setAddress=new e.bkB;addresstext;autocompleteObject;autocompleteInput;queryWait;ngAfterViewInit(){this.getPlaceAutocomplete()}getPlaceAutocomplete(){this.autocompleteObject=new google.maps.places.Autocomplete(this.addresstext.nativeElement,{types:[this.adressType]}),google.maps.event.addListener(this.autocompleteObject,"place_changed",()=>{const t=this.autocompleteObject.getPlace();this.invokeEvent(t)})}setBounds(t){this.autocompleteObject.setBounds(t)}invokeEvent(t){this.setAddress.emit(t)}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=e.VBU({type:r,selectors:[["google-places-autocomplete"]],viewQuery:function(n,i){if(1&n&&e.GBs(b,5),2&n){let s;e.mGM(s=e.lsd())&&(i.addresstext=s.first)}},inputs:{adressType:"adressType"},outputs:{setAddress:"setAddress"},standalone:!1,decls:2,vars:1,consts:[["addresstext",""],["type","text","nz-input","",1,"input",2,"width","100%","margin-top","10px","margin-bottom","10px",3,"ngModelChange","ngModel"]],template:function(n,i){if(1&n){const s=e.RV6();e.j41(0,"input",1,0),e.mxI("ngModelChange",function(z){return e.eBV(s),e.DH7(i.autocompleteInput,z)||(i.autocompleteInput=z),e.Njj(z)}),e.k0s()}2&n&&e.R50("ngModel",i.autocompleteInput)},dependencies:[p.me,p.BC,p.vS,g.Sy],encapsulation:2})}return r})(),C=(()=>{class r{serializePoints(t){return t.map(n=>`${n.location.lat}|${n.location.lng}|${n.address}`).join("_")}deserializePoints(t){return t.split("_").map(n=>({location:{lat:parseFloat(n.split("|")[0]),lng:parseFloat(n.split("|")[1])},address:n.split("|")[2]}))}static \u0275fac=function(n){return new(n||r)};static \u0275prov=e.jDH({token:r,factory:r.\u0275fac})}return r})();var I=o(8434),M=o(513),$=o(6389),L=o(5930),O=o(7120);const P=()=>({draggable:!1});function V(r,h){if(1&r&&e.nrm(0,"map-marker",8,0),2&r){const t=h.$implicit;e.Y8G("position",t.location)("options",e.lJ4(3,P))("title",t.driverId.toString())}}function w(r,h){if(1&r&&e.nrm(0,"map-marker",8),2&r){const t=h.$implicit;e.Y8G("position",t.location)("options",e.lJ4(3,P))("title",t.address)}}function Y(r,h){if(1&r&&(e.j41(0,"nz-timeline-item"),e.EFF(1),e.k0s()),2&r){const t=h.$implicit;e.R7$(),e.JRh(t.address)}}let x=(()=>{class r{messageService;translate;route;router;dispatcherService;points=[];drivers=[];infoWindow;map;places;constructor(t,n,i,s,l){this.messageService=t,this.translate=n,this.route=i,this.router=s,this.dispatcherService=l}getAddress(t){this.map.panTo(t.geometry.location)}removeLastPoint(){this.points.pop()}mapClicked(t){var n=this;return(0,u.A)(function*(){const i=new google.maps.Geocoder,s=n.messageService.loading(n.translate.instant("dispatcher.determiningLocation"),{nzDuration:0}).messageId;i.geocode({location:t.latLng},(l,z)=>{t.latLng&&(n.points.push({location:t.latLng?.toJSON(),address:l[0].formatted_address}),n.messageService.remove(s))})})()}goToServiceSelection(){this.router.navigate(["../service-select"],{relativeTo:this.route,queryParams:{points:this.dispatcherService.serializePoints(this.points)},queryParamsHandling:"merge"})}centerMap(){if(0==this.drivers.length)return void(this.map.zoom=1);if(1==this.drivers.length)return this.map.center=this.drivers[0].location,void(this.map.zoom=16);const t=new google.maps.LatLngBounds;for(const i of this.drivers)t.extend(i.location);const n=new google.maps.LatLngBounds(new google.maps.LatLng(t.getSouthWest().lat()-2,t.getSouthWest().lng()-2),new google.maps.LatLng(t.getNorthEast().lat()+2,t.getNorthEast().lng()+2));this.places.setBounds(n),this.map.fitBounds(t)}static \u0275fac=function(n){return new(n||r)(e.rXU(j.xh),e.rXU(f.c$),e.rXU(_.nX),e.rXU(_.Ix),e.rXU(C))};static \u0275cmp=e.VBU({type:r,selectors:[["app-dispatcher-locations-select"]],viewQuery:function(n,i){if(1&n&&(e.GBs(v.D1,5),e.GBs(v.u6,5),e.GBs(N,5)),2&n){let s;e.mGM(s=e.lsd())&&(i.infoWindow=s.first),e.mGM(s=e.lsd())&&(i.map=s.first),e.mGM(s=e.lsd())&&(i.places=s.first)}},standalone:!1,decls:15,vars:10,consts:[["marker",""],["adressType","geocode",3,"setAddress"],["height","700px","width","100%",3,"mapClick"],[3,"position","options","title",4,"ngFor","ngForOf"],[1,"pt-16"],[4,"ngFor","ngForOf"],["nz-button","","nzDanger","",2,"margin-top","8px","margin-right","4px",3,"click"],["nz-button","","nzType","default",2,"margin-top","8px",3,"click","disabled"],[3,"position","options","title"]],template:function(n,i){1&n&&(e.j41(0,"google-places-autocomplete",1),e.bIt("setAddress",function(l){return i.getAddress(l)}),e.k0s(),e.j41(1,"google-map",2),e.bIt("mapClick",function(l){return i.mapClicked(l)}),e.DNE(2,V,2,4,"map-marker",3)(3,w,1,4,"map-marker",3),e.k0s(),e.j41(4,"nz-card")(5,"nz-timeline",4),e.DNE(6,Y,2,1,"nz-timeline-item",5),e.k0s()(),e.j41(7,"button",6),e.bIt("click",function(){return i.removeLastPoint()}),e.j41(8,"span"),e.EFF(9),e.nI1(10,"translate"),e.k0s()(),e.j41(11,"button",7),e.bIt("click",function(){return i.goToServiceSelection()}),e.j41(12,"span"),e.EFF(13),e.nI1(14,"translate"),e.k0s()()),2&n&&(e.R7$(2),e.Y8G("ngForOf",i.drivers),e.R7$(),e.Y8G("ngForOf",i.points),e.R7$(3),e.Y8G("ngForOf",i.points),e.R7$(3),e.JRh(e.bMT(10,6,"dispatcher.removeLastPoint")),e.R7$(2),e.Y8G("disabled",0===i.points.length),e.R7$(2),e.JRh(e.bMT(14,8,"profile.next")))},dependencies:[I.Sq,M.aO,$.c,L.p,O.SO,O.XJ,G.cK,v.u6,v.fU,N,f.D9],encapsulation:2})}return r})();var R=o(3241),E=o(4843),X=o(2542);function Q(r,h){if(1&r){const t=e.RV6();e.j41(0,"nz-result",2)(1,"div",3)(2,"button",4),e.EFF(3,"View Request Details"),e.k0s(),e.j41(4,"button",5),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancelRequest())}),e.EFF(5,"Cancel Request"),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("routerLink","/requests/view/"+t.orderId)}}function J(r,h){if(1&r&&(e.j41(0,"nz-result",8)(1,"div",3)(2,"button",4),e.EFF(3,"View Request Details"),e.k0s()()()),2&r){const t=e.XpG().ngIf;e.yjJ("nzTitle","",null==t.driver?null:t.driver.firstName," ",null==t.driver?null:t.driver.lastName," (",null==t.driver?null:t.driver.mobileNumber,") has accepted the request. Go to the trip page for more information."),e.R7$(2),e.Y8G("routerLink","/requests/view/"+t.id)}}function q(r,h){if(1&r&&(e.j41(0,"nz-result",9)(1,"div",3)(2,"button",4),e.EFF(3,"View Request Details"),e.k0s()()()),2&r){const t=e.XpG().ngIf;e.Mz_("nzTitle","Trip status is updated to ",t.status,"."),e.R7$(2),e.Y8G("routerLink","/requests/view/"+t.id)}}function H(r,h){if(1&r&&(e.j41(0,"div"),e.DNE(1,J,4,5,"nz-result",6)(2,q,4,3,"nz-result",7),e.k0s()),2&r){const t=h.ngIf;e.R7$(),e.Y8G("ngIf","DriverAccepted"==t.status),e.R7$(),e.Y8G("ngIf","DriverAccepted"!=t.status)}}let K=(()=>{class r{orderUpdateSubscription;cancelOrderMutation;route;router;msg;query;orderId;constructor(t,n,i,s,l){this.orderUpdateSubscription=t,this.cancelOrderMutation=n,this.route=i,this.router=s,this.msg=l}ngOnInit(){this.orderId=this.route.snapshot.queryParams.requestId,this.query=this.orderUpdateSubscription.subscribe({id:this.orderId})}cancelRequest(){var t=this;return(0,u.A)(function*(){const n=t.route.snapshot.queryParams.requestId;yield(0,E._)(t.cancelOrderMutation.mutate({orderId:n})),t.msg.success("Order Canceled."),t.router.navigate(["../riders-list"],{relativeTo:t.route})})()}static \u0275fac=function(n){return new(n||r)(e.rXU(R.wEH),e.rXU(R.foQ),e.rXU(_.nX),e.rXU(_.Ix),e.rXU(j.xh))};static \u0275cmp=e.VBU({type:r,selectors:[["app-dispatcher-looking"]],standalone:!1,decls:4,vars:6,consts:[["nzStatus","info","nzTitle","Looking For suitable driver. Please wait...",4,"ngIf"],[4,"ngIf"],["nzStatus","info","nzTitle","Looking For suitable driver. Please wait..."],["nz-result-extra",""],["nz-button","","nzType","primary",3,"routerLink"],["nz-button","","nzType","primary","nzDanger","",3,"click"],["nzStatus","success",3,"nzTitle",4,"ngIf"],["nzStatus","info",3,"nzTitle",4,"ngIf"],["nzStatus","success",3,"nzTitle"],["nzStatus","info",3,"nzTitle"]],template:function(n,i){if(1&n&&(e.DNE(0,Q,6,1,"nz-result",0),e.nI1(1,"async"),e.DNE(2,H,3,2,"div",1),e.nI1(3,"async")),2&n){let s,l;e.Y8G("ngIf",null==(null==(s=e.bMT(1,2,i.query))||null==s.data?null:s.data.orderUpdated)),e.R7$(2),e.Y8G("ngIf",null==(l=e.bMT(3,4,i.query))||null==l.data?null:l.data.orderUpdated)}},dependencies:[I.bT,m.Wk,M.aO,$.c,L.p,X.zU,X.H4,I.Jj],encapsulation:2})}return r})();var W=o(6807),U=o(6354),S=o(3359),Z=o(2602),ee=o(1951),te=o(8852),ne=o(314);function re(r,h){if(1&r){const t=e.RV6();e.j41(0,"tr",18),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.selectRider(i.id))}),e.j41(1,"td")(2,"div",19),e.EFF(3),e.k0s()(),e.j41(4,"td")(5,"a",20),e.EFF(6),e.nI1(7,"phone"),e.k0s()()()}if(2&r){const t=h.$implicit;e.R7$(3),e.Lme(" ",t.firstName," ",t.lastName," "),e.R7$(2),e.Y8G("href","tel:+"+t.mobileNumber,e.B4B),e.R7$(),e.JRh(e.bMT(7,4,t.mobileNumber))}}function ie(r,h){if(1&r){const t=e.RV6();e.j41(0,"nz-table",12,4),e.bIt("nzQueryParams",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.tableService.onTableQueryParamsChange(i))}),e.j41(2,"thead")(3,"tr")(4,"th",13),e.EFF(5),e.nI1(6,"translate"),e.j41(7,"nz-filter-trigger",14),e.nI1(8,"async"),e.nrm(9,"i",15),e.k0s()(),e.j41(10,"th",16),e.EFF(11),e.nI1(12,"translate"),e.j41(13,"nz-filter-trigger",14),e.nI1(14,"async"),e.nrm(15,"i",15),e.k0s()()()(),e.j41(16,"tbody"),e.DNE(17,re,8,6,"tr",17),e.k0s()()}if(2&r){let t,n;const i=h.ngIf,s=e.sdS(1),l=e.XpG(),z=e.sdS(3),D=e.sdS(16);e.Y8G("nzFrontPagination",!1)("nzData",i.nodes)("nzTotal",i.totalCount),e.R7$(4),e.Y8G("nzSortFn",!0),e.R7$(),e.SpI(" ",e.bMT(6,12,"profile.name")," "),e.R7$(2),e.Y8G("nzActive",null==(t=e.bMT(8,14,l.route.queryParams))||null==t.filter?null:t.filter.includes("lastName|like|"))("nzDropdownMenu",z),e.R7$(3),e.Y8G("nzSortFn",!0),e.R7$(),e.SpI(" ",e.bMT(12,16,"profile.mobileNumber")," "),e.R7$(2),e.Y8G("nzActive",null==(n=e.bMT(14,18,l.route.queryParams))||null==n.filter?null:n.filter.includes("mobileNumber|like|"))("nzDropdownMenu",D),e.R7$(4),e.Y8G("ngForOf",s.data)}}let se=(()=>{class r{route;translate;tableService;router;query;constructor(t,n,i,s){this.route=t,this.translate=n,this.tableService=i,this.router=s}ngOnInit(){this.query=this.route.data.pipe((0,U.T)(t=>t.riders))}selectRider(t){this.router.navigate(["../locations-select"],{relativeTo:this.route,queryParams:{riderId:t},queryParamsHandling:"merge"})}static \u0275fac=function(n){return new(n||r)(e.rXU(_.nX),e.rXU(f.c$),e.rXU(W.a),e.rXU(_.Ix))};static \u0275cmp=e.VBU({type:r,selectors:[["app-dispatcher-riders-list"]],standalone:!1,decls:27,vars:18,consts:[["filtername","nzDropdownMenu"],["lastNameInput",""],["filtermobile","nzDropdownMenu"],["mobileNumberInput",""],["table",""],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["nz-input","",3,"placeholder"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],["nz-input","","placeholder","Search Mobile Number"],["nzShowSizeChanger","","nzBordered","",3,"nzQueryParams","nzFrontPagination","nzData","nzTotal"],["nzCustomFilter","","nzColumnKey","lastName",3,"nzSortFn"],[3,"nzActive","nzDropdownMenu"],["nz-icon","","nzType","search"],["nzCustomFilter","","nzColumnKey","mobileNumber",3,"nzSortFn"],["class","group cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"group","cursor-pointer",3,"click"],["nz-typography",""],[3,"href"]],template:function(n,i){if(1&n){const s=e.RV6();e.DNE(0,ie,18,20,"nz-table",5),e.nI1(1,"async"),e.j41(2,"nz-dropdown-menu",null,0)(4,"div",6)(5,"div",7),e.nrm(6,"input",8,1),e.nI1(8,"translate"),e.j41(9,"button",9),e.bIt("click",function(){e.eBV(s);const z=e.sdS(7);return e.Njj(i.tableService.filterText("lastName",z.value))}),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"button",10),e.bIt("click",function(){e.eBV(s);const z=e.sdS(7);return e.Njj(i.tableService.resetFilter("lastName",z))}),e.EFF(13),e.nI1(14,"translate"),e.k0s()()()(),e.j41(15,"nz-dropdown-menu",null,2)(17,"div",6)(18,"div",7),e.nrm(19,"input",11,3),e.j41(21,"button",9),e.bIt("click",function(){e.eBV(s);const z=e.sdS(20);return e.Njj(i.tableService.filterText("mobileNumber",z.value))}),e.EFF(22),e.nI1(23,"translate"),e.k0s(),e.j41(24,"button",10),e.bIt("click",function(){e.eBV(s);const z=e.sdS(20);return e.Njj(i.tableService.resetFilter("mobileNumber",z))}),e.EFF(25),e.nI1(26,"translate"),e.k0s()()()()}if(2&n){let s;e.Y8G("ngIf",null==(s=e.bMT(1,6,i.query))||null==s.data?null:s.data.riders),e.R7$(6),e.FS9("placeholder",e.bMT(8,8,"profile.lastName")),e.R7$(4),e.SpI(" ",e.bMT(11,10,"profile.search")," "),e.R7$(3),e.JRh(e.bMT(14,12,"profile.reset")),e.R7$(9),e.SpI(" ",e.bMT(23,14,"profile.search")," "),e.R7$(3),e.JRh(e.bMT(26,16,"profile.reset"))}},dependencies:[I.Sq,I.bT,S.CP,S.Cc,S.SO,S._4,S.IL,S.aj,S.kt,S.Kg,g.Sy,Z.wQ,M.aO,$.c,L.p,ee.Dn,te.Di,I.Jj,ne.X,f.D9],encapsulation:2})}return r})();var oe=o(8960),y=o(2617);function ae(r,h){if(1&r){const t=e.RV6();e.j41(0,"li",7)(1,"ul",8)(2,"nz-list-item-action")(3,"a",9),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(3);return e.Njj(s.selectService(i))}),e.EFF(4),e.nI1(5,"translate"),e.k0s()()(),e.EFF(6),e.nI1(7,"currency"),e.k0s()}if(2&r){const t=h.$implicit,n=e.XpG(2).ngIf;e.R7$(4),e.JRh(e.bMT(5,3,"profile.select")),e.R7$(2),e.Lme(" ",t.name," (",e.i5U(7,5,t.cost,n.currency),") ")}}function le(r,h){if(1&r&&(e.j41(0,"div"),e.DNE(1,ae,8,8,"li",6),e.k0s()),2&r){const t=h.$implicit;e.R7$(),e.Y8G("ngForOf",t.services)}}function ce(r,h){if(1&r&&(e.j41(0,"ul",4)(1,"nz-list-header"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,le,2,1,"div",5),e.k0s()),2&r){const t=h.ngIf;e.Y8G("nzDataSource",t.services),e.R7$(2),e.JRh(e.bMT(3,3,"profile.services")),e.R7$(2),e.Y8G("ngForOf",t.services)}}let ue=(()=>{class r{route;router;dispatcherService;createOrderMutation;query;time=new Date;constructor(t,n,i,s){this.route=t,this.router=n,this.dispatcherService=i,this.createOrderMutation=s}ngOnInit(){this.query=this.route.data.pipe((0,U.T)(t=>t.services))}selectService(t){var n=this;return(0,u.A)(function*(){const i=n.route.snapshot.queryParams.riderId,s=n.dispatcherService.deserializePoints(n.route.snapshot.queryParams.points);let l=((new Date).getTime()-n.time.getTime())/1e3/60;l=Math.abs(Math.round(l));const z=yield(0,E._)(n.createOrderMutation.mutate({riderId:i,points:s.map(D=>D.location),addresses:s.map(D=>D.address),serviceId:t.id,intervalMinutes:l>0?l:0}));n.router.navigate(["../looking"],{relativeTo:n.route,queryParams:{requestId:z.data?.createOrder.id,points:void 0,riderId:void 0}})})()}static \u0275fac=function(n){return new(n||r)(e.rXU(_.nX),e.rXU(_.Ix),e.rXU(C),e.rXU(R.NCO))};static \u0275cmp=e.VBU({type:r,selectors:[["app-dispatcher-service-select"]],standalone:!1,decls:6,vars:5,consts:[[1,"flex","flex-col","gap-4"],[1,""],["nzFormat","MM/dd/yyyy hh:mm",3,"ngModelChange","ngModel","nzShowTime"],["nz-list","","nzBordered","","nzSize","large",3,"nzDataSource",4,"ngIf"],["nz-list","","nzBordered","","nzSize","large",3,"nzDataSource"],[4,"ngFor","ngForOf"],["nz-list-item","","nzNoFlex","",4,"ngFor","ngForOf"],["nz-list-item","","nzNoFlex",""],["nz-list-item-actions",""],[3,"click"]],template:function(n,i){if(1&n&&(e.j41(0,"div",0)(1,"h5",1),e.EFF(2,"Time"),e.k0s(),e.j41(3,"nz-date-picker",2),e.mxI("ngModelChange",function(l){return e.DH7(i.time,l)||(i.time=l),l}),e.k0s(),e.DNE(4,ce,5,5,"ul",3),e.nI1(5,"async"),e.k0s()),2&n){let s;e.R7$(3),e.R50("ngModel",i.time),e.Y8G("nzShowTime",!0),e.R7$(),e.Y8G("ngIf",null==(s=e.bMT(5,3,i.query))||null==s.data?null:s.data.calculateFare)}},dependencies:[I.Sq,I.bT,p.BC,p.vS,oe.SN,y.eE,y.Xo,y.lQ,y.MV,y.Tc,I.Jj,I.oe,f.D9],encapsulation:2})}return r})(),B=(()=>{class r{dispatcherService;gql;constructor(t,n){this.dispatcherService=t,this.gql=n}resolve(t,n){const i=this.dispatcherService.deserializePoints(t.queryParams.points);return this.gql.fetch({points:i.map(s=>s.location),riderId:t.queryParams.riderId})}static \u0275fac=function(n){return new(n||r)(e.KVO(C),e.KVO(R.IHV))};static \u0275prov=e.jDH({token:r,factory:r.\u0275fac})}return r})();const pe=[{path:"",component:d,children:[{path:"",redirectTo:"riders-list",pathMatch:"full"},{path:"riders-list",component:se,resolve:{riders:c.I},runGuardsAndResolvers:"pathParamsOrQueryParamsChange"},{path:"locations-select",component:x},{path:"service-select",component:ue,resolve:{services:B}}]},{path:"looking",component:K}];let de=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=e.$C({type:r});static \u0275inj=e.G2t({providers:[c.I,B],imports:[m.iI.forChild(pe),m.iI]})}return r})(),me=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=e.$C({type:r});static \u0275inj=e.G2t({providers:[C],imports:[I.MD,de,T.G]})}return r})()},6807:(A,F,o)=>{o.d(F,{a:()=>_});var T=o(1360),e=o(2209);let _=(()=>{class f{router;route;constructor(a,d){this.router=a,this.route=d}serializeQueryParams(a,d){const m={};if(m.pageIndex=a.pageIndex,m.pageSize=a.pageSize,null!=a.filter){const c=a.filter.filter(u=>null!=u.value&&u.value.length>0).map(u=>`${u.key}|${Array.isArray(u.value)?"in":"eq"}|${Array.isArray(u.value)?u.value.join("-"):u.value}`);null!=d.filter&&c.push(...d.filter.split(",")),m.filter=c.length>0?c.join(","):void 0}if(null!=a.sort&&a.sort.length>0){const c=a.sort.filter(u=>null!=u.value).map(u=>`${u.key}|${"ascend"==u.value?"ASC":"DESC"}`);null!=d.sort&&c.push(...d.sort.split(",")),m.sort=c.length>0?c.join(","):void 0}return m}onTableQueryParamsChange(a){const d=this.serializeQueryParams(a,this.route.snapshot.queryParams);this.router.navigate([],{relativeTo:this.route,queryParams:d,queryParamsHandling:"merge"})}filterText(a,d){const c=this.deserializeQueryParams(this.route).filter??{};c[a]=null!=d?{like:d}:{};const u=Object.keys(c).map(p=>{if(Object.keys(c[p]).length<1)return null;const g=Object.keys(c[p])[0];return`${p}|${g}|${"in"==g?c[p][g].join("-"):c[p][g]}`}).filter(p=>null!=p),v=u.length>0?u.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:v},queryParamsHandling:"merge"})}filterRange(a,d){const c=this.deserializeQueryParams(this.route).filter??{};c[a]=null!=d?{between:d}:{};const u=Object.keys(c).map(p=>{if(Object.keys(c[p]).length<1)return null;const g=Object.keys(c[p])[0];return`${p}|${g}|${"in"==g||"between"==g?c[p][g].join("-"):c[p][g]}`}).filter(p=>null!=p),v=u.length>0?u.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:v},queryParamsHandling:"merge"})}resetFilter(a,d){this.filterText(a,void 0),d.value=""}downloadURI(a,d){const m=document.createElement("a");m.download=d,m.href=a,m.target="_blank",document.body.appendChild(m),m.click(),document.body.removeChild(m)}deserializeQueryParams(a){const d=a.sort?a.sort.split(",").map(v=>({field:v.split("|")[0],direction:v.split("|")[1]})):[],m={};null!=a.filter&&a.filter.split(",").forEach(v=>{const p={},g=v.split("|")[1];if("in"==g){const b=v.split("|")[2].split("-");p[g]=b}else if("between"==g){const b=v.split("|")[2].split("-");p[g]={lower:b[0],upper:b[1]}}else p[g]=v.split("|")[2];m[v.split("|")[0]]=p});const c=null!=a.pageIndex?parseInt(a.pageIndex):1,u=null!=a.pageSize?parseInt(a.pageSize):10;return{sorting:d.length>0?d:void 0,paging:{offset:(c-1)*u,limit:u},filter:null!=m&&Object.keys(m).length>0?m:void 0}}static \u0275fac=function(d){return new(d||f)(T.KVO(e.Ix),T.KVO(e.nX))};static \u0275prov=T.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()}}]);